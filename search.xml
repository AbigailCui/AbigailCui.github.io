<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Git</title>
    <url>/2021/05/14/Git%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="1-Gitåˆæ­¥è®¤è¯†"><a href="#1-Gitåˆæ­¥è®¤è¯†" class="headerlink" title="1.Gitåˆæ­¥è®¤è¯†"></a>1.Gitåˆæ­¥è®¤è¯†</h2><h2 id="1-1Gitæ“ä½œ"><a href="#1-1Gitæ“ä½œ" class="headerlink" title="1.1Gitæ“ä½œ"></a>1.1Gitæ“ä½œ</h2><h3 id="1-1-1åŸºç¡€æ“ä½œ"><a href="#1-1-1åŸºç¡€æ“ä½œ" class="headerlink" title="1.1.1åŸºç¡€æ“ä½œ"></a>1.1.1åŸºç¡€æ“ä½œ</h3><ul>
<li>git init ï¼ˆåˆå§‹åŒ–ä»“åº“ï¼‰</li>
<li>git status ï¼ˆæ£€æŸ¥æ–‡ä»¶ï¼Œä»“åº“çŠ¶æ€ï¼‰</li>
<li>git add æ–‡ä»¶å.æ–‡ä»¶åç¼€ï¼ˆæ·»åŠ æ–‡ä»¶è‡³æš‚å­˜åŒºï¼‰</li>
<li>git commit -m â€œæ›´æ–°è®°å½•â€ ï¼ˆæäº¤ï¼‰</li>
<li>git log ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰</li>
<li>gitk ï¼ˆå›¾å½¢ç•Œé¢ï¼‰-patchï¼ˆå·®å¼‚ï¼‰</li>
</ul>
<h3 id="1-1-2è¿œç¨‹ä»“åº“æ“ä½œ"><a href="#1-1-2è¿œç¨‹ä»“åº“æ“ä½œ" class="headerlink" title="1.1.2è¿œç¨‹ä»“åº“æ“ä½œ"></a>1.1.2è¿œç¨‹ä»“åº“æ“ä½œ</h3><ul>
<li>git config â€“global user.name â€œè´¦æˆ·åâ€ ï¼ˆç»‘å®šè´¦æˆ·ï¼‰</li>
<li>git config â€“global user.email â€œç»‘å®šé‚®ç®±â€ ï¼ˆç»‘å®šè´¦æˆ·ï¼‰</li>
<li>git clone GitHubä»“åº“åœ°å€ ï¼ˆåŠ è½½åˆ°æœ¬åœ°ä»“åº“ï¼‰</li>
<li>git remote add è‡ªå®šä¹‰ä»“åº“æ ‡è¯†å ä»“åº“åœ°å€ ï¼ˆè¿æ¥GitHubä»“åº“ï¼‰</li>
<li>git remote show ï¼ˆæ˜¾ç¤ºè¿æ¥çš„ä»“åº“ï¼‰</li>
<li>git remote show ä»“åº“æ ‡è¯†å ï¼ˆæ˜¾ç¤ºä»“åº“ä¿¡æ¯ï¼‰</li>
<li>git push ä»“åº“æ ‡è¯†å mainï¼ˆæ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼‰</li>
<li>git push â€“set -unstream ä»“åº“å mainï¼ˆè®¾ç½®é»˜è®¤pushä»“åº“åï¼‰</li>
<li>git remote remove ä»“åº“æ ‡è¯†å ï¼ˆç§»é™¤ä»“åº“ï¼‰</li>
<li>git pull ä»“åº“æ ‡è¯†å åˆ†æ”¯å ï¼ˆä»è¿œç¨‹ä»“åº“è·å–ä»£ç å¹¶åˆå¹¶ç‰ˆæœ¬ï¼‰</li>
<li>git push -f (å¼ºåˆ¶ä¸Šä¼ )</li>
</ul>
<h3 id="1-1-3-æ–‡ä»¶ç¼–è¾‘æ“ä½œ"><a href="#1-1-3-æ–‡ä»¶ç¼–è¾‘æ“ä½œ" class="headerlink" title="1.1.3 æ–‡ä»¶ç¼–è¾‘æ“ä½œ"></a>1.1.3 æ–‡ä»¶ç¼–è¾‘æ“ä½œ</h3><ul>
<li>vi æ–‡ä»¶å ï¼ˆç”¨viæ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å½“å‰æ–‡ä»¶ï¼‰<ul>
<li>:qï¼ˆé€€å‡ºè¯¥ç¼–è¾‘å™¨ï¼‰</li>
<li>:å…‰æ ‡+iï¼ˆåœ¨å…‰æ ‡å¤„å¼€å¯ç¼–è¾‘ï¼‰</li>
<li>ESC ï¼ˆé€€å‡ºç¼–è¾‘ï¼‰</li>
<li>:w ï¼ˆä¿å­˜ï¼‰</li>
<li>:wqï¼ˆä¿å­˜å¹¶é€€å‡ºï¼‰<br><a href="https://blog.csdn.net/weixin_43423781/article/details/117926189">ç¼–è¾‘å…·ä½“ä½¿ç”¨</a></li>
</ul>
</li>
<li>git commit â€“amendï¼ˆä¿®æ”¹æœ€è¿‘ä¸€æ¬¡å†å²ç‰ˆæœ¬æäº¤æ—¥å¿—ï¼‰</li>
<li>git add æ–‡ä»¶å¤¹å/ ï¼ˆå°†è¯¥æ–‡ä»¶å¤¹æ‰€æœ‰æ–‡ä»¶æ”¾å…¥æš‚å­˜åŒºï¼‰</li>
<li>git add â€“all ï¼ˆå°†å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶æ”¾å…¥æš‚å­˜åŒºï¼‰</li>
<li>git rm æ–‡ä»¶å ï¼ˆä»æœ¬åœ°ä»“åº“ç§»é™¤æ–‡ä»¶ï¼‰</li>
<li>git mv åŸæ–‡ä»¶å æ–°æ–‡ä»¶å ï¼ˆä¿®æ”¹æ–‡ä»¶åï¼‰</li>
<li>git rm â€“cashed æ–‡ä»¶å</li>
<li>git commit -a ï¼ˆè¶Šè¿‡æš‚å­˜åŒºç›´æ¥åˆ°ä»“åº“ï¼‰</li>
<li>git checkout â€“ æ–‡ä»¶ ï¼ˆæ¢å¤å¹¶è¦†ç›–æœ€è¿‘ä¸€æ¬¡æš‚å­˜åŒºçš„æ–‡ä»¶åˆ°å·¥ä½œåŒºï¼‰</li>
<li>git reset â€“hard ç‰ˆæœ¬idå·ï¼ˆå›é€€ç‰ˆæœ¬ï¼‰</li>
</ul>
<h3 id="1-1-4-åˆ†æ”¯ç®¡ç†"><a href="#1-1-4-åˆ†æ”¯ç®¡ç†" class="headerlink" title="1.1.4 åˆ†æ”¯ç®¡ç†"></a>1.1.4 åˆ†æ”¯ç®¡ç†</h3><ul>
<li>git branch ï¼ˆæŸ¥çœ‹åˆ†æ”¯ï¼‰</li>
<li>git branch åˆ†æ”¯å ï¼ˆæ–°å»ºåˆ†æ”¯ï¼‰</li>
<li>git Â·checkout -b åˆ†æ”¯å ï¼ˆæ–°å»ºå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ï¼‰</li>
<li>git checkout åˆ†æ”¯å ï¼ˆåˆ‡æ¢åˆ†æ”¯ï¼‰</li>
<li>git checkout - ï¼ˆåˆ‡æ¢åˆ°ä¸Šä¸ªåˆ†æ”¯ï¼‰</li>
<li>git merge åˆ†æ”¯å ï¼ˆåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼‰</li>
<li>git branch -d åˆ†æ”¯å ï¼ˆåˆ é™¤åˆ†æ”¯ï¼‰</li>
<li>git branch æ–°åˆ†æ”¯ å·²å­˜åœ¨åˆ†æ”¯ ï¼ˆåŸºäºåˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯ï¼‰</li>
</ul>
<h2 id="2-gitï¼ˆæœ¬åœ°ï¼‰æ¨é€è¿œç¨‹ä»“åº“æµç¨‹"><a href="#2-gitï¼ˆæœ¬åœ°ï¼‰æ¨é€è¿œç¨‹ä»“åº“æµç¨‹" class="headerlink" title="2.gitï¼ˆæœ¬åœ°ï¼‰æ¨é€è¿œç¨‹ä»“åº“æµç¨‹"></a>2.gitï¼ˆæœ¬åœ°ï¼‰æ¨é€è¿œç¨‹ä»“åº“æµç¨‹</h2><p>1.é¦–å…ˆï¼Œç»‘å®šgithubï¼ˆgiteeï¼‰è´¦æˆ·</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">1.é¦–å…ˆï¼Œç»‘å®šgithubï¼ˆgiteeï¼‰è´¦æˆ·</span><br><span class="line">git config â€“global user.name â€œè´¦æˆ·åâ€ ï¼ˆç»‘å®šè´¦æˆ·ï¼‰</span><br><span class="line">git config â€“global user.email â€œç»‘å®šé‚®ç®±â€ ï¼ˆç»‘å®šè´¦æˆ·ï¼‰</span><br></pre></td></tr></tbody></table></figure>
<p>2.åˆå§‹åŒ–è¦pushçš„æ–‡ä»¶å¤¹</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">git init ï¼ˆåˆå§‹åŒ–ä»“åº“ï¼‰</span><br></pre></td></tr></tbody></table></figure>
<p>3.æ·»åŠ æ–‡ä»¶è‡³æš‚å­˜åŒºå¹¶æäº¤ï¼Œæ³¨æ„è¿™é‡Œè¿˜æ˜¯åœ¨æœ¬åœ°è¿›è¡Œ</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">git add æ–‡ä»¶å.æ–‡ä»¶åç¼€ /git add . ï¼ˆæäº¤å…¨éƒ¨ï¼‰</span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">git commit -m â€œæ›´æ–°è®°å½•â€ ï¼ˆæäº¤ï¼‰</span><br></pre></td></tr></tbody></table></figure>
<p>4.æ›´æ”¹åˆ†æ”¯åä¸ºmain</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">git branch -m main</span><br></pre></td></tr></tbody></table></figure>
<p>5.è¿æ¥githubä»“åº“</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">git remote add è‡ªå®šä¹‰ä»“åº“æ ‡è¯†å ä»“åº“åœ°å€</span><br></pre></td></tr></tbody></table></figure>
<p>6.æ¨é€ï¼ˆå¿…é¡»åœ¨æœ‰ç½‘çš„å‰æä¸‹ï¼‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">git push ä»“åº“æ ‡è¯†å main</span><br></pre></td></tr></tbody></table></figure>
<h2 id="3-gitåˆ†æ”¯ç®¡ç†ç­–ç•¥"><a href="#3-gitåˆ†æ”¯ç®¡ç†ç­–ç•¥" class="headerlink" title="3.gitåˆ†æ”¯ç®¡ç†ç­–ç•¥"></a>3.gitåˆ†æ”¯ç®¡ç†ç­–ç•¥</h2><p>ä¸€èˆ¬å¤§å‹é¡¹ç›®çš„ç»´æŠ¤ã€å¼€å‘ä»¥åŠå‘å¸ƒè¿‡ç¨‹ä¼šéµå¾ªä»¥ä¸‹çš„ç­–ç•¥ï¼ˆç»“åˆå›¾æ¥ç†è§£ï¼‰</p>
<p>ç²‰è‰²æ¨¡å—Masteræ˜¯é¡¹ç›®ç”¨æ¥å‘å¸ƒé‡å¤§ç‰ˆæœ¬çš„åˆ†æ”¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªé¡¹ç›®çš„ä¸»åˆ†æ”¯ï¼Œæ—¥å¸¸å¼€å‘æ‰€è¿›è¡Œçš„åˆ†æ”¯åˆ™åº”åœ¨developä¸Šè¿›è¡Œï¼Œç›¸åº”çš„åŠŸèƒ½æ¨¡å—ä¼šåœ¨åŸºäºdevelopåˆ†æ”¯ä¸Šè¿›è¡Œåˆ›å»ºï¼ŒåŠŸèƒ½æ¨¡å—å®ç°å¹¶å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼ˆåŠŸèƒ½ï¼‰å¹¶å’Œdevelopåˆ†æ”¯åˆå¹¶ï¼ˆmergeï¼‰åï¼Œåˆ™å¯æ¸…é™¤è¯¥åˆ†æ”¯ï¼ˆçº¢è‰²æ›²çº¿ï¼‰ã€‚</p>
<p>åœ¨developå¼€å‘åˆ°ä¸€å®šç¨‹åº¦å†³å®šå‘å¸ƒåï¼Œåˆ™å¯ä»¥é€šè¿‡release-ï¼ˆæ©™è‰²ï¼Œ\ä»£è¡¨ç‰ˆæœ¬å·ï¼‰åˆ†æ”¯è¿›è¡Œæµ‹è¯•ï¼Œreleaseåˆ†æ”¯è¿›è¡Œé¡¹ç›®çš„è¿è¡Œæµ‹è¯•å¹¶ä¿®æ”¹ç›¸åº”bugå¹¶ç¡®è®¤æ— è¯¯ååˆ™å¯åœ¨Masterä¸»åˆ†æ”¯ä¸Šå¯¹releaseè¿›è¡Œåˆå¹¶ï¼ˆmergeï¼‰ï¼ŒåŒæ—¶å°†æ— bugç‰ˆæœ¬åœ¨developä¸Šä¹Ÿè¿›è¡Œåˆå¹¶ï¼ˆmergeï¼‰ï¼Œä¹‹åå®ƒä¾¿å¯ä»¥å…‰è£é€€ä¼‘ï¼ˆçº¢çº¿ï¼‰äº†ï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªé‡å¤§çš„æ—¥å¸¸ç‰ˆæœ¬æ¥å†å‡ºç°ã€‚</p>
<p>Masteä¸»åˆ†æ”¯åœ¨å¯¹å¤–å‘å¸ƒå¹¶è¿è¡Œçš„è¿‡ç¨‹å¤šå¤šå°‘å°‘ï¼ˆå½“ç„¶èƒ½å°½é‡é¿å…å°±å°½é‡é¿å…ï¼‰å¯èƒ½ä¼šå‡ºç°ä¸€äº›æµ‹è¯•æœªå‘ç°çš„bugï¼Œè¿™æ—¶ï¼Œåˆ™å¯ä»¥åœ¨å®ƒä¸Šé¢æ–°å»ºåˆ†æ”¯ï¼Œç”¨æ¥è§£å†³å¯¹åº”bugï¼Œåç§°ä¸ºfixbug-bugåï¼Œåœ¨å¯¹bugè¿›è¡Œè§£å†³ååˆ™å¯ç»§ç»­åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼ŒåŒæ—¶åˆå¹¶åˆ°developä¸Šå»ï¼Œè¿™æ—¶çš„fixbugä¹Ÿå¯ä»¥é€€ä¼‘ï¼ˆçº¢çº¿ï¼‰å•¦ã€‚<br><img src="/2021/05/14/Git%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/git%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5.png" alt="gitåˆ†æ”¯ç®¡ç†ç­–ç•¥"></p>
<p>å¯ä»¥åŒæ—¶å‚è€ƒè¿™ç¯‡åšå®¢<a href="http://www.ruanyifeng.com/blog/2012/07/git.html">http://www.ruanyifeng.com/blog/2012/07/git.html</a></p>
<p>ä¸‹å›¾æ˜¯å¦å¤–ä¸€ç§ç»“æ„å›¾ï¼ˆå›¾æºç½‘ç»œï¼‰</p>
<p><img src="/2021/05/14/Git%E5%B8%B8%E7%94%A8%E6%80%BB%E7%BB%93/git%E5%88%86%E6%94%AF%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="gitåˆ†æ”¯ç»“æ„å›¾"><br>æ€»ç»“ï¼šå¦‚æœè¦æ¸…æ™°å®Œæ•´çš„å¼€å‘å¥½ä¸€ä¸ªå¤§å‹å¤šäººåˆä½œçš„é¡¹ç›®ï¼Œåšå¥½ä»¥ä¸‹å‡ ç‚¹</p>
<p>   *åˆ—å¥½åˆ†æ”¯æ¸…å•ï¼Œç»Ÿä¸€å¥½åˆ†æ”¯çš„å‘½åï¼Œä¸è¦ä½¿åˆ†æ”¯æ··ä¹±<br>   *å®šæ—¶åˆå¹¶å’Œæ¸…ç†åˆ†æ”¯ï¼Œä¿è¯åˆ†æ”¯çš„ç®€æ´åº¦å’Œé¡¹ç›®åŠŸèƒ½çš„å®Œæ•´åº¦<br>   *åœ¨ä¸€ä¸ªå¤§ç‰ˆæœ¬å³å°†å‘å¸ƒä¹‹æ—¶ï¼Œæ£€æŸ¥å¥½è¯¥ç‰ˆæœ¬çš„åŠŸèƒ½å®Œæ•´æ€§ä»¥åŠæµ‹è¯•æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œå°½é‡å°‘åšåœ¨å‘å¸ƒä¹‹æ—¶ä¿®æ”¹bugã€‚<br>   *æäº¤æ¯ä¸ªç‰ˆæœ¬æ—¶è¦åšå¥½æ¸…æ™°çš„å¤‡æ³¨</p>
<h2 id="4-gitå·¥ä½œæµç¨‹"><a href="#4-gitå·¥ä½œæµç¨‹" class="headerlink" title="4.gitå·¥ä½œæµç¨‹"></a>4.gitå·¥ä½œæµç¨‹</h2><p>å‚è€ƒåšå®¢ï¼š<a href="http://www.ruanyifeng.com/blog/2015/12/git-workflow.html">http://www.ruanyifeng.com/blog/2015/12/git-workflow.html</a></p>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºvueçš„ç®€æ˜“Todo-List</title>
    <url>/2021/07/01/Todo-List/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>###1.ç®€ä»‹<br>åŸºäºVueåŠå…¨å®¶æ¡¶çš„æ–°æ‹Ÿæ€æ¿ToDoListï¼Œä¸€ä¸ªtodolistè€Œå·²ï¼Œç”¨å‡ ä¹Vueå…¨å®¶æ¡¶æ˜¯ä¸æ˜¯æœ‰ç‚¹å°é¢˜å¤§åšï¼Œæ˜¯çš„ï¼Œå¿…é¡»çš„ï¼Œå› ä¸ºè¦å·©å›ºçš„çŸ¥è¯†ï¼Œå¹¶ä¸”åŠŸèƒ½ä¹Ÿç›¸åº”çš„å¢åŠ äº†ï¼Œä½ å¯ä»¥æ‰“å¡æƒ³çœ‹çš„ä¹¦æˆ–è€…ç”µå½±ï¼Œä»¥åŠå°å°çš„æ”¹å˜äº†todolistçš„ç›¸åº”é€»è¾‘ï¼Œå½“å¤©æœªå®Œæˆçš„ToDoä¼šç´¯è®¡åˆ°å¾…å®Œæˆä»»åŠ¡ï¼Œçœ‹ç€ä¸€å¤©ä¸€å¤©ç§¯ä¸‹æ¥çš„å¾…åŠï¼Œå¤šå¤šå°‘å°‘å¸Œæœ›å‡å°‘ä½ çš„æƒ°æ€§å§ï¼ˆå¸Œæœ›ç›®çš„è¾¾åˆ°ï¼‰ï¼Œä»è€Œæ¿€å‘ä½ ä¸€å¤©æ»¡æ»¡çš„åŠ¨åŠ›</p>
<p>æ³¨æ„ï¼šæ‰€ä½¿ç”¨çš„æ˜¯localStorageå­˜å‚¨æ•°æ®ï¼ˆæ²¡ç”¨æœåŠ¡å™¨ï¼‰ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä½ ä¸€ä¸å°å¿ƒç”¨äº†ä»€ä¹ˆæ¸…åƒåœ¾è½¯ä»¶æˆ–è€…æ‰‹åŠ¨æ¸…æ‰æµè§ˆå™¨æ•°æ®çš„è¯ï¼Œå®ƒä¼šæ¶ˆå¤±ï¼Œå®ƒä¼šæ¶ˆå¤±ï¼Œå®ƒä¼šæ¶ˆå¤±</p>
<p>é‡‡ç”¨çº¯lesså†™æ ·å¼ï¼Œåªå†™äº†PCç«¯å“åº”å¼å¸ƒå±€ï¼Œæ²¡åšç§»åŠ¨ç«¯é€‚é…ï¼ˆå°±ä¸è¦å°è¯•ç”¨æ‰‹æœºæ‰“å¼€äº†ï¼Œå¤§ä¸‘ï¼‰</p>
<p><a href="https://abigailcui.github.io/todo-List/index.html#/myday">åœ¨çº¿åœ°å€</a></p>
<p>###2.åŠŸèƒ½<br> 1.è¾“å…¥ä»£åŠï¼ŒæŒ‰ä¸‹å›è½¦é”®ï¼Œæ·»åŠ åˆ°å½“å¤©å¾…åŠäº‹é¡¹<br> 2.ç‚¹å‡»å®ŒæˆæŒ‰é’®ï¼Œå®Œæˆè¯¥ä»£åŠï¼Œæ·»åŠ è‡³å®Œæˆäº‹é¡¹<br> 3.ç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œåˆ é™¤è¯¥å¾…åŠ<br> 4.åŠ¨æ€æ˜¾ç¤ºå·²å®Œæˆå’Œæœªå®Œæˆäº‹é¡¹æ•°é‡<br> 5.å½“å¤©æœªå®Œæˆå¾…åŠï¼Œç¬¬äºŒå¤©æ·»åŠ è‡³å¾…å®Œæˆä»»åŠ¡ï¼Œå¯åœ¨ç¬¬äºŒå¤©ç‚¹å‡»â€œä»Šå¤©å®Œæˆâ€é‡æ–°æ·»åŠ è‡³æˆ‘çš„ä¸€å¤©ä¸­<br> 6.é˜…è¯»é€‰é¡¹æ‰“å¡æƒ³çœ‹çš„ä¹¦<br> 7.ç”µå½±é€‰é¡¹å¡æ‰“å¡æƒ³çœ‹çš„ç”µå½±<br> 8.ç‚¹å‡»å¤´åƒå°±æ˜¯å›åˆ°æˆ‘çš„åšå®¢å•¦<br> 9.å¯¼èˆªæ å³ä¾§æ–‡å­—æ ¹æ®æ—¶é—´æ”¹å˜ç›¸åº”é—®å€™è¯­</p>
<p><img src="/2021/07/01/Todo-List/1.jpg" alt="1"><br><img src="/2021/07/01/Todo-List/2.jpg" alt="2"></p>
<p>###3.æŠ€æœ¯æ¶æ„</p>
<ul>
<li>Vue</li>
<li>Vue CLI</li>
<li>Vue Router</li>
<li>Less</li>
<li>webpack</li>
</ul>
<p>ä¸»è¦åˆ’åˆ†ä¸ºä¸‰ä¸ªå¤§ç»„ä»¶</p>
<p>3.1 NavBar</p>
<p>  +åˆ†ä¸ºå·¦ä¸­å³ä¸‰ä¸ªæ’æ§½<br>  +ä¸­é—´æ·»åŠ å¾…åŠäº‹é¡¹<br>  +å·¦æ’æ§½å±•ç¤ºå½“å‰è·¯ç”±ä¿¡æ¯<br>  +å³æ’æ§½æŒ‰æ—¶é—´æ˜¾ç¤ºé—®å€™ä¿¡æ¯</p>
<p>3.2 SideBar</p>
<p>  +ç”¨æ¥æ§åˆ¶è·¯ç”±çš„ä¸»è¦ç»„ä»¶<br>  +åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªå¤´åƒæ¨¡å—ï¼Œä¸€ä¸ªè·¯ç”±åˆ‡æ¢æ¨¡å—<br>  +è·¯ç”±åˆ‡æ¢æ¨¡å—æ”¾ç½®åˆ‡æ¢è·¯ç”±çš„å°item</p>
<p>3.3 TaskBar</p>
<p>  +æ”¾ç½®å¾…åŠçš„ç»„ä»¶<br>  +æ ¹æ®å¾…åŠçŠ¶æ€æ˜¾ç¤ºä¸åŒçŠ¶æ€çš„item</p>
<p>###4.æ ¸å¿ƒä»£ç <br>æœ€é‡è¦çš„å½“ç„¶å°±æ˜¯ä¾¦å¬æ•°æ®çš„æ”¹å˜å•¦ï¼Œæ¯•ç«Ÿä½ æ—¶æ—¶åˆ»åˆ»éƒ½åœ¨æ”¹å˜æ•°æ®ï¼Œvueå®˜ç½‘<a href="https://cn.vuejs.org/v2/api/#watch">watchå‡½æ•°ä»‹ç»</a></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//ç›‘å¬æ•°æ®å˜åŒ–</span></span><br><span class="line"><span class="attr">watch</span>: {</span><br><span class="line">  <span class="attr">mydayList</span>: {</span><br><span class="line">    <span class="comment">// è¯¥å›è°ƒä¼šåœ¨ä»»ä½•è¢«ä¾¦å¬çš„å¯¹è±¡çš„ mydayList æ”¹å˜æ—¶è¢«è°ƒç”¨ï¼Œä¸è®ºå…¶è¢«åµŒå¥—å¤šæ·±</span></span><br><span class="line">    <span class="function"><span class="title">handler</span>(<span class="params"></span>)</span>{</span><br><span class="line">      saveData( <span class="built_in">this</span>.mydayList, <span class="string">"myday"</span>)</span><br><span class="line">      getData()</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">deep</span>: <span class="literal">true</span>          </span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>é€šè¿‡ç›‘å¬mydayListæ•°æ®çš„å˜åŒ–ï¼Œå®æ—¶ä¿å­˜æ”¹å˜åçš„æ•°æ®ä»¥åŠåŠ è½½ä¿å­˜åçš„æ•°æ®</p>
<p>å…¶å®ƒå°±æ˜¯ç®€å•çš„localStorageå¢åˆ æ”¹æŸ¥æ“ä½œå•¦</p>
<p>###5.å‡½æ•°å°è£…<br>è¿™é‡Œé€šè¿‡å‡½æ•°å°è£…ï¼Œå¾—åˆ°localStorageå¢åˆ æŸ¥æ“ä½œï¼Œå¹¶å•ç‹¬è®¾ç½®æˆä¸€ä¸ªjsæ–‡ä»¶ï¼Œåé¢ç»„ä»¶éœ€è¦ç”¨åˆ°å³å¯ç›´æ¥å¯¼å…¥ä½¿ç”¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–æœ¬åœ°æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params">dataName</span>) </span>{</span><br><span class="line">  <span class="comment">// localStorgeä¸ºwindowå†…ç½®å±æ€§ï¼Œç”¨äºåœ¨æµè§ˆå™¨å­˜å‚¨æœ¬åœ°ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// è¯¥æ•°æ®é™¤éæ‰‹åŠ¨åˆ é™¤ï¼Œå¦åˆ™ä¼šä¸€ç›´å­˜åœ¨</span></span><br><span class="line">  <span class="comment">// let data = localStorage.getItem("todoList") //å–å€¼</span></span><br><span class="line">  <span class="keyword">let</span> data = <span class="built_in">localStorage</span>.getItem(dataName) <span class="comment">//å–å€¼</span></span><br><span class="line">  <span class="keyword">if</span> (data !== <span class="literal">null</span>) {</span><br><span class="line">    <span class="comment">//ES6å°†å˜é‡ä½œä¸ºé”®â†’[å˜é‡å]</span></span><br><span class="line">    <span class="comment">// return JSON.parse(data).[dataName] //å°†æ•°æ®è½¬æ¢ä¸ºjson</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¿å­˜æœ¬åœ°æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveData</span>(<span class="params">data, dataName</span>) </span>{</span><br><span class="line">  <span class="comment">//JSON.stringify()å°†jsonæ•°æ®è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">  <span class="built_in">localStorage</span>.setItem(dataName, <span class="built_in">JSON</span>.stringify(data)) <span class="comment">//è®¾å€¼    </span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteData</span>(<span class="params">index, dataName</span>) </span>{</span><br><span class="line">  <span class="comment">//è·å–æœ¬åœ°æ•°æ®</span></span><br><span class="line">  <span class="keyword">let</span> data = getData(dataName)</span><br><span class="line">  <span class="comment">// let index = index //è·å–ç´¢å¼•å·</span></span><br><span class="line">  <span class="comment">//æ”¹æœ¬åœ°æ•°æ®ï¼ˆåˆ é™¤æ•°æ®ï¼‰</span></span><br><span class="line">  data.splice(index, <span class="number">1</span>)</span><br><span class="line">  <span class="comment">//ä¿å­˜æœ¬åœ°æ•°æ®</span></span><br><span class="line">  saveData(data)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>åé¢å°±æ˜¯ç®€å•çš„ç»™å„ä¸ªç»„ä»¶æ³¨å†Œäº‹ä»¶ï¼Œç„¶åæ‰§è¡Œç›¸å…³æ“ä½œå°±å¯ä»¥å•¦</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vueåº”ç”¨</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2021/07/07/hello-world/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="766ef0593174295131e599100b10574d388562bf5ee62d350ed7065b21ae9e8f">bd25ed9264b080267271e137e33d0ce1e1069d88f9699965ec2c8f2e4412683a11965185006bffa98a0a821510d9346f09318e6bad83c5df43f6251105f61d270c32a97bb2827cd20739af9fa6249e35c85c31d992cfc84594787d1b1d756b950129204f1db9ebdc2dcc2139a424c278f9349328ea0bfda7dcca73edde1d2463919630f3e33888be0c5d834c6036bb29575a57777f3eb42fcef0f42bda50f8752731fd8bb0f042c3834a79f66f8f1b37b2d4f6534dc1951f4f050fe56a5ad68d546fc98b4c81c1c835cad394a0c2017e755e7fba3ca8ee502c6af8c76c1ee4c234e88ef270ec93375da953d9e9ca533f898b4b4344eeac752730d54ffc29692be5445bf50368a578a87be73fcab8c6f6d480b702d5a5f4d257cd9cfbf3a9d898c131547cf3f8bbd0ba372870a0866ee6cd34aca84d1d371795d50890b3e096de083698555fc035bac7faef38b2a5a4785f07d7fbab90b68c7ac4b7bec3ddfb3c2b6a2ef286a5f1090f1361e1f612f60189a945a16c3beed79610458520a8a5107f9b85d13c5a99b36675c41240465836441e289ff0eea003e38f084d2d06fe2f8d2077660f767d88d3208bf4a5f108819ac9245043515b6821e184a3b2cc8f97e7bd168d124199f31e5f2bbe2dcd20faad685276d052a17516f00a9d0251f28daacc22e72e7fb8d5541f645d0d394690fd7b97c8abaa8a33f6df14e708f850bc0c1b400ce68d97a9ba0725917f8b30a3b4dea80a11982f07eb6ab58adb64af3950658bf184792b9726355e3489acc43e59b4b06e33139271ee7de2b3ac507293c60622e2613f0066eb1b25386737c54d12dc6b7dacdaad5a2a45c62de24d083d24e5f80c44e35f7e98ce11610420a5e593d1d20426be05adcde28ae8bd366ccc7aa72c0fb4d0a047ad43f27ff928c694eaea61ca52bf1f7e7d841c804b990a87bc5931b2c5301567f2eb360a775a6798c053de7db8bd0fdd1f0d19bac3b9ceaa04f714b4a84dc9af4a77a844cb2ccbb7a085a30e6e5be54d88c03aff3c64f356c6f2091052b6e5ab09d38e21cb1ff0704942627850278ed84555cf8ce984f1e7e4bca27cf9eced6e3df6da1bf35f0a1c31cc0ede46d8dad631221453d2e640106d933edbda579122bb6992fad8dfad3b619421ce7af3651debcc501904beeb62a47ae682d4dcda771662c4e0844ee1501a1c4b7e4e60f26325bc4a1ca0e0781e9fcc877e23f55e9255cb79389ac82720eeb811dd21ee0cd3278e7be9afc94f68027187942180d1ede19e35dc60b3facf442f5ca9c5157e0a24fea141d0f647681a6957e7f32f4978d32bbe3c2a97e60c60cb7e64806ff1828caa2f73935129324a51379436fc93f5f269dbd3eebd8a9292a83827688b6c705556ca607145a79cb674f2a0d8b1b76431cb7047d4fb4b883dd9f1429f070c43a729005c467c0396fd3f4ee4950dfe8bfd1d06d793910f1b7121470fdc6191e2d43f4b50b3c4a53fca81f00e57629eee4ecb522317b011038c6367579a2135bafaa963c77efed341320535baa24549696a75faaeeda508bcaa3adbe545814a305f0f7fe22e019da7beac9a57056c7cae8425226b4c70e6d90f40ee9bb9dc65ada548cd6f0ec46e3cad8293e395e6d2756dbb90e7e18e7d67f0ba0744fb7a7cf01ebaa5113cc0b20fa114bf0159b7e939e890c81c00860dd5e6d1e3bba4a8c8b5180d90c18dca3a01218cc1fe07bb55dad7c5540aa85f97d32872c8f894ec37abfd26fa71a8540e6c942788e6effd1ec650b0d3d35c6e063fe09557560b6f7c289848463bf5e4581b4cc13ab0ff76d2fbe0d1997b6f9bdffdb6a3fbee40d84b6e25b20ee33306379c47186e8ac45db9941bf62c8444c4a13d6afaa905a946b943096bcaef6c30ca311009cfc4d7cffb0b850f670fcdf4b86c2909214217acab3f1c94e6f64857ef0d790747841c17d82c927be84981cea5dd26fe5a6bddb12b97591ea1e12faee19a5d2e92edbd0dd4ea6e43ef9de97dcd42eb42a46e5400a6317b4e2040bf163db3eadacd0423c1250121d864d039c01019a3c40c7bbec2b248713eb9254e1e696cecfb5207872bcdba0bd444ade698fc73bed2d658b7111945e0b22b3ca75d41ac16f296a24d3869fc06ae14fd893ee9cef3674d6d57d7be1f105caac22e9379bc3044683190b43f1696d65e3c9c70985e5b9c931e33ec9488e19fc85e4d715858af1c903db48e618c362a4ca84d79b451d4c94d75e9566addf17b395357be03e5f032247cf680f0ecf9bf81eaad596e3fa1edcfca46a34d7ca588160bf00fe6c72c44f38fc60f986e6a11233373b3681c2caede0ae3b135c650cf0ae6eba0b07232bbee78202bd305317bcce14f07b0990947db53693c54f857b902c5db8d97a25afc44e8aa212bdce97064b504414d76f84a6cbcccca808fba25ff19a39dc7b05744df026809af9861170a14b45b3314ba8014990b0a7ea67507eda5bee9b1e38d081c9bb11ece7e4996d1c6d5b9e6d2af52077599d40e2f6352885ef54154cfeae58add13a5bd595a93fdde5a792888a3dc635a097696672a67959f4078a5fd0153884ccab29c83b7f0116d949e0691e9bbc9a62840b039f4af28d00d1e569678593dd5df8421ecf5bb9d16e885394647bde2c5ed1c0768a5f451cf4dcaf1e5253ad0f3130b109cfb072c0fd439b1138c8f36ff9479e5782bb6b24d32d64a94fce4283cdd510ae1ecb3fbcd0e4c11a36cd86b36087a2f2a9dfbf70bb03ccb9e40956d9476e579df2abf53816fc9d57c50991136af2531a1875529fb733eaacf08d63c37f33e963ad5aa572acf6643f2b7feecd8ba3468b328c2a447b03b92a23c372092a8ecf989b321f7239ac7f931b62a36a2780d74e959fec988f57f7924e20217bbd111d026ef98822e536f1ecdd3a4e1e5f67d1eed4e61023635b030705b7448e3de324c9e710b3aec2e04d448690d7abff070a9cfbbfd44b306bb44addc9645e74718f94e266562b6a3a0d178d4a8e19bfa37714b06026768ca3f6b1e707083621a085756567b7f01e75c3696ced4681f24a8144b2b6f366ca1273d50fb555cc7f28d385edb5932378bba02f98044212bf44d250c090b407110955c150c71e6c4352453c90f5edaf6dd5b18fa58a3e576c8ae8c5707dfe862832f15d5528d9c26df23237e477b693328a66562c6ed4db50c6effcb32a7b20a3c489ffdc2367d1688d7078180d057546246298befe2bcae70c1f56aa41d99c935e5946b4931713ac360cd3817ef72e3bf30d436b61f7fed5649c7c7d106206a6bc0c6fd92cf081cbce22ff1a2717f1d416aaf2a5715887d27c53092c3c88b5f757ee5b15f66b400bd726d5d8159b9194d553321fb3978cfe93fedd54cffb4b7cdeac8260315b40f0c3921bda29f6100c68ee729dee32acbdefdc175758a721a489a4434cf05fb68ed675ae0cbf5b43caf0e2eb862199f4414c29b0568ba183957df2d15</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">test</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
  </entry>
  <entry>
    <title>Node.jsç¬”è®°(1)</title>
    <url>/2021/03/02/Node.js%E7%AC%94%E8%AE%B0(1)/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>æ ¹æ®Bç«™é»‘é©¬è®°å½•çš„ç¬”è®°ï¼Œå¹¶ä¸”ä¹Ÿåšäº†å¯¹åº”çš„<a href="https://www.processon.com/view/link/604b5c207d9c08389fdda72a">æ€ç»´å¯¼å›¾</a>ï¼Œæ­é…é£Ÿç”¨æ›´ä½³</p>
</blockquote>
<h1 id="Node-JSç®€ä»‹"><a href="#Node-JSç®€ä»‹" class="headerlink" title="Node.JSç®€ä»‹"></a>Node.JSç®€ä»‹</h1><h2 id="ä½•ä¸ºNode-JS"><a href="#ä½•ä¸ºNode-JS" class="headerlink" title="ä½•ä¸ºNode.JS"></a>ä½•ä¸ºNode.JS</h2><ul>
<li>Node.JSä¸ºJavaScriptè¿è¡Œæ—¶</li>
<li>Node.JSæ˜¯JavaScriptçš„è¿è¡Œå¹³å°</li>
<li>å®ƒæ—¢ä¸æ˜¯ä¸€é—¨è¯­è¨€ï¼Œä¹Ÿä¸æ˜¯æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¹³å°<h2 id="Node-JSä¸­çš„JS"><a href="#Node-JSä¸­çš„JS" class="headerlink" title="Node.JSä¸­çš„JS"></a>Node.JSä¸­çš„JS</h2></li>
<li>Node.JSæ²¡æœ‰domå’Œbom</li>
<li>EcmaScript</li>
<li>Node.JSåœ¨JavaScriptæ‰§è¡Œç¯å¢ƒä¸­ä¸ºJavaScriptæä¾›ä¸€äº›æœåŠ¡å™¨çº§åˆ«çš„API<ul>
<li>æ–‡ä»¶è¯»å†™</li>
<li>ç½‘ç»œæœåŠ¡æ„å»º</li>
<li>ç½‘ç»œé€šä¿¡</li>
<li>httpæœåŠ¡å™¨</li>
<li>â€¦â€¦</li>
</ul>
</li>
</ul>
<h2 id="Node-JSæ„å»ºäºChromeçš„V8å¼•æ“"><a href="#Node-JSæ„å»ºäºChromeçš„V8å¼•æ“" class="headerlink" title="Node.JSæ„å»ºäºChromeçš„V8å¼•æ“"></a>Node.JSæ„å»ºäºChromeçš„V8å¼•æ“</h2><ul>
<li>ä»£ç åªæ˜¯å…·æœ‰ç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²</li>
<li>å¼•æ“å¯ä»¥è®¤è¯†å®ƒï¼Œå¸®ä½ è§£æå’Œæ‰§è¡Œ</li>
<li>Google Chromeçš„V8å¼•æ“æ˜¯ç›®å‰å…¬è®¤çš„è§£ææ‰§è¡ŒJavaScriptä»£ç æœ€å¿«çš„</li>
<li>Node.jsçš„ä½œè€…æŠŠGoogle Chromeä¸­çš„V8å¼•æ“ç§»æ¤å‡ºæ¥ï¼Œå¼€å‘äº†ä¸€ä¸ªç‹¬ç«‹çš„JavaScriptè¿è¡Œæ—¶ç¯å¢ƒ</li>
</ul>
<h2 id="Node-JSçš„ç‰¹æ€§"><a href="#Node-JSçš„ç‰¹æ€§" class="headerlink" title="Node.JSçš„ç‰¹æ€§"></a>Node.JSçš„ç‰¹æ€§</h2><ul>
<li>envent-driven äº‹ä»¶é©±åŠ¨</li>
<li>non-blocking I/O mode éé˜»å¡I/Oæ¨¡å‹ï¼ˆå¼‚æ­¥ï¼‰</li>
<li>ightweight and efficent. è½»é‡å’Œé«˜æ•ˆ</li>
</ul>
<h2 id="Node-JSçš„ä½œç”¨"><a href="#Node-JSçš„ä½œç”¨" class="headerlink" title="Node.JSçš„ä½œç”¨"></a>Node.JSçš„ä½œç”¨</h2><ul>
<li><p>webæœåŠ¡å™¨åå°</p>
</li>
<li><p>å‘½ä»¤è¡Œå·¥å…·<br>*npm(node)</p>
<ul>
<li>git(cè¯­è¨€)</li>
<li>hexoï¼ˆnodeï¼‰</li>
<li>â€¦</li>
</ul>
</li>
</ul>
<h2 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h2><p>npmä¸ºä¸–ç•Œä¸Šæœ€å¤§çš„å¼€æºç”Ÿæ€ç³»ç»Ÿ</p>
<h1 id="åˆè¯†"><a href="#åˆè¯†" class="headerlink" title="åˆè¯†"></a>åˆè¯†</h1><p>å®‰è£…é…ç½®</p>
<ul>
<li>ä¸‹è½½ï¼š<a href="https://nodejs.org/en/">https://nodejs.org/en/</a></li>
<li>å®‰è£…nodeç¯å¢ƒ</li>
<li>æ£€æµ‹nodeç¯å¢ƒ<br>*å¼€å¯å‘½ä»¤è¡Œæç¤ºç¬¦ï¼ˆcmdï¼‰<br>*è¾“å…¥<code>node --vesion</code><br>*æˆ–<code>node -v</code><br>*æ­£å¸¸çŠ¶æ€ä¸‹è¿”å›ç‰ˆæœ¬å·</li>
<li>è§£ææ‰§è¡ŒJavaScript<br>*åˆ›å»ºå’Œç¼–å†™JavaScriptè„šæœ¬æ–‡ä»¶<br>*æ‰“å¼€ç»ˆç«¯ï¼ˆcmdï¼‰ï¼Œå®šä½è„šæœ¬æ–‡ä»¶æ‰€åœ¨ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯æ‰§è¡Œè„šæœ¬æ‰€åœ¨æ–‡ä»¶ç›®å½•ï¼‰<br>*è¾“å…¥node æ–‡ä»¶åè¿›è¡Œæ‰§è¡Œ<br>æ³¨æ„ï¼šæ–‡ä»¶åä¸è¦ä½¿ç”¨Node.JSå‘½åï¼Œå¹¶ä¸”æœ€å¥½ä¸ç”¨ä¸­æ–‡</li>
</ul>
<h1 id="fs"><a href="#fs" class="headerlink" title="fs"></a>fs</h1><p>æ–‡ä»¶æ“ä½œæ¨¡å—</p>
<ul>
<li>æµè§ˆå™¨ä¸­çš„ JavaScript æ²¡æœ‰æ–‡ä»¶æ“ä½œèƒ½åŠ›</li>
<li>Nodeä¸­çš„ JavaScript å…·æœ‰æ–‡ä»¶æ“ä½œèƒ½åŠ›</li>
<li>fs æ˜¯ file-system çš„ç®€å†™ï¼Œä¸ºæ–‡ä»¶ç³»ç»Ÿçš„æ„æ€</li>
<li>åœ¨ Node ä¸­å¦‚æœæƒ³è¦è¿›è¡Œæ–‡ä»¶æ“ä½œï¼Œå°±å¿…é¡»å¼•å…¥ fs è¿™ä¸ªæ ¸å¿ƒæ¨¡å—</li>
<li>åœ¨ fs è¿™ä¸ªæ ¸å¿ƒæ¨¡å—ä¸­ï¼Œå°±æä¾›äº†æ‰€æœ‰æ–‡ä»¶æ“ä½œç›¸å…³çš„ APIï¼Œ<ul>
<li>fs.readFile ç”¨æ¥è¯»å–æ–‡ä»¶</li>
<li>fs.writeFileç”¨æ¥å†™å…¥æ–‡ä»¶</li>
</ul>
</li>
<li>æ–‡ä»¶ä¸­å­˜å‚¨çš„éƒ½æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œç”¨toString()æ–¹æ³•è½¬æ¢ä¸ºå­—ç¬¦ä¸²</li>
</ul>
<h2 id="è¯»å–æ–‡ä»¶"><a href="#è¯»å–æ–‡ä»¶" class="headerlink" title="è¯»å–æ–‡ä»¶"></a>è¯»å–æ–‡ä»¶</h2><p>1.ä½¿ç”¨<code>require</code>æ–¹æ³•åŠ è½½<code>fs</code>æ ¸å¿ƒæ¨¡å—</p>
<p>2.ä½¿ç”¨<code>readFile</code>å‡½æ•°è¯»å–æ–‡ä»¶</p>
<ul>
<li><p>ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºæ–‡ä»¶è·¯å¾„ï¼Œç¬¬äºŒä¸ªä¸ºå›è°ƒå‡½æ•°</p>
</li>
<li><p>å›è°ƒå‡½æ•°ä¸­æœ‰ä¸¤ä¸ªå‚æ•°</p>
</li>
<li><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¿”å›é”™è¯¯ï¼Œç¬¬äºŒä¸ªä¸ºæ•°æ®</p>
</li>
<li><p>æˆåŠŸï¼šerror: null; data: è¿”å›æ•°æ®</p>
</li>
<li><p>å¤±è´¥: error: é”™è¯¯å¯¹è±¡; data: undefined</p>
</li>
<li><p>å¯ä»¥åˆ©ç”¨<code>error</code>è¿›è¡Œè¯­å¥åˆ¤æ–­</p>
</li>
</ul>
  <figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨nodeä¸­çš„fsæ¨¡å—è¯»å–æ–‡ä»¶ï¼ˆä½¿ç”¨requireè¯­å¥ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="comment">//readFIleæ–¹æ³•è¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">a.readFile(<span class="string">'æµ‹è¯•.txt'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error,data</span>)</span>{	</span><br><span class="line">	<span class="built_in">console</span>.log(error);</span><br><span class="line">	<span class="keyword">if</span>(error === <span class="literal">null</span>){</span><br><span class="line">		<span class="built_in">console</span>.log(data.toString());</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"æ–‡ä»¶é”™è¯¯,è¯»å–æ–‡ä»¶å¤±è´¥"</span>);</span><br><span class="line">	}</span><br><span class="line">});</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h2 id="å†™å…¥æ–‡ä»¶"><a href="#å†™å…¥æ–‡ä»¶" class="headerlink" title="å†™å…¥æ–‡ä»¶"></a>å†™å…¥æ–‡ä»¶</h2><p>1.ä½¿ç”¨requireæ–¹æ³•åŠ è½½fsæ ¸å¿ƒæ¨¡å—<br>2.ä½¿ç”¨writeFileå‡½æ•°è¯»å–æ–‡ä»¶</p>
<ul>
<li><p>åŒ…å«ä¸‰ä¸ªå‚æ•°</p>
</li>
<li><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–‡ä»¶è·¯å¾„åŠåç§°</p>
</li>
<li><p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºå†™å…¥æ–‡æœ¬å†…å®¹</p>
</li>
<li><p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°</p>
</li>
<li><p>å›è°ƒå‡½æ•°ä¸­çš„<code>error</code>å‚æ•°<br>æ–‡ä»¶å†™å…¥æˆåŠŸ :<code>error</code> æ˜¯ <code>null</code><br>æ–‡ä»¶å†™å…¥å¤±è´¥: <code>error</code> å°±æ˜¯é”™è¯¯å¯¹è±¡</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">a.writeFile(<span class="string">'ä½ æ˜¯æœ€æ£’çš„.md'</span>,<span class="string">'ä½ æ˜¯æœ€æ£’çš„'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>{</span><br><span class="line">	<span class="built_in">console</span>.log(error);</span><br><span class="line">	<span class="keyword">if</span> (error === <span class="literal">null</span>) {</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"å†™å…¥æˆåŠŸ"</span>);</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"å†™å…¥å¤±è´¥"</span>);</span><br><span class="line">	}</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h1 id="http"><a href="#http" class="headerlink" title="http"></a>http</h1><h2 id="IPåœ°å€å’Œç«¯å£å·"><a href="#IPåœ°å€å’Œç«¯å£å·" class="headerlink" title="IPåœ°å€å’Œç«¯å£å·"></a>IPåœ°å€å’Œç«¯å£å·</h2><ul>
<li>IPåœ°å€ç”¨æ¥å®šä½è®¡ç®—æœº</li>
<li>ç«¯å£å·ç”¨æ¥å®šä½å…·ä½“åº”ç”¨ç¨‹åº</li>
<li>æ‰€æœ‰éœ€è¦è”ç½‘çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦å ç”¨ä¸€ä¸ªç«¯å£å·</li>
<li>è®¡ç®—æœºé»˜è®¤ç«¯å£å·å°½é‡ä¸è¦è®¿é—®<ul>
<li>80</li>
<li>â€¦</li>
</ul>
</li>
</ul>
<h2 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h2><ul>
<li>æä¾›æœåŠ¡ï¼šä¸ºæ•°æ®æœåŠ¡</li>
<li>å‘è¯·æ±‚</li>
<li>æ¥æ”¶è¯·æ±‚</li>
<li>å¤„ç†è¯·æ±‚</li>
<li>åé¦ˆï¼ˆå‘é€å“åº”ï¼‰</li>
<li>å½“å®¢æˆ·ç«¯è¯·æ±‚è¿‡æ¥ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘æœåŠ¡å™¨çš„requestè¯·æ±‚äº‹ä»¶ï¼Œç„¶åæ‰§è¡Œç¬¬äºŒä¸ªå‚æ•°ï¼šå›è°ƒå¤„ç†å‡½æ•°</li>
</ul>
<h2 id="å¯åŠ¨æœåŠ¡å™¨"><a href="#å¯åŠ¨æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨æœåŠ¡å™¨"></a>å¯åŠ¨æœåŠ¡å™¨</h2><p>1.åŠ è½½httpæ¨¡å—<br>2.åˆ›å»ºwebæœåŠ¡å¯¹è±¡<br>3.ç›‘å¬ï¼ˆæ³¨å†Œï¼‰requestäº‹ä»¶<br>4.ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½httpæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºwebæœåŠ¡å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œrequestäº‹ä»¶</span></span><br><span class="line">server.on(<span class="string">'request'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡</span></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'æœåŠ¡å™¨å¯åŠ¨æˆåŠŸäº†ï¼Œå¯ä»¥é€šè¿‡ http://127.0.0.1:3000/ æ¥è¿›è¡Œè®¿é—®'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>


<h2 id="requestè¯·æ±‚äº‹ä»¶å¤„ç†å‡½æ•°"><a href="#requestè¯·æ±‚äº‹ä»¶å¤„ç†å‡½æ•°" class="headerlink" title="requestè¯·æ±‚äº‹ä»¶å¤„ç†å‡½æ•°"></a>requestè¯·æ±‚äº‹ä»¶å¤„ç†å‡½æ•°</h2><ul>
<li>request è¯·æ±‚äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œéœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šrequestå’Œresponse</li>
<li>request è¯·æ±‚å¯¹è±¡ï¼šè¯·æ±‚å¯¹è±¡å¯ä»¥ç”¨æ¥è·å–å®¢æˆ·ç«¯çš„ä¸€äº›è¯·æ±‚ä¿¡æ¯ï¼Œä¾‹å¦‚è¯·æ±‚è·¯å¾„</li>
<li>reponseå“åº”å¯¹è±¡ï¼šå“åº”å¯¹è±¡å¯ä»¥ç”¨æ¥ç»™å®¢æˆ·ç«¯å‘é€å“åº”æ¶ˆæ¯</li>
<li>å“åº”å†…å®¹åªèƒ½æ˜¯äºŒè¿›åˆ¶æ•°æ®æˆ–è€…å­—ç¬¦ä¸²</li>
<li>è½¬å‡ºæ•°æ®å†…å®¹ä¸ºå…¶ä»–æ•°æ®ç±»å‹æ—¶éœ€è½¬åŒ–æ ¼å¼</li>
<li>ä¸€ä¸ªè¯·æ±‚å¯¹åº”ä¸€ä¸ªå“åº”ï¼Œå·²ç»ç»“æŸå“åº”åˆ™æ— æ³•é‡å¤å‘é€å“åº”</li>
<li>æ— è¯·æ±‚å°±æ— å“åº”<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½httpæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="comment">//åˆ›å»ºwebæœåŠ¡</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line"><span class="comment">//ç›‘å¬requestäº‹ä»¶ï¼Œè®¾ç½®è¯·æ±‚å¤„ç†å‡½æ•°ï¼Œå‡½æ•°å‚æ•°è°ƒç”¨requestå’Œresponse</span></span><br><span class="line">server.on(<span class="string">'request'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">request,response</span>) </span>{</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚è·¯å¾„ä¸º'</span> + request.url) <span class="comment">//request.urlä¸ºè¯·æ±‚è·¯å¾„</span></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚æˆ‘çš„å®¢æˆ·ç«¯çš„åœ°å€æ˜¯ï¼š'</span>, request.socket.remoteAddress,</span><br><span class="line">                request.socket.remotePort)</span><br><span class="line">	<span class="comment">//å“åº”æ¡ä»¶åˆ¤æ–­ï¼Œåˆ¤æ–­è¯·æ±‚è·¯å¾„</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">//jsonæµ‹è¯•</span></span><br><span class="line">	<span class="keyword">var</span> phone = [</span><br><span class="line">	{</span><br><span class="line">		<span class="attr">name</span>: <span class="string">'apache'</span>,</span><br><span class="line">		<span class="attr">price</span>: <span class="number">80000</span>,</span><br><span class="line">		<span class="attr">lcd</span>: <span class="string">'a'</span></span><br><span class="line">	},</span><br><span class="line">	{</span><br><span class="line">		<span class="attr">name</span>: <span class="string">'asdfg'</span>,</span><br><span class="line">		<span class="attr">price</span>: <span class="number">5000</span>,</span><br><span class="line">		<span class="attr">lcd</span>: <span class="string">'d'</span></span><br><span class="line">	},</span><br><span class="line">	{</span><br><span class="line">		<span class="attr">name</span>: <span class="string">'hello'</span>,</span><br><span class="line">		<span class="attr">price</span>: <span class="number">25000</span>,</span><br><span class="line">		<span class="attr">lcd</span>: <span class="string">'c'</span></span><br><span class="line">	}]</span><br><span class="line"></span><br><span class="line">	<span class="keyword">switch</span> (request.url) {</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/'</span>:</span><br><span class="line">			response.write(<span class="string">'ä½ å¥½å•Š'</span>)</span><br><span class="line">			response.end()			</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/a'</span>:</span><br><span class="line">			response.write(<span class="string">'hello'</span>)</span><br><span class="line">			response.end()			</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/b'</span>:</span><br><span class="line">			response.end(<span class="string">'leihoua'</span>)	<span class="comment">//å¯ä»¥ç›´æ¥ä½¿ç”¨.end()å‡½æ•°		</span></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'/c'</span>:</span><br><span class="line">			response.end(<span class="built_in">JSON</span>.stringify(phone))	<span class="comment">//è½¬åŒ–ä¸ºå­—ç¬¦ä¸²æ ¼å¼		</span></span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			response.write(<span class="string">'å½“å‰è·¯å¾„æœªå­˜åœ¨'</span>)</span><br><span class="line">			response.end()			</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">})</span><br><span class="line"><span class="comment">//ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡</span></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'æœåŠ¡å™¨å¯åŠ¨æˆåŠŸäº†ï¼Œå¯ä»¥é€šè¿‡ http://127.0.0.1:3000/ æ¥è¿›è¡Œè®¿é—®'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h2 id="Content-type"><a href="#Content-type" class="headerlink" title="Content-type"></a>Content-type</h2><ul>
<li>æœåŠ¡å™¨é»˜è®¤å‘é€çš„æ•°æ®ä¸ºutf8ç¼–ç å†…å®¹</li>
<li>æµè§ˆå™¨åœ¨ä¸çŸ¥é“æµè§ˆå™¨å“åº”å†…å®¹ç¼–ç çš„æƒ…å†µä¸‹ï¼Œä¼šæŒ‰å½“å‰æ“ä½œç³»ç»Ÿé»˜è®¤ç¼–ç è§£æ</li>
<li>ä¸­æ–‡æ“ä½œç³»ç»Ÿé»˜è®¤ç¼–ç ä¸ºgbk</li>
<li>åœ¨ http åè®®ä¸­ï¼ŒContent-Type å°±æ˜¯ç”¨æ¥å‘ŠçŸ¥å¯¹æ–¹æˆ‘ç»™ä½ å‘é€çš„æ•°æ®å†…å®¹æ˜¯ä»€ä¹ˆç±»å‹</li>
<li>ä¸åŒçš„èµ„æºå¯¹åº”çš„ Content-Type æ˜¯ä¸ä¸€æ ·</li>
<li>Content-Typeå·¥å…·ï¼š<a href="http://tool.oschina.net/commons">http://tool.oschina.net/commons</a></li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½httpæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="comment">//åˆ›å»ºwebæœåŠ¡å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line"><span class="comment">//æ³¨å†Œrequestç›‘å¬äº‹ä»¶</span></span><br><span class="line">server.on(<span class="string">'request'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>{</span><br><span class="line">	<span class="keyword">if</span>(req.url === <span class="string">'/index'</span>) {</span><br><span class="line">		res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/plain; charset=utf-8'</span>)</span><br><span class="line">		res.end(<span class="string">'hello,ä½ å¥½é¸­'</span>)</span><br><span class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (req.url === <span class="string">'/html'</span>) {</span><br><span class="line">		res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html; charset=utf-8'</span>)</span><br><span class="line">		res.end(<span class="string">'&lt;p&gt;æ¥å‘€æ¥å‘€ï¼Œå¿«æ¥&lt;a href="#"&gt;ç‚¹æˆ‘&lt;/a&gt;é¸­&lt;/p&gt;'</span>)</span><br><span class="line">	}</span><br><span class="line"><span class="comment">// text/plain å°±æ˜¯æ™®é€šæ–‡æœ¬</span></span><br><span class="line"><span class="comment">// å¦‚æœä½ å‘é€çš„æ˜¯ html æ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œåˆ™ä¹Ÿè¦å‘Šè¯‰æµè§ˆå™¨æˆ‘ç»™ä½ å‘é€æ˜¯ text/html æ ¼å¼çš„å†…å®¹</span></span><br><span class="line">}) </span><br><span class="line"><span class="comment">//ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡</span></span><br><span class="line">server.listen(<span class="string">'3000'</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'server begin...'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h2 id="è¿”å›æ–‡ä»¶ï¼ˆhttp-fsï¼‰"><a href="#è¿”å›æ–‡ä»¶ï¼ˆhttp-fsï¼‰" class="headerlink" title="è¿”å›æ–‡ä»¶ï¼ˆhttp-fsï¼‰"></a>è¿”å›æ–‡ä»¶ï¼ˆhttp-fsï¼‰</h2><ul>
<li><p>å‘é€çš„å¹¶ä¸æ˜¯æ–‡ä»¶ï¼Œæœ¬è´¨ä¸Šæ¥è®²å‘é€æ˜¯æ–‡ä»¶çš„å†…å®¹ï¼ˆä¸€å †å­—ç¬¦ä¸²ï¼‰</p>
</li>
<li><p>å½“æµè§ˆå™¨æ”¶åˆ°æœåŠ¡å™¨å“åº”å†…å®¹ä¹‹åï¼Œå°±ä¼šæ ¹æ®ä½ çš„ Content-Type è¿›è¡Œå¯¹åº”çš„è§£æå¤„ç†</p>
</li>
<li><p>ç»“åˆ fs å‘é€æ–‡ä»¶ä¸­çš„æ•°æ®</p>
</li>
<li><p>å­—ç¬¦æ•°æ®éœ€æŒ‡å®šç¼–ç </p>
</li>
<li><p>å›¾ç‰‡ä¸éœ€è¦æŒ‡å®šç¼–ç </p>
</li>
</ul>
<h3 id="æ ¹æ®urlè¿”å›å†…å®¹"><a href="#æ ¹æ®urlè¿”å›å†…å®¹" class="headerlink" title="æ ¹æ®urlè¿”å›å†…å®¹"></a>æ ¹æ®urlè¿”å›å†…å®¹</h3><ol>
<li><p>åŠ è½½æŒ‡å®šæ¨¡å—</p>
</li>
<li><p>åˆ›å»ºæœåŠ¡å¯¹è±¡</p>
</li>
<li><p>ç›‘å¬requestäº‹ä»¶</p>
<ul>
<li>åˆ¤æ–­è¯·æ±‚çš„url</li>
<li>ä¸ºå¯¹åº”çš„urlè¿”å›æ–‡ä»¶</li>
</ul>
<ul>
<li>è¯»å–æ–‡ä»¶å†…å®¹</li>
<li>å“åº”è¾“å‡ºæ–‡ä»¶å†…å®¹ï¼ˆæ³¨æ„è½¬æ¢æ ¼å¼ä¸ç¼–ç ï¼‰</li>
</ul>
</li>
<li><p>ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡</p>
</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//åŠ è½½æŒ‡å®šæ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="comment">//åˆ›å»ºæœåŠ¡å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line"><span class="comment">//ç›‘å¬requestäº‹ä»¶</span></span><br><span class="line">server.on(<span class="string">'request'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>{</span><br><span class="line">	<span class="keyword">var</span> url = req.url;</span><br><span class="line">	<span class="keyword">if</span>(url === <span class="string">'/index'</span>){</span><br><span class="line">		<span class="comment">//è¯»å–é¡µé¢æ–‡ä»¶</span></span><br><span class="line">		fs.readFile(<span class="string">'09-data/abc.html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>{</span><br><span class="line">			<span class="keyword">if</span>(err) {</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">'è¯»å–æ–‡ä»¶å¤±è´¥'</span>)</span><br><span class="line">			} <span class="keyword">else</span>{			</span><br><span class="line">				res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'text/html; charset=utf-8'</span>)</span><br><span class="line">				res.end(data.toString())</span><br><span class="line">			}</span><br><span class="line">		})</span><br><span class="line">	} <span class="keyword">else</span> <span class="keyword">if</span> (url === <span class="string">'/img'</span>) {</span><br><span class="line">		<span class="comment">//è¯»å–å›¾åƒæ–‡ä»¶</span></span><br><span class="line">		fs.readFile(<span class="string">'09-data/601db542da7bc1d7ecbfb218685332a.jpg'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>) </span>{</span><br><span class="line">			<span class="keyword">if</span>(err) {</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">'æ— æ³•è¯»å–è¯¥æ–‡ä»¶'</span>)</span><br><span class="line">			} <span class="keyword">else</span> {</span><br><span class="line">					res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'image/jpeg'</span>)</span><br><span class="line">					res.end(data);</span><br><span class="line">			}		</span><br><span class="line">		})</span><br><span class="line">	} <span class="keyword">else</span> {</span><br><span class="line">		res.end(<span class="string">'404'</span>)</span><br><span class="line">	}</span><br><span class="line">})</span><br><span class="line"><span class="comment">//ç»‘å®šç«¯å£å·ï¼Œå¯åŠ¨æœåŠ¡</span></span><br><span class="line">server.listen(<span class="string">'3000'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'server is running'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æµè§ˆå™¨è¾“å…¥è·¯å¾„æ‰“å¼€æ–‡ä»¶"><a href="#æµè§ˆå™¨è¾“å…¥è·¯å¾„æ‰“å¼€æ–‡ä»¶" class="headerlink" title="æµè§ˆå™¨è¾“å…¥è·¯å¾„æ‰“å¼€æ–‡ä»¶"></a>æµè§ˆå™¨è¾“å…¥è·¯å¾„æ‰“å¼€æ–‡ä»¶</h3><p>éœ€æ±‚ï¼šç”¨æˆ·åœ¨æµè§ˆå™¨è¾“å…¥æ–‡ä»¶åå³å¯è®¿é—®è¯¥æ–‡ä»¶å†…å®¹</p>
<ol>
<li>å°†ç”¨æˆ·è¾“å…¥çš„æ–‡ä»¶è½¬åŒ–ä¸ºfsæ‰€æ‰¾æ–‡ä»¶è·¯å¾„</li>
<li>fsè¯»å–æ–‡ä»¶</li>
<li>reså“åº”æ–‡ä»¶å†…å®¹</li>
<li>è¾“å‡ºæ–‡ä»¶å†…å®¹</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//å¼•ç”¨æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="comment">//åˆ›å»ºæœåŠ¡</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer()</span><br><span class="line"><span class="comment">//ç›‘å¬requestäº‹ä»¶</span></span><br><span class="line">server.on(<span class="string">'request'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> www = <span class="string">'C:/Users/12524/Desktop/Node.JS'</span></span><br><span class="line">    <span class="keyword">var</span> url = req.url <span class="comment">//ä¸èƒ½ä¸ºä¸­æ–‡è·¯å¾„</span></span><br><span class="line">    fs.readFile(www + url, <span class="string">"GBK"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">        <span class="keyword">if</span> (err) {</span><br><span class="line">            <span class="keyword">return</span> res.end(<span class="string">'404,nod found'</span>) <span class="comment">//returnåœæ­¢ä»£ç æ‰§è¡Œ</span></span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            res.end(data)</span><br><span class="line">        }</span><br><span class="line">    })</span><br><span class="line">})</span><br><span class="line"><span class="comment">//è®¾ç½®ç«¯å£å·ï¼Œå‘å¸ƒæœåŠ¡</span></span><br><span class="line">server.listen(<span class="string">'3000'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'server is running'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h2 id="é‡å®šå‘"><a href="#é‡å®šå‘" class="headerlink" title="é‡å®šå‘"></a>é‡å®šå‘</h2><h2 id="çŠ¶æ€ç 301å’Œ302"><a href="#çŠ¶æ€ç 301å’Œ302" class="headerlink" title="çŠ¶æ€ç 301å’Œ302"></a>çŠ¶æ€ç 301å’Œ302</h2><p><code>301</code></p>
<ul>
<li><p>æ°¸ä¹…æ€§çš„é‡å®šå‘ï¼Œæœç´¢å¼•æ“åœ¨æŠ“å–æ–°å†…å®¹çš„åŒæ—¶å°†æ—§ç½‘å€æ›¿æ¢ä¸ºé‡å®šå‘ä¹‹åçš„ç½‘å€<br><code>302</code></p>
</li>
<li><p>æš‚æ—¶æ€§è·³è½¬ï¼Œæœç´¢å¼•æ“æŠ“å–æ–°çš„å†…å®¹çš„åŒæ—¶ä¿ç•™æ—§ç½‘å€</p>
</li>
<li><p>æœåŠ¡å™¨è¿”å›302æ—¶ï¼Œæœç´¢å¼•æ“è®¤ä¸ºæ–°ç½‘å€æ—¶æš‚æ—¶çš„</p>
</li>
</ul>
<h1 id="path"><a href="#path" class="headerlink" title="path"></a>path</h1><p>è·¯å¾„æ“ä½œæ¨¡å—</p>
<h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://nodejs.org/docs/latest-v13.x/api/path.html">https://nodejs.org/docs/latest-v13.x/api/path.html</a></p>
</blockquote>
<ul>
<li>path.basenameï¼šè·å–è·¯å¾„çš„æ–‡ä»¶åï¼Œé»˜è®¤åŒ…å«æ‰©å±•å</li>
<li>path.dirnameï¼šè·å–è·¯å¾„ä¸­çš„ç›®å½•éƒ¨åˆ†</li>
<li>path.extnameï¼šè·å–ä¸€ä¸ªè·¯å¾„ä¸­çš„æ‰©å±•åéƒ¨åˆ†</li>
<li>path.parseï¼šæŠŠè·¯å¾„è½¬æ¢ä¸ºå¯¹è±¡<ul>
<li>rootï¼šæ ¹è·¯å¾„</li>
<li>dirï¼šç›®å½•</li>
<li>baseï¼šåŒ…å«åç¼€åçš„æ–‡ä»¶å</li>
<li>extï¼šåç¼€å</li>
<li>nameï¼šä¸åŒ…å«åç¼€åçš„æ–‡ä»¶å</li>
</ul>
</li>
<li>ğŸ”ºpath.joinï¼šæ‹¼æ¥è·¯å¾„ï¼ˆç¬¬äºŒä¸ªå‚æ•°ä¼šè‡ªåŠ¨åˆ¤æ–­/æ˜¯å¦å¤šä½™ï¼‰</li>
<li>path.isAbsoluteï¼šåˆ¤æ–­ä¸€ä¸ªè·¯å¾„æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„</li>
</ul>
<h1 id="body-parser"><a href="#body-parser" class="headerlink" title="body-parser"></a>body-parser</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>body postè§£æä¸­é—´ä»¶</p>
<p>å¤„ç†ç¨‹åºä¹‹å‰ï¼Œåœ¨ä¸­é—´ä»¶ä¸­å¯¹ä¼ å…¥çš„è¯·æ±‚ä½“è¿›è¡Œè§£æï¼ˆresponse bodyï¼‰</p>
<p>å¤„ç†postè¯·æ±‚ä½“</p>
<p><code>body-parser</code> æä¾›å››ç§è§£æå™¨<br>JSON body parser<br>Raw body parser<br>Text body parser<br>URL-encoded form body parser</p>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">npm i body-parser</span><br></pre></td></tr></tbody></table></figure>
<h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bodyParse = <span class="built_in">require</span>(<span class="string">"body-parse"</span>)</span><br></pre></td></tr></tbody></table></figure>
<h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// parse application/x-www-form-urlencoded</span></span><br><span class="line">app.use(bodyParser.urlencoded({ <span class="attr">extended</span>: <span class="literal">false</span> }))</span><br><span class="line"><span class="comment">// parse application/json</span></span><br><span class="line">app.use(bodyParser.json())</span><br></pre></td></tr></tbody></table></figure>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">router.post(<span class="string">'/login'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>{</span><br><span class="line">	<span class="built_in">console</span>.log(req.body)</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h2 id="åŸç”Ÿè·å–postè¯·æ±‚ä½“æ–¹å¼"><a href="#åŸç”Ÿè·å–postè¯·æ±‚ä½“æ–¹å¼" class="headerlink" title="åŸç”Ÿè·å–postè¯·æ±‚ä½“æ–¹å¼"></a>åŸç”Ÿè·å–postè¯·æ±‚ä½“æ–¹å¼</h2><p>è®°å¾—å…ˆå¼•å…¥<code>querystring</code>æ¨¡å—</p>
<p><code>querystring</code>ç”¨ä½œåˆ†å‰²è¯·æ±‚ä½“å†…å®¹å¹¶è½¬åŒ–ä¸ºå¯¹è±¡æ ¼å¼</p>
<p>å› ä¸ºæœ‰æ—¶å€™ä¼šç”¨åˆ°æ–‡ä»¶ä¸Šä¼ ï¼Œæ‰€ä»¥è¿™é‡Œè¦åˆ¤æ–­æ•°æ®è¯·æ±‚å¤´çš„<code>content-type</code>ï¼Œå¦‚æœæ˜¯<code>multipart/form-data</code>ï¼Œåˆ™è®©<code>formidable</code>ä¸­é—´ä»¶å»å¤„ç†ï¼Œå¦åˆ™è‡ªå·±å¤„ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> {</span><br><span class="line">    <span class="keyword">let</span> data = <span class="string">``</span></span><br><span class="line">    <span class="keyword">if</span> (req.method.toLowerCase() === <span class="string">'get'</span>) {</span><br><span class="line">        <span class="keyword">return</span> next()</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯æœ‰æ–‡ä»¶çš„è¡¨å•POSTï¼Œåˆ™ä¸å¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span> (req.headers[<span class="string">'content-type'</span>].startsWith(<span class="string">'multipart/form-data'</span>)) {</span><br><span class="line">        req.on(<span class="string">'data'</span>, <span class="function"><span class="params">chunk</span> =&gt;</span> {</span><br><span class="line">            data += chunk</span><br><span class="line">        })</span><br><span class="line">        req.on(<span class="string">'end'</span>, <span class="function">() =&gt;</span> {</span><br><span class="line">            req.body = queryString.parse(data)</span><br><span class="line">            next()</span><br><span class="line">        })</span><br><span class="line">    }</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h1 id="nodeä¸­çš„å…¶ä»–æˆå‘˜"><a href="#nodeä¸­çš„å…¶ä»–æˆå‘˜" class="headerlink" title="nodeä¸­çš„å…¶ä»–æˆå‘˜"></a>nodeä¸­çš„å…¶ä»–æˆå‘˜</h1><h2 id="dirname-filename"><a href="#dirname-filename" class="headerlink" title="__dirname() __filename"></a>__dirname() __filename</h2><ul>
<li>__dirname:åŠ¨æ€è·å–å½“å‰æ¨¡å—æ–‡ä»¶æ‰€å¤„ç›®å½•çš„ç»å¯¹è·¯å¾„</li>
<li>__filename: åŠ¨æ€è·å–å½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„<br>åœ¨æ–‡ä»¶æ“ä½œä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ˜¯ä¸å¯é çš„ï¼Œå› ä¸ºnodeä¸­æ–‡ä»¶æ“ä½œçš„è·¯å¾„è¢«è®¾è®¡ä¸ºç›¸å¯¹äºæ‰§è¡Œnodeå‘½ä»¤æ‰€å¤„çš„è·¯å¾„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨<code>__dirname()</code>æˆ– <code>__filename</code>æŠŠç›¸å¯¹è·¯å¾„å˜ä¸ºç»å¯¹è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ä¸å—ä»»ä½•å½±å“ï¼‰ã€‚</li>
</ul>
<p>åœ¨æ‹¼æ¥è·¯å¾„çš„è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†é¿å…æ‰‹åŠ¨æ‹¼æ¥å¸¦æ¥çš„ä¸€äº›é”™è¯¯ï¼Œå°±å¯ä»¥ä½¿ç”¨path.join()æ¥è¾…åŠ©æ‹¼æ¥</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//pathä¼šå°†è·¯å¾„åå’Œæ–‡ä»¶åæ‹¼æ¥èµ·æ¥ä¸”èƒ½è¯†åˆ«é€‚åº”æ–‡ä»¶åå‰è·¯å¾„å½¢å¼</span></span><br><span class="line">fs.readFile(path.join(__dirname, <span class="string">'a.txt'</span>), <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'error'</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">        <span class="built_in">console</span>.log(path.join(__dirname, <span class="string">'./a.txt'</span>))</span><br><span class="line">    }</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨æ„ï¼š</p>
<p>æ¨¡å—ä¸­çš„è·¯å¾„æ ‡è¯†å’Œæ–‡ä»¶æ“ä½œä¸­çš„ç›¸å¯¹è·¯å¾„æ ‡è¯†ä¸ä¸€è‡´</p>
<p>æ¨¡å—ä¸­çš„è·¯å¾„æ ‡è¯†å°±æ˜¯ç›¸å¯¹äºå½“å‰æ–‡ä»¶æ¨¡å—ï¼Œä¸å—nodeå‘½ä»¤æ‰€å¤„è·¯å¾„å½±å“</p>
<h1 id="nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ"><a href="#nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ" class="headerlink" title="nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ"></a>nodeä¸­çš„æ¨¡å—ç³»ç»Ÿ</h1><h2 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h2><h3 id="ä½•ä¸ºæ¨¡å—åŒ–"><a href="#ä½•ä¸ºæ¨¡å—åŒ–" class="headerlink" title="ä½•ä¸ºæ¨¡å—åŒ–"></a>ä½•ä¸ºæ¨¡å—åŒ–</h3><ul>
<li>æ–‡ä»¶ä½œç”¨åŸŸ(æ¨¡å—æ˜¯ç‹¬ç«‹çš„ï¼Œåœ¨ä¸åŒçš„æ–‡ä»¶ä½¿ç”¨å¿…é¡»è¦é‡æ–°å¼•ç”¨)<ul>
<li>æ³¨æ„: åœ¨nodeä¸­æ²¡æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œå®ƒæ˜¯æ–‡ä»¶æ¨¡å—ä½œç”¨åŸŸ</li>
</ul>
</li>
<li>é€šä¿¡è§„åˆ™<ul>
<li>åŠ è½½: <code>require</code></li>
<li>å¯¼å‡º: <code>exports</code></li>
</ul>
</li>
</ul>
<h3 id="æ¨¡å—ç±»å‹"><a href="#æ¨¡å—ç±»å‹" class="headerlink" title="æ¨¡å—ç±»å‹"></a>æ¨¡å—ç±»å‹</h3><ul>
<li>æ ¸å¿ƒæ¨¡å—<ul>
<li>æ–‡ä»¶æ“ä½œçš„fs</li>
<li>httpæœåŠ¡æ“ä½œçš„http</li>
<li>urlè·¯å¾„æ“ä½œæ¨¡å—</li>
<li>pathè·¯å¾„å¤„ç†æ¨¡å—</li>
<li>osæ“ä½œç³»ç»Ÿä¿¡æ¯</li>
<li>â€¦â€¦</li>
</ul>
</li>
<li>ç¬¬ä¸‰æ–¹æ¨¡å—<ul>
<li>art-template</li>
<li>å¿…é¡»é€šè¿‡npmæ¥ä¸‹è½½æ‰å¯ä»¥ä½¿ç”¨</li>
</ul>
</li>
<li>è‡ªå·±å†™çš„æ¨¡å—<ul>
<li>è‡ªå·±åˆ›å»ºçš„æ–‡ä»¶</li>
</ul>
</li>
</ul>
<h3 id="æ¨¡å—æ ‡è¯†"><a href="#æ¨¡å—æ ‡è¯†" class="headerlink" title="æ¨¡å—æ ‡è¯†"></a>æ¨¡å—æ ‡è¯†</h3><p><code>./</code>ç›¸å¯¹äºå½“å‰è·¯å¾„ï¼ˆåœ¨æ–‡ä»¶æ“ä½œä¸­å¯çœç•¥ï¼‰</p>
<p><code>/</code>åœ¨å½“å‰æ¨¡å—æ‰€å¤„çš„ç£ç›˜æ ¹ç›®å½•</p>
<h2 id="javascriptæ¨¡å—åŒ–ï¼ˆéœ€è¡¥å……ï¼‰"><a href="#javascriptæ¨¡å—åŒ–ï¼ˆéœ€è¡¥å……ï¼‰" class="headerlink" title="javascriptæ¨¡å—åŒ–ï¼ˆéœ€è¡¥å……ï¼‰"></a>javascriptæ¨¡å—åŒ–ï¼ˆéœ€è¡¥å……ï¼‰</h2><ul>
<li>Node ä¸­çš„ CommonJS</li>
<li>æµè§ˆå™¨ä¸­çš„ï¼š<ul>
<li>AMD require.js</li>
<li>CMD sea.js</li>
</ul>
</li>
<li>es6ä¸­å¢åŠ äº†å®˜æ–¹æ”¯æŒ</li>
</ul>
<h2 id="CommonJSæ¨¡å—è§„èŒƒ"><a href="#CommonJSæ¨¡å—è§„èŒƒ" class="headerlink" title="CommonJSæ¨¡å—è§„èŒƒ"></a>CommonJSæ¨¡å—è§„èŒƒ</h2><ul>
<li>æ¨¡å—ä½œç”¨åŸŸ</li>
<li>ä½¿ç”¨requireæ–¹æ³•æ¥åŠ è½½æ¨¡å—</li>
<li>ä½¿ç”¨exportsæ¥å£å¯¹è±¡æ¥å¯¼å‡ºæ¨¡æ¿ä¸­çš„æˆå‘˜</li>
</ul>
<h3 id="åŠ è½½require"><a href="#åŠ è½½require" class="headerlink" title="åŠ è½½require"></a>åŠ è½½<code>require</code></h3><p>ä½¿ç”¨<code>require</code>å‡½æ•°åŠ è½½æ¨¡å—</p>
<ul>
<li><p>è‹¥è°ƒç”¨éæ ¸å¿ƒæ¨¡å—å’Œç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¿…é¡»åŠ ä¸Šç›¸å¯¹è·¯å¾„<code>./</code>,å¯ä»¥çœç•¥åç¼€å</p>
</li>
<li><p><code>require</code>ä½œç”¨</p>
<ul>
<li>åŠ è½½æ–‡ä»¶æ¨¡å—å¹¶æ‰§è¡Œé‡Œé¢çš„ä»£ç </li>
<li>æ‹¿åˆ°è¢«åŠ è½½æ–‡ä»¶æ¨¡å—å¯¼å‡ºçš„æ¥å£å¯¹è±¡</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br></pre></td></tr></tbody></table></figure>
<h3 id="requireæ–¹æ³•åŠ è½½è§„åˆ™"><a href="#requireæ–¹æ³•åŠ è½½è§„åˆ™" class="headerlink" title="requireæ–¹æ³•åŠ è½½è§„åˆ™"></a>requireæ–¹æ³•åŠ è½½è§„åˆ™</h3><ul>
<li>ä¼˜å…ˆä»ç¼“å­˜åŠ è½½ï¼ˆå³ä¸ä¼šé‡å¤è°ƒç”¨åŒä¸ªæ¨¡å—ä¸­çš„å‡½æ•°ï¼‰<ul>
<li>é¿å…é‡å¤åŠ è½½ï¼Œæé«˜æ¨¡å—åŠ è½½æ•ˆç‡</li>
<li>nodeä¼šè‡ªåŠ¨å¯»æ‰¾å½“å‰æ–‡ä»¶è·¯å¾„çš„node_modules,ä»è€ŒåŠ è½½ç¬¬ä¸‰æ–¹åŒ…ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™ä¼šç»§ç»­å¾€ä¸Šä¸€çº§ç›®å½•æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ï¼ˆå¦‚æ²¡æ‰¾åˆ°åˆ™æŠ¥é”™ï¼‰</li>
</ul>
</li>
</ul>
<p>main.js</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'./a'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼˜å…ˆä»ç¼“å­˜åŠ è½½</span></span><br><span class="line"><span class="comment">// ç”±äº åœ¨ a ä¸­å·²ç»åŠ è½½è¿‡ b äº†</span></span><br><span class="line"><span class="comment">// æ‰€ä»¥è¿™é‡Œä¸ä¼šé‡å¤åŠ è½½</span></span><br><span class="line"><span class="comment">// å¯ä»¥æ‹¿åˆ°å…¶ä¸­çš„æ¥å£å¯¹è±¡ï¼Œä½†æ˜¯ä¸ä¼šé‡å¤æ‰§è¡Œé‡Œé¢çš„ä»£ç </span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="built_in">require</span>(<span class="string">'./b'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>a.js</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'a.js è¢«åŠ è½½äº†'</span>)</span><br><span class="line"><span class="keyword">var</span> fn = <span class="built_in">require</span>(<span class="string">'./b'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(fn)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>b.js</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'b.js è¢«åŠ è½½äº†'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello bbb'</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line">### ç¬¬ä¸‰æ–¹æ¨¡å—åŠ è½½è¿‡ç¨‹</span><br><span class="line">art-templateä¸ºä¾‹</span><br><span class="line"></span><br><span class="line"> <span class="number">1.</span> å…ˆæ‰¾åˆ°å½“å‰é¡¹ç›®è·¯å¾„çš„node_modules</span><br><span class="line"> <span class="number">2.</span> node-modules/art-template</span><br><span class="line"> <span class="number">3.</span> node-modules/art-template/package.json</span><br><span class="line"> <span class="number">4.</span> æ‰¾åˆ°è¯´æ˜æ–‡ä»¶ä¸­çš„mainå±æ€§</span><br><span class="line">   + mainå±æ€§è®°å½•art-templateçš„å…¥å£æ¨¡å—</span><br><span class="line"> <span class="number">5.</span> åŠ è½½ä½¿ç”¨è¿™ä¸ªç¬¬ä¸‰æ–¹åŒ…</span><br><span class="line">   + å®é™…åŠ è½½çš„è¿˜æ˜¯index.jsæ–‡ä»¶</span><br><span class="line"> <span class="number">6.</span> è‹¥ï¼Œpackage.jsonæˆ–mainæŒ‡å®šçš„å…¥å£æ¨¡å—ä¸å­˜åœ¨åˆ™nodeä¼šæ‰¾è¯¥ç›®å½•ä¸‹çš„index.jsæ–‡ä»¶</span><br><span class="line"> <span class="number">7.</span> æ¡ä»¶å‡ä¸æ»¡è¶³åˆ™è‡ªåŠ¨å¾€ä¸Šä¸€çº§ç›®å½•æŸ¥æ‰¾</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### å¯¼å‡º<span class="built_in">exports</span></span><br><span class="line">ä½¿ç”¨<span class="built_in">exports</span>å‡½æ•°å¯¼å‡ºéœ€è¢«å¤–éƒ¨è®¿é—®çš„æˆå‘˜</span><br><span class="line">+ <span class="built_in">exports</span></span><br><span class="line">   * åœ¨æ¯ä¸ªæ–‡ä»¶æ¨¡å—ä¸­éƒ½æä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼š<span class="built_in">exports</span></span><br><span class="line">   * <span class="built_in">exports</span> é»˜è®¤æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡</span><br><span class="line">   * å°†éœ€è¢«å¤–éƒ¨è®¿é—®çš„æˆå‘˜æŒ‚è½½åˆ°è¿™ä¸ª <span class="built_in">exports</span> å¯¹è±¡ä¸­</span><br><span class="line">å¯¼å‡ºå¤šä¸ªæˆå‘˜</span><br><span class="line"></span><br><span class="line">**æ–¹æ³•ä¸€**</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">exports.a = 123;</span></span><br><span class="line"><span class="string">exports.b = function(){</span></span><br><span class="line"><span class="string">    console.log('bbb')</span></span><br><span class="line"><span class="string">};</span></span><br><span class="line"><span class="string">exports.c = {</span></span><br><span class="line"><span class="string">    foo:"bar"</span></span><br><span class="line"><span class="string">};</span></span><br><span class="line"><span class="string">exports.d = 'hello';</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">**æ–¹æ³•äºŒ**</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">    foo = <span class="string">'hello'</span>,</span><br><span class="line">    <span class="attr">add</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="keyword">return</span> x+y;</span><br><span class="line">    }</span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line">å¯¼å‡ºå•ä¸ªæˆå‘˜ï¼ˆè¿™æ—¶å¼•ç”¨è¯¥æ¨¡å—ï¼Œç›´æ¥è¿”å›helloå­—ç¬¦ä¸²ï¼‰</span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">module.exports = 'hello';</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">æ¡ˆä¾‹ï¼šå‡è®¾å­˜åœ¨aæ¨¡å—å’Œbæ¨¡å—ï¼Œç°åœ¨è¦ç”¨aæ¨¡å—è®¿é—®bæ¨¡å—çš„æˆå‘˜</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**aæ¨¡å—**</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hello,i am a'</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">'./b.js'</span>);<span class="comment">//è°ƒç”¨è¯¥æ¨¡å—çš„åŒæ—¶ï¼Œå°†è¯¥æ¨¡å—å†…å®¹å¼•å…¥</span></span><br><span class="line"><span class="comment">// require('./b.js');</span></span><br><span class="line"><span class="built_in">console</span>.log(b.bbb(<span class="number">10</span>,<span class="number">20</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'bye,a are leave'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line">**bæ¨¡å—**</span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">// var c = require('./c');</span></span><br><span class="line"><span class="string">console.log('hello,i am b.');</span></span><br><span class="line"><span class="string">require('./c');</span></span><br><span class="line"><span class="string">exports.bbb = function(a,b) {</span></span><br><span class="line"><span class="string">	return a + b;</span></span><br><span class="line"><span class="string">};</span></span><br><span class="line"><span class="string">console.log('bye,b are leave');</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">**cæ¨¡å—**</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'hello,i am c'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'bye,c are leave'</span>);</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line">### <span class="built_in">module</span>.exportså’Œ<span class="built_in">exports</span>çš„å…³ç³»</span><br><span class="line">çœŸæ­£è¦å¯¼å‡ºæ•°æ®æ˜¯<span class="built_in">module</span>.exportsï¼Œè€Œnodeä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬æ“ä½œï¼Œæ‰€ä»¥æŒ‡å®šäº†ä¸€ä¸ªå˜é‡<span class="built_in">exports</span>ç­‰åŒäº<span class="built_in">module</span>.exportsï¼Œï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤º</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">var exports = module.exports</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ‰€ä»¥</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span>.a = <span class="number">2</span></span><br><span class="line"><span class="built_in">exports</span>.b = <span class="number">3</span></span><br></pre></td></tr></tbody></table></figure>
<p>è¿™äº›å€¼æœ€ç»ˆä¼šç­‰åŒäºmodule.exports.a = 2å’Œmodule.exports.a = 3ï¼ŒåŒæ—¶ä¼šè¢«å¯¼å‡º</p>
<p>ä½†å¦‚æœï¼Œä½ è¿™æ ·å†™ä»£ç </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">exports</span> = <span class="number">2</span></span><br></pre></td></tr></tbody></table></figure>
<p>é‚£ä¹ˆï¼Œä½ ç›¸å½“äºæ”¹äº†exportsçš„å€¼ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä¸module.exportsåˆ†é“æ‰¬é•³ï¼Œå®ƒçš„å€¼ä¹Ÿä¸ä¼šç­‰äºmoduleå¯¼å‡ºçš„å€¼</p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†ä¿é™©èµ·è§ï¼Œæ–°æ‰‹æœ€å¥½ä½¿ç”¨module.exportså¯¼å‡ºä½ è¦å¯¼å‡ºçš„å†…å®¹ï¼Œé¿å…é”™è¯¯</p>
]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>Node.jsç¬”è®°(2)</title>
    <url>/2021/03/03/Node.js%E7%AC%94%E8%AE%B0(2)/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h1><h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>NPMæ˜¯éšåŒNodeJSä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½è§£å†³NodeJSä»£ç éƒ¨ç½²ä¸Šçš„å¾ˆå¤šé—®é¢˜ï¼Œå¸¸è§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚</li>
<li>å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚</li>
<li>å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°NPMæœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚</li>
</ul>
<h2 id="ç½‘ç«™"><a href="#ç½‘ç«™" class="headerlink" title="ç½‘ç«™"></a>ç½‘ç«™</h2><p>npmjs.com ç½‘ç«™ æ˜¯ç”¨æ¥æœç´¢npmåŒ…çš„</p>
<h2 id="npmå‘½ä»¤è¡Œå·¥å…·"><a href="#npmå‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="npmå‘½ä»¤è¡Œå·¥å…·"></a>npmå‘½ä»¤è¡Œå·¥å…·</h2><p>npmä¹Ÿæœ‰ç‰ˆæœ¬æ¦‚å¿µï¼Œå¯ä»¥é€šè¿‡npm â€“versionæ¥æŸ¥çœ‹npmçš„ç‰ˆæœ¬</p>
<p>å‡çº§npm(è‡ªå·±å‡çº§è‡ªå·±)ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">npm install --global npm</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a><strong>å¸¸ç”¨å‘½ä»¤</strong></h2><ul>
<li><p><code>npm init</code>(ç”Ÿæˆpackage.jsonè¯´æ˜ä¹¦æ–‡ä»¶)</p>
</li>
<li><p><code>npm init -y</code>(å¯ä»¥è·³è¿‡å‘å¯¼ï¼Œå¿«é€Ÿç”Ÿæˆ)</p>
</li>
<li><p><code>npm install</code></p>
<ul>
<li>ä¸€æ¬¡æ€§æŠŠdependenciesé€‰é¡¹ä¸­çš„ä¾èµ–é¡¹å…¨éƒ¨å®‰è£…</li>
<li>ç®€å†™ï¼ˆnpm iï¼‰</li>
</ul>
</li>
<li><p><code>npm install</code>åŒ…å</p>
<ul>
<li>åªä¸‹è½½</li>
<li>ç®€å†™ï¼ˆnpm i åŒ…åï¼‰</li>
</ul>
</li>
<li><p><code>npm install â€“save</code> åŒ…å</p>
<ul>
<li>ä¸‹è½½å¹¶ä¸”ä¿å­˜ä¾èµ–é¡¹ï¼ˆpackage.jsonæ–‡ä»¶ä¸­çš„dependenciesé€‰é¡¹ï¼‰</li>
<li>ç®€å†™ï¼ˆnpm i åŒ…åï¼‰</li>
<li>â€“save è‡ªåŠ¨ç”Ÿæˆè¯´æ˜è¯´æ–‡ä»¶ä¿¡æ¯package.json</li>
<li>æ–‡ä»¶ä¿¡æ¯è‡ªåŠ¨æ·»åŠ è‡³package.json</li>
<li>è‹¥åˆ é™¤æ‰æŸäº›é¡¹ç›®ä½¿ç”¨çš„æ¨¡å—ä½†æœ‰ä¿ç•™package.jsonï¼Œåˆ™å¯åœ¨å‘½ä»¤è¡Œï¼ˆå½“å‰é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹ï¼‰æ‰§è¡Œ npm install å…¨éƒ¨è‡ªåŠ¨ä¸‹å›æ¥</li>
</ul>
</li>
<li><p><code>npm uninstall</code> åŒ…å</p>
<ul>
<li>åªåˆ é™¤ï¼Œå¦‚æœæœ‰ä¾èµ–é¡¹ä¼šä¾ç„¶ä¿å­˜</li>
<li>ç®€å†™ï¼ˆnpm un åŒ…åï¼‰</li>
</ul>
</li>
<li><p><code>npm uninstall â€“save</code>åŒ…å</p>
<ul>
<li>åˆ é™¤çš„åŒæ—¶ä¹Ÿä¼šæŠŠä¾èµ–ä¿¡æ¯å…¨éƒ¨åˆ é™¤</li>
<li>ç®€å†™ï¼ˆnpm un åŒ…åï¼‰</li>
</ul>
</li>
<li><p><code>npm help</code></p>
<ul>
<li>æŸ¥çœ‹ä½¿ç”¨å¸®åŠ©</li>
</ul>
</li>
<li><p>npm å‘½ä»¤ â€“help</p>
<ul>
<li>æŸ¥çœ‹å…·ä½“å‘½ä»¤çš„ä½¿ç”¨å¸®åŠ©ï¼ˆnpm uninstall â€“helpï¼‰</li>
</ul>
</li>
</ul>
<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>æ¯ä¸€ä¸ªé¡¹ç›®éƒ½è¦æœ‰ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶ï¼ˆåŒ…æè¿°æ–‡ä»¶ï¼Œå°±åƒäº§å“çš„è¯´æ˜ä¹¦ä¸€æ ·ï¼‰</p>
<p>è¿™ä¸ªæ–‡ä»¶å¯ä»¥é€šè¿‡<code>npm init</code>è‡ªåŠ¨åˆå§‹åŒ–å‡ºæ¥</p>
<p>å¯¹äºç›®å‰æ¥è®²ï¼Œæœ€æœ‰ç”¨çš„æ˜¯<code>dependencies</code>é€‰é¡¹ï¼Œå¯ä»¥ç”¨æ¥å¸®åŠ©æˆ‘ä»¬ä¿å­˜ç¬¬ä¸‰æ–¹åŒ…çš„ä¾èµ–ä¿¡æ¯ã€‚</p>
<p>å¦‚æœ<code>node_modules</code>åˆ é™¤äº†ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œåªéœ€è¦åœ¨æ§åˆ¶é¢æ¿ä¸­<code>npm install</code>å°±ä¼šè‡ªåŠ¨æŠŠ<code>package.json</code>ä¸­çš„<code>dependencies</code>ä¸­æ‰€æœ‰çš„ä¾èµ–é¡¹å…¨éƒ¨éƒ½ä¸‹è½½å›æ¥ã€‚</p>
<ul>
<li>å»ºè®®æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹éƒ½æœ‰ä¸€ä¸ª<code>package.json</code>æ–‡ä»¶</li>
<li>å»ºè®®æ‰§è¡Œ<code>npm install</code> åŒ…åçš„æ—¶å€™éƒ½åŠ ä¸Š<code>--save</code>é€‰é¡¹ï¼Œç›®çš„æ˜¯ç”¨æ¥ä¿å­˜ä¾èµ–ä¿¡æ¯</li>
</ul>
<h3 id="package-jsonå’Œpackage-lock-json"><a href="#package-jsonå’Œpackage-lock-json" class="headerlink" title="package.jsonå’Œpackage-lock.json"></a>package.jsonå’Œpackage-lock.json</h3><p>npm 5ä»¥å‰æ˜¯ä¸ä¼šæœ‰<code>package-lock.json</code>è¿™ä¸ªæ–‡ä»¶</p>
<p>npm5ä»¥åæ‰åŠ å…¥è¿™ä¸ªæ–‡ä»¶</p>
<p>å½“ä½ å®‰è£…åŒ…çš„æ—¶å€™ï¼Œnpméƒ½ä¼šç”Ÿæˆæˆ–è€…æ›´æ–°<code>package-lock.json</code>è¿™ä¸ªæ–‡ä»¶</p>
<h3 id="package-jsonç”¨å¤„"><a href="#package-jsonç”¨å¤„" class="headerlink" title="package.jsonç”¨å¤„"></a>package.jsonç”¨å¤„</h3><h3 id="æå‡ä¸‹è½½é€Ÿåº¦"><a href="#æå‡ä¸‹è½½é€Ÿåº¦" class="headerlink" title="æå‡ä¸‹è½½é€Ÿåº¦"></a>æå‡ä¸‹è½½é€Ÿåº¦</h3><ul>
<li><p>npm5ä»¥åçš„ç‰ˆæœ¬å®‰è£…éƒ½ä¸è¦åŠ â€“saveå‚æ•°ï¼Œå®ƒä¼šè‡ªåŠ¨ä¿å­˜ä¾èµ–ä¿¡æ¯</p>
</li>
<li><p>å½“ä½ å®‰è£…åŒ…çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæˆ–è€…æ›´æ–°<code>package-lock.json</code>æ–‡ä»¶</p>
</li>
</ul>
<p>package-lock.json</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">è¿™ä¸ªæ–‡ä»¶ä¼šåŒ…å«</span><br></pre></td></tr></tbody></table></figure>

<p>node_modules</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ä¸­æ‰€æœ‰åŒ…çš„ä¿¡æ¯ï¼ˆç‰ˆæœ¬ï¼Œä¸‹è½½åœ°å€ã€‚ã€‚ã€‚ï¼‰</span><br><span class="line"></span><br><span class="line">  - è¿™æ ·çš„è¯é‡æ–°`npm install`çš„æ—¶å€™é€Ÿåº¦å°±å¯ä»¥æå‡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### é”å®šç‰ˆæœ¬å·</span><br><span class="line"></span><br><span class="line">- ä»æ–‡ä»¶æ¥çœ‹ï¼Œæœ‰ä¸€ä¸ª</span><br></pre></td></tr></tbody></table></figure>
<p>lock</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">ç§°ä¹‹ä¸ºé”</span><br><span class="line"></span><br><span class="line">- è¿™ä¸ª`lock`ä½¿ç”¨æ¥é”ç‰ˆæœ¬çš„</span><br><span class="line">- å¦‚æœé¡¹ç›®ä¾èµ–äº†`1.1.1`ç‰ˆæœ¬</span><br><span class="line">- å¦‚æœä½ é‡æ–°installå…¶å®ä¼šä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯`1.1.1`</span><br><span class="line">- `package-lock.json`çš„å¦å¤–ä¸€ä¸ªä½œç”¨å°±æ˜¯é”å®šç‰ˆæœ¬å·ï¼Œé˜²æ­¢è‡ªåŠ¨å‡çº§</span><br></pre></td></tr></tbody></table></figure>
<h1 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h1><p>æ¡ˆä¾‹ï¼šexpressç•™è¨€æ¿ã€å­¦ç”Ÿä¿¡æ¯å¢åˆ æ”¹</p>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Express æ˜¯ä¸€ä¸ªç®€æ´è€Œçµæ´»çš„ Node.JS Webåº”ç”¨æ¡†æ¶, æä¾›äº†ä¸€ç³»åˆ—å¼ºå¤§ç‰¹æ€§å¸®åŠ©ä½ åˆ›å»ºå„ç§ Web åº”ç”¨ï¼Œå’Œä¸°å¯Œçš„ HTTP å·¥å…·ã€‚</p>
<p>ä½¿ç”¨ Express å¯ä»¥å¿«é€Ÿåœ°æ­å»ºä¸€ä¸ªå®Œæ•´åŠŸèƒ½çš„ç½‘ç«™ã€‚</p>
<p>Express æ¡†æ¶æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚</li>
<li>å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚</li>
<li>å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚</li>
</ul>
<h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">npm init //ç”Ÿæˆè¯´æ˜æ–‡ä»¶</span><br><span class="line">npm install --save express</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h2><ol>
<li>å¼•åŒ…</li>
<li>åˆ›å»ºæœåŠ¡å™¨åº”ç”¨ç¨‹åº</li>
<li>æ¥å—è¯·æ±‚ï¼Œè¿”å›å“åº”</li>
<li>å‘å¸ƒæœåŠ¡<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//å¼•åŒ…</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæœåŠ¡</span></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼€æ”¾æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">app.use(<span class="string">'/public'</span>, express.static(<span class="string">'./public/'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥æ”¶è¯·æ±‚ï¼Œè¿”å›å“åº”</span></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>) </span>{</span><br><span class="line">	res.send(<span class="string">'æˆåŠŸå•¦ï¼'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘å¸ƒæœåŠ¡</span></span><br><span class="line">app.listen(<span class="string">'3000'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'server is running...'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line">## art-template</span><br><span class="line">### å®‰è£…</span><br><span class="line"><span class="string">``</span><span class="string">`Shell</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">npm install --sava art-template</span></span><br><span class="line"><span class="string">npm install -save express-art-template</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">app.engine(<span class="string">'html'</span>, <span class="built_in">require</span>(<span class="string">'express-art-template'</span>))</span><br><span class="line">app.set(<span class="string">'/views'</span>, <span class="string">'./views/'</span>) <span class="comment">//å¯ä»¥æ›´æ”¹æ¨¡æ¿å¼•æ“é»˜è®¤è°ƒç”¨èµ„æºæ–‡ä»¶å¤¹è·¯å¾„,æ³¨æ„ä¹¦å†™</span></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line">### ä½¿ç”¨</span><br><span class="line"><span class="string">``</span><span class="string">`Javascript</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">res.render('index.html', {</span></span><br><span class="line"><span class="string">    students: students.students</span></span><br><span class="line"><span class="string">})</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">## åˆè¯†ï¼ˆæ•°æ®æ¸²æŸ“ï¼‰</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>Javascript</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/public'</span>, express.static(<span class="string">'./public/'</span>))</span><br><span class="line">app.use(<span class="string">'/node_modules/'</span>, express.static(<span class="string">'./node_modules/'</span>))</span><br><span class="line"></span><br><span class="line">app.engine(<span class="string">'html'</span>, <span class="built_in">require</span>(<span class="string">'express-art-template'</span>))</span><br><span class="line">app.set(<span class="string">'/views'</span>, <span class="string">'./views/'</span>) <span class="comment">//å¯ä»¥æ›´æ”¹æ¨¡æ¿å¼•æ“é»˜è®¤è°ƒç”¨èµ„æºæ–‡ä»¶å¤¹è·¯å¾„,æ³¨æ„ä¹¦å†™</span></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>{</span><br><span class="line">    fs.readFile(<span class="string">'db.json'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">        <span class="keyword">if</span> (err) {</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">'æ•°æ®æœ‰è¯¯'</span>)</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// console.log(JSON.parse(data))</span></span><br><span class="line">        <span class="keyword">var</span> students = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">        res.render(<span class="string">'index.html'</span>, {</span><br><span class="line">            <span class="attr">students</span>: students.students</span><br><span class="line">        })</span><br><span class="line">    })</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'server is running...'</span>)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<h2 id="express-session"><a href="#express-session" class="headerlink" title="express-session"></a>express-session</h2>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://github.com/expressjs/session">https://github.com/expressjs/session</a></li>
</ol>
<h3 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">npm i express-session</span><br></pre></td></tr></tbody></table></figure>
<h3 id="é…ç½®-1"><a href="#é…ç½®-1" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><ul>
<li>è¯¥æ’ä»¶ä¼šä¸ºreqè¯·æ±‚å¯¹è±¡æ·»åŠ ä¸€ä¸ªæˆå‘˜:req.sessioné»˜è®¤æ˜¯ä¸€ä¸ªå¯¹è±¡<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//é…ç½®sessionä¸­é—´ä»¶</span></span><br><span class="line">app.use(session({</span><br><span class="line">	<span class="comment">//è‡ªå®šä¹‰å­—ç¬¦ä¸²æ¥å¯¹sessionidè¿›è¡ŒåŠ å¯†å¤„ç†ï¼Œé¿å…å‡ºç°ç›¸åŒçš„sessionid</span></span><br><span class="line">    <span class="attr">secret</span>: <span class="string">'dong yi'</span>,</span><br><span class="line">    <span class="attr">resave</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//æ— è®ºæ˜¯å¦ä½¿ç”¨äº†sessionï¼Œè®¾ç½®ä¸ºtrueéƒ½ä¼šé»˜è®¤éƒ½ä¼šç»™äºˆé’¥åŒ™(sessionid)</span></span><br><span class="line">    <span class="attr">saveUninitialized</span>: <span class="literal">false</span></span><br><span class="line">    <span class="attr">cookie</span>: { <span class="attr">secure</span>: <span class="literal">true</span> }</span><br><span class="line">}))</span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line">### ä½¿ç”¨</span><br><span class="line"><span class="string">``</span><span class="string">`Javascript</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//å†™</span></span><br><span class="line"><span class="string">//æ·»åŠ Sessionæ•°æ®</span></span><br><span class="line"><span class="string">//sessionå°±æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="string">req.session.foo = 'bar';</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//è¯»</span></span><br><span class="line"><span class="string">//è·å–sessionæ•°æ®</span></span><br><span class="line"><span class="string">req.session.foo</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//åˆ </span></span><br><span class="line"><span class="string">req.session.foo = null;</span></span><br><span class="line"><span class="string">delete req.session.foo //æ¨è</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<h3 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h3><p><code>session</code>ï¼šä¿å­˜ç™»å½•é€‰é¡¹ï¼ŒğŸ”ºåœ¨å†…å­˜ä¸­å­˜å‚¨</p>
<p><code>cookie</code>ï¼šä¿å­˜ä¸æ•æ„Ÿæ•°æ®</p>
<h1 id="ğŸ”ºå¼‚æ­¥ç¼–ç¨‹"><a href="#ğŸ”ºå¼‚æ­¥ç¼–ç¨‹" class="headerlink" title="ğŸ”ºå¼‚æ­¥ç¼–ç¨‹"></a>ğŸ”ºå¼‚æ­¥ç¼–ç¨‹</h1><h2 id="å¾—åˆ°å‡½æ•°å†…éƒ¨å¼‚æ­¥æ“ä½œçš„ç»“æœ"><a href="#å¾—åˆ°å‡½æ•°å†…éƒ¨å¼‚æ­¥æ“ä½œçš„ç»“æœ" class="headerlink" title="å¾—åˆ°å‡½æ•°å†…éƒ¨å¼‚æ­¥æ“ä½œçš„ç»“æœ"></a>å¾—åˆ°å‡½æ•°å†…éƒ¨å¼‚æ­¥æ“ä½œçš„ç»“æœ</h2><p>å›è°ƒå‡½æ•°ï¼šé€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼Œè·å–å‡½æ•°å†…éƒ¨çš„æ“ä½œã€‚ï¼ˆæ ¹æ®è¾“å…¥å¾—åˆ°è¾“å‡ºç»“æœï¼‰</p>
<ul>
<li><p>åœ¨è¯¥æƒ…å†µä¸‹æ— æ³•è·å¾—å‡½æ•°å†…å¼‚æ­¥æ“ä½œçš„ç»“æœ</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">a, b</span>) </span>{</span><br><span class="line">    <span class="built_in">console</span>.log(a + b)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    	<span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">        ret = a + b</span><br><span class="line">        <span class="keyword">return</span> ret</span><br><span class="line">    }, <span class="number">6000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(get(<span class="number">20</span>,<span class="number">30</span>))</span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line">ç»“æœï¼šè¿”å›<span class="string">`undefined`</span></span><br><span class="line"></span><br><span class="line">+ è‹¥è¦è·å¾—è¯¥æ•°æ®åˆ™åªèƒ½é€šè¿‡å›è°ƒå‡½æ•°</span><br><span class="line"><span class="string">``</span><span class="string">`Javascript</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function get(a, b, c) {</span></span><br><span class="line"><span class="string">    console.log(a + b)</span></span><br><span class="line"><span class="string">    setTimeout(function() {</span></span><br><span class="line"><span class="string">        console.log(2)</span></span><br><span class="line"><span class="string">        ret = a + b</span></span><br><span class="line"><span class="string">        return c(ret)</span></span><br><span class="line"><span class="string">    }, 6000); </span></span><br><span class="line"><span class="string">    console.log(3)</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// console.log(get(20,30))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">get(20, 30, function(a) {</span></span><br><span class="line"><span class="string">    console.log(a)</span></span><br><span class="line"><span class="string">})</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p><strong>æ³¨æ„ï¼š</strong></p>
<p>å‡¡æ˜¯éœ€è¦å¾—åˆ°ä¸€ä¸ªå‡½æ•°å†…éƒ¨å¼‚æ­¥æ“ä½œçš„ç»“æœï¼ˆsetTimeout,readFile,writeFile,ajax,readdirï¼‰</p>
<p>è¿™ç§æƒ…å†µå¿…é¡»é€šè¿‡ å›è°ƒå‡½æ•° (å¼‚æ­¥APIéƒ½ä¼šä¼´éšç€ä¸€ä¸ªå›è°ƒå‡½æ•°)</p>
</li>
</ul>
<h2 id="å›è°ƒåœ°ç‹±"><a href="#å›è°ƒåœ°ç‹±" class="headerlink" title="å›è°ƒåœ°ç‹±"></a>å›è°ƒåœ°ç‹±</h2><h2 id="å•¥æ˜¯å›è°ƒåœ°ç‹±"><a href="#å•¥æ˜¯å›è°ƒåœ°ç‹±" class="headerlink" title="å•¥æ˜¯å›è°ƒåœ°ç‹±"></a>å•¥æ˜¯å›è°ƒåœ°ç‹±</h2><p>å°±æ˜¯è¿™å¹…å›¾ </p>
<p><img src="/2021/03/03/Node.js%E7%AC%94%E8%AE%B0(2)/1.jpg" alt="1"></p>
<h2 id="ä¸ºä»€ä¹ˆä¼šæœ‰å›è°ƒåœ°ç‹±"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰å›è°ƒåœ°ç‹±" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰å›è°ƒåœ°ç‹±"></a>ä¸ºä»€ä¹ˆä¼šæœ‰å›è°ƒåœ°ç‹±</h2><p>å›è°ƒåœ°ç‹±çš„åŸå› æ˜¯ï¼Œå½“äººä»¬è¯•å›¾ä»¥ä¸€ç§ä»ä¸Šåˆ°ä¸‹çš„è§†è§‰æ–¹å¼æ‰§è¡ŒJavaScriptçš„æ–¹å¼ç¼–å†™JavaScriptæ—¶ã€‚æœŸæœ›ç¬¬1è¡Œå‘ç”Ÿçš„ä»»ä½•äº‹æƒ…éƒ½ä¼šåœ¨ç¬¬2è¡Œçš„ä»£ç å¼€å§‹è¿è¡Œä¹‹å‰å®Œæˆï¼Œä½†æ˜¯ï¼Œåœ¨JavaScriptä¸Šï¼Œæœ‰æ—¶å€™è¿™å¹¶æ²¡åŠæ³•è¿›è¡Œï¼Œæ¯”å¦‚ï¼Œåœ¨ä½ é€šè¿‡å¼‚æ­¥è¯»å–æ–‡ä»¶æ—¶ï¼Œä¹Ÿå°±æ˜¯ç”¨fsæ¨¡å—è¯»å–å¤šä¸ªæ–‡ä»¶æ—¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./a.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./b.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">'./c.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">    <span class="keyword">if</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>æ‰§è¡Œå¤šæ¬¡åï¼Œä½ ä¼šå‘ç°ï¼Œæœ‰é‚£ä¹ˆå‡ æ¬¡ï¼Œä¹Ÿæœ‰å¯èƒ½å¥½å‡ æ¬¡ï¼Œçœ‹äººå“å§åæ­£æ˜¯ï¼Œå®ƒæ˜¯æ²¡æœ‰è§„åˆ™çš„è¯»å‡ºæ¥çš„ï¼ˆå¾€å¾€å¯èƒ½ä½ çš„æ–‡ä»¶è¶Šå¤§ï¼Œè¯»å‡ºæ¥çš„æ—¶é—´ä¼šæ›´ä¹…ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒå¹¶ä¸ä¼šæŒ‰ç…§ä»£ç ä¹¦å†™é¡ºåºå»æ‰§è¡Œï¼Œè¿™ä¾¿æ˜¯å¼‚æ­¥ç¼–ç¨‹ï¼ˆå¦‚æœè¯•äº†æ²¡æœ‰ï¼Œé‚£å°±ä¸€ç›´è¯•ï¼Œåæ­£æ€»ä¼šæœ‰çš„ï¼‰ã€‚å¼‚æ­¥APIå¯¼è‡´äº†ä»£ç å¹¶ä¸æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼ˆå¯ä»¥è¯»è¯»è¿™ç¯‡æ–‡ç«  <a href="https://www.jianshu.com/p/39adf6ab8ad1">https://www.jianshu.com/p/39adf6ab8ad1</a> â€”â€”ç„¶åå˜ï¼Œå°±ä¼šæœ‰ä¸Šé¢é‚£ç§è§£å†³æ–¹æ³•ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œä»£ç éå¸¸çš„ä¸‘ï¼ˆåˆ«äººæ˜¯è¿™æ ·è¯´çš„ï¼Œåæ­£æˆ‘ä¸æ˜¯å¤ªè¿™ä¹ˆè®¤ä¸ºï¼Œç”šè‡³è§‰å¾—æœ‰ç‚¹å¥½çœ‹ï¼‰ï¼Œè¿˜æœ‰éå¸¸éš¾ç»´æŠ¤ï¼ˆè¿™ç‚¹è®¤åŒï¼‰ã€‚æ‰€ä»¥å°±å‡ºç°äº†å‡ ç§è§£å†³æ–¹æ³• â€”Promise</p>
<p>Promise<br>Promiseï¼šæ‰¿è¯ºï¼Œä¿è¯<br>Promiseæœ¬èº«ä¸æ˜¯å¼‚æ­¥çš„ï¼Œä½†å¾€å¾€éƒ½æ˜¯å†…éƒ¨å°è£…ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡<br>ä¸¢å‡ºä¸€å¼ å›¾å½¢å®¹Promiseå‡½æ•°ï¼Œç›¸å½“äºä¸€ä¸ªå®¹å™¨ï¼ˆä¸‹å›¾æºäºæ‰€å­¦æ•™ç¨‹ï¼Œpendingï¼ˆæ‚¬è€Œæœªå†³çš„ï¼‰ï¼‰</p>
<p><img src="/2021/03/03/Node.js%E7%AC%94%E8%AE%B0(2)/2.jpg" alt="2"></p>
<p>ä»£ç å¦‚ä¸‹ï¼Œè¾ƒæ˜“ç»´æŠ¤</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//resolved(è§£å†³ï¼ˆæˆåŠŸï¼‰)ï¼Œrejectedï¼ˆé©³å›ï¼ˆå¤±è´¥ï¼‰ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, rejected</span>) </span>{</span><br><span class="line">    <span class="comment">//æ–‡ä»¶ç¼–ç ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">    fs.readFile(<span class="string">'./a.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">        <span class="keyword">if</span> (err) {</span><br><span class="line">            rejected(err)</span><br><span class="line">        }</span><br><span class="line">        resolved(data)</span><br><span class="line">    })</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, rejected</span>) </span>{</span><br><span class="line">    fs.readFile(<span class="string">'./b.txt'</span>, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">        <span class="keyword">if</span> (err) {</span><br><span class="line">            rejected(err)</span><br><span class="line">        }</span><br><span class="line">        resolved(data)</span><br><span class="line">    })</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, rejected</span>) </span>{</span><br><span class="line">    fs.readFile(<span class="string">'c.txt'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">        <span class="keyword">if</span> (err) {</span><br><span class="line">            rejected(err)</span><br><span class="line">        }</span><br><span class="line">        resolved(data)</span><br><span class="line">    })</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">//é“¾å¼ç¼–ç¨‹ï¼ŒğŸ”ºPromiseä¼šé»˜è®¤å°†thenä¸­returnçš„å€¼å®ä¾‹æˆä¸€ä¸ªpromiseå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨thenæ–¹æ³•ï¼Œå®ç°é“¾å¼è°ƒç”¨</span></span><br><span class="line">p1</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">        <span class="keyword">return</span> p2</span><br><span class="line">    })</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">        <span class="keyword">return</span> p3</span><br><span class="line">    }).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">    }, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    })</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p>thenå‡½æ•°ï¼ˆES6ï¼‰è¯´æ˜ï¼š</p>
<p><img src="/2021/03/03/Node.js%E7%AC%94%E8%AE%B0(2)/3.jpg" alt="3"></p>
<p>å°è£…Promiseä¸­çš„<code>readFile</code>æ–¹æ³•</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pReadFile = <span class="function"><span class="keyword">function</span>(<span class="params">filepath</span>) </span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolved, rejected</span>) </span>{</span><br><span class="line">        <span class="comment">//æ–‡ä»¶ç¼–ç ï¼ï¼ï¼ï¼ï¼ï¼</span></span><br><span class="line">        fs.readFile(filepath, <span class="string">'utf8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">            <span class="keyword">if</span> (err) {</span><br><span class="line">                rejected(err)</span><br><span class="line">            }</span><br><span class="line">            resolved(data)</span><br><span class="line">        })</span><br><span class="line">    })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">pReadFile(<span class="string">"a.txt"</span>)</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">        <span class="keyword">return</span> pReadFile(<span class="string">"b.txt"</span>)</span><br><span class="line">    })</span><br><span class="line">    .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">        <span class="keyword">return</span> pReadFile(<span class="string">"c.txt"</span>)</span><br><span class="line">    }).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(data)</span><br><span class="line">    }, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>{</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line">## <span class="built_in">Promise</span>åº”ç”¨åœºæ™¯</span><br><span class="line">### è§£å†³å®¢æˆ·ç«¯å›è°ƒåµŒå¥—é—®é¢˜</span><br><span class="line">å½“å‡ºç°ç±»ä¼¼äºè¡¨å…³è”çš„æ•°æ®æ—¶ï¼Œè¿™æ—¶å€™å°±ä¼šé‡åˆ°åµŒå¥—é—®é¢˜ï¼Œå½“åµŒå¥—çš„æ•°æ®åªæœ‰ä¸€ä¸¤ä¸ªä¸ªè¿˜å¥½ï¼Œå¦‚æœå‡ºç°ä¸‰å››ä¸ªç”šè‡³äº”å…­ä¸ªï¼Œè¿™æ—¶å€™å°±ä¼šå‡ºç°å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼Œè¿™é‡Œä½¿ç”¨promiseè§£å†³</span><br><span class="line"></span><br><span class="line">### æ‰€éœ€çŸ¥è¯†ï¼š</span><br><span class="line"><span class="number">1.</span> npmæ¨¡å—ï¼šjson-serverã€http-server</span><br><span class="line"><span class="number">2.</span> å®¢æˆ·ç«¯æ¨¡æ¿å¼•æ“art-template</span><br><span class="line"><span class="number">3.</span> Ajax</span><br><span class="line"><span class="number">4.</span> jquery</span><br><span class="line"></span><br><span class="line">### æ­¥éª¤</span><br><span class="line"><span class="number">1.</span> å®‰è£…json-serverå’Œhttp-serverä»¥åŠå…¶ä»–å¿…è¦æ¨¡å—</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`Powershell</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">npm i -g http-server</span></span><br><span class="line"><span class="string">npm i -g json-server</span></span><br><span class="line"><span class="string">npm i jquery --save</span></span><br><span class="line"><span class="string">npm i template --save</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li><p>å»ºç«‹htmlé¡µé¢</p>
</li>
<li><p>è®¾è®¡è¡¨å•ï¼Œäººå‘˜ä¿¡æ¯ä¸å·¥ä½œèŒä¸šç›¸å…³è”ï¼Œæ­é…æ¨¡æ¿å­—ç¬¦ä¸²ä½¿ç”¨</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"user_form"</span>&gt;</span><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/template"</span> <span class="attr">id</span>=<span class="string">"tpl"</span>&gt;</span><span class="handlebars"><span class="xml"></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>ç”¨æˆ·å<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"</span></span></span><span class="template-variable">{{ <span class="name">user.username</span> }}</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"</span></span></span><span class="template-variable">{{ <span class="name">user.age</span> }}</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">""</span>&gt;</span>èŒä¸š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">      <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">        </span><span class="template-variable">{{ <span class="name"><span class="builtin-name">each</span></span> jobs }}</span><span class="xml"> </span><span class="template-variable">{{ <span class="name"><span class="builtin-name">if</span></span> user.job === $value.id }}</span><span class="xml"></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"</span></span></span><span class="template-variable">{{ <span class="name">$value.id</span> }}</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">selected</span>&gt;</span></span><span class="template-variable">{{ <span class="name">$value.name</span> }}</span><span class="xml"><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">        </span><span class="template-variable">{{ <span class="name">else</span> }}</span><span class="xml"></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"</span></span></span><span class="template-variable">{{ <span class="name">$value.id</span> }}</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span><span class="template-variable">{{ <span class="name">$value.name</span> }}</span><span class="xml"><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">        </span><span class="template-variable">{{ <span class="name">/if</span> }}</span><span class="xml"> </span><span class="template-variable">{{ <span class="name">/each</span> }}</span><span class="xml"></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">      <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¼•ç”¨ç›¸å…³æ¨¡æ¿å­—ç¬¦ä¸²ä»¥åŠJQueryæ¨¡å—</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"node_modules/art-template/lib/template-web.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> 	<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"node_modules/jquery/dist/jquery.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä¹¦å†™Ajaxå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚,å¹¶å°è£…ä¾¿äºä½¿ç”¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">  	<span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">url, callback</span>) </span>{</span><br><span class="line">    	  <span class="keyword">var</span> oReq = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">    	  oReq.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">oReq.responseText</span><br><span class="line">    	    callback(oReq.responseText)</span><br><span class="line">    	  }</span><br><span class="line">    	  oReq.open(<span class="string">"get"</span>, url, <span class="literal">true</span>)</span><br><span class="line">    	  oReq.send()</span><br><span class="line">    	}</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line"> <span class="number">6.</span> å¼€å¯json-serveræœåŠ¡ï¼Œä½¿ç”¨data.jsonæ–‡ä»¶ï¼ˆ<span class="number">67</span>æ­¥ä½¿ç”¨cmdï¼‰</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`Powershell</span></span><br><span class="line"><span class="string">json-server data.json</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å°†å½“å‰æ–‡ä»¶æ‰€å¤„æ–‡ä»¶å¤¹å¼€æ”¾ä¸ºæœåŠ¡å™¨</p>
</li>
</ol>
<figure class="highlight powershell"><table><tbody><tr><td class="code"><pre><span class="line">http<span class="literal">-server</span></span><br></pre></td></tr></tbody></table></figure>
<ul>
<li>è‹¥è¦ç¦ç”¨ç¼“å­˜ï¼Œåˆ™ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</li>
</ul>
<figure class="highlight powershell"><table><tbody><tr><td class="code"><pre><span class="line">http<span class="literal">-server</span> <span class="literal">-c</span><span class="literal">-1</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="8">
<li>è‹¥é‡‡ç”¨å›è°ƒåœ°ç‹±ç±»å‹</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">get(<span class="string">"http://127.0.0.1:3000/users/1"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">userData</span>)</span>{</span><br><span class="line">  			get(<span class="string">"http://127.0.0.1:3000/jobs"</span>,<span class="function"><span class="keyword">function</span>(<span class="params">jobsData</span>)</span>{</span><br><span class="line">  				<span class="keyword">var</span> htmlStr = template(<span class="string">"tpl"</span>, {</span><br><span class="line">  					<span class="attr">user</span>: <span class="built_in">JSON</span>.parse(userData),</span><br><span class="line">  					<span class="attr">jobs</span>: <span class="built_in">JSON</span>.parse(jobsData)</span><br><span class="line">  				})</span><br><span class="line">  				<span class="built_in">console</span>.log(htmlStr)</span><br><span class="line">  				<span class="built_in">document</span>.querySelector(<span class="string">"#user_form"</span>).innerHTML = htmlStr</span><br><span class="line">  			})</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<ol start="9">
<li>ä½¿ç”¨Jqueryç‰ˆçš„Promise</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//Jqueryçš„Ajaxè‡ªå¸¦promise</span></span><br><span class="line"><span class="keyword">var</span> data = {}</span><br><span class="line">$.get(<span class="string">"http://127.0.0.1:3000/users/2"</span>)</span><br><span class="line"> .then(<span class="function"><span class="keyword">function</span>(<span class="params">user</span>)</span>{</span><br><span class="line">   data.user = user</span><br><span class="line">   <span class="keyword">return</span> $.get(<span class="string">"http://127.0.0.1:3000/jobs"</span>)</span><br><span class="line"> })</span><br><span class="line"> .then(<span class="function"><span class="keyword">function</span>(<span class="params">jobs</span>)</span>{</span><br><span class="line">   data.jobs = jobs</span><br><span class="line">   <span class="comment">// console.log(data)</span></span><br><span class="line">   <span class="keyword">var</span> str = template(<span class="string">"tpl"</span>,{</span><br><span class="line">      <span class="attr">user</span>: data.user,</span><br><span class="line">      <span class="attr">jobs</span>: data.jobs</span><br><span class="line">    })</span><br><span class="line">   <span class="built_in">document</span>.querySelector(<span class="string">'#user_form'</span>).innerHTML = str</span><br><span class="line"> })</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line"><span class="number">10.</span> å°è£…<span class="built_in">Promise</span>ç‰ˆæœ¬çš„AJAXæ–¹æ³•</span><br><span class="line"><span class="string">``</span><span class="string">`Js</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">function Rget(url,callback){</span></span><br><span class="line"><span class="string">  return new Promise(function(resolve,reject){</span></span><br><span class="line"><span class="string">  var xhr = new XMLHttpRequest()</span></span><br><span class="line"><span class="string">  // å½“è¯·æ±‚åŠ è½½æˆåŠŸä¹‹åè¦è°ƒç”¨æŒ‡å®šçš„å‡½æ•°</span></span><br><span class="line"><span class="string">  xhr.onload = function () {</span></span><br><span class="line"><span class="string">    // æˆ‘ç°åœ¨éœ€è¦å¾—åˆ°è¿™é‡Œçš„ xhr.responseText</span></span><br><span class="line"><span class="string">    resolve(JSON.parse(xhr.responseText))</span></span><br><span class="line"><span class="string">    callback &amp;&amp; callback(JSON.parse(xhr.responseText))</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">  xhr.onerror = function (err){</span></span><br><span class="line"><span class="string">    reject(err)</span></span><br><span class="line"><span class="string">  }</span></span><br><span class="line"><span class="string">  xhr.open("get", url, true)</span></span><br><span class="line"><span class="string">  xhr.send()</span></span><br><span class="line"><span class="string">  })</span></span><br><span class="line"><span class="string">}</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">+ ä½¿ç”¨</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>Js</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = {}</span><br><span class="line">Rget(<span class="string">"http://127.0.0.1:3000/users/2"</span>)</span><br><span class="line"> .then(<span class="function"><span class="keyword">function</span>(<span class="params">user</span>)</span>{</span><br><span class="line">    data.user = user</span><br><span class="line">    <span class="keyword">return</span> Rget(<span class="string">"http://127.0.0.1:3000/jobs"</span>)</span><br><span class="line"> })</span><br><span class="line"> .then(<span class="function"><span class="keyword">function</span>(<span class="params">jobs</span>)</span>{</span><br><span class="line">    data.jobs = jobs</span><br><span class="line">    <span class="keyword">var</span> str = template(<span class="string">"tpl"</span>, {</span><br><span class="line">      <span class="attr">user</span>: data.user,</span><br><span class="line">      <span class="attr">jobs</span>: data.jobs</span><br><span class="line">    })</span><br><span class="line">    <span class="built_in">document</span>.querySelector(<span class="string">"#user_form"</span>).innerHTML = str</span><br><span class="line"> })</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line">### <span class="built_in">Promise</span>æ“ä½œæ•°æ®åº“</span><br><span class="line">ï¼ˆ<span class="number">26</span>-<span class="built_in">Promise</span>ï¼Œ<span class="built_in">Promise</span>æ“ä½œæ•°æ®åº“ï¼‰</span><br><span class="line"></span><br><span class="line">+ mongooseä¸­æ‰€æœ‰çš„APIéƒ½æ”¯æŒpromise</span><br><span class="line">ğŸ”ºæ ¹æ®æŸ¥è¯¢æ˜¯å¦å·²å­˜åœ¨è¯¥è®°å½•ä»è€Œå†³å®šæ˜¯å¦åˆ›å»ºæ–°è®°å½•</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`Javascript</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Cat.findOne({ name: "å¥½å•Š" })</span></span><br><span class="line"><span class="string">    .then(function(cat){</span></span><br><span class="line"><span class="string">    	if(cat){</span></span><br><span class="line"><span class="string">    		console.log('è¯¥catå·²å­˜åœ¨')</span></span><br><span class="line"><span class="string">    	} else{</span></span><br><span class="line"><span class="string">    		return new Cat({"name" : "å¥½å•Š", "age" : 16 }).save()</span></span><br><span class="line"><span class="string">    	}</span></span><br><span class="line"><span class="string">    })</span></span><br><span class="line"><span class="string">    .then(function(data){</span></span><br><span class="line"><span class="string">    	console.log(data)</span></span><br><span class="line"><span class="string">    })</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">### æ³¨æ„ï¼š</span></span><br><span class="line"><span class="string">1. æ¯æ¬¡æ”¹å®Œjsæˆ–htmlæ–‡ä»¶ååœ¨æµè§ˆå™¨éœ€åˆ·æ–°å¤šæ¬¡</span></span><br><span class="line"><span class="string">2. æ¯æ¬¡æ”¹å®Œjsonæ–‡ä»¶åéœ€è¦é‡æ–°å¯åŠ¨json-serveræœåŠ¡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### catchå¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="string">åœ¨å…¨éƒ¨thenä¹‹åæ·»åŠ `</span>.catch(<span class="function"><span class="params">err</span> =&gt;</span> {})<span class="string">`å³å¯å¯¹ä»»ä½•ä¸€ä¸ªthenå¤„ç†è¿‡ç¨‹æŠ›å‡ºçš„å¼‚å¸¸è¿›è¡Œæ•è·å¹¶ä¸­æ­¢ä»£ç ç»§ç»­æ‰§è¡Œ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä¾‹å¦‚ï¼šè¯»å–æ–‡ä»¶å¹¶è¿›è¡Œåç»­ç›¸å…³æ“ä½œï¼Œè‹¥å¤„ç†è¿‡ç¨‹å‘ç”Ÿä¸€ä¸ªé”™è¯¯åˆ™ä¼ é€’ç»™catchï¼Œåé¢æ‰€æœ‰çš„thenå°±ä¸å†æ‰§è¡Œ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¿™é‡Œè¦æ³¨æ„åŒºåˆ†ï¼Œå¦‚æœæ˜¯åœ¨`</span>then<span class="string">`ä¸­è‡ªè¡Œå¤„ç†`</span>err<span class="string">`ï¼Œåˆ™ä»£ç è¿˜æ˜¯ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œè¿™æ˜¯å’Œ`</span><span class="keyword">catch</span><span class="string">`ä¸åŒçš„ç‚¹</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>Js</span><br><span class="line"></span><br><span class="line">readFile(<span class="string">'a.txt'</span>, <span class="string">'utf8'</span>)</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> readFile(<span class="string">'a.txt'</span>, <span class="string">'utf8'</span>)</span><br><span class="line">  })</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">  })</span><br><span class="line">  .catch(<span class="function"><span class="params">err</span> =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># ä¸­é—´ä»¶</span><br><span class="line">æ¡ˆä¾‹ï¼šæ¡ˆä¾‹<span class="number">5</span>è®ºå›</span><br><span class="line"></span><br><span class="line">### ä¸­é—´ä»¶çš„æ¦‚å¿µ</span><br><span class="line">&gt; å‚è€ƒæ–‡æ¡£ï¼šhttp:<span class="comment">//expressjs.com/en/guide/using-middleware.html</span></span><br><span class="line"></span><br><span class="line">ä¸­é—´ä»¶ï¼šæŠŠå¾ˆå¤æ‚çš„äº‹æƒ…åˆ†å‰²æˆå•ä¸ªï¼Œç„¶åä¾æ¬¡æœ‰æ¡ç†çš„æ‰§è¡Œã€‚å°±æ˜¯ä¸€ä¸ªä¸­é—´å¤„ç†ç¯èŠ‚ï¼Œæœ‰è¾“å…¥ï¼Œæœ‰è¾“å‡ºã€‚</span><br><span class="line"></span><br><span class="line">è¯´çš„é€šä¿—æ˜“æ‡‚ç‚¹å„¿ï¼Œä¸­é—´ä»¶å°±æ˜¯ä¸€ä¸ªï¼ˆä»è¯·æ±‚åˆ°å“åº”è°ƒç”¨çš„æ–¹æ³•ï¼‰æ–¹æ³•ã€‚</span><br><span class="line"></span><br><span class="line">æŠŠæ•°æ®ä»è¯·æ±‚åˆ°å“åº”åˆ†æ­¥éª¤æ¥å¤„ç†ï¼Œæ¯ä¸€ä¸ªæ­¥éª¤éƒ½æ˜¯ä¸€ä¸ªä¸­é—´å¤„ç†ç¯èŠ‚ã€‚</span><br><span class="line"></span><br><span class="line">åŒä¸€ä¸ªè¯·æ±‚å¯¹è±¡æ‰€ç»è¿‡çš„ä¸­é—´ä»¶éƒ½æ˜¯åŒä¸€ä¸ªè¯·æ±‚å¯¹è±¡å’Œå“åº”å¯¹è±¡ã€‚</span><br><span class="line"></span><br><span class="line">## ä¸­é—´ä»¶çš„åˆ†ç±»:</span><br><span class="line">### åº”ç”¨ç¨‹åºçº§åˆ«çš„ä¸­é—´ä»¶</span><br><span class="line">ä¸‡èƒ½åŒ¹é…ï¼ˆä¸å…³å¿ƒä»»ä½•è¯·æ±‚è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•çš„ä¸­é—´ä»¶ï¼‰ï¼š</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`Javascript</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">app.use(function(req,res,next){</span></span><br><span class="line"><span class="string">    console.log('Time',Date.now());</span></span><br><span class="line"><span class="string">    next();</span></span><br><span class="line"><span class="string">});</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">å…³å¿ƒè¯·æ±‚è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•çš„ä¸­é—´ä»¶ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>Javascript</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">'/a'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res,next</span>)</span>{</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Time'</span>,<span class="built_in">Date</span>.now());</span><br><span class="line">    next();</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line">## è·¯ç”±çº§åˆ«çš„ä¸­é—´ä»¶</span><br><span class="line">ä¸¥æ ¼åŒ¹é…è¯·æ±‚è·¯å¾„å’Œè¯·æ±‚æ–¹æ³•çš„ä¸­é—´ä»¶</span><br><span class="line"></span><br><span class="line"><span class="attr">get</span>:</span><br><span class="line"><span class="string">``</span><span class="string">`Javascript</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">app.get('/',function(req,res){</span></span><br><span class="line"><span class="string">	res.send('get');</span></span><br><span class="line"><span class="string">});</span></span><br></pre></td></tr></tbody></table></figure>
<p>postï¼š</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">app.post(<span class="string">'/a'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>{</span><br><span class="line">	res.send(<span class="string">'post'</span>);</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>
<p>put:</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">app.put(<span class="string">'/user'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>{</span><br><span class="line">	res.send(<span class="string">'put'</span>);</span><br><span class="line">});</span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"><span class="attr">delete</span>:</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`Javascript</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">app.delete('/delete',function(req,res){</span></span><br><span class="line"><span class="string">	res.send('delete');</span></span><br><span class="line"><span class="string">});</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">## é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>Javascript</span><br><span class="line"></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err,req,res,next</span>)</span>{</span><br><span class="line">    <span class="built_in">console</span>.error(err,stack);</span><br><span class="line">    res.status(<span class="number">500</span>).send(<span class="string">'Something broke'</span>);</span><br><span class="line">});</span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line">é…ç½®ä½¿ç”¨<span class="number">404</span>ä¸­é—´ä»¶ï¼šï¼ˆè®ºå›æ¡ˆä¾‹ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`Javascript</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">app.use(function(req,res){</span></span><br><span class="line"><span class="string">    res.render('404.html');</span></span><br><span class="line"><span class="string">});</span></span><br></pre></td></tr></tbody></table></figure>
<p>é…ç½®å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶: (è®ºå›æ¡ˆä¾‹ï¼‰</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">app.get(<span class="string">'/a'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>{</span><br><span class="line">	fs.readFile(<span class="string">'.a/bc'</span>, <span class="function"><span class="title">funtion</span>(<span class="params"></span>)</span> {</span><br><span class="line">		<span class="keyword">if</span> (err) {</span><br><span class="line">        	<span class="comment">// å½“è°ƒç”¨next()ä¼ å‚åï¼Œåˆ™ç›´æ¥è¿›å…¥åˆ°å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ–¹æ³•ä¸­</span></span><br><span class="line">        	<span class="comment">// å½“å‘ç”Ÿå…¨å±€é”™è¯¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨nextä¼ é€’é”™è¯¯å¯¹è±¡</span></span><br><span class="line">        	<span class="comment">// ç„¶åè¢«å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶åŒ¹é…åˆ°å¹¶è¿›è¡Œå¤„ç†</span></span><br><span class="line">			next(err);</span><br><span class="line">		}</span><br><span class="line">	})</span><br><span class="line">});</span><br><span class="line"><span class="comment">//å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span></span><br><span class="line">app.use(<span class="function"><span class="keyword">function</span>(<span class="params">err,req,res,next</span>)</span>{</span><br><span class="line">    res.status(<span class="number">500</span>).json({</span><br><span class="line">        <span class="attr">err_code</span>:<span class="number">500</span>,</span><br><span class="line">        <span class="attr">message</span>:err.message</span><br><span class="line">    });</span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## å†…ç½®ä¸­é—´ä»¶</span></span><br><span class="line"><span class="string">+ express.static(æä¾›é™æ€æ–‡ä»¶)</span></span><br><span class="line"><span class="string"> * http://expressjs.com/en/starter/static-files.html#serving-static-files-in-express</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</span></span><br><span class="line"><span class="string">&gt;å‚è€ƒæ–‡æ¡£ï¼šhttp://expressjs.com/en/resources/middleware.html</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">+ body-parser</span></span><br><span class="line"><span class="string">+ compression</span></span><br><span class="line"><span class="string">+ cookie-parser</span></span><br><span class="line"><span class="string">+ mogran</span></span><br><span class="line"><span class="string">+ response-time</span></span><br><span class="line"><span class="string">+ server-static</span></span><br><span class="line"><span class="string">+ session</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># art-templateæ­é…dateformatæ¨¡å—</span></span><br><span class="line"><span class="string">## ç®€ä»‹</span></span><br><span class="line"><span class="string">art-templateæ­é…dateFormatå®ç°å°†æ—¶é—´æˆ³æ ¼å¼åŒ–ä¸ºä½ æƒ³è¦çš„æ—¥æœŸæ ¼å¼</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## æ­¥éª¤</span></span><br><span class="line"><span class="string"> 1. npmä¸‹è½½å¯¹åº”æ¨¡å—</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>Bash</span><br><span class="line">npm i --save dateformat</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>é¡µé¢ä»£ç ï¼ˆæ³¨æ„art-templateé»˜è®¤æ¸²æŸ“çš„é¡µé¢åç¼€åä¸ºartï¼Œtimeä¸ºæ¸²æŸ“çš„æ—¶é—´æ•°æ®ï¼Œâ€™yyyy-mm-ddâ€™ä¸ºä½ è¦å®šä¹‰çš„æ—¶é—´æ ¼å¼ï¼‰</li>
</ol>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line">1</span><br><span class="line">{{ dateFormat(time, 'yyyy-mm-dd')}}</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>nodeå¼•ç”¨</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> template = <span class="built_in">require</span>(<span class="string">'art-template'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> dateFormat = <span class="built_in">require</span>(<span class="string">'dateformat'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line"> <span class="number">4.</span> é…ç½®æ¨¡æ¿å¼•æ“</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`Js</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">template.defaults.imports.dateFormat = dateFormat;</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> 5. æ¸²æŸ“é¡µé¢å¹¶æ‰“å‡ºåœ¨cmdæ§åˆ¶å°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>Js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> html = template(<span class="string">'06.art'</span>, {</span><br><span class="line">    <span class="attr">time</span>: <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">});</span><br><span class="line"><span class="built_in">console</span>.log(html)</span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line"># å…¶å®ƒ</span><br><span class="line">## nodemon</span><br><span class="line">### ä½œç”¨</span><br><span class="line">ä¿®æ”¹å®Œä»£ç è‡ªåŠ¨é‡å¯</span><br><span class="line"></span><br><span class="line">### å®‰è£…</span><br><span class="line"><span class="string">``</span><span class="string">`Shell</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">npm install --global nodemon</span></span><br></pre></td></tr></tbody></table></figure>
<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">nodemon æ–‡ä»¶</span><br></pre></td></tr></tbody></table></figure>
<h2 id="ES6å‡½æ•°"><a href="#ES6å‡½æ•°" class="headerlink" title="ES6å‡½æ•°"></a>ES6å‡½æ•°</h2><h3 id="find"><a href="#find" class="headerlink" title="find()"></a>find()</h3><p>æ–¹æ³•è¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚å¦åˆ™è¿”å› undefined</p>
<h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h3><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">9</span></span><br><span class="line"><span class="number">10</span></span><br><span class="line"><span class="built_in">Array</span>.prototype.findme = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>{</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.length; i++) {</span><br><span class="line">    	<span class="keyword">if</span>(callback(<span class="built_in">this</span>[i],i)){</span><br><span class="line">    		<span class="keyword">return</span> <span class="built_in">this</span>[i]</span><br><span class="line">    	}</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(abc.findme(<span class="function"><span class="keyword">function</span>(<span class="params">item</span>)</span>{</span><br><span class="line">	<span class="keyword">return</span> item.id = <span class="number">3</span></span><br><span class="line">}))</span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line">### findIndex()</span><br><span class="line">è¿”å›æ•°ç»„ä¸­æ»¡è¶³æä¾›çš„æµ‹è¯•å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•</span><br><span class="line"></span><br><span class="line">## éšè—å…ƒç´ æ§ä»¶</span><br><span class="line">ç”¨æ¥æ”¾ä¸€äº›ä¸å¸Œæœ›è¢«ç”¨æˆ·çœ‹è§ï¼Œä½†æ˜¯éœ€è¦è¢«æäº¤åˆ°æœåŠ¡ç«¯çš„æ•°æ®</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`Html</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;input type="hidden" name="id" value="{{ student.id }}"&gt;</span></span><br></pre></td></tr></tbody></table></figure>





]]></content>
      <categories>
        <category>Node.js</category>
      </categories>
      <tags>
        <tag>Node.js</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆè¯†Vuex</title>
    <url>/2021/07/02/VueX/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="vuexåŸºç¡€-ä»‹ç»"><a href="#vuexåŸºç¡€-ä»‹ç»" class="headerlink" title="vuexåŸºç¡€-ä»‹ç»"></a>vuexåŸºç¡€-ä»‹ç»</h2><blockquote>
<p> ä¸ºä»€ä¹ˆä¼šæœ‰Vuex ?</p>
</blockquote>
<p>â€‹    Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue.js åº”ç”¨ç¨‹åºå¼€å‘çš„<strong>çŠ¶æ€ç®¡ç†æ¨¡å¼</strong>ã€‚å®ƒé‡‡ç”¨**<code>é›†ä¸­å¼</code><strong>å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§</strong><code>å¯é¢„æµ‹</code>**çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚</p>
<ul>
<li>vuexæ˜¯é‡‡ç”¨é›†ä¸­å¼ç®¡ç†ç»„ä»¶ä¾èµ–çš„å…±äº«æ•°æ®çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥è§£å†³ä¸åŒç»„ä»¶æ•°æ®å…±äº«é—®é¢˜ã€‚</li>
</ul>
<p><img src="/2021/07/02/VueX/image-20200902235150562.png" alt="image-20200902235150562"></p>
<p><strong>ç»“è®º</strong></p>
<ol>
<li>ä¿®æ”¹stateçŠ¶æ€å¿…é¡»é€šè¿‡**<code>mutations</code>**</li>
<li>**<code>mutations</code>**åªèƒ½æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç±»ä¼¼ajaxï¼Œå®šæ—¶å™¨ä¹‹ç±»çš„ä»£ç ä¸èƒ½åœ¨mutationsä¸­æ‰§è¡Œ</li>
<li>æ‰§è¡Œå¼‚æ­¥ä»£ç ï¼Œè¦é€šè¿‡actionsï¼Œç„¶åå°†æ•°æ®æäº¤ç»™mutationsæ‰å¯ä»¥å®Œæˆ</li>
<li>stateçš„çŠ¶æ€å³å…±äº«æ•°æ®å¯ä»¥åœ¨ç»„ä»¶ä¸­å¼•ç”¨</li>
<li>ç»„ä»¶ä¸­å¯ä»¥è°ƒç”¨action</li>
</ol>
<h2 id="vuexåŸºç¡€-åˆå§‹åŒ–åŠŸèƒ½"><a href="#vuexåŸºç¡€-åˆå§‹åŒ–åŠŸèƒ½" class="headerlink" title="vuexåŸºç¡€-åˆå§‹åŒ–åŠŸèƒ½"></a>vuexåŸºç¡€-åˆå§‹åŒ–åŠŸèƒ½</h2><blockquote>
<p>å»ºç«‹ä¸€ä¸ªæ–°çš„è„šæ‰‹æ¶é¡¹ç›®, åœ¨é¡¹ç›®ä¸­åº”ç”¨vuex</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ vue create  demo</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å¼€å§‹vuexçš„åˆå§‹åŒ–å»ºç«‹ï¼Œé€‰æ‹©æ¨¡å¼æ—¶ï¼Œé€‰æ‹©é»˜è®¤æ¨¡å¼</p>
</blockquote>
<p>åˆå§‹åŒ–ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼š<code>npm i vuex --save</code>  =&gt; å®‰è£…åˆ°**<code>è¿è¡Œæ—¶ä¾èµ–</code>**   =&gt; é¡¹ç›®ä¸Šçº¿ä¹‹åä¾ç„¶ä½¿ç”¨çš„ä¾èµ– ,å¼€å‘æ—¶ä¾èµ–  =&gt; å¼€å‘è°ƒè¯•æ—¶ä½¿ç”¨  </li>
</ul>
<blockquote>
<p>å¼€å‘æ—¶ä¾èµ– å°±æ˜¯å¼€å¼€å‘çš„æ—¶å€™ï¼Œéœ€è¦çš„ä¾èµ–ï¼Œè¿è¡Œæ—¶ä¾èµ–ï¼Œé¡¹ç›®ä¸Šçº¿è¿è¡Œæ—¶ä¾ç„¶éœ€è¦çš„</p>
</blockquote>
<ul>
<li>ç¬¬äºŒæ­¥ï¼š <strong>åœ¨main.jsä¸­</strong> <code>import Vuex from 'vuex'</code></li>
<li>ç¬¬ä¸‰æ­¥ï¼š<strong>åœ¨main.jsä¸­</strong>  <code>Vue.use(Vuex)</code>  =&gt; è°ƒç”¨äº† vuexä¸­çš„ ä¸€ä¸ªinstallæ–¹æ³•</li>
<li>ç¬¬å››æ­¥ï¼š<code>const store = new Vuex.Store({...é…ç½®é¡¹})</code></li>
<li>ç¬¬äº”æ­¥ï¼šåœ¨æ ¹å®ä¾‹é…ç½® store é€‰é¡¹æŒ‡å‘ store å®ä¾‹å¯¹è±¡</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line">Vue.use(vuex)</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store({})</span><br><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</span><br><span class="line">  store</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h2 id="vuexåŸºç¡€-state"><a href="#vuexåŸºç¡€-state" class="headerlink" title="vuexåŸºç¡€-state"></a>vuexåŸºç¡€-state</h2><p>stateæ˜¯æ”¾ç½®æ‰€æœ‰å…¬å…±çŠ¶æ€çš„å±æ€§ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå…¬å…±çŠ¶æ€æ•°æ® ï¼Œ ä½ åªéœ€è¦å®šä¹‰åœ¨ stateå¯¹è±¡ä¸­</p>
<p><strong>å®šä¹‰state</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–vuexå¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">state</span>: {</span><br><span class="line">    <span class="comment">// ç®¡ç†æ•°æ®</span></span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å¦‚ä½•åœ¨ç»„ä»¶ä¸­è·å–count?</p>
</blockquote>
<p><strong>åŸå§‹å½¢å¼</strong>- æ’å€¼è¡¨è¾¾å¼</p>
<p><strong><code>App.vue</code></strong></p>
<p>ç»„ä»¶ä¸­å¯ä»¥ä½¿ç”¨  <strong>this.$store</strong> è·å–åˆ°vuexä¸­çš„storeå¯¹è±¡å®ä¾‹ï¼Œå¯é€šè¿‡<strong>state</strong>å±æ€§å±æ€§è·å–<strong>count</strong>ï¼Œ å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div&gt; stateçš„æ•°æ®ï¼š{{ $store.state.count }}&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¡ç®—å±æ€§</strong> - å°†stateå±æ€§å®šä¹‰åœ¨è®¡ç®—å±æ€§ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æŠŠstateä¸­æ•°æ®ï¼Œå®šä¹‰åœ¨ç»„ä»¶å†…çš„è®¡ç®—å±æ€§ä¸­</span></span><br><span class="line">  <span class="attr">computed</span>: {</span><br><span class="line">    count () {</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.$store.state.count</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div&gt; stateçš„æ•°æ®ï¼š{{ count }}&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¾…åŠ©å‡½æ•°</strong>  - mapState</p>
<blockquote>
<p>mapStateæ˜¯è¾…åŠ©å‡½æ•°ï¼Œå¸®åŠ©æˆ‘ä»¬æŠŠstoreä¸­çš„æ•°æ®æ˜ å°„åˆ° ç»„ä»¶çš„è®¡ç®—å±æ€§ä¸­, å®ƒå±äºä¸€ç§æ–¹ä¾¿ç”¨æ³•</p>
</blockquote>
<p>ç”¨æ³• ï¼š ç¬¬ä¸€æ­¥ï¼šå¯¼å…¥mapState</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapState } <span class="keyword">from</span> <span class="string">'vuex'</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬äºŒæ­¥ï¼šé‡‡ç”¨æ•°ç»„å½¢å¼å¼•å…¥stateå±æ€§</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">mapState([<span class="string">'count'</span>]) </span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢ä»£ç çš„æœ€ç»ˆå¾—åˆ°çš„æ˜¯ <strong>ç±»ä¼¼</strong></p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">count () {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.$store.state.count</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼šåˆ©ç”¨<strong>å»¶å±•è¿ç®—ç¬¦</strong>å°†å¯¼å‡ºçš„çŠ¶æ€æ˜ å°„ç»™è®¡ç®—å±æ€§</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">computed: {</span><br><span class="line">  ...mapState([<span class="string">'count'</span>])</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div&gt; stateçš„æ•°æ®ï¼š{{ count }}&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="vuexåŸºç¡€-mutations"><a href="#vuexåŸºç¡€-mutations" class="headerlink" title="vuexåŸºç¡€-mutations"></a>vuexåŸºç¡€-mutations</h2><blockquote>
<p>stateæ•°æ®çš„ä¿®æ”¹åªèƒ½é€šè¿‡mutationsï¼Œå¹¶ä¸”mutationså¿…é¡»æ˜¯åŒæ­¥æ›´æ–°ï¼Œç›®çš„æ˜¯å½¢æˆ**<code>æ•°æ®å¿«ç…§</code>**</p>
</blockquote>
<p>æ•°æ®å¿«ç…§ï¼šä¸€æ¬¡mutationçš„æ‰§è¡Œï¼Œ<strong>ç«‹åˆ»</strong>å¾—åˆ°ä¸€ç§è§†å›¾çŠ¶æ€ï¼Œå› ä¸ºæ˜¯ç«‹åˆ»ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯åŒæ­¥</p>
<p><strong>å®šä¹‰mutations</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store  = <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">state</span>: {</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// å®šä¹‰mutations</span></span><br><span class="line">  <span class="attr">mutations</span>: {</span><br><span class="line">     </span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ ¼å¼è¯´æ˜</strong></p>
<p>mutationsæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­å­˜æ”¾ä¿®æ”¹stateçš„æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">mutations: {</span><br><span class="line">    <span class="comment">// æ–¹æ³•é‡Œå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰storeçš„stateå±æ€§</span></span><br><span class="line">    <span class="comment">// payload è½½è· è¿è¾“å‚æ•° è°ƒç”¨mutaiionsçš„æ—¶å€™ å¯ä»¥ä¼ é€’å‚æ•° ä¼ é€’è½½è·</span></span><br><span class="line">    addCount (state) {</span><br><span class="line">      state.count += <span class="number">1</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å¦‚ä½•åœ¨ç»„ä»¶ä¸­è°ƒç”¨mutations</p>
</blockquote>
<p><strong>åŸå§‹å½¢å¼</strong>-$store</p>
<blockquote>
<p>æ–°å»ºç»„ä»¶child-a.vueï¼Œå†…å®¹ä¸ºä¸€ä¸ªbuttonæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®è°ƒç”¨mutations</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click="addCount"&gt;+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">    methods: {</span><br><span class="line">    //   è°ƒç”¨æ–¹æ³•</span><br><span class="line">      addCount () {</span><br><span class="line">         // è°ƒç”¨storeä¸­çš„mutations æäº¤ç»™muations</span><br><span class="line">        // commit('muationsåç§°', 2)</span><br><span class="line">        this.$store.commit('addCount', 10)  // ç›´æ¥è°ƒç”¨mutations</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>å¸¦å‚æ•°çš„ä¼ é€’</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">addCount (state, payload) {</span><br><span class="line">    state.count += payload</span><br><span class="line">}</span><br><span class="line"><span class="built_in">this</span>.$store.commit(<span class="string">'addCount'</span>, <span class="number">10</span>)</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¾…åŠ©å‡½æ•°</strong> - mapMutations</p>
<blockquote>
<p>mapMutationså’ŒmapStateå¾ˆåƒï¼Œå®ƒæŠŠä½äºmutationsä¸­çš„æ–¹æ³•æå–äº†å‡ºæ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒå¯¼å…¥</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>  { mapMutations } <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="attr">methods</span>: {</span><br><span class="line">    ...mapMutations([<span class="string">'addCount'</span>])</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢ä»£ç çš„å«ä¹‰æ˜¯å°†mutationsçš„æ–¹æ³•å¯¼å…¥äº†methodsä¸­ï¼Œç­‰åŒäº</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">methods: {</span><br><span class="line">      <span class="comment">// commit(æ–¹æ³•å, è½½è·å‚æ•°)</span></span><br><span class="line">      addCount () {</span><br><span class="line">          <span class="built_in">this</span>.$store.commit(<span class="string">'addCount'</span>)</span><br><span class="line">      }</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡this.addCountè°ƒç”¨äº†</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;button @click="addCount(100)"&gt;+100&lt;/button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>ä½†æ˜¯è¯·æ³¨æ„ï¼š Vuexä¸­mutationsä¸­è¦æ±‚ä¸èƒ½å†™å¼‚æ­¥ä»£ç ï¼Œå¦‚æœæœ‰å¼‚æ­¥çš„ajaxè¯·æ±‚ï¼Œåº”è¯¥æ”¾ç½®åœ¨actionsä¸­</p>
<h2 id="vuexåŸºç¡€-actions"><a href="#vuexåŸºç¡€-actions" class="headerlink" title="vuexåŸºç¡€-actions"></a>vuexåŸºç¡€-actions</h2><blockquote>
<p>stateæ˜¯å­˜æ”¾æ•°æ®çš„ï¼Œmutationsæ˜¯åŒæ­¥æ›´æ–°æ•°æ®ï¼Œactionsåˆ™è´Ÿè´£è¿›è¡Œå¼‚æ­¥æ“ä½œ</p>
</blockquote>
<p><strong>å®šä¹‰actions</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">actions: {</span><br><span class="line"> <span class="comment">//  è·å–å¼‚æ­¥çš„æ•°æ® contextè¡¨ç¤ºå½“å‰çš„storeçš„å®ä¾‹ å¯ä»¥é€šè¿‡ context.state è·å–çŠ¶æ€ ä¹Ÿå¯ä»¥é€šè¿‡context.commit æ¥æäº¤mutationsï¼Œ ä¹Ÿå¯ä»¥ context.diapatchè°ƒç”¨å…¶ä»–çš„action</span></span><br><span class="line">   getAsyncCount (context) {</span><br><span class="line">     <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">       <span class="comment">// ä¸€ç§’é’Ÿä¹‹å è¦ç»™ä¸€ä¸ªæ•° å»ä¿®æ”¹state</span></span><br><span class="line">       context.commit(<span class="string">'addCount'</span>, <span class="number">123</span>)</span><br><span class="line">     }, <span class="number">1000</span>)</span><br><span class="line">   }</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure>

<p><strong>åŸå§‹è°ƒç”¨</strong> - $store</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">addAsyncCount () {</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">'getAsyncCount'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¼ å‚è°ƒç”¨</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">addAsyncCount () {</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">'getAsyncCount'</span>, <span class="number">123</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¾…åŠ©å‡½æ•°</strong> -mapActions</p>
<blockquote>
<p>actionsä¹Ÿæœ‰è¾…åŠ©å‡½æ•°ï¼Œå¯ä»¥å°†actionå¯¼å…¥åˆ°ç»„ä»¶ä¸­</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapActions } <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="attr">methods</span>: {</span><br><span class="line">    ...mapActions([<span class="string">'getAsyncCount'</span>])</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç›´æ¥é€šè¿‡ this.æ–¹æ³•å°±å¯ä»¥è°ƒç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;button @click="getAsyncCount(111)"&gt;+å¼‚æ­¥&lt;/button&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="vuexåŸºç¡€-getters"><a href="#vuexåŸºç¡€-getters" class="headerlink" title="vuexåŸºç¡€-getters"></a>vuexåŸºç¡€-getters</h2><blockquote>
<p>é™¤äº†stateä¹‹å¤–ï¼Œæœ‰æ—¶æˆ‘ä»¬è¿˜éœ€è¦ä»stateä¸­æ´¾ç”Ÿå‡ºä¸€äº›çŠ¶æ€ï¼Œè¿™äº›çŠ¶æ€æ˜¯ä¾èµ–stateçš„ï¼Œæ­¤æ—¶ä¼šç”¨åˆ°getters</p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œstateä¸­å®šä¹‰äº†listï¼Œä¸º1-10çš„æ•°ç»„ï¼Œ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">state: {</span><br><span class="line">    <span class="attr">list</span>: [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç»„ä»¶ä¸­ï¼Œéœ€è¦æ˜¾ç¤ºæ‰€æœ‰å¤§äº5çš„æ•°æ®ï¼Œæ­£å¸¸çš„æ–¹å¼ï¼Œæ˜¯éœ€è¦liståœ¨ç»„ä»¶ä¸­è¿›è¡Œå†ä¸€æ­¥çš„å¤„ç†ï¼Œä½†æ˜¯getterså¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°å®ƒ</p>
<p><strong>å®šä¹‰getters</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">getters: {</span><br><span class="line">  <span class="comment">// getterså‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ state</span></span><br><span class="line">  <span class="comment">// å¿…é¡»è¦æœ‰è¿”å›å€¼</span></span><br><span class="line">   <span class="attr">filterList</span>:  <span class="function"><span class="params">state</span> =&gt;</span>  state.list.filter(<span class="function"><span class="params">item</span> =&gt;</span> item &gt; <span class="number">5</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä½¿ç”¨getters</p>
<p><strong>åŸå§‹æ–¹å¼</strong> -$store</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div&gt;{{ $store.getters.filterList }}&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¾…åŠ©å‡½æ•°</strong> - mapGetters</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">computed: {</span><br><span class="line">    ...mapGetters([<span class="string">'filterList'</span>])</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div&gt;{{ filterList }}&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="Vuexä¸­çš„æ¨¡å—åŒ–-Module"><a href="#Vuexä¸­çš„æ¨¡å—åŒ–-Module" class="headerlink" title="Vuexä¸­çš„æ¨¡å—åŒ–-Module"></a>Vuexä¸­çš„æ¨¡å—åŒ–-Module</h2><h3 id="ä¸ºä»€ä¹ˆä¼šæœ‰æ¨¡å—åŒ–ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰æ¨¡å—åŒ–ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰æ¨¡å—åŒ–ï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šæœ‰æ¨¡å—åŒ–ï¼Ÿ</h3><blockquote>
<p>ç”±äºä½¿ç”¨å•ä¸€çŠ¶æ€æ ‘ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ä¼šé›†ä¸­åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡ã€‚å½“åº”ç”¨å˜å¾—éå¸¸å¤æ‚æ—¶ï¼Œstore å¯¹è±¡å°±æœ‰å¯èƒ½å˜å¾—ç›¸å½“è‡ƒè‚¿ã€‚</p>
</blockquote>
<p>è¿™å¥è¯çš„æ„æ€æ˜¯ï¼Œå¦‚æœæŠŠæ‰€æœ‰çš„çŠ¶æ€éƒ½æ”¾åœ¨stateä¸­ï¼Œå½“é¡¹ç›®å˜å¾—è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼ŒVuexä¼šå˜å¾—è¶Šæ¥è¶Šéš¾ä»¥ç»´æŠ¤</p>
<p>ç”±æ­¤ï¼Œåˆæœ‰äº†Vuexçš„æ¨¡å—åŒ–</p>
<p><img src="/2021/07/02/VueX/image-20200904155846709.png" alt="image-20200904155846709"></p>
<h3 id="æ¨¡å—åŒ–çš„ç®€å•åº”ç”¨"><a href="#æ¨¡å—åŒ–çš„ç®€å•åº”ç”¨" class="headerlink" title="æ¨¡å—åŒ–çš„ç®€å•åº”ç”¨"></a>æ¨¡å—åŒ–çš„ç®€å•åº”ç”¨</h3><p><strong>åº”ç”¨</strong></p>
<p>å®šä¹‰ä¸¤ä¸ªæ¨¡å—   <strong>user</strong> å’Œ  <strong>setting</strong></p>
<p>userä¸­ç®¡ç†ç”¨æˆ·çš„çŠ¶æ€  token </p>
<p>settingä¸­ç®¡ç† åº”ç”¨çš„åç§° name</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> store  = <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">    <span class="attr">user</span>: {</span><br><span class="line">       <span class="attr">state</span>: {</span><br><span class="line">         <span class="attr">token</span>: <span class="string">'12345'</span></span><br><span class="line">       }</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">setting</span>: {</span><br><span class="line">      <span class="attr">state</span>: {</span><br><span class="line">         <span class="attr">name</span>: <span class="string">'Vuexå®ä¾‹'</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  })</span><br></pre></td></tr></tbody></table></figure>

<p>å®šä¹‰child-bç»„ä»¶ï¼Œåˆ†åˆ«æ˜¾ç¤ºç”¨æˆ·çš„tokenå’Œåº”ç”¨åç§°name</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;div&gt;ç”¨æˆ·token {{ $store.state.user.token }}&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;ç½‘ç«™åç§° {{ $store.state.setting.name }}&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>è¯·æ³¨æ„ï¼š æ­¤æ—¶è¦è·å–å­æ¨¡å—çš„çŠ¶æ€ éœ€è¦é€šè¿‡ $store.<strong><code>state</code></strong>.<strong><code>æ¨¡å—åç§°</code></strong>.<strong><code>å±æ€§å</code></strong> æ¥è·å–</p>
<blockquote>
<p>çœ‹ç€è·å–æœ‰ç‚¹éº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¹‹å‰å­¦è¿‡çš„gettersæ¥æ”¹å˜ä¸€ä¸‹</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">getters: {</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.token,</span><br><span class="line">  <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.setting.name</span><br><span class="line">} </span><br></pre></td></tr></tbody></table></figure>

<p>è¯·æ³¨æ„ï¼šè¿™ä¸ªgettersæ˜¯æ ¹çº§åˆ«çš„getterså“¦</p>
<p><strong>é€šè¿‡mapGetterså¼•ç”¨</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">computed: {</span><br><span class="line">      ...mapGetters([<span class="string">'token'</span>, <span class="string">'name'</span>])</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ¨¡å—åŒ–ä¸­çš„å‘½åç©ºé—´"><a href="#æ¨¡å—åŒ–ä¸­çš„å‘½åç©ºé—´" class="headerlink" title="æ¨¡å—åŒ–ä¸­çš„å‘½åç©ºé—´"></a>æ¨¡å—åŒ–ä¸­çš„å‘½åç©ºé—´</h3><p><strong>å‘½åç©ºé—´</strong>  <strong><code>namespaced</code></strong></p>
<blockquote>
<p>è¿™é‡Œæ³¨æ„ç†è§£</p>
</blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¨¡å—å†…éƒ¨çš„ actionã€mutation å’Œ getter æ˜¯æ³¨å†Œåœ¨<strong>å…¨å±€å‘½åç©ºé—´</strong>çš„â€”â€”è¿™æ ·ä½¿å¾—å¤šä¸ªæ¨¡å—èƒ½å¤Ÿå¯¹åŒä¸€ mutation æˆ– action ä½œå‡ºå“åº”ã€‚</p>
<blockquote>
<p>è¿™å¥è¯çš„æ„æ€æ˜¯ åˆšæ‰çš„useræ¨¡å—è¿˜æ˜¯settingæ¨¡å—ï¼Œå®ƒçš„ actionã€mutation å’Œ getter å…¶å®å¹¶æ²¡æœ‰åŒºåˆ†ï¼Œéƒ½å¯ä»¥ç›´æ¥é€šè¿‡å…¨å±€çš„æ–¹å¼è°ƒç”¨ å¦‚</p>
</blockquote>
<p><img src="/2021/07/02/VueX/image-20200904164007116.png" alt="image-20200904164007116"></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">user: {</span><br><span class="line">     <span class="attr">state</span>: {</span><br><span class="line">       <span class="attr">token</span>: <span class="string">'12345'</span></span><br><span class="line">     },</span><br><span class="line">     <span class="attr">mutations</span>: {</span><br><span class="line">      <span class="comment">//  è¿™é‡Œçš„stateè¡¨ç¤ºçš„æ˜¯userçš„state</span></span><br><span class="line">       updateToken (state) {</span><br><span class="line">          state.token = <span class="number">678910</span></span><br><span class="line">       }</span><br><span class="line">     }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>é€šè¿‡mapMutationsè°ƒç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">methods: {</span><br><span class="line">      ...mapMutations(['updateToken'])</span><br><span class="line"> }</span><br><span class="line">&lt;button @click="updateToken"&gt;ä¿®æ”¹token&lt;/button&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¿è¯å†…éƒ¨æ¨¡å—çš„é«˜å°é—­æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨namespacedæ¥è¿›è¡Œè®¾ç½®</p>
</blockquote>
<p>é«˜å°é—­æ€§ï¼Ÿå¯ä»¥ç†è§£æˆ <strong>ä¸€å®¶äººå¦‚æœåˆ†å®¶äº†ï¼Œæ­¤æ—¶ï¼Œä½ çš„çˆ¸å¦ˆå¯ä»¥éšæ„çš„è¿›å‡ºåˆ†ç»™ä½ çš„å°å®¶ï¼Œä½ è§‰å¾—è‡ªå·±æ²¡ä»€ä¹ˆéšç§äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç»™è‡ªå·±çš„æˆ¿é—¨åŠ ä¸€é“é”ï¼ˆå‘½åç©ºé—´ namespacedï¼‰,ä½ çš„çˆ¶æ¯å†ä¹Ÿä¸èƒ½è¿›å‡ºä½ çš„å°å®¶äº†</strong></p>
<p>å¦‚</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">user: {</span><br><span class="line">     <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">     <span class="attr">state</span>: {</span><br><span class="line">       <span class="attr">token</span>: <span class="string">'12345'</span></span><br><span class="line">     },</span><br><span class="line">     <span class="attr">mutations</span>: {</span><br><span class="line">      <span class="comment">//  è¿™é‡Œçš„stateè¡¨ç¤ºçš„æ˜¯userçš„state</span></span><br><span class="line">       updateToken (state) {</span><br><span class="line">          state.token = <span class="number">678910</span></span><br><span class="line">       }</span><br><span class="line">     }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<p>ä½¿ç”¨å¸¦å‘½åç©ºé—´çš„æ¨¡å— <strong><code>action/mutations</code></strong></p>
<p>æ–¹æ¡ˆ1ï¼š<strong>ç›´æ¥è°ƒç”¨-å¸¦ä¸Šæ¨¡å—çš„å±æ€§åè·¯å¾„</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">test () {</span><br><span class="line">   <span class="built_in">this</span>.$store.dispatch(<span class="string">'user/updateToken'</span>) <span class="comment">// ç›´æ¥è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ–¹æ¡ˆ2ï¼š<strong>è¾…åŠ©å‡½æ•°-å¸¦ä¸Šæ¨¡å—çš„å±æ€§åè·¯å¾„</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">methods: {</span><br><span class="line">     ...mapMutations(['user/updateToken']),</span><br><span class="line">     test () {</span><br><span class="line">         this['user/updateToken']()</span><br><span class="line">     }</span><br><span class="line"> }</span><br><span class="line">&lt;button @click="test"&gt;ä¿®æ”¹token&lt;/button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ–¹æ¡ˆ3ï¼š <strong>createNamespacedHelpers</strong>  åˆ›å»ºåŸºäºæŸä¸ªå‘½åç©ºé—´è¾…åŠ©å‡½æ•°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">import { mapGetters, createNamespacedHelpers } from 'vuex'</span><br><span class="line">const { mapMutations } = createNamespacedHelpers('user')</span><br><span class="line">&lt;button @click="updateToken"&gt;ä¿®æ”¹token2&lt;/button&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å…³äºVuexçš„æ›´å¤šç”¨æ³•ï¼Œåç»­åœ¨é¡¹ç›®ä¸­è®²è§£</p>
</blockquote>
<h2 id="vuexæ¡ˆä¾‹-æ­å»ºé»‘é©¬å¤´æ¡é¡¹ç›®"><a href="#vuexæ¡ˆä¾‹-æ­å»ºé»‘é©¬å¤´æ¡é¡¹ç›®" class="headerlink" title="vuexæ¡ˆä¾‹-æ­å»ºé»‘é©¬å¤´æ¡é¡¹ç›®"></a>vuexæ¡ˆä¾‹-æ­å»ºé»‘é©¬å¤´æ¡é¡¹ç›®</h2><p>æ¥ä¸‹æ¥ï¼Œé€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥ä½¿ç”¨Vuexä»‹å…¥æˆ‘ä»¬çš„æ•°æ®ç®¡ç†</p>
<blockquote>
<p>é€šè¿‡vue-cliè„šæ‰‹æ¶æ­å»ºé¡¹ç›®</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ vue create toutiao  <span class="comment">#åˆ›å»ºé¡¹ç›®</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€‰æ‹©  vuex / eslintï¼ˆstanadardï¼‰ / pre-cssprocesser (less)  ç¡®å®š  </p>
</blockquote>
<p><strong>åœ¨main.jsä¸­å¼•å…¥æ ·å¼</strong>(è¯¥æ ·å¼åœ¨<strong>èµ„æº/vuexæ ·å¼</strong>ä¸­ï¼Œæ‹·è´åˆ°stylesç›®å½•ä¸‹)</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./styles/index.css'</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ‹·è´å›¾ç‰‡èµ„æºåˆ°assetsç›®å½•ä¸‹</strong>ï¼ˆåœ¨<strong>èµ„æº/vuexæ ·å¼ç›®å½•ä¸‹çš„å›¾ç‰‡</strong>ï¼‰</p>
<p><strong>åœ¨App.vueä¸­æ‹·è´åŸºæœ¬ç»“æ„</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div id="app"&gt;</span><br><span class="line">     &lt;ul class="catagtory"&gt;</span><br><span class="line">       &lt;li class='select'&gt;å¼€å‘è€…èµ„è®¯&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;ios&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;c++&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;android&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;css&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;æ•°æ®åº“&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;åŒºå—é“¾&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;go&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;äº§å“&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;åç«¯&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;linux&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;äººå·¥æ™ºèƒ½&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;php&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;javascript&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;æ¶æ„&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;å‰ç«¯&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;python&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;java&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;ç®—æ³•&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;é¢è¯•&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;ç§‘æŠ€åŠ¨æ€&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;js&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;è®¾è®¡&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;æ•°ç äº§å“&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;html&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;è½¯ä»¶æµ‹è¯•&lt;/li&gt;</span><br><span class="line">       &lt;li&gt;æµ‹è¯•å¼€å‘&lt;/li&gt;</span><br><span class="line">     &lt;/ul&gt;</span><br><span class="line">     &lt;div class="list"&gt;</span><br><span class="line">       &lt;div class="article_item"&gt;</span><br><span class="line">         &lt;h3 class="van-ellipsis"&gt;pythonæ•°æ®é¢„å¤„ç† ï¼šæ•°æ®æ ‡å‡†åŒ–&lt;/h3&gt;</span><br><span class="line">         &lt;div class="img_box"&gt;</span><br><span class="line">           &lt;img src="@/assets/back.jpg"</span><br><span class="line">           class="w100" /&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">         &lt;!----&gt;</span><br><span class="line">         &lt;div class="info_box"&gt;</span><br><span class="line">           &lt;span&gt;13552285417&lt;/span&gt;</span><br><span class="line">           &lt;span&gt;0è¯„è®º&lt;/span&gt;</span><br><span class="line">           &lt;span&gt;2018-11-29T17:02:09&lt;/span&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">       &lt;/div&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">   &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="vuexæ¡ˆä¾‹-å°è£…åˆ†ç±»ç»„ä»¶å’Œé¢‘é“ç»„ä»¶"><a href="#vuexæ¡ˆä¾‹-å°è£…åˆ†ç±»ç»„ä»¶å’Œé¢‘é“ç»„ä»¶" class="headerlink" title="vuexæ¡ˆä¾‹-å°è£…åˆ†ç±»ç»„ä»¶å’Œé¢‘é“ç»„ä»¶"></a>vuexæ¡ˆä¾‹-å°è£…åˆ†ç±»ç»„ä»¶å’Œé¢‘é“ç»„ä»¶</h2><p>ä¸ºäº†æ›´å¥½çš„åŒºåˆ†ç»„ä»¶ä¹‹é—´çš„èŒè´£ï¼Œæˆ‘ä»¬å°†ä¸Šæ–¹çš„é¢‘é“å’Œä¸‹æ–¹çš„åˆ—è¡¨å°è£…æˆä¸åŒçš„ç»„ä»¶</p>
<p><strong><code>components/catagtory.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;    </span><br><span class="line">   &lt;ul class="catagtory"&gt;</span><br><span class="line">        &lt;li class='select'&gt;å¼€å‘è€…èµ„è®¯&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;ios&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;c++&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;android&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;css&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;æ•°æ®åº“&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;åŒºå—é“¾&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;go&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;äº§å“&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;åç«¯&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;linux&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;äººå·¥æ™ºèƒ½&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;php&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;javascript&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;æ¶æ„&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;å‰ç«¯&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;python&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;java&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;ç®—æ³•&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;é¢è¯•&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;ç§‘æŠ€åŠ¨æ€&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;js&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;è®¾è®¡&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;æ•°ç äº§å“&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;html&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;è½¯ä»¶æµ‹è¯•&lt;/li&gt;</span><br><span class="line">        &lt;li&gt;æµ‹è¯•å¼€å‘&lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;    </span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>components/new-list.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt; </span><br><span class="line">  &lt;div class="list"&gt;</span><br><span class="line">        &lt;div class="article_item"&gt;</span><br><span class="line">          &lt;h3 class="van-ellipsis"&gt;pythonæ•°æ®é¢„å¤„ç† ï¼šæ•°æ®æ ‡å‡†åŒ–&lt;/h3&gt;</span><br><span class="line">          &lt;div class="img_box"&gt;</span><br><span class="line">             &lt;img src="@/assets/back.jpg"</span><br><span class="line">            class="w100" /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;!----&gt;</span><br><span class="line">          &lt;div class="info_box"&gt;</span><br><span class="line">            &lt;span&gt;13552285417&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;0è¯„è®º&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;2018-11-29T17:02:09&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨App.vueä¸­å¼•å…¥å¹¶ä½¿ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;!-- app.vueæ˜¯æ ¹ç»„ä»¶ --&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;catagtory /&gt;</span><br><span class="line">    &lt;new-list /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Catagtory from './components/catagtory'</span><br><span class="line">import NewList from './components/new-list'</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    Catagtory, NewList</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="vuexæ¡ˆä¾‹-åœ¨vuexä¸­åŠ è½½åˆ†ç±»å’Œé¢‘é“æ•°æ®"><a href="#vuexæ¡ˆä¾‹-åœ¨vuexä¸­åŠ è½½åˆ†ç±»å’Œé¢‘é“æ•°æ®" class="headerlink" title="vuexæ¡ˆä¾‹-åœ¨vuexä¸­åŠ è½½åˆ†ç±»å’Œé¢‘é“æ•°æ®"></a>vuexæ¡ˆä¾‹-åœ¨vuexä¸­åŠ è½½åˆ†ç±»å’Œé¢‘é“æ•°æ®</h2><h3 id="è®¾è®¡categtoryå’Œnewlistçš„vuexæ¨¡å—"><a href="#è®¾è®¡categtoryå’Œnewlistçš„vuexæ¨¡å—" class="headerlink" title="è®¾è®¡categtoryå’Œnewlistçš„vuexæ¨¡å—"></a>è®¾è®¡categtoryå’Œnewlistçš„vuexæ¨¡å—</h3><p><strong>å®‰è£…è¯·æ±‚æ•°æ®çš„å·¥å…· axios</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i axios</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ¥å£</strong></p>
<p>â€‹    è·å–é¢‘é“åˆ—è¡¨ </p>
<p>â€‹            <a href="http://ttapi.research.itcast.cn/app/v1_0/channels">http://ttapi.research.itcast.cn/app/v1_0/channels</a></p>
<p>â€‹    è·å–é¢‘é“å¤´æ¡</p>
<p>â€‹          <a href="http://ttapi.research.itcast.cn/app/v1_1/articles?channel_id=%E9%A2%91%E9%81%93id&amp;timestamp=%E6%97%B6%E9%97%B4%E6%88%B3&amp;with_top=1">http://ttapi.research.itcast.cn/app/v1_1/articles?channel_id=é¢‘é“id&amp;timestamp=æ—¶é—´æˆ³&amp;with_top=1</a></p>
<blockquote>
<p>æˆ‘ä»¬é‡‡ç”¨æ¨¡å—åŒ–çš„ç®¡ç†æ¨¡å¼ï¼Œå»ºç«‹ä¸€ä¸ªä¸“é—¨çš„æ¨¡å—æ¥ç®¡ç†åˆ†ç±»å’Œæ–°é—»æ•°æ®</p>
</blockquote>
<p><strong>åœ¨storeç›®å½•ä¸‹æ–°å»ºç›®å½•modulesï¼Œ æ–°å»º catagtory.jså’Œnewlist.js</strong></p>
<p><strong>æ¨¡å—ç»“æ„</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: {},</span><br><span class="line">  <span class="attr">mutations</span>: {},</span><br><span class="line">  <span class="attr">actions</span>: {}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨store/index.jsä¸­å¼•å…¥å®šä¹‰çš„ä¸¤ä¸ªæ¨¡å—</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> catagtory <span class="keyword">from</span> <span class="string">'./modules/catagtory'</span></span><br><span class="line"><span class="keyword">import</span> newlist <span class="keyword">from</span> <span class="string">'./modules/newlist'</span></span><br><span class="line"> <span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">state</span>: {</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">mutations</span>: {</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">actions</span>: {</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">    catagtory,</span><br><span class="line">    newlist</span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ†ç±»æ¨¡å—ä¸‹è®¾ç½®åˆ†ç±»æ•°ç»„å’Œå½“å‰æ¿€æ´»åˆ†ç±»"><a href="#åˆ†ç±»æ¨¡å—ä¸‹è®¾ç½®åˆ†ç±»æ•°ç»„å’Œå½“å‰æ¿€æ´»åˆ†ç±»" class="headerlink" title="åˆ†ç±»æ¨¡å—ä¸‹è®¾ç½®åˆ†ç±»æ•°ç»„å’Œå½“å‰æ¿€æ´»åˆ†ç±»"></a>åˆ†ç±»æ¨¡å—ä¸‹è®¾ç½®åˆ†ç±»æ•°ç»„å’Œå½“å‰æ¿€æ´»åˆ†ç±»</h3><p><strong>åœ¨catagtoryçš„ stateä¸­å®šä¹‰åˆ†ç±»é¢‘é“åˆ—è¡¨å’Œå½“å‰æ¿€æ´»</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">state: {</span><br><span class="line">    <span class="attr">catagtory</span>: [],</span><br><span class="line">    <span class="attr">currentCatagtory</span>: <span class="string">''</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰æ›´æ–°é¢‘é“åˆ—è¡¨çš„mutations</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">mutations: {</span><br><span class="line">  updateCatagtory (state, payload) {</span><br><span class="line">      state.catagtory = payload <span class="comment">// æ›´æ–°åˆ†ç±»æ•°æ®</span></span><br><span class="line">   },</span><br><span class="line">   updateCurrentCatagtory (state, payload) {</span><br><span class="line">      state.currentCatagtory = payload</span><br><span class="line">   }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>é€šè¿‡getterså»ºç«‹å¯¹äºåˆ†ç±»æ•°æ®å’Œå½“å‰åˆ†ç±»çš„å¿«æ·è®¿é—®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">state</span>: {</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">mutations</span>: {</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">actions</span>: {</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">    catagtory,</span><br><span class="line">    newlist</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">getters</span>: {</span><br><span class="line">    <span class="attr">catagtory</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.catagtory.catagtory, <span class="comment">// å»ºç«‹å¿«æ·è®¿é—®</span></span><br><span class="line">    <span class="attr">currentCatagtory</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.catagtory.currentCatagtory</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="éå†åˆ†ç±»æ•°æ®å¹¶åˆ¤æ–­æ¿€æ´»class"><a href="#éå†åˆ†ç±»æ•°æ®å¹¶åˆ¤æ–­æ¿€æ´»class" class="headerlink" title="éå†åˆ†ç±»æ•°æ®å¹¶åˆ¤æ–­æ¿€æ´»class"></a>éå†åˆ†ç±»æ•°æ®å¹¶åˆ¤æ–­æ¿€æ´»class</h3><p><strong>åˆ†ç±»ç»„ä»¶éå†vuexæ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapGetters } <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="attr">computed</span>: {</span><br><span class="line">    ...mapGetters([<span class="string">'catagtory'</span>, <span class="string">'currentCatagtroy'</span>])</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;ul class="catagtory"&gt;</span><br><span class="line">   &lt;li :class="{ select: currentCatagtory === item.id }" v-for="item in catagtory"  :key="item.id"&gt;{{ item.name }}&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å°è£…è°ƒç”¨è·å–åˆ†ç±»action-æ¿€æ´»ç¬¬ä¸€ä¸ªåˆ†ç±»"><a href="#å°è£…è°ƒç”¨è·å–åˆ†ç±»action-æ¿€æ´»ç¬¬ä¸€ä¸ªåˆ†ç±»" class="headerlink" title="å°è£…è°ƒç”¨è·å–åˆ†ç±»action,æ¿€æ´»ç¬¬ä¸€ä¸ªåˆ†ç±»"></a>å°è£…è°ƒç”¨è·å–åˆ†ç±»action,æ¿€æ´»ç¬¬ä¸€ä¸ªåˆ†ç±»</h3><p><strong>å®šä¹‰è·å–é¢‘é“åˆ—è¡¨çš„action,  å°†ç¬¬ä¸€ä¸ªé¢‘é“æ¿€æ´»</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">actions: {</span><br><span class="line">  <span class="keyword">async</span>  getCatagtory (context) {</span><br><span class="line">    <span class="keyword">const</span> { <span class="attr">data</span>: { <span class="attr">data</span>: { channels } } } = <span class="keyword">await</span>                  axios.get(<span class="string">'http://ttapi.research.itcast.cn/app/v1_0/channels'</span>)</span><br><span class="line">    context.commit(<span class="string">'updateCatagtory'</span>, channels)</span><br><span class="line">    context.commit(<span class="string">'updateCurrentCatagtory'</span>, channels[<span class="number">0</span>].id)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆå§‹åŒ–catagtoryæ—¶è°ƒç”¨action</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapGetters } <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">computed</span>: {</span><br><span class="line">    ...mapGetters([<span class="string">'catagtory'</span>])</span><br><span class="line">  },</span><br><span class="line">  created () {</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">'catagtory/getCatagtory'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç‚¹å‡»åˆ†ç±»æ—¶ï¼Œè§¦å‘åˆ†ç±»åˆ‡æ¢</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;li @click="$store.commit('catagtory/updateCurrentCatagtory', item.id)" :class="{ select: currentCatagtroy === item.id }" v-for="item in catagtory"  :key="item.id"&gt;{{ item.name }}&lt;/li&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®šä¹‰æ–°é—»æ•°æ®ï¼Œå¹¶å°è£…è·å–æ–°é—»çš„Action"><a href="#å®šä¹‰æ–°é—»æ•°æ®ï¼Œå¹¶å°è£…è·å–æ–°é—»çš„Action" class="headerlink" title="å®šä¹‰æ–°é—»æ•°æ®ï¼Œå¹¶å°è£…è·å–æ–°é—»çš„Action"></a>å®šä¹‰æ–°é—»æ•°æ®ï¼Œå¹¶å°è£…è·å–æ–°é—»çš„Action</h3><p><strong>åœ¨newlist.jsä¸­å®šä¹‰è·å–å¤´æ¡å†…å®¹çš„æ•°æ®</strong>    </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">state: {</span><br><span class="line">   <span class="attr">allData</span>: {}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰æ›´æ–°å¤´æ¡å†…å®¹çš„mutations</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">mutations: {</span><br><span class="line">  <span class="comment">// payload è½½è·  { 1: [], 2: [], 3: [], 4}</span></span><br><span class="line">  updateList (state, { currentCatagtory, list }) {</span><br><span class="line">    <span class="comment">// ä¸æ˜¯å“åº”å¼çš„</span></span><br><span class="line">    <span class="comment">// state.allData[currentCatagtory] = list // è¿™æ ·åšäº‹å¤§é”™ç‰¹é”™ç¬¬  æ„Ÿè§‰ä¸åˆ°å˜åŒ– å°±ä¸ä¼šé€šçŸ¥ç»„ä»¶</span></span><br><span class="line">    state.allData = { ...state.allData, [currentCatagtory]: list }</span><br><span class="line">    <span class="comment">// è¿™å¥ä»£ç çš„å«ä¹‰ å°±ç›¸å½“äº åœ¨ä¸€ä¸ªæ–°çš„å¯¹è±¡åé¢è¿½åŠ äº†ä¸€ä¸ªå±æ€§  æ›´æ–°æŸä¸ªå±æ€§çš„å†…å®¹</span></span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰æ ¹æ®åˆ†ç±»æ ‡è¯†è·å–æ–°é—»çš„action</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">actions: {</span><br><span class="line">  <span class="comment">// è·å–æ–°é—»åˆ—è¡¨æ•°æ®</span></span><br><span class="line">  <span class="comment">// åˆ†ç±»idåªèƒ½é€šè¿‡ä¼ é€’çš„æ–¹å¼ä¼ è¿›æ¥</span></span><br><span class="line">  <span class="keyword">async</span> getNewList (context, cataId) {</span><br><span class="line">    <span class="keyword">const</span> { <span class="attr">data</span>: { <span class="attr">data</span>: { results } } } = <span class="keyword">await</span> axios.get(<span class="string">`http://ttapi.research.itcast.cn/app/v1_1/articles?channel_id=<span class="subst">${cataId}</span>&amp;timestamp=<span class="subst">${<span class="built_in">Date</span>.now()}</span>&amp;with_top=1`</span>)</span><br><span class="line">    <span class="comment">// resultsæ˜¯æ–°é—»åˆ—è¡¨</span></span><br><span class="line">    context.commit(<span class="string">'updateList'</span>, { <span class="attr">currentCatagtory</span>: cataId, <span class="attr">list</span>: results })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç›‘å¬æ¿€æ´»åˆ†ç±»ï¼Œè§¦å‘è·å–æ–°é—»Action"><a href="#ç›‘å¬æ¿€æ´»åˆ†ç±»ï¼Œè§¦å‘è·å–æ–°é—»Action" class="headerlink" title="ç›‘å¬æ¿€æ´»åˆ†ç±»ï¼Œè§¦å‘è·å–æ–°é—»Action"></a>ç›‘å¬æ¿€æ´»åˆ†ç±»ï¼Œè§¦å‘è·å–æ–°é—»Action</h3><p><strong>åœ¨new-listç»„ä»¶ä¸­ï¼Œå¼•å…¥å½“å‰åˆ†ç±»çš„idï¼Œç›‘è§†å…¶æ”¹å˜ï¼Œä¸€æ—¦æ”¹å˜ï¼Œè§¦å‘è·å–æ–°é—»çš„action</strong> </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapGetters } <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">computed</span>: {</span><br><span class="line">    ...mapGetters([<span class="string">'currentCatagtroy'</span>])</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">watch</span>: {</span><br><span class="line">    currentCatagtory (newValue) {</span><br><span class="line">      <span class="built_in">this</span>.$store.dispatch(<span class="string">'newlist/getNewList'</span>, newValue)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¤„ç†æ˜¾ç¤ºæ–°é—»å†…å®¹çš„æ•°æ®"><a href="#å¤„ç†æ˜¾ç¤ºæ–°é—»å†…å®¹çš„æ•°æ®" class="headerlink" title="å¤„ç†æ˜¾ç¤ºæ–°é—»å†…å®¹çš„æ•°æ®"></a>å¤„ç†æ˜¾ç¤ºæ–°é—»å†…å®¹çš„æ•°æ®</h3><p><strong>å®šä¹‰å½“å‰æ˜¾ç¤ºåˆ—è¡¨çš„getters</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">getters: {</span><br><span class="line">    <span class="attr">currentList</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.newlist.allData[state.catagtory.currentCatagtory] || []</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¿®æ”¹new-listå†…å®¹</strong></p>
<figure class="highlight plaintext"><figcaption><span>&lt;div class</span></figcaption><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div class="list"&gt;</span><br><span class="line">        &lt;div class="article_item" v-for="item in currentList" :key="item.art_id"&gt;</span><br><span class="line">          &lt;h3 class="van-ellipsis"&gt;{{ item.title }}&lt;/h3&gt;</span><br><span class="line">          &lt;div class="img_box" v-if="item.cover.type === 1"&gt;</span><br><span class="line">            &lt;img :src="item.cover.images[0]"</span><br><span class="line">            class="w100" /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="img_box" v-else-if="item.cover.type === 3"&gt;</span><br><span class="line">            &lt;img :src="item.cover.images[0]"</span><br><span class="line">            class="w33" /&gt;</span><br><span class="line">             &lt;img :src="item.cover.images[1]"</span><br><span class="line">            class="w33" /&gt;</span><br><span class="line">             &lt;img :src="item.cover.images[2]"</span><br><span class="line">            class="w33" /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;!----&gt;</span><br><span class="line">          &lt;div class="info_box"&gt;</span><br><span class="line">            &lt;span&gt;{{ item.aut_name }}&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;{{ item.comm_count }}è¯„è®º&lt;/span&gt;</span><br><span class="line">            &lt;span&gt;{{ item.pubdate }}&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// å¼•å…¥å½“å‰æ¿€æ´»çš„åˆ†ç±»id</span><br><span class="line">import { mapGetters } from 'vuex'</span><br><span class="line">export default {</span><br><span class="line">  computed: {</span><br><span class="line">    ...mapGetters(['currentCatagtory', 'currentList'])</span><br><span class="line">  },</span><br><span class="line">  watch: {</span><br><span class="line">    currentCatagtory (newValue) {</span><br><span class="line">      // newValueæ˜¯å½“å‰æœ€æ–°çš„æ¿€æ´»çš„id</span><br><span class="line">      this.$store.dispatch('newlist/getNewList', newValue)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>






]]></content>
      <categories>
        <category>Vuex</category>
      </categories>
      <tags>
        <tag>Vue - Vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåŸºç¡€6-è·¯ç”±_vantç»„ä»¶åº“ä½¿ç”¨</title>
    <url>/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="çŸ¥è¯†ç‚¹è‡ªæµ‹"><a href="#çŸ¥è¯†ç‚¹è‡ªæµ‹" class="headerlink" title="çŸ¥è¯†ç‚¹è‡ªæµ‹"></a>çŸ¥è¯†ç‚¹è‡ªæµ‹</h2><ul>
<li><input disabled="" type="checkbox"> urlçš„ç»„æˆéƒ¨åˆ†éƒ½æœ‰å“ªäº›, hashå€¼æŒ‡çš„ä»€ä¹ˆ</li>
</ul>
<h2 id="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"><a href="#ä»Šæ—¥å­¦ä¹ ç›®æ ‡" class="headerlink" title="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"></a>ä»Šæ—¥å­¦ä¹ ç›®æ ‡</h2><ol>
<li>èƒ½å¤Ÿäº†è§£å•é¡µé¢åº”ç”¨æ¦‚å¿µå’Œä¼˜ç¼ºç‚¹</li>
<li>èƒ½å¤ŸæŒæ¡vue-routerè·¯ç”±ç³»ç»Ÿä½¿ç”¨</li>
<li>èƒ½å¤ŸæŒæ¡é“¾æ¥å¯¼èˆªå’Œç¼–ç¨‹å¼å¯¼èˆªç”¨æ³•</li>
<li>èƒ½å¤ŸæŒæ¡è·¯ç”±åµŒå¥—å’Œè·¯ç”±å®ˆå«</li>
<li>èƒ½å¤ŸæŒæ¡vantç»„ä»¶åº“åŸºç¡€ä½¿ç”¨</li>
</ol>
<h2 id="1-vueè·¯ç”±ç®€ä»‹å’ŒåŸºç¡€ä½¿ç”¨"><a href="#1-vueè·¯ç”±ç®€ä»‹å’ŒåŸºç¡€ä½¿ç”¨" class="headerlink" title="1. vueè·¯ç”±ç®€ä»‹å’ŒåŸºç¡€ä½¿ç”¨"></a>1. vueè·¯ç”±ç®€ä»‹å’ŒåŸºç¡€ä½¿ç”¨</h2><h3 id="1-0-ä»€ä¹ˆæ˜¯è·¯ç”±"><a href="#1-0-ä»€ä¹ˆæ˜¯è·¯ç”±" class="headerlink" title="1.0 ä»€ä¹ˆæ˜¯è·¯ç”±"></a>1.0 ä»€ä¹ˆæ˜¯è·¯ç”±</h3><blockquote>
<p>ç›®æ ‡: è®¾å¤‡å’Œipçš„æ˜ å°„å…³ç³»</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210512095742920.png" alt="image-20210512095742920"></p>
<blockquote>
<p>ç›®æ ‡: æ¥å£å’ŒæœåŠ¡çš„æ˜ å°„å…³ç³»</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210512095805578.png" alt="image-20210512095805578"></p>
<blockquote>
<p>ç›®æ ‡: è·¯å¾„å’Œç»„ä»¶çš„æ˜ å°„å…³ç³»</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210512095825389.png" alt="image-20210512095825389"></p>
<h3 id="1-1-ä¸ºä»€ä¹ˆä½¿ç”¨è·¯ç”±"><a href="#1-1-ä¸ºä»€ä¹ˆä½¿ç”¨è·¯ç”±" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆä½¿ç”¨è·¯ç”±"></a>1.1 ä¸ºä»€ä¹ˆä½¿ç”¨è·¯ç”±</h3><blockquote>
<p>ç›®æ ‡: åœ¨ä¸€ä¸ªé¡µé¢é‡Œ, åˆ‡æ¢ä¸šåŠ¡åœºæ™¯</p>
</blockquote>
<p>å…·ä½“ä½¿ç”¨ç¤ºä¾‹: ç½‘æ˜“äº‘éŸ³ä¹ <a href="https://music.163.com/">https://music.163.com/</a></p>
<p>å•é¡µé¢åº”ç”¨(SPA): æ‰€æœ‰åŠŸèƒ½åœ¨ä¸€ä¸ªhtmlé¡µé¢ä¸Šå®ç°</p>
<p>å‰ç«¯è·¯ç”±ä½œç”¨: å®ç°ä¸šåŠ¡åœºæ™¯åˆ‡æ¢</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li><p>æ•´ä½“ä¸åˆ·æ–°é¡µé¢ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½</p>
</li>
<li><p>æ•°æ®ä¼ é€’å®¹æ˜“, å¼€å‘æ•ˆç‡é«˜</p>
</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li><p>å¼€å‘æˆæœ¬é«˜(éœ€è¦å­¦ä¹ ä¸“é—¨çŸ¥è¯†)</p>
</li>
<li><p>é¦–æ¬¡åŠ è½½ä¼šæ¯”è¾ƒæ…¢ä¸€ç‚¹ã€‚ä¸åˆ©äºseo</p>
</li>
</ul>
<h3 id="1-2-vue-routerä»‹ç»"><a href="#1-2-vue-routerä»‹ç»" class="headerlink" title="1.2 vue-routerä»‹ç»"></a>1.2 vue-routerä»‹ç»</h3><blockquote>
<p>ç›®æ ‡: å¦‚ä½•åœ¨Vueé¡¹ç›®ä¸­é›†æˆè·¯ç”±</p>
</blockquote>
<p>å®˜ç½‘: <a href="https://router.vuejs.org/zh/">https://router.vuejs.org/zh/</a></p>
<p>vue-routeræ¨¡å—åŒ…</p>
<p>å®ƒå’Œ Vue.js æ·±åº¦é›†æˆ</p>
<p>å¯ä»¥å®šä¹‰ - è§†å›¾è¡¨(æ˜ å°„è§„åˆ™)</p>
<p>æ¨¡å—åŒ–çš„</p>
<p>æä¾›2ä¸ªå†…ç½®å…¨å±€ç»„ä»¶</p>
<p>å£°æ˜å¼å¯¼èˆªè‡ªåŠ¨æ¿€æ´»çš„ CSS class çš„é“¾æ¥</p>
<p>â€¦â€¦</p>
<h3 id="1-3-è·¯ç”±-ç»„ä»¶åˆ†ç±»"><a href="#1-3-è·¯ç”±-ç»„ä»¶åˆ†ç±»" class="headerlink" title="1.3 è·¯ç”± - ç»„ä»¶åˆ†ç±»"></a>1.3 è·¯ç”± - ç»„ä»¶åˆ†ç±»</h3><blockquote>
<p>ç›®æ ‡:  .vueæ–‡ä»¶åˆ†2ç±», ä¸€ä¸ªæ˜¯é¡µé¢ç»„ä»¶, ä¸€ä¸ªæ˜¯å¤ç”¨ç»„ä»¶</p>
</blockquote>
<p>.vueæ–‡ä»¶æœ¬è´¨æ— åŒºåˆ«, æ–¹ä¾¿å¤§å®¶å­¦ä¹ å’Œç†è§£, æ€»ç»“çš„ä¸€ä¸ªç»éªŒ</p>
<p>src/views(æˆ–pages) æ–‡ä»¶å¤¹ å’Œ src/componentsæ–‡ä»¶å¤¹</p>
<ul>
<li>é¡µé¢ç»„ä»¶ - é¡µé¢å±•ç¤º - é…åˆè·¯ç”±ç”¨</li>
<li>å¤ç”¨ç»„ä»¶ - å±•ç¤ºæ•°æ®/å¸¸ç”¨äºå¤ç”¨</li>
</ul>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210424215930981.png" alt="image-20210424215930981"></p>
<blockquote>
<p>æ€»ç»“: viewsä¸‹çš„é¡µé¢ç»„ä»¶, é…åˆè·¯ç”±åˆ‡æ¢, componentsä¸‹çš„ä¸€èˆ¬å¼•å…¥åˆ°viewsä¸‹çš„vueä¸­å¤ç”¨å±•ç¤ºæ•°æ®</p>
</blockquote>
<h3 id="1-4-vue-routerä½¿ç”¨"><a href="#1-4-vue-routerä½¿ç”¨" class="headerlink" title="1.4 vue-routerä½¿ç”¨"></a>1.4 vue-routerä½¿ç”¨</h3><blockquote>
<p>ç›®æ ‡: å­¦ä¼švueå®˜æ–¹æä¾›çš„vue-routerè·¯ç”±ç³»ç»ŸåŠŸèƒ½æ¨¡å—ä½¿ç”¨</p>
</blockquote>
<p>App.vue - é¡µé¢æ ‡ç­¾å’Œæ ·å¼å‡†å¤‡(==å¯å¤åˆ¶ç»§ç»­å†™==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class="footer_wrap"&gt;</span><br><span class="line">      &lt;a href="#/find"&gt;å‘ç°éŸ³ä¹&lt;/a&gt;</span><br><span class="line">      &lt;a href="#/my"&gt;æˆ‘çš„éŸ³ä¹&lt;/a&gt;</span><br><span class="line">      &lt;a href="#/part"&gt;æœ‹å‹&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="top"&gt;</span><br><span class="line">      </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.footer_wrap {</span><br><span class="line">  position: fixed;</span><br><span class="line">  left: 0;</span><br><span class="line">  top: 0;</span><br><span class="line">  display: flex;</span><br><span class="line">  width: 100%;</span><br><span class="line">  text-align: center;</span><br><span class="line">  background-color: #333;</span><br><span class="line">  color: #ccc;</span><br><span class="line">}</span><br><span class="line">.footer_wrap a {</span><br><span class="line">  flex: 1;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">  padding: 20px 0;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  background-color: #333;</span><br><span class="line">  color: #ccc;</span><br><span class="line">  border: 1px solid black;</span><br><span class="line">}</span><br><span class="line">.footer_wrap a:hover {</span><br><span class="line">  background-color: #555;</span><br><span class="line">}</span><br><span class="line">.top {</span><br><span class="line">  padding-top: 62px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><a href="https://router.vuejs.org/zh/">vue-routeræ–‡æ¡£</a></p>
<ul>
<li>å®‰è£…</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add vue-router</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>å¯¼å…¥è·¯ç”±</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>ä½¿ç”¨è·¯ç”±æ’ä»¶</li>
</ul>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// åœ¨vueä¸­ï¼Œä½¿ç”¨ä½¿ç”¨vueçš„æ’ä»¶ï¼Œéƒ½éœ€è¦è°ƒç”¨Vue.use()</span></span><br><span class="line">Vue.use(VueRouter)</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>åˆ›å»ºè·¯ç”±è§„åˆ™æ•°ç»„</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"/find"</span>,</span><br><span class="line">    <span class="attr">component</span>: Find</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"/my"</span>,</span><br><span class="line">    <span class="attr">component</span>: My</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"/part"</span>,</span><br><span class="line">    <span class="attr">component</span>: Part</span><br><span class="line">  }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>åˆ›å»ºè·¯ç”±å¯¹è±¡ -  ä¼ å…¥è§„åˆ™</li>
</ul>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter({</span><br><span class="line">  routes</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>å…³è”åˆ°vueå®ä¾‹</li>
</ul>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">  router</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>componentsæ¢æˆrouter-view</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ä¸‹è½½è·¯ç”±æ¨¡å—, ç¼–å†™å¯¹åº”è§„åˆ™æ³¨å…¥åˆ°vueå®ä¾‹ä¸Š, ä½¿ç”¨router-viewæŒ‚è½½ç‚¹æ˜¾ç¤ºåˆ‡æ¢çš„è·¯ç”±</p>
<p>æ€»ç»“2: ä¸€åˆ‡éƒ½å›´ç»•ç€hashå€¼å˜åŒ–ä¸ºå‡†</p>
</blockquote>
<h2 id="2-vueè·¯ç”±-å£°æ˜å¼å¯¼èˆª"><a href="#2-vueè·¯ç”±-å£°æ˜å¼å¯¼èˆª" class="headerlink" title="2. vueè·¯ç”± - å£°æ˜å¼å¯¼èˆª"></a>2. vueè·¯ç”± - å£°æ˜å¼å¯¼èˆª</h2><h3 id="2-0-å£°æ˜å¼å¯¼èˆª-åŸºç¡€ä½¿ç”¨"><a href="#2-0-å£°æ˜å¼å¯¼èˆª-åŸºç¡€ä½¿ç”¨" class="headerlink" title="2.0 å£°æ˜å¼å¯¼èˆª - åŸºç¡€ä½¿ç”¨"></a>2.0 å£°æ˜å¼å¯¼èˆª - åŸºç¡€ä½¿ç”¨</h3><blockquote>
<p>ç›®æ ‡: å¯ç”¨å…¨å±€ç»„ä»¶router-linkæ¥æ›¿ä»£aæ ‡ç­¾</p>
</blockquote>
<ol>
<li> vue-routeræä¾›äº†ä¸€ä¸ªå…¨å±€ç»„ä»¶ router-link</li>
<li>router-linkå®è´¨ä¸Šæœ€ç»ˆä¼šæ¸²æŸ“æˆaé“¾æ¥ toå±æ€§ç­‰ä»·äºæä¾› hrefå±æ€§(toæ— éœ€#)</li>
<li>router-linkæä¾›äº†å£°æ˜å¼å¯¼èˆªé«˜äº®çš„åŠŸèƒ½(è‡ªå¸¦ç±»å)</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class="footer_wrap"&gt;</span><br><span class="line">      &lt;router-link to="/find"&gt;å‘ç°éŸ³ä¹&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link to="/my"&gt;æˆ‘çš„éŸ³ä¹&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link to="/part"&gt;æœ‹å‹&lt;/router-link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="top"&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* çœç•¥äº† å…¶ä»–æ ·å¼ */</span><br><span class="line">.footer_wrap .router-link-active{</span><br><span class="line">  color: white;</span><br><span class="line">  background: black;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: é“¾æ¥å¯¼èˆª, ç”¨router-linké…åˆto, å®ç°ç‚¹å‡»åˆ‡æ¢è·¯ç”±</p>
</blockquote>
<h3 id="2-1-å£°æ˜å¼å¯¼èˆª-è·³è½¬ä¼ å‚"><a href="#2-1-å£°æ˜å¼å¯¼èˆª-è·³è½¬ä¼ å‚" class="headerlink" title="2.1 å£°æ˜å¼å¯¼èˆª - è·³è½¬ä¼ å‚"></a>2.1 å£°æ˜å¼å¯¼èˆª - è·³è½¬ä¼ å‚</h3><blockquote>
<p>ç›®æ ‡: åœ¨è·³è½¬è·¯ç”±æ—¶, å¯ä»¥ç»™è·¯ç”±å¯¹åº”çš„ç»„ä»¶å†…ä¼ å€¼</p>
</blockquote>
<p>åœ¨router-linkä¸Šçš„toå±æ€§ä¼ å€¼, è¯­æ³•æ ¼å¼å¦‚ä¸‹</p>
<ul>
<li><p>/path?å‚æ•°å=å€¼</p>
</li>
<li><p>/path/å€¼ â€“ éœ€è¦è·¯ç”±å¯¹è±¡æå‰é…ç½® path: â€œ/path/å‚æ•°åâ€</p>
</li>
</ul>
<p>å¯¹åº”é¡µé¢ç»„ä»¶æ¥æ”¶ä¼ é€’è¿‡æ¥çš„å€¼</p>
<ul>
<li><p>$route.query.å‚æ•°å</p>
</li>
<li><p>$route.params.å‚æ•°å</p>
</li>
</ul>
<ol>
<li><p>åˆ›å»ºcomponents/Part.vue - å‡†å¤‡æ¥æ”¶è·¯ç”±ä¸Šä¼ é€’çš„å‚æ•°å’Œå€¼</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;å…³æ³¨æ˜æ˜Ÿ&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;å‘ç°ç²¾å½©&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;å¯»æ‰¾ä¼™ä¼´&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;åŠ å…¥æˆ‘ä»¬&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;äººå: {{ $route.query.name }} -- {{ $route.params.username }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>è·¯ç”±å®šä¹‰</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"/part"</span>,</span><br><span class="line">    <span class="attr">component</span>: Part</span><br><span class="line">  },</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"/part/:username"</span>, <span class="comment">// æœ‰:çš„è·¯å¾„ä»£è¡¨è¦æ¥æ”¶å…·ä½“çš„å€¼</span></span><br><span class="line">    <span class="attr">component</span>: Part</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¯¼èˆªè·³è½¬, ä¼ å€¼ç»™MyGoods.vueç»„ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;router-link to="/part?name=å°ä¼ "&gt;æœ‹å‹-å°ä¼ &lt;/router-link&gt;</span><br><span class="line">&lt;router-link to="/part/å°æ™º"&gt;æœ‹å‹-å°æ™º&lt;/router-link&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p>æ€»ç»“: </p>
<p>?key=value   ç”¨$route.query.key å–å€¼</p>
<p>/å€¼   æå‰åœ¨è·¯ç”±è§„åˆ™/path/:key  ç”¨$route.params.key  å–å€¼</p>
</blockquote>
<h2 id="3-vueè·¯ç”±-é‡å®šå‘å’Œæ¨¡å¼"><a href="#3-vueè·¯ç”±-é‡å®šå‘å’Œæ¨¡å¼" class="headerlink" title="3. vueè·¯ç”± - é‡å®šå‘å’Œæ¨¡å¼"></a>3. vueè·¯ç”± - é‡å®šå‘å’Œæ¨¡å¼</h2><h3 id="3-0-è·¯ç”±-é‡å®šå‘"><a href="#3-0-è·¯ç”±-é‡å®šå‘" class="headerlink" title="3.0 è·¯ç”± - é‡å®šå‘"></a>3.0 è·¯ç”± - é‡å®šå‘</h3><blockquote>
<p>ç›®æ ‡: åŒ¹é…pathå, å¼ºåˆ¶åˆ‡æ¢åˆ°ç›®æ ‡pathä¸Š</p>
</blockquote>
<ul>
<li>ç½‘é¡µæ‰“å¼€urlé»˜è®¤hashå€¼æ˜¯/è·¯å¾„</li>
<li>redirectæ˜¯è®¾ç½®è¦é‡å®šå‘åˆ°å“ªä¸ªè·¯ç”±è·¯å¾„</li>
</ul>
<p>ä¾‹å¦‚: ç½‘é¡µé»˜è®¤æ‰“å¼€, åŒ¹é…è·¯ç”±â€/â€œ, å¼ºåˆ¶åˆ‡æ¢åˆ°â€/findâ€ä¸Š</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"/"</span>, <span class="comment">// é»˜è®¤hashå€¼è·¯å¾„</span></span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">"/find"</span> <span class="comment">// é‡å®šå‘åˆ°/find</span></span><br><span class="line">    <span class="comment">// æµè§ˆå™¨urlä¸­#åçš„è·¯å¾„è¢«æ”¹å˜æˆ/find-é‡æ–°åŒ¹é…æ•°ç»„è§„åˆ™</span></span><br><span class="line">  }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å¼ºåˆ¶é‡å®šå‘å, è¿˜ä¼šé‡æ–°æ¥æ•°ç»„é‡ŒåŒ¹é…ä¸€æ¬¡è§„åˆ™</p>
</blockquote>
<h3 id="3-1-è·¯ç”±-404é¡µé¢"><a href="#3-1-è·¯ç”±-404é¡µé¢" class="headerlink" title="3.1 è·¯ç”± - 404é¡µé¢"></a>3.1 è·¯ç”± - 404é¡µé¢</h3><blockquote>
<p>ç›®æ ‡: å¦‚æœè·¯ç”±hashå€¼, æ²¡æœ‰å’Œæ•°ç»„é‡Œè§„åˆ™åŒ¹é…</p>
</blockquote>
<p>é»˜è®¤ç»™ä¸€ä¸ª404é¡µé¢</p>
<p>è¯­æ³•: è·¯ç”±æœ€å, pathåŒ¹é…*(ä»»æ„è·¯å¾„) â€“ å‰é¢ä¸åŒ¹é…å°±å‘½ä¸­æœ€åè¿™ä¸ª, æ˜¾ç¤ºå¯¹åº”ç»„ä»¶é¡µé¢</p>
<ol>
<li><p>åˆ›å»ºNotFoundé¡µé¢</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;img src="../assets/404.png" alt=""&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    img{</span><br><span class="line">        width: 100%;</span><br><span class="line">    }</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨main.js - ä¿®æ”¹è·¯ç”±é…ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> NotFound <span class="keyword">from</span> <span class="string">'@/views/NotFound'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...çœç•¥äº†å…¶ä»–é…ç½®</span></span><br><span class="line">  <span class="comment">// 404åœ¨æœ€å(è§„åˆ™æ˜¯ä»å‰å¾€åé€ä¸ªæ¯”è¾ƒpath)</span></span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"*"</span>,</span><br><span class="line">    <span class="attr">component</span>: NotFound</span><br><span class="line">  }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p>æ€»ç»“: å¦‚æœè·¯ç”±æœªå‘½ä¸­ä»»ä½•è§„åˆ™, ç»™å‡ºä¸€ä¸ªå…œåº•çš„404é¡µé¢</p>
</blockquote>
<h3 id="3-2-è·¯ç”±-æ¨¡å¼è®¾ç½®"><a href="#3-2-è·¯ç”±-æ¨¡å¼è®¾ç½®" class="headerlink" title="3.2 è·¯ç”± - æ¨¡å¼è®¾ç½®"></a>3.2 è·¯ç”± - æ¨¡å¼è®¾ç½®</h3><blockquote>
<p>ç›®æ ‡: ä¿®æ”¹è·¯ç”±åœ¨åœ°å€æ çš„æ¨¡å¼</p>
</blockquote>
<p>hashè·¯ç”±ä¾‹å¦‚:  <a href="http://localhost:8080/#/home">http://localhost:8080/#/home</a></p>
<p>historyè·¯ç”±ä¾‹å¦‚: <a href="http://localhost:8080/home">http://localhost:8080/home</a>  (ä»¥åä¸Šçº¿éœ€è¦æœåŠ¡å™¨ç«¯æ”¯æŒ, å¦åˆ™æ‰¾çš„æ˜¯æ–‡ä»¶å¤¹)</p>
<p><a href="https://router.vuejs.org/zh/api/#mode">æ¨¡å¼æ–‡æ¡£</a></p>
<p>router/index.js</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter({</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">"history"</span> <span class="comment">// æ‰“åŒ…ä¸Šçº¿åéœ€è¦åå°æ”¯æŒ, æ¨¡å¼æ˜¯hash</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h2 id="4-vueè·¯ç”±-ç¼–ç¨‹å¼å¯¼èˆª"><a href="#4-vueè·¯ç”±-ç¼–ç¨‹å¼å¯¼èˆª" class="headerlink" title="4. vueè·¯ç”± - ç¼–ç¨‹å¼å¯¼èˆª"></a>4. vueè·¯ç”± - ç¼–ç¨‹å¼å¯¼èˆª</h2><blockquote>
<p>ç”¨JSä»£ç è·³è½¬, å£°æ˜å¼å¯¼èˆªç”¨aæ ‡ç­¾</p>
</blockquote>
<h3 id="4-0-ç¼–ç¨‹å¼å¯¼èˆª-åŸºç¡€ä½¿ç”¨"><a href="#4-0-ç¼–ç¨‹å¼å¯¼èˆª-åŸºç¡€ä½¿ç”¨" class="headerlink" title="4.0 ç¼–ç¨‹å¼å¯¼èˆª - åŸºç¡€ä½¿ç”¨"></a>4.0 ç¼–ç¨‹å¼å¯¼èˆª - åŸºç¡€ä½¿ç”¨</h3><blockquote>
<p>ç›®æ ‡: ç”¨JSä»£ç æ¥è¿›è¡Œè·³è½¬</p>
</blockquote>
<p>è¯­æ³•:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$router.push({</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"è·¯ç”±è·¯å¾„"</span>, <span class="comment">// éƒ½å» router/index.jså®šä¹‰</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">"è·¯ç”±å"</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<ol>
<li>main.js - è·¯ç”±æ•°ç»„é‡Œ, ç»™è·¯ç”±èµ·åå­—</li>
</ol>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    path: <span class="string">"/find"</span>,</span><br><span class="line">    name: <span class="string">"Find"</span>,</span><br><span class="line">    component: Find</span><br><span class="line">},</span><br><span class="line">{</span><br><span class="line">    path: <span class="string">"/my"</span>,</span><br><span class="line">    name: <span class="string">"My"</span>,</span><br><span class="line">    component: My</span><br><span class="line">},</span><br><span class="line">{</span><br><span class="line">    path: <span class="string">"/part"</span>,</span><br><span class="line">    name: <span class="string">"Part"</span>,</span><br><span class="line">    component: Part</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>App.vue - æ¢æˆspan é…åˆjsçš„ç¼–ç¨‹å¼å¯¼èˆªè·³è½¬</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class="footer_wrap"&gt;</span><br><span class="line">      &lt;span @click="btn('/find', 'Find')"&gt;å‘ç°éŸ³ä¹&lt;/span&gt;</span><br><span class="line">      &lt;span @click="btn('/my', 'My')"&gt;æˆ‘çš„éŸ³ä¹&lt;/span&gt;</span><br><span class="line">      &lt;span @click="btn('/part', 'Part')"&gt;æœ‹å‹&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="top"&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: ç¼–ç¨‹å¼å¯¼èˆª - jsæ–¹å¼è·³è½¬è·¯ç”±</span><br><span class="line">// è¯­æ³•:</span><br><span class="line">// this.$router.push({path: "è·¯ç”±è·¯å¾„"})</span><br><span class="line">// this.$router.push({name: "è·¯ç”±å"})</span><br><span class="line">// æ³¨æ„:</span><br><span class="line">// è™½ç„¶ç”¨nameè·³è½¬, ä½†æ˜¯urlçš„hashå€¼è¿˜æ˜¯åˆ‡æ¢pathè·¯å¾„å€¼</span><br><span class="line">// åœºæ™¯:</span><br><span class="line">// æ–¹ä¾¿ä¿®æ”¹: nameè·¯ç”±å(åœ¨é¡µé¢ä¸Šçœ‹ä¸è§éšä¾¿å®šä¹‰)</span><br><span class="line">// pathå¯ä»¥åœ¨urlçš„hashå€¼çœ‹åˆ°(å°½é‡ç¬¦åˆç»„å†…è§„èŒƒ)</span><br><span class="line">export default {</span><br><span class="line">  methods: {</span><br><span class="line">    btn(targetPath, targetName){</span><br><span class="line">      // æ–¹å¼1: pathè·³è½¬</span><br><span class="line">      this.$router.push({</span><br><span class="line">        // path: targetPath,</span><br><span class="line">        name: targetName</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="4-1-ç¼–ç¨‹å¼å¯¼èˆª-è·³è½¬ä¼ å‚"><a href="#4-1-ç¼–ç¨‹å¼å¯¼èˆª-è·³è½¬ä¼ å‚" class="headerlink" title="4.1 ç¼–ç¨‹å¼å¯¼èˆª - è·³è½¬ä¼ å‚"></a>4.1 ç¼–ç¨‹å¼å¯¼èˆª - è·³è½¬ä¼ å‚</h3><blockquote>
<p>ç›®æ ‡: JSè·³è½¬è·¯ç”±, ä¼ å‚</p>
</blockquote>
<p>è¯­æ³• query / params ä»»é€‰ ä¸€ä¸ª</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$router.push({</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"è·¯ç”±è·¯å¾„"</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">"è·¯ç”±å"</span>,</span><br><span class="line">    <span class="attr">query</span>: {</span><br><span class="line">    	<span class="string">"å‚æ•°å"</span>: å€¼</span><br><span class="line">    }</span><br><span class="line">    <span class="attr">params</span>: {</span><br><span class="line">		<span class="string">"å‚æ•°å"</span>: å€¼</span><br><span class="line">    }</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹åº”è·¯ç”±æ¥æ”¶   $route.params.å‚æ•°å   å–å€¼</span></span><br><span class="line"><span class="comment">// å¯¹åº”è·¯ç”±æ¥æ”¶   $route.query.å‚æ•°å    å–å€¼</span></span><br></pre></td></tr></tbody></table></figure>

<p>==æ ¼å¤–æ³¨æ„: ä½¿ç”¨pathä¼šè‡ªåŠ¨å¿½ç•¥params==</p>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class="footer_wrap"&gt;</span><br><span class="line">      &lt;span @click="btn('/find', 'Find')"&gt;å‘ç°éŸ³ä¹&lt;/span&gt;</span><br><span class="line">      &lt;span @click="btn('/my', 'My')"&gt;æˆ‘çš„éŸ³ä¹&lt;/span&gt;</span><br><span class="line">      &lt;span @click="oneBtn"&gt;æœ‹å‹-å°ä¼ &lt;/span&gt;</span><br><span class="line">      &lt;span @click="twoBtn"&gt;æœ‹å‹-å°æ™º&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="top"&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: ç¼–ç¨‹å¼å¯¼èˆª - è·³è½¬è·¯ç”±ä¼ å‚</span><br><span class="line">// æ–¹å¼1:</span><br><span class="line">// params =&gt; $route.params.å‚æ•°å</span><br><span class="line">// æ–¹å¼2:</span><br><span class="line">// query =&gt; $route.query.å‚æ•°å</span><br><span class="line">// é‡è¦: pathä¼šè‡ªåŠ¨å¿½ç•¥params</span><br><span class="line">// æ¨è: name+queryæ–¹å¼ä¼ å‚</span><br><span class="line">// æ³¨æ„: å¦‚æœå½“å‰urlä¸Š"hashå€¼å’Œ?å‚æ•°"ä¸ä½ è¦è·³è½¬åˆ°çš„"hashå€¼å’Œ?å‚æ•°"ä¸€è‡´, çˆ†å‡ºå†—ä½™å¯¼èˆªçš„é—®é¢˜, ä¸ä¼šè·³è½¬è·¯ç”±</span><br><span class="line">export default {</span><br><span class="line">  methods: {</span><br><span class="line">    btn(targetPath, targetName){</span><br><span class="line">      // æ–¹å¼1: pathè·³è½¬</span><br><span class="line">      this.$router.push({</span><br><span class="line">        // path: targetPath,</span><br><span class="line">        name: targetName</span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    oneBtn(){</span><br><span class="line">      this.$router.push({</span><br><span class="line">        name: 'Part',</span><br><span class="line">        params: {</span><br><span class="line">          username: 'å°ä¼ '</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    twoBtn(){</span><br><span class="line">      this.$router.push({</span><br><span class="line">        name: 'Part',</span><br><span class="line">        query: {</span><br><span class="line">          name: 'å°æ™º'</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ä¼ å‚2ç§æ–¹å¼</p>
<p>queryæ–¹å¼ </p>
<p>paramsæ–¹å¼ </p>
</blockquote>
<h2 id="5-vueè·¯ç”±-åµŒå¥—å’Œå®ˆå«"><a href="#5-vueè·¯ç”±-åµŒå¥—å’Œå®ˆå«" class="headerlink" title="5. vueè·¯ç”± - åµŒå¥—å’Œå®ˆå«"></a>5. vueè·¯ç”± - åµŒå¥—å’Œå®ˆå«</h2><h3 id="5-0-vueè·¯ç”±-è·¯ç”±åµŒå¥—"><a href="#5-0-vueè·¯ç”±-è·¯ç”±åµŒå¥—" class="headerlink" title="5.0 vueè·¯ç”± - è·¯ç”±åµŒå¥—"></a>5.0 vueè·¯ç”± - è·¯ç”±åµŒå¥—</h3><blockquote>
<p>ç›®æ ‡: åœ¨ç°æœ‰çš„ä¸€çº§è·¯ç”±ä¸‹, å†åµŒå¥—äºŒçº§è·¯ç”±</p>
</blockquote>
<p><a href="https://music.163.com/">äºŒçº§è·¯ç”±ç¤ºä¾‹-ç½‘æ˜“äº‘éŸ³ä¹-å‘ç°éŸ³ä¹ä¸‹</a></p>
<p>router-viewåµŒå¥—æ¶æ„å›¾</p>
<ol>
<li><p>åˆ›å»ºéœ€è¦ç”¨çš„æ‰€æœ‰ç»„ä»¶</p>
<p>src/views/Find.vue â€“ å‘ç°éŸ³ä¹é¡µ</p>
<p>src/views/My.vue â€“ æˆ‘çš„éŸ³ä¹é¡µ</p>
<p>src/views/Second/Recommend.vue  â€“ å‘ç°éŸ³ä¹é¡µ / æ¨èé¡µé¢</p>
<p>src/views/Second/Ranking.vue      â€“ å‘ç°éŸ³ä¹é¡µ / æ’è¡Œæ¦œé¡µé¢</p>
<p>src/views/Second/SongList.vue     â€“ å‘ç°éŸ³ä¹é¡µ / æ­Œå•é¡µé¢</p>
</li>
<li><p>main.jsâ€“ ç»§ç»­é…ç½®2çº§è·¯ç”±</p>
<p>ä¸€çº§è·¯ç”±pathä»/å¼€å§‹å®šä¹‰</p>
<p>äºŒçº§è·¯ç”±å¾€åpathç›´æ¥å†™åå­—, æ— éœ€/å¼€å¤´</p>
<p>åµŒå¥—è·¯ç”±åœ¨ä¸Šçº§è·¯ç”±çš„childrenæ•°ç»„é‡Œç¼–å†™è·¯ç”±ä¿¡æ¯å¯¹è±¡</p>
</li>
<li><p>è¯´æ˜ï¼š</p>
<p>App.vueçš„router-viewè´Ÿè´£å‘ç°éŸ³ä¹å’Œæˆ‘çš„éŸ³ä¹é¡µé¢, åˆ‡æ¢</p>
<p>Find.vueçš„çš„router-viewè´Ÿè´£å‘ç°éŸ³ä¹ä¸‹çš„, ä¸‰ä¸ªé¡µé¢, åˆ‡æ¢</p>
</li>
</ol>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210116162013983.png" alt="image-20210116162013983"></p>
<ol>
<li>é…ç½®äºŒçº§å¯¼èˆªå’Œæ ·å¼(==å¯ç›´æ¥å¤åˆ¶==) - åœ¨Find.vueä¸­</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- &lt;p&gt;æ¨è&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;æ’è¡Œæ¦œ&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;æ­Œå•&lt;/p&gt; --&gt;</span><br><span class="line">    &lt;div class="nav_main"&gt;</span><br><span class="line">      &lt;router-link to="/find/recommend"&gt;æ¨è&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link to="/find/ranking"&gt;æ’è¡Œæ¦œ&lt;/router-link&gt;</span><br><span class="line">      &lt;router-link to="/find/songlist"&gt;æ­Œå•&lt;/router-link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div style="1px solid red;"&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.nav_main {</span><br><span class="line">  background-color: red;</span><br><span class="line">  color: white;</span><br><span class="line">  padding: 10px 0;</span><br><span class="line">}</span><br><span class="line">.nav_main a {</span><br><span class="line">  text-align: center;</span><br><span class="line">  text-decoration: none;</span><br><span class="line">  color: white;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin: 7px 17px 0;</span><br><span class="line">  padding: 0px 15px 2px 15px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  border-radius: 20px;</span><br><span class="line">}</span><br><span class="line">.nav_main a:hover {</span><br><span class="line">  background-color: brown;</span><br><span class="line">}</span><br><span class="line">.nav_main .router-link-active{</span><br><span class="line">  background-color: brown;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>é…ç½®è·¯ç”±è§„åˆ™-äºŒçº§è·¯ç”±å±•ç¤º</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// ...çœç•¥å…¶ä»–</span></span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">"/find"</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">"Find"</span>,</span><br><span class="line">    <span class="attr">component</span>: Find,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">"recommend"</span>,</span><br><span class="line">        <span class="attr">component</span>: Recommend</span><br><span class="line">      },</span><br><span class="line">      {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">"ranking"</span>,</span><br><span class="line">        <span class="attr">component</span>: Ranking</span><br><span class="line">      },</span><br><span class="line">      {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">"songlist"</span>,</span><br><span class="line">        <span class="attr">component</span>: SongList</span><br><span class="line">      }</span><br><span class="line">    ]</span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// ...çœç•¥å…¶ä»–</span></span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>è¯´æ˜ï¼š</li>
</ol>
<ul>
<li><p>App.vue, å¤–å±‚çš„router-viewè´Ÿè´£å‘ç°éŸ³ä¹å’Œæˆ‘çš„éŸ³ä¹é¡µé¢åˆ‡æ¢</p>
</li>
<li><p>Find.vue å†…å±‚çš„router-viewè´Ÿè´£å‘ç°éŸ³ä¹ä¸‹çš„å­tabå¯¹åº”çš„ç»„ä»¶åˆ‡æ¢</p>
</li>
</ul>
<ol start="4">
<li>è¿è¡Œ - ç‚¹å‡»å¯¼èˆªè§‚å¯ŸåµŒå¥—è·¯ç”±åœ¨å“ªé‡Œå±•ç¤º</li>
</ol>
<blockquote>
<p>æ€»ç»“: åµŒå¥—è·¯ç”±, æ‰¾å‡†åœ¨å“ªä¸ªé¡µé¢é‡Œå†™router-viewå’Œå¯¹åº”è§„åˆ™é‡Œå†™children</p>
</blockquote>
<h3 id="5-1-å£°æ˜å¯¼èˆª-ç±»ååŒºåˆ«"><a href="#5-1-å£°æ˜å¯¼èˆª-ç±»ååŒºåˆ«" class="headerlink" title="5.1 å£°æ˜å¯¼èˆª - ç±»ååŒºåˆ«"></a>5.1 å£°æ˜å¯¼èˆª - ç±»ååŒºåˆ«</h3><blockquote>
<p>ç›®æ ‡: router-linkè‡ªå¸¦çš„2ä¸ªç±»åçš„åŒºåˆ«æ˜¯ä»€ä¹ˆ</p>
</blockquote>
<p>è§‚å¯Ÿè·¯ç”±åµŒå¥—å¯¼èˆªçš„æ ·å¼</p>
<ul>
<li><p>router-link-exact-active  (ç²¾ç¡®åŒ¹é…) urlä¸­hashå€¼è·¯å¾„, ä¸hrefå±æ€§å€¼å®Œå…¨ç›¸åŒ, è®¾ç½®æ­¤ç±»å</p>
</li>
<li><p>router-link-active             (æ¨¡ç³ŠåŒ¹é…) urlä¸­hashå€¼,    åŒ…å«hrefå±æ€§å€¼è¿™ä¸ªè·¯å¾„</p>
</li>
</ul>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210512102829250.png" alt="image-20210512102829250"></p>
<h3 id="5-2-å…¨å±€å‰ç½®å®ˆå«"><a href="#5-2-å…¨å±€å‰ç½®å®ˆå«" class="headerlink" title="5.2 å…¨å±€å‰ç½®å®ˆå«"></a>5.2 å…¨å±€å‰ç½®å®ˆå«</h3><blockquote>
<p>ç›®æ ‡: è·¯ç”±è·³è½¬ä¹‹å‰, å…ˆæ‰§è¡Œä¸€æ¬¡å‰ç½®å®ˆå«å‡½æ•°, åˆ¤æ–­æ˜¯å¦å¯ä»¥æ­£å¸¸è·³è½¬</p>
</blockquote>
<p>ä½¿ç”¨ä¾‹å­: åœ¨è·³è½¬è·¯ç”±å‰, åˆ¤æ–­ç”¨æˆ·ç™»é™†äº†æ‰èƒ½å»&lt;æˆ‘çš„éŸ³ä¹&gt;é¡µé¢, æœªç™»å½•å¼¹çª—æç¤ºå›åˆ°å‘ç°éŸ³ä¹é¡µé¢</p>
<ol>
<li>åœ¨è·¯ç”±å¯¹è±¡ä¸Šä½¿ç”¨å›ºå®šæ–¹æ³•beforeEach</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç›®æ ‡: è·¯ç”±å®ˆå«</span></span><br><span class="line"><span class="comment">// åœºæ™¯: å½“ä½ è¦å¯¹è·¯ç”±æƒé™åˆ¤æ–­æ—¶</span></span><br><span class="line"><span class="comment">// è¯­æ³•: router.beforeEach((to, from, next)=&gt;{//è·¯ç”±è·³è½¬"ä¹‹å‰"å…ˆæ‰§è¡Œè¿™é‡Œ, å†³å®šæ˜¯å¦è·³è½¬})</span></span><br><span class="line"><span class="comment">// å‚æ•°1: è¦è·³è½¬åˆ°çš„è·¯ç”± (è·¯ç”±å¯¹è±¡ä¿¡æ¯)    ç›®æ ‡</span></span><br><span class="line"><span class="comment">// å‚æ•°2: ä»å“ªé‡Œè·³è½¬çš„è·¯ç”± (è·¯ç”±å¯¹è±¡ä¿¡æ¯)  æ¥æº</span></span><br><span class="line"><span class="comment">// å‚æ•°3: å‡½æ•°ä½“ - next()æ‰ä¼šè®©è·¯ç”±æ­£å¸¸çš„è·³è½¬åˆ‡æ¢, next(false)åœ¨åŸåœ°åœç•™, next("å¼ºåˆ¶ä¿®æ”¹åˆ°å¦ä¸€ä¸ªè·¯ç”±è·¯å¾„ä¸Š")</span></span><br><span class="line"><span class="comment">// æ³¨æ„: å¦‚æœä¸è°ƒç”¨next, é¡µé¢ç•™åœ¨åŸåœ°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¾‹å­: åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•, æ˜¯å¦å†³å®šå»"æˆ‘çš„éŸ³ä¹"/my</span></span><br><span class="line"><span class="keyword">const</span> isLogin = <span class="literal">true</span>; <span class="comment">// ç™»å½•çŠ¶æ€(æœªç™»å½•)</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (to.path === <span class="string">"/my"</span> &amp;&amp; isLogin === <span class="literal">false</span>) {</span><br><span class="line">    alert(<span class="string">"è¯·ç™»å½•"</span>)</span><br><span class="line">    next(<span class="literal">false</span>) <span class="comment">// é˜»æ­¢è·¯ç”±è·³è½¬</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    next() <span class="comment">// æ­£å¸¸æ”¾è¡Œ</span></span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: next()æ”¾è¡Œ, next(false)ç•™åœ¨åŸåœ°ä¸è·³è½¬è·¯ç”±, next(pathè·¯å¾„)å¼ºåˆ¶æ¢æˆå¯¹åº”pathè·¯å¾„è·³è½¬</p>
</blockquote>
<h2 id="è¡¥å……çŸ¥è¯†"><a href="#è¡¥å……çŸ¥è¯†" class="headerlink" title="è¡¥å……çŸ¥è¯†"></a>è¡¥å……çŸ¥è¯†</h2><h2 id="1-vantç»„ä»¶åº“"><a href="#1-vantç»„ä»¶åº“" class="headerlink" title="1. vantç»„ä»¶åº“"></a>1. vantç»„ä»¶åº“</h2><h3 id="1-0-vantç»„ä»¶åº“-ä»‹ç»"><a href="#1-0-vantç»„ä»¶åº“-ä»‹ç»" class="headerlink" title="1.0 vantç»„ä»¶åº“-ä»‹ç»"></a>1.0 vantç»„ä»¶åº“-ä»‹ç»</h3><blockquote>
<p>ç›®æ ‡: vantæ˜¯ä¸€ä¸ªè½»é‡ã€å¯é çš„ç§»åŠ¨ç«¯ Vue ç»„ä»¶åº“, å¼€ç®±å³ç”¨</p>
</blockquote>
<p><a href="https://vant-contrib.gitee.io/vant/#/zh-CN/">vantå®˜ç½‘</a></p>
<p>ç‰¹ç‚¹:</p>
<ul>
<li>æä¾› 60 å¤šä¸ªé«˜è´¨é‡ç»„ä»¶ï¼Œè¦†ç›–ç§»åŠ¨ç«¯å„ç±»åœºæ™¯</li>
<li>æ€§èƒ½æä½³ï¼Œç»„ä»¶å¹³å‡ä½“ç§¯ä¸åˆ° 1kb</li>
<li>å®Œå–„çš„ä¸­è‹±æ–‡æ–‡æ¡£å’Œç¤ºä¾‹</li>
<li>æ”¯æŒ Vue 2 &amp; Vue 3</li>
<li>æ”¯æŒæŒ‰éœ€å¼•å…¥å’Œä¸»é¢˜å®šåˆ¶</li>
</ul>
<h3 id="1-1-å…¨éƒ¨å¼•å…¥"><a href="#1-1-å…¨éƒ¨å¼•å…¥" class="headerlink" title="1.1 å…¨éƒ¨å¼•å…¥"></a>1.1 å…¨éƒ¨å¼•å…¥</h3><blockquote>
<p>ç›®æ ‡: çœ‹å®˜ç½‘æ–‡æ¡£, ä¸‹è½½, å¼•å…¥vantç»„ä»¶åº“</p>
</blockquote>
<p>å…¨éƒ¨å¼•å…¥, å¿«é€Ÿå¼€å§‹:<a href="https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart">https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart</a></p>
<p>1.å…¨éƒ¨å¼•å…¥, å¿«é€Ÿå¼€å§‹: <a href="https://vant-contrib.gitee.io/vant/">https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart</a></p>
<p>2.ä¸‹è½½Vantç»„ä»¶åº“åˆ°å½“å‰é¡¹ç›®ä¸­</p>
<p>3.åœ¨main.jsä¸­å…¨å±€å¯¼å…¥æ‰€æœ‰ç»„ä»¶,</p>
<p>4.ä½¿ç”¨æŒ‰é’®ç»„ä»¶ â€“ ä½œä¸ºç¤ºèŒƒçš„ä¾‹å­</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210512103112221.png" alt="image-20210512103112221"></p>
<ol>
<li><p>ä¸‹è½½vantç»„ä»¶åº“åˆ°å½“å‰é¡¹ç›®ä¸­</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add vant -D</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¯¼å…¥æ‰€æœ‰ç»„ä»¶, åœ¨main.jsä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Vant <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'vant/lib/index.css'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Vant);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä½¿ç”¨æŒ‰é’®ç»„ä»¶</p>
<p><a href="https://vant-contrib.gitee.io/vant/#/zh-CN/button">https://vant-contrib.gitee.io/vant/#/zh-CN/button</a></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;van-button type="primary"&gt;ä¸»è¦æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">&lt;van-button type="info"&gt;ä¿¡æ¯æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">&lt;van-button type="default"&gt;é»˜è®¤æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">&lt;van-button type="warning"&gt;è­¦å‘ŠæŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">&lt;van-button type="danger"&gt;å±é™©æŒ‰é’®&lt;/van-button&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-2-æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥"><a href="#1-2-æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥" class="headerlink" title="1.2 æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥"></a>1.2 æ‰‹åŠ¨æŒ‰éœ€å¼•å…¥</h3><blockquote>
<p>ç›®æ ‡: åªå¼•å…¥ä½¿ç”¨çš„ç»„ä»¶</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210512103145759.png" alt="image-20210512103145759"></p>
<p>1.æ‰‹åŠ¨å•ç‹¬å¼•å…¥, å¿«é€Ÿå¼€å§‹: <a href="https://vant-contrib.gitee.io/vant/">https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart</a></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼2: æ‰‹åŠ¨ æŒ‰éœ€å¼•å…¥</span></span><br><span class="line"><span class="comment">// import Button from 'vant/lib/button'; // buttonç»„ä»¶</span></span><br><span class="line"><span class="comment">// import 'vant/lib/button/style'; // buttonæ ·å¼</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>æ³¨å†Œ</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// components: { // æ‰‹åŠ¨æ³¨å†Œç»„ä»¶å</span></span><br><span class="line"><span class="comment">//   // VanButton: Button</span></span><br><span class="line"><span class="comment">//   // ç­‰ä»·çš„</span></span><br><span class="line"><span class="comment">//   [Button.name]: Button</span></span><br><span class="line"><span class="comment">// }</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>ä½¿ç”¨</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;van-button type="primary"&gt;ä¸»è¦æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">&lt;van-button type="info"&gt;ä¿¡æ¯æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">&lt;van-button type="default"&gt;é»˜è®¤æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">&lt;van-button type="warning"&gt;è­¦å‘ŠæŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">&lt;van-button type="danger"&gt;å±é™©æŒ‰é’®&lt;/van-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-3-è‡ªåŠ¨æŒ‰éœ€å¼•å…¥"><a href="#1-3-è‡ªåŠ¨æŒ‰éœ€å¼•å…¥" class="headerlink" title="1.3 è‡ªåŠ¨æŒ‰éœ€å¼•å…¥"></a>1.3 è‡ªåŠ¨æŒ‰éœ€å¼•å…¥</h3><blockquote>
<p>ç›®æ ‡: æŒ‰éœ€åŠ è½½ç»„ä»¶</p>
</blockquote>
<p><a href="https://github.com/ant-design/babel-plugin-import">babel-plugin-import</a> æ˜¯ä¸€æ¬¾ babel æ’ä»¶ï¼Œå®ƒä¼šåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°† import çš„å†™æ³•è‡ªåŠ¨è½¬æ¢ä¸ºæŒ‰éœ€å¼•å…¥çš„æ–¹å¼ã€‚</p>
<ol>
<li><p>å®‰è£…æ’ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add babel-plugin-import -D</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨babelé…ç½®æ–‡ä»¶é‡Œ (babel.config.js)</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [<span class="string">'import'</span>, {</span><br><span class="line">      <span class="attr">libraryName</span>: <span class="string">'vant'</span>,</span><br><span class="line">      <span class="attr">libraryDirectory</span>: <span class="string">'es'</span>,</span><br><span class="line">      <span class="attr">style</span>: <span class="literal">true</span></span><br><span class="line">    }, <span class="string">'vant'</span>]</span><br><span class="line">  ]</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å…¨å±€æ³¨å†Œ - ä¼šè‡ªåŠ¨æŒ‰éœ€å¼•å…¥</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼1: å…¨å±€ - è‡ªåŠ¨æŒ‰éœ€å¼•å…¥vantç»„ä»¶</span></span><br><span class="line"><span class="comment">// (1): ä¸‹è½½ babel-plugin-import</span></span><br><span class="line"><span class="comment">// (2): babel.config.js - æ·»åŠ å®˜ç½‘è¯´çš„é…ç½® (ä¸€å®šè¦é‡å¯æœåŠ¡å™¨)</span></span><br><span class="line"><span class="comment">// (3): main.js æŒ‰éœ€å¼•å…¥æŸä¸ªç»„ä»¶, Vue.useå…¨å±€æ³¨å†Œ - æŸä¸ª.vueæ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨vantç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> { Button } <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line">Vue.use(Button) <span class="comment">// Buttonç»„ä»¶å…¨å±€æ³¨å†Œ, çœŸæ­£æ³¨å†Œçš„ç»„ä»¶åVanButton</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-4-å¼¹å‡ºæ¡†ä½¿ç”¨"><a href="#1-4-å¼¹å‡ºæ¡†ä½¿ç”¨" class="headerlink" title="1.4 å¼¹å‡ºæ¡†ä½¿ç”¨"></a>1.4 å¼¹å‡ºæ¡†ä½¿ç”¨</h3><blockquote>
<p>ç›®æ ‡: ä½¿ç”¨å¼¹å‡ºæ¡†ç»„ä»¶</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210512103419096.png" alt="image-20210512103419096"></p>
<p><a href="https://vant-contrib.gitee.io/vant/#/zh-CN/dialog">https://vant-contrib.gitee.io/vant/#/zh-CN/dialog</a></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-button type="primary" @click="btn"&gt;ä¸»è¦æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">    &lt;van-button type="info"&gt;ä¿¡æ¯æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">    &lt;van-button type="default"&gt;é»˜è®¤æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">    &lt;van-button type="warning"&gt;è­¦å‘ŠæŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">    &lt;van-button type="danger"&gt;å±é™©æŒ‰é’®&lt;/van-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// æ–¹å¼2: æ‰‹åŠ¨ æŒ‰éœ€å¼•å…¥</span><br><span class="line">// import Button from 'vant/lib/button'; // buttonç»„ä»¶</span><br><span class="line">// import 'vant/lib/button/style'; // buttonæ ·å¼</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: ä½¿ç”¨å¼¹å‡ºæ¡†</span><br><span class="line">// 1. æ‰¾åˆ°vantæ–‡æ¡£</span><br><span class="line">// 2. å¼•å…¥</span><br><span class="line">// 3. åœ¨æ°å½“æ—¶æœº, è°ƒç”¨æ­¤å‡½æ•° (è¿˜å¯ä»¥ç”¨ç»„ä»¶çš„ç”¨æ³•)</span><br><span class="line">import { Dialog } from "vant";</span><br><span class="line">export default {</span><br><span class="line">  // components: { // æ‰‹åŠ¨æ³¨å†Œç»„ä»¶å</span><br><span class="line">  //   // VanButton: Button</span><br><span class="line">  //   // ç­‰ä»·çš„</span><br><span class="line">  //   [Button.name]: Button</span><br><span class="line">  // }</span><br><span class="line">  methods: {</span><br><span class="line">    btn() {</span><br><span class="line">      Dialog({ message: "æç¤º", showCancelButton: true }); // è°ƒç”¨æ‰§è¡Œæ—¶, é¡µé¢å°±ä¼šå‡ºå¼¹å‡ºæ¡†</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-5-è¡¨å•ä½¿ç”¨"><a href="#1-5-è¡¨å•ä½¿ç”¨" class="headerlink" title="1.5 è¡¨å•ä½¿ç”¨"></a>1.5 è¡¨å•ä½¿ç”¨</h3><blockquote>
<p>ç›®æ ‡: ä½¿ç”¨vantç»„ä»¶é‡Œçš„è¡¨å•ç»„ä»¶</p>
</blockquote>
<p><a href="https://vant-contrib.gitee.io/vant/#/zh-CN/form">https://vant-contrib.gitee.io/vant/#/zh-CN/form</a></p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210512103438024.png" alt="image-20210512103438024"></p>
<p>è¡¨å•éªŒè¯è§„åˆ™:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/image-20210321220047052.png" alt="image-20210321220047052"></p>
<h2 id="ä»Šæ—¥æ€»ç»“"><a href="#ä»Šæ—¥æ€»ç»“" class="headerlink" title="ä»Šæ—¥æ€»ç»“"></a>ä»Šæ—¥æ€»ç»“</h2><ul>
<li><p><input disabled="" type="checkbox">  äº†è§£ä»€ä¹ˆæ˜¯å•é¡µé¢åº”ç”¨, ä»¥åŠä¼˜ç¼ºç‚¹</p>
</li>
<li><p><input disabled="" type="checkbox">  äº†è§£ç»„ä»¶åˆ†ä¸ºå“ª2ç±»</p>
</li>
<li><p><input disabled="" type="checkbox">  è·¯ç”±çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ, å°±æ˜¯æ”¹å˜urlçš„hashå€¼, è®©jsç›‘å¬åˆ°, æ ¹æ®é…ç½®å¥½çš„æ˜ å°„è§„åˆ™, æ˜¾ç¤ºä¸åŒçš„DOM</p>
</li>
<li><p><input disabled="" type="checkbox">  å£°æ˜å¼å¯¼èˆªrouter-linkæ˜¯vue-routerå°è£…æ³¨å†Œçš„å…¨å±€ç»„ä»¶, æ¯”aæ ‡ç­¾å¥½å¤„æ˜¯å°è£…äº†é«˜äº®ç±»åç­‰</p>
</li>
<li><p><input disabled="" type="checkbox">  ç¼–ç¨‹å¼å¯¼èˆª, ç”¨Vueå†…ç½®çš„æ–¹æ³•æ”¹å˜æµè§ˆå™¨url,  this.$router.push() </p>
</li>
<li><p><input disabled="" type="checkbox">  è·¯ç”±è·³è½¬ä¼ å‚æ€»ç»“</p>
<table>
<thead>
<tr>
<th>è·³è½¬æ–¹æ³•</th>
<th>ä¼ å‚ä½ç½®</th>
<th>è·¯ç”±è§„åˆ™</th>
<th>æ¥æ”¶</th>
</tr>
</thead>
<tbody><tr>
<td><router-link to="/path?key=value"></router-link></td>
<td>/path?key=value</td>
<td>æ— ç‰¹æ®Š</td>
<td>$route.query.key</td>
</tr>
<tr>
<td><router-link to="/path/å€¼"></router-link></td>
<td>/path/å€¼</td>
<td>/path/:key</td>
<td>$route.params.key</td>
</tr>
<tr>
<td>this.$router.push({path: â€œ/pathâ€, query: {key: value}})</td>
<td>queryçš„å¯¹è±¡</td>
<td>æ— ç‰¹æ®Š</td>
<td>$route.query.key</td>
</tr>
<tr>
<td>this.$router.push({name: â€œcomâ€, params: {key: value})</td>
<td>paramsçš„å¯¹è±¡</td>
<td>è·¯ç”±è§„åˆ™éœ€è¦nameå±æ€§</td>
<td>$route.params.key(æ³¨æ„,è¿™ç§åœ¨å†…å­˜ä¸­ä¿å­˜)</td>
</tr>
</tbody></table>
<p>==æ— è®ºå“ªç§æ ¼å¼, å£°æ˜å¼å’Œç¼–ç¨‹å¼éƒ½æ˜¯é€šç”¨çš„, ä¿è¯è·¯å¾„å’Œå‚æ•°æ ¼å¼æ­£ç¡®å°±ok==</p>
</li>
<li><p><input disabled="" type="checkbox">  è·¯ç”±é‡å®šå‘, åœ¨é…ç½®é¡¹ä¸Šä½¿ç”¨redirectåˆ°ç›®æ ‡è·¯ç”±è·¯å¾„</p>
</li>
<li><p><input disabled="" type="checkbox">  åµŒå¥—è·¯ç”±å°±æ˜¯åœ¨æŸä¸ªä¸€çº§é¡µé¢ä¸­, åœ¨åµŒå¥—ä¸€å¥—è·¯ç”±åˆ‡æ¢ç³»ç»Ÿ</p>
<ul>
<li>åœ¨è·¯ç”±è§„åˆ™é‡Œæ‰¾åˆ°ä¸€çº§è·¯ç”±, å†™children: []  æ³¨æ„: é™¤äº†ç¬¬ä¸€å±‚ä¸€çº§è·¯ç”±pathå†™/, å­çš„å¼€å¤´éƒ½æ— éœ€/</li>
<li>è·³è½¬æ—¶, è¦å»çš„è·¯ç”±è·¯å¾„ä»ä¸€çº§å¼€å§‹å†™</li>
<li>å¿ƒä¸­è¦åšåˆ° æµè§ˆå™¨url è·¯ç”±å€¼  å’Œè·¯ç”±è§„åˆ™é‡Œçš„path å¯¹ä¸Šå³å¯</li>
</ul>
</li>
<li><p><input disabled="" type="checkbox">  å…¨å±€è·¯ç”±å‰ç½®å®ˆå« - å¯ä»¥åœ¨è·³è½¬è·¯ç”±å‰è¿›è¡Œä¸€äº›æƒé™åˆ¤æ–­</p>
</li>
<li><p><input disabled="" type="checkbox">  vantç»„ä»¶åº“æ˜¯å°è£…å¥½çš„ç»„ä»¶, æˆ‘ä»¬æ‹¿æ¥å³å¯ä½¿ç”¨</p>
</li>
</ul>
<h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><h3 id="1-è·¯ç”±ä¹‹é—´æ˜¯æ€ä¹ˆè·³è½¬çš„ï¼Ÿæœ‰å“ªäº›æ–¹å¼"><a href="#1-è·¯ç”±ä¹‹é—´æ˜¯æ€ä¹ˆè·³è½¬çš„ï¼Ÿæœ‰å“ªäº›æ–¹å¼" class="headerlink" title="1. è·¯ç”±ä¹‹é—´æ˜¯æ€ä¹ˆè·³è½¬çš„ï¼Ÿæœ‰å“ªäº›æ–¹å¼"></a>1. è·¯ç”±ä¹‹é—´æ˜¯æ€ä¹ˆè·³è½¬çš„ï¼Ÿæœ‰å“ªäº›æ–¹å¼</h3><p>1ã€<router-link to="éœ€è¦è·³è½¬åˆ°é¡µé¢çš„è·¯å¾„"></router-link></p>
<p> 2ã€this.$router.push()è·³è½¬åˆ°æŒ‡å®šçš„urlï¼Œå¹¶åœ¨historyä¸­æ·»åŠ è®°å½•ï¼Œç‚¹å‡»å›é€€è¿”å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢</p>
<p> 3ã€this.$router.replace()è·³è½¬åˆ°æŒ‡å®šçš„urlï¼Œä½†æ˜¯historyä¸­ä¸ä¼šæ·»åŠ è®°å½•ï¼Œç‚¹å‡»å›é€€åˆ°ä¸Šä¸Šä¸ªé¡µé¢</p>
<p> 4ã€this.$touter.go(n)å‘å‰æˆ–è€…åè·³è½¬nä¸ªé¡µé¢ï¼Œnå¯ä»¥æ˜¯æ­£æ•°ä¹Ÿå¯ä»¥æ˜¯è´Ÿæ•°</p>
<h3 id="2-vue-routeræ€ä¹ˆé…ç½®è·¯ç”±"><a href="#2-vue-routeræ€ä¹ˆé…ç½®è·¯ç”±" class="headerlink" title="2. vue-routeræ€ä¹ˆé…ç½®è·¯ç”±"></a>2. vue-routeræ€ä¹ˆé…ç½®è·¯ç”±</h3><p>åœ¨vueä¸­é…ç½®è·¯ç”±åˆ†ä¸º5ä¸ªæ­¥éª¤ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li>å¼•å…¥vue-router.js</li>
<li>é…ç½®è·¯ç”±pathå’Œç»„ä»¶, å’Œç”Ÿæˆè·¯ç”±å¯¹è±¡</li>
<li>æŠŠè·¯ç”±å¯¹è±¡é…ç½®åˆ°new Vueä¸­routeré€‰é¡¹ä¸‹</li>
<li>é¡µé¢ä½¿ç”¨<router-view></router-view> æ‰¿è½½è·¯ç”±</li>
<li><router-link to="è¦è·³è½¬çš„è·¯å¾„"></router-link> è®¾ç½®è·¯ç”±å¯¼èˆª(å£°æ˜å¼å¯¼èˆªæ–¹å¼/ç¼–ç¨‹å¼è·³è½¬)</li>
</ol>
<h3 id="3-vue-routerçš„é’©å­å‡½æ•°éƒ½æœ‰å“ªäº›"><a href="#3-vue-routerçš„é’©å­å‡½æ•°éƒ½æœ‰å“ªäº›" class="headerlink" title="3. vue-routerçš„é’©å­å‡½æ•°éƒ½æœ‰å“ªäº›"></a>3. vue-routerçš„é’©å­å‡½æ•°éƒ½æœ‰å“ªäº›</h3><p>å…³äºvue-routerä¸­çš„é’©å­å‡½æ•°ä¸»è¦åˆ†ä¸º3ç±»</p>
<p>å…¨å±€é’©å­å‡½æ•°è¦åŒ…å«beforeEach</p>
<p>  beforeEachå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°,åˆ†åˆ«æ˜¯:</p>
<p>â€‹    to:routerå³å°†è¿›å…¥çš„è·¯ç”±å¯¹è±¡<br>â€‹    from:å½“å‰å¯¼èˆªå³å°†ç¦»å¼€çš„è·¯ç”±<br>â€‹    next:function,è¿›è¡Œç®¡é“ä¸­çš„ä¸€ä¸ªé’©å­ï¼Œå¦‚æœæ‰§è¡Œå®Œäº†,åˆ™å¯¼èˆªçš„çŠ¶æ€å°±æ˜¯ confirmed ï¼ˆç¡®è®¤çš„ï¼‰å¦åˆ™ä¸ºfalse,ç»ˆæ­¢å¯¼èˆªã€‚</p>
<p>å•ç‹¬è·¯ç”±ç‹¬äº«ç»„ä»¶</p>
<p>â€‹    beforeEnter,</p>
<p>ç»„ä»¶å†…é’©å­</p>
<p>   beforeRouterEnterï¼Œ<br>   beforeRouterUpdate,<br>   beforeRouterLeave</p>
<h3 id="4-è·¯ç”±ä¼ å€¼çš„æ–¹å¼æœ‰å“ªå‡ ç§"><a href="#4-è·¯ç”±ä¼ å€¼çš„æ–¹å¼æœ‰å“ªå‡ ç§" class="headerlink" title="4. è·¯ç”±ä¼ å€¼çš„æ–¹å¼æœ‰å“ªå‡ ç§"></a>4. è·¯ç”±ä¼ å€¼çš„æ–¹å¼æœ‰å“ªå‡ ç§</h3><p>Vue-routerä¼ å‚å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œåˆ†åˆ«æ˜¯ç¼–ç¨‹å¼çš„å¯¼èˆª router.pushå’Œå£°æ˜å¼çš„å¯¼èˆª</p>
<p>router.push</p>
<p>   å­—ç¬¦ä¸²ï¼šç›´æ¥ä¼ é€’è·¯ç”±åœ°å€ï¼Œä½†æ˜¯ä¸èƒ½ä¼ é€’å‚æ•°</p>
<p>â€‹          this.$router.push(â€œhomeâ€)</p>
<p>â€‹    å¯¹è±¡ï¼š</p>
<p>â€‹      å‘½åè·¯ç”±  è¿™ç§æ–¹å¼ä¼ é€’å‚æ•°ï¼Œç›®æ ‡é¡µé¢åˆ·æ–°ä¼šæŠ¥é”™ - name+params</p>
<p>â€‹               this.$router.push({name:â€newsâ€,params:{userId:123})</p>
<p>â€‹      æŸ¥è¯¢å‚æ•°  å’Œpathé…å¯¹çš„æ˜¯query</p>
<p>â€‹               this.$router.push({path:â€/newsâ€™,query:{uersId:123}) </p>
<p>â€‹      æ¥æ”¶å‚æ•°  this.$route.query</p>
<p>å£°æ˜å¼å¯¼èˆª</p>
<p>â€‹      å­—ç¬¦ä¸² &lt;router-link to:â€newsâ€&gt;</p>
<p>â€‹      å‘½åè·¯ç”± &lt;router-link :to:â€{name:â€™newsâ€™,params:{userid:1111}}â€&gt;</p>
<p>â€‹      è¿˜å¯ä»¥to=â€/path/å€¼â€ - éœ€è¦æå‰åœ¨è·¯ç”± è§„åˆ™é‡Œå€¼ /path/:key</p>
<p>â€‹      æŸ¥è¯¢å‚æ•° <router-link :to="{path:'/news',query:{userId:1111}}"></router-link></p>
<p>â€‹       è¿˜å¯ä»¥to=â€/path?key=value</p>
<h3 id="5-æ€ä¹ˆå®šä¹‰vue-routerçš„åŠ¨æ€è·¯ç”±-æ€ä¹ˆè·å–ä¼ è¿‡æ¥çš„åŠ¨æ€å‚æ•°"><a href="#5-æ€ä¹ˆå®šä¹‰vue-routerçš„åŠ¨æ€è·¯ç”±-æ€ä¹ˆè·å–ä¼ è¿‡æ¥çš„åŠ¨æ€å‚æ•°" class="headerlink" title="5. æ€ä¹ˆå®šä¹‰vue-routerçš„åŠ¨æ€è·¯ç”±?æ€ä¹ˆè·å–ä¼ è¿‡æ¥çš„åŠ¨æ€å‚æ•°?"></a>5. æ€ä¹ˆå®šä¹‰vue-routerçš„åŠ¨æ€è·¯ç”±?æ€ä¹ˆè·å–ä¼ è¿‡æ¥çš„åŠ¨æ€å‚æ•°?</h3><p>   åŠ¨æ€è·¯ç”±æŒ‡çš„å°±æ˜¯pathè·¯å¾„ä¸Šä¼ æ™º, å‰æéœ€è¦è·¯ç”±è§„åˆ™äº†æå‰é…ç½®/path/:keyå, å¯ä»¥å†™å¤šä¸ªç”¨/éš”å¼€, è·å–ä½¿ç”¨$route.params.keyåæ¥æå–å¯¹åº”ç”¨è·¯å¾„ä¼ è¿‡æ¥çš„å€¼</p>
<h3 id="6-Vueçš„è·¯ç”±å®ç°æ¨¡å¼ï¼šhashæ¨¡å¼å’Œhistoryæ¨¡å¼ï¼ˆå¿…ä¼šï¼‰"><a href="#6-Vueçš„è·¯ç”±å®ç°æ¨¡å¼ï¼šhashæ¨¡å¼å’Œhistoryæ¨¡å¼ï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="6. Vueçš„è·¯ç”±å®ç°æ¨¡å¼ï¼šhashæ¨¡å¼å’Œhistoryæ¨¡å¼ï¼ˆå¿…ä¼šï¼‰"></a>6. Vueçš„è·¯ç”±å®ç°æ¨¡å¼ï¼šhashæ¨¡å¼å’Œhistoryæ¨¡å¼ï¼ˆå¿…ä¼šï¼‰</h3><p>hashæ¨¡å¼ï¼šåœ¨æµè§ˆå™¨ä¸­ç¬¦å·â€œ#â€ï¼Œ#ä»¥åŠ#åé¢çš„å­—ç¬¦ç§°ä¹‹ä¸ºhashï¼Œç”¨ window.location.hash è¯»å–ã€‚ç‰¹ç‚¹ï¼šhashè™½ç„¶åœ¨URLä¸­ï¼Œä½†ä¸è¢«åŒ…æ‹¬åœ¨HTTPè¯·æ±‚ä¸­ï¼›ç”¨æ¥æŒ‡å¯¼æµè§ˆå™¨åŠ¨ä½œï¼Œå¯¹æœåŠ¡ç«¯å®‰å…¨æ— ç”¨ï¼Œhashä¸ä¼šé‡åŠ è½½é¡µé¢ã€‚</p>
<p>historyæ¨¡å¼ï¼šhistoryé‡‡ç”¨HTML5çš„æ–°ç‰¹æ€§ï¼›ä¸”æä¾›äº†ä¸¤ä¸ªæ–°æ–¹æ³•ï¼š pushState()ï¼Œ replaceState()å¯ä»¥å¯¹æµè§ˆå™¨å†å²è®°å½•æ ˆè¿›è¡Œä¿®æ”¹ï¼Œä»¥åŠpopStateäº‹ä»¶çš„ç›‘å¬åˆ°çŠ¶æ€å˜æ›´</p>
<h3 id="7-è¯·è¯´å‡ºè·¯ç”±é…ç½®é¡¹å¸¸ç”¨çš„å±æ€§åŠä½œç”¨ï¼ˆå¿…ä¼šï¼‰"><a href="#7-è¯·è¯´å‡ºè·¯ç”±é…ç½®é¡¹å¸¸ç”¨çš„å±æ€§åŠä½œç”¨ï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="7. è¯·è¯´å‡ºè·¯ç”±é…ç½®é¡¹å¸¸ç”¨çš„å±æ€§åŠä½œç”¨ï¼ˆå¿…ä¼šï¼‰"></a>7. è¯·è¯´å‡ºè·¯ç”±é…ç½®é¡¹å¸¸ç”¨çš„å±æ€§åŠä½œç”¨ï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    è·¯ç”±é…ç½®å‚æ•°ï¼š  </p>
<p>â€‹      path : è·³è½¬è·¯å¾„<br>â€‹      component : è·¯å¾„ç›¸å¯¹äºçš„ç»„ä»¶<br>â€‹     name:å‘½åè·¯ç”±<br>â€‹     children:å­è·¯ç”±çš„é…ç½®å‚æ•°(è·¯ç”±åµŒå¥—)<br>â€‹     props:è·¯ç”±è§£è€¦<br>â€‹     redirect : é‡å®šå‘è·¯ç”±</p>
<h3 id="8-ç¼–ç¨‹å¼å¯¼èˆªä½¿ç”¨çš„æ–¹æ³•ä»¥åŠå¸¸ç”¨çš„æ–¹æ³•ï¼ˆå¿…ä¼šï¼‰"><a href="#8-ç¼–ç¨‹å¼å¯¼èˆªä½¿ç”¨çš„æ–¹æ³•ä»¥åŠå¸¸ç”¨çš„æ–¹æ³•ï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="8. ç¼–ç¨‹å¼å¯¼èˆªä½¿ç”¨çš„æ–¹æ³•ä»¥åŠå¸¸ç”¨çš„æ–¹æ³•ï¼ˆå¿…ä¼šï¼‰"></a>8. ç¼–ç¨‹å¼å¯¼èˆªä½¿ç”¨çš„æ–¹æ³•ä»¥åŠå¸¸ç”¨çš„æ–¹æ³•ï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    è·¯ç”±è·³è½¬ ï¼š this.$router.push()<br>â€‹    è·¯ç”±æ›¿æ¢ : this.$router.replace()<br>â€‹    åé€€ï¼š this.$router.back()<br>â€‹    å‰è¿› ï¼šthis.$router.forward()</p>
<h3 id="9-Vueå¦‚ä½•å»é™¤URLä¸­çš„-ï¼ˆå¿…ä¼šï¼‰"><a href="#9-Vueå¦‚ä½•å»é™¤URLä¸­çš„-ï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="9. Vueå¦‚ä½•å»é™¤URLä¸­çš„#ï¼ˆå¿…ä¼šï¼‰"></a>9. Vueå¦‚ä½•å»é™¤URLä¸­çš„#ï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    vue-router é»˜è®¤ä½¿ç”¨ hash æ¨¡å¼ï¼Œæ‰€ä»¥åœ¨è·¯ç”±åŠ è½½çš„æ—¶å€™ï¼Œé¡¹ç›®ä¸­çš„ URL ä¼šè‡ªå¸¦ â€œ#â€ã€‚å¦‚æœä¸æƒ³ä½¿ç”¨ â€œ#â€ï¼Œ å¯ä»¥ä½¿ç”¨ vue-router çš„å¦ä¸€ç§æ¨¡å¼ historyï¼šnew Router ({ mode : â€˜historyâ€™, routes: [ ]})</p>
<p>â€‹    éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬å¯ç”¨ history æ¨¡å¼çš„æ—¶å€™ï¼Œç”±äºæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ä¸€ä¸ªå•é¡µé¢åº”ç”¨ï¼Œæ‰€ä»¥åœ¨è·¯ç”±è·³è½¬çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°è®¿é—®ä¸åˆ°é™æ€èµ„æºè€Œå‡ºç° â€œ404â€ çš„æƒ…å†µï¼Œè¿™æ—¶å€™å°±éœ€è¦æœåŠ¡ç«¯å¢åŠ ä¸€ä¸ªè¦†ç›–æ‰€æœ‰æƒ…å†µçš„å€™é€‰èµ„æºï¼šå¦‚æœ URL åŒ¹é…ä¸åˆ°ä»»ä½•é™æ€èµ„æºï¼Œåˆ™åº”è¯¥è¿”å›åŒä¸€ä¸ª â€œindex.htmlâ€ é¡µé¢ã€‚</p>
<h3 id="10-è¯´ä¸€ä¸‹ä½ åœ¨vueä¸­è¸©è¿‡çš„å‘ï¼ˆå¿…ä¼šï¼‰"><a href="#10-è¯´ä¸€ä¸‹ä½ åœ¨vueä¸­è¸©è¿‡çš„å‘ï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="10. è¯´ä¸€ä¸‹ä½ åœ¨vueä¸­è¸©è¿‡çš„å‘ï¼ˆå¿…ä¼šï¼‰"></a>10. è¯´ä¸€ä¸‹ä½ åœ¨vueä¸­è¸©è¿‡çš„å‘ï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    1ã€ç¬¬ä¸€ä¸ªæ˜¯ç»™å¯¹è±¡æ·»åŠ å±æ€§çš„æ—¶å€™ï¼Œç›´æ¥é€šè¿‡ç»™dataé‡Œé¢çš„å¯¹è±¡æ·»åŠ å±æ€§ç„¶åèµ‹å€¼ï¼Œæ–°æ·»åŠ çš„å±æ€§ä¸æ˜¯å“åº”å¼çš„</p>
<p>â€‹    ã€è§£å†³åŠæ³•ã€‘é€šè¿‡Vue.set(å¯¹è±¡ï¼Œå±æ€§ï¼Œå€¼)è¿™ç§æ–¹å¼å°±å¯ä»¥è¾¾åˆ°ï¼Œå¯¹è±¡æ–°æ·»åŠ çš„å±æ€§æ˜¯å“åº”å¼çš„</p>
<p>2ã€ åœ¨createdæ“ä½œdomçš„æ—¶å€™ï¼Œæ˜¯æŠ¥é”™çš„ï¼Œè·å–ä¸åˆ°domï¼Œè¿™ä¸ªæ—¶å€™å®ä¾‹vueå®ä¾‹æ²¡æœ‰æŒ‚è½½</p>
<p>â€‹    ã€è§£å†³åŠæ³•ã€‘é€šè¿‡ï¼šVue.nextTick(å›è°ƒå‡½æ•°è¿›è¡Œè·å–)</p>
<h3 id="11-routeå’Œ-routerçš„åŒºåˆ«ï¼Ÿ"><a href="#11-routeå’Œ-routerçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="11. $routeå’Œ$routerçš„åŒºåˆ«ï¼Ÿ"></a>11. <strong>$routeå’Œ$routerçš„åŒºåˆ«ï¼Ÿ</strong></h3><p>$routeæ˜¯è·¯ç”±ä¿¡æ¯å¯¹è±¡ï¼ŒåŒ…æ‹¬â€˜pathï¼Œhashï¼Œqueryï¼ŒfullPathï¼Œmatchedï¼Œnameâ€™ç­‰è·¯ç”±ä¿¡æ¯å‚æ•°ï¼›<br>$routeræ˜¯è·¯ç”±å®ä¾‹å¯¹è±¡ï¼ŒåŒ…æ‹¬äº†è·¯ç”±çš„è·³è½¬æ–¹æ³•ï¼Œå®ä¾‹å¯¹è±¡ç­‰</p>
<h2 id="é™„åŠ ç»ƒä¹ -1-åˆ‡æ¢é¡µé¢"><a href="#é™„åŠ ç»ƒä¹ -1-åˆ‡æ¢é¡µé¢" class="headerlink" title="é™„åŠ ç»ƒä¹ _1.åˆ‡æ¢é¡µé¢"></a>é™„åŠ ç»ƒä¹ _1.åˆ‡æ¢é¡µé¢</h2><blockquote>
<p>ç›®çš„: ç‚¹å‡»å¯¼èˆªaæ ‡ç­¾, å®ç°ä¸‹é¢é¡µé¢å†…å®¹çš„åˆ‡æ¢</p>
</blockquote>
<p>å»ºè®®: æ–°åˆå§‹åŒ–ä¸€ä¸ªç©ºç™½çš„é¡¹ç›®æ¥å†™, é¿å…æ–°æ‰‹æ”¾åˆ°ä¸€èµ·, çœ‹çš„ä¹±</p>
<p>è¦æ±‚: ç½‘é¡µæ‰“å¼€é»˜è®¤æ˜¾ç¤º - é¦–é¡µéƒ¨åˆ†</p>
<p>è§„èŒƒ: </p>
<ul>
<li>views/ 4ä¸ªé¡µé¢.vueæ–‡ä»¶</li>
<li>router/index.js - è·¯ç”±é…ç½®</li>
<li>App.vueæ˜¾ç¤º, main.js æ³¨å†Œè·¯ç”±</li>
</ul>
<p>æ•ˆæœ:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/13.5_%E8%AF%BE%E4%B8%8A%E7%BB%83%E4%B9%A0_%E5%AF%BC%E8%88%AA%E5%88%87%E6%8D%A2.gif" alt="13.5_è¯¾ä¸Šç»ƒä¹ _å¯¼èˆªåˆ‡æ¢"></p>
<h2 id="é™„åŠ ç»ƒä¹ -2-äºŒçº§è·¯ç”±åµŒå¥—"><a href="#é™„åŠ ç»ƒä¹ -2-äºŒçº§è·¯ç”±åµŒå¥—" class="headerlink" title="é™„åŠ ç»ƒä¹ _2.äºŒçº§è·¯ç”±åµŒå¥—"></a>é™„åŠ ç»ƒä¹ _2.äºŒçº§è·¯ç”±åµŒå¥—</h2><blockquote>
<p>ç›®æ ‡: å®Œæˆgitæ¼”ç¤ºçš„è·¯ç”±åˆ‡æ¢æ•ˆæœ</p>
</blockquote>
<p>å»ºè®®: å†æ–°å»ºä¸€ä¸ªå·¥ç¨‹æ¥å†™</p>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/14.3_%E8%B7%AF%E7%94%B1%E5%B5%8C%E5%A5%97%E7%BB%83%E4%B9%A0.gif" alt="14.3_è·¯ç”±åµŒå¥—ç»ƒä¹ "></p>
<h2 id="é™„åŠ ç»ƒä¹ -3-tabbaråˆ‡æ¢"><a href="#é™„åŠ ç»ƒä¹ -3-tabbaråˆ‡æ¢" class="headerlink" title="é™„åŠ ç»ƒä¹ _3-tabbaråˆ‡æ¢"></a>é™„åŠ ç»ƒä¹ _3-tabbaråˆ‡æ¢</h2><p>æŠŠä¹‹å‰å†™çš„tabbaræ¡ˆä¾‹(åŸæ¥ç”¨åŠ¨æ€ç»„ä»¶å®ç°)</p>
<p>ç°åœ¨è¯·ç”¨è·¯ç”±å®ç°ç›¸åŒçš„åˆ‡æ¢æ•ˆæœ</p>
<h2 id="ä»Šæ—¥ä½œä¸š"><a href="#ä»Šæ—¥ä½œä¸š" class="headerlink" title="ä»Šæ—¥ä½œä¸š"></a>ä»Šæ—¥ä½œä¸š</h2><h3 id="ä¸‰çº§è·¯ç”±åµŒå¥—"><a href="#ä¸‰çº§è·¯ç”±åµŒå¥—" class="headerlink" title="ä¸‰çº§è·¯ç”±åµŒå¥—"></a>ä¸‰çº§è·¯ç”±åµŒå¥—</h3><p>è¦æ±‚:</p>
<ul>
<li>é»˜è®¤æ˜¾ç¤ºç¬¬ä¸€ä¸ªUI_Routerè·¯ç”±(ä¸€çº§è·¯ç”±) 3ä¸ªç»„ä»¶</li>
<li>ç¬¬äºŒä¸ªç»„ä»¶éœ€è¦åµŒå…¥å¯¼èˆªå’ŒäºŒçº§è·¯ç”± å±•ç¤ºåŒºåŸŸ</li>
<li>Bobä¸‹æ‰éœ€è¦ç¬¬ä¸‰ä¸ªè·¯ç”±åµŒå…¥</li>
</ul>
<p>æç¤º:</p>
<blockquote>
<p>ç‚¹å‡»æŒ‰é’®ä½¿ç”¨ç¼–ç¨‹å¼å¯¼èˆª, å¯ä»¥åœ¨2çº§è·¯ç”±å¯¼èˆªè·¯å¾„(å¸¦2ä¸ª/çš„) å…ˆå†™æˆä¸€ä¸ªæ•°ç»„, éšæœºå–1ä¸ªç„¶åè·³è½¬å³å¯</p>
</blockquote>
<p>é—®é¢˜:</p>
<p>å¯èƒ½ä¼šçˆ†å‡ºè­¦å‘Š, ç¼–ç¨‹å¼å¯¼èˆªå¦‚æœå½“å‰å·²ç»åœ¨è¿™é¡µ, è¿˜æƒ³è·³è½¬å½“å‰è·¯ç”±å°±ä¼šå‡ºä¸ªè­¦å‘Š, æ— éœ€å…³å¿ƒä¸å½±å“åŠŸèƒ½</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/Day05_%E8%AF%BE%E5%90%8E%E4%BD%9C%E4%B8%9A_%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1%E4%BD%9C%E4%B8%9A.gif" alt="Day05_è¯¾åä½œä¸š_åµŒå¥—è·¯ç”±ä½œä¸š"></p>
<p>æ ‡ç­¾å†…å®¹(æœ‰çš„çŸ­è‡ªå·±æ‰‹å†™å§)</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Welcome to the UI-Router Demo<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Use the menu above to navigate. Pay attention to the $state and $stateParams values below.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Click these linksâ€”Alice or Bobâ€”to see a url redirect in action.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>UI-Router Resources<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Source for this Sample<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>GitHub Main Page<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Quick Start<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>In-Depth Guide<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>API Reference<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="é¢å¤–æ‰©å±•"><a href="#é¢å¤–æ‰©å±•" class="headerlink" title="é¢å¤–æ‰©å±•"></a>é¢å¤–æ‰©å±•</h2><h3 id="è·¯ç”±-å·¥ä½œåŸç†æ‰‹å†™"><a href="#è·¯ç”±-å·¥ä½œåŸç†æ‰‹å†™" class="headerlink" title="è·¯ç”± - å·¥ä½œåŸç†æ‰‹å†™"></a>è·¯ç”± - å·¥ä½œåŸç†æ‰‹å†™</h3><blockquote>
<p>ç›®æ ‡: äº†è§£hashæ”¹å˜, å¦‚ä½•æ˜¾ç¤ºä¸åŒçš„ç»„ä»¶çš„è¿‡ç¨‹</p>
</blockquote>
<p>åŸºæœ¬æ€è·¯:</p>
<ol>
<li>ç”¨æˆ·ç‚¹å‡»äº†é¡µé¢ä¸Šçš„aé“¾æ¥</li>
<li>å¯¼è‡´äº† URL åœ°å€æ ä¸­çš„ Hash å€¼å‘ç”Ÿäº†å˜åŒ–</li>
<li>å‰ç«¯jsç›‘å¬äº†åˆ° Hash åœ°å€çš„å˜åŒ–</li>
<li>å‰ç«¯jsæŠŠå½“å‰ Hash åœ°å€å¯¹åº”çš„ç»„ä»¶æ¸²æŸ“éƒ½æµè§ˆå™¨ä¸­</li>
</ol>
<p>å®ç°ç®€å•çš„å‰ç«¯è·¯ç”±:</p>
<ol>
<li><p>src/views/åˆ›å»ºå¹¶åœ¨App.vueé‡Œå¯¼å…¥å’Œæ³¨å†Œç»„ä»¶</p>
<p>MyHome.vue</p>
<p>MyMovie.vue</p>
<p>MyAbout.vue</p>
</li>
</ol>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyHome <span class="keyword">from</span> <span class="string">'@/views/MyHome.vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyMovie <span class="keyword">from</span> <span class="string">'@/views/MyMovie.vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> MyAbout <span class="keyword">from</span> <span class="string">'@/views/MyAbout.vue'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {</span></span><br><span class="line"><span class="javascript">    MyHome,</span></span><br><span class="line"><span class="javascript">    MyMovie,</span></span><br><span class="line"><span class="javascript">    MyAbout,</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>é€šè¿‡åŠ¨æ€ç»„ä»¶, æ§åˆ¶è¦æ˜¾ç¤ºçš„ç»„ä»¶</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;Appç»„ä»¶&lt;/h1&gt;</span><br><span class="line">    &lt;component :is="comName"&gt;&lt;/component&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  // ...çœç•¥å…¶ä»–</span><br><span class="line">  data () {</span><br><span class="line">    return {</span><br><span class="line">      comName: 'MyHome'</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>å£°æ˜ä¸‰ä¸ªå¯¼èˆªé“¾æ¥, ç‚¹å‡»æ—¶ä¿®æ”¹åœ°å€æ çš„ hash å€¼</li>
</ol>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Appç»„ä»¶<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/home"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/movie"</span>&gt;</span>ç”µå½±<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/about"</span>&gt;</span>å…³äº<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">"comName"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li>åœ¨ created ä¸­, ç›‘è§†åœ°å€æ  hash æ—¶çš„å˜åŒ–, ä¸€æ—¦å˜åŒ–, åŠ¨æ€åˆ‡æ¢å±•ç¤ºçš„ç»„ä»¶</li>
</ol>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line">created () {</span><br><span class="line">  <span class="built_in">window</span>.onhashchange = <span class="function">() =&gt;</span> {</span><br><span class="line">    <span class="keyword">switch</span>(location.hash) {</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'#/home'</span>:</span><br><span class="line">        <span class="built_in">this</span>.comName = <span class="string">'MyHome'</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'#/movie'</span>:</span><br><span class="line">        <span class="built_in">this</span>.comName = <span class="string">'MyMovie'</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="string">'#/about'</span>:</span><br><span class="line">        <span class="built_in">this</span>.comName = <span class="string">'MyAbout'</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æ”¹å˜æµè§ˆå™¨urlçš„hashå€¼, JSç›‘å¬åˆ°hashå€¼æ”¹å˜, æŠŠå¯¹åº”çš„ç»„ä»¶æ˜¾ç¤ºåˆ°åŒä¸€ä¸ªæŒ‚è½½ç‚¹</p>
</blockquote>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆè¯†webpack</title>
    <url>/2021/05/14/webpack/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="yarnåŒ…ç®¡ç†å™¨-å¿…é¡»"><a href="#yarnåŒ…ç®¡ç†å™¨-å¿…é¡»" class="headerlink" title="yarnåŒ…ç®¡ç†å™¨(å¿…é¡»)"></a>yarnåŒ…ç®¡ç†å™¨(å¿…é¡»)</h3><p>å¿«é€Ÿã€å¯é ã€å®‰å…¨çš„ä¾èµ–ç®¡ç†å·¥å…·ã€‚å’Œ npm ç±»ä¼¼, éƒ½æ˜¯åŒ…ç®¡ç†å·¥å…·, å¯ä»¥ç”¨äºä¸‹è½½åŒ…, å°±æ˜¯æ¯”npmå¿«</p>
<p>ä¸­æ–‡å®˜ç½‘åœ°å€: <a href="https://yarn.bootcss.com/">https://yarn.bootcss.com/</a></p>
<h3 id="ä¸‹è½½yarn"><a href="#ä¸‹è½½yarn" class="headerlink" title="ä¸‹è½½yarn"></a>ä¸‹è½½yarn</h3><p>ä¸‹è½½åœ°å€:  <a href="https://yarn.bootcss.com/docs/install/#windows-stable">https://yarn.bootcss.com/docs/install/#windows-stable</a> </p>
<ul>
<li><p>windows - è½¯ä»¶åŒ…(åœ¨ç¬”è®°æ–‡ä»¶å¤¹é‡Œ)</p>
</li>
<li><p>mac - é€šè¿‡homebrewå®‰è£…(çœ‹ä¸Šé¢åœ°å€é‡Œ)</p>
<ul>
<li><p>macå¦‚æœæ²¡å®‰è£…è¿‡homeBrewå…ˆè¿è¡Œè¿™ä¸ªå‘½ä»¤</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ /usr/bin/ruby -e <span class="string">"<span class="subst">$(curl -fsSL http://cdn.jsdelivr.net/gh/ineo6/homebrew-install/install)</span>"</span></span><br></pre></td></tr></tbody></table></figure></li>
</ul>
</li>
<li><p>ä¸Šé¢å‘½ä»¤ä¸è¡Œ: è¯•è¯•è¿™ä¸ª: curl -o- -L <a href="https://yarnpkg.com/install.sh">https://yarnpkg.com/install.sh</a> | bash (ç›´æ¥å®‰è£…yarn)</p>
</li>
</ul>
<p>==ä¸è¦å®‰åˆ°å¸¦ä¸­æ–‡çš„è·¯å¾„ä¸‹, å»ºè®®åœ¨Cç›˜/==</p>
<h3 id="ä½¿ç”¨yarn"><a href="#ä½¿ç”¨yarn" class="headerlink" title="ä½¿ç”¨yarn"></a>ä½¿ç”¨yarn</h3><p>ä¸npmç±»ä¼¼, å¯ä»¥è¯•è¯•, æ–°å»ºä¸€ä¸ªç©ºç™½æ–‡ä»¶å¤¹, æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°è¯•ä¸€ä¸‹</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># 1. åˆå§‹åŒ–, å¾—åˆ°package.jsonæ–‡ä»¶(ç»ˆç«¯è·¯å¾„æ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹)</span></span><br><span class="line">$ yarn init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æ·»åŠ ä¾èµ–(ä¸‹åŒ…)</span></span><br><span class="line"><span class="comment"># å‘½ä»¤: yarn add [package]</span></span><br><span class="line"><span class="comment"># å‘½ä»¤: yarn add [package]@[version]</span></span><br><span class="line">$ yarn add jquery</span><br><span class="line">$ yarn add jquery@3.5.1</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ç§»é™¤åŒ…</span></span><br><span class="line"><span class="comment"># å‘½ä»¤: yarn remove [package]</span></span><br><span class="line">$ yarn remove jquery</span><br><span class="line">             </span><br><span class="line"><span class="comment"># 4. å®‰è£…é¡¹ç›®å…¨éƒ¨ä¾èµ–(ä¸€èˆ¬æ‹¿åˆ°åˆ«äººçš„é¡¹ç›®æ—¶, ç¼ºå°‘node_modules)          </span></span><br><span class="line">yarn</span><br><span class="line"><span class="comment"># ä¼šæ ¹æ®å½“å‰é¡¹ç›®package.jsonè®°å½•çš„åŒ…åå’Œç‰ˆæœ¬, å…¨éƒ¨ä¸‹è½½åˆ°å½“å‰å·¥ç¨‹ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 5. å…¨å±€</span></span><br><span class="line"><span class="comment"># å®‰è£…: yarn global add [package]</span></span><br><span class="line"><span class="comment"># å¸è½½: yarn global remove [package]</span></span><br><span class="line"><span class="comment"># æ³¨æ„: globalä¸€å®šåœ¨addå·¦è¾¹</span></span><br><span class="line">$ yarn global add @vue/cli</span><br><span class="line"><span class="comment"># å¦‚ä½•ä½¿ç”¨, ä¸ºå­¦ä¹ vueåšé“ºå«</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="yarnå¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#yarnå¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="yarnå¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>yarnå¯èƒ½é‡åˆ°çš„é—®é¢˜</h3><p>å¦‚æœæŠ¥é”™å‚è€ƒæŠ¥é”™æ–‡æ¡£: <a href="http://itcz_jiaoyu.gitee.io/error/#811">http://itcz_jiaoyu.gitee.io/error/#811</a></p>
<h2 id="çŸ¥è¯†ç‚¹è‡ªæµ‹"><a href="#çŸ¥è¯†ç‚¹è‡ªæµ‹" class="headerlink" title="çŸ¥è¯†ç‚¹è‡ªæµ‹"></a>çŸ¥è¯†ç‚¹è‡ªæµ‹</h2><p>å¯¹è¿™äº›çŸ¥è¯†ç‚¹äº†å¦‚æŒ‡æŒ, å­¦ä¹ ä»Šå¤©çš„å†…å®¹ä¼šè½»æ¾å¾ˆå¤š</p>
<ul>
<li><p><input disabled="" type="checkbox">  ä»€ä¹ˆæ˜¯æ¨¡å—, æ¨¡å—åŒ–å¼€å‘è§„èŒƒ(CommonJS / ES6)</p>
<p>commonJSè§„èŒƒ:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// nodejs - commonJSè§„èŒƒ-è§„å®šäº†å¯¼å‡ºå’Œå¯¼å…¥æ–¹å¼</span></span><br><span class="line"><span class="comment">// å¯¼å‡º module.exports = {}</span></span><br><span class="line"><span class="comment">// å¯¼å…¥ const å˜é‡ = require("æ¨¡å—æ ‡è¯†")</span></span><br></pre></td></tr></tbody></table></figure>

<p>ES6è§„èŒƒ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡º export æˆ–è€… export default {}</span></span><br><span class="line"><span class="comment">// å¯¼å…¥ import å˜é‡å from 'æ¨¡å—æ ‡è¯†'</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p><input disabled="" type="checkbox">  å­—ä½“å›¾æ ‡çš„ä½¿ç”¨</p>
<ol>
<li>å¯ä»¥å»é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“, é€‰ä¸­æƒ³è¦çš„å›¾æ ‡, ç™»å½•å, ç”Ÿæˆcssæ–‡ä»¶å’Œå­—ä½“æ–‡ä»¶</li>
<li>ä¸‹è½½cssæ–‡ä»¶å’Œå­—ä½“æ–‡ä»¶, ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨çº¿åœ°å€</li>
<li>åœ¨è‡ªå·±é¡µé¢ä¸­å¼•å…¥iconfont.css, å¹¶åœ¨æƒ³æ˜¾ç¤ºå­—ä½“å›¾æ ‡çš„æ ‡ç­¾ä¸Šä½¿ç”¨ç±»åå³å¯</li>
</ol>
</li>
<li><p><input disabled="" type="checkbox">  ç®­å¤´å‡½æ•°éå¸¸ç†Ÿç»ƒ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="function">() =&gt;</span> {}   </span><br><span class="line">fn()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn2 = <span class="function">(<span class="params">a, b</span>) =&gt;</span> {<span class="keyword">return</span> a + b} </span><br><span class="line">fn(<span class="number">10</span>, <span class="number">20</span>); <span class="comment">// ç»“æœæ˜¯30</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å½¢å‚åªæœ‰ä¸€ä¸ª()å¯ä»¥çœç•¥</span></span><br><span class="line"><span class="keyword">const</span> fn3 = <span class="function"><span class="params">a</span> =&gt;</span> {<span class="keyword">return</span> a * <span class="number">2</span>}</span><br><span class="line">fn(<span class="number">50</span>); <span class="comment">// ç»“æœæ˜¯100</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“{}çœç•¥returnä¹Ÿçœç•¥, é»˜è®¤è¿”å›ç®­å¤´åè¡¨è¾¾å¼ç»“æœ</span></span><br><span class="line"><span class="keyword">const</span> fn4 = <span class="function"><span class="params">a</span> =&gt;</span> a * <span class="number">2</span>;</span><br><span class="line">fn(<span class="number">50</span>); <span class="comment">// ç»“æœæ˜¯100</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p><input disabled="" type="checkbox">  ä»€ä¹ˆæ˜¯æœåŠ¡å™¨, æœ¬åœ°å¯åŠ¨nodeæœåŠ¡, æœåŠ¡å™¨å’Œæµè§ˆå™¨å…³ç³», æœåŠ¡å™¨ä½œç”¨</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">æœåŠ¡å™¨æ˜¯ä¸€å°æ€§èƒ½é«˜, 24å°æ—¶å¯ä»¥å¼€æœºçš„ç”µè„‘</span><br><span class="line"></span><br><span class="line">æœåŠ¡å™¨å¯ä»¥æä¾›æœåŠ¡(ä¾‹å¦‚: æ–‡ä»¶å­˜å‚¨, ç½‘é¡µæµè§ˆ, èµ„æºè¿”å›)</span><br><span class="line"></span><br><span class="line">åœ¨windowç”µè„‘é‡Œå®‰è£…nodeå, å¯ä»¥ç¼–å†™ä»£ç ç”¨node å¯åŠ¨ä¸€ä¸ªwebæœåŠ¡, æ¥è¯»å–æœ¬åœ°htmlæ–‡ä»¶, è¿”å›ç»™æµè§ˆå™¨æŸ¥çœ‹</span><br><span class="line"></span><br><span class="line">æµè§ˆå™¨ -&gt; è¯·æ±‚èµ„æº -&gt; æœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line">æµè§ˆå™¨ &lt;-  å“åº”æ•°æ® &lt;- æœåŠ¡å™¨</span><br></pre></td></tr></tbody></table></figure></li>
<li><p><input disabled="" type="checkbox">  å¼€å‘ç¯å¢ƒ å’Œ ç”Ÿäº§ç¯å¢ƒ ä»¥åŠè‹±æ–‡â€developmentâ€, â€œproductionâ€ 2ä¸ªå•è¯å°½é‡ä¼šå†™ä¼šè¯»</p>
</li>
<li><p><input disabled="" type="checkbox">  åˆå§‹åŒ–åŒ…ç¯å¢ƒå’Œpackage.jsonæ–‡ä»¶ä½œç”¨</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npmä¸‹è½½çš„åŒ…å’Œå¯¹åº”ç‰ˆæœ¬å·, éƒ½ä¼šè®°å½•åˆ°ä¸‹è½½åŒ…æ—¶ç»ˆç«¯æ‰€åœ¨æ–‡ä»¶å¤¹ä¸‹çš„package.jsonæ–‡ä»¶é‡Œ</span><br></pre></td></tr></tbody></table></figure></li>
<li><p><input disabled="" type="checkbox">  package.jsonä¸­çš„dependencieså’Œ devDependenciesåŒºåˆ«å’Œä½œç”¨</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">* dependencies  åˆ«äººä½¿ç”¨ä½ çš„åŒ…å¿…é¡»ä¸‹è½½çš„ä¾èµ–, æ¯”å¦‚yarn add  jquery</span><br><span class="line"></span><br><span class="line">* devDependencies å¼€å‘ä½ çš„åŒ…éœ€è¦ä¾èµ–çš„åŒ…,  æ¯”å¦‚yarn add webpack  webpack-cli -D (-D ç›¸å½“äº --save-dev)</span><br></pre></td></tr></tbody></table></figure></li>
<li><p><input disabled="" type="checkbox">  ç»ˆç«¯çš„ç†Ÿç»ƒä½¿ç”¨: åˆ‡æ¢è·¯å¾„, æ¸…å±, åŒ…ä¸‹è½½å‘½ä»¤ç­‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">åˆ‡æ¢è·¯å¾„  <span class="built_in">cd</span>  </span><br><span class="line"></span><br><span class="line">æ¸…å± cls æˆ–è€… clear</span><br></pre></td></tr></tbody></table></figure></li>
<li><p><input disabled="" type="checkbox">  å¯¹base64å­—ç¬¦ä¸², å›¾ç‰‡è½¬base64å­—ç¬¦ä¸²äº†è§£</p>
<p>åœ¨çº¿è£…æ¢å›¾ç‰‡<a href="http://tool.chinaz.com/tools/imgtobase/">http://tool.chinaz.com/tools/imgtobase/</a></p>
</li>
</ul>
<h2 id="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"><a href="#ä»Šæ—¥å­¦ä¹ ç›®æ ‡" class="headerlink" title="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"></a>ä»Šæ—¥å­¦ä¹ ç›®æ ‡</h2><ol>
<li><p>èƒ½å¤Ÿç†è§£webpackåŸºæœ¬æ¦‚å¿µå’Œä½œç”¨</p>
</li>
<li><p>èƒ½å¤ŸæŒæ¡webpackä½¿ç”¨æ­¥éª¤</p>
</li>
<li><p>èƒ½å¤Ÿä½¿ç”¨webpackç›¸å…³é…ç½®</p>
</li>
<li><p>èƒ½å¤Ÿä½¿ç”¨webpackå¼€å‘æœåŠ¡å™¨</p>
</li>
<li><p>èƒ½å¤ŸæŸ¥é˜…ä½¿ç”¨webpackä¸­æ–‡æ–‡æ¡£</p>
</li>
</ol>
<h2 id="1-webpackåŸºæœ¬æ¦‚å¿µ"><a href="#1-webpackåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. webpackåŸºæœ¬æ¦‚å¿µ"></a>1. webpackåŸºæœ¬æ¦‚å¿µ</h2><blockquote>
<p>ç›®æ ‡: webpackæœ¬èº«æ˜¯, nodeçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—åŒ…, ç”¨äºæ‰“åŒ…ä»£ç </p>
</blockquote>
<p><a href="https://webpack.docschina.org/">webpackå®˜ç½‘</a></p>
<ul>
<li><p>ç°ä»£ javascript åº”ç”¨ç¨‹åºçš„ <strong>é™æ€æ¨¡å—æ‰“åŒ…å™¨ (module bundler)</strong></p>
</li>
<li><p>ä¸ºè¦å­¦çš„ vue-cli å¼€å‘ç¯å¢ƒåšé“ºå«</p>
</li>
</ul>
<blockquote>
<h3 id="webpackèƒ½åšä»€ä¹ˆ"><a href="#webpackèƒ½åšä»€ä¹ˆ" class="headerlink" title="==webpackèƒ½åšä»€ä¹ˆ=="></a>==webpackèƒ½åšä»€ä¹ˆ==</h3></blockquote>
<p>æŠŠå¾ˆå¤šæ–‡ä»¶æ‰“åŒ…æ•´åˆåˆ°ä¸€èµ·, ç¼©å°é¡¹ç›®ä½“ç§¯, æé«˜åŠ è½½é€Ÿåº¦(<strong>æ¼”ç¤ºå‡†å¤‡å¥½çš„ä¾‹å­</strong>)</p>
<p><img src="/2021/05/14/webpack/image-20210207234927772.png" alt="image-20210207234927772"></p>
<p>å…¶ä¸­åŠŸèƒ½:</p>
<ul>
<li><p>less/sass -&gt; css</p>
</li>
<li><p>ES6/7/8 -&gt; ES5</p>
</li>
<li><p>html/css/js -&gt; å‹ç¼©åˆå¹¶</p>
</li>
</ul>
<h2 id="2-webpackçš„ä½¿ç”¨æ­¥éª¤"><a href="#2-webpackçš„ä½¿ç”¨æ­¥éª¤" class="headerlink" title="2. webpackçš„ä½¿ç”¨æ­¥éª¤"></a>2. webpackçš„ä½¿ç”¨æ­¥éª¤</h2><h3 id="2-0-webpackåŸºç¡€ä½¿ç”¨"><a href="#2-0-webpackåŸºç¡€ä½¿ç”¨" class="headerlink" title="2.0_webpackåŸºç¡€ä½¿ç”¨"></a>2.0_webpackåŸºç¡€ä½¿ç”¨</h3><blockquote>
<p>ç›®æ ‡: æŠŠsrcä¸‹çš„2ä¸ªjsæ–‡ä»¶, æ‰“åŒ…åˆ°1ä¸ªjsä¸­, å¹¶è¾“å‡ºåˆ°é»˜è®¤distç›®å½•ä¸‹</p>
</blockquote>
<p>é»˜è®¤å…¥å£: ./src/index.js</p>
<p>é»˜è®¤å‡ºå£: ./dist/main.js</p>
<p>==æ³¨æ„:è·¯å¾„ä¸Š, æ–‡ä»¶å¤¹, æ–‡ä»¶åä¸èƒ½å«webpack/å…¶ä»–å·²çŸ¥çš„æ¨¡å—å==</p>
<ol>
<li><p>åˆå§‹åŒ–åŒ…ç¯å¢ƒ</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn init</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å®‰è£…ä¾èµ–åŒ…</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn add webpack webpack-cli -D</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é…ç½®scripts(è‡ªå®šä¹‰å‘½ä»¤)</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">scripts: {</span><br><span class="line">	<span class="string">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ–°å»ºç›®å½•src</p>
</li>
<li><p>æ–°å»ºsrc/add/add.js - å®šä¹‰æ±‚å’Œå‡½æ•°å¯¼å‡º</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addFn = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ–°å»ºsrc/index.jså¯¼å…¥ä½¿ç”¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> {addFn} <span class="keyword">from</span> <span class="string">'./add/add'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(addFn(<span class="number">10</span>, <span class="number">20</span>));</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>è¿è¡Œæ‰“åŒ…å‘½ä»¤</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn build</span><br><span class="line"><span class="comment">#æˆ–è€… npm run build</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p>æ€»ç»“: srcå¹¶åˆ—å¤„, ç”Ÿæˆé»˜è®¤distç›®å½•å’Œæ‰“åŒ…åé»˜è®¤main.jsæ–‡ä»¶</p>
</blockquote>
<h3 id="2-1-webpack-æ›´æ–°æ‰“åŒ…"><a href="#2-1-webpack-æ›´æ–°æ‰“åŒ…" class="headerlink" title="2.1_webpack æ›´æ–°æ‰“åŒ…"></a>2.1_webpack æ›´æ–°æ‰“åŒ…</h3><blockquote>
<p>ç›®æ ‡: ä»¥åä»£ç å˜æ›´, å¦‚ä½•é‡æ–°æ‰“åŒ…å‘¢</p>
</blockquote>
<ol>
<li><p>æ–°å»ºsrc/tool/tool.js - å®šä¹‰å¯¼å‡ºæ•°ç»„æ±‚å’Œæ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getArrSum = <span class="function"><span class="params">arr</span> =&gt;</span> arr.reduce(<span class="function">(<span class="params">sum, val</span>) =&gt;</span> sum += val, <span class="number">0</span>)</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>src/index.js - å¯¼å…¥ä½¿ç”¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> {addFn} <span class="keyword">from</span> <span class="string">'./add/add'</span></span><br><span class="line"><span class="keyword">import</span> {getArrSum} <span class="keyword">from</span> <span class="string">'./tool/tool'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(addFn(<span class="number">10</span>, <span class="number">20</span>));</span><br><span class="line"><span class="built_in">console</span>.log(getArrSum([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é‡æ–°æ‰“åŒ…</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn build</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p>æ€»ç»“1: srcä¸‹å¼€å‘ç¯å¢ƒ, distæ˜¯æ‰“åŒ…å, åˆ†åˆ«ç‹¬ç«‹</p>
<p>æ€»ç»“2: æ‰“åŒ…åæ ¼å¼å‹ç¼©, å˜é‡å‹ç¼©ç­‰</p>
</blockquote>
<h2 id="3-webpackçš„é…ç½®"><a href="#3-webpackçš„é…ç½®" class="headerlink" title="3. webpackçš„é…ç½®"></a>3. webpackçš„é…ç½®</h2><h3 id="3-0-webpack-å…¥å£å’Œå‡ºå£"><a href="#3-0-webpack-å…¥å£å’Œå‡ºå£" class="headerlink" title="3.0_webpack-å…¥å£å’Œå‡ºå£"></a>3.0_webpack-å…¥å£å’Œå‡ºå£</h3><blockquote>
<p>ç›®æ ‡: å‘Šè¯‰webpackä»å“ªå¼€å§‹æ‰“åŒ…, æ‰“åŒ…åè¾“å‡ºåˆ°å“ªé‡Œ</p>
</blockquote>
<p>é»˜è®¤å…¥å£: ./src/index.js</p>
<p>é»˜è®¤å‡ºå£: ./dist/main.js</p>
<p>webpacké…ç½® - webpack.config.js(é»˜è®¤)</p>
<ol>
<li>æ–°å»ºsrcå¹¶åˆ—å¤„, webpack.config.js</li>
<li>å¡«å…¥é…ç½®é¡¹</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">    <span class="attr">entry</span>: <span class="string">"./src/main.js"</span>, <span class="comment">// å…¥å£</span></span><br><span class="line">    <span class="attr">output</span>: { </span><br><span class="line">        <span class="attr">path</span>: path.join(__dirname, <span class="string">"dist"</span>), <span class="comment">// å‡ºå£è·¯å¾„</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">"bundle.js"</span> <span class="comment">// å‡ºå£æ–‡ä»¶å</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>ä¿®æ”¹package.json, è‡ªå®šä¹‰æ‰“åŒ…å‘½ä»¤ - è®©webpackä½¿ç”¨é…ç½®æ–‡ä»¶</li>
</ol>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: {</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"webpack"</span></span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li>æ‰“åŒ…è§‚å¯Ÿæ•ˆæœ</li>
</ol>
<h3 id="3-1-æ‰“åŒ…æµç¨‹å›¾"><a href="#3-1-æ‰“åŒ…æµç¨‹å›¾" class="headerlink" title="3.1_æ‰“åŒ…æµç¨‹å›¾"></a>3.1_æ‰“åŒ…æµç¨‹å›¾</h3><p><img src="/2021/05/14/webpack/image-20210421125257233.png" alt="image-20210421125257233"></p>
<p>==é‡ç‚¹: æ‰€æœ‰è¦è¢«æ‰“åŒ…çš„èµ„æºéƒ½è¦è·Ÿå…¥å£äº§ç”Ÿç›´æ¥/é—´æ¥çš„å¼•ç”¨å…³ç³»==</p>
<h3 id="3-2-æ¡ˆä¾‹-webpackéš”è¡Œå˜è‰²"><a href="#3-2-æ¡ˆä¾‹-webpackéš”è¡Œå˜è‰²" class="headerlink" title="3.2_æ¡ˆä¾‹-webpackéš”è¡Œå˜è‰²"></a>3.2_æ¡ˆä¾‹-webpackéš”è¡Œå˜è‰²</h3><blockquote>
<p>ç›®æ ‡: å·¥ç¨‹åŒ–æ¨¡å—åŒ–å¼€å‘å‰ç«¯é¡¹ç›®, webpackä¼šå¯¹ES6æ¨¡å—åŒ–å¤„ç†</p>
</blockquote>
<ol>
<li><p>å›é¡¾ä»0å‡†å¤‡ç¯å¢ƒ</p>
<ul>
<li><p>åˆå§‹åŒ–åŒ…ç¯å¢ƒ</p>
</li>
<li><p>ä¸‹è½½ä¾èµ–åŒ…</p>
</li>
<li><p>é…ç½®è‡ªå®šä¹‰æ‰“åŒ…å‘½ä»¤</p>
</li>
</ul>
</li>
<li><p>ä¸‹è½½jquery, æ–°å»ºpublic/index.html</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn add jquery</span><br></pre></td></tr></tbody></table></figure>



<p><img src="/2021/05/14/webpack/image-20210208100817930.png" alt="image-20210208100817930"></p>
</li>
<li><p>index.html å‡†å¤‡ä¸€äº›li</p>
<ul>
<li>==å› ä¸ºimportè¯­æ³•æµè§ˆå™¨æ”¯æŒæ€§ä¸å¥½, éœ€è¦è¢«webpackè½¬æ¢å, å†ä½¿ç”¨JSä»£ç ==</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ul&gt;li{æˆ‘æ˜¯ç¬¬$ä¸ªli}*10 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬1ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬2ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬3ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬4ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬5ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬6ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬7ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬8ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>æˆ‘æ˜¯ç¬¬9ä¸ªli<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨src/main.jså¼•å…¥jquery</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add jquery</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>src/main.jsä¸­ç¼–å†™éš”è¡Œå˜è‰²ä»£ç </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥jquery</span></span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'jquery'</span></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">  $(<span class="string">'#app li:nth-child(odd)'</span>).css(<span class="string">'color'</span>, <span class="string">'red'</span>)</span><br><span class="line">  $(<span class="string">'#app li:nth-child(even)'</span>).css(<span class="string">'color'</span>, <span class="string">'green'</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ‰§è¡Œæ‰“åŒ…å‘½ä»¤è§‚å¯Ÿæ•ˆæœ</p>
</li>
<li><p>å¯ä»¥åœ¨distä¸‹æŠŠpublic/index.htmlå¼•å…¥è¿‡æ¥</p>
<p><img src="/2021/05/14/webpack/image-20210421125602484.png" alt="image-20210421125602484"></p>
<p>åœ¨index.htmlä¸­==æ‰‹åŠ¨==å¼•å…¥js</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;script src="../dist/bundle.js"&gt;&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p>æ€»ç»“: å‰ç«¯å·¥ç¨‹åŒ–æ¨¡å—åŒ–, éœ€è¦çš„åŒ…yarnä¸‹, è¢«webpackæ‰“åŒ…åå¼•å…¥åˆ°htmlä¸­ä½¿ç”¨</p>
</blockquote>
<h3 id="3-3-æ’ä»¶-è‡ªåŠ¨ç”Ÿæˆhtmlæ–‡ä»¶"><a href="#3-3-æ’ä»¶-è‡ªåŠ¨ç”Ÿæˆhtmlæ–‡ä»¶" class="headerlink" title="3.3_æ’ä»¶-è‡ªåŠ¨ç”Ÿæˆhtmlæ–‡ä»¶"></a>3.3_æ’ä»¶-è‡ªåŠ¨ç”Ÿæˆhtmlæ–‡ä»¶</h3><blockquote>
<p>ç›®æ ‡: html-webpack-pluginæ’ä»¶, è®©webpackæ‰“åŒ…åç”Ÿæˆhtmlæ–‡ä»¶å¹¶è‡ªåŠ¨å¼•å…¥æ‰“åŒ…åçš„js</p>
</blockquote>
<p><a href="https://www.webpackjs.com/plugins/html-webpack-plugin/">html-webpack-pluginæ’ä»¶åœ°å€</a></p>
<ol>
<li><p>ä¸‹è½½æ’ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn add html-webpack-plugin  -D</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>webpack.config.jsé…ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥è‡ªåŠ¨ç”Ÿæˆ html çš„æ’ä»¶</span></span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">    <span class="comment">// ...çœç•¥å…¶ä»–ä»£ç </span></span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="keyword">new</span> HtmlWebpackPlugin({</span><br><span class="line">            <span class="attr">template</span>: <span class="string">'./public/index.html'</span> <span class="comment">// ä»¥æ­¤ä¸ºåŸºå‡†ç”Ÿæˆæ‰“åŒ…åhtmlæ–‡ä»¶</span></span><br><span class="line">        })</span><br><span class="line">    ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é‡æ–°æ‰“åŒ…åè§‚å¯Ÿdistä¸‹æ˜¯å¦å¤šå‡ºhtmlå¹¶è¿è¡Œçœ‹æ•ˆæœ</p>
<p>==æ‰“åŒ…åçš„index.htmlè‡ªåŠ¨å¼•å…¥æ‰“åŒ…åçš„jsæ–‡ä»¶==</p>
</li>
</ol>
<blockquote>
<p>æ€»ç»“: webpackå°±åƒä¸€ä¸ªäºº, webpack.config.jsæ˜¯äººç‰©å±æ€§, ç»™å®ƒç©¿ä»€ä¹ˆè£…å¤‡å®ƒå°±å¹²ä»€ä¹ˆæ´»</p>
</blockquote>
<h3 id="3-4-åŠ è½½å™¨-å¤„ç†cssæ–‡ä»¶é—®é¢˜"><a href="#3-4-åŠ è½½å™¨-å¤„ç†cssæ–‡ä»¶é—®é¢˜" class="headerlink" title="3.4_åŠ è½½å™¨ - å¤„ç†cssæ–‡ä»¶é—®é¢˜"></a>3.4_åŠ è½½å™¨ - å¤„ç†cssæ–‡ä»¶é—®é¢˜</h3><blockquote>
<p>ç›®æ ‡: è‡ªå·±å‡†å¤‡cssæ–‡ä»¶, å¼•å…¥åˆ°webpackå…¥å£, æµ‹è¯•webpackæ˜¯å¦èƒ½æ‰“åŒ…cssæ–‡ä»¶</p>
</blockquote>
<p>1.æ–°å»º - src/css/index.css</p>
<p>2.ç¼–å†™å»é™¤liåœ†ç‚¹æ ·å¼ä»£ç </p>
<p>3.(é‡è¦) ä¸€å®šè¦å¼•å…¥åˆ°å…¥å£æ‰ä¼šè¢«webpackæ‰“åŒ…</p>
<p>4.æ‰§è¡Œæ‰“åŒ…å‘½ä»¤è§‚å¯Ÿæ•ˆæœ</p>
<blockquote>
<p>æ€»ç»“: ä¿å­˜åŸå› , å› ä¸ºwebpacké»˜è®¤åªèƒ½å¤„ç†jsç±»å‹æ–‡ä»¶</p>
</blockquote>
<h3 id="3-5-åŠ è½½å™¨-å¤„ç†cssæ–‡ä»¶"><a href="#3-5-åŠ è½½å™¨-å¤„ç†cssæ–‡ä»¶" class="headerlink" title="3.5_åŠ è½½å™¨ - å¤„ç†cssæ–‡ä»¶"></a>3.5_åŠ è½½å™¨ - å¤„ç†cssæ–‡ä»¶</h3><blockquote>
<p>ç›®æ ‡: loadersåŠ è½½å™¨, å¯è®©webpackå¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶, æ‰“åŒ…åˆ°jsä¸­</p>
</blockquote>
<p>åŸå› : webpacké»˜è®¤åªè®¤è¯† js æ–‡ä»¶å’Œ jsonæ–‡ä»¶</p>
<p><a href="https://webpack.docschina.org/loaders/style-loader/">style-loaderæ–‡æ¡£</a></p>
<p><a href="https://webpack.docschina.org/loaders/css-loader/">css-loaderæ–‡æ¡£</a></p>
<ol>
<li><p>å®‰è£…ä¾èµ–</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">yarn add style-loader css-loader -D</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>webpack.config.js é…ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">    <span class="comment">// ...å…¶ä»–ä»£ç </span></span><br><span class="line">    <span class="attr">module</span>: { </span><br><span class="line">        <span class="attr">rules</span>: [ <span class="comment">// loaderçš„è§„åˆ™</span></span><br><span class="line">          {</span><br><span class="line">            <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">// åŒ¹é…æ‰€æœ‰çš„cssæ–‡ä»¶</span></span><br><span class="line">            <span class="comment">// useæ•°ç»„é‡Œä»å³å‘å·¦è¿è¡Œ</span></span><br><span class="line">            <span class="comment">// å…ˆç”¨ css-loader è®©webpackèƒ½å¤Ÿè¯†åˆ« css æ–‡ä»¶çš„å†…å®¹å¹¶æ‰“åŒ…</span></span><br><span class="line">            <span class="comment">// å†ç”¨ style-loader å°†æ ·å¼, æŠŠcssæ’å…¥åˆ°domä¸­</span></span><br><span class="line">            use: [ <span class="string">"style-loader"</span>, <span class="string">"css-loader"</span>]</span><br><span class="line">          }</span><br><span class="line">        ]</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ–°å»ºsrc/css/li.css - å»æ‰lié»˜è®¤æ ·å¼</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-tag">ul</span>, <span class="selector-tag">li</span>{</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¼•å…¥åˆ°main.js (å› ä¸ºè¿™é‡Œæ˜¯å…¥å£éœ€è¦äº§ç”Ÿå…³ç³», æ‰ä¼šè¢«webpackæ‰¾åˆ°æ‰“åŒ…èµ·æ¥)</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./css/index.css"</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>è¿è¡Œæ‰“åŒ…ådist/index.htmlè§‚å¯Ÿæ•ˆæœå’Œcsså¼•å…¥æƒ…å†µ</p>
</li>
</ol>
<blockquote>
<p>æ€»ç»“: ä¸‡ç‰©çš†æ¨¡å—, å¼•åˆ°å…¥å£, æ‰ä¼šè¢«webpackæ‰“åŒ…, cssæ‰“åŒ…è¿›jsä¸­, ç„¶åè¢«åµŒå…¥åœ¨styleæ ‡ç­¾æ’å…¥domä¸Š</p>
</blockquote>
<h3 id="3-6-åŠ è½½å™¨-å¤„ç†lessæ–‡ä»¶"><a href="#3-6-åŠ è½½å™¨-å¤„ç†lessæ–‡ä»¶" class="headerlink" title="3.6_åŠ è½½å™¨ - å¤„ç†lessæ–‡ä»¶"></a>3.6_åŠ è½½å™¨ - å¤„ç†lessæ–‡ä»¶</h3><blockquote>
<p>ç›®æ ‡: less-loaderè®©webpackå¤„ç†lessæ–‡ä»¶, lessæ¨¡å—ç¿»è¯‘lessä»£ç </p>
</blockquote>
<p><a href="https://webpack.docschina.org/loaders/less-loader/">less-loaderæ–‡æ¡£</a></p>
<ol>
<li><p>ä¸‹è½½ä¾èµ–åŒ…</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn add less less-loader -D</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>webpack.config.js é…ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>: {</span><br><span class="line">  <span class="attr">rules</span>: [ <span class="comment">// loaderçš„è§„åˆ™</span></span><br><span class="line">    <span class="comment">// ...çœç•¥å…¶ä»–</span></span><br><span class="line">    {</span><br><span class="line">    	<span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    	<span class="comment">// ä½¿ç”¨less-loader, è®©webpackå¤„ç†lessæ–‡ä»¶, å†…ç½®è¿˜ä¼šç”¨lessç¿»è¯‘lessä»£ç æˆcsså†…å®¹</span></span><br><span class="line">        use: [ <span class="string">"style-loader"</span>, <span class="string">"css-loader"</span>, <span class="string">'less-loader'</span>]</span><br><span class="line">    }</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>src/less/index.less  - è®¾ç½®liå­—ä½“å¤§å°24px</p>
<figure class="highlight less"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">@size:</span><span class="number">24px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ul</span>, <span class="selector-tag">li</span>{</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="variable">@size</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¼•å…¥åˆ°main.jsä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./less/index.less"</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ‰“åŒ…è¿è¡Œdist/index.html è§‚å¯Ÿæ•ˆæœ</p>
</li>
</ol>
<blockquote>
<p>æ€»ç»“: åªè¦æ‰¾åˆ°å¯¹åº”çš„loaderåŠ è½½å™¨, å°±èƒ½è®©webpackå¤„ç†ä¸åŒç±»å‹æ–‡ä»¶</p>
</blockquote>
<h3 id="3-7-åŠ è½½å™¨-å¤„ç†å›¾ç‰‡æ–‡ä»¶"><a href="#3-7-åŠ è½½å™¨-å¤„ç†å›¾ç‰‡æ–‡ä»¶" class="headerlink" title="3.7_åŠ è½½å™¨ - å¤„ç†å›¾ç‰‡æ–‡ä»¶"></a>3.7_åŠ è½½å™¨ - å¤„ç†å›¾ç‰‡æ–‡ä»¶</h3><blockquote>
<p>ç›®æ ‡: ç”¨asset moduleæ–¹å¼(webpack5ç‰ˆæœ¬æ–°å¢)</p>
</blockquote>
<p><a href="https://webpack.docschina.org/guides/asset-modules/">asset moduleæ–‡æ¡£</a></p>
<p>å¦‚æœä½¿ç”¨çš„æ˜¯webpack5ç‰ˆæœ¬çš„, ç›´æ¥é…ç½®åœ¨webpack.config.js - çš„ rulesé‡Œå³å¯</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif|jpeg)$/i</span>,</span><br><span class="line">    type: <span class="string">'asset'</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœä½ ç”¨çš„æ˜¯webpack4åŠä»¥å‰çš„, è¯·ä½¿ç”¨è€…é‡Œçš„é…ç½®</p>
<p><a href="https://webpack.docschina.org/loaders/url-loader/">url-loaderæ–‡æ¡£</a></p>
<p><a href="https://webpack.docschina.org/loaders/file-loader/">file-loaderæ–‡æ¡£</a></p>
<ol>
<li><p>ä¸‹è½½ä¾èµ–åŒ…</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn add url-loader file-loader -D</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>webpack.config.js é…ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif|jpeg)$/i</span>,</span><br><span class="line">  use: [</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">'url-loader'</span>, <span class="comment">// åŒ¹é…æ–‡ä»¶, å°è¯•è½¬base64å­—ç¬¦ä¸²æ‰“åŒ…åˆ°jsä¸­</span></span><br><span class="line">      <span class="comment">// é…ç½®limit,&nbsp;è¶…è¿‡8k,&nbsp;ä¸è½¬, file-loaderå¤åˆ¶, éšæœºå, è¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">      <span class="attr">options</span>: {</span><br><span class="line">        <span class="attr">limit</span>: <span class="number">8</span> * <span class="number">1024</span>,</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  ],</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å›¾ç‰‡è½¬æˆ base64 å­—ç¬¦ä¸²</p>
<ul>
<li>å¥½å¤„å°±æ˜¯æµè§ˆå™¨ä¸ç”¨å‘è¯·æ±‚äº†ï¼Œç›´æ¥å¯ä»¥è¯»å–</li>
<li>åå¤„å°±æ˜¯å¦‚æœå›¾ç‰‡å¤ªå¤§ï¼Œå†è½¬<code>base64</code>å°±ä¼šè®©å›¾ç‰‡çš„ä½“ç§¯å¢å¤§ 30% å·¦å³</li>
</ul>
</li>
<li><p>src/assets/å‡†å¤‡è€å¸ˆå‘çš„2ä¸ªå›¾æ–‡ä»¶</p>
</li>
<li><p>åœ¨css/less/index.less - æŠŠå°å›¾ç‰‡ç”¨åšèƒŒæ™¯å›¾</p>
<figure class="highlight less"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span>{</span><br><span class="line">    <span class="attribute">background</span>: url(<span class="string">../assets/logo_small.png</span>) no-repeat center;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨src/main.js - æŠŠå¤§å›¾æ’å…¥åˆ°åˆ›å»ºçš„imgæ ‡ç­¾ä¸Š, æ·»åŠ bodyä¸Šæ˜¾ç¤º</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å›¾ç‰‡-ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">import</span> imgUrl <span class="keyword">from</span> <span class="string">'./assets/1.gif'</span></span><br><span class="line"><span class="keyword">const</span> theImg = <span class="built_in">document</span>.createElement(<span class="string">"img"</span>)</span><br><span class="line">theImg.src = imgUrl</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(theImg)</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ‰“åŒ…è¿è¡Œdist/index.htmlè§‚å¯Ÿ2ä¸ªå›¾ç‰‡åŒºåˆ«</p>
</li>
</ol>
<blockquote>
<p>æ€»ç»“:  url-loader æŠŠæ–‡ä»¶è½¬base64 æ‰“åŒ…è¿›jsä¸­, ä¼šæœ‰30%çš„å¢å¤§, file-loader æŠŠæ–‡ä»¶ç›´æ¥å¤åˆ¶è¾“å‡º</p>
</blockquote>
<h3 id="3-8-webpackåŠ è½½æ–‡ä»¶ä¼˜ç¼ºç‚¹"><a href="#3-8-webpackåŠ è½½æ–‡ä»¶ä¼˜ç¼ºç‚¹" class="headerlink" title="3.8_webpackåŠ è½½æ–‡ä»¶ä¼˜ç¼ºç‚¹"></a>3.8_webpackåŠ è½½æ–‡ä»¶ä¼˜ç¼ºç‚¹</h3><p>å›¾ç‰‡è½¬æˆ base64 å­—ç¬¦ä¸²</p>
<ul>
<li>å¥½å¤„å°±æ˜¯æµè§ˆå™¨ä¸ç”¨å‘è¯·æ±‚äº†ï¼Œç›´æ¥å¯ä»¥è¯»å–</li>
<li>åå¤„å°±æ˜¯å¦‚æœå›¾ç‰‡å¤ªå¤§ï¼Œå†è½¬<code>base64</code>å°±ä¼šè®©å›¾ç‰‡çš„ä½“ç§¯å¢å¤§ 30% å·¦å³</li>
</ul>
<h3 id="3-9-åŠ è½½å™¨-å¤„ç†å­—ä½“æ–‡ä»¶"><a href="#3-9-åŠ è½½å™¨-å¤„ç†å­—ä½“æ–‡ä»¶" class="headerlink" title="3.9_åŠ è½½å™¨ - å¤„ç†å­—ä½“æ–‡ä»¶"></a>3.9_åŠ è½½å™¨ - å¤„ç†å­—ä½“æ–‡ä»¶</h3><blockquote>
<p>ç›®æ ‡: ç”¨asset moduleæŠ€æœ¯, asset/resourceç›´æ¥è¾“å‡ºåˆ°distç›®å½•ä¸‹</p>
</blockquote>
<p>webpack5ä½¿ç”¨è¿™ä¸ªé…ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{ <span class="comment">// webpack5é»˜è®¤å†…éƒ¨ä¸è®¤è¯†è¿™äº›æ–‡ä»¶, æ‰€ä»¥å½“åšé™æ€èµ„æºç›´æ¥è¾“å‡ºå³å¯</span></span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(eot|svg|ttf|woff|woff2)$/</span>,</span><br><span class="line">    type: <span class="string">'asset/resource'</span>,</span><br><span class="line">    <span class="attr">generator</span>: {</span><br><span class="line">    	<span class="attr">filename</span>: <span class="string">'font/[name].[hash:6][ext]'</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>webpack4åŠä»¥å‰ä½¿ç”¨ä¸‹é¢çš„é…ç½®</p>
<ol>
<li><p>webpack.config.js - å‡†å¤‡é…ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{ <span class="comment">// å¤„ç†å­—ä½“å›¾æ ‡çš„è§£æ</span></span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(eot|svg|ttf|woff|woff2)$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">loader</span>: <span class="string">'url-loader'</span>,</span><br><span class="line">                <span class="attr">options</span>: {</span><br><span class="line">                    <span class="attr">limit</span>: <span class="number">2</span> * <span class="number">1024</span>,</span><br><span class="line">                    <span class="comment">// é…ç½®è¾“å‡ºçš„æ–‡ä»¶å</span></span><br><span class="line">                    <span class="attr">name</span>: <span class="string">'[name].[ext]'</span>,</span><br><span class="line">                    <span class="comment">// é…ç½®è¾“å‡ºçš„æ–‡ä»¶ç›®å½•</span></span><br><span class="line">                    <span class="attr">outputPath</span>: <span class="string">"fonts/"</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>src/assets/ - æ”¾å…¥å­—ä½“åº“fontsæ–‡ä»¶å¤¹</p>
</li>
<li><p>åœ¨main.jså¼•å…¥iconfont.css</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å­—ä½“å›¾æ ‡æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./assets/fonts/iconfont.css'</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨public/index.htmlä½¿ç”¨å­—ä½“å›¾æ ‡æ ·å¼</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"iconfont icon-weixin"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ‰§è¡Œæ‰“åŒ…å‘½ä»¤-è§‚å¯Ÿæ‰“åŒ…åç½‘é¡µæ•ˆæœ</p>
</li>
</ol>
<blockquote>
<p>æ€»ç»“: url-loaderå’Œfile-loader å¯ä»¥æ‰“åŒ…é™æ€èµ„æºæ–‡ä»¶</p>
</blockquote>
<h3 id="3-10-åŠ è½½å™¨-å¤„ç†é«˜ç‰ˆæœ¬jsè¯­æ³•"><a href="#3-10-åŠ è½½å™¨-å¤„ç†é«˜ç‰ˆæœ¬jsè¯­æ³•" class="headerlink" title="3.10_åŠ è½½å™¨ - å¤„ç†é«˜ç‰ˆæœ¬jsè¯­æ³•"></a>3.10_åŠ è½½å™¨ - å¤„ç†é«˜ç‰ˆæœ¬jsè¯­æ³•</h3><blockquote>
<p>ç›®æ ‡: è®©webpackå¯¹é«˜ç‰ˆæœ¬ çš„jsä»£ç , é™çº§å¤„ç†åæ‰“åŒ…</p>
</blockquote>
<p>å†™ä»£ç æ¼”ç¤º: é«˜ç‰ˆæœ¬çš„jsä»£ç (ç®­å¤´å‡½æ•°), æ‰“åŒ…å, ç›´æ¥åŸå°ä¸åŠ¨æ‰“å…¥äº†jsæ–‡ä»¶ä¸­, é‡åˆ°ä¸€äº›ä½ç‰ˆæœ¬çš„æµè§ˆå™¨å°±ä¼šæŠ¥é”™</p>
<p>åŸå› : <strong>webpack é»˜è®¤ä»…å†…ç½®äº† æ¨¡å—åŒ–çš„ å…¼å®¹æ€§å¤„ç†</strong>   <code>import  export</code></p>
<p>babel çš„ä»‹ç» =&gt; ç”¨äºå¤„ç†é«˜ç‰ˆæœ¬ jsè¯­æ³• çš„å…¼å®¹æ€§  <a href="https://www.babeljs.cn/">babelå®˜ç½‘</a></p>
<p>è§£å†³: è®©webpacké…åˆbabel-loader å¯¹jsè¯­æ³•åšå¤„ç†</p>
<p><a href="https://webpack.docschina.org/loaders/babel-loader/">babel-loaderæ–‡æ¡£</a></p>
<ol>
<li><p>å®‰è£…åŒ…</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn add -D babel-loader @babel/core @babel/preset-env</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é…ç½®è§„åˆ™</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>: {</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">        use: {</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">'babel-loader'</span>,</span><br><span class="line">            <span class="attr">options</span>: {</span><br><span class="line">                <span class="attr">presets</span>: [<span class="string">'@babel/preset-env'</span>] <span class="comment">// é¢„è®¾:è½¬ç è§„åˆ™(ç”¨bableå¼€å‘ç¯å¢ƒæœ¬æ¥é¢„è®¾çš„)</span></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨main.jsä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°(é«˜ç‰ˆæœ¬js)</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// é«˜çº§è¯­æ³•</span></span><br><span class="line"><span class="keyword">const</span> fn = <span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"ä½ å¥½babel"</span>);</span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(fn) <span class="comment">// è¿™é‡Œå¿…é¡»æ‰“å°ä¸èƒ½è°ƒç”¨/ä¸ä½¿ç”¨, ä¸ç„¶webpackä¼šç²¾ç®€æˆä¸€å¥æ‰“å°ä¸è¦å‡½æ•°äº†/ä¸ä¼šç¼–è¯‘æœªä½¿ç”¨çš„ä»£ç </span></span><br><span class="line"><span class="comment">// æ²¡æœ‰babelé›†æˆæ—¶, åŸæ ·ç›´æ¥æ‰“åŒ…è¿›lib/bundle.js</span></span><br><span class="line"><span class="comment">// æœ‰babelé›†æˆæ—¶, ä¼šç¿»è¯‘æˆæ™®é€šå‡½æ•°æ‰“åŒ…è¿›lib/bundle.js</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æ‰“åŒ…åè§‚å¯Ÿlib/bundle.js - è¢«è½¬æˆæˆæ™®é€šå‡½æ•°ä½¿ç”¨äº† - è¿™å°±æ˜¯babelé™çº§ç¿»è¯‘çš„åŠŸèƒ½</p>
</li>
</ol>
<blockquote>
<p>æ€»ç»“: babel-loader å¯ä»¥è®©webpack å¯¹é«˜ç‰ˆæœ¬jsè¯­æ³•åšé™çº§å¤„ç†åæ‰“åŒ…</p>
</blockquote>
<h2 id="4-webpack-å¼€å‘æœåŠ¡å™¨"><a href="#4-webpack-å¼€å‘æœåŠ¡å™¨" class="headerlink" title="4. webpack å¼€å‘æœåŠ¡å™¨"></a>4. webpack å¼€å‘æœåŠ¡å™¨</h2><h3 id="4-0-webpackå¼€å‘æœåŠ¡å™¨-ä¸ºä½•å­¦"><a href="#4-0-webpackå¼€å‘æœåŠ¡å™¨-ä¸ºä½•å­¦" class="headerlink" title="4.0_webpackå¼€å‘æœåŠ¡å™¨-ä¸ºä½•å­¦?"></a>4.0_webpackå¼€å‘æœåŠ¡å™¨-ä¸ºä½•å­¦?</h3><p>æ–‡æ¡£åœ°å€: <a href="https://webpack.docschina.org/configuration/dev-server/">https://webpack.docschina.org/configuration/dev-server/</a></p>
<p>æŠ›å‡ºé—®é¢˜: æ¯æ¬¡ä¿®æ”¹ä»£ç , éƒ½éœ€è¦é‡æ–° yarn build æ‰“åŒ…, æ‰èƒ½çœ‹åˆ°æœ€æ–°çš„æ•ˆæœ, å®é™…å·¥ä½œä¸­, æ‰“åŒ… yarn build éå¸¸è´¹æ—¶ (30s - 60s) ä¹‹é—´</p>
<p>ä¸ºä»€ä¹ˆè´¹æ—¶? </p>
<ol>
<li>æ„å»ºä¾èµ–</li>
<li>ç£ç›˜è¯»å–å¯¹åº”çš„æ–‡ä»¶åˆ°å†…å­˜, æ‰èƒ½åŠ è½½  </li>
<li>ç”¨å¯¹åº”çš„ loader è¿›è¡Œå¤„ç†  </li>
<li>å°†å¤„ç†å®Œçš„å†…å®¹, è¾“å‡ºåˆ°ç£ç›˜æŒ‡å®šç›®å½•  </li>
</ol>
<p>è§£å†³é—®é¢˜: èµ·ä¸€ä¸ªå¼€å‘æœåŠ¡å™¨,  åœ¨ç”µè„‘å†…å­˜ä¸­æ‰“åŒ…, ç¼“å­˜ä¸€äº›å·²ç»æ‰“åŒ…è¿‡çš„å†…å®¹, åªé‡æ–°æ‰“åŒ…ä¿®æ”¹çš„æ–‡ä»¶, æœ€ç»ˆè¿è¡ŒåŠ è½½åœ¨å†…å­˜ä¸­ç»™æµè§ˆå™¨ä½¿ç”¨</p>
<h3 id="4-1-webpack-dev-serverè‡ªåŠ¨åˆ·æ–°"><a href="#4-1-webpack-dev-serverè‡ªåŠ¨åˆ·æ–°" class="headerlink" title="==4.1_webpack-dev-serverè‡ªåŠ¨åˆ·æ–°=="></a>==4.1_webpack-dev-serverè‡ªåŠ¨åˆ·æ–°==</h3><blockquote>
<p>ç›®æ ‡: å¯åŠ¨æœ¬åœ°æœåŠ¡, å¯å®æ—¶æ›´æ–°ä¿®æ”¹çš„ä»£ç , æ‰“åŒ…<strong>å˜åŒ–ä»£ç </strong>åˆ°å†…å­˜ä¸­, ç„¶åç›´æ¥æä¾›ç«¯å£å’Œç½‘é¡µè®¿é—®</p>
</blockquote>
<ol>
<li><p>ä¸‹è½½åŒ…</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn add webpack-dev-server -D</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>é…ç½®è‡ªå®šä¹‰å‘½ä»¤</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">scripts: {</span><br><span class="line">	<span class="string">"build"</span>: <span class="string">"webpack"</span>,</span><br><span class="line">	<span class="string">"serve"</span>: <span class="string">"webpack serve"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>è¿è¡Œå‘½ä»¤-å¯åŠ¨webpackå¼€å‘æœåŠ¡å™¨</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ yarn serve</span><br><span class="line"><span class="comment">#æˆ–è€… npm run serve</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p>æ€»ç»“: ä»¥åæ”¹äº†srcä¸‹çš„èµ„æºä»£ç , å°±ä¼šç›´æ¥æ›´æ–°åˆ°å†…å­˜æ‰“åŒ…, ç„¶ååé¦ˆåˆ°æµè§ˆå™¨ä¸Šäº†</p>
</blockquote>
<h3 id="4-2-webpack-dev-serveré…ç½®"><a href="#4-2-webpack-dev-serveré…ç½®" class="headerlink" title="4.2_webpack-dev-serveré…ç½®"></a>4.2_webpack-dev-serveré…ç½®</h3><ol>
<li><p>åœ¨webpack.config.jsä¸­æ·»åŠ æœåŠ¡å™¨é…ç½®</p>
<p>æ›´å¤šé…ç½®å‚è€ƒè¿™é‡Œ: <a href="https://webpack.docschina.org/configuration/dev-server/#devserverafter">https://webpack.docschina.org/configuration/dev-server/#devserverafter</a></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">    <span class="comment">// ...å…¶ä»–é…ç½®</span></span><br><span class="line">    <span class="attr">devServer</span>: {</span><br><span class="line">      <span class="attr">port</span>: <span class="number">3000</span> <span class="comment">// ç«¯å£å·</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h2 id="ä»Šæ—¥æ€»ç»“"><a href="#ä»Šæ—¥æ€»ç»“" class="headerlink" title="ä»Šæ—¥æ€»ç»“"></a>ä»Šæ—¥æ€»ç»“</h2><ul>
<li><input disabled="" type="checkbox"> ä»€ä¹ˆæ˜¯webpack, å®ƒæœ‰ä»€ä¹ˆä½œç”¨</li>
<li><input disabled="" type="checkbox"> çŸ¥é“yarnçš„ä½¿ç”¨è¿‡ç¨‹, è‡ªå®šä¹‰å‘½ä»¤, ä¸‹è½½åˆ é™¤åŒ…</li>
<li><input disabled="" type="checkbox"> æœ‰äº†webpackè®©æ¨¡å—åŒ–å¼€å‘å‰ç«¯é¡¹ç›®æˆä¸ºäº†å¯èƒ½, åº•å±‚éœ€è¦nodeæ”¯æŒ</li>
<li><input disabled="" type="checkbox"> å¯¹webpackå„ç§é…ç½®é¡¹äº†è§£<ul>
<li><input disabled="" type="checkbox"> å…¥å£/å‡ºå£</li>
<li><input disabled="" type="checkbox"> æ’ä»¶</li>
<li><input disabled="" type="checkbox"> åŠ è½½å™¨</li>
<li><input disabled="" type="checkbox"> modeæ¨¡å¼</li>
<li><input disabled="" type="checkbox"> devServer</li>
</ul>
</li>
<li><input disabled="" type="checkbox"> webpackå¼€å‘æœåŠ¡å™¨çš„ä½¿ç”¨å’Œè¿ä½œè¿‡ç¨‹</li>
</ul>
<h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><h3 id="1ã€ä»€ä¹ˆæ˜¯webpackï¼ˆå¿…ä¼šï¼‰"><a href="#1ã€ä»€ä¹ˆæ˜¯webpackï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯webpackï¼ˆå¿…ä¼šï¼‰"></a>1ã€ä»€ä¹ˆæ˜¯webpackï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    webpackæ˜¯ä¸€ä¸ªæ‰“åŒ…æ¨¡å—åŒ–javascriptçš„å·¥å…·ï¼Œåœ¨webpacké‡Œä¸€åˆ‡æ–‡ä»¶çš†æ¨¡å—ï¼Œé€šè¿‡loaderè½¬æ¢æ–‡ä»¶ï¼Œé€šè¿‡pluginæ³¨å…¥é’©å­ï¼Œæœ€åè¾“å‡ºç”±å¤šä¸ªæ¨¡å—ç»„åˆæˆçš„æ–‡ä»¶ï¼Œwebpackä¸“æ³¨æ„å»ºæ¨¡å—åŒ–é¡¹ç›®</p>
<h3 id="2ã€Webpackçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¿…ä¼šï¼‰"><a href="#2ã€Webpackçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="2ã€Webpackçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¿…ä¼šï¼‰"></a>2ã€Webpackçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆå¿…ä¼šï¼‰</h3><ol>
<li>ä¸“æ³¨äºå¤„ç†æ¨¡å—åŒ–çš„é¡¹ç›®ï¼Œèƒ½åšåˆ°å¼€ç®±å³ç”¨ï¼Œä¸€æ­¥åˆ°ä½</li>
<li>é€šè¿‡pluginæ‰©å±•ï¼Œå®Œæ•´å¥½ç”¨åˆä¸å¤±çµæ´»</li>
<li>é€šè¿‡loadersæ‰©å±•, å¯ä»¥è®©webpackæŠŠæ‰€æœ‰ç±»å‹çš„æ–‡ä»¶éƒ½è§£ææ‰“åŒ…</li>
<li>åŒºåºå¤§æ´»è·ƒï¼Œç»å¸¸å¼•å…¥ç´§è·Ÿæ—¶ä»£å‘å±•çš„æ–°ç‰¹æ€§ï¼Œèƒ½ä¸ºå¤§å¤šæ•°åœºæ™¯æ‰¾åˆ°å·²æœ‰çš„å¼€æºæ‰©å±•</li>
</ol>
<h3 id="3ã€webpackçš„æ„å»ºæµç¨‹æ˜¯ä»€ä¹ˆ-ä»è¯»å–é…ç½®åˆ°è¾“å‡ºæ–‡ä»¶è¿™ä¸ªè¿‡ç¨‹å°½é‡è¯´å…¨ï¼ˆå¿…ä¼šï¼‰"><a href="#3ã€webpackçš„æ„å»ºæµç¨‹æ˜¯ä»€ä¹ˆ-ä»è¯»å–é…ç½®åˆ°è¾“å‡ºæ–‡ä»¶è¿™ä¸ªè¿‡ç¨‹å°½é‡è¯´å…¨ï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="3ã€webpackçš„æ„å»ºæµç¨‹æ˜¯ä»€ä¹ˆ?ä»è¯»å–é…ç½®åˆ°è¾“å‡ºæ–‡ä»¶è¿™ä¸ªè¿‡ç¨‹å°½é‡è¯´å…¨ï¼ˆå¿…ä¼šï¼‰"></a>3ã€webpackçš„æ„å»ºæµç¨‹æ˜¯ä»€ä¹ˆ?ä»è¯»å–é…ç½®åˆ°è¾“å‡ºæ–‡ä»¶è¿™ä¸ªè¿‡ç¨‹å°½é‡è¯´å…¨ï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    Webpack çš„è¿è¡Œæµç¨‹æ˜¯ä¸€ä¸ªä¸²è¡Œçš„è¿‡ç¨‹ï¼Œä»å¯åŠ¨åˆ°ç»“æŸä¼šä¾æ¬¡æ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š</p>
<p>â€‹    1. åˆå§‹åŒ–å‚æ•°ï¼šä»é…ç½®æ–‡ä»¶è¯»å–ä¸åˆå¹¶å‚æ•°ï¼Œå¾—å‡ºæœ€ç»ˆçš„å‚æ•°</p>
<pre><code> 2. å¼€å§‹ç¼–è¯‘ï¼šç”¨ä¸Šä¸€æ­¥å¾—åˆ°çš„å‚æ•°åˆå§‹åŒ– Compiler å¯¹è±¡ï¼ŒåŠ è½½æ‰€æœ‰é…ç½®çš„æ’ä»¶ï¼Œå¼€å§‹æ‰§è¡Œç¼–è¯‘
 3. ç¡®å®šå…¥å£ï¼šæ ¹æ®é…ç½®ä¸­çš„ entry æ‰¾å‡ºæ‰€æœ‰çš„å…¥å£æ–‡ä»¶
 4. ç¼–è¯‘æ¨¡å—ï¼šä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨æ‰€æœ‰é…ç½®çš„ Loader å¯¹æ¨¡å—è¿›è¡Œç¿»è¯‘ï¼Œå†æ‰¾å‡ºè¯¥æ¨¡å—ä¾èµ–çš„æ¨¡å—ï¼Œå†é€’å½’æœ¬æ­¥éª¤ç›´åˆ°æ‰€æœ‰å…¥å£ä¾èµ–çš„æ–‡ä»¶éƒ½ç»è¿‡äº†æœ¬æ­¥éª¤çš„å¤„ç†
 5. å®Œæˆæ¨¡å—ç¼–è¯‘ï¼šåœ¨ç»è¿‡ç¬¬4æ­¥ä½¿ç”¨ Loader ç¿»è¯‘å®Œæ‰€æœ‰æ¨¡å—åï¼Œå¾—åˆ°äº†æ¯ä¸ªæ¨¡å—è¢«ç¿»è¯‘åçš„æœ€ç»ˆå†…å®¹ä»¥åŠå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»
 6. è¾“å‡ºèµ„æºï¼šæ ¹æ®å…¥å£å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…æˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ Chunkï¼Œå†æŠŠæ¯ä¸ª Chunk è½¬æ¢æˆä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ï¼Œè¿™æ­¥æ˜¯å¯ä»¥ä¿®æ”¹è¾“å‡ºå†…å®¹çš„æœ€åæœºä¼š
 7. è¾“å‡ºå®Œæˆï¼šåœ¨ç¡®å®šå¥½è¾“å‡ºå†…å®¹åï¼Œæ ¹æ®é…ç½®ç¡®å®šè¾“å‡ºçš„è·¯å¾„å’Œæ–‡ä»¶åï¼ŒæŠŠæ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚
</code></pre>
<p>åœ¨ä»¥ä¸Šè¿‡ç¨‹ä¸­ï¼ŒWebpack ä¼šåœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹å¹¿æ’­å‡ºç‰¹å®šçš„äº‹ä»¶ï¼Œæ’ä»¶åœ¨ç›‘å¬åˆ°æ„Ÿå…´è¶£çš„äº‹ä»¶åä¼šæ‰§è¡Œç‰¹å®šçš„é€»è¾‘ï¼Œå¹¶ä¸”æ’ä»¶å¯ä»¥è°ƒç”¨ Webpack æä¾›çš„ API æ”¹å˜ Webpack çš„è¿è¡Œç»“æœ</p>
<h3 id="4ã€è¯´ä¸€ä¸‹-Webpack-çš„çƒ­æ›´æ–°åŸç†-å¿…ä¼š"><a href="#4ã€è¯´ä¸€ä¸‹-Webpack-çš„çƒ­æ›´æ–°åŸç†-å¿…ä¼š" class="headerlink" title="4ã€è¯´ä¸€ä¸‹ Webpack çš„çƒ­æ›´æ–°åŸç†(å¿…ä¼š)"></a>4ã€è¯´ä¸€ä¸‹ Webpack çš„çƒ­æ›´æ–°åŸç†(å¿…ä¼š)</h3><p>â€‹    webpack çš„çƒ­æ›´æ–°åˆç§°çƒ­æ›¿æ¢ï¼ˆHot Module Replacementï¼‰ï¼Œç¼©å†™ä¸º HMRã€‚è¿™ä¸ªæœºåˆ¶å¯ä»¥åšåˆ°ä¸ç”¨åˆ·æ–°æµè§ˆå™¨è€Œå°†æ–°å˜æ›´çš„æ¨¡å—æ›¿æ¢æ‰æ—§çš„æ¨¡å—ã€‚</p>
<p>â€‹    HMRçš„æ ¸å¿ƒå°±æ˜¯å®¢æˆ·ç«¯ä»æœåŠ¡ç«¯æ‹‰å»æ›´æ–°åçš„æ–‡ä»¶ï¼Œå‡†ç¡®çš„è¯´æ˜¯ chunk diff (chunk éœ€è¦æ›´æ–°çš„éƒ¨åˆ†)ï¼Œå®é™…ä¸Š WDS ä¸æµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ª Websocketï¼Œå½“æœ¬åœ°èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼ŒWDS ä¼šå‘æµè§ˆå™¨æ¨é€æ›´æ–°ï¼Œå¹¶å¸¦ä¸Šæ„å»ºæ—¶çš„ hashï¼Œè®©å®¢æˆ·ç«¯ä¸ä¸Šä¸€æ¬¡èµ„æºè¿›è¡Œå¯¹æ¯”ã€‚å®¢æˆ·ç«¯å¯¹æ¯”å‡ºå·®å¼‚åä¼šå‘ WDS å‘èµ· Ajax è¯·æ±‚æ¥è·å–æ›´æ”¹å†…å®¹(æ–‡ä»¶åˆ—è¡¨ã€hash)ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±å¯ä»¥å†å€ŸåŠ©è¿™äº›ä¿¡æ¯ç»§ç»­å‘ WDS å‘èµ· jsonp è¯·æ±‚è·å–è¯¥chunkçš„å¢é‡æ›´æ–°ã€‚</p>
<p>â€‹    åç»­çš„éƒ¨åˆ†(æ‹¿åˆ°å¢é‡æ›´æ–°ä¹‹åå¦‚ä½•å¤„ç†ï¼Ÿå“ªäº›çŠ¶æ€è¯¥ä¿ç•™ï¼Ÿå“ªäº›åˆéœ€è¦æ›´æ–°ï¼Ÿ)ç”± HotModulePlugin æ¥å®Œæˆï¼Œæä¾›äº†ç›¸å…³ API ä»¥ä¾›å¼€å‘è€…é’ˆå¯¹è‡ªèº«åœºæ™¯è¿›è¡Œå¤„ç†ï¼Œåƒreact-hot-loader å’Œ vue-loader éƒ½æ˜¯å€ŸåŠ©è¿™äº› API å®ç° HMRã€‚</p>
<h3 id="5ã€webpackä¸gruntã€gulpçš„ä¸åŒï¼Ÿï¼ˆå¿…ä¼šï¼‰"><a href="#5ã€webpackä¸gruntã€gulpçš„ä¸åŒï¼Ÿï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="5ã€webpackä¸gruntã€gulpçš„ä¸åŒï¼Ÿï¼ˆå¿…ä¼šï¼‰"></a>5ã€webpackä¸gruntã€gulpçš„ä¸åŒï¼Ÿï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    <strong>1)</strong> <strong>ä¸‰è€…ä¹‹é—´çš„åŒºåˆ«</strong></p>
<p>â€‹       ä¸‰è€…éƒ½æ˜¯å‰ç«¯æ„å»ºå·¥å…·ï¼Œgruntå’Œgulpåœ¨æ—©æœŸæ¯”è¾ƒæµè¡Œï¼Œç°åœ¨webpackç›¸å¯¹æ¥è¯´æ¯”è¾ƒä¸»æµï¼Œä¸è¿‡ä¸€äº›è½»é‡åŒ–çš„ä»»åŠ¡è¿˜æ˜¯ä¼šç”¨gulpæ¥å¤„ç†ï¼Œæ¯”å¦‚å•ç‹¬æ‰“åŒ…CSSæ–‡ä»¶ç­‰ã€‚</p>
<p>â€‹       gruntå’Œgulpæ˜¯åŸºäºä»»åŠ¡å’Œæµï¼ˆTaskã€Streamï¼‰çš„ã€‚ç±»ä¼¼jQueryï¼Œæ‰¾åˆ°ä¸€ä¸ªï¼ˆæˆ–ä¸€ç±»ï¼‰æ–‡ä»¶ï¼Œå¯¹å…¶åšä¸€ç³»åˆ—é“¾å¼æ“ä½œï¼Œæ›´æ–°æµä¸Šçš„æ•°æ®ï¼Œ æ•´æ¡é“¾å¼æ“ä½œæ„æˆäº†ä¸€ä¸ªä»»åŠ¡ï¼Œå¤šä¸ªä»»åŠ¡å°±æ„æˆäº†æ•´ä¸ªwebçš„æ„å»ºæµç¨‹ã€‚</p>
<p>â€‹       webpackæ˜¯åŸºäºå…¥å£çš„ã€‚webpackä¼šè‡ªåŠ¨åœ°é€’å½’è§£æå…¥å£æ‰€éœ€è¦åŠ è½½çš„æ‰€æœ‰èµ„æºæ–‡ä»¶ï¼Œç„¶åç”¨ä¸åŒçš„Loaderæ¥å¤„ç†ä¸åŒçš„æ–‡ä»¶ï¼Œç”¨Pluginæ¥æ‰©å±•webpackåŠŸèƒ½ã€‚</p>
<p>â€‹    <strong>2)</strong> <strong>ä»æ„å»ºæ€è·¯æ¥è¯´</strong></p>
<p>â€‹       gulpå’Œgruntéœ€è¦å¼€å‘è€…å°†æ•´ä¸ªå‰ç«¯æ„å»ºè¿‡ç¨‹æ‹†åˆ†æˆå¤šä¸ª<code>Task</code>ï¼Œå¹¶åˆç†æ§åˆ¶æ‰€æœ‰<code>Task</code>çš„è°ƒç”¨å…³ç³» webpackéœ€è¦å¼€å‘è€…æ‰¾åˆ°å…¥å£ï¼Œå¹¶éœ€è¦æ¸…æ¥šå¯¹äºä¸åŒçš„èµ„æºåº”è¯¥ä½¿ç”¨ä»€ä¹ˆLoaderåšä½•ç§è§£æå’ŒåŠ å·¥</p>
<p>â€‹    <strong>3)</strong> <strong>å¯¹äºçŸ¥è¯†èƒŒæ™¯æ¥è¯´</strong></p>
<p>â€‹       gulpæ›´åƒåç«¯å¼€å‘è€…çš„æ€è·¯ï¼Œéœ€è¦å¯¹äºæ•´ä¸ªæµç¨‹äº†å¦‚æŒ‡æŒ webpackæ›´å€¾å‘äºå‰ç«¯å¼€å‘è€…çš„æ€è·¯</p>
<h3 id="6ã€æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä»–ä»¬æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿï¼ˆå¿…ä¼šï¼‰"><a href="#6ã€æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä»–ä»¬æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="6ã€æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä»–ä»¬æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿï¼ˆå¿…ä¼šï¼‰"></a>6ã€æœ‰å“ªäº›å¸¸è§çš„Loaderï¼Ÿä»–ä»¬æ˜¯è§£å†³ä»€ä¹ˆé—®é¢˜çš„ï¼Ÿï¼ˆå¿…ä¼šï¼‰</h3><p>1ã€  file-loaderï¼šæŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶</p>
<p>2ã€  url-loaderï¼šå’Œ file-loader ç±»ä¼¼ï¼Œä½†æ˜¯èƒ½åœ¨æ–‡ä»¶å¾ˆå°çš„æƒ…å†µä¸‹ä»¥ base64 çš„æ–¹å¼æŠŠæ–‡ä»¶å†…å®¹æ³¨å…¥åˆ°ä»£ç ä¸­å»</p>
<p>3ã€  source-map-loaderï¼šåŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•</p>
<p>4ã€  image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶</p>
<p>5ã€  babel-loaderï¼šæŠŠ ES6 è½¬æ¢æˆ ES5</p>
<p>6ã€  css-loaderï¼šåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§</p>
<p>7ã€  style-loaderï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSSã€‚</p>
<p>8ã€  eslint-loaderï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç </p>
<h3 id="7ã€Loaderå’ŒPluginçš„ä¸åŒï¼Ÿï¼ˆå¿…ä¼šï¼‰"><a href="#7ã€Loaderå’ŒPluginçš„ä¸åŒï¼Ÿï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="7ã€Loaderå’ŒPluginçš„ä¸åŒï¼Ÿï¼ˆå¿…ä¼šï¼‰"></a>7ã€Loaderå’ŒPluginçš„ä¸åŒï¼Ÿï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    <strong>1)</strong> <strong>ä¸åŒçš„ä½œç”¨</strong></p>
<p>â€‹       Loaderç›´è¯‘ä¸ºâ€åŠ è½½å™¨â€ã€‚Webpackå°†ä¸€åˆ‡æ–‡ä»¶è§†ä¸ºæ¨¡å—ï¼Œä½†æ˜¯webpackåŸç”Ÿæ˜¯åªèƒ½è§£æjsæ–‡ä»¶ï¼Œå¦‚æœæƒ³å°†å…¶ä»–æ–‡ä»¶ä¹Ÿæ‰“åŒ…çš„è¯ï¼Œå°±ä¼šç”¨åˆ°loaderã€‚ æ‰€ä»¥Loaderçš„ä½œç”¨æ˜¯è®©webpackæ‹¥æœ‰äº†åŠ è½½å’Œè§£æéJavaScriptæ–‡ä»¶çš„èƒ½åŠ›ã€‚</p>
<p>â€‹    Pluginç›´è¯‘ä¸ºâ€æ’ä»¶â€ã€‚Pluginå¯ä»¥æ‰©å±•webpackçš„åŠŸèƒ½ï¼Œè®©webpackå…·æœ‰æ›´å¤šçš„çµæ´»æ€§ã€‚ åœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚</p>
<p><strong>2)</strong> <strong>ä¸åŒçš„ç”¨æ³•</strong></p>
<p>â€‹    Loaderåœ¨module.rulesä¸­é…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä½œä¸ºæ¨¡å—çš„è§£æè§„åˆ™è€Œå­˜åœ¨ã€‚ ç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªObjectï¼Œé‡Œé¢æè¿°äº†å¯¹äºä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ï¼ˆtestï¼‰ï¼Œä½¿ç”¨ä»€ä¹ˆåŠ è½½(loader)å’Œä½¿ç”¨çš„å‚æ•°ï¼ˆoptionsï¼‰</p>
<p>â€‹    Pluginåœ¨pluginsä¸­å•ç‹¬é…ç½®ã€‚ ç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ªpluginçš„å®ä¾‹ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚</p>
<h2 id="ä»Šæ—¥ä½œä¸š"><a href="#ä»Šæ—¥ä½œä¸š" class="headerlink" title="ä»Šæ—¥ä½œä¸š"></a>ä»Šæ—¥ä½œä¸š</h2><ol>
<li><p>æŠŠè¯¾ä¸Šwebpackçš„é…ç½®ä»0å¼€å§‹, å†è¿‡ä¸€é</p>
</li>
<li><p>(é™„åŠ )å¯ä»¥è°ƒç ”, åœ¨æ‰“åŒ…æ—¶, å¦‚ä½•æŠŠcssæå–æˆä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶</p>
<p>æ•ˆæœ: æ‰“åŒ…åçš„æ–‡ä»¶å¤¹ä¸‹å¤šä¸€ä¸ªç‹¬ç«‹çš„cssæ–‡ä»¶é‡Œæœ‰cssä»£ç </p>
<p>æç¤º: éœ€è¦ä¸€ä¸ªåŠ è½½å™¨</p>
</li>
<li><p>(é™„åŠ )å¯ä»¥è°ƒç”¨å¦‚ä½•æŠŠvueæ–‡ä»¶è®©webpackæ‰“åŒ…ä½¿ç”¨ (vue-loaderå®˜ç½‘)</p>
<p>æƒ³è¦æŠŠApp.vueçš„ä¸œè¥¿æ˜¾ç¤ºåˆ°index.html</p>
<p>(1): åœ¨public/index.html å‡†å¤‡idå«appçš„div</p>
<p>(2): yarn add vue - å¿…é¡»ä¸‹è½½vue (å’Œå…¶ä»–åŠ è½½å™¨å’Œæ’ä»¶-å…·ä½“å‚è€ƒvue-loaderå®˜ç½‘)</p>
<p>(3): éœ€è¦åœ¨main.jsä¸­å¼•å…¥App.vueæ¨¡å—å¯¹è±¡å¹¶åŠ å…¥å¦‚ä¸‹ä»£ç </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span> <span class="comment">// æ ¹vueæ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span> <span class="comment">// å¼•å…¥vue.jså¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue({ </span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App) <span class="comment">// æ¸²æŸ“å‡½æ•°, æ¸²æŸ“Appç»„ä»¶é‡Œçš„æ ‡ç­¾</span></span><br><span class="line">}).$mount(<span class="string">'#app'</span>) <span class="comment">// æŠŠvueæ–‡ä»¶çš„æ ‡ç­¾ç»“æ„ -&gt; æŒ‚è½½åˆ°idä¸ºappçš„æ ‡ç­¾é‡Œ</span></span><br></pre></td></tr></tbody></table></figure>

<p>(4): æ‰“åŒ…åè¿è¡Œdist/index.html, è§‚å¯Ÿæ˜¯å¦æŠŠvueæ–‡ä»¶é‡Œçš„æ ‡ç­¾æ¸²æŸ“åˆ°é¡µé¢äº†</p>
</li>
<li><p>é¢„ä¹ æ˜å¤©çš„ç¬”è®°.md</p>
</li>
</ol>
]]></content>
      <categories>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåŸºç¡€1-vueè„šæ‰‹æ¶&amp;åŸºç¡€API</title>
    <url>/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="å¿…å®‰è£…-vue-devtools"><a href="#å¿…å®‰è£…-vue-devtools" class="headerlink" title="å¿…å®‰è£… - vue-devtools"></a>å¿…å®‰è£… - vue-devtools</h3><p>å­¦ä¹ , è°ƒè¯•vueå¿…å¤‡ä¹‹åˆ©å™¨ - å®˜æ–¹æä¾›çš„å‘¦</p>
<p>å³ä¸Šè§’-æ’ä»¶-è°·æ­Œè®¿é—®åŠ©æ‰‹-æ‰“å¼€Chromeå•†åº—-æœç´¢vue-devtoolså›è½¦-ç„¶åæ·»åŠ è‡³Chromeç­‰å¾…ä¸‹è½½åè‡ªåŠ¨å®‰è£…-å³ä¸Šè§’æ˜¾ç¤ºå·²ç»æ·»åŠ å³ä»£è¡¨æˆåŠŸ</p>
<p>å¦‚æœå®åœ¨æ‰“ä¸å¼€è°·æ­Œå•†åº—, æ¢ä¸ªç½‘ / ç›´æ¥ç”¨å¤‡ç”¨æ–‡ä»¶å¤¹é‡Œçš„vue-devtoolsæ’ä»¶åŒ…å®‰è£…åˆ°æµè§ˆå™¨æ‰©å±•ç¨‹åºä¹Ÿä¸€æ ·ç”¨</p>
<p>==ä¸è¦å›¾æ ‡ä¸Šå¸¦æ©˜é»„è‰²betaçš„==</p>
<p>==å¦‚æœè¿™ä¸ªç½‘å€æ‰“ä¸å¼€, å°±ç”¨é¢„ä¹ èµ„æ–™é‡Œå¤‡ç”¨çš„æœ¬åœ°ç‰ˆå®‰è£…ä¹Ÿå¯ä»¥, å®‰è£…è¿‡ç¨‹å’Œä¸Šä¸ªæ’ä»¶å®‰è£…è¿‡ç¨‹ä¸€è‡´==</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/%E5%AE%89%E8%A3%85vue_devtools%E6%8F%92%E4%BB%B6%E5%88%B0%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8.gif" alt="å®‰è£…vue_devtoolsæ’ä»¶åˆ°è°·æ­Œæµè§ˆå™¨"></p>
<h3 id="vscode-æ’ä»¶è¡¥å……"><a href="#vscode-æ’ä»¶è¡¥å……" class="headerlink" title="vscode-æ’ä»¶è¡¥å……"></a>vscode-æ’ä»¶è¡¥å……</h3><p>vueæ–‡ä»¶ä»£ç é«˜äº®æ’ä»¶-vscodeä¸­å®‰è£…</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210212192713936.png" alt="image-20210212192713936"></p>
<p>ä»£ç æç¤ºæ’ä»¶-vscodeä¸­å®‰è£…</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210304223236080.png" alt="image-20210304223236080"></p>
<h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><p>æƒ³å­¦ä¼šä»Šå¤©çš„å†…å®¹, å…ˆæµ‹æµ‹è¿™å‡ ä¸ªä¼šä¸ä¼š</p>
<ul>
<li><input disabled="" type="checkbox"> è¡¨è¾¾å¼, å˜é‡æ˜¯ä»€ä¹ˆ</li>
<li><input disabled="" type="checkbox"> newçš„ä½œç”¨å’Œå«ä¹‰</li>
<li><input disabled="" type="checkbox"> å®ä¾‹åŒ–å¯¹è±¡</li>
<li><input disabled="" type="checkbox"> ä»€ä¹ˆæ˜¯å¯¹è±¡ä¸Šçš„, å±æ€§å’Œæ–¹æ³•</li>
<li><input disabled="" type="checkbox"> å¯¹è±¡çš„èµ‹å€¼å’Œå–å€¼</li>
<li><input disabled="" type="checkbox"> thisçš„æŒ‡å‘</li>
<li><input disabled="" type="checkbox"> npm/yarnæ˜¯ä»€ä¹ˆ, package.jsonå¹²ä»€ä¹ˆçš„, ä¸‹è½½åŒ…çš„å‘½ä»¤æ˜¯ä»€ä¹ˆ, ä»€ä¹ˆæ˜¯æ¨¡å—åŒ–å¼€å‘</li>
<li><input disabled="" type="checkbox"> å‡½æ•°çš„å½¢å‚å®å‚, å¾—é©¬ä¸Šååº”è¿‡æ¥, å“ªä¸ªæ˜¯å˜é‡å“ªä¸ªæ˜¯å€¼, è°ä¼ ç»™è°äº†</li>
</ul>
<p>å¦‚æœé€šä¸è¿‡, è¯·è®°ä½å£è¯€:</p>
<ol>
<li><p>å˜é‡æ˜¯ä¸€ä¸ªå®¹å™¨, è¡¨è¾¾å¼åŸåœ°éƒ½æœ‰è¿”å›ç»“æœ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">// aå°±æ˜¯å˜é‡, è¿è¡Œåä½¿ç”¨å˜é‡é‡Œçš„å€¼å†åŸåœ°æ‰“å°</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">10</span> + <span class="number">50</span>); <span class="comment">// 10 + 50 å°±æ˜¯è¡¨è¾¾å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(a &gt; <span class="number">9</span>); <span class="comment">// è¿™å«åˆ¤æ–­è¡¨è¾¾å¼, åŸåœ°ç»“æœæ˜¯true</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>new ç±»å() - åŸåœ°å¾—åˆ°ä¸€ä¸ªå®ä¾‹å¯¹è±¡ - å¯¹è±¡èº«ä¸Šæœ‰key(æˆ–å«å±æ€§, å«é”®éƒ½è¡Œ), å¯¹åº”çš„å€¼æ˜¯æˆ‘ä»¬è¦ä½¿ç”¨çš„</p>
</li>
<li><p>å®ä¾‹åŒ–å¯¹è±¡å°±æ˜¯new ç±»å() åˆ›é€ å‡ºæ¥çš„å¯¹è±¡, èº«ä¸ŠåŒ…å«å±æ€§(key, é”®) å¯¹åº”çš„ å€¼</p>
</li>
<li><p>ä»€ä¹ˆæ˜¯å±æ€§å’Œæ–¹æ³•(å›ºå®šæ ¼å¼)</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = { <span class="comment">// å±æ€§æŒ‡çš„æ˜¯a, b, c, d, eè¿™äº›åå­—</span></span><br><span class="line">    <span class="attr">a</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">b</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">    <span class="attr">c</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{},</span><br><span class="line">    d () {},</span><br><span class="line">    <span class="attr">e</span>: <span class="function">() =&gt;</span> {} <span class="comment">// å€¼æ˜¯å†’å·:å³è¾¹çš„å€¼</span></span><br><span class="line">}</span><br><span class="line"><span class="comment">// è¿™ä¸ªæ ¼å¼æ˜¯å›ºå®šçš„, å¿…é¡»å¼ å£å°±æ¥, å¼ æ‰‹å°±å†™, å‡†ç¡®ç‡100%</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¯¹è±¡çš„å¤åˆ¶å’Œå–å€¼(å›ºå®šæ ¼å¼)</p>
<p>æœ‰=(èµ‹å€¼è¿ç®—ç¬¦) å°±æ˜¯èµ‹å€¼, æ²¡æœ‰å°±æ˜¯å–å€¼</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = {</span><br><span class="line">    <span class="attr">a</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="number">20</span></span><br><span class="line">}</span><br><span class="line"><span class="built_in">console</span>.log(obj.a); <span class="comment">// ä»objå¯¹è±¡çš„aä¸Šå–å€¼, åŸåœ°æ‰“å°10</span></span><br><span class="line">obj.b = <span class="number">100</span>; <span class="comment">// æœ‰=, å›ºå®šæŠŠå³ä¾§çš„å€¼èµ‹äºˆç»™å·¦ä¾§çš„é”®, å†æ‰“å°objè¿™ä¸ªå¯¹è±¡, bçš„å€¼æ˜¯100äº†</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>thisæŒ‡å‘å£è¯€</p>
<p>åœ¨functionå‡½æ•°ä¸­, thisé»˜è®¤æŒ‡å‘å½“å‰å‡½æ•°çš„è°ƒç”¨è€…  è°ƒç”¨è€….å‡½æ•°å()</p>
<p>åœ¨ç®­å¤´å‡½æ•°ä¸­, thisæŒ‡å‘å¤–å±‚â€å‡½æ•°â€ä½œç”¨åŸŸthisçš„å€¼</p>
</li>
</ol>
<h2 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h2><ol>
<li>èƒ½å¤Ÿç†è§£vueçš„æ¦‚å¿µå’Œä½œç”¨</li>
<li>èƒ½å¤Ÿç†è§£vuecliè„šæ‰‹æ¶å·¥ç¨‹åŒ–å¼€å‘</li>
<li>èƒ½å¤Ÿä½¿ç”¨vueæŒ‡ä»¤</li>
</ol>
<h2 id="1-VueåŸºæœ¬æ¦‚å¿µ"><a href="#1-VueåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. VueåŸºæœ¬æ¦‚å¿µ"></a>1. VueåŸºæœ¬æ¦‚å¿µ</h2><h3 id="1-0-ä¸ºä½•å­¦Vue"><a href="#1-0-ä¸ºä½•å­¦Vue" class="headerlink" title="1.0_ä¸ºä½•å­¦Vue"></a>1.0_ä¸ºä½•å­¦Vue</h3><blockquote>
<p>ç›®æ ‡: æ›´å°‘çš„æ—¶é—´,å¹²æ›´å¤šçš„æ´». å¼€å‘ç½‘ç«™é€Ÿåº¦, å¿«</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210317180201113.png" alt="image-20210317180201113"></p>
<p>ä¾‹å¦‚: æŠŠæ•°ç»„æ•°æ®-å¾ªç¯é“ºè®¾åˆ°liä¸­, çœ‹çœ‹åˆ†åˆ«å¦‚ä½•åšçš„?</p>
<p>åŸç”Ÿjsåšæ³•</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;ul id="myUl"&gt;&lt;/ul&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    let arr = ["æ˜¥å¤©", "å¤å¤©", "ç§‹å¤©", "å†¬å¤©"];</span><br><span class="line">    let myUl = document.getElementById("myUl");</span><br><span class="line">    for (let i = 0; i &lt; arr.length; i++) {</span><br><span class="line">        let theLi = document.createElement("li");</span><br><span class="line">        theLi.innerHTML = arr[i];</span><br><span class="line">        myUl.appendChild(theLi);</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>Vue.jsåšæ³•</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;li v-for="item in arr"&gt;{{item}}&lt;/li&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    new Vue({</span><br><span class="line">        // ...</span><br><span class="line">        data: {</span><br><span class="line">            arr: ["æ˜¥å¤©", "å¤å¤©", "ç§‹å¤©", "å†¬å¤©"] </span><br><span class="line">        }</span><br><span class="line">    })</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ³¨æ„: è™½ç„¶vueå†™èµ·æ¥å¾ˆçˆ½, ä½†æ˜¯ä¸€å®šä¸è¦å¿˜è®°, vueçš„åº•å±‚è¿˜æ˜¯åŸç”Ÿjs</p>
<p>å¼€å‘æ›´åŠ çš„æ•ˆç‡å’Œç®€æ´, æ˜“äºç»´æŠ¤, å¿«!å¿«!å¿«!å°±æ˜¯å— (ç”šè‡³æµ‹è¯•, Java, Pythonå·¥ç¨‹å¸ˆéƒ½è¦å­¦ç‚¹vue, æ–¹ä¾¿ä¸å‰ç«¯æ²Ÿé€š)</p>
<p>ç°åœ¨å¾ˆå¤šé¡¹ç›®éƒ½æ˜¯ç”¨vueå¼€å‘çš„</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210317180240323.png" alt="image-20210317180240323"></p>
<p>å¸‚åœºä¸Š90%å·¥ä½œéƒ½è¦æ±‚ä¼švue, ä¼švueæ‹¿é«˜è–ª, ç”šè‡³javaæˆ–æµ‹è¯•éƒ½è¦å­¦ç‚¹vue</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210317180255055.png" alt="image-20210317180255055"></p>
<h3 id="1-1-Vueæ˜¯ä»€ä¹ˆ"><a href="#1-1-Vueæ˜¯ä»€ä¹ˆ" class="headerlink" title="1.1_Vueæ˜¯ä»€ä¹ˆ"></a>1.1_Vueæ˜¯ä»€ä¹ˆ</h3><p>logoé•‡æ¥¼</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/VUE-logo.png" alt="Vue"></p>
<p>==æ¸è¿›å¼==javacript==æ¡†æ¶==, ä¸€å¥—æ‹¥æœ‰è‡ªå·±è§„åˆ™çš„è¯­æ³•</p>
<p>å®˜ç½‘åœ°å€: <a href="https://cn.vuejs.org/">https://cn.vuejs.org/</a> (ä½œè€…: å°¤é›¨æºª)</p>
<blockquote>
<h3 id="ä»€ä¹ˆæ˜¯æ¸è¿›å¼"><a href="#ä»€ä¹ˆæ˜¯æ¸è¿›å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¸è¿›å¼"></a>ä»€ä¹ˆæ˜¯æ¸è¿›å¼</h3></blockquote>
<p>æ¸è¿›å¼: é€æ¸è¿›æ­¥, æƒ³ç”¨ä»€ä¹ˆå°±ç”¨ä»€ä¹ˆ, ä¸å¿…å…¨éƒ½ä½¿ç”¨<br><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210314200521109.png" alt="image-20210314200521109"></p>
<p>Vueæ¸è¿›å¼: Vueä»åŸºç¡€å¼€å§‹, ä¼šå¾ªåºæ¸è¿›å‘å‰å­¦ä¹ , å¦‚ä¸‹çŸ¥è¯†ç‚¹å¯èƒ½ä½ ç°åœ¨ä¸æ˜ç™½, ä½†æ˜¯å­¦å®Œæ•´ä¸ªvueå›è¿‡å¤´æ¥çœ‹, ä¼šå¾ˆæœ‰å¸®åŠ©</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/%E6%B8%90%E8%BF%9B%E5%BC%8F-1613206784433.png"></p>
<blockquote>
<h3 id="ä»€ä¹ˆæ˜¯åº“å’Œæ¡†æ¶"><a href="#ä»€ä¹ˆæ˜¯åº“å’Œæ¡†æ¶" class="headerlink" title="ä»€ä¹ˆæ˜¯åº“å’Œæ¡†æ¶"></a>ä»€ä¹ˆæ˜¯åº“å’Œæ¡†æ¶</h3></blockquote>
<p>è¡¥å……æ¦‚å¿µ:</p>
<p>åº“:  å°è£…çš„å±æ€§æˆ–æ–¹æ³• (ä¾‹jquery.js)</p>
<p>æ¡†æ¶: æ‹¥æœ‰è‡ªå·±çš„è§„åˆ™å’Œå…ƒç´ , æ¯”åº“å¼ºå¤§çš„å¤š (ä¾‹vue.js)</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210111215624065.png" alt="image-20210111215624065"></p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210212141558460.png" alt="image-20210212141558460"></p>
<h3 id="1-2-Vueå­¦ä¹ çš„æ–¹å¼"><a href="#1-2-Vueå­¦ä¹ çš„æ–¹å¼" class="headerlink" title="1.2_Vueå­¦ä¹ çš„æ–¹å¼"></a>1.2_Vueå­¦ä¹ çš„æ–¹å¼</h3><ul>
<li><p>ä¼ ç»Ÿå¼€å‘æ¨¡å¼ï¼šåŸºäºhtml/css/jsæ–‡ä»¶å¼€å‘vue</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210228083641377.png" alt="image-20210228083641377"></p>
</li>
<li><p>å·¥ç¨‹åŒ–å¼€å‘æ–¹å¼ï¼šåœ¨webpackç¯å¢ƒä¸­å¼€å‘vueï¼Œè¿™æ˜¯æœ€æ¨è, ä¼ä¸šå¸¸ç”¨çš„æ–¹å¼</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210228083746746.png" alt="image-20210228083746746"></p>
</li>
</ul>
<blockquote>
<h3 id="Vueå¦‚ä½•å­¦"><a href="#Vueå¦‚ä½•å­¦" class="headerlink" title="Vueå¦‚ä½•å­¦"></a>Vueå¦‚ä½•å­¦</h3></blockquote>
<ol>
<li>æ¯å¤©çš„çŸ¥è¯†ç‚¹è‡ªæµ‹æœ€å¥½åšåˆ°äº†å¦‚æŒ‡æŒ - åšä¸åˆ°åªèƒ½èŠ±30åˆ†é’Ÿå»è®°ä½ç»“è®ºå’Œå…¬å¼</li>
<li>è®°ä½vueæŒ‡ä»¤ä½œç”¨, åŸºç¡€è¯­æ³• - å¼„ä¸€ä¸ªå­—å…¸(ä¸€ä¸€æ˜ å°„å…³ç³»)</li>
<li>åœ¨è¯¾ä¸Šä¾‹å­, ç»ƒä¹ , æ¡ˆä¾‹, ä½œä¸š, é¡¹ç›®ä¸­, åå¤ç£¨ç‚¼ä½¿ç”¨</li>
<li>å­¦ä¼šæŸ¥æ‰¾é—®é¢˜çš„æ–¹å¼å’Œè§£å†³æ–¹å¼(å¼„ä¸ªæŠ¥é”™æ€»ç»“.md, é¿å…åå¤è¿›å‘)</li>
</ol>
<blockquote>
<p>æ€»ç»“: vueæ˜¯æ¸è¿›å¼æ¡†æ¶, æœ‰è‡ªå·±çš„è§„åˆ™, æˆ‘ä»¬è¦è®°ä½è¯­æ³•, ç‰¹ç‚¹å’Œä½œç”¨, åå¤ç£¨ç‚¼ä½¿ç”¨, å¤šæ€»ç»“</p>
</blockquote>
<h2 id="2-vue-cliè„šæ‰‹æ¶"><a href="#2-vue-cliè„šæ‰‹æ¶" class="headerlink" title="2. @vue/cliè„šæ‰‹æ¶"></a>2. @vue/cliè„šæ‰‹æ¶</h2><h3 id="2-0-vue-cli-è„šæ‰‹æ¶ä»‹ç»"><a href="#2-0-vue-cli-è„šæ‰‹æ¶ä»‹ç»" class="headerlink" title="2.0_@vue/cli è„šæ‰‹æ¶ä»‹ç»"></a>2.0_@vue/cli è„šæ‰‹æ¶ä»‹ç»</h3><blockquote>
<p>ç›®æ ‡: webpackè‡ªå·±é…ç½®ç¯å¢ƒå¾ˆéº»çƒ¦, ä¸‹è½½@vue/cliåŒ…,ç”¨vueå‘½ä»¤åˆ›å»ºè„šæ‰‹æ¶é¡¹ç›®</p>
</blockquote>
<ul>
<li><p>@vue/cliæ˜¯Vueå®˜æ–¹æä¾›çš„ä¸€ä¸ªå…¨å±€æ¨¡å—åŒ…(å¾—åˆ°vueå‘½ä»¤), æ­¤åŒ…ç”¨äºåˆ›å»ºè„šæ‰‹æ¶é¡¹ç›®</p>
<p>è„šæ‰‹æ¶æ˜¯ä¸ºäº†ä¿è¯å„æ–½å·¥è¿‡ç¨‹é¡ºåˆ©è¿›è¡Œè€Œæ­è®¾çš„å·¥ä½œå¹³å°</p>
</li>
</ul>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/1586936282638.png" alt="1586936282638"></p>
<blockquote>
<h3 id="vue-cliçš„å¥½å¤„"><a href="#vue-cliçš„å¥½å¤„" class="headerlink" title="@vue/cliçš„å¥½å¤„"></a>@vue/cliçš„å¥½å¤„</h3></blockquote>
<ul>
<li><p>å¼€ç®±å³ç”¨</p>
<p>0é…ç½®webpack</p>
<p>babelæ”¯æŒ</p>
<p>css, lessæ”¯æŒ</p>
<p>å¼€å‘æœåŠ¡å™¨æ”¯æŒ</p>
</li>
</ul>
<h3 id="2-1-vue-cliå®‰è£…"><a href="#2-1-vue-cliå®‰è£…" class="headerlink" title="2.1_@vue/cliå®‰è£…"></a>2.1_@vue/cliå®‰è£…</h3><blockquote>
<p>ç›®æ ‡: æŠŠ@vue/cliæ¨¡å—åŒ…æŒ‰åˆ°å…¨å±€, ç”µè„‘æ‹¥æœ‰vueå‘½ä»¤, æ‰èƒ½åˆ›å»ºè„šæ‰‹æ¶å·¥ç¨‹</p>
</blockquote>
<ul>
<li>å…¨å±€å®‰è£…å‘½ä»¤</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn global add @vue/cli</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></tbody></table></figure>

<p>æ³¨æ„: å¦‚æœåŠå¤©æ²¡åŠ¨é™(95%éƒ½æ˜¯ç½‘é€Ÿé—®é¢˜), å¯ä»¥ctrl c </p>
<ol>
<li><p>åœæ­¢é‡æ–°æ¥</p>
</li>
<li><p>æ¢ä¸€ä¸ªç½‘ç»§ç»­é‡æ¥</p>
</li>
</ol>
<ul>
<li>æŸ¥çœ‹<code>vue</code>è„šæ‰‹æ¶ç‰ˆæœ¬</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">vue -V</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å¦‚æœå‡ºç°ç‰ˆæœ¬å·å°±å®‰è£…æˆåŠŸ, å¦åˆ™å¤±è´¥</p>
</blockquote>
<h3 id="2-2-vue-cli-åˆ›å»ºé¡¹ç›®å¯åŠ¨æœåŠ¡"><a href="#2-2-vue-cli-åˆ›å»ºé¡¹ç›®å¯åŠ¨æœåŠ¡" class="headerlink" title="2.2_@vue/cli åˆ›å»ºé¡¹ç›®å¯åŠ¨æœåŠ¡"></a>2.2_@vue/cli åˆ›å»ºé¡¹ç›®å¯åŠ¨æœåŠ¡</h3><blockquote>
<p>ç›®æ ‡: ä½¿ç”¨vueå‘½ä»¤, åˆ›å»ºè„šæ‰‹æ¶é¡¹ç›®</p>
</blockquote>
<p>==æ³¨æ„: é¡¹ç›®åä¸èƒ½å¸¦å¤§å†™å­—æ¯, ä¸­æ–‡å’Œç‰¹æ®Šç¬¦å·==</p>
<ol>
<li>åˆ›å»ºé¡¹ç›®</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># vueå’Œcreateæ˜¯å‘½ä»¤, vuecli-demoæ˜¯æ–‡ä»¶å¤¹å</span></span><br><span class="line">vue create vuecli-demo</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li><p>é€‰æ‹©æ¨¡æ¿</p>
<p>==å¯ä»¥ä¸Šä¸‹ç®­å¤´é€‰æ‹©, å¼„é”™äº†ctrl+cé‡æ¥==</p>
</li>
</ol>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210116230221236.png" alt="image-20210116230221236"></p>
<p>â€‹         é€‰æ‹©ç”¨ä»€ä¹ˆæ–¹å¼ä¸‹è½½è„šæ‰‹æ¶é¡¹ç›®éœ€è¦çš„ä¾èµ–åŒ…<img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/Snipaste_2021-03-26_15-24-14.png" alt="Snipaste_2021-03-26_15-24-14"></p>
<ol start="3">
<li>å›è½¦ç­‰å¾…ç”Ÿæˆé¡¹ç›®æ–‡ä»¶å¤¹+æ–‡ä»¶+ä¸‹è½½å¿…é¡»çš„ç¬¬ä¸‰æ–¹åŒ…ä»¬</li>
</ol>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210212174314768.png" alt="image-20210212174314768"></p>
<ol start="4">
<li>è¿›å…¥è„šæ‰‹æ¶é¡¹ç›®ä¸‹, å¯åŠ¨å†…ç½®çš„çƒ­æ›´æ–°æœ¬åœ°æœåŠ¡å™¨</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> vuecil-demo</span><br><span class="line"></span><br><span class="line">npm run serve</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">yarn serve</span><br></pre></td></tr></tbody></table></figure>

<p>åªè¦çœ‹åˆ°ç»¿è‰²çš„ - å•Š. ä½ æˆåŠŸäº†(åº•å±‚node+webpackçƒ­æ›´æ–°æœåŠ¡)</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210116231815543.png" alt="image-20210116231815543"></p>
<p>æ‰“å¼€æµè§ˆå™¨è¾“å…¥ä¸Šè¿°åœ°å€</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210116233035582.png" alt="image-20210116233035582"></p>
<blockquote>
<p>æ€»ç»“: vueå‘½ä»¤åˆ›å»ºå·¥ç¨‹ç›®å½•, é¡¹ç›®å†…ç½®webpackæœ¬åœ°çƒ­æ›´æ–°æœåŠ¡å™¨, å¸®æˆ‘ä»¬æ‰“åŒ…é¡¹ç›®é¢„è§ˆé¡¹ç›®</p>
</blockquote>
<h3 id="2-3-vue-cli-ç›®å½•å’Œä»£ç åˆ†æ"><a href="#2-3-vue-cli-ç›®å½•å’Œä»£ç åˆ†æ" class="headerlink" title="2.3 @vue/cli ç›®å½•å’Œä»£ç åˆ†æ"></a>2.3 @vue/cli ç›®å½•å’Œä»£ç åˆ†æ</h3><blockquote>
<p>ç›®æ ‡: é‡ç‚¹æ–‡ä»¶å¤¹, æ–‡ä»¶çš„ä½œç”¨, ä»¥åŠæ–‡ä»¶é‡Œä»£ç çš„æ„æ€</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">vuecil-demo        <span class="comment"># é¡¹ç›®ç›®å½•</span></span><br><span class="line">   â”œâ”€â”€ node_modules <span class="comment"># é¡¹ç›®ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…</span></span><br><span class="line">   â”œâ”€â”€ public       <span class="comment"># é™æ€æ–‡ä»¶ç›®å½•</span></span><br><span class="line">     â”œâ”€â”€ favicon.ico<span class="comment"># æµè§ˆå™¨å°å›¾æ ‡</span></span><br><span class="line">     â””â”€â”€ index.html <span class="comment"># å•é¡µé¢çš„htmlæ–‡ä»¶(ç½‘é¡µæµè§ˆçš„æ˜¯å®ƒ)</span></span><br><span class="line">   â”œâ”€â”€ src          <span class="comment"># ä¸šåŠ¡æ–‡ä»¶å¤¹</span></span><br><span class="line">     â”œâ”€â”€ assets     <span class="comment"># é™æ€èµ„æº</span></span><br><span class="line">       â””â”€â”€ logo.png <span class="comment"># vueçš„logoå›¾ç‰‡</span></span><br><span class="line">     â”œâ”€â”€ components <span class="comment"># ç»„ä»¶ç›®å½•</span></span><br><span class="line">       â””â”€â”€ HelloWorld.vue <span class="comment"># æ¬¢è¿é¡µé¢vueä»£ç æ–‡ä»¶ </span></span><br><span class="line">     â”œâ”€â”€ App.vue    <span class="comment"># æ•´ä¸ªåº”ç”¨çš„æ ¹ç»„ä»¶</span></span><br><span class="line">     â””â”€â”€ main.js    <span class="comment"># å…¥å£jsæ–‡ä»¶</span></span><br><span class="line">   â”œâ”€â”€ .gitignore   <span class="comment"># gitæäº¤å¿½ç•¥é…ç½®</span></span><br><span class="line">   â”œâ”€â”€ babel.config.js  <span class="comment"># babelé…ç½®</span></span><br><span class="line">   â”œâ”€â”€ package.json  <span class="comment"># ä¾èµ–åŒ…åˆ—è¡¨</span></span><br><span class="line">   â”œâ”€â”€ README.md    <span class="comment"># é¡¹ç›®è¯´æ˜</span></span><br><span class="line">â””â”€â”€ yarn.lock    <span class="comment"># é¡¹ç›®åŒ…ç‰ˆæœ¬é”å®šå’Œç¼“å­˜åœ°å€</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸»è¦æ–‡ä»¶åŠå«ä¹‰</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">node_modulesä¸‹éƒ½æ˜¯ä¸‹è½½çš„ç¬¬ä¸‰æ–¹åŒ…</span><br><span class="line">public/index.html â€“ æµè§ˆå™¨è¿è¡Œçš„ç½‘é¡µ</span><br><span class="line">src/main.js â€“ webpackæ‰“åŒ…çš„å…¥å£æ–‡ä»¶</span><br><span class="line">src/App.vue â€“ vueé¡¹ç›®å…¥å£é¡µé¢</span><br><span class="line">package.json â€“ ä¾èµ–åŒ…åˆ—è¡¨æ–‡ä»¶</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-4-vue-cli-é¡¹ç›®æ¶æ„äº†è§£"><a href="#2-4-vue-cli-é¡¹ç›®æ¶æ„äº†è§£" class="headerlink" title="2.4_@vue/cli é¡¹ç›®æ¶æ„äº†è§£"></a>2.4_@vue/cli é¡¹ç›®æ¶æ„äº†è§£</h3><blockquote>
<p>ç›®æ ‡: çŸ¥é“é¡¹ç›®å…¥å£, ä»¥åŠä»£ç æ‰§è¡Œé¡ºåºå’Œå¼•å…¥å…³ç³»</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210317201811310.png" alt="image-20210317201811310"></p>
<h3 id="2-5-vue-cli-è‡ªå®šä¹‰é…ç½®"><a href="#2-5-vue-cli-è‡ªå®šä¹‰é…ç½®" class="headerlink" title="2.5_@vue/cli è‡ªå®šä¹‰é…ç½®"></a>2.5_@vue/cli è‡ªå®šä¹‰é…ç½®</h3><blockquote>
<p>ç›®æ ‡ï¼šé¡¹ç›®ä¸­æ²¡æœ‰webpack.config.jsæ–‡ä»¶ï¼Œå› ä¸º@vue/cliç”¨çš„vue.config.js</p>
</blockquote>
<p>srcå¹¶åˆ—å¤„æ–°å»ºvue.config.js</p>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/* è¦†ç›–webpackçš„é…ç½® */</span></span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">devServer</span>: { <span class="comment">// è‡ªå®šä¹‰æœåŠ¡é…ç½®</span></span><br><span class="line">    <span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span><br><span class="line">    <span class="attr">port</span>: <span class="number">3000</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-6-eslintäº†è§£"><a href="#2-6-eslintäº†è§£" class="headerlink" title="2.6_eslintäº†è§£"></a>2.6_eslintäº†è§£</h3><blockquote>
<p>ç›®æ ‡: çŸ¥é“eslintçš„ä½œç”¨, å’Œå¦‚ä½•æš‚æ—¶å…³é—­, å®ƒæ˜¯ä¸€ä¸ª==ä»£ç æ£€æŸ¥å·¥å…·==</p>
</blockquote>
<p>ä¾‹å­: å…ˆåœ¨main.js éšä¾¿å£°æ˜ä¸ªå˜é‡, ä½†æ˜¯ä¸è¦ä½¿ç”¨</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210326165406694.png" alt="image-20210326165406694"></p>
<p>è§‚å¯Ÿå‘ç°, ç»ˆç«¯å’Œé¡µé¢éƒ½æŠ¥é”™äº†</p>
<p>==è®°ä½ä»¥åè§åˆ°è¿™æ ·å­çš„é”™è¯¯, è¯æ˜ä½ çš„ä»£ç ä¸ä¸¥è°¨==</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210326165544865.png" alt="image-20210326165544865"></p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210326165606191.png" alt="image-20210326165606191"></p>
<p>æ–¹å¼1: æ‰‹åŠ¨è§£å†³æ‰é”™è¯¯, ä»¥åé¡¹ç›®ä¸­ä¼šè®²å¦‚ä½•è‡ªåŠ¨è§£å†³</p>
<p>æ–¹å¼2: æš‚æ—¶å…³é—­eslintæ£€æŸ¥(å› ä¸ºç°åœ¨ä¸»è¦ç²¾åŠ›åœ¨å­¦ä¹ Vueè¯­æ³•ä¸Š), åœ¨vue.config.jsä¸­é…ç½®åé‡å¯æœåŠ¡</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/image-20210511112152702.png" alt="image-20210511112152702"></p>
<h3 id="2-7-vue-cli-å•vueæ–‡ä»¶è®²è§£"><a href="#2-7-vue-cli-å•vueæ–‡ä»¶è®²è§£" class="headerlink" title="2.7_@vue/cli å•vueæ–‡ä»¶è®²è§£"></a>2.7_@vue/cli å•vueæ–‡ä»¶è®²è§£</h3><blockquote>
<p>ç›®æ ‡: å•vueæ–‡ä»¶å¥½å¤„, ç‹¬ç«‹ä½œç”¨åŸŸäº’ä¸å½±å“</p>
</blockquote>
<p>Vueæ¨èé‡‡ç”¨.vueæ–‡ä»¶æ¥å¼€å‘é¡¹ç›®</p>
<p>templateé‡Œåªèƒ½æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾</p>
<p>vueæ–‡ä»¶-ç‹¬ç«‹æ¨¡å—-ä½œç”¨åŸŸäº’ä¸å½±å“</p>
<p>styleé…åˆscopedå±æ€§, ä¿è¯æ ·å¼åªé’ˆå¯¹å½“å‰templateå†…æ ‡ç­¾ç”Ÿæ•ˆ</p>
<p>vueæ–‡ä»¶é…åˆwebpack, æŠŠä»–ä»¬æ‰“åŒ…èµ·æ¥æ’å…¥åˆ°index.html</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- templateå¿…é¡», åªèƒ½æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾, å½±å“æ¸²æŸ“åˆ°é¡µé¢çš„æ ‡ç­¾ç»“æ„ --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;æ¬¢è¿ä½¿ç”¨vue&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- jsç›¸å…³ --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  name: 'App'</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å½“å‰ç»„ä»¶çš„æ ·å¼, è®¾ç½®scoped, å¯ä»¥ä¿è¯æ ·å¼åªå¯¹å½“å‰é¡µé¢æœ‰æ•ˆ --&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆ: Vueæ–‡ä»¶é…åˆwebpack, æŠŠä»–ä»¬æ‰“åŒ…èµ·æ¥æ’å…¥åˆ°index.html, ç„¶ååœ¨æµè§ˆå™¨è¿è¡Œ</p>
<h3 id="2-8-vue-cli-æ¬¢è¿ç•Œé¢æ¸…ç†"><a href="#2-8-vue-cli-æ¬¢è¿ç•Œé¢æ¸…ç†" class="headerlink" title="2.8_@vue/cli æ¬¢è¿ç•Œé¢æ¸…ç†"></a>2.8_@vue/cli æ¬¢è¿ç•Œé¢æ¸…ç†</h3><blockquote>
<p>ç›®æ ‡: æˆ‘ä»¬å¼€å§‹å†™æˆ‘ä»¬è‡ªå·±çš„ä»£ç , æ— éœ€æ¬¢è¿é¡µé¢</p>
</blockquote>
<ul>
<li>src/App.vueé»˜è®¤æœ‰å¾ˆå¤šå†…å®¹, å¯ä»¥å…¨éƒ¨åˆ é™¤ç•™ä¸‹æ¡†</li>
<li>assets å’Œ components æ–‡ä»¶å¤¹ä¸‹çš„ä¸€åˆ‡éƒ½åˆ é™¤æ‰ (ä¸è¦é»˜è®¤çš„æ¬¢è¿é¡µé¢)</li>
</ul>
<h2 id="3-VueæŒ‡ä»¤"><a href="#3-VueæŒ‡ä»¤" class="headerlink" title="==3. VueæŒ‡ä»¤=="></a>==3. VueæŒ‡ä»¤==</h2><h3 id="3-0-vueåŸºç¡€-æ’å€¼è¡¨è¾¾å¼"><a href="#3-0-vueåŸºç¡€-æ’å€¼è¡¨è¾¾å¼" class="headerlink" title="3.0_vueåŸºç¡€-æ’å€¼è¡¨è¾¾å¼"></a>3.0_vueåŸºç¡€-æ’å€¼è¡¨è¾¾å¼</h3><blockquote>
<p>ç›®çš„: åœ¨domæ ‡ç­¾ä¸­, ç›´æ¥æ’å…¥å†…å®¹</p>
</blockquote>
<p>åˆå«: å£°æ˜å¼æ¸²æŸ“/æ–‡æœ¬æ’å€¼</p>
<p>è¯­æ³•: </p>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>{{ msg }}<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>{{ obj.name }}<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>{{ obj.age &gt; 18 ? 'æˆå¹´' : 'æœªæˆå¹´' }}<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> { <span class="comment">// æ ¼å¼å›ºå®š, å®šä¹‰vueæ•°æ®ä¹‹å¤„</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> {  <span class="comment">// keyç›¸å½“äºå˜é‡å</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">msg</span>: <span class="string">"hello, vue"</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">obj</span>: {</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">name</span>: <span class="string">"å°vue"</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">age</span>: <span class="number">5</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      }</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    }</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  }</span></span></span><br><span class="line"><span class="javascript"><span class="xml">}</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: domä¸­æ’å€¼è¡¨è¾¾å¼èµ‹å€¼, vueçš„å˜é‡å¿…é¡»åœ¨dataé‡Œå£°æ˜</p>
</blockquote>
<h3 id="3-1-vueåŸºç¡€-MVVMè®¾è®¡æ¨¡å¼"><a href="#3-1-vueåŸºç¡€-MVVMè®¾è®¡æ¨¡å¼" class="headerlink" title="3.1_vueåŸºç¡€-MVVMè®¾è®¡æ¨¡å¼"></a>3.1_vueåŸºç¡€-MVVMè®¾è®¡æ¨¡å¼</h3><blockquote>
<p>ç›®çš„: è½¬å˜æ€ç»´, ç”¨æ•°æ®é©±åŠ¨è§†å›¾æ”¹å˜, æ“ä½œdomçš„äº‹, vueæºç å†…å¹²äº†</p>
</blockquote>
<p>è®¾è®¡æ¨¡å¼: æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚</p>
<p>æ¼”ç¤º: åœ¨ä¸Šä¸ªä»£ç åŸºç¡€ä¸Š, åœ¨devtoolå·¥å…·æ”¹å˜Må±‚çš„å˜é‡, è§‚å¯ŸVå±‚(è§†å›¾çš„è‡ªåŠ¨åŒæ­¥)</p>
<p>ç­‰ä¸‹é¢å­¦äº†v-modelå†è§‚å¯ŸVæ”¹å˜Mçš„æ•ˆæœ</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/1.gif" alt="1"></p>
<ul>
<li>MVVMï¼Œä¸€ç§è½¯ä»¶æ¶æ„æ¨¡å¼ï¼Œå†³å®šäº†å†™ä»£ç çš„æ€æƒ³å’Œå±‚æ¬¡<ul>
<li>Mï¼š   modelæ•°æ®æ¨¡å‹          (dataé‡Œå®šä¹‰)    </li>
<li>Vï¼š    viewè§†å›¾                   ï¼ˆhtmlé¡µé¢ï¼‰</li>
<li>VMï¼š ViewModelè§†å›¾æ¨¡å‹  (vue.jsæºç )</li>
</ul>
</li>
</ul>
<ul>
<li>MVVMé€šè¿‡<code>æ•°æ®åŒå‘ç»‘å®š</code>è®©æ•°æ®è‡ªåŠ¨åœ°åŒå‘åŒæ­¥  <strong>ä¸å†éœ€è¦æ“ä½œDOM</strong><ul>
<li>Vï¼ˆä¿®æ”¹è§†å›¾ï¼‰ -&gt; Mï¼ˆæ•°æ®è‡ªåŠ¨åŒæ­¥ï¼‰</li>
<li>Mï¼ˆä¿®æ”¹æ•°æ®ï¼‰ -&gt; Vï¼ˆè§†å›¾è‡ªåŠ¨åŒæ­¥ï¼‰</li>
</ul>
</li>
</ul>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/MVVM.png"></p>
<p><strong>1. åœ¨vueä¸­ï¼Œä¸æ¨èç›´æ¥æ‰‹åŠ¨æ“ä½œDOMï¼ï¼ï¼</strong>  </p>
<p><strong>2. åœ¨vueä¸­ï¼Œé€šè¿‡æ•°æ®é©±åŠ¨è§†å›¾ï¼Œä¸è¦åœ¨æƒ³ç€æ€ä¹ˆæ“ä½œDOMï¼Œè€Œæ˜¯æƒ³ç€å¦‚ä½•æ“ä½œæ•°æ®ï¼ï¼</strong>(æ€æƒ³è½¬å˜)</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A.png"></p>
<blockquote>
<p>æ€»ç»“: vueæºç å†…é‡‡ç”¨MVVMè®¾è®¡æ¨¡å¼æ€æƒ³, å¤§å¤§å‡å°‘äº†DOMæ“ä½œ, æŒºé«˜å¼€å‘æ•ˆç‡</p>
</blockquote>
<h3 id="3-2-vueæŒ‡ä»¤-v-bind"><a href="#3-2-vueæŒ‡ä»¤-v-bind" class="headerlink" title="3.2_vueæŒ‡ä»¤-v-bind"></a>3.2_vueæŒ‡ä»¤-v-bind</h3><blockquote>
<p>ç›®æ ‡: ç»™æ ‡ç­¾å±æ€§è®¾ç½®vueå˜é‡çš„å€¼</p>
</blockquote>
<p><strong>vueæŒ‡ä»¤, å®è´¨ä¸Šå°±æ˜¯ç‰¹æ®Šçš„ html æ ‡ç­¾å±æ€§, ç‰¹ç‚¹:  v- å¼€å¤´</strong></p>
<p>æ¯ä¸ªæŒ‡ä»¤, éƒ½æœ‰ç‹¬ç«‹çš„ä½œç”¨</p>
<ul>
<li>è¯­æ³•ï¼š<code>v-bind:å±æ€§å="vueå˜é‡"</code></li>
<li>ç®€å†™ï¼š<code>:å±æ€§å="vueå˜é‡"</code></li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- vueæŒ‡ä»¤-v-bindå±æ€§åŠ¨æ€èµ‹å€¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">"url"</span>&gt;</span>æˆ‘æ˜¯aæ ‡ç­¾<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"imgSrc"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æŠŠvueå˜é‡çš„å€¼, èµ‹äºˆç»™domå±æ€§ä¸Š, å½±å“æ ‡ç­¾æ˜¾ç¤ºæ•ˆæœ</p>
</blockquote>
<h3 id="3-3-vueæŒ‡ä»¤-v-on"><a href="#3-3-vueæŒ‡ä»¤-v-on" class="headerlink" title="3.3_vueæŒ‡ä»¤-v-on"></a>3.3_vueæŒ‡ä»¤-v-on</h3><blockquote>
<p>ç›®æ ‡: ç»™æ ‡ç­¾ç»‘å®šäº‹ä»¶</p>
</blockquote>
<ul>
<li>è¯­æ³•<ul>
<li>v-on:äº‹ä»¶å=â€è¦æ‰§è¡Œçš„==å°‘é‡ä»£ç ==â€</li>
<li>v-on:äº‹ä»¶å=â€methodsä¸­çš„å‡½æ•°â€</li>
<li>v-on:äº‹ä»¶å=â€methodsä¸­çš„å‡½æ•°(å®å‚)â€ </li>
</ul>
</li>
<li>ç®€å†™: @äº‹ä»¶å=â€methodsä¸­çš„å‡½æ•°â€</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- vueæŒ‡ä»¤:   v-onäº‹ä»¶ç»‘å®š--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½ è¦ä¹°å•†å“çš„æ•°é‡: {{count}}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"count = count + 1"</span>&gt;</span>å¢åŠ 1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"addFn"</span>&gt;</span>å¢åŠ 1ä¸ª<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">"addCountFn(5)"</span>&gt;</span>ä¸€æ¬¡åŠ 5ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"subFn"</span>&gt;</span>å‡å°‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// ...å…¶ä»–çœç•¥</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">addFn</span>(<span class="params"></span>)</span>{ <span class="comment">// thisä»£è¡¨export defaultåé¢çš„ç»„ä»¶å¯¹è±¡(ä¸‹å±æœ‰dataé‡Œreturnå‡ºæ¥çš„å±æ€§)</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.count++</span></span><br><span class="line"><span class="javascript">            },</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">addCountFn</span>(<span class="params">num</span>)</span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.count += num</span></span><br><span class="line"><span class="javascript">            },</span></span><br><span class="line"><span class="javascript">            <span class="function"><span class="title">subFn</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">                <span class="built_in">this</span>.count--</span></span><br><span class="line"><span class="javascript">            }</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å¸¸ç”¨@äº‹ä»¶å, ç»™domæ ‡ç­¾ç»‘å®šäº‹ä»¶, ä»¥åŠ=å³ä¾§äº‹ä»¶å¤„ç†å‡½æ•°</p>
</blockquote>
<h3 id="3-4-vueæŒ‡ä»¤-v-onäº‹ä»¶å¯¹è±¡"><a href="#3-4-vueæŒ‡ä»¤-v-onäº‹ä»¶å¯¹è±¡" class="headerlink" title="3.4_vueæŒ‡ä»¤-v-onäº‹ä»¶å¯¹è±¡"></a>3.4_vueæŒ‡ä»¤-v-onäº‹ä»¶å¯¹è±¡</h3><blockquote>
<p>ç›®æ ‡: vueäº‹ä»¶å¤„ç†å‡½æ•°ä¸­, æ‹¿åˆ°äº‹ä»¶å¯¹è±¡</p>
</blockquote>
<ul>
<li>è¯­æ³•:<ul>
<li>æ— ä¼ å‚, é€šè¿‡å½¢å‚ç›´æ¥æ¥æ”¶</li>
<li>ä¼ å‚, é€šè¿‡$eventæŒ‡ä»£äº‹ä»¶å¯¹è±¡ä¼ ç»™äº‹ä»¶å¤„ç†å‡½æ•°</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;a @click="one" href="http://www.baidu.com"&gt;é˜»æ­¢ç™¾åº¦&lt;/a&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;a @click="two(10, $event)" href="http://www.baidu.com"&gt;é˜»æ­¢å»ç™¾åº¦&lt;/a&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  methods: {</span><br><span class="line">    one(e){</span><br><span class="line">      e.preventDefault()</span><br><span class="line">    },</span><br><span class="line">    two(num, e){</span><br><span class="line">      e.preventDefault()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-5-vueæŒ‡ä»¤-v-onä¿®é¥°ç¬¦"><a href="#3-5-vueæŒ‡ä»¤-v-onä¿®é¥°ç¬¦" class="headerlink" title="3.5_vueæŒ‡ä»¤-v-onä¿®é¥°ç¬¦"></a>3.5_vueæŒ‡ä»¤-v-onä¿®é¥°ç¬¦</h3><blockquote>
<p>ç›®çš„: åœ¨äº‹ä»¶åé¢.ä¿®é¥°ç¬¦å - ç»™äº‹ä»¶å¸¦æ¥æ›´å¼ºå¤§çš„åŠŸèƒ½</p>
</blockquote>
<ul>
<li>è¯­æ³•:<ul>
<li>@äº‹ä»¶å.ä¿®é¥°ç¬¦=â€methodsé‡Œå‡½æ•°â€<ul>
<li>.stop - é˜»æ­¢äº‹ä»¶å†’æ³¡</li>
<li>.prevent - é˜»æ­¢é»˜è®¤è¡Œä¸º</li>
<li>.once - ç¨‹åºè¿è¡ŒæœŸé—´, åªè§¦å‘ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">"fatherFn"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- vueå¯¹äº‹ä»¶è¿›è¡Œäº†ä¿®é¥°ç¬¦è®¾ç½®, åœ¨äº‹ä»¶åé¢.ä¿®é¥°ç¬¦åå³å¯ä½¿ç”¨æ›´å¤šçš„åŠŸèƒ½ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">"btn"</span>&gt;</span>.stopé˜»æ­¢äº‹ä»¶å†’æ³¡<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span> @<span class="attr">click.prevent</span>=<span class="string">"btn"</span>&gt;</span>.preventé˜»æ­¢é»˜è®¤è¡Œä¸º<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.once</span>=<span class="string">"btn"</span>&gt;</span>.onceç¨‹åºè¿è¡ŒæœŸé—´, åªè§¦å‘ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">fatherFn</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">"fatherè¢«è§¦å‘"</span>);</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">btn</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ä¿®é¥°ç¬¦ç»™äº‹ä»¶æ‰©å±•é¢å¤–åŠŸèƒ½</p>
</blockquote>
<h3 id="3-6-vueæŒ‡ä»¤-v-onæŒ‰é”®ä¿®é¥°ç¬¦"><a href="#3-6-vueæŒ‡ä»¤-v-onæŒ‰é”®ä¿®é¥°ç¬¦" class="headerlink" title="3.6_vueæŒ‡ä»¤-v-onæŒ‰é”®ä¿®é¥°ç¬¦"></a>3.6_vueæŒ‡ä»¤-v-onæŒ‰é”®ä¿®é¥°ç¬¦</h3><blockquote>
<p>ç›®æ ‡: ç»™é”®ç›˜äº‹ä»¶, æ·»åŠ ä¿®é¥°ç¬¦, å¢å¼ºèƒ½åŠ›</p>
</blockquote>
<ul>
<li>è¯­æ³•:<ul>
<li>@keyup.enter  -  ç›‘æµ‹å›è½¦æŒ‰é”®</li>
<li>@keyup.esc     -   ç›‘æµ‹è¿”å›æŒ‰é”®</li>
</ul>
</li>
</ul>
<p><a href="https://cn.vuejs.org/v2/guide/events.html#%E6%8C%89%E9%94%AE%E4%BF%AE%E9%A5%B0%E7%AC%A6">æ›´å¤šä¿®é¥°ç¬¦</a> </p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keydown.enter</span>=<span class="string">"enterFn"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> @<span class="attr">keydown.esc</span>=<span class="string">"escFn"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript"> <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">   <span class="function"><span class="title">enterFn</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">     <span class="built_in">console</span>.log(<span class="string">"enterå›è½¦æŒ‰é”®äº†"</span>);</span></span><br><span class="line"><span class="javascript">   },</span></span><br><span class="line"><span class="javascript">   <span class="function"><span class="title">escFn</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">     <span class="built_in">console</span>.log(<span class="string">"escæŒ‰é”®äº†"</span>);</span></span><br><span class="line"><span class="javascript">   }</span></span><br><span class="line"><span class="javascript"> }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å¤šä½¿ç”¨äº‹ä»¶ä¿®é¥°ç¬¦, å¯ä»¥æé«˜å¼€å‘æ•ˆç‡, å°‘å»è‡ªå·±åˆ¤æ–­è¿‡ç¨‹</p>
</blockquote>
<h3 id="3-7-è¯¾ä¸Šç»ƒä¹ -ç¿»è½¬ä¸–ç•Œ"><a href="#3-7-è¯¾ä¸Šç»ƒä¹ -ç¿»è½¬ä¸–ç•Œ" class="headerlink" title="3.7_è¯¾ä¸Šç»ƒä¹ -ç¿»è½¬ä¸–ç•Œ"></a>3.7_è¯¾ä¸Šç»ƒä¹ -ç¿»è½¬ä¸–ç•Œ</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»æŒ‰é’® - æŠŠæ–‡å­—å–åæ˜¾ç¤º - å†ç‚¹å‡»å–åæ˜¾ç¤º(å›æ¥äº†)</p>
</blockquote>
<blockquote>
<p>æç¤º: æŠŠå­—ç¬¦ä¸²å–åèµ‹äºˆå›å»</p>
</blockquote>
<p>æ•ˆæœæ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/2.8.0_%E7%BB%83%E4%B9%A0_%E7%BF%BB%E8%BD%AC%E4%B8%96%E7%95%8C.gif" alt="ç»ƒä¹ 1_ç¿»è½¬ä¸–ç•Œ"></p>
<p>æ­£ç¡®ä»£ç :</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>{{ message }}<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btn"</span>&gt;</span>é€†è½¬ä¸–ç•Œ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">message</span>: <span class="string">"HELLO, WORLD"</span>,</span></span><br><span class="line"><span class="javascript">    };</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">btn</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.message = <span class="built_in">this</span>.message.split(<span class="string">""</span>).reverse().join(<span class="string">""</span>)</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: è®°ä½æ–¹æ³•ç‰¹ç‚¹, å¤šåšéœ€æ±‚, vueæ˜¯æ•°æ®å˜åŒ–è§†å›¾è‡ªåŠ¨æ›´æ–°, å‡å°‘æ“ä½œDOMæ—¶é—´, æé«˜å¼€å‘æ•ˆç‡</p>
</blockquote>
<h3 id="3-8-vueæŒ‡ä»¤-v-model"><a href="#3-8-vueæŒ‡ä»¤-v-model" class="headerlink" title="3.8_vueæŒ‡ä»¤ v-model"></a>3.8_vueæŒ‡ä»¤ v-model</h3><blockquote>
<p>ç›®æ ‡: æŠŠvalueå±æ€§å’Œvueæ•°æ®å˜é‡, åŒå‘ç»‘å®šåˆ°ä¸€èµ·</p>
</blockquote>
<ul>
<li>è¯­æ³•: v-model=â€vueæ•°æ®å˜é‡â€</li>
<li>åŒå‘æ•°æ®ç»‘å®š<ul>
<li>æ•°æ®å˜åŒ– -&gt; è§†å›¾è‡ªåŠ¨åŒæ­¥</li>
<li>è§†å›¾å˜åŒ– -&gt; æ•°æ®è‡ªåŠ¨åŒæ­¥</li>
</ul>
</li>
<li>æ¼”ç¤º: ç”¨æˆ·åç»‘å®š - vueå†…éƒ¨æ˜¯MVVMè®¾è®¡æ¨¡å¼</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">    	v-model:æ˜¯å®ç°vuejså˜é‡å’Œè¡¨å•æ ‡ç­¾valueå±æ€§, åŒå‘ç»‘å®šçš„æŒ‡ä»¤</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;ç”¨æˆ·å:&lt;/span&gt;</span><br><span class="line">      &lt;input type="text" v-model="username" /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;å¯†ç :&lt;/span&gt;</span><br><span class="line">      &lt;input type="password" v-model="pass" /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;æ¥è‡ªäº: &lt;/span&gt;</span><br><span class="line">      &lt;!-- ä¸‹æ‹‰èœå•è¦ç»‘å®šåœ¨selectä¸Š --&gt;</span><br><span class="line">      &lt;select v-model="from"&gt;</span><br><span class="line">        &lt;option value="åŒ—äº¬å¸‚"&gt;åŒ—äº¬&lt;/option&gt;</span><br><span class="line">        &lt;option value="å—äº¬å¸‚"&gt;å—äº¬&lt;/option&gt;</span><br><span class="line">        &lt;option value="å¤©æ´¥å¸‚"&gt;å¤©æ´¥&lt;/option&gt;</span><br><span class="line">      &lt;/select&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;!-- (é‡è¦)</span><br><span class="line">      é‡åˆ°å¤é€‰æ¡†, v-modelçš„å˜é‡å€¼</span><br><span class="line">      éæ•°ç»„ - å…³è”çš„æ˜¯å¤é€‰æ¡†çš„checkedå±æ€§</span><br><span class="line">      æ•°ç»„   - å…³è”çš„æ˜¯å¤é€‰æ¡†çš„valueå±æ€§</span><br><span class="line">       --&gt;</span><br><span class="line">      &lt;span&gt;çˆ±å¥½: &lt;/span&gt;</span><br><span class="line">      &lt;input type="checkbox" v-model="hobby" value="æŠ½çƒŸ"&gt;æŠ½çƒŸ</span><br><span class="line">      &lt;input type="checkbox" v-model="hobby" value="å–é…’"&gt;å–é…’</span><br><span class="line">      &lt;input type="checkbox" v-model="hobby" value="å†™ä»£ç "&gt;å†™ä»£ç </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;æ€§åˆ«: &lt;/span&gt;</span><br><span class="line">      &lt;input type="radio" value="ç”·" name="sex" v-model="gender"&gt;ç”·</span><br><span class="line">      &lt;input type="radio" value="å¥³" name="sex" v-model="gender"&gt;å¥³</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;è‡ªæˆ‘ä»‹ç»&lt;/span&gt;</span><br><span class="line">      &lt;textarea v-model="intro"&gt;&lt;/textarea&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      username: "",</span><br><span class="line">      pass: "",</span><br><span class="line">      from: "",</span><br><span class="line">      hobby: [], </span><br><span class="line">      sex: "",</span><br><span class="line">      intro: "",</span><br><span class="line">    };</span><br><span class="line">    // æ€»ç»“:</span><br><span class="line">    // ç‰¹åˆ«æ³¨æ„: v-model, åœ¨input[checkbox]çš„å¤šé€‰æ¡†çŠ¶æ€</span><br><span class="line">    // å˜é‡ä¸ºéæ•°ç»„, åˆ™ç»‘å®šçš„æ˜¯checkedçš„å±æ€§(true/false) - å¸¸ç”¨äº: å•ä¸ªç»‘å®šä½¿ç”¨</span><br><span class="line">    // å˜é‡ä¸ºæ•°ç»„, åˆ™ç»‘å®šçš„æ˜¯ä»–ä»¬çš„valueå±æ€§é‡Œçš„å€¼ - å¸¸ç”¨äº: æ”¶é›†å‹¾é€‰äº†å“ªäº›å€¼</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æœ¬é˜¶æ®µv-modelåªèƒ½ç”¨åœ¨è¡¨å•å…ƒç´ ä¸Š, ä»¥åå­¦ç»„ä»¶åè®²v-modelé«˜çº§ç”¨æ³•</p>
</blockquote>
<h3 id="3-9-vueæŒ‡ä»¤-v-modelä¿®é¥°ç¬¦"><a href="#3-9-vueæŒ‡ä»¤-v-modelä¿®é¥°ç¬¦" class="headerlink" title="3.9_vueæŒ‡ä»¤ v-modelä¿®é¥°ç¬¦"></a>3.9_vueæŒ‡ä»¤ v-modelä¿®é¥°ç¬¦</h3><blockquote>
<p>ç›®æ ‡: è®©v-modelæ‹¥æœ‰æ›´å¼ºå¤§çš„åŠŸèƒ½</p>
</blockquote>
<ul>
<li>è¯­æ³•:<ul>
<li>v-model.ä¿®é¥°ç¬¦=â€vueæ•°æ®å˜é‡â€<ul>
<li>.number   ä»¥parseFloatè½¬æˆæ•°å­—ç±»å‹</li>
<li>.trim          å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦</li>
<li>.lazy           åœ¨changeæ—¶è§¦å‘è€Œéinuptæ—¶</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;å¹´é¾„:&lt;/span&gt;</span><br><span class="line">      &lt;input type="text" v-model.number="age"&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;äººç”Ÿæ ¼è¨€:&lt;/span&gt;</span><br><span class="line">      &lt;input type="text" v-model.trim="motto"&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;è‡ªæˆ‘ä»‹ç»:&lt;/span&gt;</span><br><span class="line">      &lt;textarea v-model.lazy="intro"&gt;&lt;/textarea&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      age: "",</span><br><span class="line">      motto: "",</span><br><span class="line">      intro: ""</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: v-modelä¿®é¥°ç¬¦, å¯ä»¥å¯¹å€¼è¿›è¡Œé¢„å¤„ç†, éå¸¸é«˜æ•ˆå¥½ç”¨</p>
</blockquote>
<h3 id="3-10-vueæŒ‡ä»¤-v-textå’Œv-html"><a href="#3-10-vueæŒ‡ä»¤-v-textå’Œv-html" class="headerlink" title="3.10_vueæŒ‡ä»¤ v-textå’Œv-html"></a>3.10_vueæŒ‡ä»¤ v-textå’Œv-html</h3><blockquote>
<p>ç›®çš„: æ›´æ–°DOMå¯¹è±¡çš„innerText/innerHTML</p>
</blockquote>
<ul>
<li>è¯­æ³•:<ul>
<li>v-text=â€vueæ•°æ®å˜é‡â€    </li>
<li>v-html=â€vueæ•°æ®å˜é‡â€</li>
</ul>
</li>
<li>æ³¨æ„: ä¼šè¦†ç›–æ’å€¼è¡¨è¾¾å¼</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p v-text="str"&gt;&lt;/p&gt;</span><br><span class="line">    &lt;p v-html="str"&gt;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      str: "&lt;span&gt;æˆ‘æ˜¯ä¸€ä¸ªspanæ ‡ç­¾&lt;/span&gt;"</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: v-textæŠŠå€¼å½“æˆæ™®é€šå­—ç¬¦ä¸²æ˜¾ç¤º, v-htmlæŠŠå€¼å½“åšhtmlè§£æ</p>
</blockquote>
<h3 id="3-11-vueæŒ‡ä»¤-v-showå’Œv-if"><a href="#3-11-vueæŒ‡ä»¤-v-showå’Œv-if" class="headerlink" title="3.11_vueæŒ‡ä»¤ v-showå’Œv-if"></a>3.11_vueæŒ‡ä»¤ v-showå’Œv-if</h3><blockquote>
<p>ç›®æ ‡: æ§åˆ¶æ ‡ç­¾çš„éšè—æˆ–å‡ºç°</p>
</blockquote>
<ul>
<li>è¯­æ³•:<ul>
<li>v-show=â€vueå˜é‡â€            </li>
<li>v-if=â€vueå˜é‡â€ </li>
</ul>
</li>
<li>åŸç†<ul>
<li>v-show ç”¨çš„display:noneéšè—   (é¢‘ç¹åˆ‡æ¢ä½¿ç”¨)</li>
<li>v-if  ç›´æ¥ä»DOMæ ‘ä¸Šç§»é™¤</li>
</ul>
</li>
<li>é«˜çº§<ul>
<li>v-elseä½¿ç”¨</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">"isOk"</span>&gt;</span>v-showçš„ç›’å­<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-if</span>=<span class="string">"isOk"</span>&gt;</span>v-ifçš„ç›’å­<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">"age &gt; 18"</span>&gt;</span>æˆ‘æˆå¹´äº†<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-else</span>&gt;</span>è¿˜å¾—å¤šåƒé¥­<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">isOk</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">age</span>: <span class="number">15</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ä½¿ç”¨v-showå’Œv-ifä»¥åŠv-elseæŒ‡ä»¤, æ–¹ä¾¿é€šè¿‡å˜é‡æ§åˆ¶ä¸€å¥—æ ‡ç­¾å‡ºç°/éšè—</p>
</blockquote>
<h3 id="3-12-æ¡ˆä¾‹-æŠ˜å é¢æ¿"><a href="#3-12-æ¡ˆä¾‹-æŠ˜å é¢æ¿" class="headerlink" title="3.12_æ¡ˆä¾‹-æŠ˜å é¢æ¿"></a>3.12_æ¡ˆä¾‹-æŠ˜å é¢æ¿</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»å±•å¼€æˆ–æ”¶èµ·æ—¶ï¼ŒæŠŠå†…å®¹åŒºåŸŸæ˜¾ç¤ºæˆ–è€…éšè—</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/%E6%A1%88%E4%BE%8B_%E6%8A%98%E5%8F%A0%E9%9D%A2%E6%9D%BF.gif" alt="æ¡ˆä¾‹_æŠ˜å é¢æ¿"></p>
<p>æ­¤æ¡ˆä¾‹ä½¿ç”¨äº†lessè¯­æ³•, é¡¹ç›®ä¸­ä¸‹è½½æ¨¡å—</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add less@3.0.4 less-loader@5.0.0 -D</span><br></pre></td></tr></tbody></table></figure>

<p>åªæœ‰æ ‡ç­¾å’Œæ ·å¼</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;h3&gt;æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿&lt;/h3&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div class="title"&gt;</span><br><span class="line">        &lt;h4&gt;èŠ™è“‰æ¥¼é€è¾›æ¸&lt;/h4&gt;</span><br><span class="line">        &lt;span class="btn" &gt;</span><br><span class="line">          æ”¶èµ·</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class="container"&gt;</span><br><span class="line">        &lt;p&gt;å¯’é›¨è¿æ±Ÿå¤œå…¥å´,&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      </span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="less"&gt;</span><br><span class="line">body {</span><br><span class="line">  background-color: #ccc;</span><br><span class="line">  #app {</span><br><span class="line">    width: 400px;</span><br><span class="line">    margin: 20px auto;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    border: 4px solid blueviolet;</span><br><span class="line">    border-radius: 1em;</span><br><span class="line">    box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.5);</span><br><span class="line">    padding: 1em 2em 2em;</span><br><span class="line">    h3 {</span><br><span class="line">      text-align: center;</span><br><span class="line">    }</span><br><span class="line">    .title {</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-between;</span><br><span class="line">      align-items: center;</span><br><span class="line">      border: 1px solid #ccc;</span><br><span class="line">      padding: 0 1em;</span><br><span class="line">    }</span><br><span class="line">    .title h4 {</span><br><span class="line">      line-height: 2;</span><br><span class="line">      margin: 0;</span><br><span class="line">    }</span><br><span class="line">    .container {</span><br><span class="line">      border: 1px solid #ccc;</span><br><span class="line">      padding: 0 1em;</span><br><span class="line">    }</span><br><span class="line">    .btn {</span><br><span class="line">      /* é¼ æ ‡æ”¹æˆæ‰‹çš„å½¢çŠ¶ */</span><br><span class="line">      cursor: pointer;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ­£ç¡®ç­”æ¡ˆ:</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;h3&gt;æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿&lt;/h3&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div class="title"&gt;</span><br><span class="line">        &lt;h4&gt;èŠ™è“‰æ¥¼é€è¾›æ¸&lt;/h4&gt;</span><br><span class="line">        &lt;span class="btn" @click="isShow = !isShow"&gt;</span><br><span class="line">          {{ isShow ? 'æ”¶èµ·' : 'å±•å¼€' }}</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class="container" v-show="isShow"&gt;</span><br><span class="line">        &lt;p&gt;å¯’é›¨è¿æ±Ÿå¤œå…¥å´, &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      isShow: false</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-13-vueæŒ‡ä»¤-v-for"><a href="#3-13-vueæŒ‡ä»¤-v-for" class="headerlink" title="3.13_vueæŒ‡ä»¤-v-for"></a>3.13_vueæŒ‡ä»¤-v-for</h3><blockquote>
<p>ç›®æ ‡: åˆ—è¡¨æ¸²æŸ“, æ‰€åœ¨æ ‡ç­¾ç»“æ„, æŒ‰ç…§æ•°æ®æ•°é‡, å¾ªç¯ç”Ÿæˆ</p>
</blockquote>
<ul>
<li><p>è¯­æ³•</p>
<ul>
<li>v-for=â€(å€¼, ç´¢å¼•) in ç›®æ ‡ç»“æ„â€</li>
<li>v-for=â€å€¼ in ç›®æ ‡ç»“æ„â€</li>
</ul>
</li>
<li><p>ç›®æ ‡ç»“æ„:</p>
<ul>
<li>å¯ä»¥éå†æ•°ç»„ / å¯¹è±¡ / æ•°å­— / å­—ç¬¦ä¸² (å¯éå†ç»“æ„)</li>
</ul>
</li>
<li><p>æ³¨æ„:</p>
<p>v-forçš„ä¸´æ—¶å˜é‡åä¸èƒ½ç”¨åˆ°v-forèŒƒå›´å¤–</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;div id="app"&gt;</span><br><span class="line">      &lt;!-- v-for æŠŠä¸€ç»„æ•°æ®, æ¸²æŸ“æˆä¸€ç»„DOM --&gt;</span><br><span class="line">      &lt;!-- å£è¯€: è®©è°å¾ªç¯ç”Ÿæˆ, v-forå°±å†™è°èº«ä¸Š --&gt;</span><br><span class="line">      &lt;p&gt;å­¦ç”Ÿå§“å&lt;/p&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li v-for="(item, index) in arr" :key="item"&gt;</span><br><span class="line">          {{ index }} - {{ item }}</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;p&gt;å­¦ç”Ÿè¯¦ç»†ä¿¡æ¯&lt;/p&gt;</span><br><span class="line">      &lt;ul&gt;</span><br><span class="line">        &lt;li v-for="obj in stuArr" :key="obj.id"&gt;</span><br><span class="line">          &lt;span&gt;{{ obj.name }}&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;{{ obj.sex }}&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;{{ obj.hobby }}&lt;/span&gt;</span><br><span class="line">        &lt;/li&gt;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- v-foréå†å¯¹è±¡(äº†è§£) --&gt;</span><br><span class="line">      &lt;p&gt;è€å¸ˆä¿¡æ¯&lt;/p&gt;</span><br><span class="line">      &lt;div v-for="(value, key) in tObj" :key="value"&gt;</span><br><span class="line">        {{ key }} -- {{ value }}</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- v-foréå†æ•´æ•°(äº†è§£) - ä»1å¼€å§‹ --&gt;</span><br><span class="line">      &lt;p&gt;åºå·&lt;/p&gt;</span><br><span class="line">      &lt;div v-for="i in count" :key="i"&gt;{{ i }}&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      arr: ["å°æ˜", "å°æ¬¢æ¬¢", "å¤§é»„"],</span><br><span class="line">      stuArr: [</span><br><span class="line">        {</span><br><span class="line">          id: 1001,</span><br><span class="line">          name: "å­™æ‚Ÿç©º",</span><br><span class="line">          sex: "ç”·",</span><br><span class="line">          hobby: "åƒæ¡ƒå­",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          id: 1002,</span><br><span class="line">          name: "çŒªå…«æˆ’",</span><br><span class="line">          sex: "ç”·",</span><br><span class="line">          hobby: "èƒŒåª³å¦‡",</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">      tObj: {</span><br><span class="line">        name: "å°é»‘",</span><br><span class="line">        age: 18,</span><br><span class="line">        class: "1æœŸ",</span><br><span class="line">      },</span><br><span class="line">      count: 10,</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: vueæœ€å¸¸ç”¨æŒ‡ä»¤, é“ºè®¾é¡µé¢åˆ©å™¨, å¿«é€ŸæŠŠæ•°æ®èµ‹äºˆåˆ°ç›¸åŒçš„domç»“æ„ä¸Šå¾ªç¯ç”Ÿæˆ</p>
</blockquote>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li><input disabled="" type="checkbox"> Vueæ˜¯ä»€ä¹ˆ</li>
<li><input disabled="" type="checkbox"> Vue-cliä½œç”¨ä»¥åŠç®€å•ä½¿ç”¨</li>
<li><input disabled="" type="checkbox"> æ’å€¼è¡¨è¾¾å¼</li>
<li><input disabled="" type="checkbox"> MVVMè®¾è®¡æ¨¡å¼</li>
<li><input disabled="" type="checkbox"> v-bindä½œç”¨</li>
<li><input disabled="" type="checkbox"> v-onä½œç”¨å’Œäº‹ä»¶å¯¹è±¡ä»¥åŠä¿®é¥°ç¬¦ä½¿ç”¨</li>
<li><input disabled="" type="checkbox"> v-modelçš„ä½œç”¨ä»¥åŠåŒå‘æ•°æ®ç»‘å®šè§£é‡Š</li>
<li><input disabled="" type="checkbox"> v-ifå’Œv-showçš„åŒºåˆ«å’Œæœ¬è´¨</li>
<li><input disabled="" type="checkbox"> v-forçš„ä½œç”¨å’Œä½¿ç”¨</li>
<li><input disabled="" type="checkbox"> vueçš„ç‰¹ç‚¹<ul>
<li>æ¸è¿›å¼</li>
<li>å£°æ˜å¼æ¸²æŸ“</li>
<li>æ•°æ®é©±åŠ¨è§†å›¾ (å“åº”å¼)</li>
<li>æå°‘çš„å»å†™DOMæ“ä½œç›¸å…³ä»£ç </li>
<li>åŒå‘ç»‘å®š</li>
<li>ç»„ä»¶ç³»ç»Ÿ</li>
<li>ä¸å…¼å®¹IE8åŠä»¥ä¸‹æµè§ˆå™¨</li>
</ul>
</li>
</ul>
<h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><h3 id="1-Vueçš„æœ€å¤§ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ"><a href="#1-Vueçš„æœ€å¤§ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ" class="headerlink" title="1. Vueçš„æœ€å¤§ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ?"></a>1. Vueçš„æœ€å¤§ä¼˜åŠ¿æ˜¯ä»€ä¹ˆ?</h3><p>â€‹    ç®€å•æ˜“å­¦, è½»é‡çº§æ•´ä¸ªæºç jsæ–‡ä»¶ä¸å¤§, åŒå‘æ•°æ®ç»‘å®š, æ•°æ®é©±åŠ¨è§†å›¾, ç»„ä»¶åŒ–, æ•°æ®å’Œè§†å›¾åˆ†ç¦», </p>
<p>â€‹    vueè´Ÿè´£å…³è”è§†å›¾å’Œæ•°æ®, ä½œè€…ä¸­å›½äºº(å°¤é›¨æºª), æ–‡æ¡£éƒ½æ˜¯ä¸­æ–‡çš„, å…¥é—¨æ•™ç¨‹éå¸¸å¤š, ä¸Šæ‰‹ç®€å•. </p>
<p>â€‹    ç›¸æ¯”ä¼ ç»Ÿç½‘é¡µ, vueæ˜¯å•é¡µé¢å¯ä»¥åªåˆ·æ–°æŸä¸€éƒ¨åˆ†</p>
<h3 id="2-Vueå’ŒjQueryåŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#2-Vueå’ŒjQueryåŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="2. Vueå’ŒjQueryåŒºåˆ«æ˜¯ä»€ä¹ˆ?"></a>2. Vueå’ŒjQueryåŒºåˆ«æ˜¯ä»€ä¹ˆ?</h3><p>â€‹    jQueryåº”è¯¥ç®—æ˜¯ä¸€ä¸ªæ’ä»¶, é‡Œé¢å°è£…äº†å„ç§æ˜“ç”¨çš„æ–¹æ³•, æ–¹ä¾¿ä½ ä½¿ç”¨æ›´å°‘çš„ä»£ç æ¥æ“ä½œdomæ ‡ç­¾</p>
<p>â€‹    Vueæ˜¯ä¸€å¥—æ¡†æ¶, æœ‰è‡ªå·±çš„è§„åˆ™å’Œä½“ç³»ä¸è¯­æ³•, ç‰¹åˆ«æ˜¯è®¾è®¡æ€æƒ³MVVM, è®©æ•°æ®å’Œè§†é¢‘å…³è”ç»‘å®š, çœç•¥äº†å¾ˆå¤šDOMæ“ä½œ. ç„¶åæŒ‡ä»¤è¿˜ç»™æ ‡ç­¾æ³¨å…¥äº†æ›´å¤šçš„åŠŸèƒ½</p>
<h3 id="3-mvvmå’ŒmvcåŒºåˆ«æ˜¯ä»€ä¹ˆ"><a href="#3-mvvmå’ŒmvcåŒºåˆ«æ˜¯ä»€ä¹ˆ" class="headerlink" title="3. mvvmå’ŒmvcåŒºåˆ«æ˜¯ä»€ä¹ˆ?"></a>3. mvvmå’ŒmvcåŒºåˆ«æ˜¯ä»€ä¹ˆ?</h3><p>â€‹    MVC: ä¹Ÿæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼, ç»„ç»‡ä»£ç çš„ç»“æ„, æ˜¯modelæ•°æ®æ¨¡å‹, viewè§†å›¾, Controlleræ§åˆ¶å™¨, åœ¨æ§åˆ¶å™¨è¿™å±‚é‡Œç¼–å†™jsä»£ç , æ¥æ§åˆ¶æ•°æ®å’Œè§†å›¾å…³è”</p>
<p>â€‹    MVVM: å³Model-View-ViewModelçš„ç®€å†™ã€‚å³æ¨¡å‹-è§†å›¾-è§†å›¾æ¨¡å‹, VMæ˜¯è¿™ä¸ªè®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒ, è¿æ¥vå’Œmçš„æ¡¥æ¢, å†…éƒ¨ä¼šç›‘å¬DOMäº‹ä»¶, ç›‘å¬æ•°æ®å¯¹è±¡å˜åŒ–æ¥å½±å“å¯¹æ–¹. æˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°æ®ç»‘å®š</p>
<h3 id="4-Vueå¸¸ç”¨ä¿®é¥°ç¬¦æœ‰å“ªäº›"><a href="#4-Vueå¸¸ç”¨ä¿®é¥°ç¬¦æœ‰å“ªäº›" class="headerlink" title="4. Vueå¸¸ç”¨ä¿®é¥°ç¬¦æœ‰å“ªäº›?"></a>4. Vueå¸¸ç”¨ä¿®é¥°ç¬¦æœ‰å“ªäº›?</h3><p>â€‹    .prevent: æäº¤äº‹ä»¶ä¸å†é‡è½½é¡µé¢ï¼›</p>
<p>â€‹    .stop: é˜»æ­¢å•å‡»äº‹ä»¶å†’æ³¡ï¼›</p>
<p>â€‹    .once: åªæ‰§è¡Œä¸€æ¬¡è¿™ä¸ªäº‹ä»¶</p>
<h3 id="5-Vue2-xå…¼å®¹IEå“ªä¸ªç‰ˆæœ¬ä»¥ä¸Š"><a href="#5-Vue2-xå…¼å®¹IEå“ªä¸ªç‰ˆæœ¬ä»¥ä¸Š" class="headerlink" title="5. Vue2.xå…¼å®¹IEå“ªä¸ªç‰ˆæœ¬ä»¥ä¸Š"></a>5. Vue2.xå…¼å®¹IEå“ªä¸ªç‰ˆæœ¬ä»¥ä¸Š</h3><p>â€‹    ä¸æ”¯æŒie8åŠä»¥ä¸‹ï¼Œéƒ¨åˆ†å…¼å®¹ie9 ï¼Œå®Œå…¨å…¼å®¹10ä»¥ä¸Šï¼Œ å› ä¸ºvueçš„å“åº”å¼åŸç†æ˜¯åŸºäºes5çš„Object.defineProperty(),è€Œè¿™ä¸ªæ–¹æ³•ä¸æ”¯æŒie8åŠä»¥ä¸‹ã€‚</p>
<h3 id="6-å¯¹Vueæ¸è¿›å¼çš„ç†è§£"><a href="#6-å¯¹Vueæ¸è¿›å¼çš„ç†è§£" class="headerlink" title="6. å¯¹Vueæ¸è¿›å¼çš„ç†è§£"></a>6. å¯¹Vueæ¸è¿›å¼çš„ç†è§£</h3><p>â€‹    æ¸è¿›å¼ä»£è¡¨çš„å«ä¹‰æ˜¯ï¼šä¸»å¼ æœ€å°‘, è‡ªåº•å‘ä¸Š, å¢é‡å¼€å‘, ç»„ä»¶é›†åˆ, ä¾¿äºå¤ç”¨</p>
<h3 id="7-v-showå’Œv-ifçš„åŒºåˆ«"><a href="#7-v-showå’Œv-ifçš„åŒºåˆ«" class="headerlink" title="7. v-showå’Œv-ifçš„åŒºåˆ«"></a>7. v-showå’Œv-ifçš„åŒºåˆ«</h3><p>â€‹    v-showå’Œv-ifçš„åŒºåˆ«? åˆ†åˆ«è¯´æ˜å…¶ä½¿ç”¨åœºæ™¯?</p>
<p>â€‹    v-show å’Œv-iféƒ½æ˜¯trueçš„æ—¶å€™æ˜¾ç¤ºï¼Œfalseçš„æ—¶å€™éšè—</p>
<p>â€‹    ä½†æ˜¯ï¼šfalseçš„æƒ…å†µä¸‹ï¼Œ</p>
<p>â€‹    v-showæ˜¯é‡‡ç”¨çš„display:none   </p>
<p>â€‹    v-ifé‡‡ç”¨æƒ°æ€§åŠ è½½</p>
<p>â€‹    å¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºéšè—éœ€è¦ä½¿ç”¨v-show</p>
<h3 id="8-è¯´å‡ºè‡³å°‘4ä¸ªVueæŒ‡ä»¤åŠä½œç”¨"><a href="#8-è¯´å‡ºè‡³å°‘4ä¸ªVueæŒ‡ä»¤åŠä½œç”¨" class="headerlink" title="8. è¯´å‡ºè‡³å°‘4ä¸ªVueæŒ‡ä»¤åŠä½œç”¨"></a>8. è¯´å‡ºè‡³å°‘4ä¸ªVueæŒ‡ä»¤åŠä½œç”¨</h3><p>â€‹    v-for æ ¹æ®æ•°ç»„çš„ä¸ªæ•°, å¾ªç¯æ•°ç»„å…ƒç´ çš„åŒæ—¶è¿˜ç”Ÿæˆæ‰€åœ¨çš„æ ‡ç­¾</p>
<p>â€‹    v-show æ˜¾ç¤ºå†…å®¹</p>
<p>â€‹    v-if    æ˜¾ç¤ºä¸éšè—  </p>
<p>â€‹    v-else  å¿…é¡»å’Œv-ifè¿ç”¨  ä¸èƒ½å•ç‹¬ä½¿ç”¨  å¦åˆ™æŠ¥é”™  </p>
<p>â€‹    v-bind  åŠ¨æ€ç»‘å®š  ä½œç”¨ï¼š åŠæ—¶å¯¹é¡µé¢çš„æ•°æ®è¿›è¡Œæ›´æ”¹, å¯ä»¥ç®€å†™æˆ:åˆ†å·</p>
<p>â€‹    v-on  ç»™æ ‡ç­¾ç»‘å®šå‡½æ•°ï¼Œå¯ä»¥ç¼©å†™ä¸º@ï¼Œä¾‹å¦‚ç»‘å®šä¸€ä¸ªç‚¹å‡»å‡½æ•°  å‡½æ•°å¿…é¡»å†™åœ¨methodsé‡Œé¢</p>
<p>â€‹    v-text  è§£ææ–‡æœ¬</p>
<p>â€‹    v-html   è§£æhtmlæ ‡ç­¾</p>
<h3 id="9-ä¸ºä»€ä¹ˆé¿å…v-forå’Œv-ifåœ¨ä¸€èµ·ä½¿ç”¨"><a href="#9-ä¸ºä»€ä¹ˆé¿å…v-forå’Œv-ifåœ¨ä¸€èµ·ä½¿ç”¨" class="headerlink" title="9. ä¸ºä»€ä¹ˆé¿å…v-forå’Œv-ifåœ¨ä¸€èµ·ä½¿ç”¨"></a>9. ä¸ºä»€ä¹ˆé¿å…v-forå’Œv-ifåœ¨ä¸€èµ·ä½¿ç”¨</h3><p>â€‹    Vue å¤„ç†æŒ‡ä»¤æ—¶ï¼Œv-for æ¯” v-if å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§, è™½ç„¶ç”¨èµ·æ¥ä¹Ÿæ²¡æŠ¥é”™å¥½ä½¿, ä½†æ˜¯æ€§èƒ½ä¸é«˜, å¦‚æœä½ æœ‰5ä¸ªå…ƒç´ è¢«v-forå¾ªç¯, v-ifä¹Ÿä¼šåˆ†åˆ«æ‰§è¡Œ5æ¬¡.</p>
<h2 id="é™„åŠ ç»ƒä¹ -1-å¸…å“¥ç¾å¥³èµ°ä¸€èµ°"><a href="#é™„åŠ ç»ƒä¹ -1-å¸…å“¥ç¾å¥³èµ°ä¸€èµ°" class="headerlink" title="é™„åŠ ç»ƒä¹ -1.å¸…å“¥ç¾å¥³èµ°ä¸€èµ°"></a>é™„åŠ ç»ƒä¹ -1.å¸…å“¥ç¾å¥³èµ°ä¸€èµ°</h2><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»æŒ‰é’®, æ”¹å˜3ä¸ªliçš„é¡ºåº, åœ¨å¤´ä¸Šçš„å°±åˆ°æœ«å°¾.</p>
</blockquote>
<blockquote>
<p>æç¤º: æ“ä½œæ•°ç»„é‡Œçš„é¡ºåº, v-forå°±ä¼šé‡æ–°æ¸²æŸ“li</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/2.8.1_%E7%BB%83%E4%B9%A0_%E5%B8%85%E5%93%A5%E7%BE%8E%E5%A5%B3%E8%B5%B0%E4%B8%80%E8%B5%B0.gif" alt="ç»ƒä¹ 2_æ”¹å˜æ•°ç»„é¡ºåº_å½±å“vforæŒ‡ä»¤çš„æ ‡ç­¾"></p>
<p>æ­£ç¡®ä»£ç (==å…ˆä¸è¦çœ‹==)</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in myArr"</span> <span class="attr">:key</span>=<span class="string">"item"</span>&gt;</span>{{ item }}<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btn"</span>&gt;</span>èµ°ä¸€èµ°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">myArr</span>: [<span class="string">"å¸…å“¥"</span>, <span class="string">"ç¾å¥³"</span>, <span class="string">"ç¨‹åºçŒ¿"</span>],</span></span><br><span class="line"><span class="javascript">    };</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">btn</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">      <span class="comment">// å¤´éƒ¨æ•°æ®åŠ å…¥åˆ°æœ«å°¾</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.myArr.push(<span class="built_in">this</span>.myArr[<span class="number">0</span>]);</span></span><br><span class="line"><span class="javascript">      <span class="comment">// å†æŠŠå¤´éƒ¨çš„æ•°æ®åˆ é™¤æ‰</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.myArr.shift();</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="é™„åŠ ç»ƒä¹ -2-åŠ åŠ å‡å‡"><a href="#é™„åŠ ç»ƒä¹ -2-åŠ åŠ å‡å‡" class="headerlink" title="é™„åŠ ç»ƒä¹ -2.åŠ åŠ å‡å‡"></a>é™„åŠ ç»ƒä¹ -2.åŠ åŠ å‡å‡</h2><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»ç”ŸæˆæŒ‰é’®, æ–°å¢ä¸€ä¸ªli(éšæœºæ•°å­—)å’Œåˆ é™¤æŒ‰é’®, ç‚¹å‡»åˆ é™¤æŒ‰é’®, åˆ é™¤å¯¹åº”çš„liå’Œå€¼</p>
</blockquote>
<blockquote>
<p>æç¤º: æ•°ç»„æ¸²æŸ“åˆ—è¡¨, ç”Ÿæˆå’Œåˆ é™¤éƒ½å›´ç»•æ•°ç»„æ“ä½œ</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/2.8.2_%E7%BB%83%E4%B9%A0_%E4%BA%BA%E7%94%9F%E5%8A%A0%E5%8A%A0%E5%87%8F%E5%87%8F.gif" alt="ç»ƒä¹ 3_ç‚¹å‡»ç”Ÿæˆ_ç‚¹å‡»åˆ é™¤"></p>
<p>æ­£ç¡®ä»£ç :(==å…ˆä¸è¦çœ‹==)</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item, ind) in arr"</span> <span class="attr">:key</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ item }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"del(ind)"</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"add"</span>&gt;</span>ç”Ÿæˆ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">arr</span>: [<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>],</span></span><br><span class="line"><span class="javascript">    };</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">add</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.arr.push(<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">20</span>));</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">del</span>(<span class="params">index</span>)</span> {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.arr.splice(index, <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="é™„åŠ ç»ƒä¹ -3-è´­ç‰©è½¦"><a href="#é™„åŠ ç»ƒä¹ -3-è´­ç‰©è½¦" class="headerlink" title="é™„åŠ ç»ƒä¹ -3.è´­ç‰©è½¦"></a>é™„åŠ ç»ƒä¹ -3.è´­ç‰©è½¦</h2><blockquote>
<p>ç›®æ ‡: å®Œæˆå•†å“æµè§ˆå’Œåˆ é™¤åŠŸèƒ½, å½“æ— æ•°æ®ç»™ç”¨æˆ·æç¤º</p>
</blockquote>
<ul>
<li>éœ€æ±‚1: æ ¹æ®ç»™çš„åˆå§‹æ•°æ®, æŠŠè´­ç‰©è½¦é¡µé¢é“ºè®¾å‡ºæ¥</li>
<li>éœ€æ±‚2: ç‚¹å‡»å¯¹åº”åˆ é™¤æŒ‰é’®, åˆ é™¤å¯¹åº”æ•°æ®</li>
<li>éœ€æ±‚3: å½“æ•°æ®æ²¡æœ‰äº†, æ˜¾ç¤ºä¸€æ¡æç¤ºæ¶ˆæ¯</li>
</ul>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/3.0_%E6%A1%88%E4%BE%8B_%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%A0%E9%99%A4_%E5%B9%B2%E5%87%80%E4%BA%86%E8%BF%98%E6%9C%89%E6%8F%90%E7%A4%BA.gif" alt="3.0_æ¡ˆä¾‹_è´­ç‰©è½¦åˆ é™¤_å¹²å‡€äº†è¿˜æœ‰æç¤º"></p>
<p>html+csså’Œæ•°æ®ä»£ç ç»“æ„(==å¯å¤åˆ¶æ¥ç€å†™==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;table class="tb"&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;ç¼–å·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å“ç‰Œåç§°&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;åˆ›ç«‹æ—¶é—´&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">      &lt;!-- å¾ªç¯æ¸²æŸ“çš„å…ƒç´ tr --&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;1&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;è½¦å&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;2020-08-09&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">          &lt;button&gt;åˆ é™¤&lt;/button&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;td colspan="4"&gt;æ²¡æœ‰æ•°æ®å’¯~&lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [</span><br><span class="line">        { id: 1, name: "å¥”é©°", time: "2020-08-01" },</span><br><span class="line">        { id: 2, name: "å®é©¬", time: "2020-08-02" },</span><br><span class="line">        { id: 3, name: "å¥¥è¿ª", time: "2020-08-03" },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">#app {</span><br><span class="line">  width: 600px;</span><br><span class="line">  margin: 10px auto;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.tb {</span><br><span class="line">  border-collapse: collapse;</span><br><span class="line">  width: 100%;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.tb th {</span><br><span class="line">  background-color: #0094ff;</span><br><span class="line">  color: white;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.tb td,</span><br><span class="line">.tb th {</span><br><span class="line">  padding: 5px;</span><br><span class="line">  border: 1px solid black;</span><br><span class="line">  text-align: center;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.add {</span><br><span class="line">  padding: 5px;</span><br><span class="line">  border: 1px solid black;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ­£ç¡®ä»£ç (==å…ˆä¸è¦çœ‹==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;table class="tb"&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;ç¼–å·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å“ç‰Œåç§°&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;åˆ›ç«‹æ—¶é—´&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">      &lt;!-- å¾ªç¯æ¸²æŸ“çš„å…ƒç´ tr --&gt;</span><br><span class="line">      &lt;tr v-for="(item,index) in list" :key="item.id"&gt;</span><br><span class="line">            &lt;td&gt;{{item.id}}&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;{{item.name}}&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;{{item.time}}&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;button @click="del(index)"&gt;åˆ é™¤&lt;/button&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;tr v-if="list.length === 0"&gt;</span><br><span class="line">        &lt;td colspan="4"&gt;æ²¡æœ‰æ•°æ®å’¯~&lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [</span><br><span class="line">        { id: 1, name: "å¥”é©°", time: "2020-08-01" },</span><br><span class="line">        { id: 2, name: "å®é©¬", time: "2020-08-02" },</span><br><span class="line">        { id: 3, name: "å¥¥è¿ª", time: "2020-08-03" },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    del(index) {</span><br><span class="line">      // åˆ é™¤æŒ‰é’® - å¾—åˆ°ç´¢å¼•, åˆ é™¤æ•°ç»„é‡Œå…ƒç´ </span><br><span class="line">      this.list.splice(index, 1);</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å°æ¡ˆä¾‹"><a href="#å°æ¡ˆä¾‹" class="headerlink" title="å°æ¡ˆä¾‹"></a>å°æ¡ˆä¾‹</h2><h3 id="demo1-é€›æ°´æœåº—"><a href="#demo1-é€›æ°´æœåº—" class="headerlink" title="demo1-é€›æ°´æœåº—"></a>demo1-é€›æ°´æœåº—</h3><p>ä»0å¼€å§‹æ–°å»ºä¸€ä¸ªvuecliè„šæ‰‹æ¶é¡¹ç›®</p>
<p>æœ¬åº—æ”¶é“¶ç³»ç»Ÿé‡‡ç”¨vueå¼€å‘, å†²è¿™ç‚¹, ä½ ä¸æ¥ä¹°ç‚¹è¯•è¯•?</p>
<p>å…ˆçœ‹æ•ˆæœ - æ— css(ä½ æƒ³ç¾åŒ–ä¸‹, ä½ å°±å†™ç‚¹å“ˆå“ˆ)</p>
<blockquote>
<p>æç¤º: v-model=â€å˜é‡â€ è¾“å…¥æ¡†çš„å€¼ä¼šç»‘å®šç»™vueçš„è¿™ä¸ªå˜é‡(åˆ«å¿˜äº†åœ¨dataé‡Œå…ˆå£°æ˜å“¦)</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/Day01_%E4%BD%9C%E4%B8%9A_%E4%B9%B0%E6%B0%B4%E6%9E%9C.gif" alt="Day01_ä½œä¸š_ä¹°æ°´æœ"></p>
<p>åªè¦ä½ å®ç°äº†åŠŸèƒ½ ä½ å°±æ˜¯å¯¹çš„ (åªä¸è¿‡æ¯ä¸ªç¨‹åºå‘˜çš„æƒ³æ³•éƒ½ä¸å¤ªä¸€æ ·)</p>
<h3 id="demo2-é€‰æ‹©å–œæ¬¢çš„"><a href="#demo2-é€‰æ‹©å–œæ¬¢çš„" class="headerlink" title="demo2-é€‰æ‹©å–œæ¬¢çš„"></a>demo2-é€‰æ‹©å–œæ¬¢çš„</h3><p>ç›®æ ‡: ç”¨æˆ·é€‰æ‹©æ ç›®, æŠŠç”¨æˆ·é€‰ä¸­çš„æ ç›®ä¿¡æ¯åœ¨ä¸‹é¢åˆ—è¡¨æ˜¾ç¤ºå‡ºæ¥</p>
<blockquote>
<p>æç¤º: vueå˜é‡æ˜¯æ•°ç»„ç±»å‹, ç»‘å®šåœ¨checkboxæ ‡ç­¾ä¸Š</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®åœ¨è¿™é‡Œ</span></span><br><span class="line">[<span class="string">"ç§‘å¹»"</span>, <span class="string">"å–œå‰§"</span>, <span class="string">"åŠ¨æ¼«"</span>, <span class="string">"å†’é™©"</span>, <span class="string">"ç§‘æŠ€"</span>, <span class="string">"å†›äº‹"</span>, <span class="string">"å¨±ä¹"</span>, <span class="string">"å¥‡é—»"</span>]</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%801-vue%E8%84%9A%E6%89%8B%E6%9E%B6&amp;%E5%9F%BA%E7%A1%80API/4.9.1_%E7%BB%83%E4%B9%A0_%E9%80%89%E6%8B%A9%E5%96%9C%E6%AC%A2%E7%9A%84%E6%A0%8F%E7%9B%AE.gif" alt="4.9.1_ç»ƒä¹ _é€‰æ‹©å–œæ¬¢çš„æ ç›®"></p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåŸºç¡€2-åŸºç¡€API_è®¡ç®—å±æ€§_è¿‡æ»¤å™¨_ä¾¦å¬å™¨</title>
    <url>/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="çŸ¥è¯†ç‚¹è‡ªæµ‹"><a href="#çŸ¥è¯†ç‚¹è‡ªæµ‹" class="headerlink" title="çŸ¥è¯†ç‚¹è‡ªæµ‹"></a>çŸ¥è¯†ç‚¹è‡ªæµ‹</h2><ul>
<li><input disabled="" type="checkbox"> ä¼šè‡ªå·±å®šä¹‰æ•°æ®ç»“æ„</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="string">"çº¢è‰²"</span>,<span class="string">"red"</span>, <span class="string">"è“è‰²"</span>,<span class="string">"blue"</span>, </span><br><span class="line"><span class="comment">// ä¸Šé¢çš„æ•°æ®ç»“æ„, è¦ç”¨1ä¸ªå˜é‡æ¥è£…è¿™4ä¸ªå€¼, ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„å‘¢?(æ•°ç»„è¿˜æ˜¯å¯¹è±¡) - å¯¹è±¡(å¯æ˜ å°„key-&gt;value)</span></span><br><span class="line">    </span><br><span class="line"><span class="string">"å°æ˜"</span>, <span class="string">"å°è“"</span>, <span class="string">"å°èµµ"</span></span><br><span class="line"><span class="comment">// ä¸Šé¢çš„ç»“æ„ç”¨æ•°ç»„æ¯”è¾ƒåˆé€‚</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><input disabled="" type="checkbox"> é©¬ä¸Šèƒ½ååº”è¿‡æ¥å¾ªç¯éå†æ˜¯ä»€ä¹ˆ, ç´¢å¼•(ä¸‹è§’æ ‡)æ˜¯ä»€ä¹ˆ</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">10</span>, <span class="number">32</span>, <span class="number">99</span>];</span><br><span class="line"><span class="comment">// ç´¢å¼•å°±æ˜¯æ•°å­—, æ ‡è®°æ¯ä¸ªå€¼å¯¹åº”çš„åºå·, ä»0å¼€å§‹</span></span><br><span class="line"><span class="comment">// ç´¢å¼•æ˜¯0, 1, 2</span></span><br><span class="line"><span class="comment">// æ•°ç»„éœ€è¦ç”¨ç´¢å¼•æ¥æ¢å–å€¼, å›ºå®šæ ¼å¼ arr[ç´¢å¼•]</span></span><br><span class="line"><span class="comment">// éå†å°±æ˜¯æŒ¨ä¸ªå–å‡ºæ¥</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><input disabled="" type="checkbox"> æ•°ç»„çš„filteræ–¹æ³•ä½¿ç”¨</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">19</span>, <span class="number">29</span>, <span class="number">27</span>, <span class="number">20</span>, <span class="number">31</span>, <span class="number">32</span>, <span class="number">35</span>];</span><br><span class="line"><span class="keyword">let</span> newArr = arr.filter(<span class="function">(<span class="params">val</span>) =&gt;</span> {<span class="keyword">return</span> val &gt;= <span class="number">30</span>})</span><br><span class="line"><span class="comment">// æ•°ç»„è°ƒç”¨.filter()æ–¹æ³• - ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½“ (å›ºå®šæ ¼å¼)</span></span><br><span class="line"><span class="comment">// è¿è¡Œè¿‡ç¨‹: filterä¼šéå†æ•°ç»„é‡Œçš„æ¯ä¸€é¡¹, å¯¹æ¯ä¸€é¡¹æ‰§è¡Œä¸€æ¬¡å‡½æ•°ä½“(ä¼šæŠŠæ¯ä¸ªå€¼ä¼ ç»™å½¢å‚)</span></span><br><span class="line"><span class="comment">// ä½œç”¨: æ¯æ¬¡éå†å¦‚æœvalå€¼ç¬¦åˆreturnçš„æ¡ä»¶, å°±ä¼šè¢«filteræ”¶é›†èµ·æ¥</span></span><br><span class="line"><span class="comment">// è¿”å›å€¼: å½“filteréå†ç»“æŸä»¥å, è¿”å›æ”¶é›†åˆ°çš„ç¬¦åˆæ¡ä»¶çš„é‚£äº›å€¼å½¢æˆçš„æ–°æ•°ç»„</span></span><br><span class="line"><span class="built_in">console</span>.log(newArr);</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><input disabled="" type="checkbox"> é‡ç»˜ä¸å›æµ(é‡æ’)çš„æ¦‚å¿µ</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">å›æµ(é‡æ’): å½“æµè§ˆå™¨å¿…é¡»é‡æ–°å¤„ç†å’Œç»˜åˆ¶éƒ¨åˆ†æˆ–å…¨éƒ¨é¡µé¢æ—¶ï¼Œå›æµå°±ä¼šå‘ç”Ÿ</span><br><span class="line"></span><br><span class="line">é‡ç»˜: ä¸å½±å“å¸ƒå±€, åªæ˜¯æ ‡ç­¾é¡µé¢å‘ç”Ÿå˜åŒ–, é‡æ–°ç»˜åˆ¶</span><br><span class="line"></span><br><span class="line">æ³¨æ„: å›æµ(é‡æ’)å¿…å¼•å‘é‡ç»˜, é‡ç»˜ä¸ä¸€å®šå¼•å‘å›æµ(é‡æ’)</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><input disabled="" type="checkbox"> localStorageæµè§ˆå™¨æœ¬åœ°å­˜å‚¨è¯­æ³•ä½¿ç”¨</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">localStorage.setItem(<span class="string">"keyå"</span>, å€¼) - æŠŠå€¼å­˜åœ¨æµè§ˆå™¨æœ¬åœ°å«keyçš„å¯¹åº”ä½ç½®ä¸Š</span><br><span class="line"></span><br><span class="line">localStorage.getItem(<span class="string">"keyå"</span>) - æŠŠå«keyçš„å¯¹åº”å€¼, ä»æµè§ˆå™¨æœ¬åœ°å–å‡ºæ¥</span><br><span class="line"></span><br><span class="line">==å€¼åªèƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹, å¦‚æœä¸æ˜¯è¯·ç”¨JSON.stringifyè½¬, å–å‡ºåç”¨JSON.parseè½¬==</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><input disabled="" type="checkbox"> JSONçš„æ–¹æ³•ä½¿ç”¨</li>
</ul>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">JSON.stringify(JSæ•°æ®) - æŠŠJSæ•°æ®åºåˆ—åŒ–æˆJSONæ ¼å¼å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line">JSON.parse(JSONå­—ç¬¦ä¸²)  - æŠŠJSONæ ¼å¼åŒ–å­—ç¬¦ä¸², å†è½¬å›æˆJSæ•°æ®</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"><a href="#ä»Šæ—¥å­¦ä¹ ç›®æ ‡" class="headerlink" title="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"></a>ä»Šæ—¥å­¦ä¹ ç›®æ ‡</h2><ol>
<li>èƒ½å¤Ÿäº†è§£keyä½œç”¨, è™šæ‹ŸDOM, diffç®—æ³•</li>
<li>èƒ½å¤ŸæŒæ¡è®¾ç½®åŠ¨æ€æ ·å¼</li>
<li>èƒ½å¤ŸæŒæ¡è¿‡æ»¤å™¨, è®¡ç®—å±æ€§, ä¾¦å¬å™¨</li>
<li>èƒ½å¤Ÿå®Œæˆå“ç‰Œç®¡ç†æ¡ˆä¾‹</li>
</ol>
<h2 id="1-vueåŸºç¡€"><a href="#1-vueåŸºç¡€" class="headerlink" title="1. vueåŸºç¡€"></a>1. vueåŸºç¡€</h2><h3 id="1-0-vueåŸºç¡€-v-foræ›´æ–°ç›‘æµ‹"><a href="#1-0-vueåŸºç¡€-v-foræ›´æ–°ç›‘æµ‹" class="headerlink" title="1.0_vueåŸºç¡€ v-foræ›´æ–°ç›‘æµ‹"></a>1.0_vueåŸºç¡€ v-foræ›´æ–°ç›‘æµ‹</h3><blockquote>
<p>ç›®æ ‡: å½“v-foréå†çš„ç›®æ ‡ç»“æ„æ”¹å˜, Vueè§¦å‘v-forçš„æ›´æ–°</p>
</blockquote>
<p>æƒ…å†µ1: æ•°ç»„ç¿»è½¬</p>
<p>æƒ…å†µ2: æ•°ç»„æˆªå–</p>
<p>æƒ…å†µ3: æ›´æ–°å€¼</p>
<p>å£è¯€:</p>
<p>æ•°ç»„å˜æ›´æ–¹æ³•, å°±ä¼šå¯¼è‡´v-foræ›´æ–°, é¡µé¢æ›´æ–°</p>
<p>æ•°ç»„éå˜æ›´æ–¹æ³•, è¿”å›æ–°æ•°ç»„, å°±ä¸ä¼šå¯¼è‡´v-foræ›´æ–°, å¯é‡‡ç”¨è¦†ç›–æ•°ç»„æˆ–this.$set()</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for="(val, index) in arr" :key="index"&gt;</span><br><span class="line">        {{ val }}</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click="revBtn"&gt;æ•°ç»„ç¿»è½¬&lt;/button&gt;</span><br><span class="line">    &lt;button @click="sliceBtn"&gt;æˆªå–å‰3ä¸ª&lt;/button&gt;</span><br><span class="line">    &lt;button @click="updateBtn"&gt;æ›´æ–°ç¬¬ä¸€ä¸ªå…ƒç´ å€¼&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      arr: [5, 3, 9, 2, 1]</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    revBtn(){</span><br><span class="line">      // 1. æ•°ç»„ç¿»è½¬å¯ä»¥è®©v-foræ›´æ–°</span><br><span class="line">      this.arr.reverse()</span><br><span class="line">    },</span><br><span class="line">    sliceBtn(){</span><br><span class="line">      // 2. æ•°ç»„sliceæ–¹æ³•ä¸ä¼šé€ æˆv-foræ›´æ–°</span><br><span class="line">      // sliceä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„</span><br><span class="line">      // this.arr.slice(0, 3)</span><br><span class="line"></span><br><span class="line">      // è§£å†³v-foræ›´æ–° - è¦†ç›–åŸå§‹æ•°ç»„</span><br><span class="line">      let newArr = this.arr.slice(0, 3)</span><br><span class="line">      this.arr = newArr</span><br><span class="line">    },</span><br><span class="line">    updateBtn(){</span><br><span class="line">      // 3. æ›´æ–°æŸä¸ªå€¼çš„æ—¶å€™, v-foræ˜¯ç›‘æµ‹ä¸åˆ°çš„</span><br><span class="line">      // this.arr[0] = 1000;</span><br><span class="line"></span><br><span class="line">      // è§£å†³-this.$set()</span><br><span class="line">      // å‚æ•°1: æ›´æ–°ç›®æ ‡ç»“æ„</span><br><span class="line">      // å‚æ•°2: æ›´æ–°ä½ç½®</span><br><span class="line">      // å‚æ•°3: æ›´æ–°å€¼</span><br><span class="line">      this.$set(this.arr, 0, 1000)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™äº›æ–¹æ³•ä¼šè§¦å‘æ•°ç»„æ”¹å˜, v-forä¼šç›‘æµ‹åˆ°å¹¶æ›´æ–°é¡µé¢</p>
<ul>
<li><code>push()</code></li>
<li><code>pop()</code></li>
<li><code>shift()</code></li>
<li><code>unshift()</code></li>
<li><code>splice()</code></li>
<li><code>sort()</code></li>
<li><code>reverse()</code></li>
</ul>
<p>è¿™äº›æ–¹æ³•ä¸ä¼šè§¦å‘v-foræ›´æ–°</p>
<ul>
<li><code>slice()</code></li>
<li><code>filter()</code></li>
<li><code>concat()</code> </li>
</ul>
<blockquote>
<p>æ³¨æ„: vueä¸èƒ½ç›‘æµ‹åˆ°æ•°ç»„é‡Œèµ‹å€¼çš„åŠ¨ä½œè€Œæ›´æ–°, å¦‚æœéœ€è¦è¯·ä½¿ç”¨Vue.set() æˆ–è€…this.$set(), æˆ–è€…è¦†ç›–æ•´ä¸ªæ•°ç»„</p>
</blockquote>
<blockquote>
<p>æ€»ç»“:  æ”¹å˜åŸæ•°ç»„çš„æ–¹æ³•æ‰èƒ½è®©v-foræ›´æ–°</p>
</blockquote>
<h3 id="1-1-vueåŸºç¡€-v-forå°±åœ°æ›´æ–°"><a href="#1-1-vueåŸºç¡€-v-forå°±åœ°æ›´æ–°" class="headerlink" title="1.1_vueåŸºç¡€_v-forå°±åœ°æ›´æ–°"></a>1.1_vueåŸºç¡€_v-forå°±åœ°æ›´æ–°</h3><p><code>v-for</code> çš„é»˜è®¤è¡Œä¸ºä¼šå°è¯•åŸåœ°ä¿®æ”¹å…ƒç´ è€Œä¸æ˜¯ç§»åŠ¨å®ƒä»¬ã€‚</p>
<blockquote>
<p>è¯¦è§£v-forå°±åœ°æ›´æ–°æµç¨‹(å¯ä»¥çœ‹pptåŠ¨ç”»)</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210414215302318.png" alt="image-20210414215302318"></p>
<p>è¿™ç§ è™šæ‹ŸDOMå¯¹æ¯”æ–¹å¼, å¯ä»¥æé«˜æ€§èƒ½ - ä½†æ˜¯è¿˜ä¸å¤Ÿé«˜</p>
<h3 id="1-2-vueåŸºç¡€-è™šæ‹Ÿdom"><a href="#1-2-vueåŸºç¡€-è™šæ‹Ÿdom" class="headerlink" title="1.2_vueåŸºç¡€_è™šæ‹Ÿdom"></a>1.2_vueåŸºç¡€_è™šæ‹Ÿdom</h3><blockquote>
<p>ç›®æ ‡: äº†è§£è™šæ‹ŸDOMçš„æ¦‚å¿µ</p>
</blockquote>
<p>.vueæ–‡ä»¶ä¸­çš„templateé‡Œå†™çš„æ ‡ç­¾, éƒ½æ˜¯æ¨¡æ¿, éƒ½è¦è¢«vueå¤„ç†æˆè™šæ‹ŸDOMå¯¹è±¡, æ‰ä¼šæ¸²æŸ“æ˜¾ç¤ºåˆ°çœŸå®DOMé¡µé¢ä¸Š</p>
<ol>
<li><p>å†…å­˜ä¸­ç”Ÿæˆä¸€æ ·çš„è™šæ‹ŸDOMç»“æ„(==æœ¬è´¨æ˜¯ä¸ªJSå¯¹è±¡==)</p>
<p>å› ä¸ºçœŸå®çš„DOMå±æ€§å¥½å‡ ç™¾ä¸ª, æ²¡åŠæ³•å¿«é€Ÿçš„çŸ¥é“å“ªä¸ªå±æ€§æ”¹å˜äº†</p>
<p>æ¯”å¦‚templateé‡Œæ ‡ç­¾ç»“æ„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id="box"&gt;</span><br><span class="line">        &lt;p class="my_p"&gt;123&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>å¯¹åº”çš„è™šæ‹ŸDOMç»“æ„</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> dom = {</span><br><span class="line">    <span class="attr">type</span>: <span class="string">'div'</span>,</span><br><span class="line">    <span class="attr">attributes</span>: [{<span class="attr">id</span>: <span class="string">'box'</span>}],</span><br><span class="line">    <span class="attr">children</span>: {</span><br><span class="line">        <span class="attr">type</span>: <span class="string">'p'</span>,</span><br><span class="line">        <span class="attr">attributes</span>: [{<span class="attr">class</span>: <span class="string">'my_p'</span>}],</span><br><span class="line">        <span class="attr">text</span>: <span class="string">'123'</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä»¥åvueæ•°æ®æ›´æ–°</p>
<ul>
<li>ç”Ÿæˆæ–°çš„è™šæ‹ŸDOMç»“æ„</li>
<li>å’Œæ—§çš„è™šæ‹ŸDOMç»“æ„å¯¹æ¯”</li>
<li>åˆ©ç”¨diffç®—æ³•, æ‰¾ä¸ä¸åŒ, åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†(é‡ç»˜/å›æµ)åˆ°é¡µé¢ - ä¹Ÿå«æ‰“è¡¥ä¸</li>
</ul>
</li>
</ol>
<p>==å¥½å¤„1: æé«˜äº†æ›´æ–°DOMçš„æ€§èƒ½(ä¸ç”¨æŠŠé¡µé¢å…¨åˆ é™¤é‡æ–°æ¸²æŸ“)==</p>
<p>==å¥½å¤„2: è™šæ‹ŸDOMåªåŒ…å«å¿…è¦çš„å±æ€§(æ²¡æœ‰çœŸå®DOMä¸Šç™¾ä¸ªå±æ€§)==</p>
<blockquote>
<p>æ€»ç»“: è™šæ‹ŸDOMä¿å­˜åœ¨å†…å­˜ä¸­, åªè®°å½•domå…³é”®ä¿¡æ¯, é…åˆdiffç®—æ³•æé«˜DOMæ›´æ–°çš„æ€§èƒ½</p>
</blockquote>
<p>åœ¨å†…å­˜ä¸­æ¯”è¾ƒå·®å¼‚, ç„¶åç»™çœŸå®DOMæ‰“è¡¥ä¸æ›´æ–°ä¸Š</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210414215426783.png" alt="image-20210414215426783"></p>
<h3 id="1-3-vueåŸºç¡€-diffç®—æ³•"><a href="#1-3-vueåŸºç¡€-diffç®—æ³•" class="headerlink" title="1.3_vueåŸºç¡€_diffç®—æ³•"></a>1.3_vueåŸºç¡€_diffç®—æ³•</h3><p>vueç”¨diffç®—æ³•, æ–°è™šæ‹Ÿdom, å’Œæ—§çš„è™šæ‹Ÿdomæ¯”è¾ƒ</p>
<h4 id="æƒ…å†µ1-æ ¹å…ƒç´ å˜äº†-åˆ é™¤é‡å»º"><a href="#æƒ…å†µ1-æ ¹å…ƒç´ å˜äº†-åˆ é™¤é‡å»º" class="headerlink" title="æƒ…å†µ1: æ ¹å…ƒç´ å˜äº†, åˆ é™¤é‡å»º"></a>æƒ…å†µ1: æ ¹å…ƒç´ å˜äº†, åˆ é™¤é‡å»º</h4><p>æ—§è™šæ‹ŸDOM</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div id="box"&gt;</span><br><span class="line">    &lt;p class="my_p"&gt;123&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ–°è™šæ‹ŸDOM</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;ul id="box"&gt;</span><br><span class="line">    &lt;li class="my_p"&gt;123&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></tbody></table></figure>

<h4 id="æƒ…å†µ2-æ ¹å…ƒç´ æ²¡å˜-å±æ€§æ”¹å˜-å…ƒç´ å¤ç”¨-æ›´æ–°å±æ€§"><a href="#æƒ…å†µ2-æ ¹å…ƒç´ æ²¡å˜-å±æ€§æ”¹å˜-å…ƒç´ å¤ç”¨-æ›´æ–°å±æ€§" class="headerlink" title="æƒ…å†µ2: æ ¹å…ƒç´ æ²¡å˜, å±æ€§æ”¹å˜, ==å…ƒç´ å¤ç”¨==, æ›´æ–°å±æ€§"></a>æƒ…å†µ2: æ ¹å…ƒç´ æ²¡å˜, å±æ€§æ”¹å˜, ==å…ƒç´ å¤ç”¨==, æ›´æ–°å±æ€§</h4><p>æ—§è™šæ‹ŸDOM</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div id="box"&gt;</span><br><span class="line">    &lt;p class="my_p"&gt;123&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ–°è™šæ‹ŸDOM</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div id="myBox" title="æ ‡é¢˜"&gt;</span><br><span class="line">    &lt;p class="my_p"&gt;123&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-4-vueåŸºç¡€-diffç®—æ³•-key"><a href="#1-4-vueåŸºç¡€-diffç®—æ³•-key" class="headerlink" title="1.4_vueåŸºç¡€_diffç®—æ³•-key"></a>1.4_vueåŸºç¡€_diffç®—æ³•-key</h3><h4 id="æƒ…å†µ3-æ ¹å…ƒç´ æ²¡å˜-å­å…ƒç´ æ²¡å˜-å…ƒç´ å†…å®¹æ”¹å˜"><a href="#æƒ…å†µ3-æ ¹å…ƒç´ æ²¡å˜-å­å…ƒç´ æ²¡å˜-å…ƒç´ å†…å®¹æ”¹å˜" class="headerlink" title="æƒ…å†µ3: æ ¹å…ƒç´ æ²¡å˜, å­å…ƒç´ æ²¡å˜, å…ƒç´ å†…å®¹æ”¹å˜"></a>æƒ…å†µ3: æ ¹å…ƒç´ æ²¡å˜, å­å…ƒç´ æ²¡å˜, å…ƒç´ å†…å®¹æ”¹å˜</h4><h5 id="æ— key-å°±åœ°æ›´æ–°"><a href="#æ— key-å°±åœ°æ›´æ–°" class="headerlink" title="æ— key - å°±åœ°æ›´æ–°"></a>æ— key - å°±åœ°æ›´æ–°</h5><p>v-forä¸ä¼šç§»åŠ¨DOM, è€Œæ˜¯å°è¯•å¤ç”¨, å°±åœ°æ›´æ–°ï¼Œå¦‚æœéœ€è¦v-forç§»åŠ¨DOM, ä½ éœ€è¦ç”¨ç‰¹æ®Š attribute <code>key</code> æ¥æä¾›ä¸€ä¸ªæ’åºæç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;ul id="myUL"&gt;</span><br><span class="line">    &lt;li v-for="str in arr"&gt;</span><br><span class="line">        {{ str }} </span><br><span class="line">        &lt;input type="text"&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;button @click="addFn"&gt;ä¸‹æ ‡ä¸º1çš„ä½ç½®æ–°å¢ä¸€ä¸ª&lt;/button&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="keyword">return</span> {</span><br><span class="line">            <span class="attr">arr</span>: [<span class="string">"è€å¤§"</span>, <span class="string">"æ–°æ¥çš„"</span>, <span class="string">"è€äºŒ"</span>, <span class="string">"è€ä¸‰"</span>]</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">methods</span>: {</span><br><span class="line">        <span class="function"><span class="title">addFn</span>(<span class="params"></span>)</span>{</span><br><span class="line">            <span class="built_in">this</span>.arr.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="string">'æ–°æ¥çš„'</span>)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/%E6%96%B0_vfor%E6%9B%B4%E7%BB%86_%E6%97%A0key_%E5%B0%B1%E5%9C%B0%E6%9B%B4%E6%96%B0.gif" alt="æ–°_vforæ›´ç»†_æ— key_å°±åœ°æ›´æ–°"></p>
<p>æ—§ - è™šæ‹ŸDOMç»“æ„  å’Œ  æ–° - è™šæ‹ŸDOMç»“æ„ å¯¹æ¯”è¿‡ç¨‹</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210414215502653.png" alt="image-20210414215502653"></p>
<p>==æ€§èƒ½ä¸é«˜, ä»ç¬¬äºŒä¸ªliå¾€åéƒ½æ›´æ–°äº†==</p>
<h5 id="æœ‰key-å€¼ä¸ºç´¢å¼•"><a href="#æœ‰key-å€¼ä¸ºç´¢å¼•" class="headerlink" title="æœ‰key - å€¼ä¸ºç´¢å¼•"></a>æœ‰key - å€¼ä¸ºç´¢å¼•</h5><ul>
<li>è¿˜æ˜¯å°±åœ°æ›´æ–°</li>
</ul>
<p>å› ä¸ºæ–°æ—§è™šæ‹ŸDOMå¯¹æ¯”, keyå­˜åœ¨å°±å¤ç”¨æ­¤æ ‡ç­¾æ›´æ–°å†…å®¹, å¦‚æœä¸å­˜åœ¨å°±ç›´æ¥å»ºç«‹ä¸€ä¸ªæ–°çš„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;ul id="myUL"&gt;</span><br><span class="line">    &lt;li v-for="(str, index) in arr" :key="index"&gt;</span><br><span class="line">        {{ str }} </span><br><span class="line">        &lt;input type="text"&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;button @click="addFn"&gt;ä¸‹æ ‡ä¸º1çš„ä½ç½®æ–°å¢ä¸€ä¸ª&lt;/button&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="keyword">return</span> {</span><br><span class="line">            <span class="attr">arr</span>: [<span class="string">"è€å¤§"</span>, <span class="string">"æ–°æ¥çš„"</span>, <span class="string">"è€äºŒ"</span>, <span class="string">"è€ä¸‰"</span>]</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">methods</span>: {</span><br><span class="line">        <span class="function"><span class="title">addFn</span>(<span class="params"></span>)</span>{</span><br><span class="line">            <span class="built_in">this</span>.arr.splice(<span class="number">1</span>, <span class="number">0</span>, <span class="string">'æ–°æ¥çš„'</span>)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>



<p>keyä¸ºç´¢å¼•-å›¾è§£è¿‡ç¨‹ (åˆå°±åœ°å¾€åæ›´æ–°äº†)</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/%E6%96%B0_vfor%E6%9B%B4%E7%BB%86_%E6%97%A0key_%E5%B0%B1%E5%9C%B0%E6%9B%B4%E6%96%B0.gif" alt="æ–°_vforæ›´ç»†_æ— key_å°±åœ°æ›´æ–°"></p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210414215525492.png" alt="image-20210414215525492"></p>
<ol>
<li><p>v-forå…ˆå¾ªç¯äº§ç”Ÿæ–°çš„DOMç»“æ„, keyæ˜¯è¿ç»­çš„, å’Œæ•°æ®å¯¹åº”</p>
</li>
<li><p>ç„¶åæ¯”è¾ƒæ–°æ—§DOMç»“æ„, æ‰¾åˆ°åŒºåˆ«, æ‰“è¡¥ä¸åˆ°é¡µé¢ä¸Š</p>
<p>æœ€åè¡¥ä¸€ä¸ªli, ç„¶åä»ç¬¬äºŒä¸ªå¾€å, éƒ½è¦æ›´æ–°å†…å®¹</p>
</li>
</ol>
<blockquote>
<p>å£è¯€: keyçš„å€¼æœ‰idç”¨id, æ²¡idç”¨ç´¢å¼•</p>
</blockquote>
<h5 id="æœ‰key-å€¼ä¸ºid"><a href="#æœ‰key-å€¼ä¸ºid" class="headerlink" title="æœ‰key - å€¼ä¸ºid"></a>æœ‰key - å€¼ä¸ºid</h5><p>keyçš„å€¼åªèƒ½æ˜¯å”¯ä¸€ä¸é‡å¤çš„, å­—ç¬¦ä¸²æˆ–æ•°å€¼</p>
<p>v-forä¸ä¼šç§»åŠ¨DOM, è€Œæ˜¯å°è¯•å¤ç”¨, å°±åœ°æ›´æ–°ï¼Œå¦‚æœéœ€è¦v-forç§»åŠ¨DOM, ä½ éœ€è¦ç”¨ç‰¹æ®Š attribute <code>key</code> æ¥æä¾›ä¸€ä¸ªæ’åºæç¤º</p>
<p>æ–°DOMé‡Œæ•°æ®çš„keyå­˜åœ¨, å»æ—§çš„è™šæ‹ŸDOMç»“æ„é‡Œæ‰¾åˆ°keyæ ‡è®°çš„æ ‡ç­¾, å¤ç”¨æ ‡ç­¾</p>
<p>æ–°DOMé‡Œæ•°æ®çš„keyå­˜åœ¨, å»æ—§çš„è™šæ‹ŸDOMç»“æ„é‡Œæ²¡æœ‰æ‰¾åˆ°keyæ ‡ç­¾çš„æ ‡ç­¾, åˆ›å»º</p>
<p>æ—§DOMç»“æ„çš„key, åœ¨æ–°çš„DOMç»“æ„é‡Œæ²¡æœ‰äº†, åˆ™==ç§»é™¤keyæ‰€åœ¨çš„æ ‡ç­¾==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for="obj in arr" :key="obj.id"&gt;</span><br><span class="line">        {{ obj.name }}</span><br><span class="line">        &lt;input type="text"&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button @click="btn"&gt;ä¸‹æ ‡1ä½ç½®æ’å…¥æ–°æ¥çš„&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      arr: [</span><br><span class="line">        {</span><br><span class="line">          name: 'è€å¤§',</span><br><span class="line">          id: 50</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: 'è€äºŒ',</span><br><span class="line">          id: 31</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: 'è€ä¸‰',</span><br><span class="line">          id: 10</span><br><span class="line">        }</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    btn(){</span><br><span class="line">      this.arr.splice(1, 0, {</span><br><span class="line">        id: 19, </span><br><span class="line">        name: 'æ–°æ¥çš„'</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>å›¾è§£æ•ˆæœ:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/%E6%96%B0_vfor%E6%9B%B4%E7%BB%86_%E6%9C%89key%E5%80%BC%E4%B8%BAid_%E6%8F%90%E9%AB%98%E6%80%A7%E8%83%BD%E6%9B%B4%E6%96%B0.gif" alt="æ–°_vforæ›´ç»†_æœ‰keyå€¼ä¸ºid_æé«˜æ€§èƒ½æ›´æ–°"></p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210414215546869.png" alt="image-20210414215546869"></p>
<blockquote>
<p>æ€»ç»“: ä¸ç”¨keyä¹Ÿä¸å½±å“åŠŸèƒ½(å°±åœ°æ›´æ–°), æ·»åŠ keyå¯ä»¥æé«˜æ›´æ–°çš„æ€§èƒ½</p>
</blockquote>
<h3 id="1-5-é˜¶æ®µå°ç»“"><a href="#1-5-é˜¶æ®µå°ç»“" class="headerlink" title="1.5_é˜¶æ®µå°ç»“"></a>1.5_é˜¶æ®µå°ç»“</h3><p>v-forä»€ä¹ˆæ—¶å€™ä¼šæ›´æ–°é¡µé¢å‘¢?</p>
<ul>
<li>æ•°ç»„é‡‡ç”¨æ›´æ–°æ–¹æ³•, æ‰å¯¼è‡´v-foræ›´æ–°é¡µé¢</li>
</ul>
<p>vueæ˜¯å¦‚ä½•æé«˜æ›´æ–°æ€§èƒ½çš„?</p>
<ul>
<li>é‡‡ç”¨è™šæ‹ŸDOM+diffç®—æ³•æé«˜æ›´æ–°æ€§èƒ½</li>
</ul>
<p>è™šæ‹ŸDOMæ˜¯ä»€ä¹ˆ?</p>
<ul>
<li>æœ¬è´¨æ˜¯ä¿å­˜domå…³é”®ä¿¡æ¯çš„JSå¯¹è±¡</li>
</ul>
<p>diffç®—æ³•å¦‚ä½•æ¯”è¾ƒæ–°æ—§è™šæ‹ŸDOM?</p>
<ul>
<li>æ ¹å…ƒç´ æ”¹å˜ â€“ åˆ é™¤å½“å‰DOMæ ‘é‡æ–°å»º</li>
<li>æ ¹å…ƒç´ æœªå˜, å±æ€§æ”¹å˜ â€“ æ›´æ–°å±æ€§</li>
<li>æ ¹å…ƒç´ æœªå˜, å­å…ƒç´ /å†…å®¹æ”¹å˜</li>
<li>æ— key â€“ å°±åœ°æ›´æ–° / æœ‰key â€“ æŒ‰keyæ¯”è¾ƒ</li>
</ul>
<h3 id="1-6-vueåŸºç¡€-åŠ¨æ€class"><a href="#1-6-vueåŸºç¡€-åŠ¨æ€class" class="headerlink" title="1.6_vueåŸºç¡€ åŠ¨æ€class"></a>1.6_vueåŸºç¡€ åŠ¨æ€class</h3><blockquote>
<p>ç›®æ ‡: ç”¨v-bindç»™æ ‡ç­¾classè®¾ç½®åŠ¨æ€çš„å€¼</p>
</blockquote>
<ul>
<li>è¯­æ³•:<ul>
<li>:class=â€{ç±»å: å¸ƒå°”å€¼}â€</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- è¯­æ³•:</span><br><span class="line">      :class="{ç±»å: å¸ƒå°”å€¼}"</span><br><span class="line">      ä½¿ç”¨åœºæ™¯: vueå˜é‡æ§åˆ¶æ ‡ç­¾æ˜¯å¦åº”è¯¥æœ‰ç±»å</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;p :class="{red_str: bool}"&gt;åŠ¨æ€class&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      bool: true</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .red_str{</span><br><span class="line">    color: red;</span><br><span class="line">  }</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å°±æ˜¯æŠŠç±»åä¿å­˜åœ¨vueå˜é‡ä¸­èµ‹äºˆç»™æ ‡ç­¾</p>
</blockquote>
<h3 id="1-7-vueåŸºç¡€-åŠ¨æ€style"><a href="#1-7-vueåŸºç¡€-åŠ¨æ€style" class="headerlink" title="1.7_vueåŸºç¡€-åŠ¨æ€style"></a>1.7_vueåŸºç¡€-åŠ¨æ€style</h3><blockquote>
<p>ç›®æ ‡: ç»™æ ‡ç­¾åŠ¨æ€è®¾ç½®styleçš„å€¼</p>
</blockquote>
<ul>
<li>è¯­æ³•<ul>
<li>:style=â€{csså±æ€§: å€¼}â€</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- åŠ¨æ€styleè¯­æ³•</span><br><span class="line">      :style="{csså±æ€§å: å€¼}"</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;p :style="{backgroundColor: colorStr}"&gt;åŠ¨æ€style&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      colorStr: 'red'</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: åŠ¨æ€styleçš„keyéƒ½æ˜¯csså±æ€§å</p>
</blockquote>
<h3 id="1-8-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-é“º"><a href="#1-8-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-é“º" class="headerlink" title="1.8_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(é“º)"></a>1.8_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(é“º)</h3><blockquote>
<p>ç›®æ ‡: æ•°æ®é“ºè®¾</p>
</blockquote>
<ul>
<li>éœ€æ±‚1: æŠŠé»˜è®¤æ•°æ®æ˜¾ç¤ºåˆ°è¡¨æ ¼ä¸Š</li>
<li>éœ€æ±‚2: æ³¨æ„èµ„äº§è¶…è¿‡100çš„, éƒ½ç”¨çº¢è‰²å­—ä½“æ ‡è®°å‡ºæ¥</li>
</ul>
<p>ç»†èŠ‚:</p>
<p>â€‹    â‘  å…ˆé“ºè®¾é™æ€é¡µé¢ â€” å».mdæ–‡æ¡£é‡Œ, å¤åˆ¶æ•°æ®å’Œæ ‡ç­¾æ¨¡æ¿</p>
<p>â€‹    â‘¡ æ­¤æ¡ˆä¾‹ä½¿ç”¨bootstrap, éœ€è¦ä¸‹è½½, å¹¶å¯¼å…¥åˆ°å·¥ç¨‹main.jsä¸­</p>
<p>â€‹    â‘¢ ç”¨v-foré…åˆé»˜è®¤æ•°æ®, æŠŠæ•°æ®é»˜è®¤é“ºè®¾åˆ°è¡¨æ ¼ä¸Šæ˜¾ç¤º</p>
<p>â€‹    â‘£ ç›´æ¥åœ¨æ ‡ç­¾ä¸Š, å¤§äº100ä»·æ ¼, åŠ¨æ€è®¾ç½®redç±»å</p>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210511120432874.png" alt="image-20210511120432874"></p>
<ol>
<li>å› ä¸ºæ¡ˆä¾‹ä½¿ç”¨äº†bootstrap, å·¥ç¨‹åŒ–å¼€å‘, æ¨¡å—åŒ–ç”¨npm/yarnä¸‹è½½å¼•å…¥ä½¿ç”¨</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add bootstrap</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>åœ¨main.js - å¼•å…¥bootstrap</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"bootstrap/dist/css/bootstrap.css"</span> <span class="comment">// é»˜è®¤æ‰¾æ–‡ä»¶å¤¹ä¸‹çš„indexæ–‡ä»¶(ä½†æ˜¯è¿™ä¸ªä¸æ˜¯æ‰€ä»¥éœ€è¦å†™è·¯å¾„)</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>æ¨¡æ¿ä»£ç (åœ¨è¿™ä¸ªåŸºç¡€ä¸Šå†™)</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;div class="container"&gt;</span><br><span class="line">      &lt;!-- é¡¶éƒ¨æ¡†æ¨¡å— --&gt;</span><br><span class="line">      &lt;div class="form-group"&gt;</span><br><span class="line">        &lt;div class="input-group"&gt;</span><br><span class="line">          &lt;h4&gt;å“ç‰Œç®¡ç†&lt;/h4&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- æ•°æ®è¡¨æ ¼ --&gt;</span><br><span class="line">      &lt;table class="table table-bordered table-hover mt-2"&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;ç¼–å·&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;èµ„äº§åç§°&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;ä»·æ ¼&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;åˆ›å»ºæ—¶é—´&lt;/th&gt;</span><br><span class="line">            &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">          &lt;tr &gt;</span><br><span class="line">            &lt;td&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- å¦‚æœä»·æ ¼è¶…è¿‡100ï¼Œå°±æœ‰redè¿™ä¸ªç±» --&gt;</span><br><span class="line">            &lt;td class="red"&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;a href="#" &gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">          &lt;!-- </span><br><span class="line">        &lt;tfoot &gt;</span><br><span class="line">          &lt;tr&gt;</span><br><span class="line">            &lt;td colspan="5" style="text-align: center"&gt;æš‚æ— æ•°æ®&lt;/td&gt;</span><br><span class="line">          &lt;/tr&gt;</span><br><span class="line">        &lt;/tfoot&gt;</span><br><span class="line">            --&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!-- æ·»åŠ èµ„äº§ --&gt;</span><br><span class="line">      &lt;form class="form-inline"&gt;</span><br><span class="line">        &lt;div class="form-group"&gt;</span><br><span class="line">          &lt;div class="input-group"&gt;</span><br><span class="line">            &lt;input</span><br><span class="line">              type="text"</span><br><span class="line">              class="form-control"</span><br><span class="line">              placeholder="èµ„äº§åç§°"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">        &lt;div class="form-group"&gt;</span><br><span class="line">          &lt;div class="input-group"&gt;</span><br><span class="line">            &lt;input</span><br><span class="line">              type="text"</span><br><span class="line">              class="form-control"</span><br><span class="line">              placeholder="ä»·æ ¼"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">        &lt;!-- é˜»æ­¢è¡¨å•æäº¤ --&gt;</span><br><span class="line">        &lt;button class="btn btn-primary"&gt;æ·»åŠ èµ„äº§&lt;/button&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      name: "", // åç§°</span><br><span class="line">      price: 0, // ä»·æ ¼</span><br><span class="line">      list: [</span><br><span class="line">        { id: 100, name: "å¤–å¥—", price: 199, time: new Date('2010-08-12')},</span><br><span class="line">        { id: 101, name: "è£¤å­", price: 34, time: new Date('2013-09-01') },</span><br><span class="line">        { id: 102, name: "é‹", price: 25.4, time: new Date('2018-11-22') },</span><br><span class="line">        { id: 103, name: "å¤´å‘", price: 19900, time: new Date('2020-12-12') }</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style &gt;</span><br><span class="line">.red{</span><br><span class="line">  color: red;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>==æ­£ç¡®ä»£ç , ä¸å¯å¤åˆ¶==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;tbody&gt;</span><br><span class="line">    &lt;tr v-for="obj in list" :key="obj.id"&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.id }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.name }}&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- å¦‚æœä»·æ ¼è¶…è¿‡100ï¼Œå°±æœ‰redè¿™ä¸ªç±» --&gt;</span><br><span class="line">        &lt;td :class="{red: obj.price &gt; 100}"&gt;{{ obj.price }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.time }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;&lt;a href="#" &gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/tbody&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 1. æ˜ç¡®éœ€æ±‚</span><br><span class="line">// 2. æ ‡ç­¾+æ ·å¼+é»˜è®¤æ•°æ®</span><br><span class="line">// 3. ä¸‹è½½bootstrap, main.jså¼•å…¥bootstrap.css</span><br><span class="line">// 4. æŠŠlistæ•°ç»„ - é“ºè®¾è¡¨æ ¼</span><br><span class="line">// 5. ä¿®æ”¹ä»·æ ¼é¢œè‰²</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-9-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-å¢"><a href="#1-9-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-å¢" class="headerlink" title="1.9_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(å¢)"></a>1.9_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(å¢)</h3><blockquote>
<p>ç›®æ ‡: æ•°æ®æ–°å¢</p>
</blockquote>
<ul>
<li><p>éœ€æ±‚1: å®ç°è¡¨å•æ•°æ®æ–°å¢è¿›è¡¨æ ¼åŠŸèƒ½</p>
</li>
<li><p>éœ€æ±‚2: åˆ¤æ–­ç”¨æˆ·è¾“å…¥æ˜¯å¦ä¸ºç©ºç»™æç¤º</p>
</li>
<li><p>åˆ†æ</p>
<p>â‘  æ·»åŠ èµ„äº§æŒ‰é’® â€“ ç»‘å®šç‚¹å‡»äº‹ä»¶</p>
<p>â‘¡ ç»™è¡¨å•v-modelç»‘å®švueå˜é‡æ”¶é›†ç”¨æˆ·è¾“å…¥å†…å®¹</p>
<p>â‘¢ æ·»åŠ æ•°ç»„åˆ°æ•°ç»„ä¸­</p>
<p>â‘£ åˆ¤æ–­ç”¨æˆ·å†…å®¹æ˜¯å¦ç¬¦åˆè§„å®š</p>
</li>
</ul>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/4.10_%E6%A1%88%E4%BE%8B_%E8%B5%84%E4%BA%A7%E5%88%97%E8%A1%A8_%E6%96%B0%E5%A2%9E.gif" alt="å“ç‰Œç®¡ç†_é“ºå¢åˆ "></p>
<p>åœ¨ä¸Šä¸ªæ¡ˆä¾‹ä»£ç åŸºç¡€ä¸Šæ¥ç€å†™</p>
<p>==æ­£ç¡®ä»£ç ,ä¸å¯å¤åˆ¶==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ·»åŠ èµ„äº§ --&gt;</span><br><span class="line">      &lt;form class="form-inline"&gt;</span><br><span class="line">        &lt;div class="form-group"&gt;</span><br><span class="line">          &lt;div class="input-group"&gt;</span><br><span class="line">            &lt;input</span><br><span class="line">              type="text"</span><br><span class="line">              class="form-control"</span><br><span class="line">              placeholder="èµ„äº§åç§°"</span><br><span class="line">              v-model="name"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">        &lt;div class="form-group"&gt;</span><br><span class="line">          &lt;div class="input-group"&gt;</span><br><span class="line">            &lt;input</span><br><span class="line">              type="text"</span><br><span class="line">              class="form-control"</span><br><span class="line">              placeholder="ä»·æ ¼"</span><br><span class="line">              v-model.number="price"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">        &lt;!-- 4. é˜»æ­¢è¡¨å•æäº¤(åˆ·æ–°ç½‘é¡µæ•°æ®åˆå›å»äº†) --&gt;</span><br><span class="line">        &lt;button class="btn btn-primary" @click.prevent="addFn"&gt;æ·»åŠ èµ„äº§&lt;/button&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: æ–°å¢</span><br><span class="line">// 1. æŒ‰é’® - äº‹ä»¶</span><br><span class="line">// 2. ç»™è¡¨å•v-modelç»‘å®švueå˜é‡</span><br><span class="line">export default {</span><br><span class="line">  // ...çœç•¥å…¶ä»–</span><br><span class="line">  methods: {</span><br><span class="line">    addFn(){</span><br><span class="line">      // 5. åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span><br><span class="line">      if (this.name.trim().length === 0 || this.price === 0) {</span><br><span class="line">        alert("ä¸èƒ½ä¸ºç©º")</span><br><span class="line">        return</span><br><span class="line">      }</span><br><span class="line">      // 3. æŠŠå€¼ä»¥å¯¹è±¡å½¢å¼-æ’å…¥list</span><br><span class="line">      this.list.push({</span><br><span class="line">        // å½“å‰æ•°ç»„æœ€åä¸€ä¸ªå¯¹è±¡çš„id+1ä½œä¸ºæ–°å¯¹è±¡idå€¼</span><br><span class="line">        id: this.list[this.list.length - 1].id + 1,</span><br><span class="line">        name: this.name,</span><br><span class="line">        price: this.price,</span><br><span class="line">        time: new Date()</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-10-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-åˆ "><a href="#1-10-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-åˆ " class="headerlink" title="1.10_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(åˆ )"></a>1.10_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(åˆ )</h3><blockquote>
<p>ç›®æ ‡: æ•°æ®åˆ é™¤</p>
</blockquote>
<ul>
<li><p>éœ€æ±‚1: ç‚¹å‡»åˆ é™¤çš„aæ ‡ç­¾, åˆ é™¤æ•°æ®</p>
</li>
<li><p>éœ€æ±‚2: åˆ é™¤æ²¡æ•°æ®äº†è¦æç¤ºæš‚æ— æ•°æ®çš„tfoot</p>
</li>
<li><p>åˆ†æ</p>
<p>â‘  aæ ‡ç­¾ç»‘å®šç‚¹å‡»äº‹ä»¶</p>
<p>â‘¡ ç»™äº‹ä»¶æ–¹æ³•ä¼ id</p>
<p>â‘¢ é€šè¿‡id, æ‰¾åˆ°å¯¹åº”æ•°æ®åˆ é™¤</p>
<p>â‘£ åˆ é™¤å…‰äº†è¦è®©tfootæ˜¾ç¤º</p>
<p>â‘¤ åˆ é™¤å…‰äº†å†æ–°å¢, æœ‰bug(idå€¼é—®é¢˜)éœ€è¦ä¿®å¤</p>
</li>
</ul>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/4.10_%E6%A1%88%E4%BE%8B_%E8%B5%84%E4%BA%A7%E5%88%97%E8%A1%A8_%E5%88%A0%E9%99%A4.gif" alt="å“ç‰Œç®¡ç†_é“ºå¢åˆ "></p>
<p>åœ¨ä¸Šä¸ªæ¡ˆä¾‹ä»£ç åŸºç¡€ä¸Šæ¥ç€å†™</p>
<p>æ­£ç¡®çš„ä»£ç (==ä¸å¯å¤åˆ¶==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;td&gt;&lt;a href="#" @click="delFn(obj.id)"&gt;åˆ é™¤&lt;/a&gt;&lt;/td&gt;</span><br><span class="line">          </span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: åˆ é™¤åŠŸèƒ½</span><br><span class="line">// 1. åˆ é™¤aæ ‡ç­¾-ç‚¹å‡»äº‹ä»¶</span><br><span class="line">// 2. å¯¹åº”æ–¹æ³•å</span><br><span class="line">// 3. æ•°æ®idåˆ°äº‹ä»¶æ–¹æ³•ä¸­</span><br><span class="line">// 4. é€šè¿‡id, æ‰¾åˆ°è¿™æ¡æ•°æ®åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡</span><br><span class="line">// 5. spliceæ–¹æ³•åˆ é™¤åŸæ•°ç»„é‡Œçš„å¯¹åº”å…ƒç´ </span><br><span class="line">// 6. è®¾ç½®tfoot, æ— æ•°æ®ç»™å‡ºæç¤º</span><br><span class="line">// 7. æ— æ•°æ®å†æ–°å¢, idè¦åˆ¤æ–­ä¸€ä¸‹</span><br><span class="line">export default {</span><br><span class="line">  // ...å…¶ä»–ä»£ç </span><br><span class="line">  methods: {</span><br><span class="line">    // ...å…¶ä»–ä»£ç </span><br><span class="line">    delFn(id){</span><br><span class="line">      // é€šè¿‡idæ‰¾åˆ°è¿™æ¡æ•°æ®åœ¨æ•°ç»„ä¸­ä¸‹æ ‡</span><br><span class="line">      let index = this.list.findIndex(obj =&gt; obj.id === id)</span><br><span class="line">      this.list.splice(index, 1)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="2-vueè¿‡æ»¤å™¨"><a href="#2-vueè¿‡æ»¤å™¨" class="headerlink" title="2. vueè¿‡æ»¤å™¨"></a>2. vueè¿‡æ»¤å™¨</h2><h3 id="2-0-vueè¿‡æ»¤å™¨-å®šä¹‰ä½¿ç”¨"><a href="#2-0-vueè¿‡æ»¤å™¨-å®šä¹‰ä½¿ç”¨" class="headerlink" title="2.0_vueè¿‡æ»¤å™¨-å®šä¹‰ä½¿ç”¨"></a>2.0_vueè¿‡æ»¤å™¨-å®šä¹‰ä½¿ç”¨</h3><blockquote>
<p>ç›®çš„: è½¬æ¢æ ¼å¼, è¿‡æ»¤å™¨å°±æ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>, ä¼ å…¥å€¼è¿”å›å¤„ç†åçš„å€¼</p>
</blockquote>
<p>è¿‡æ»¤å™¨åªèƒ½ç”¨åœ¨, ==æ’å€¼è¡¨è¾¾å¼å’Œv-bindè¡¨è¾¾å¼==</p>
<p>Vueä¸­çš„è¿‡æ»¤å™¨åœºæ™¯</p>
<ul>
<li>å­—æ¯è½¬å¤§å†™, è¾“å…¥â€helloâ€, è¾“å‡ºâ€HELLOâ€</li>
<li>å­—ç¬¦ä¸²ç¿»è½¬, â€œè¾“å…¥hello, worldâ€, è¾“å‡ºâ€dlrow ,ollehâ€</li>
</ul>
<p>è¯­æ³•: </p>
<ul>
<li><p>Vue.filter(â€œè¿‡æ»¤å™¨åâ€, (å€¼) =&gt; {return â€œè¿”å›å¤„ç†åçš„å€¼â€})</p>
</li>
<li><p>filters: {è¿‡æ»¤å™¨åå­—: (å€¼) =&gt; {return â€œè¿”å›å¤„ç†åçš„å€¼â€}</p>
</li>
</ul>
<p>ä¾‹å­:</p>
<ul>
<li>å…¨å±€å®šä¹‰å­—æ¯éƒ½å¤§å†™çš„è¿‡æ»¤å™¨</li>
<li>å±€éƒ¨å®šä¹‰å­—ç¬¦ä¸²ç¿»è½¬çš„è¿‡æ»¤å™¨</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;åŸæ¥çš„æ ·å­: {{ msg }}&lt;/p&gt;</span><br><span class="line">    &lt;!-- 2. è¿‡æ»¤å™¨ä½¿ç”¨</span><br><span class="line">      è¯­æ³•: {{ å€¼ | è¿‡æ»¤å™¨åå­— }}</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;p&gt;ä½¿ç”¨ç¿»è½¬è¿‡æ»¤å™¨: {{ msg | reverse }}&lt;/p&gt;</span><br><span class="line">    &lt;p :title="msg | toUp"&gt;é¼ æ ‡é•¿åœ&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      msg: 'Hello, Vue'</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // æ–¹å¼2: å±€éƒ¨ - è¿‡æ»¤å™¨</span><br><span class="line">  // åªèƒ½åœ¨å½“å‰vueæ–‡ä»¶å†…ä½¿ç”¨</span><br><span class="line">  /*</span><br><span class="line">     è¯­æ³•: </span><br><span class="line">     filters: {</span><br><span class="line">       è¿‡æ»¤å™¨åå­— (val) {</span><br><span class="line">         return å¤„ç†åçš„å€¼</span><br><span class="line">       }</span><br><span class="line">     }</span><br><span class="line">  */</span><br><span class="line">  filters: {</span><br><span class="line">    toUp (val) {</span><br><span class="line">      return val.toUpperCase()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æŠŠå€¼è½¬æˆå¦ä¸€ç§å½¢å¼, ä½¿ç”¨è¿‡æ»¤å™¨, Vue3ç”¨å‡½æ•°æ›¿ä»£äº†è¿‡æ»¤å™¨.</p>
<p>å…¨å±€æ³¨å†Œæœ€å¥½åœ¨main.jsä¸­æ³¨å†Œ, ä¸€å¤„æ³¨å†Œåˆ°å¤„ä½¿ç”¨</p>
</blockquote>
<h3 id="2-1-vueè¿‡æ»¤å™¨-ä¼ å‚å’Œå¤šè¿‡æ»¤å™¨"><a href="#2-1-vueè¿‡æ»¤å™¨-ä¼ å‚å’Œå¤šè¿‡æ»¤å™¨" class="headerlink" title="2.1_vueè¿‡æ»¤å™¨-ä¼ å‚å’Œå¤šè¿‡æ»¤å™¨"></a>2.1_vueè¿‡æ»¤å™¨-ä¼ å‚å’Œå¤šè¿‡æ»¤å™¨</h3><blockquote>
<p>ç›®æ ‡: å¯åŒæ—¶ä½¿ç”¨å¤šä¸ªè¿‡æ»¤å™¨, æˆ–è€…ç»™è¿‡æ»¤å™¨ä¼ å‚</p>
</blockquote>
<ul>
<li>è¯­æ³•:<ul>
<li>è¿‡æ»¤å™¨ä¼ å‚:   vueå˜é‡ | è¿‡æ»¤å™¨(å®å‚) </li>
<li>å¤šä¸ªè¿‡æ»¤å™¨:   vueå˜é‡ | è¿‡æ»¤å™¨1 | è¿‡æ»¤å™¨2</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;åŸæ¥çš„æ ·å­: {{ msg }}&lt;/p&gt;</span><br><span class="line">    &lt;!-- 1.</span><br><span class="line">      ç»™è¿‡æ»¤å™¨ä¼ å€¼</span><br><span class="line">      è¯­æ³•: vueå˜é‡ | è¿‡æ»¤å™¨å(å€¼)</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;p&gt;ä½¿ç”¨ç¿»è½¬è¿‡æ»¤å™¨: {{ msg | reverse('|') }}&lt;/p&gt;</span><br><span class="line">    &lt;!-- 2.</span><br><span class="line">      å¤šä¸ªè¿‡æ»¤åˆ©ä½¿ç”¨</span><br><span class="line">      è¯­æ³•: vueå˜é‡ | è¿‡æ»¤å™¨1 | è¿‡æ»¤å™¨2</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;p :title="msg | toUp | reverse('|')"&gt;é¼ æ ‡é•¿åœ&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      msg: 'Hello, Vue'</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  filters: {</span><br><span class="line">    toUp (val) {</span><br><span class="line">      return val.toUpperCase()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: è¿‡æ»¤å™¨å¯ä»¥ä¼ å‚, è¿˜å¯ä»¥å¯¹æŸä¸ªè¿‡æ»¤å™¨ç»“æœ, åé¢åœ¨ä½¿ç”¨ä¸€ä¸ªè¿‡æ»¤å™¨</p>
</blockquote>
<h3 id="2-2-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-æ—¶é—´æ ¼å¼åŒ–"><a href="#2-2-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-æ—¶é—´æ ¼å¼åŒ–" class="headerlink" title="2.2_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(æ—¶é—´æ ¼å¼åŒ–)"></a>2.2_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(æ—¶é—´æ ¼å¼åŒ–)</h3><blockquote>
<p>ç›®æ ‡: å¤åˆ¶ä¸Šä¸ªæ¡ˆä¾‹, åœ¨æ­¤åŸºç¡€ä¸Š, æŠŠè¡¨æ ¼é‡Œçš„æ—¶é—´ç”¨è¿‡æ»¤å™¨+momentæ¨¡å—, æ ¼å¼åŒ–æˆYYYY-MM-DD æ ¼å¼</p>
</blockquote>
<p>å›¾ç¤º: </p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210215155844500.png" alt="image-20210215155844500"></p>
<ol>
<li><p>ä¸‹è½½momentå¤„ç†æ—¥æœŸçš„ç¬¬ä¸‰æ–¹å·¥å…·æ¨¡å—</p>
<p>momentå®˜ç½‘æ–‡æ¡£: <a href="http://momentjs.cn/docs/#/displaying/">http://momentjs.cn/docs/#/displaying/</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add moment</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å®šä¹‰è¿‡æ»¤å™¨, æŠŠæ—¶é—´ç”¨momentæ¨¡å—æ ¼å¼åŒ–, è¿”å›æˆ‘ä»¬æƒ³è¦çš„æ ¼å¼</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç›®æ ‡: å¤„ç†æ—¶é—´</span></span><br><span class="line"><span class="comment">// 1. ä¸‹è½½momentæ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> moment <span class="keyword">from</span> <span class="string">'moment'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å®šä¹‰è¿‡æ»¤å™¨, ç¼–å†™å†…éƒ¨ä»£ç </span></span><br><span class="line"><span class="attr">filters</span>: { </span><br><span class="line">    formatDate (val){</span><br><span class="line">        <span class="keyword">return</span> moment(val).format(<span class="string">'YYYY-MM-DD'</span>)</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&lt;!-- <span class="number">3.</span> ä½¿ç”¨è¿‡æ»¤å™¨ --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">td</span>&gt;</span>{{ obj.time | formatDate }}<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h2 id="3-vueè®¡ç®—å±æ€§"><a href="#3-vueè®¡ç®—å±æ€§" class="headerlink" title="3. vueè®¡ç®—å±æ€§"></a>3. vueè®¡ç®—å±æ€§</h2><h3 id="3-0-vueè®¡ç®—å±æ€§-computed"><a href="#3-0-vueè®¡ç®—å±æ€§-computed" class="headerlink" title="3.0_vueè®¡ç®—å±æ€§-computed"></a>3.0_vueè®¡ç®—å±æ€§-computed</h3><blockquote>
<p>ç›®æ ‡: ä¸€ä¸ªæ•°æ®, ä¾èµ–å¦å¤–ä¸€äº›æ•°æ®è®¡ç®—è€Œæ¥çš„ç»“æœ</p>
</blockquote>
<p>è¯­æ³•:</p>
<ul>
<li>```js<br>computed: {<pre><code>"è®¡ç®—å±æ€§å" () {
    return "å€¼"
}
</code></pre>
}<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">éœ€æ±‚: </span><br><span class="line"></span><br><span class="line">* éœ€æ±‚: æ±‚2ä¸ªæ•°çš„å’Œæ˜¾ç¤ºåˆ°é¡µé¢ä¸Š</span><br><span class="line"></span><br><span class="line">```vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;{{ num }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      a: 10,</span><br><span class="line">      b: 20</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // è®¡ç®—å±æ€§:</span><br><span class="line">  // åœºæ™¯: ä¸€ä¸ªå˜é‡çš„å€¼, éœ€è¦ç”¨å¦å¤–å˜é‡è®¡ç®—è€Œå¾—æ¥</span><br><span class="line">  /*</span><br><span class="line">    è¯­æ³•:</span><br><span class="line">    computed: {</span><br><span class="line">      è®¡ç®—å±æ€§å () {</span><br><span class="line">        return å€¼</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  */</span><br><span class="line"> // æ³¨æ„: è®¡ç®—å±æ€§å’Œdataå±æ€§éƒ½æ˜¯å˜é‡-ä¸èƒ½é‡å</span><br><span class="line"> // æ³¨æ„2: å‡½æ•°å†…å˜é‡å˜åŒ–, ä¼šè‡ªåŠ¨é‡æ–°è®¡ç®—ç»“æœè¿”å›</span><br><span class="line">  computed: {</span><br><span class="line">    num(){</span><br><span class="line">      return this.a + this.b</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<blockquote>
<p>æ³¨æ„: è®¡ç®—å±æ€§ä¹Ÿæ˜¯vueæ•°æ®å˜é‡, æ‰€ä»¥ä¸è¦å’Œdataé‡Œé‡å, ç”¨æ³•å’Œdataç›¸åŒ</p>
</blockquote>
<blockquote>
<p>æ€»ç»“: ä¸€ä¸ªæ•°æ®, ä¾èµ–å¦å¤–ä¸€äº›æ•°æ®è®¡ç®—è€Œæ¥çš„ç»“æœ</p>
</blockquote>
<h3 id="3-1-vueè®¡ç®—å±æ€§-ç¼“å­˜"><a href="#3-1-vueè®¡ç®—å±æ€§-ç¼“å­˜" class="headerlink" title="3.1_vueè®¡ç®—å±æ€§-ç¼“å­˜"></a>3.1_vueè®¡ç®—å±æ€§-ç¼“å­˜</h3><blockquote>
<p>ç›®æ ‡: è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„ä¾èµ–é¡¹çš„å€¼ç»“æœè¿›è¡Œç¼“å­˜çš„ï¼Œåªè¦ä¾èµ–çš„å˜é‡ä¸å˜, éƒ½ç›´æ¥ä»ç¼“å­˜å–ç»“æœ</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210113232439893.png" alt="image-20210113232439893"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;{{ reverseMessage }}&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;{{ reverseMessage }}&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;{{ reverseMessage }}&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;{{ getMessage() }}&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;{{ getMessage() }}&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;{{ getMessage() }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      msg: "Hello, Vue"</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // è®¡ç®—å±æ€§ä¼˜åŠ¿:</span><br><span class="line">  // å¸¦ç¼“å­˜</span><br><span class="line">  // è®¡ç®—å±æ€§å¯¹åº”å‡½æ•°æ‰§è¡Œå, ä¼šæŠŠreturnå€¼ç¼“å­˜èµ·æ¥</span><br><span class="line">  // ä¾èµ–é¡¹ä¸å˜, å¤šæ¬¡è°ƒç”¨éƒ½æ˜¯ä»ç¼“å­˜å–å€¼</span><br><span class="line">  // ä¾èµ–é¡¹å€¼-å˜åŒ–, å‡½æ•°ä¼š"è‡ªåŠ¨"é‡æ–°æ‰§è¡Œ-å¹¶ç¼“å­˜æ–°çš„å€¼</span><br><span class="line">  computed: {</span><br><span class="line">    reverseMessage(){</span><br><span class="line">      console.log("è®¡ç®—å±æ€§æ‰§è¡Œäº†");</span><br><span class="line">      return this.msg.split("").reverse().join("")</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    getMessage(){</span><br><span class="line">      console.log("å‡½æ•°æ‰§è¡Œäº†");</span><br><span class="line">      return this.msg.split("").reverse().join("")</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: è®¡ç®—å±æ€§æ ¹æ®ä¾èµ–å˜é‡ç»“æœç¼“å­˜, ä¾èµ–å˜åŒ–é‡æ–°è®¡ç®—ç»“æœå­˜å…¥ç¼“å­˜, æ¯”æ™®é€šæ–¹æ³•æ€§èƒ½æ›´é«˜</p>
</blockquote>
<h3 id="3-2-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-æ€»ä»·å’Œå‡ä»·"><a href="#3-2-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-æ€»ä»·å’Œå‡ä»·" class="headerlink" title="3.2_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(æ€»ä»·å’Œå‡ä»·)"></a>3.2_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(æ€»ä»·å’Œå‡ä»·)</h3><blockquote>
<p>ç›®æ ‡: åŸºäºä¹‹å‰çš„æ¡ˆä¾‹, å®Œæˆæ€»ä»·å’Œå‡ä»·çš„è®¡ç®—æ•ˆæœ</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/image-20210215160140718.png" alt="image-20210215160140718"></p>
<p>æ­¤å¤„åªä¿®æ”¹äº†å˜åŒ–çš„ä»£ç </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;tr style="background-color: #EEE"&gt;</span><br><span class="line">     &lt;td&gt;ç»Ÿè®¡:&lt;/td&gt;</span><br><span class="line">     &lt;td colspan="2"&gt;æ€»ä»·é’±ä¸º: {{ allPrice }}&lt;/td&gt;</span><br><span class="line">     &lt;td colspan="2"&gt;å¹³å‡ä»·: {{ svgPrice }}&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: æ€»ä»·å’Œå‡ä»·æ˜¾ç¤º</span><br><span class="line">// 1. æœ«å°¾è¡¥tr - æ˜¾ç¤ºæ€»ä»·å’Œå‡ä»·</span><br><span class="line">export default {</span><br><span class="line">  // ...æºä»£ç çœç•¥</span><br><span class="line">  // 2. è®¡ç®—å±æ€§</span><br><span class="line">  computed: {</span><br><span class="line">      allPrice(){</span><br><span class="line">          // 3. æ±‚æ€»ä»·</span><br><span class="line">          return this.list.reduce((sum, obj) =&gt; sum += obj.price, 0)</span><br><span class="line">      },</span><br><span class="line">      avgPrice(){</span><br><span class="line">          // 4. æ±‚å‡ä»· - ä¿ç•™2ä½å°æ•°</span><br><span class="line">          return (this.allPrice / this.list.length).toFixed(2)</span><br><span class="line">      }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æ€»ä»·æ¥æºäºæ‰€æœ‰æ•°æ®è®¡ç®—è€Œæ¥çš„ç»“æœ, æ•…é‡‡ç”¨è®¡ç®—å±æ€§</p>
</blockquote>
<h3 id="3-3-vueè®¡ç®—å±æ€§-å®Œæ•´å†™æ³•"><a href="#3-3-vueè®¡ç®—å±æ€§-å®Œæ•´å†™æ³•" class="headerlink" title="3.3_vueè®¡ç®—å±æ€§-å®Œæ•´å†™æ³•"></a>3.3_vueè®¡ç®—å±æ€§-å®Œæ•´å†™æ³•</h3><blockquote>
<p>ç›®æ ‡: è®¡ç®—å±æ€§ä¹Ÿæ˜¯å˜é‡, å¦‚æœæƒ³è¦ç›´æ¥èµ‹å€¼, éœ€è¦ä½¿ç”¨å®Œæ•´å†™æ³•</p>
</blockquote>
<p>è¯­æ³•:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">computed: {</span><br><span class="line">    <span class="string">"å±æ€§å"</span>: {</span><br><span class="line">        <span class="function"><span class="title">set</span>(<span class="params">å€¼</span>)</span>{</span><br><span class="line">            </span><br><span class="line">        },</span><br><span class="line">        <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> {</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"å€¼"</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>éœ€æ±‚: </p>
<ul>
<li>è®¡ç®—å±æ€§ç»™v-modelä½¿ç”¨</li>
</ul>
<p>é¡µé¢å‡†å¤‡è¾“å…¥æ¡†</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">          &lt;span&gt;å§“å:&lt;/span&gt;</span><br><span class="line">          &lt;input type="text" v-model="full"&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// é—®é¢˜: ç»™è®¡ç®—å±æ€§èµ‹å€¼ - éœ€è¦setter</span><br><span class="line">// è§£å†³:</span><br><span class="line">/*</span><br><span class="line">    å®Œæ•´è¯­æ³•:</span><br><span class="line">    computed: {</span><br><span class="line">        "è®¡ç®—å±æ€§å" (){},</span><br><span class="line">        "è®¡ç®—å±æ€§å": {</span><br><span class="line">            set(å€¼){</span><br><span class="line"></span><br><span class="line">            },</span><br><span class="line">            get(){</span><br><span class="line">                return å€¼</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">*/</span><br><span class="line">export default {</span><br><span class="line">    computed: {</span><br><span class="line">        full: {</span><br><span class="line">            // ç»™fullèµ‹å€¼è§¦å‘setæ–¹æ³•</span><br><span class="line">            set(val){</span><br><span class="line">                console.log(val)</span><br><span class="line">            },</span><br><span class="line">            // ä½¿ç”¨fullçš„å€¼è§¦å‘getæ–¹æ³•</span><br><span class="line">            get(){</span><br><span class="line">                return "æ— åæ°"</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æƒ³è¦ç»™è®¡ç®—å±æ€§èµ‹å€¼, éœ€è¦ä½¿ç”¨setæ–¹æ³•</p>
</blockquote>
<h3 id="3-4-æ¡ˆä¾‹-å°é€‰å½±å“å…¨é€‰"><a href="#3-4-æ¡ˆä¾‹-å°é€‰å½±å“å…¨é€‰" class="headerlink" title="3.4_æ¡ˆä¾‹-å°é€‰å½±å“å…¨é€‰"></a>3.4_æ¡ˆä¾‹-å°é€‰å½±å“å…¨é€‰</h3><blockquote>
<p>ç›®æ ‡: å°é€‰æ¡†éƒ½é€‰ä¸­(æ‰‹é€‰), å…¨é€‰è‡ªåŠ¨é€‰ä¸­</p>
</blockquote>
<ul>
<li>éœ€æ±‚: å°é€‰æ¡†éƒ½é€‰ä¸­(æ‰‹é€‰), å…¨é€‰è‡ªåŠ¨é€‰ä¸­</li>
</ul>
<p>åˆ†æ:</p>
<p>â‘  å…ˆé™æ€ååŠ¨æ€, ä».mdæ‹¿åˆ°é™æ€æ ‡ç­¾å’Œæ•°æ®</p>
<p>â‘¡ å¾ªç¯ç”Ÿæˆå¤é€‰æ¡†å’Œæ–‡å­—, å¯¹è±¡çš„cå±æ€§å’Œå°é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€, ç”¨v-modelåŒå‘ç»‘å®š</p>
<p>â‘¢ å®šä¹‰isAllè®¡ç®—å±æ€§, å€¼é€šè¿‡å°é€‰æ¡†ä»¬ç»Ÿè®¡cå±æ€§çŠ¶æ€å¾—æ¥</p>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/%E5%B0%8F%E9%80%89_%E5%BD%B1%E5%93%8D%E5%A4%9A%E9%80%89.gif" alt="image-20210511120432874"></p>
<p>æ¨¡æ¿æ ‡ç­¾å’Œæ•°æ®(==ç›´æ¥å¤åˆ¶åœ¨è¿™åŸºç¡€ä¸Šå†™vueä»£ç ==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;span&gt;å…¨é€‰:&lt;/span&gt;</span><br><span class="line">    &lt;input type="checkbox"/&gt;</span><br><span class="line">    &lt;button&gt;åé€‰&lt;/button&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;input type="checkbox"/&gt;</span><br><span class="line">        &lt;span&gt;ä»»åŠ¡å&lt;/span&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      arr: [</span><br><span class="line">        {</span><br><span class="line">          name: "çŒªå…«æˆ’",</span><br><span class="line">          c: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "å­™æ‚Ÿç©º",</span><br><span class="line">          c: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "å”åƒ§",</span><br><span class="line">          c: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "ç™½é¾™é©¬",</span><br><span class="line">          c: false,</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>==æ­£ç¡®ä»£ç ,ä¸å¯å¤åˆ¶==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;span&gt;å…¨é€‰:&lt;/span&gt;</span><br><span class="line">    &lt;!-- 4. v-model å…³è”å…¨é€‰ - é€‰ä¸­çŠ¶æ€ --&gt;</span><br><span class="line">    &lt;input type="checkbox" v-model="isAll"/&gt;</span><br><span class="line">    &lt;button&gt;åé€‰&lt;/button&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for="(obj, index) in arr" :key="index"&gt;</span><br><span class="line">        &lt;!-- 3. å¯¹è±¡.c - å…³è” é€‰ä¸­çŠ¶æ€ --&gt;</span><br><span class="line">        &lt;input type="checkbox" v-model="obj.c"/&gt;</span><br><span class="line">        &lt;span&gt;{{ obj.name }}&lt;/span&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: å°é€‰æ¡† -&gt; å…¨é€‰</span><br><span class="line">// 1. æ ‡ç­¾+æ ·å¼+jså‡†å¤‡å¥½</span><br><span class="line">// 2. æŠŠæ•°æ®å¾ªç¯å±•ç¤ºåˆ°é¡µé¢ä¸Š</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      arr: [</span><br><span class="line">        {</span><br><span class="line">          name: "çŒªå…«æˆ’",</span><br><span class="line">          c: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "å­™æ‚Ÿç©º",</span><br><span class="line">          c: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "å”åƒ§",</span><br><span class="line">          c: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "ç™½é¾™é©¬",</span><br><span class="line">          c: false,</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  // 5. è®¡ç®—å±æ€§-isAll</span><br><span class="line">  computed: {</span><br><span class="line">    isAll () {</span><br><span class="line">         // 6. ç»Ÿè®¡å°é€‰æ¡†çŠ¶æ€ -&gt;  å…¨é€‰çŠ¶æ€</span><br><span class="line">        // everyå£è¯€: æŸ¥æ‰¾æ•°ç»„é‡Œ"ä¸ç¬¦åˆ"æ¡ä»¶, ç›´æ¥åŸåœ°è¿”å›false</span><br><span class="line">        return this.arr.every(obj =&gt; obj.c === true)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-5-æ¡ˆä¾‹-å…¨é€‰å½±å“å°é€‰"><a href="#3-5-æ¡ˆä¾‹-å…¨é€‰å½±å“å°é€‰" class="headerlink" title="3.5_æ¡ˆä¾‹-å…¨é€‰å½±å“å°é€‰"></a>3.5_æ¡ˆä¾‹-å…¨é€‰å½±å“å°é€‰</h3><blockquote>
<p>ç›®æ ‡: å…¨é€‰å½±å“å°é€‰</p>
</blockquote>
<ul>
<li>éœ€æ±‚1: è·å–åˆ°å…¨é€‰çŠ¶æ€ â€“ æ”¹è£…isAllè®¡ç®—å±æ€§</li>
<li>éœ€æ±‚2: å…¨é€‰çŠ¶æ€åŒæ­¥ç»™æ‰€æœ‰å°é€‰æ¡†</li>
</ul>
<p>åˆ†æ:</p>
<p>â‘ : isAllæ”¹æˆå®Œæ•´å†™æ³•, seté‡Œè·å–åˆ°å…¨é€‰æ¡†, å‹¾é€‰çš„çŠ¶æ€å€¼</p>
<p>â‘¡: éå†æ•°æ®æ•°ç»„, èµ‹ç»™æ‰€æœ‰å°é€‰æ¡†v-modelå…³è”çš„å±æ€§</p>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/%E5%85%A8%E9%80%89_%E5%BD%B1%E5%93%8D%E5%B0%8F%E9%80%89.gif" alt="image-20210511120432874"></p>
<p>==æ­£ç¡®ä»£ç ,ä¸å¯ä»¥å¤åˆ¶==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  // ...å…¶ä»–ä»£ç </span><br><span class="line">  // 5. è®¡ç®—å±æ€§-isAll</span><br><span class="line">  computed: {</span><br><span class="line">    isAll: {</span><br><span class="line">      set(val){</span><br><span class="line">        // 7. å…¨é€‰æ¡† - é€‰ä¸­çŠ¶æ€(true/false)</span><br><span class="line">        this.arr.forEach(obj =&gt; obj.c = val)</span><br><span class="line">      },</span><br><span class="line">      get(){</span><br><span class="line">        // 6. ç»Ÿè®¡å°é€‰æ¡†çŠ¶æ€ -&gt;  å…¨é€‰çŠ¶æ€</span><br><span class="line">        // everyå£è¯€: æŸ¥æ‰¾æ•°ç»„é‡Œ"ä¸ç¬¦åˆ"æ¡ä»¶, ç›´æ¥åŸåœ°è¿”å›false</span><br><span class="line">        return this.arr.every(obj =&gt; obj.c === true)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-6-æ¡ˆä¾‹-åé€‰"><a href="#3-6-æ¡ˆä¾‹-åé€‰" class="headerlink" title="3.6_æ¡ˆä¾‹-åé€‰"></a>3.6_æ¡ˆä¾‹-åé€‰</h3><blockquote>
<p>ç›®æ ‡: åé€‰åŠŸèƒ½</p>
</blockquote>
<ul>
<li>éœ€æ±‚: ç‚¹å‡»åé€‰, è®©æ‰€æœ‰å°é€‰æ¡†, å„è‡ªå–ç›¸åå‹¾é€‰çŠ¶æ€</li>
</ul>
<p>åˆ†æ:</p>
<p>â‘ : å°é€‰æ¡†çš„å‹¾é€‰çŠ¶æ€, åœ¨å¯¹è±¡çš„cå±æ€§</p>
<p>â‘¡: éå†æ‰€æœ‰å¯¹è±¡, æŠŠå¯¹è±¡çš„cå±æ€§å–ç›¸åå€¼èµ‹äºˆå›å»å³å¯</p>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/%E5%8F%8D%E9%80%89_%E6%95%88%E6%9E%9C.gif" alt="image-20210511120432874"></p>
<p>==æ­£ç¡®ä»£ç ,ä¸å¯ä»¥å¤åˆ¶==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;button @click="btn"&gt;åé€‰&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  // ...å…¶ä»–ä»£ç çœç•¥</span><br><span class="line">  methods: {</span><br><span class="line">    btn(){</span><br><span class="line">      // 8. è®©æ•°ç»„é‡Œå¯¹è±¡çš„cå±æ€§å–åå†èµ‹äºˆå›å»</span><br><span class="line">      this.arr.forEach(obj =&gt; obj.c = !obj.c)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="4-vueä¾¦å¬å™¨"><a href="#4-vueä¾¦å¬å™¨" class="headerlink" title="4. vueä¾¦å¬å™¨"></a>4. vueä¾¦å¬å™¨</h2><h3 id="4-0-vueä¾¦å¬å™¨-watch"><a href="#4-0-vueä¾¦å¬å™¨-watch" class="headerlink" title="4.0_vueä¾¦å¬å™¨-watch"></a>4.0_vueä¾¦å¬å™¨-watch</h3><blockquote>
<p>ç›®æ ‡: å¯ä»¥ä¾¦å¬data/computedå±æ€§å€¼æ”¹å˜</p>
</blockquote>
<p>è¯­æ³•:</p>
<ul>
<li>```js<br>watch: {<pre><code>"è¢«ä¾¦å¬çš„å±æ€§å" (newVal, oldVal){
    
}
</code></pre>
}<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">å®Œæ•´ä¾‹å­ä»£ç :</span><br><span class="line"></span><br><span class="line">```vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type="text" v-model="name"&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      name: ""</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // ç›®æ ‡: ä¾¦å¬åˆ°nameå€¼çš„æ”¹å˜</span><br><span class="line">  /*</span><br><span class="line">  è¯­æ³•:</span><br><span class="line">    watch: {</span><br><span class="line">      å˜é‡å (newVal, oldVal){</span><br><span class="line">        // å˜é‡åå¯¹åº”å€¼æ”¹å˜è¿™é‡Œè‡ªåŠ¨è§¦å‘</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  */</span><br><span class="line">  watch: {</span><br><span class="line">    // newVal: å½“å‰æœ€æ–°å€¼</span><br><span class="line">    // oldVal: ä¸Šä¸€åˆ»å€¼</span><br><span class="line">    name(newVal, oldVal){</span><br><span class="line">      console.log(newVal, oldVal);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<blockquote>
<p>æ€»ç»“: æƒ³è¦ä¾¦å¬ä¸€ä¸ªå±æ€§å˜åŒ–, å¯ä½¿ç”¨ä¾¦å¬å±æ€§watch</p>
</blockquote>
<h3 id="4-1-vueä¾¦å¬å™¨-æ·±åº¦ä¾¦å¬å’Œç«‹å³æ‰§è¡Œ"><a href="#4-1-vueä¾¦å¬å™¨-æ·±åº¦ä¾¦å¬å’Œç«‹å³æ‰§è¡Œ" class="headerlink" title="4.1_vueä¾¦å¬å™¨-æ·±åº¦ä¾¦å¬å’Œç«‹å³æ‰§è¡Œ"></a>4.1_vueä¾¦å¬å™¨-æ·±åº¦ä¾¦å¬å’Œç«‹å³æ‰§è¡Œ</h3><blockquote>
<p>ç›®æ ‡: ä¾¦å¬å¤æ‚ç±»å‹, æˆ–è€…ç«‹å³æ‰§è¡Œä¾¦å¬å‡½æ•°</p>
</blockquote>
<ul>
<li><p>è¯­æ³•:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">watch: {</span><br><span class="line">    <span class="string">"è¦ä¾¦å¬çš„å±æ€§å"</span>: {</span><br><span class="line">        <span class="attr">immediate</span>: <span class="literal">true</span>, <span class="comment">// ç«‹å³æ‰§è¡Œ</span></span><br><span class="line">        <span class="attr">deep</span>: <span class="literal">true</span>, <span class="comment">// æ·±åº¦ä¾¦å¬å¤æ‚ç±»å‹å†…å˜åŒ–</span></span><br><span class="line">        handler (newVal, oldVal) {</span><br><span class="line">            </span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<p>å®Œæ•´ä¾‹å­ä»£ç :</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type="text" v-model="user.name"&gt;</span><br><span class="line">    &lt;input type="text" v-model="user.age"&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      user: {</span><br><span class="line">        name: "",</span><br><span class="line">        age: 0</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // ç›®æ ‡: ä¾¦å¬å¯¹è±¡</span><br><span class="line">  /*</span><br><span class="line">  è¯­æ³•:</span><br><span class="line">    watch: {</span><br><span class="line">      å˜é‡å (newVal, oldVal){</span><br><span class="line">        // å˜é‡åå¯¹åº”å€¼æ”¹å˜è¿™é‡Œè‡ªåŠ¨è§¦å‘</span><br><span class="line">      },</span><br><span class="line">      å˜é‡å: {</span><br><span class="line">        handler(newVal, oldVal){</span><br><span class="line"></span><br><span class="line">        },</span><br><span class="line">        deep: true, // æ·±åº¦ä¾¦å¬(å¯¹è±¡é‡Œé¢å±‚çš„å€¼æ”¹å˜)</span><br><span class="line">        immediate: true // ç«‹å³ä¾¦å¬(ç½‘é¡µæ‰“å¼€handleræ‰§è¡Œä¸€æ¬¡)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  */</span><br><span class="line">  watch: {</span><br><span class="line">    user: {</span><br><span class="line">      handler(newVal, oldVal){</span><br><span class="line">        // useré‡Œçš„å¯¹è±¡</span><br><span class="line">        console.log(newVal, oldVal);</span><br><span class="line">      },</span><br><span class="line">      deep: true,</span><br><span class="line">      immediate: true</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: immediateç«‹å³ä¾¦å¬, deepæ·±åº¦ä¾¦å¬, handlerå›ºå®šæ–¹æ³•è§¦å‘</p>
</blockquote>
<h3 id="4-2-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-æ•°æ®ç¼“å­˜"><a href="#4-2-æ¡ˆä¾‹-å“ç‰Œç®¡ç†-æ•°æ®ç¼“å­˜" class="headerlink" title="4.2_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(æ•°æ®ç¼“å­˜)"></a>4.2_æ¡ˆä¾‹-å“ç‰Œç®¡ç†(æ•°æ®ç¼“å­˜)</h3><blockquote>
<p>ç›®æ ‡: ä¾¦å¬listå˜åŒ–, åŒæ­¥åˆ°æµè§ˆå™¨æœ¬åœ°</p>
</blockquote>
<ul>
<li>éœ€æ±‚: æŠŠå“ç‰Œç®¡ç†çš„æ•°æ®å®æ—¶åŒæ­¥åˆ°æœ¬åœ°ç¼“å­˜</li>
</ul>
<p>åˆ†æ:</p>
<p>â€‹    â‘  åœ¨watchä¾¦å¬listå˜åŒ–çš„æ—¶å€™, æŠŠæœ€æ–°çš„æ•°ç»„listè½¬æˆJSONå­—ç¬¦ä¸²å­˜å…¥åˆ°localStorageæœ¬åœ°</p>
<p>â€‹    â‘¡ dataé‡Œé»˜è®¤æŠŠlistå˜é‡ä»æœ¬åœ°å–å€¼, å¦‚æœå–ä¸åˆ°ç»™ä¸ªé»˜è®¤çš„ç©ºæ•°ç»„</p>
<p>æ•ˆæœ:</p>
<p>â€‹    æ–°å¢/åˆ é™¤ â€“ åˆ·æ–°é¡µé¢ â€“ æ•°æ®è¿˜åœ¨</p>
<p>åœ¨ä¹‹å‰çš„æ¡ˆä¾‹ä»£ç åŸºç¡€ä¸Šæ¥ç€å†™</p>
<p>==æ­£ç¡®ä»£ç ,ä¸å¯å¤åˆ¶==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import moment from "moment";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      name: "", // åç§°</span><br><span class="line">      price: 0, // ä»·æ ¼</span><br><span class="line">      // 3. æœ¬åœ°å–å‡ºç¼“å­˜list</span><br><span class="line">      list: JSON.parse(localStorage.getItem('pList')) || [],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  // ...å…¶ä»–ä»£ç çœç•¥</span><br><span class="line">  watch: {</span><br><span class="line">    list: {</span><br><span class="line">      handler(){</span><br><span class="line">        // 2. å­˜å…¥æœ¬åœ°</span><br><span class="line">        localStorage.setItem('pList', JSON.stringify(this.list))</span><br><span class="line">      },</span><br><span class="line">      deep: true</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä»Šæ—¥æ€»ç»“"><a href="#ä»Šæ—¥æ€»ç»“" class="headerlink" title="ä»Šæ—¥æ€»ç»“"></a>ä»Šæ—¥æ€»ç»“</h2><ul>
<li><input disabled="" type="checkbox"> v-forèƒ½ç›‘æµ‹åˆ°å“ªäº›æ•°ç»„æ–¹æ³•å˜åŒ–, æ›´æ–°é¡µé¢</li>
<li><input disabled="" type="checkbox"> keyçš„ä½œç”¨æ˜¯ä»€ä¹ˆ</li>
<li><input disabled="" type="checkbox"> è™šæ‹Ÿdomå¥½å¤„, diffç®—æ³•æ•ˆæœ</li>
<li><input disabled="" type="checkbox"> åŠ¨æ€è®¾ç½®classæˆ–style</li>
<li><input disabled="" type="checkbox"> vueè¿‡æ»¤å™¨ä½œç”¨å’Œåˆ†ç±»</li>
<li><input disabled="" type="checkbox"> vueè®¡ç®—å±æ€§ä½œç”¨</li>
<li><input disabled="" type="checkbox"> vueä¾¦å¬å™¨çš„ä½œç”¨</li>
</ul>
<h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><h3 id="1-Vue-ä¸­æ€ä¹ˆè‡ªå®šä¹‰è¿‡æ»¤å™¨"><a href="#1-Vue-ä¸­æ€ä¹ˆè‡ªå®šä¹‰è¿‡æ»¤å™¨" class="headerlink" title="1. Vue ä¸­æ€ä¹ˆè‡ªå®šä¹‰è¿‡æ»¤å™¨"></a>1. Vue ä¸­æ€ä¹ˆè‡ªå®šä¹‰è¿‡æ»¤å™¨</h3><p>â€‹    Vue.jså…è®¸è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œå¯è¢«ç”¨äºä¸€äº›å¸¸è§çš„æ–‡æœ¬æ ¼å¼åŒ–ã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼šåŒèŠ±æ‹¬å·æ’å€¼å’Œv-bindè¡¨è¾¾å¼</p>
<p>â€‹    å…¨å±€çš„ç”¨Vue.filter()</p>
<p>â€‹    å±€éƒ¨çš„ç”¨filterså±æ€§</p>
<h3 id="2-Vueä¸­-keyä½œç”¨-ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ç´¢å¼•"><a href="#2-Vueä¸­-keyä½œç”¨-ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ç´¢å¼•" class="headerlink" title="2. Vueä¸­:keyä½œç”¨, ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ç´¢å¼•"></a>2. Vueä¸­:keyä½œç”¨, ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ç´¢å¼•</h3><p>â€‹    :keyæ˜¯ç»™v-forå¾ªç¯ç”Ÿæˆæ ‡ç­¾é¢å‘å”¯ä¸€æ ‡è¯†çš„, ç”¨äºæ€§èƒ½çš„ä¼˜åŒ–</p>
<p>â€‹    å› ä¸ºv-foræ•°æ®é¡¹çš„é¡ºåºæ”¹å˜ï¼ŒVue ä¹Ÿä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ </p>
<p>â€‹    :keyå¦‚æœæ˜¯ç´¢å¼•, å› ä¸ºç´¢å¼•æ˜¯è¿ç»­çš„, å¦‚æœåˆ é™¤å…¶ä¸­æŸä¸€ä¸ª, ä¼šå¯¼è‡´æœ€åä¸€ä¸ªè¢«åˆ é™¤</p>
<p>â€‹    å½“æˆ‘ä»¬å†åˆ é™¤çš„æ—¶å€™, :keyå†æ ¹æ®æ•°æ®æ¥æŠŠæ–°æ—§çš„domå¯¹æ¯”æ—¶, åˆ é™¤:keyä¸å­˜åœ¨çš„å¯¹åº”çš„æ ‡ç­¾(æ·»åŠ ä¹Ÿæ˜¯ä¸€æ ·çš„æ’å…¥åˆ°æŒ‡å®šä½ç½®, åˆ«çš„éƒ½ä¸ä¼šåŠ¨)</p>
<h3 id="3-æ•°ç»„æ›´æ–°æœ‰çš„æ—¶å€™v-forä¸æ¸²æŸ“"><a href="#3-æ•°ç»„æ›´æ–°æœ‰çš„æ—¶å€™v-forä¸æ¸²æŸ“" class="headerlink" title="3. æ•°ç»„æ›´æ–°æœ‰çš„æ—¶å€™v-forä¸æ¸²æŸ“"></a>3. æ•°ç»„æ›´æ–°æœ‰çš„æ—¶å€™v-forä¸æ¸²æŸ“</h3><p>â€‹    å› ä¸ºvueå†…éƒ¨åªèƒ½ç›‘æµ‹åˆ°æ•°ç»„é¡ºåº/ä½ç½®çš„æ”¹å˜/æ•°é‡çš„æ”¹å˜, ä½†æ˜¯å€¼è¢«é‡æ–°èµ‹äºˆç›‘æµ‹ä¸åˆ°å˜æ›´, å¯ä»¥ç”¨ Vue.set() / vm.$set()</p>
<h2 id="é™„åŠ ç»ƒä¹ -1-ä¹°ç‚¹ä¹¦ç»ƒä¹ "><a href="#é™„åŠ ç»ƒä¹ -1-ä¹°ç‚¹ä¹¦ç»ƒä¹ " class="headerlink" title="é™„åŠ ç»ƒä¹ _1.ä¹°ç‚¹ä¹¦ç»ƒä¹ "></a>é™„åŠ ç»ƒä¹ _1.ä¹°ç‚¹ä¹¦ç»ƒä¹ </h2><blockquote>
<p>ç›®æ ‡: æŠŠæ•°æ®é“ºè®¾åˆ°é¡µé¢ä¸Š, å½“ç”¨æˆ·ç‚¹å‡»ä¹°ä¹¦æŒ‰é’®, ä¹¦ç±æ•°é‡å¢åŠ 1, å¹¶ä¸”è¦è®¡ç®—ç´¯è®¡çš„å’Œ</p>
</blockquote>
<p>æ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/7.3_%E6%A1%88%E4%BE%8B_%E4%B9%B0%E7%82%B9%E4%B9%A6%E5%AD%A6%E4%B9%A0%E5%90%A7.gif" alt="7.3_æ¡ˆä¾‹_ä¹°ç‚¹ä¹¦å­¦ä¹ å§"></p>
<p>æ ‡ç­¾ç»“æ„å’Œæ•°æ®(==å¤åˆ¶æ¥ç€å†™==): </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;è¯·é€‰æ‹©ä½ è¦è´­ä¹°çš„ä¹¦ç±&lt;/p&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;table border="1" width="500" cellspacing="0"&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;åºå·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ä¹¦å&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å•ä»·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ•°é‡&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;åˆè®¡&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    &lt;p&gt;æ€»ä»·æ ¼ä¸º: &lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      arr: [</span><br><span class="line">        {</span><br><span class="line">          name: "æ°´æµ’ä¼ ",</span><br><span class="line">          price: 107,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "è¥¿æ¸¸è®°",</span><br><span class="line">          price: 192,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "ä¸‰å›½æ¼”ä¹‰",</span><br><span class="line">          price: 219,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "çº¢æ¥¼æ¢¦",</span><br><span class="line">          price: 178,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ­£ç¡®ç­”æ¡ˆ(==ä¸å¯å¤åˆ¶==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;è¯·é€‰æ‹©ä½ è¦è´­ä¹°çš„ä¹¦ç±&lt;/p&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for="(item, ind) in arr" :key="ind"&gt;</span><br><span class="line">        &lt;span&gt;{{ item["name"] }}&lt;/span&gt;</span><br><span class="line">        &lt;button @click="buy(ind)"&gt;ä¹°ä¹¦&lt;/button&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;table border="1" width="500" cellspacing="0"&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;åºå·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ä¹¦å&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å•ä»·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ•°é‡&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;åˆè®¡&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">      &lt;tr v-for="(item, index) in arr" :key="index"&gt;</span><br><span class="line">        &lt;td&gt;{{ index + 1 }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ item["name"] }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ item["price"] }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ item["count"] }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ item["price"] * item["count"] }}&lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    &lt;p&gt;æ€»ä»·æ ¼ä¸º: {{ allPrice }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      arr: [</span><br><span class="line">        {</span><br><span class="line">          name: "æ°´æµ’ä¼ ",</span><br><span class="line">          price: 107,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "è¥¿æ¸¸è®°",</span><br><span class="line">          price: 192,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "ä¸‰å›½æ¼”ä¹‰",</span><br><span class="line">          price: 219,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "çº¢æ¥¼æ¢¦",</span><br><span class="line">          price: 178,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    buy(index) {</span><br><span class="line">      this.arr[index]["count"]++;</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    allPrice() {</span><br><span class="line">      // æ•°ç»„é‡Œæ”¾çš„æ˜¯å¯¹è±¡, è€Œå¯¹è±¡æ˜¯å¤æ‚ç±»å‹, å¼•ç”¨å…³ç³», å€¼æ”¹å˜ä¼šè§¦å‘è®¡ç®—å±æ€§é‡æ–°æ‰§è¡Œ</span><br><span class="line">      return this.arr.reduce((sum, obj) =&gt; {</span><br><span class="line">        return (sum += obj["price"] * obj["count"]);</span><br><span class="line">      }, 0);</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="é™„åŠ ç»ƒä¹ -2-é€‰ä½ çˆ±æˆ‘æ±‚å’Œ"><a href="#é™„åŠ ç»ƒä¹ -2-é€‰ä½ çˆ±æˆ‘æ±‚å’Œ" class="headerlink" title="é™„åŠ ç»ƒä¹ _2.é€‰ä½ çˆ±æˆ‘æ±‚å’Œ"></a>é™„åŠ ç»ƒä¹ _2.é€‰ä½ çˆ±æˆ‘æ±‚å’Œ</h2><blockquote>
<p>ç›®æ ‡: æŠŠç”¨æˆ·é€‰ä¸­çš„æ•°å­—, ç´¯è®¡æ±‚å’Œæ˜¾ç¤º</p>
</blockquote>
<p>æç¤º: </p>
<ul>
<li>v-modelç»‘å®šçš„å˜é‡æ˜¯æ•°ç»„, å¯ä»¥æ”¶é›†checkboxçš„valueå±æ€§å‘¦</li>
</ul>
<p>æ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/7.2_%E6%A1%88%E4%BE%8B_%E9%80%89%E4%BD%A0%E7%88%B1%E7%9A%84%E6%95%B0%E5%AD%97_%E7%BB%99%E4%BD%A0%E6%B1%82%E5%92%8C.gif" alt="7.2_æ¡ˆä¾‹_é€‰ä½ çˆ±çš„æ•°å­—_ç»™ä½ æ±‚å’Œ"></p>
<p>æ•°æ®(å¤åˆ¶):</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">[<span class="number">9</span>, <span class="number">15</span>, <span class="number">19</span>, <span class="number">25</span>, <span class="number">29</span>, <span class="number">31</span>, <span class="number">48</span>, <span class="number">57</span>, <span class="number">62</span>, <span class="number">79</span>, <span class="number">87</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>æ­£ç¡®ç­”æ¡ˆ:(==å…ˆä¸è¦çœ‹==)</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ— idæ—¶, å¯ä»¥ä½¿ç”¨index(åæ­£ä¹Ÿæ˜¯å°±åœ°æ›´æ–°) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-for</span>=<span class="string">"(item, index) in arr"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"display: inline-block"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">v-model</span>=<span class="string">"checkNumArr"</span> <span class="attr">:value</span>=<span class="string">"item"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ item }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä½ é€‰ä¸­çš„å…ƒç´ , ç´¯åŠ çš„å€¼å’Œä¸º: {{ theSum }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">arr</span>: [<span class="number">9</span>, <span class="number">15</span>, <span class="number">19</span>, <span class="number">25</span>, <span class="number">29</span>, <span class="number">31</span>, <span class="number">48</span>, <span class="number">57</span>, <span class="number">62</span>, <span class="number">79</span>, <span class="number">87</span>],</span></span><br><span class="line"><span class="javascript">      <span class="attr">checkNumArr</span>: [], <span class="comment">//  ä¿å­˜ç”¨æˆ·é€‰ä¸­çš„æ•°å­—</span></span></span><br><span class="line"><span class="javascript">    };</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">theSum</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="built_in">this</span>.checkNumArr.reduce(<span class="function">(<span class="params">sum, val</span>) =&gt;</span> {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> (sum += val);</span></span><br><span class="line"><span class="javascript">      }, <span class="number">0</span>);</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“, å½“è®¡ç®—å±æ€§å‡½æ•°é‡Œå¼•ç”¨çš„vueå˜é‡å‘ç”Ÿæ”¹å˜, å‡½æ•°å°±æ‰§è¡Œå¹¶é‡æ–°è¿”å›ç»“æœå¹¶ç¼“å­˜èµ·æ¥</p>
</blockquote>
<h2 id="ä»Šæ—¥ä½œä¸š"><a href="#ä»Šæ—¥ä½œä¸š" class="headerlink" title="ä»Šæ—¥ä½œä¸š"></a>ä»Šæ—¥ä½œä¸š</h2><p>å…ˆæŠŠè¯¾ä¸Šæ¡ˆä¾‹æ‚ä¸€é</p>
<h3 id="ç§»åŠ¨ç«¯-å¯¼èˆªåˆ‡æ¢æ•ˆæœ"><a href="#ç§»åŠ¨ç«¯-å¯¼èˆªåˆ‡æ¢æ•ˆæœ" class="headerlink" title="ç§»åŠ¨ç«¯-å¯¼èˆªåˆ‡æ¢æ•ˆæœ"></a>ç§»åŠ¨ç«¯-å¯¼èˆªåˆ‡æ¢æ•ˆæœ</h3><p>ç›®æ ‡: åˆ‡æ¢åˆ°ç§»åŠ¨ç«¯ç”»é¢, ç‚¹å‡»å¯¼èˆª, é«˜äº®</p>
<blockquote>
<p>æç¤º: ç´¢å¼• / é«˜äº®çš„classæ ·å¼</p>
</blockquote>
<p>å›¾ä¾‹:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/Day02_%E4%BD%9C%E4%B8%9A1_%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%AF%BC%E8%88%AA.gif" alt="Day02_ä½œä¸š1_ç§»åŠ¨ç«¯å¯¼èˆª"></p>
<p>ä¸å¸¦vueçš„æ ‡ç­¾ç»“æ„(==å¯å¤åˆ¶æ¥ç€å†™==)</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav_left"</span> <span class="attr">id</span>=<span class="string">"navLeft"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"nav_content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span>å¯¼èˆªåå­—<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"down"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"iconfont icon-xiajiantoubeifen gray"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">arr</span>: [</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"0"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"çƒ­é—¨"</span></span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"621"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u5496\u5561"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"627"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u996e\u98df"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"279"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u7537\u88c5"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"294"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u5973\u88c5"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"122"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u773c\u955c"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"339"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u5185\u8863\u914d\u9970"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"391"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u6bcd\u5a74"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"35"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u978b\u9774"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"39"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u8fd0\u52a8"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"153"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u7bb1\u5305"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"119"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u7f8e\u5986\u4e2a\u62a4"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"355"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u5bb6\u7eba"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"51"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u9910\u53a8"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"334"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u7535\u5668"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"369"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u5bb6\u88c5"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"10"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u5bb6\u5177"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"223"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u6570\u7801"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"429"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u6c7d\u914d"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"546"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u5065\u5eb7\u4fdd\u5065"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        {</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_id</span>: <span class="string">"433"</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">first_name</span>: <span class="string">"\u5b9a\u5236"</span>,</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">      ],</span></span><br><span class="line"><span class="javascript">    };</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.wrap</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">  <span class="attribute">margin</span>: <span class="number">0.2rem</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/*å·¦ä¾§çš„å¯¼èˆªæ ·å¼*/</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.nav_left</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">21.1875rem</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">overflow</span>: scroll;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.nav_left</span>::-webkit-scrollbar {</span></span><br><span class="line"><span class="css">  display: none;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.nav_content</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">white-space</span>: nowrap;</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0.7rem</span>;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.nav_content</span> <span class="selector-tag">span</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">0.4rem</span> <span class="number">0.6rem</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">font-size</span>: <span class="number">0.875rem</span>;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.nav_content</span> <span class="selector-class">.active</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#7f4395</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">color</span>: <span class="number">#7f4395</span>;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.nav_left</span>,</span></span><br><span class="line"><span class="css"><span class="selector-class">.down</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="comment">/*å³ä¾§å¯¼èˆªéƒ¨åˆ†*/</span></span></span><br><span class="line"><span class="css"><span class="selector-class">.down</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">  <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">  <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.gray</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">color</span>: gray;</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="css">  <span class="attribute">vertical-align</span>: middle;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å­¦ç”Ÿä¿¡æ¯ç®¡ç†"><a href="#å­¦ç”Ÿä¿¡æ¯ç®¡ç†" class="headerlink" title="å­¦ç”Ÿä¿¡æ¯ç®¡ç†"></a>å­¦ç”Ÿä¿¡æ¯ç®¡ç†</h3><p>==å¦‚æœ1ä¸ªæŒ‰é’®ä¸ä¼šå†™, ç”¨2ä¸ªæŒ‰é’®å†™==</p>
<p>ç›®æ ‡: </p>
<ul>
<li>éœ€æ±‚1: é“ºè®¾é¡µé¢, å‡†å¤‡åˆå§‹çš„æ•°æ®(è‡ªå·±æ‰‹å†™æ•°æ®ç»“æ„) - å‰é¢æ˜¯æ•°ç»„ç´¢å¼•+1 *ä½œä¸ºåºå·</li>
<li>éœ€æ±‚2: å½“è¾“å…¥æ¡†æ²¡æœ‰å€¼, è¦ç»™ç”¨æˆ·ä¸€ä¸ªæç¤º, å¿…é¡»éƒ½æœ‰å€¼æ‰èƒ½å¢åŠ æ–°æ•°æ® (æ•°æ®é©±åŠ¨é¡µé¢å“¦)</li>
<li>éœ€æ±‚3: æ·»åŠ åŠŸèƒ½ - æƒ³å¥½æ•°æ®ç»“æ„ç»Ÿä¸€å¯¹è±¡çš„key</li>
<li>éœ€æ±‚4: ç‚¹å‡»ç¼–è¾‘åŠŸèƒ½, æŠŠå€¼èµ‹äºˆåˆ°è¾“å…¥æ¡†ä¸Š(ä¸è¦æ“ä½œdom, æ•°æ®é©±åŠ¨é¡µé¢)</li>
<li>éœ€æ±‚5: ç”¨æˆ·ä¿®æ”¹å, ç‚¹å‡»ç›¸åŒæŒ‰é’® - æƒ³æƒ³æ€ä¹ˆåˆ¤æ–­æ€ä¹ˆæ˜¯æ·»åŠ è¿˜æ˜¯ä¿®æ”¹çš„åŠŸèƒ½ (æç¤º: å‡†å¤‡ä¸€ä¸ªå…¨å±€å˜é‡, ç‚¹è¿‡ç¼–è¾‘æŒ‰é’®å¯ä»¥è®©å®ƒä¸ºtrue) - å®ç°ç¼–è¾‘åæ›´æ–°é¡µé¢æ•ˆæœ</li>
<li>éœ€æ±‚6: ç‚¹å‡»åˆ é™¤, åˆ é™¤è¿™è¡Œæ•°æ®</li>
</ul>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%802-%E5%9F%BA%E7%A1%80API_%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7_%E8%BF%87%E6%BB%A4%E5%99%A8_%E4%BE%A6%E5%90%AC%E5%99%A8_%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86%E6%A1%88%E4%BE%8B/Day02_%E4%BD%9C%E4%B8%9A_%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86.gif" alt="Day02_ä½œä¸š_å­¦ç”Ÿä¿¡æ¯ç®¡ç†"></p>
<p>ä¸å¸¦vueä»£ç çš„æ ‡ç­¾ç»“æ„(==å¯å¤åˆ¶æ¥ç€å†™==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;å§“å:&lt;/span&gt;</span><br><span class="line">      &lt;input type="text" /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;å¹´é¾„:&lt;/span&gt;</span><br><span class="line">      &lt;input type="number" /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;æ€§åˆ«:&lt;/span&gt;</span><br><span class="line">      &lt;select &gt;</span><br><span class="line">        &lt;option value="ç”·"&gt;ç”·&lt;/option&gt;</span><br><span class="line">        &lt;option value="å¥³"&gt;å¥³&lt;/option&gt;</span><br><span class="line">      &lt;/select&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button &gt;æ·»åŠ /ä¿®æ”¹&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;table</span><br><span class="line">        border="1"</span><br><span class="line">        cellpadding="10"</span><br><span class="line">        cellspacing="0"</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;th&gt;åºå·&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;å§“å&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;æ€§åˆ«&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr &gt;</span><br><span class="line">          &lt;td&gt;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;</span><br><span class="line">            &lt;button &gt;åˆ é™¤&lt;/button&gt;</span><br><span class="line">            &lt;button &gt;ç¼–è¾‘&lt;/button&gt;</span><br><span class="line">          &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  </span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåŸºç¡€4-ç”Ÿå‘½å‘¨æœŸ_ç»„ä»¶è¿›é˜¶</title>
    <url>/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è‡ªæµ‹"><a href="#è‡ªæµ‹" class="headerlink" title="è‡ªæµ‹"></a>è‡ªæµ‹</h2><ul>
<li><input disabled="" type="checkbox"> çŸ¥é“window.onloadçš„ä½œç”¨</li>
<li><input disabled="" type="checkbox"> ajaxæ˜¯ä»€ä¹ˆ, XMLHttpRequestçš„ä½¿ç”¨æ­¥éª¤</li>
<li><input disabled="" type="checkbox"> jQçš„ $.ajaxåº•å±‚æ˜¯ä»€ä¹ˆ?</li>
<li><input disabled="" type="checkbox"> Promiseçš„ä½œç”¨</li>
<li><input disabled="" type="checkbox"> asyncå’Œawaitçš„ä½œç”¨-å¦‚ä½•å’ŒPromiseé…åˆ</li>
<li><input disabled="" type="checkbox"> åŒæ­¥å¼‚æ­¥çš„æ¦‚å¿µ, ä»£ç æ‰§è¡Œé¡ºåº</li>
<li><input disabled="" type="checkbox"> è¯·æ±‚å’Œå“åº”, ä»¥åŠJSONè§£æèƒ½åŠ›</li>
<li><input disabled="" type="checkbox"> VueåŸºç¡€, ç»„ä»¶ä½¿ç”¨, propsä¼ å€¼, ç»„ä»¶é€šä¿¡, è®¡ç®—å±æ€§ä½¿ç”¨, å¯¹è±¡å¼•ç”¨ç±»å‹ä½¿ç”¨</li>
</ul>
<h2 id="å­¦ä¹ ç›®æ ‡"><a href="#å­¦ä¹ ç›®æ ‡" class="headerlink" title="å­¦ä¹ ç›®æ ‡"></a>å­¦ä¹ ç›®æ ‡</h2><ol>
<li>èƒ½å¤Ÿè¯´å‡ºvueç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</li>
<li>èƒ½å¤ŸæŒæ¡axiosçš„ä½¿ç”¨</li>
<li>èƒ½å¤Ÿäº†è§£$refs, $nextTickä½¿ç”¨å’Œnameä½¿ç”¨</li>
<li>èƒ½å¤Ÿå®Œæˆè´­ç‰©è½¦æ¡ˆä¾‹å¼€å‘</li>
</ol>
<h2 id="1-vueç”Ÿå‘½å‘¨æœŸ"><a href="#1-vueç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1. vueç”Ÿå‘½å‘¨æœŸ"></a>1. vueç”Ÿå‘½å‘¨æœŸ</h2><h3 id="1-0-äººçš„-ç”Ÿå‘½å‘¨æœŸ"><a href="#1-0-äººçš„-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.0_äººçš„-ç”Ÿå‘½å‘¨æœŸ"></a>1.0_äººçš„-ç”Ÿå‘½å‘¨æœŸ</h3><blockquote>
<p>ä¸€ç»„ä»¶ä» åˆ›å»º åˆ° é”€æ¯ çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯ç”Ÿå‘½å‘¨æœŸ</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210111193143574.png" alt="image-20210111193143574"></p>
<p>Vue_ç”Ÿå‘½å‘¨æœŸ</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210511152835915.png" alt="image-20210511152835915"></p>
<h3 id="1-1-é’©å­å‡½æ•°"><a href="#1-1-é’©å­å‡½æ•°" class="headerlink" title="1.1_é’©å­å‡½æ•°"></a>1.1_é’©å­å‡½æ•°</h3><blockquote>
<p>ç›®æ ‡: <strong>Vue</strong> æ¡†æ¶å†…ç½®å‡½æ•°ï¼Œéšç€ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼Œè‡ªåŠ¨æ‰§è¡Œ</p>
</blockquote>
<p>ä½œç”¨: ç‰¹å®šçš„æ—¶é—´ç‚¹ï¼Œæ‰§è¡Œç‰¹å®šçš„æ“ä½œ</p>
<p>åœºæ™¯: ç»„ä»¶åˆ›å»ºå®Œæ¯•åï¼Œå¯ä»¥åœ¨created ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å‘èµ·Ajax è¯·æ±‚ï¼Œä»è€Œåˆå§‹åŒ– data æ•°æ®</p>
<p>åˆ†ç±»: 4å¤§é˜¶æ®µ8ä¸ªæ–¹æ³•</p>
<ul>
<li>åˆå§‹åŒ–</li>
<li>æŒ‚è½½</li>
<li>æ›´æ–°</li>
<li>é”€æ¯</li>
</ul>
<table>
<thead>
<tr>
<th><strong>é˜¶æ®µ</strong></th>
<th><strong>æ–¹æ³•å</strong></th>
<th><strong>æ–¹æ³•å</strong></th>
</tr>
</thead>
<tbody><tr>
<td>åˆå§‹åŒ–</td>
<td>beforeCreate</td>
<td>created</td>
</tr>
<tr>
<td>æŒ‚è½½</td>
<td>beforeMount</td>
<td>mounted</td>
</tr>
<tr>
<td>æ›´æ–°</td>
<td>beforeUpdate</td>
<td>updated</td>
</tr>
<tr>
<td>é”€æ¯</td>
<td>beforeDestroy</td>
<td>destroyed</td>
</tr>
</tbody></table>
<p><a href="https://cn.vuejs.org/v2/guide/instance.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE%E7%A4%BA">å®˜ç½‘æ–‡æ¡£</a></p>
<p>ä¸‹å›¾å±•ç¤ºäº†å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½ ä¸éœ€è¦ç«‹é©¬å¼„æ˜ç™½æ‰€æœ‰çš„ä¸œè¥¿ï¼Œä¸è¿‡éšç€ä½ çš„ä¸æ–­å­¦ä¹ å’Œä½¿ç”¨ï¼Œå®ƒçš„å‚è€ƒä»·å€¼ä¼šè¶Šæ¥è¶Šé«˜ã€‚</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/Day03.png" alt="Day03"></p>
<h3 id="1-2-åˆå§‹åŒ–é˜¶æ®µ"><a href="#1-2-åˆå§‹åŒ–é˜¶æ®µ" class="headerlink" title="1.2_åˆå§‹åŒ–é˜¶æ®µ"></a>1.2_åˆå§‹åŒ–é˜¶æ®µ</h3><blockquote>
<p>ç›®æ ‡: æŒæ¡åˆå§‹åŒ–é˜¶æ®µ2ä¸ªé’©å­å‡½æ•°ä½œç”¨å’Œæ‰§è¡Œæ—¶æœº</p>
</blockquote>
<p>å«ä¹‰è®²è§£:</p>
<p>1.new Vue() â€“ Vueå®ä¾‹åŒ–(ç»„ä»¶ä¹Ÿæ˜¯ä¸€ä¸ªå°çš„Vueå®ä¾‹)</p>
<p>2.Init Events &amp; Lifecycle â€“ åˆå§‹åŒ–äº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸå‡½æ•°</p>
<p>3.beforeCreate â€“ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¢«æ‰§è¡Œ</p>
<p>4.Init injections&amp;reactivity â€“ Vueå†…éƒ¨æ·»åŠ dataå’Œmethodsç­‰</p>
<p>5.created â€“ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¢«æ‰§è¡Œ, å®ä¾‹åˆ›å»º</p>
<p>6.æ¥ä¸‹æ¥æ˜¯ç¼–è¯‘æ¨¡æ¿é˜¶æ®µ â€“å¼€å§‹åˆ†æ</p>
<p>7.Has el option? â€“ æ˜¯å¦æœ‰elé€‰é¡¹ â€“ æ£€æŸ¥è¦æŒ‚åˆ°å“ªé‡Œ</p>
<p>â€‹    æ²¡æœ‰. è°ƒç”¨$mount()æ–¹æ³•</p>
<p>â€‹    æœ‰, ç»§ç»­æ£€æŸ¥templateé€‰é¡¹</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210511153050932.png" alt="image-20210511153050932"></p>
<p>components/Life.vue - åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">            <span class="attr">msg</span>: <span class="string">"hello, Vue"</span></span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ä¸€. åˆå§‹åŒ–</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// new Vue()ä»¥å, vueå†…éƒ¨ç»™å®ä¾‹å¯¹è±¡æ·»åŠ äº†ä¸€äº›å±æ€§å’Œæ–¹æ³•, dataå’Œmethodsåˆå§‹åŒ–"ä¹‹å‰"</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">beforeCreate</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"beforeCreate -- æ‰§è¡Œ"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.msg); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="comment">// dataå’Œmethodsåˆå§‹åŒ–ä»¥å</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// åœºæ™¯: ç½‘ç»œè¯·æ±‚, æ³¨å†Œå…¨å±€äº‹ä»¶</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"created -- æ‰§è¡Œ"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.msg); <span class="comment">// hello, Vue</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> {</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">"å“ˆå“ˆå“ˆ"</span>);</span></span><br><span class="line"><span class="javascript">        }, <span class="number">1000</span>)</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>App.vue - å¼•å…¥ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;1. ç”Ÿå‘½å‘¨æœŸ&lt;/h1&gt;</span><br><span class="line"> 	&lt;Life&gt;&lt;/Life&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Life from './components/Life'</span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    Life</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-3-æŒ‚è½½é˜¶æ®µ"><a href="#1-3-æŒ‚è½½é˜¶æ®µ" class="headerlink" title="1.3_æŒ‚è½½é˜¶æ®µ"></a>1.3_æŒ‚è½½é˜¶æ®µ</h3><blockquote>
<p>ç›®æ ‡: æŒæ¡æŒ‚è½½é˜¶æ®µ2ä¸ªé’©å­å‡½æ•°ä½œç”¨å’Œæ‰§è¡Œæ—¶æœº</p>
</blockquote>
<p>å«ä¹‰è®²è§£:</p>
<p>1.templateé€‰é¡¹æ£€æŸ¥</p>
<p>â€‹    æœ‰ - ç¼–è¯‘templateè¿”å›renderæ¸²æŸ“å‡½æ•°</p>
<p>â€‹    æ—  â€“ ç¼–è¯‘elé€‰é¡¹å¯¹åº”æ ‡ç­¾ä½œä¸ºtemplate(è¦æ¸²æŸ“çš„æ¨¡æ¿)</p>
<p>2.è™šæ‹ŸDOMæŒ‚è½½æˆçœŸå®DOMä¹‹å‰</p>
<p>3.beforeMount â€“ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¢«æ‰§è¡Œ</p>
<p>4.Create â€¦ â€“ æŠŠè™šæ‹ŸDOMå’Œæ¸²æŸ“çš„æ•°æ®ä¸€å¹¶æŒ‚åˆ°çœŸå®DOMä¸Š</p>
<p>5.çœŸå®DOMæŒ‚è½½å®Œæ¯•</p>
<p>6.mounted â€“ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¢«æ‰§è¡Œ</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210511153649298.png" alt="image-20210511153649298"></p>
<p>components/Life.vue - åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å­¦ä¹ ç”Ÿå‘½å‘¨æœŸ - çœ‹æ§åˆ¶å°æ‰“å°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"myP"</span>&gt;</span>{{ msg }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ...çœç•¥å…¶ä»–ä»£ç </span></span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">// äºŒ. æŒ‚è½½</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// çœŸå®DOMæŒ‚è½½ä¹‹å‰</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// åœºæ™¯: é¢„å¤„ç†data, ä¸ä¼šè§¦å‘updatedé’©å­å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">beforeMount</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"beforeMount -- æ‰§è¡Œ"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">document</span>.getElementById(<span class="string">"myP"</span>)); <span class="comment">// null</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.msg = <span class="string">"é‡æ–°å€¼"</span></span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="comment">// çœŸå®DOMæŒ‚è½½ä»¥å</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// åœºæ™¯: æŒ‚è½½åçœŸå®DOM</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"mounted -- æ‰§è¡Œ"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">document</span>.getElementById(<span class="string">"myP"</span>)); <span class="comment">// p</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-4-æ›´æ–°é˜¶æ®µ"><a href="#1-4-æ›´æ–°é˜¶æ®µ" class="headerlink" title="1.4_æ›´æ–°é˜¶æ®µ"></a>1.4_æ›´æ–°é˜¶æ®µ</h3><blockquote>
<p>ç›®æ ‡: æŒæ¡æ›´æ–°é˜¶æ®µ2ä¸ªé’©å­å‡½æ•°ä½œç”¨å’Œæ‰§è¡Œæ—¶æœº</p>
</blockquote>
<p>å«ä¹‰è®²è§£:</p>
<p>1.å½“dataé‡Œæ•°æ®æ”¹å˜, æ›´æ–°DOMä¹‹å‰</p>
<p>2.beforeUpdate â€“ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¢«æ‰§è¡Œ</p>
<p>3.Virtual DOMâ€¦â€¦ â€“ è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“, æ‰“è¡¥ä¸åˆ°çœŸå®DOM</p>
<p>4.updated â€“ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¢«æ‰§è¡Œ</p>
<p>5.å½“æœ‰dataæ•°æ®æ”¹å˜ â€“ é‡å¤è¿™ä¸ªå¾ªç¯</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210511154016777.png" alt="image-20210511154016777"></p>
<p>components/Life.vue - åˆ›å»ºä¸€ä¸ªæ–‡ä»¶</p>
<p>å‡†å¤‡ul+liå¾ªç¯, æŒ‰é’®æ·»åŠ å…ƒç´ , è§¦å‘dataæ”¹å˜-&gt;å¯¼è‡´æ›´æ–°å‘¨æœŸå¼€å§‹</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>å­¦ä¹ ç”Ÿå‘½å‘¨æœŸ - çœ‹æ§åˆ¶å°æ‰“å°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"myP"</span>&gt;</span>{{ msg }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"myUL"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(val, index) in arr"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">              {{ val }}</span><br><span class="line">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"arr.push(1000)"</span>&gt;</span>ç‚¹å‡»æœ«å°¾åŠ å€¼<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">            <span class="attr">msg</span>: <span class="string">"hello, Vue"</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">arr</span>: [<span class="number">5</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">1</span>]</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ...çœç•¥å…¶ä»–ä»£ç </span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// ä¸‰. æ›´æ–°</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// å‰æ: dataæ•°æ®æ”¹å˜æ‰æ‰§è¡Œ</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// æ›´æ–°ä¹‹å‰</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">beforeUpdate</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"beforeUpdate -- æ‰§è¡Œ"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">document</span>.querySelectorAll(<span class="string">"#myUL&gt;li"</span>)[<span class="number">4</span>]); <span class="comment">// undefined</span></span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="comment">// æ›´æ–°ä¹‹å</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// åœºæ™¯: è·å–æ›´æ–°åçš„çœŸå®DOM</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">updated</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"updated -- æ‰§è¡Œ"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="built_in">document</span>.querySelectorAll(<span class="string">"#myUL&gt;li"</span>)[<span class="number">4</span>]); <span class="comment">// li</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-5-é”€æ¯é˜¶æ®µ"><a href="#1-5-é”€æ¯é˜¶æ®µ" class="headerlink" title="1.5_é”€æ¯é˜¶æ®µ"></a>1.5_é”€æ¯é˜¶æ®µ</h3><blockquote>
<p>ç›®æ ‡: æŒæ¡é”€æ¯é˜¶æ®µ2ä¸ªé’©å­å‡½æ•°ä½œç”¨å’Œæ‰§è¡Œæ—¶æœº</p>
</blockquote>
<p>å«ä¹‰è®²è§£:</p>
<p>1.å½“$destroy()è¢«è°ƒç”¨ â€“ æ¯”å¦‚ç»„ä»¶DOMè¢«ç§»é™¤(ä¾‹v-if)</p>
<p>2.beforeDestroy â€“ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¢«æ‰§è¡Œ</p>
<p>3.æ‹†å¸æ•°æ®ç›‘è§†å™¨ã€å­ç»„ä»¶å’Œäº‹ä»¶ä¾¦å¬å™¨</p>
<p>4.å®ä¾‹é”€æ¯å, æœ€åè§¦å‘ä¸€ä¸ªé’©å­å‡½æ•°</p>
<p>5.destroyed â€“ ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è¢«æ‰§è¡Œ</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210511154330252.png" alt="image-20210511154330252"></p>
<p>components/Life.vue - å‡†å¤‡ç”Ÿå‘½å‘¨æœŸæ–¹æ³•(Lifeç»„ä»¶å³å°†è¦è¢«åˆ é™¤)</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ...çœç•¥å…¶ä»–ä»£ç </span></span></span><br><span class="line"><span class="javascript">    </span></span><br><span class="line"><span class="javascript">    <span class="comment">// å››. é”€æ¯</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// å‰æ: v-if="false" é”€æ¯Vueå®ä¾‹</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// åœºæ™¯: ç§»é™¤å…¨å±€äº‹ä»¶, ç§»é™¤å½“å‰ç»„ä»¶, è®¡æ—¶å™¨, å®šæ—¶å™¨, eventBusç§»é™¤äº‹ä»¶$offæ–¹æ³•</span></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">beforeDestroy</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log('beforeDestroy -- æ‰§è¡Œ');</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer)</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">destroyed</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">        <span class="comment">// console.log("destroyed -- æ‰§è¡Œ");</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸»è¦: App.vue - ç‚¹å‡»æŒ‰é’®è®©Lifeç»„ä»¶ä»DOMä¸Šç§»é™¤ -&gt; å¯¼è‡´Lifeç»„ä»¶è¿›å…¥é”€æ¯é˜¶æ®µ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;Life v-if="show"&gt;&lt;/Life&gt;</span><br><span class="line">&lt;button @click="show = false"&gt;é”€æ¯ç»„ä»¶&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    data(){</span><br><span class="line">        return {</span><br><span class="line">            show: true</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="2-axios"><a href="#2-axios" class="headerlink" title="2. axios"></a>2. axios</h2><h3 id="2-0-axiosåŸºæœ¬ä½¿ç”¨"><a href="#2-0-axiosåŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.0_axiosåŸºæœ¬ä½¿ç”¨"></a>2.0_axiosåŸºæœ¬ä½¿ç”¨</h3><p><a href="http://www.axios-js.com/">axiosæ–‡æ¡£</a></p>
<p>ç‰¹ç‚¹</p>
<ul>
<li>æ”¯æŒå®¢æˆ·ç«¯å‘é€Ajaxè¯·æ±‚</li>
<li>æ”¯æŒæœåŠ¡ç«¯Node.jså‘é€è¯·æ±‚</li>
<li>æ”¯æŒPromiseç›¸å…³ç”¨æ³•</li>
<li>æ”¯æŒè¯·æ±‚å’Œå“åº”çš„æ‹¦æˆªå™¨åŠŸèƒ½</li>
<li>è‡ªåŠ¨è½¬æ¢JSONæ•°æ®</li>
<li>axios åº•å±‚è¿˜æ˜¯åŸç”Ÿjså®ç°, å†…éƒ¨é€šè¿‡Promiseå°è£…çš„</li>
</ul>
<p>axiosçš„åŸºæœ¬ä½¿ç”¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">axios({</span><br><span class="line">  <span class="attr">method</span>: <span class="string">'è¯·æ±‚æ–¹å¼'</span>, <span class="comment">// get post</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">'è¯·æ±‚åœ°å€'</span>,</span><br><span class="line">  <span class="attr">data</span>: {    <span class="comment">// æ‹¼æ¥åˆ°è¯·æ±‚ä½“çš„å‚æ•°,  postè¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">    <span class="attr">xxx</span>: xxx,</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">params</span>: {  <span class="comment">// æ‹¼æ¥åˆ°è¯·æ±‚è¡Œçš„å‚æ•°, getè¯·æ±‚çš„å‚æ•°</span></span><br><span class="line">   	<span class="attr">xxx</span>: xxx </span><br><span class="line">  }</span><br><span class="line">}).then(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(res.data) <span class="comment">// åå°è¿”å›çš„ç»“æœ</span></span><br><span class="line">}).catch(<span class="function"><span class="params">err</span> =&gt;</span> {</span><br><span class="line">  <span class="built_in">console</span>.log(err) <span class="comment">// åå°æŠ¥é”™è¿”å›</span></span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-1-axiosåŸºæœ¬ä½¿ç”¨-è·å–æ•°æ®"><a href="#2-1-axiosåŸºæœ¬ä½¿ç”¨-è·å–æ•°æ®" class="headerlink" title="2.1_axiosåŸºæœ¬ä½¿ç”¨-è·å–æ•°æ®"></a>2.1_axiosåŸºæœ¬ä½¿ç”¨-è·å–æ•°æ®</h3><blockquote>
<p>ç›®æ ‡: è°ƒç”¨æ–‡æ¡£æœ€å_è·å–æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯æ¥å£</p>
</blockquote>
<p>åŠŸèƒ½: ç‚¹å‡»è°ƒç”¨åå°æ¥å£, æ‹¿åˆ°æ‰€æœ‰æ•°æ® â€“ æ‰“å°åˆ°æ§åˆ¶å°</p>
<p>æ¥å£: å‚è€ƒé¢„ä¹ èµ„æ–™.md â€“ æ¥å£æ–‡æ¡£</p>
<p>å¼•å…¥: ä¸‹è½½axios, å¼•å…¥åæ‰èƒ½ä½¿ç”¨</p>
<p>æ•ˆæœ:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210511154911824.png" alt="image-20210511154911824"></p>
<p>ä¾‹å­å¦‚ä¸‹:</p>
<p>components/UseAxios.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;1. è·å–æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯&lt;/p&gt;</span><br><span class="line">    &lt;button @click="getAllFn"&gt;ç‚¹å‡»-æŸ¥çœ‹æ§åˆ¶å°&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡1: è·å–æ‰€æœ‰å›¾ä¹¦ä¿¡æ¯</span><br><span class="line">// 1. ä¸‹è½½axios</span><br><span class="line">// 2. å¼•å…¥axios</span><br><span class="line">// 3. å‘èµ·axiosè¯·æ±‚</span><br><span class="line">import axios from "axios";</span><br><span class="line">export default {</span><br><span class="line">  methods: {</span><br><span class="line">    getAllFn() {</span><br><span class="line">      axios({</span><br><span class="line">        url: "http://123.57.109.30:3006/api/getbooks",</span><br><span class="line">        method: "GET", // é»˜è®¤å°±æ˜¯GETæ–¹å¼è¯·æ±‚, å¯ä»¥çœç•¥ä¸å†™</span><br><span class="line">      }).then((res) =&gt; {</span><br><span class="line">        console.log(res);</span><br><span class="line">      });</span><br><span class="line">      // axios()-åŸåœ°å¾—åˆ°Promiseå¯¹è±¡</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-2-axiosåŸºæœ¬ä½¿ç”¨-ä¼ å‚"><a href="#2-2-axiosåŸºæœ¬ä½¿ç”¨-ä¼ å‚" class="headerlink" title="2.2_axiosåŸºæœ¬ä½¿ç”¨-ä¼ å‚"></a>2.2_axiosåŸºæœ¬ä½¿ç”¨-ä¼ å‚</h3><blockquote>
<p>ç›®æ ‡: è°ƒç”¨æ¥å£-è·å–æŸæœ¬ä¹¦ç±ä¿¡æ¯</p>
</blockquote>
<p>åŠŸèƒ½: ç‚¹å‡»è°ƒç”¨åå°æ¥å£, æŸ¥è¯¢ç”¨æˆ·æƒ³è¦çš„ä¹¦ç±ä¿¡æ¯ â€“ æ‰“å°åˆ°æ§åˆ¶å°</p>
<p>æ¥å£: å‚è€ƒé¢„ä¹ èµ„æ–™.md â€“ æ¥å£æ–‡æ¡£</p>
<p>æ•ˆæœ:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210511160538891.png" alt="image-20210511160538891"></p>
<p>ä¾‹å­å¦‚ä¸‹:</p>
<p>components/UseAxios.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;2. æŸ¥è¯¢æŸæœ¬ä¹¦ç±ä¿¡æ¯&lt;/p&gt;</span><br><span class="line">    &lt;input type="text" placeholder="è¯·è¾“å…¥è¦æŸ¥è¯¢ çš„ä¹¦å" v-model="bName" /&gt;</span><br><span class="line">    &lt;button @click="findFn"&gt;æŸ¥è¯¢&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from "axios";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      bName: ""</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    // ...çœç•¥äº†æŸ¥è¯¢æ‰€æœ‰çš„ä»£ç </span><br><span class="line">    findFn() {</span><br><span class="line">      axios({</span><br><span class="line">        url: "/api/getbooks",</span><br><span class="line">        method: "GET",</span><br><span class="line">        params: { // éƒ½ä¼šaxiosæœ€ç»ˆæ‹¼æ¥åˆ°url?åé¢</span><br><span class="line">            bookname: this.bName</span><br><span class="line">        }</span><br><span class="line">      }).then(res =&gt; {</span><br><span class="line">          console.log(res);</span><br><span class="line">      })</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-3-axiosåŸºæœ¬ä½¿ç”¨-å‘å¸ƒä¹¦ç±"><a href="#2-3-axiosåŸºæœ¬ä½¿ç”¨-å‘å¸ƒä¹¦ç±" class="headerlink" title="2.3_axiosåŸºæœ¬ä½¿ç”¨-å‘å¸ƒä¹¦ç±"></a>2.3_axiosåŸºæœ¬ä½¿ç”¨-å‘å¸ƒä¹¦ç±</h3><blockquote>
<p>ç›®æ ‡: å®Œæˆå‘å¸ƒä¹¦ç±åŠŸèƒ½</p>
</blockquote>
<p>åŠŸèƒ½: ç‚¹å‡»æ–°å¢æŒ‰é’®, æŠŠç”¨æˆ·è¾“å…¥çš„ä¹¦ç±ä¿¡æ¯, ä¼ é€’ç»™åå° â€“ æŠŠç»“æœæ‰“å°åœ¨æ§åˆ¶å°</p>
<p>æ¥å£: å‚è€ƒé¢„ä¹ èµ„æ–™.md â€“ æ¥å£æ–‡æ¡£</p>
<p>æ•ˆæœ:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210511161239034.png" alt="image-20210511161239034"></p>
<p>ä¾‹å­å¦‚ä¸‹:</p>
<p>components/UseAxios.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;3. æ–°å¢å›¾ä¹¦ä¿¡æ¯&lt;/p&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type="text" placeholder="ä¹¦å" v-model="bookObj.bookname"&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type="text" placeholder="ä½œè€…" v-model="bookObj.author"&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;input type="text" placeholder="å‡ºç‰ˆç¤¾" v-model="bookObj.publisher"&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;button @click="sendFn"&gt;å‘å¸ƒ&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from "axios";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      bName: "",</span><br><span class="line">      bookObj: { // å‚æ•°åæå‰å’Œåå°çš„å‚æ•°åå¯¹ä¸Š-å‘é€è¯·æ±‚å°±ä¸ç”¨å†æ¬¡å¯¹æ¥äº†</span><br><span class="line">          bookname: "",</span><br><span class="line">          author: "",</span><br><span class="line">          publisher: ""</span><br><span class="line">      }</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    // ...çœç•¥äº†å…¶ä»–ä»£ç </span><br><span class="line">    sendFn(){</span><br><span class="line">       axios({</span><br><span class="line">           url: "/api/addbook",</span><br><span class="line">           method: "POST",</span><br><span class="line">           data: {</span><br><span class="line">               appkey: "7250d3eb-18e1-41bc-8bb2-11483665535a",</span><br><span class="line">               ...this.bookObj</span><br><span class="line">            // ç­‰åŒäºä¸‹é¢</span><br><span class="line">            // bookname: this.bookObj.bookname,</span><br><span class="line">            // author: this.bookObj.author,</span><br><span class="line">            // publisher: this.bookObj.publisher</span><br><span class="line">           }</span><br><span class="line">       }) </span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="2-4-axiosåŸºæœ¬ä½¿ç”¨-å…¨å±€é…ç½®"><a href="#2-4-axiosåŸºæœ¬ä½¿ç”¨-å…¨å±€é…ç½®" class="headerlink" title="2.4_axiosåŸºæœ¬ä½¿ç”¨-å…¨å±€é…ç½®"></a>2.4_axiosåŸºæœ¬ä½¿ç”¨-å…¨å±€é…ç½®</h3><blockquote>
<p>ç›®æ ‡: é¿å…å‰ç¼€åŸºåœ°å€, æš´éœ²åœ¨é€»è¾‘é¡µé¢é‡Œ, ç»Ÿä¸€è®¾ç½®</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">axios.defaults.baseURL = <span class="string">"http://123.57.109.30:3006"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰€æœ‰è¯·æ±‚çš„urlå‰ç½®å¯ä»¥å»æ‰, è¯·æ±‚æ—¶, axiosä¼šè‡ªåŠ¨æ‹¼æ¥baseURLçš„åœ°å€åœ¨å‰é¢</span></span><br><span class="line"><span class="function"><span class="title">getAllFn</span>(<span class="params"></span>)</span> {</span><br><span class="line">    axios({</span><br><span class="line">        <span class="attr">url</span>: <span class="string">"/api/getbooks"</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">"GET"</span>, <span class="comment">// é»˜è®¤å°±æ˜¯GETæ–¹å¼è¯·æ±‚, å¯ä»¥çœç•¥ä¸å†™</span></span><br><span class="line">    }).then(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    });</span><br><span class="line">    <span class="comment">// axios()-åŸåœ°å¾—åˆ°Promiseå¯¹è±¡</span></span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<h2 id="3-nextTickå’Œ-refsçŸ¥è¯†"><a href="#3-nextTickå’Œ-refsçŸ¥è¯†" class="headerlink" title="3. $nextTickå’Œ$refsçŸ¥è¯†"></a>3. $nextTickå’Œ$refsçŸ¥è¯†</h2><h3 id="3-0-refs-è·å–DOM"><a href="#3-0-refs-è·å–DOM" class="headerlink" title="3.0 $refs-è·å–DOM"></a>3.0 $refs-è·å–DOM</h3><blockquote>
<p>ç›®æ ‡: åˆ©ç”¨ ref å’Œ $refs å¯ä»¥ç”¨äºè·å– dom å…ƒç´ </p>
</blockquote>
<p>components/More.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;1. è·å–åŸç”ŸDOMå…ƒç´ &lt;/p&gt;</span><br><span class="line">      &lt;h1 id="h" ref="myH"&gt;æˆ‘æ˜¯ä¸€ä¸ªå­¤ç‹¬å¯æ€œåˆèƒ½åƒçš„h1&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: è·å–ç»„ä»¶å¯¹è±¡</span><br><span class="line">// 1. åˆ›å»ºç»„ä»¶/å¼•å…¥ç»„ä»¶/æ³¨å†Œç»„ä»¶/ä½¿ç”¨ç»„ä»¶</span><br><span class="line">// 2. ç»„ä»¶èµ·åˆ«åref</span><br><span class="line">// 3. æ°å½“æ—¶æœº, è·å–ç»„ä»¶å¯¹è±¡</span><br><span class="line">export default {</span><br><span class="line">    mounted(){</span><br><span class="line">        console.log(document.getElementById("h")); // h1</span><br><span class="line">        console.log(this.$refs.myH); // h1</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: é€šè¿‡id / ref, éƒ½å¯ä»¥è·å–åŸç”ŸDOMæ ‡ç­¾</p>
</blockquote>
<h3 id="3-1-refs-è·å–ç»„ä»¶å¯¹è±¡"><a href="#3-1-refs-è·å–ç»„ä»¶å¯¹è±¡" class="headerlink" title="3.1 $refs-è·å–ç»„ä»¶å¯¹è±¡"></a>3.1 $refs-è·å–ç»„ä»¶å¯¹è±¡</h3><blockquote>
<p>ç›®æ ‡: è·å–ç»„ä»¶å¯¹è±¡, è°ƒç”¨ç»„ä»¶é‡Œæ–¹æ³•</p>
</blockquote>
<p>components/Child/Demo.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;æˆ‘æ˜¯Demoç»„ä»¶&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">    methods: {</span><br><span class="line">        fn(){</span><br><span class="line">            console.log("demoç»„ä»¶å†…çš„æ–¹æ³•è¢«è°ƒç”¨äº†");</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>More.vue - è·å–ç»„ä»¶å¯¹è±¡ - è°ƒç”¨ç»„ä»¶æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;1. è·å–åŸç”ŸDOMå…ƒç´ &lt;/p&gt;</span><br><span class="line">      &lt;h1 id="h" ref="myH"&gt;æˆ‘æ˜¯ä¸€ä¸ªå­¤ç‹¬å¯æ€œåˆèƒ½åƒçš„h1&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;2. è·å–ç»„ä»¶å¯¹è±¡ - å¯è°ƒç”¨ç»„ä»¶å†…ä¸€åˆ‡&lt;/p&gt;</span><br><span class="line">      &lt;Demo ref="de"&gt;&lt;/Demo&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: è·å–ç»„ä»¶å¯¹è±¡</span><br><span class="line">// 1. åˆ›å»ºç»„ä»¶/å¼•å…¥ç»„ä»¶/æ³¨å†Œç»„ä»¶/ä½¿ç”¨ç»„ä»¶</span><br><span class="line">// 2. ç»„ä»¶èµ·åˆ«åref</span><br><span class="line">// 3. æ°å½“æ—¶æœº, è·å–ç»„ä»¶å¯¹è±¡</span><br><span class="line">import Demo from './Child/Demo'</span><br><span class="line">export default {</span><br><span class="line">    mounted(){</span><br><span class="line">        console.log(document.getElementById("h")); // h1</span><br><span class="line">        console.log(this.$refs.myH); // h1</span><br><span class="line"></span><br><span class="line">        let demoObj = this.$refs.de;</span><br><span class="line">        demoObj.fn()</span><br><span class="line">    },</span><br><span class="line">    components: {</span><br><span class="line">        Demo</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: refå®šä¹‰å€¼, é€šè¿‡$refs.å€¼ æ¥è·å–ç»„ä»¶å¯¹è±¡, å°±èƒ½ç»§ç»­è°ƒç”¨ç»„ä»¶å†…çš„å˜é‡</p>
</blockquote>
<h3 id="3-2-nextTickä½¿ç”¨"><a href="#3-2-nextTickä½¿ç”¨" class="headerlink" title="3.2 $nextTickä½¿ç”¨"></a>3.2 $nextTickä½¿ç”¨</h3><blockquote>
<h4 id="Vueæ›´æ–°DOM-å¼‚æ­¥çš„"><a href="#Vueæ›´æ–°DOM-å¼‚æ­¥çš„" class="headerlink" title="Vueæ›´æ–°DOM-å¼‚æ­¥çš„"></a>Vueæ›´æ–°DOM-å¼‚æ­¥çš„</h4></blockquote>
<blockquote>
<p>ç›®æ ‡: ç‚¹å‡»count++, é©¬ä¸Šé€šè¿‡â€åŸç”ŸDOMâ€æ‹¿æ ‡ç­¾å†…å®¹, æ— æ³•æ‹¿åˆ°æ–°å€¼</p>
</blockquote>
<p>components/Move.vue - ç»§ç»­æ–°å¢ç¬¬ä¸‰å¥—ä»£ç </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;1. è·å–åŸç”ŸDOMå…ƒç´ &lt;/p&gt;</span><br><span class="line">      &lt;h1 id="h" ref="myH"&gt;æˆ‘æ˜¯ä¸€ä¸ªå­¤ç‹¬å¯æ€œåˆèƒ½åƒçš„h1&lt;/h1&gt;</span><br><span class="line">      &lt;p&gt;2. è·å–ç»„ä»¶å¯¹è±¡ - å¯è°ƒç”¨ç»„ä»¶å†…ä¸€åˆ‡&lt;/p&gt;</span><br><span class="line">      &lt;Demo ref="de"&gt;&lt;/Demo&gt;</span><br><span class="line">      &lt;p&gt;3. vueæ›´æ–°DOMæ˜¯å¼‚æ­¥çš„&lt;/p&gt;</span><br><span class="line">      &lt;p ref="myP"&gt;{{ count }}&lt;/p&gt;</span><br><span class="line">      &lt;button @click="btn"&gt;ç‚¹å‡»count+1, é©¬ä¸Šæå–pæ ‡ç­¾å†…å®¹&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: è·å–ç»„ä»¶å¯¹è±¡</span><br><span class="line">// 1. åˆ›å»ºç»„ä»¶/å¼•å…¥ç»„ä»¶/æ³¨å†Œç»„ä»¶/ä½¿ç”¨ç»„ä»¶</span><br><span class="line">// 2. ç»„ä»¶èµ·åˆ«åref</span><br><span class="line">// 3. æ°å½“æ—¶æœº, è·å–ç»„ä»¶å¯¹è±¡</span><br><span class="line">import Demo from './Child/Demo'</span><br><span class="line">export default {</span><br><span class="line">    mounted(){</span><br><span class="line">        console.log(document.getElementById("h")); // h1</span><br><span class="line">        console.log(this.$refs.myH); // h1</span><br><span class="line"></span><br><span class="line">        let demoObj = this.$refs.de;</span><br><span class="line">        demoObj.fn()</span><br><span class="line">    },</span><br><span class="line">    components: {</span><br><span class="line">        Demo</span><br><span class="line">    },</span><br><span class="line">    data(){</span><br><span class="line">        return {</span><br><span class="line">            count: 0</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">        btn(){</span><br><span class="line">            this.count++; // vueç›‘æµ‹æ•°æ®æ›´æ–°, å¼€å¯ä¸€ä¸ªDOMæ›´æ–°é˜Ÿåˆ—(å¼‚æ­¥ä»»åŠ¡)</span><br><span class="line">            console.log(this.$refs.myP.innerHTML); // 0</span><br><span class="line"></span><br><span class="line">            // åŸå› : Vueæ›´æ–°DOMå¼‚æ­¥</span><br><span class="line">            // è§£å†³: this.$nextTick()</span><br><span class="line">            // è¿‡ç¨‹: DOMæ›´æ–°å®Œä¼šæŒ¨ä¸ªè§¦å‘$nextTické‡Œçš„å‡½æ•°ä½“</span><br><span class="line">             this.$nextTick(() =&gt; {</span><br><span class="line">                console.log(this.$refs.myP.innerHTML); // 1</span><br><span class="line">            })</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å› ä¸ºDOMæ›´æ–°æ˜¯å¼‚æ­¥çš„</p>
</blockquote>
<h3 id="3-3-nextTickä½¿ç”¨åœºæ™¯"><a href="#3-3-nextTickä½¿ç”¨åœºæ™¯" class="headerlink" title="3.3 $nextTickä½¿ç”¨åœºæ™¯"></a>3.3 $nextTickä½¿ç”¨åœºæ™¯</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»æœç´¢æŒ‰é’®, å¼¹å‡ºèšç„¦çš„è¾“å…¥æ¡†, æŒ‰é’®æ¶ˆå¤±</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/$nextTick%E4%BD%BF%E7%94%A8.gif" alt="$nextTickä½¿ç”¨"></p>
<p>components/Tick.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;input ref="myInp" type="text" placeholder="è¿™æ˜¯ä¸€ä¸ªè¾“å…¥æ¡†" v-if="isShow"&gt;</span><br><span class="line">      &lt;button v-else @click="btn"&gt;ç‚¹å‡»æˆ‘è¿›è¡Œæœç´¢&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: ç‚¹æŒ‰é’®(æ¶ˆå¤±) - è¾“å…¥æ¡†å‡ºç°å¹¶èšç„¦</span><br><span class="line">// 1. è·å–åˆ°è¾“å…¥æ¡†</span><br><span class="line">// 2. è¾“å…¥æ¡†è°ƒç”¨äº‹ä»¶æ–¹æ³•focus()è¾¾åˆ°èšç„¦è¡Œä¸º</span><br><span class="line">export default {</span><br><span class="line">    data(){</span><br><span class="line">        return {</span><br><span class="line">            isShow: false</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    methods: {</span><br><span class="line">        async btn(){</span><br><span class="line">            this.isShow = true;</span><br><span class="line">            // this.$refs.myInp.focus()</span><br><span class="line">            // åŸå› : dataå˜åŒ–æ›´æ–°DOMæ˜¯å¼‚æ­¥çš„</span><br><span class="line">            // è¾“å…¥æ¡†è¿˜æ²¡æœ‰æŒ‚è½½åˆ°çœŸå®DOMä¸Š</span><br><span class="line">            // è§£å†³:</span><br><span class="line">            // this.$nextTick(() =&gt; {</span><br><span class="line">            //     this.$refs.myInp.focus()</span><br><span class="line">            // })</span><br><span class="line">            // æ‰©å±•: awaitå–ä»£å›è°ƒå‡½æ•°</span><br><span class="line">            // $nextTick()åŸåœ°è¿”å›Promiseå¯¹è±¡</span><br><span class="line">            await this.$nextTick()</span><br><span class="line">            this.$refs.myInp.focus()</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-4-ç»„ä»¶nameå±æ€§ä½¿ç”¨"><a href="#3-4-ç»„ä»¶nameå±æ€§ä½¿ç”¨" class="headerlink" title="3.4 ç»„ä»¶nameå±æ€§ä½¿ç”¨"></a>3.4 ç»„ä»¶nameå±æ€§ä½¿ç”¨</h3><blockquote>
<p>ç›®æ ‡: å¯ä»¥ç”¨ç»„ä»¶çš„nameå±æ€§å€¼, æ¥æ³¨å†Œç»„ä»¶åå­—</p>
</blockquote>
<p>é—®é¢˜: ç»„ä»¶åä¸æ˜¯å¯ä»¥éšä¾¿å†™çš„?</p>
<p>ç­”æ¡ˆ: æˆ‘ä»¬å°è£…çš„ç»„ä»¶-å¯ä»¥è‡ªå·±å®šä¹‰nameå±æ€§ç»„ä»¶å-è®©ä½¿ç”¨è€…æœ‰ä¸ªç»Ÿä¸€çš„å‰ç¼€é£æ ¼</p>
<p>components/Com.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ªComç»„ä»¶&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">    name: "ComNameHaHa" // æ³¨å†Œæ—¶å¯ä»¥å®šä¹‰è‡ªå·±çš„åå­—</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue - æ³¨å†Œå’Œä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;1. ç”Ÿå‘½å‘¨æœŸ&lt;/h1&gt;</span><br><span class="line">    &lt;Life v-if="show"&gt;&lt;/Life&gt;</span><br><span class="line">    &lt;button @click="show = false"&gt;é”€æ¯ç»„ä»¶&lt;/button&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h1&gt;2. axiosä½¿ç”¨&lt;/h1&gt;</span><br><span class="line">    &lt;UseAxios&gt;&lt;/UseAxios&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h1&gt;3. $refsçš„ä½¿ç”¨&lt;/h1&gt;</span><br><span class="line">    &lt;More&gt;&lt;/More&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h1&gt;4. $nextTickä½¿ç”¨åœºæ™¯&lt;/h1&gt;</span><br><span class="line">    &lt;Tick&gt;&lt;/Tick&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;h1&gt;5. ç»„ä»¶å¯¹è±¡é‡Œnameå±æ€§&lt;/h1&gt;</span><br><span class="line">    &lt;ComNameHaHa&gt;&lt;/ComNameHaHa&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Life from './components/Life'</span><br><span class="line">import UseAxios from './components/UseAxios'</span><br><span class="line">import More from './components/More'</span><br><span class="line">import Tick from './components/Tick'</span><br><span class="line">import Com from './components/Com'</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      show: true</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  components: {</span><br><span class="line">    Life,</span><br><span class="line">    UseAxios,</span><br><span class="line">    More,</span><br><span class="line">    Tick,</span><br><span class="line">    [Com.name]: Com // å¯¹è±¡é‡Œçš„keyæ˜¯å˜é‡çš„è¯[]å±æ€§åè¡¨è¾¾å¼</span><br><span class="line">    // "ComNameHaHa": Com</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="4-æ¡ˆä¾‹-è´­ç‰©è½¦"><a href="#4-æ¡ˆä¾‹-è´­ç‰©è½¦" class="headerlink" title="4. æ¡ˆä¾‹ - è´­ç‰©è½¦"></a>4. æ¡ˆä¾‹ - è´­ç‰©è½¦</h2><p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%85%A8%E6%95%88%E6%9E%9C.gif" alt="è´­ç‰©è½¦å…¨æ•ˆæœ"></p>
<h3 id="4-0-æ¡ˆä¾‹-è´­ç‰©è½¦-é¡¹ç›®åˆå§‹åŒ–"><a href="#4-0-æ¡ˆä¾‹-è´­ç‰©è½¦-é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="4.0 æ¡ˆä¾‹-è´­ç‰©è½¦-é¡¹ç›®åˆå§‹åŒ–"></a>4.0 æ¡ˆä¾‹-è´­ç‰©è½¦-é¡¹ç›®åˆå§‹åŒ–</h3><blockquote>
<p>ç›®æ ‡: åˆå§‹åŒ–æ–°é¡¹ç›®, æ¸…ç©ºä¸è¦çš„ä¸œè¥¿, ä¸‹è½½bootstrapåº“, ä¸‹è½½lessæ¨¡å—</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">vue create shopcar</span><br><span class="line">yarn add bootstrap</span><br><span class="line">yarn add less less-loader@5.0.0 -D</span><br></pre></td></tr></tbody></table></figure>

<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210307092110985.png" alt="image-20210307092110985"></p>
<ol>
<li>æŒ‰ç…§éœ€æ±‚, æŠŠé¡¹ç›®é¡µé¢æ‹†åˆ†æˆå‡ ä¸ªç»„ä»¶, åœ¨componentsä¸‹åˆ›å»º</li>
</ol>
<ul>
<li><p>MyHeaderç»„ä»¶</p>
</li>
<li><p>MyFooterç»„ä»¶</p>
</li>
<li><p>MyGoodsç»„ä»¶ - å•†å“</p>
</li>
<li><p>MyCountç»„ä»¶</p>
</li>
</ul>
<ol start="2">
<li><p>ç„¶åå¼•å…¥åˆ°App.vueä¸Šæ³¨å†Œ</p>
</li>
<li><p>åœ¨main.jsä¸­å¼•å…¥bootStrapåº“</p>
</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"bootstrap/dist/css/bootstrap.css"</span> <span class="comment">// å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…é‡Œçš„æŸä¸ªcssæ–‡ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<p>MyHeader.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-header"&gt;è´­ç‰©è½¦æ¡ˆä¾‹&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="less" scoped&gt;</span><br><span class="line">  .my-header {</span><br><span class="line">    height: 45px;</span><br><span class="line">    line-height: 45px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    background-color: #1d7bff;</span><br><span class="line">    color: #fff;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    z-index: 2;</span><br><span class="line">  }</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>MyGoods.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-goods-item"&gt;</span><br><span class="line">    &lt;div class="left"&gt;</span><br><span class="line">      &lt;div class="custom-control custom-checkbox"&gt;</span><br><span class="line">        &lt;input type="checkbox" class="custom-control-input" id="input"</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;label class="custom-control-label" for="input"&gt;</span><br><span class="line">          &lt;img src="http://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg" alt=""&gt;</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="right"&gt;</span><br><span class="line">      &lt;div class="top"&gt;å•†å“åå­—&lt;/div&gt;</span><br><span class="line">      &lt;div class="bottom"&gt;</span><br><span class="line">        &lt;span class="price"&gt;Â¥ 100&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">            æ•°é‡ç»„ä»¶</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="less" scoped&gt;</span><br><span class="line">.my-goods-item {</span><br><span class="line">  display: flex;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  border-bottom: 1px solid #ccc;</span><br><span class="line">  .left {</span><br><span class="line">    img {</span><br><span class="line">      width: 120px;</span><br><span class="line">      height: 120px;</span><br><span class="line">      margin-right: 8px;</span><br><span class="line">      border-radius: 10px;</span><br><span class="line">    }</span><br><span class="line">    .custom-control-label::before,</span><br><span class="line">    .custom-control-label::after {</span><br><span class="line">      top: 50px;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  .right {</span><br><span class="line">    flex: 1;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    justify-content: space-between;</span><br><span class="line">    .top{</span><br><span class="line">        font-size: 14px;</span><br><span class="line">        font-weight: 700;</span><br><span class="line">    }</span><br><span class="line">    .bottom {</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-between;</span><br><span class="line">      padding: 5px 0;</span><br><span class="line">      align-items: center;</span><br><span class="line">      .price {</span><br><span class="line">        color: red;</span><br><span class="line">        font-weight: bold;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ç›®æ ‡: å®Œæˆå•†å“ç»„ä»¶å³ä¸‹è§’å•†å“ç»„ä»¶çš„å¼€å‘</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210223135638409.png" alt="image-20210223135638409"></p>
<p>components/MyCount.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-counter"&gt;</span><br><span class="line">    &lt;button type="button" class="btn btn-light" &gt;-&lt;/button&gt;</span><br><span class="line">    &lt;input type="number" class="form-control inp" &gt;</span><br><span class="line">    &lt;button type="button" class="btn btn-light"&gt;+&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="less" scoped&gt;</span><br><span class="line">.my-counter {</span><br><span class="line">  display: flex;</span><br><span class="line">  .inp {</span><br><span class="line">    width: 45px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    margin: 0 10px;</span><br><span class="line">  }</span><br><span class="line">  .btn, .inp{</span><br><span class="line">    transform: scale(0.9);</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>components/MyFooter.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- åº•éƒ¨ --&gt;</span><br><span class="line">  &lt;div class="my-footer"&gt;</span><br><span class="line">    &lt;!-- å…¨é€‰ --&gt;</span><br><span class="line">    &lt;div class="custom-control custom-checkbox"&gt;</span><br><span class="line">      &lt;input type="checkbox" class="custom-control-input" id="footerCheck"&gt;</span><br><span class="line">      &lt;label class="custom-control-label" for="footerCheck"&gt;å…¨é€‰&lt;/label&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- åˆè®¡ --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;åˆè®¡:&lt;/span&gt;</span><br><span class="line">      &lt;span class="price"&gt;Â¥ 0&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- æŒ‰é’® --&gt;</span><br><span class="line">    &lt;button type="button" class="footer-btn btn btn-primary"&gt;ç»“ç®— ( 0 )&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  </span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="less" scoped&gt;</span><br><span class="line">.my-footer {</span><br><span class="line">  position: fixed;</span><br><span class="line">  z-index: 2;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 50px;</span><br><span class="line">  border-top: 1px solid #ccc;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">  padding: 0 10px;</span><br><span class="line">  background: #fff;</span><br><span class="line"></span><br><span class="line">  .price {</span><br><span class="line">    color: red;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    font-size: 15px;</span><br><span class="line">  }</span><br><span class="line">  .footer-btn {</span><br><span class="line">    min-width: 80px;</span><br><span class="line">    height: 30px;</span><br><span class="line">    line-height: 30px;</span><br><span class="line">    border-radius: 25px;</span><br><span class="line">    padding: 0;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="4-1-æ¡ˆä¾‹-è´­ç‰©è½¦-å¤´éƒ¨è‡ªå®šä¹‰"><a href="#4-1-æ¡ˆä¾‹-è´­ç‰©è½¦-å¤´éƒ¨è‡ªå®šä¹‰" class="headerlink" title="4.1 æ¡ˆä¾‹-è´­ç‰©è½¦-å¤´éƒ¨è‡ªå®šä¹‰"></a>4.1 æ¡ˆä¾‹-è´­ç‰©è½¦-å¤´éƒ¨è‡ªå®šä¹‰</h3><blockquote>
<p>ç›®çš„: å¤´éƒ¨çš„æ ‡é¢˜, é¢œè‰², èƒŒæ™¯è‰²å¯ä»¥éšä¾¿ä¿®æ”¹, propsç±»å‹çš„æ ¡éªŒ</p>
</blockquote>
<p>æ€è·¯</p>
<ol>
<li>åœ¨MyHeader.vueä¸­å‡†å¤‡propsé‡Œå˜é‡, ç„¶åä½¿ç”¨</li>
<li>åœ¨ä½¿ç”¨MyHeader.vueç»„ä»¶æ—¶, ä¼ å…¥ç›¸åº”çš„å€¼ (colorå’ŒbackgroundColor)</li>
</ol>
<p>MyHeader.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-header" :style="{backgroundColor: background, color}"&gt;{{ title }}&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: è®©Headerç»„ä»¶æ”¯æŒä¸åŒçš„é¡¹ç›® - è‡ªå®šä¹‰</span><br><span class="line">// 1. åˆ†æå“ªäº›å¯ä»¥è‡ªå®šä¹‰ (èƒŒæ™¯è‰², æ–‡å­—é¢œè‰², æ–‡å­—å†…å®¹)</span><br><span class="line">// 2. (æ–°) å¯ä»¥å¯¹propsçš„å˜é‡çš„å€¼ è¿›è¡Œæ ¡éªŒ</span><br><span class="line">// 3. å†…éƒ¨ä½¿ç”¨propså˜é‡çš„å€¼</span><br><span class="line">// 4. å¤–éƒ¨ä½¿ç”¨æ—¶, éµå®ˆå˜é‡åä½œä¸ºå±æ€§å, å€¼çš„ç±»å‹éµå®ˆ</span><br><span class="line">export default {</span><br><span class="line">    props: {</span><br><span class="line">        background: String, // å¤–éƒ¨æ’å…¥æ­¤å˜é‡çš„å€¼, å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹, å¦åˆ™æŠ¥é”™</span><br><span class="line">        color: {</span><br><span class="line">            type: String, // çº¦æŸcolorå€¼çš„ç±»å‹</span><br><span class="line">            default: "#fff" // colorå˜é‡é»˜è®¤å€¼(å¤–éƒ¨ä¸ç»™ æˆ‘colorä¼ å€¼, ä½¿ç”¨é»˜è®¤å€¼)</span><br><span class="line">        },</span><br><span class="line">        title: {</span><br><span class="line">            type: String,</span><br><span class="line">            required: true // å¿…é¡»ä¼ å…¥æ­¤å˜é‡çš„å€¼</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="less" scoped&gt;</span><br><span class="line">  .my-header {</span><br><span class="line">    height: 45px;</span><br><span class="line">    line-height: 45px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    background-color: #1d7bff;</span><br><span class="line">    color: #fff;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: 0;</span><br><span class="line">    left: 0;</span><br><span class="line">    width: 100%;</span><br><span class="line">    z-index: 2;</span><br><span class="line">  }</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vueä¼ å…¥ç›¸åº”è‡ªå®šä¹‰çš„å€¼</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;MyHeader title="è´­ç‰©è½¦æ¡ˆä¾‹"&gt;&lt;/MyHeader&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“:  </p>
<p>props: [] - åªèƒ½å£°æ˜å˜é‡å’Œæ¥æ”¶, ä¸èƒ½ç±»å‹æ ¡éªŒ</p>
<p>props: {} - å£°æ˜å˜é‡å’Œæ ¡éªŒç±»å‹è§„åˆ™ - å¤–éƒ¨ä¼ å…¥å€¼ä¸å¯¹åˆ™æŠ¥é”™</p>
</blockquote>
<h3 id="4-2-æ¡ˆä¾‹-è´­ç‰©è½¦-è¯·æ±‚æ•°æ®"><a href="#4-2-æ¡ˆä¾‹-è´­ç‰©è½¦-è¯·æ±‚æ•°æ®" class="headerlink" title="4.2 æ¡ˆä¾‹-è´­ç‰©è½¦-è¯·æ±‚æ•°æ®"></a>4.2 æ¡ˆä¾‹-è´­ç‰©è½¦-è¯·æ±‚æ•°æ®</h3><blockquote>
<p>ç›®æ ‡: ä½¿ç”¨axiosæŠŠæ•°æ®è¯·æ±‚å›æ¥</p>
</blockquote>
<p>æ•°æ®åœ°å€: <a href="https://www.escook.cn/api/cart">https://www.escook.cn/api/cart</a>  (getæ–¹å¼)</p>
<ol>
<li>ä¸‹è½½axios</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">yarn add axios</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>main.js - åŸå‹ä¸ŠæŒ‚è½½</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç›®æ ‡: è¯·æ±‚æ•°æ® - æ‰“å°</span></span><br><span class="line"><span class="comment">// 1. ä¸‹è½½axiosåº“, main.js - å…¨å±€ç»‘å®šå±æ€§ (ç¡®ä¿ä»»æ„.vueæ–‡ä»¶å¯ä»¥éƒ½è®¿é—®åˆ°è¿™ä¸ªaxiosæ–¹æ³•)</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="comment">// 2. åŸºç¡€åœ°å€</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">"https://www.escook.cn"</span></span><br><span class="line"><span class="comment">// 3. axiosæ–¹æ³•æ·»åŠ åˆ°Vueçš„åŸå‹ä¸Š</span></span><br><span class="line">Vue.prototype.$axios = axios</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">}).$mount(<span class="string">'#app'</span>)</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>App.vueè¯·æ±‚ä½¿ç”¨</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      list: [] // å•†å“æ‰€æœ‰æ•°æ®</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  created(){</span><br><span class="line">    // ä¸å¿…åœ¨è‡ªå·±å¼•å…¥axioså˜é‡, è€Œæ˜¯ç›´æ¥ä½¿ç”¨å…¨å±€å±æ€§$axios</span><br><span class="line">    this.$axios({</span><br><span class="line">      url: "/api/cart"</span><br><span class="line">    }).then(res =&gt; {</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.list = res.data.list</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: åˆ©ç”¨axios, è°ƒç”¨æ¥å£, æŠŠæ•°æ®è¯·æ±‚å›æ¥</p>
</blockquote>
<h3 id="4-3-æ¡ˆä¾‹-è´­ç‰©è½¦-æ•°æ®æ¸²æŸ“"><a href="#4-3-æ¡ˆä¾‹-è´­ç‰©è½¦-æ•°æ®æ¸²æŸ“" class="headerlink" title="4.3 æ¡ˆä¾‹-è´­ç‰©è½¦-æ•°æ®æ¸²æŸ“"></a>4.3 æ¡ˆä¾‹-è´­ç‰©è½¦-æ•°æ®æ¸²æŸ“</h3><blockquote>
<p>ç›®æ ‡: æŠŠä¸Šé¢è¯·æ±‚çš„æ•°æ®, é“ºè®¾åˆ°é¡µé¢ä¸Š</p>
</blockquote>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;MyGoods v-for="obj in list" </span><br><span class="line">         :key="obj.id"</span><br><span class="line">         :gObj="obj"</span><br><span class="line">&gt;&lt;/MyGoods&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>MyGoods.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-goods-item"&gt;</span><br><span class="line">    &lt;div class="left"&gt;</span><br><span class="line">      &lt;div class="custom-control custom-checkbox"&gt;</span><br><span class="line">        &lt;!-- *é‡è¦:</span><br><span class="line">          æ¯ä¸ªå¯¹è±¡å’Œç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„</span><br><span class="line">          å¯¹è±¡é‡Œçš„goods_stateå…³è”è‡ªå·±å¯¹åº”å•†å“çš„å¤é€‰æ¡†</span><br><span class="line">         --&gt;</span><br><span class="line">         &lt;!-- bug:</span><br><span class="line">          å¾ªç¯çš„æ‰€æœ‰labelçš„foréƒ½æ˜¯input, idä¹Ÿéƒ½æ˜¯input - é»˜è®¤åªæœ‰ç¬¬ä¸€ä¸ªç”Ÿæ•ˆ</span><br><span class="line">          è§£å†³: æ¯æ¬¡å¯¹è±¡é‡Œçš„idå€¼(1, 2), åˆ†åˆ«ç»™idå’Œforä½¿ç”¨å³å¯åŒºåˆ†</span><br><span class="line">          --&gt;</span><br><span class="line">        &lt;input type="checkbox" class="custom-control-input" :id="gObj.id"</span><br><span class="line">        v-model="gObj.goods_state"</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;label class="custom-control-label" :for="gObj.id"&gt;</span><br><span class="line">          &lt;img :src="gObj.goods_img" alt=""&gt;</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="right"&gt;</span><br><span class="line">      &lt;div class="top"&gt;{{ gObj.goods_name }}&lt;/div&gt;</span><br><span class="line">      &lt;div class="bottom"&gt;</span><br><span class="line">        &lt;span class="price"&gt;Â¥ {{ gObj.goods_price }}&lt;/span&gt;</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">            &lt;MyCount :obj="gObj"&gt;&lt;/MyCount&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyCount from './MyCount'</span><br><span class="line">export default {</span><br><span class="line">    props: {</span><br><span class="line">      gObj: Object</span><br><span class="line">    },</span><br><span class="line">    components: {</span><br><span class="line">        MyCount</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>MyCount.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-counter"&gt;</span><br><span class="line">    &lt;button type="button" class="btn btn-light" &gt;-&lt;/button&gt;</span><br><span class="line">    &lt;input type="number" class="form-control inp" v-model.number="obj.goods_count"&gt;</span><br><span class="line">    &lt;button type="button" class="btn btn-light" &gt;+&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    obj: Object // å•†å“å¯¹è±¡</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æŠŠå„ä¸ªç»„ä»¶å…³è”èµ·æ¥, æŠŠæ•°æ®éƒ½é“ºè®¾åˆ°é¡µé¢ä¸Š</p>
</blockquote>
<h3 id="4-4-æ¡ˆä¾‹-è´­ç‰©è½¦-å•†å“é€‰ä¸­"><a href="#4-4-æ¡ˆä¾‹-è´­ç‰©è½¦-å•†å“é€‰ä¸­" class="headerlink" title="4.4 æ¡ˆä¾‹-è´­ç‰©è½¦-å•†å“é€‰ä¸­"></a>4.4 æ¡ˆä¾‹-è´­ç‰©è½¦-å•†å“é€‰ä¸­</h3><blockquote>
<p>é—®é¢˜: ç‚¹å‡»å‘ç°æ€»æ˜¯ç¬¬ä¸€ä¸ªè¢«é€‰ä¸­</p>
</blockquote>
<p>åŸæ¥idå’Œforéƒ½æ˜¯â€inputâ€</p>
<p>ä½†æ˜¯idæ˜¯å”¯ä¸€çš„å•Š, æ‰€ä»¥ç”¨æ•°æ®çš„idæ¥ä½œä¸ºæ ‡ç­¾çš„id, åˆ†åˆ«ç‹¬ç«‹, ä¸ºäº†å…¼å®¹labelç‚¹å‡»å›¾ç‰‡ä¹Ÿèƒ½é€‰ä¸­çš„æ•ˆæœ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;input type="checkbox" class="custom-control-input" :id="gObj.id"</span><br><span class="line">       v-model="gObj.goods_state"</span><br><span class="line">       &gt;</span><br><span class="line">&lt;label class="custom-control-label" :for="gObj.id"&gt;</span><br><span class="line">    &lt;img :src="gObj.goods_img" alt=""&gt;</span><br><span class="line">&lt;/label&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: lableçš„forå€¼å¯¹åº”inputçš„id, ç‚¹å‡»labelå°±èƒ½è®©å¯¹åº”inputå¤„äºæ¿€æ´»</p>
</blockquote>
<h3 id="4-5-æ¡ˆä¾‹-è´­ç‰©è½¦-æ•°é‡æ§åˆ¶"><a href="#4-5-æ¡ˆä¾‹-è´­ç‰©è½¦-æ•°é‡æ§åˆ¶" class="headerlink" title="4.5 æ¡ˆä¾‹-è´­ç‰©è½¦-æ•°é‡æ§åˆ¶"></a>4.5 æ¡ˆä¾‹-è´­ç‰©è½¦-æ•°é‡æ§åˆ¶</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»+å’Œ-æˆ–è€…ç›´æ¥ä¿®æ”¹è¾“å…¥æ¡†çš„å€¼å½±å“å•†å“è´­ä¹°çš„æ•°é‡</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-counter"&gt;</span><br><span class="line">    &lt;button type="button" class="btn btn-light" :disabled="obj.goods_count === 1" @click="obj.goods_count &gt; 1 &amp;&amp; obj.goods_count--"&gt;-&lt;/button&gt;</span><br><span class="line">    &lt;input type="number" class="form-control inp" v-model.number="obj.goods_count"&gt;</span><br><span class="line">    &lt;button type="button" class="btn btn-light" @click="obj.goods_count++"&gt;+&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: å•†å“æ•°é‡ - æ§åˆ¶</span><br><span class="line">// 1. å¤–éƒ¨ä¼ å…¥æ•°æ®å¯¹è±¡</span><br><span class="line">// 2. v-modelå…³è”å¯¹è±¡çš„goods_countå±æ€§å’Œè¾“å…¥æ¡† (åŒå‘ç»‘å®š)</span><br><span class="line">// 3. å•†å“æŒ‰é’® +å’Œ-, å•†å“æ•°é‡æœ€å°‘1ä»¶</span><br><span class="line">// 4. ä¾¦å¬æ•°é‡æ”¹å˜, å°äº1, ç›´æ¥å¼ºåˆ¶è¦†ç›–1</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    obj: Object // å•†å“å¯¹è±¡</span><br><span class="line">  },</span><br><span class="line">  // å› ä¸ºæ•°é‡æ§åˆ¶è¦é€šè¿‡å¯¹è±¡"äº’ç›¸å¼•ç”¨çš„å…³ç³»"æ¥å½±å“å¤–é¢å¯¹è±¡é‡Œçš„æ•°é‡å€¼, æ‰€ä»¥æœ€å¥½ä¼  å¯¹è±¡è¿›æ¥</span><br><span class="line">  watch: {</span><br><span class="line">    obj: {</span><br><span class="line">      deep: true,</span><br><span class="line">      handler(){ // æ‹¿åˆ°å•†å“æ•°é‡, åˆ¤æ–­å°äº1, å¼ºåˆ¶ä¿®æ”¹æˆ1</span><br><span class="line">        if (this.obj.goods_count &lt; 1) {</span><br><span class="line">          this.obj.goods_count = 1</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>



<h3 id="4-6-æ¡ˆä¾‹-è´­ç‰©è½¦-å…¨é€‰åŠŸèƒ½"><a href="#4-6-æ¡ˆä¾‹-è´­ç‰©è½¦-å…¨é€‰åŠŸèƒ½" class="headerlink" title="4.6 æ¡ˆä¾‹-è´­ç‰©è½¦-å…¨é€‰åŠŸèƒ½"></a>4.6 æ¡ˆä¾‹-è´­ç‰©è½¦-å…¨é€‰åŠŸèƒ½</h3><blockquote>
<p>ç›®æ ‡: åœ¨åº•éƒ¨ç»„ä»¶ä¸Š, å®Œæˆå…¨é€‰åŠŸèƒ½</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%804-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F_%E7%BB%84%E4%BB%B6%E8%BF%9B%E9%98%B6/image-20210223141427684.png" alt="image-20210223141427684"></p>
<p>æ€è·¯: </p>
<ol>
<li>ç‚¹å‡»è·å–å®ƒçš„é€‰ä¸­çŠ¶æ€</li>
<li>åŒæ­¥ç»™ä¸Šé¢æ¯ä¸ªå°é€‰æ¡† - è€Œå°é€‰æ¡†çš„é€‰ä¸­çŠ¶æ€åˆåœ¨æ•°ç»„é‡Œ</li>
<li>æŠŠæ•°ç»„ä¼ ç»™MyFooter, ç„¶åæ›´æ–°å³å¯ - å› ä¸ºå¯¹è±¡éƒ½æ˜¯å¼•ç”¨å…³ç³»çš„</li>
</ol>
<p>MyFooter.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- åº•éƒ¨ --&gt;</span><br><span class="line">  &lt;div class="my-footer"&gt;</span><br><span class="line">    &lt;!-- å…¨é€‰ --&gt;</span><br><span class="line">    &lt;div class="custom-control custom-checkbox"&gt;</span><br><span class="line">      &lt;input type="checkbox" class="custom-control-input" id="footerCheck" v-model="isAll"&gt;</span><br><span class="line">      &lt;label class="custom-control-label" for="footerCheck"&gt;å…¨é€‰&lt;/label&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- åˆè®¡ --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;span&gt;åˆè®¡:&lt;/span&gt;</span><br><span class="line">      &lt;span class="price"&gt;Â¥ {{ allPrice }}&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- æŒ‰é’® --&gt;</span><br><span class="line">    &lt;button type="button" class="footer-btn btn btn-primary"&gt;ç»“ç®— ( {{ allCount }} )&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: å…¨é€‰</span><br><span class="line">// 1. v-modelå…³è”å…¨é€‰-å¤é€‰æ¡†(v-modelåå˜é‡è®¡ç®—å±æ€§)</span><br><span class="line">// 2. é¡µé¢(è§†é¢‘å±‚)v(true) -&gt; æ•°æ®å±‚(å˜é‡-) è®¡ç®—å±æ€§(å®Œæ•´å†™æ³•)</span><br><span class="line">// 3. æŠŠå…¨é€‰ true/falseåŒæ­¥ç»™æ‰€æœ‰å°é€‰æ¡†é€‰ä¸­çŠ¶æ€ä¸Š</span><br><span class="line"></span><br><span class="line">// å°é€‰  -&gt; å…¨é€‰</span><br><span class="line">// App.vueé‡Œlistæ•°ç»„ -&gt; MyFooter.vue</span><br><span class="line">// isAllçš„getæ–¹æ³•é‡Œ, ç»Ÿè®¡çŠ¶æ€å½±å“å…¨é€‰æ¡†</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: æ€»æ•°é‡ç»Ÿè®¡</span><br><span class="line">// 1. allCountè®¡ç®—å±æ€§ç”¨ æ•°ç»„reduce+åˆ¤æ–­ç»Ÿè®¡æ•°é‡å¹¶è¿”å›</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: æ€»ä»·</span><br><span class="line">// allPriceè®¡ç®—å±æ€§, æ•°ç»„reduce+å•ä»·*æ•°é‡, åˆ¤æ–­é€‰ä¸­, æ‰ç´¯åŠ åè¿”å›</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    arr: Array</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    isAll: {</span><br><span class="line">      set(val){ // valå°±æ˜¯å…³è”è¡¨å•çš„å€¼(true/false)</span><br><span class="line">        this.$emit('changeAll', val)</span><br><span class="line">      },</span><br><span class="line">      get(){</span><br><span class="line">        // æŸ¥æ‰¾å°é€‰æ¡†å…³è”çš„å±æ€§æœ‰æ²¡æœ‰ä¸ç¬¦åˆå‹¾é€‰çš„æ¡ä»¶</span><br><span class="line">        // ç›´æ¥åŸåœ°false</span><br><span class="line">        return this.arr.every(obj =&gt; obj.goods_state === true)</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;MyFooter @changeAll="allFn" :arr="list"&gt;&lt;/MyFooter&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">methods: {</span><br><span class="line">    allFn(bool){</span><br><span class="line">      this.list.forEach(obj =&gt; obj.goods_state = bool)</span><br><span class="line">      // æŠŠMyFooterå†…çš„å…¨é€‰çŠ¶æ€true/falseåŒæ­¥ç»™æ‰€æœ‰å°é€‰æ¡†çš„å…³è”å±æ€§ä¸Š</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å…¨é€‰çš„v-modelçš„å€¼, ä½¿ç”¨è®¡ç®—å±æ€§å®Œæ•´å†™æ³•</p>
</blockquote>
<h3 id="4-7-æ¡ˆä¾‹-è´­ç‰©è½¦-æ€»æ•°é‡"><a href="#4-7-æ¡ˆä¾‹-è´­ç‰©è½¦-æ€»æ•°é‡" class="headerlink" title="4.7 æ¡ˆä¾‹-è´­ç‰©è½¦-æ€»æ•°é‡"></a>4.7 æ¡ˆä¾‹-è´­ç‰©è½¦-æ€»æ•°é‡</h3><blockquote>
<p>ç›®æ ‡: å®Œæˆåº•éƒ¨ç»„ä»¶, æ˜¾ç¤ºé€‰ä¸­çš„å•†å“çš„æ€»æ•°é‡</p>
</blockquote>
<p>MyFooter.vue</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">allCount</span>(<span class="params"></span>)</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.arr.reduce(<span class="function">(<span class="params">sum, obj</span>) =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (obj.goods_state === <span class="literal">true</span>) { <span class="comment">// é€‰ä¸­å•†å“æ‰ç´¯åŠ æ•°é‡</span></span><br><span class="line">            sum += obj.goods_count;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    }, <span class="number">0</span>)</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å¯¹è±¡ä¹‹é—´æ˜¯å¼•ç”¨å…³ç³», å¯¹è±¡å€¼æ”¹å˜, æ‰€æœ‰ç”¨åˆ°çš„åœ°æ–¹éƒ½è·Ÿç€æ”¹å˜</p>
</blockquote>
<h3 id="4-8-æ¡ˆä¾‹-è´­ç‰©è½¦-æ€»ä»·"><a href="#4-8-æ¡ˆä¾‹-è´­ç‰©è½¦-æ€»ä»·" class="headerlink" title="4.8 æ¡ˆä¾‹-è´­ç‰©è½¦-æ€»ä»·"></a>4.8 æ¡ˆä¾‹-è´­ç‰©è½¦-æ€»ä»·</h3><blockquote>
<p>ç›®æ ‡: å®Œæˆé€‰ä¸­å•†å“è®¡ç®—ä»·æ ¼</p>
</blockquote>
<p>components/MyFooter.vue</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">allPrice</span>(<span class="params"></span>)</span>{</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.arr.reduce(<span class="function">(<span class="params">sum, obj</span>) =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (obj.goods_state){</span><br><span class="line">          sum += obj.goods_count * obj.goods_price</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">      }, <span class="number">0</span>)</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æŠŠæ•°ç»„ä¼ ç»™äº†MyFooterç»„ä»¶, ç»Ÿè®¡æ€»ä»·</p>
</blockquote>
<h2 id="ä»Šæ—¥æ€»ç»“"><a href="#ä»Šæ—¥æ€»ç»“" class="headerlink" title="ä»Šæ—¥æ€»ç»“"></a>ä»Šæ—¥æ€»ç»“</h2><p>vueçš„ç”Ÿå‘½å‘¨æœŸå“ª4ä¸ªé˜¶æ®µ, å“ª8ä¸ªæ–¹æ³•</p>
<p>axiosæ˜¯ä»€ä¹ˆ, åº•å±‚æ˜¯ä»€ä¹ˆ, å…·ä½“å¦‚ä½•ä½¿ç”¨</p>
<p>axiosè¿”å›çš„æ˜¯ä»€ä¹ˆ, å¦‚ä½•æ¥æ”¶ç»“æœ</p>
<p>çŸ¥é“refå’Œ$refsä½¿ç”¨å’Œä½œç”¨ä»¥åŠåœºæ™¯</p>
<p>çŸ¥é“$nextTickçš„ä½œç”¨</p>
<p>è·Ÿç€è€å¸ˆçš„è§†é¢‘å®Œæˆè´­ç‰©è½¦æ¡ˆä¾‹</p>
<h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><h3 id="1ã€Vue-çš„-nextTick-çš„åŸç†æ˜¯ä»€ä¹ˆ-ï¼ˆé«˜è–ªå¸¸é—®ï¼‰"><a href="#1ã€Vue-çš„-nextTick-çš„åŸç†æ˜¯ä»€ä¹ˆ-ï¼ˆé«˜è–ªå¸¸é—®ï¼‰" class="headerlink" title="1ã€Vue çš„ nextTick çš„åŸç†æ˜¯ä»€ä¹ˆ? ï¼ˆé«˜è–ªå¸¸é—®ï¼‰"></a>1ã€Vue çš„ nextTick çš„åŸç†æ˜¯ä»€ä¹ˆ? ï¼ˆé«˜è–ªå¸¸é—®ï¼‰</h3><p>â€‹    \1. ä¸ºä»€ä¹ˆéœ€è¦ nextTick ï¼ŒVue æ˜¯å¼‚æ­¥ä¿®æ”¹ DOM çš„å¹¶ä¸”ä¸é¼“åŠ±å¼€å‘è€…ç›´æ¥æ¥è§¦ DOMï¼Œä½†æœ‰æ—¶å€™ä¸šåŠ¡éœ€è¦å¿…é¡»å¯¹æ•°æ®æ›´æ”¹â€“åˆ·æ–°åçš„ DOM åšç›¸åº”çš„å¤„ç†ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ Vue.nextTick(callback)è¿™ä¸ª api äº†ã€‚</p>
<p>â€‹    \2. ç†è§£åŸç†å‰çš„å‡†å¤‡ é¦–å…ˆéœ€è¦çŸ¥é“äº‹ä»¶å¾ªç¯ä¸­å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡è¿™ä¸¤ä¸ªæ¦‚å¿µ,å¸¸è§çš„å®ä»»åŠ¡æœ‰ script, setTimeout, setInterval, setImmediate, I/O, UI rendering å¸¸è§çš„å¾®ä»»åŠ¡æœ‰ process.nextTick(Nodejs),Promise.then(), MutationObserver;</p>
<p>â€‹    \3. ç†è§£ nextTick çš„åŸç†æ­£æ˜¯ vue é€šè¿‡å¼‚æ­¥é˜Ÿåˆ—æ§åˆ¶ DOM æ›´æ–°å’Œ nextTick å›è°ƒå‡½æ•°å…ˆåæ‰§è¡Œçš„æ–¹å¼ã€‚å¦‚æœå¤§å®¶çœ‹è¿‡è¿™éƒ¨åˆ†çš„æºç ï¼Œä¼šå‘ç°å…¶ä¸­åšäº†å¾ˆå¤š isNative()çš„åˆ¤æ–­ï¼Œå› ä¸ºè¿™é‡Œè¿˜å­˜åœ¨å…¼å®¹æ€§ä¼˜é›…é™çº§çš„é—®é¢˜ã€‚å¯è§ Vue å¼€å‘å›¢é˜Ÿçš„æ·±æ€ç†Ÿè™‘ï¼Œå¯¹æ€§èƒ½çš„è‰¯è‹¦ç”¨å¿ƒã€‚</p>
<h3 id="2ã€vueç”Ÿå‘½å‘¨æœŸæ€»å…±åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µï¼Ÿï¼ˆå¿…ä¼šï¼‰"><a href="#2ã€vueç”Ÿå‘½å‘¨æœŸæ€»å…±åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µï¼Ÿï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="2ã€vueç”Ÿå‘½å‘¨æœŸæ€»å…±åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µï¼Ÿï¼ˆå¿…ä¼šï¼‰"></a>2ã€vueç”Ÿå‘½å‘¨æœŸæ€»å…±åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µï¼Ÿï¼ˆå¿…ä¼šï¼‰</h3><p>   Vue å®ä¾‹ä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”Ÿå‘½å‘¨æœŸã€‚ä¹Ÿå°±æ˜¯ä»å¼€å§‹åˆ›å»ºã€åˆå§‹åŒ–æ•°æ®ã€ç¼–è¯‘æ¨¡æ¿ã€æŒ‚è½½Domâ†’æ¸²æŸ“ã€æ›´æ–°â†’æ¸²æŸ“ã€å¸è½½ç­‰ä¸€ç³»åˆ—è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°è¿™æ˜¯ Vue çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p><strong>1****ï¼‰beforeCreate</strong></p>
<p>â€‹    åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ (data observer) å’Œ event/watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨ã€‚</p>
<p><strong>2****ï¼‰created</strong></p>
<p>â€‹    åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šæ•°æ®è§‚æµ‹ (data observer)ï¼Œ å±æ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch/event äº‹ä»¶å›è°ƒã€‚ç„¶è€Œï¼ŒæŒ‚è½½é˜¶æ®µè¿˜æ²¡å¼€å§‹ï¼Œ$el å±æ€§ç›®å‰ä¸å¯è§ã€‚</p>
<p><strong>3****ï¼‰beforeMount</strong></p>
<p>â€‹    åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼šç›¸å…³çš„ render å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ã€‚</p>
<p><strong>4****ï¼‰mounted</strong></p>
<p>â€‹    el è¢«æ–°åˆ›å»ºçš„ vm.$el æ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨è¯¥é’©å­ã€‚å¦‚æœ root å®ä¾‹æŒ‚è½½äº†ä¸€ä¸ªæ–‡æ¡£å†…å…ƒç´ ï¼Œå½“ mounted è¢«è°ƒç”¨æ—¶ vm.$el ä¹Ÿåœ¨æ–‡æ¡£å†…ã€‚</p>
<p><strong>5****ï¼‰beforeUpdate</strong></p>
<p>â€‹    æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM æ‰“è¡¥ä¸ä¹‹å‰ã€‚è¿™é‡Œé€‚åˆåœ¨æ›´æ–°ä¹‹å‰è®¿é—®ç°æœ‰çš„ DOMï¼Œæ¯”å¦‚æ‰‹åŠ¨ç§»é™¤å·²æ·»åŠ çš„äº‹ä»¶ç›‘å¬å™¨ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ï¼Œå› ä¸ºåªæœ‰åˆæ¬¡æ¸²æŸ“ä¼šåœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚</p>
<p><strong>6****ï¼‰updated</strong></p>
<p>â€‹    ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚</p>
<p><strong>7****ï¼‰activated</strong></p>
<p>â€‹    keep-alive ç»„ä»¶æ¿€æ´»æ—¶è°ƒç”¨ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</p>
<p><strong>8****ï¼‰deactivated</strong></p>
<p>â€‹    keep-alive ç»„ä»¶åœç”¨æ—¶è°ƒç”¨ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</p>
<p><strong>9****ï¼‰beforeDestroy</strong></p>
<p>â€‹    å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</p>
<p><strong>10****ï¼‰destroyed</strong></p>
<p>â€‹    Vue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</p>
<p><strong>11****ï¼‰errorCapturedï¼ˆ2.5.0+ æ–°å¢ï¼‰</strong></p>
<p>â€‹    å½“æ•è·ä¸€ä¸ªæ¥è‡ªå­å­™ç»„ä»¶çš„é”™è¯¯æ—¶è¢«è°ƒç”¨ã€‚æ­¤é’©å­ä¼šæ”¶åˆ°ä¸‰ä¸ªå‚æ•°ï¼šé”™è¯¯å¯¹è±¡ã€å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å®ä¾‹ä»¥åŠä¸€ä¸ªåŒ…å«é”™è¯¯æ¥æºä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚æ­¤é’©å­å¯ä»¥è¿”å› false ä»¥é˜»æ­¢è¯¥é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­ã€‚</p>
<h3 id="3ã€ç¬¬ä¸€æ¬¡åŠ è½½é¡µé¢ä¼šè§¦å‘å“ªå‡ ä¸ªé’©å­å‡½æ•°ï¼Ÿï¼ˆå¿…ä¼šï¼‰"><a href="#3ã€ç¬¬ä¸€æ¬¡åŠ è½½é¡µé¢ä¼šè§¦å‘å“ªå‡ ä¸ªé’©å­å‡½æ•°ï¼Ÿï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="3ã€ç¬¬ä¸€æ¬¡åŠ è½½é¡µé¢ä¼šè§¦å‘å“ªå‡ ä¸ªé’©å­å‡½æ•°ï¼Ÿï¼ˆå¿…ä¼šï¼‰"></a>3ã€ç¬¬ä¸€æ¬¡åŠ è½½é¡µé¢ä¼šè§¦å‘å“ªå‡ ä¸ªé’©å­å‡½æ•°ï¼Ÿï¼ˆå¿…ä¼šï¼‰</h3><p>   å½“é¡µé¢ç¬¬ä¸€æ¬¡é¡µé¢åŠ è½½æ—¶ä¼šè§¦å‘ beforeCreate, created, beforeMount, mounted è¿™å‡ ä¸ªé’©å­å‡½æ•°</p>
<h2 id="ä»Šæ—¥ä½œä¸š"><a href="#ä»Šæ—¥ä½œä¸š" class="headerlink" title="ä»Šæ—¥ä½œä¸š"></a>ä»Šæ—¥ä½œä¸š</h2><p>æŠŠè¯¾ä¸Šè´­ç‰©è½¦å†æ¥ä¸€é</p>
<h2 id="æ¥å£æ–‡æ¡£"><a href="#æ¥å£æ–‡æ¡£" class="headerlink" title="æ¥å£æ–‡æ¡£"></a>æ¥å£æ–‡æ¡£</h2><blockquote>
<p>axiosè¯·æ±‚æ¥å£ä½¿ç”¨</p>
</blockquote>
<p>æ ¹åŸŸå: <a href="http://123.57.109.30:3006/">http://123.57.109.30:3006</a></p>
<h3 id="æ¡ˆä¾‹-å›¾ä¹¦ç›¸å…³"><a href="#æ¡ˆä¾‹-å›¾ä¹¦ç›¸å…³" class="headerlink" title="æ¡ˆä¾‹ - å›¾ä¹¦ç›¸å…³"></a>æ¡ˆä¾‹ - å›¾ä¹¦ç›¸å…³</h3><h4 id="è·å–"><a href="#è·å–" class="headerlink" title="è·å–"></a>è·å–</h4><ul>
<li>è¯·æ±‚æ–¹å¼:  GET</li>
<li>è¯·æ±‚åœ°å€: æ ¹åŸŸå/api/getbooks</li>
<li>è¯·æ±‚å‚æ•°: </li>
</ul>
<p>ä¸ä¼ å‚è·å–æ‰€æœ‰é»˜è®¤ä¹¦ç±, ä¹Ÿå¯ä»¥é€‰æ‹©ä¼ é€’ä¸‹é¢ä»»æ„1-å¤šä¸ªå‚æ•°, è·å–æŒ‡å®šçš„ç›¸å…³ä¹¦ç±ä¿¡æ¯</p>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>å‚æ•°ç±»å‹</th>
<th>æ˜¯å¦å¿…é€‰</th>
<th>å‚æ•°è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>Number</td>
<td>å¦</td>
<td>å›¾ä¹¦Id</td>
</tr>
<tr>
<td>bookname</td>
<td>String</td>
<td>å¦</td>
<td>å›¾ä¹¦åç§°</td>
</tr>
<tr>
<td>author</td>
<td>String</td>
<td>å¦</td>
<td>ä½œè€…</td>
</tr>
<tr>
<td>publisher</td>
<td>String</td>
<td>å¦</td>
<td>å‡ºç‰ˆç¤¾</td>
</tr>
<tr>
<td>appkey</td>
<td>String</td>
<td>å¦</td>
<td>ä¸ªäººID</td>
</tr>
</tbody></table>
<ul>
<li>è¿”å›ç¤ºä¾‹:</li>
</ul>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">"status"</span>: <span class="number">200</span>, <span class="comment">// çŠ¶æ€ç 200éƒ½ä»£è¡¨å®Œå…¨æˆåŠŸ - æ— ä»»ä½•æ„ä¹‰éšä¾¿å†™, åªæ˜¯æ–¹ä¾¿å‰ç«¯å†™åˆ¤æ–­æ¡ä»¶</span></span><br><span class="line">  <span class="attr">"msg"</span>: <span class="string">"è·å–å›¾ä¹¦åˆ—è¡¨æˆåŠŸ"</span>, <span class="comment">// åå°è¿”å›çš„æç¤ºæ¶ˆæ¯, éšä¾¿å†™, åªæ˜¯æ–¹ä¾¿å‰ç«¯ç›´æ¥æ‰“å°æç¤ºæ¶ˆæ¯</span></span><br><span class="line">  <span class="attr">"data"</span>: [ <span class="comment">// åå°è¿”å›çš„æ•°æ®</span></span><br><span class="line">    { <span class="attr">"id"</span>: <span class="number">1</span>, <span class="attr">"bookname"</span>: <span class="string">"è¥¿æ¸¸è®°"</span>, <span class="attr">"author"</span>: <span class="string">"å´æ‰¿æ©"</span>, <span class="attr">"publisher"</span>: <span class="string">"åŒ—äº¬å›¾ä¹¦å‡ºç‰ˆç¤¾"</span> },</span><br><span class="line">    { <span class="attr">"id"</span>: <span class="number">2</span>, <span class="attr">"bookname"</span>: <span class="string">"çº¢æ¥¼æ¢¦"</span>, <span class="attr">"author"</span>: <span class="string">"æ›¹é›ªèŠ¹"</span>, <span class="attr">"publisher"</span>: <span class="string">"ä¸Šæµ·å›¾ä¹¦å‡ºç‰ˆç¤¾"</span> },</span><br><span class="line">    { <span class="attr">"id"</span>: <span class="number">3</span>, <span class="attr">"bookname"</span>: <span class="string">"ä¸‰å›½æ¼”ä¹‰"</span>, <span class="attr">"author"</span>: <span class="string">"ç½—è´¯ä¸­"</span>, <span class="attr">"publisher"</span>: <span class="string">"åŒ—äº¬å›¾ä¹¦å‡ºç‰ˆç¤¾"</span> }</span><br><span class="line">  ]</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h4 id="æ·»åŠ "><a href="#æ·»åŠ " class="headerlink" title="æ·»åŠ "></a>æ·»åŠ </h4><ul>
<li>è¯·æ±‚æ–¹å¼: POST</li>
<li>è¯·æ±‚åœ°å€: æ ¹åŸŸå/api/addbook</li>
<li>è¯·æ±‚å‚æ•°:</li>
</ul>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>å‚æ•°ç±»å‹</th>
<th>æ˜¯å¦å¿…é€‰</th>
<th>å‚æ•°è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>bookname</td>
<td>String</td>
<td>æ˜¯</td>
<td>å›¾ä¹¦åç§°</td>
</tr>
<tr>
<td>author</td>
<td>String</td>
<td>æ˜¯</td>
<td>ä½œè€…</td>
</tr>
<tr>
<td>publisher</td>
<td>String</td>
<td>æ˜¯</td>
<td>å‡ºç‰ˆç¤¾</td>
</tr>
<tr>
<td>appkey</td>
<td>String</td>
<td>æ˜¯</td>
<td>ä¸ªäººID - ç”¨â€™7250d3eb-18e1-41bc-8bb2-11483665535aâ€™</td>
</tr>
</tbody></table>
<ul>
<li>è¿”å›ç¤ºä¾‹:</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="string">"status"</span>: <span class="number">201</span>, <span class="comment">// åå°è¿”å›æ•°æ®é€»è¾‘å±‚çš„çŠ¶æ€ç , 201ä»£è¡¨åå°å·²ç»æ–°å¢åŠ äº†ä¸€ä¸ªèµ„æº</span></span><br><span class="line">    <span class="string">"data"</span>: {</span><br><span class="line">        <span class="string">"author"</span>: <span class="string">"æ–½å¤§ç¥"</span></span><br><span class="line">        <span class="string">"bookname"</span>: <span class="string">"æ°´æµ’ä¼ 2"</span></span><br><span class="line">        <span class="string">"id"</span>: <span class="number">41</span></span><br><span class="line">        <span class="string">"publisher"</span>: <span class="string">"æœªæ¥å‡ºç‰ˆç¤¾"</span></span><br><span class="line">    }</span><br><span class="line">    <span class="string">"msg"</span>: <span class="string">"æ·»åŠ å›¾ä¹¦æˆåŠŸ"</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåŸºç¡€5-åŠ¨æ€ç»„ä»¶_æ’æ§½_è‡ªå®šä¹‰æŒ‡ä»¤</title>
    <url>/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è‡ªæµ‹"><a href="#è‡ªæµ‹" class="headerlink" title="è‡ªæµ‹"></a>è‡ªæµ‹</h2><ul>
<li><input disabled="" type="checkbox"> ==ç»„ä»¶åˆ›å»º, æ³¨å†Œå’Œä½¿ç”¨ - ä¼¸æ‰‹å°±æ¥ç‰¹åˆ«ç†Ÿç»ƒ==</li>
<li><input disabled="" type="checkbox"> æŒ‡ä»¤çš„ä½œç”¨</li>
</ul>
<h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><ol>
<li>èƒ½å¤Ÿäº†è§£ç»„ä»¶è¿›é˜¶çŸ¥è¯†</li>
<li>èƒ½å¤ŸæŒæ¡è‡ªå®šä¹‰æŒ‡ä»¤åˆ›å»ºå’Œä½¿ç”¨</li>
<li>èƒ½å¤Ÿå®Œæˆtabbaræ¡ˆä¾‹çš„å¼€å‘</li>
</ol>
<h2 id="1-ç»„ä»¶è¿›é˜¶"><a href="#1-ç»„ä»¶è¿›é˜¶" class="headerlink" title="1. ç»„ä»¶è¿›é˜¶"></a>1. ç»„ä»¶è¿›é˜¶</h2><h3 id="1-0-ç»„ä»¶è¿›é˜¶-åŠ¨æ€ç»„ä»¶"><a href="#1-0-ç»„ä»¶è¿›é˜¶-åŠ¨æ€ç»„ä»¶" class="headerlink" title="1.0 ç»„ä»¶è¿›é˜¶ - åŠ¨æ€ç»„ä»¶"></a>1.0 ç»„ä»¶è¿›é˜¶ - åŠ¨æ€ç»„ä»¶</h3><blockquote>
<p>ç›®æ ‡: å¤šä¸ªç»„ä»¶ä½¿ç”¨åŒä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œå¹¶åŠ¨æ€åˆ‡æ¢ï¼Œè¿™å°±æ˜¯åŠ¨æ€ç»„ä»¶</p>
</blockquote>
<p>éœ€æ±‚: å®Œæˆä¸€ä¸ªæ³¨å†ŒåŠŸèƒ½é¡µé¢, 2ä¸ªæŒ‰é’®åˆ‡æ¢, ä¸€ä¸ªå¡«å†™æ³¨å†Œä¿¡æ¯, ä¸€ä¸ªå¡«å†™ç”¨æˆ·ç®€ä»‹ä¿¡æ¯</p>
<p>æ•ˆæœå¦‚ä¸‹:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6.gif" alt="åŠ¨æ€ç»„ä»¶"></p>
<ol>
<li><p>å‡†å¤‡è¢«åˆ‡æ¢çš„ - UserName.vue / UserInfo.vue 2ä¸ªç»„ä»¶</p>
</li>
<li><p>å¼•å…¥åˆ°UseDynamic.vueæ³¨å†Œ</p>
</li>
<li><p>å‡†å¤‡å˜é‡æ¥æ‰¿è½½è¦æ˜¾ç¤ºçš„â€ç»„ä»¶åâ€</p>
</li>
<li><p>è®¾ç½®æŒ‚è½½ç‚¹<component>, ä½¿ç”¨iså±æ€§æ¥è®¾ç½®è¦æ˜¾ç¤ºå“ªä¸ªç»„ä»¶</component></p>
</li>
<li><p>ç‚¹å‡»æŒ‰é’® â€“ ä¿®æ”¹comNameå˜é‡é‡Œçš„â€ç»„ä»¶åâ€</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;button @click="comName = 'UserName'"&gt;è´¦å·å¯†ç å¡«å†™&lt;/button&gt;</span><br><span class="line">      &lt;button @click="comName = 'UserInfo'"&gt;ä¸ªäººä¿¡æ¯å¡«å†™&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">      &lt;p&gt;ä¸‹é¢æ˜¾ç¤ºæ³¨å†Œç»„ä»¶-åŠ¨æ€åˆ‡æ¢:&lt;/p&gt;</span><br><span class="line">      &lt;div style="border: 1px solid red;"&gt;</span><br><span class="line">          &lt;component :is="comName"&gt;&lt;/component&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: åŠ¨æ€ç»„ä»¶ - åˆ‡æ¢ç»„ä»¶æ˜¾ç¤º</span><br><span class="line">// åœºæ™¯: åŒä¸€ä¸ªæŒ‚è½½ç‚¹è¦åˆ‡æ¢ ä¸åŒç»„ä»¶ æ˜¾ç¤º</span><br><span class="line">// 1. åˆ›å»ºè¦è¢«åˆ‡æ¢çš„ç»„ä»¶ - æ ‡ç­¾+æ ·å¼</span><br><span class="line">// 2. å¼•å…¥åˆ°è¦å±•ç¤ºçš„vueæ–‡ä»¶å†…, æ³¨å†Œ</span><br><span class="line">// 3. å˜é‡-æ‰¿è½½è¦æ˜¾ç¤ºçš„ç»„ä»¶å</span><br><span class="line">// 4. è®¾ç½®æŒ‚è½½ç‚¹&lt;component :is="å˜é‡"&gt;&lt;/component&gt;</span><br><span class="line">// 5. ç‚¹å‡»æŒ‰é’®-åˆ‡æ¢comNameçš„å€¼ä¸ºè¦æ˜¾ç¤ºçš„ç»„ä»¶å</span><br><span class="line"></span><br><span class="line">import UserName from '../components/01/UserName'</span><br><span class="line">import UserInfo from '../components/01/UserInfo'</span><br><span class="line">export default {</span><br><span class="line">    data(){</span><br><span class="line">        return {</span><br><span class="line">            comName: "UserName"</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    components: {</span><br><span class="line">        UserName,</span><br><span class="line">        UserInfo</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨App.vue - å¼•å…¥01_UseDynamic.vueå¹¶ä½¿ç”¨æ˜¾ç¤º</p>
<blockquote>
<p>æ€»ç»“: vueå†…ç½®componentç»„ä»¶, é…åˆiså±æ€§, è®¾ç½®è¦æ˜¾ç¤ºçš„ç»„ä»¶åå­—</p>
</blockquote>
<h3 id="1-1-ç»„ä»¶è¿›é˜¶-ç»„ä»¶ç¼“å­˜"><a href="#1-1-ç»„ä»¶è¿›é˜¶-ç»„ä»¶ç¼“å­˜" class="headerlink" title="1.1 ç»„ä»¶è¿›é˜¶ - ç»„ä»¶ç¼“å­˜"></a>1.1 ç»„ä»¶è¿›é˜¶ - ç»„ä»¶ç¼“å­˜</h3><blockquote>
<p>ç›®æ ‡: ç»„ä»¶åˆ‡æ¢ä¼šå¯¼è‡´ç»„ä»¶è¢«é¢‘ç¹é”€æ¯å’Œé‡æ–°åˆ›å»º, æ€§èƒ½ä¸é«˜</p>
</blockquote>
<p>ä½¿ç”¨Vueå†…ç½®çš„keep-aliveç»„ä»¶, å¯ä»¥è®©åŒ…è£¹çš„ç»„ä»¶ä¿å­˜åœ¨å†…å­˜ä¸­ä¸è¢«é”€æ¯</p>
<p>æ¼”ç¤º1: å¯ä»¥å…ˆç»™UserName.vueå’ŒUserInfo.vue æ³¨å†Œcreatedå’Œdestroyedç”Ÿå‘½å‘¨æœŸäº‹ä»¶, è§‚å¯Ÿåˆ›å»ºå’Œé”€æ¯è¿‡ç¨‹</p>
<p>æ¼”ç¤º2: ä½¿ç”¨keep-aliveå†…ç½®çš„vueç»„ä»¶, è®©åŠ¨æ€ç»„ä»¶ç¼“å­˜è€Œä¸æ˜¯é”€æ¯</p>
<p>è¯­æ³•:</p>
<p>â€‹        Vueå†…ç½®çš„keep-aliveç»„ä»¶ åŒ…èµ·æ¥è¦é¢‘ç¹åˆ‡æ¢çš„ç»„ä»¶</p>
<p>02_UseDynamic.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div style="border: 1px solid red;"&gt;</span><br><span class="line">    &lt;!-- Vueå†…ç½®keep-aliveç»„ä»¶, æŠŠåŒ…èµ·æ¥çš„ç»„ä»¶ç¼“å­˜èµ·æ¥ --&gt;</span><br><span class="line">    &lt;keep-alive&gt;</span><br><span class="line">        &lt;component :is="comName"&gt;&lt;/component&gt;</span><br><span class="line">    &lt;/keep-alive&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>è¡¥å……ç”Ÿå‘½å‘¨æœŸ:</p>
<ul>
<li>activated - æ¿€æ´»</li>
<li>deactivated - å¤±å»æ¿€æ´»çŠ¶æ€</li>
</ul>
<blockquote>
<p>æ€»ç»“: keep-aliveå¯ä»¥æé«˜ç»„ä»¶çš„æ€§èƒ½, å†…éƒ¨åŒ…è£¹çš„æ ‡ç­¾ä¸ä¼šè¢«é”€æ¯å’Œé‡æ–°åˆ›å»º, è§¦å‘æ¿€æ´»å’Œéæ¿€æ´»çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</p>
</blockquote>
<h3 id="1-2-ç»„ä»¶è¿›é˜¶-æ¿€æ´»å’Œéæ¿€æ´»"><a href="#1-2-ç»„ä»¶è¿›é˜¶-æ¿€æ´»å’Œéæ¿€æ´»" class="headerlink" title="1.2 ç»„ä»¶è¿›é˜¶ - æ¿€æ´»å’Œéæ¿€æ´»"></a>1.2 ç»„ä»¶è¿›é˜¶ - æ¿€æ´»å’Œéæ¿€æ´»</h3><blockquote>
<p>ç›®æ ‡: è¢«ç¼“å­˜çš„ç»„ä»¶ä¸å†åˆ›å»ºå’Œé”€æ¯, è€Œæ˜¯æ¿€æ´»å’Œéæ¿€æ´»</p>
</blockquote>
<p>è¡¥å……2ä¸ªé’©å­æ–¹æ³•å:</p>
<p>â€‹    activated â€“ æ¿€æ´»æ—¶è§¦å‘</p>
<p>â€‹    deactivated â€“ å¤±å»æ¿€æ´»çŠ¶æ€è§¦å‘</p>
<h3 id="1-3-ç»„ä»¶è¿›é˜¶-ç»„ä»¶æ’æ§½"><a href="#1-3-ç»„ä»¶è¿›é˜¶-ç»„ä»¶æ’æ§½" class="headerlink" title="1.3 ç»„ä»¶è¿›é˜¶ - ç»„ä»¶æ’æ§½"></a>1.3 ç»„ä»¶è¿›é˜¶ - ç»„ä»¶æ’æ§½</h3><blockquote>
<p>ç›®æ ‡: ç”¨äºå®ç°ç»„ä»¶çš„å†…å®¹åˆ†å‘, é€šè¿‡ slot æ ‡ç­¾, å¯ä»¥æ¥æ”¶åˆ°å†™åœ¨ç»„ä»¶æ ‡ç­¾å†…çš„å†…å®¹</p>
</blockquote>
<p>vueæä¾›ç»„ä»¶æ’æ§½èƒ½åŠ›, å…è®¸å¼€å‘è€…åœ¨å°è£…ç»„ä»¶æ—¶ï¼ŒæŠŠä¸ç¡®å®šçš„éƒ¨åˆ†å®šä¹‰ä¸ºæ’æ§½</p>
<p>æ’æ§½ä¾‹å­:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/1ddad96d-f925-452b-8c40-85288fc2cbc4.gif" alt="1ddad96d-f925-452b-8c40-85288fc2cbc4"></p>
<p>éœ€æ±‚: ä»¥å‰æŠ˜å é¢æ¿æ¡ˆä¾‹, æƒ³è¦å®ç°ä¸åŒå†…å®¹æ˜¾ç¤º, æˆ‘ä»¬æŠŠæŠ˜å é¢æ¿é‡Œçš„Pannelç»„ä»¶, æ·»åŠ ç»„ä»¶æ’æ§½æ–¹å¼</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20210307110014556.png" alt="image-20210307110014556"></p>
<p>è¯­æ³•å£è¯€: </p>
<ol>
<li>ç»„ä»¶å†…ç”¨<slot></slot>å ä½</li>
<li>ä½¿ç”¨ç»„ä»¶æ—¶<pannel></pannel>å¤¹ç€çš„åœ°æ–¹, ä¼ å…¥æ ‡ç­¾æ›¿æ¢slot</li>
</ol>
<p>03/Pannel.vue - ç»„ä»¶(ç›´æ¥å¤åˆ¶)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- æŒ‰é’®æ ‡é¢˜ --&gt;</span><br><span class="line">    &lt;div class="title"&gt;</span><br><span class="line">      &lt;h4&gt;èŠ™è“‰æ¥¼é€è¾›æ¸&lt;/h4&gt;</span><br><span class="line">      &lt;span class="btn" @click="isShow = !isShow"&gt;</span><br><span class="line">        {{ isShow ? "æ”¶èµ·" : "å±•å¼€" }}</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- ä¸‹æ‹‰å†…å®¹ --&gt;</span><br><span class="line">    &lt;div class="container" v-show="isShow"&gt;</span><br><span class="line">          &lt;p&gt;å¯’é›¨è¿æ±Ÿå¤œå…¥å´,&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      isShow: false,</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h3 {</span><br><span class="line">  text-align: center;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.title {</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  padding: 0 1em;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.title h4 {</span><br><span class="line">  line-height: 2;</span><br><span class="line">  margin: 0;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.container {</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  padding: 0 1em;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.btn {</span><br><span class="line">  /* é¼ æ ‡æ”¹æˆæ‰‹çš„å½¢çŠ¶ */</span><br><span class="line">  cursor: pointer;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">img {</span><br><span class="line">  width: 50%;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>views/03_UserSlot.vue - ä½¿ç”¨ç»„ä»¶(==ç›´æ¥å¤åˆ¶==)</p>
<p>æ¡†: åœ¨è¿™ä¸ªåŸºç¡€é‡å¤ä½¿ç”¨ç»„ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="container"&gt;</span><br><span class="line">    &lt;div id="app"&gt;</span><br><span class="line">      &lt;h3&gt;æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿&lt;/h3&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">#app {</span><br><span class="line">  width: 400px;</span><br><span class="line">  margin: 20px auto;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">  border: 4px solid blueviolet;</span><br><span class="line">  border-radius: 1em;</span><br><span class="line">  box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.5);</span><br><span class="line">  padding: 1em 2em 2em;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>views/03_UseSlot.vue - ç»„ä»¶æ’æ§½ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="container"&gt;</span><br><span class="line">    &lt;div id="app"&gt;</span><br><span class="line">      &lt;h3&gt;æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿&lt;/h3&gt;</span><br><span class="line">      &lt;Pannel&gt;</span><br><span class="line">          &lt;img src="../assets/mm.gif" alt=""&gt;</span><br><span class="line">          &lt;span&gt;æˆ‘æ˜¯å†…å®¹&lt;/span&gt;</span><br><span class="line">      &lt;/Pannel&gt;</span><br><span class="line">      &lt;Pannel&gt;</span><br><span class="line">          &lt;p&gt;å¯’é›¨è¿æ±Ÿå¤œå…¥å´,&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚&lt;/p&gt;</span><br><span class="line">      &lt;/Pannel&gt;</span><br><span class="line">      &lt;Pannel&gt;&lt;/Pannel&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Pannel from "../components/03/Pannel";</span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    Pannel,</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ç»„ä»¶å†…å®¹åˆ†å‘æŠ€æœ¯, slotå ä½, ä½¿ç”¨ç»„ä»¶æ—¶ä¼ å…¥æ›¿æ¢slotä½ç½®çš„æ ‡ç­¾</p>
</blockquote>
<h3 id="1-4-ç»„ä»¶è¿›é˜¶-æ’æ§½é»˜è®¤å†…å®¹"><a href="#1-4-ç»„ä»¶è¿›é˜¶-æ’æ§½é»˜è®¤å†…å®¹" class="headerlink" title="1.4 ç»„ä»¶è¿›é˜¶ - æ’æ§½é»˜è®¤å†…å®¹"></a>1.4 ç»„ä»¶è¿›é˜¶ - æ’æ§½é»˜è®¤å†…å®¹</h3><blockquote>
<p>ç›®æ ‡: å¦‚æœå¤–é¢ä¸ç»™ä¼ , æƒ³ç»™ä¸ªé»˜è®¤æ˜¾ç¤ºå†…å®¹</p>
</blockquote>
<p>å£è¯€: <slot>å¤¹ç€å†…å®¹é»˜è®¤æ˜¾ç¤ºå†…å®¹, å¦‚æœä¸ç»™æ’æ§½slotä¼ ä¸œè¥¿, åˆ™ä½¿ç”¨<slot>å¤¹ç€çš„å†…å®¹åœ¨åŸåœ°æ˜¾ç¤º</slot></slot></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;slot&gt;é»˜è®¤å†…å®¹&lt;/slot&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-5-ç»„ä»¶è¿›é˜¶-å…·åæ’æ§½"><a href="#1-5-ç»„ä»¶è¿›é˜¶-å…·åæ’æ§½" class="headerlink" title="1.5 ç»„ä»¶è¿›é˜¶ - å…·åæ’æ§½"></a>1.5 ç»„ä»¶è¿›é˜¶ - å…·åæ’æ§½</h3><blockquote>
<p>ç›®æ ‡: å½“ä¸€ä¸ªç»„ä»¶å†…æœ‰2å¤„ä»¥ä¸Šéœ€è¦å¤–éƒ¨ä¼ å…¥æ ‡ç­¾çš„åœ°æ–¹</p>
</blockquote>
<p>ä¼ å…¥çš„æ ‡ç­¾å¯ä»¥åˆ†åˆ«æ´¾å‘ç»™ä¸åŒçš„slotä½ç½®</p>
<p>è¦æ±‚: v-slotä¸€èˆ¬ç”¨è·Ÿtemplateæ ‡ç­¾ä½¿ç”¨ (templateæ˜¯html5æ–°å‡ºæ ‡ç­¾å†…å®¹æ¨¡æ¿å…ƒç´ , ä¸ä¼šæ¸²æŸ“åˆ°é¡µé¢ä¸Š, ä¸€èˆ¬è¢«vueè§£æå†…éƒ¨æ ‡ç­¾)</p>
<p>components/04/Pannel.vue - ç•™ä¸‹å…·åslot</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- æŒ‰é’®æ ‡é¢˜ --&gt;</span><br><span class="line">    &lt;div class="title"&gt;</span><br><span class="line">      &lt;slot name="title"&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;span class="btn" @click="isShow = !isShow"&gt;</span><br><span class="line">        {{ isShow ? "æ”¶èµ·" : "å±•å¼€" }}</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- ä¸‹æ‹‰å†…å®¹ --&gt;</span><br><span class="line">    &lt;div class="container" v-show="isShow"&gt;</span><br><span class="line">     &lt;slot name="content"&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>views/04_UseSlot.vueä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="container"&gt;</span><br><span class="line">    &lt;div id="app"&gt;</span><br><span class="line">      &lt;h3&gt;æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿&lt;/h3&gt;</span><br><span class="line">      &lt;Pannel&gt;</span><br><span class="line">        &lt;template v-slot:title&gt;</span><br><span class="line">          &lt;h4&gt;èŠ™è“‰æ¥¼é€è¾›æ¸&lt;/h4&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;template v-slot:content&gt;</span><br><span class="line">          &lt;img src="../assets/mm.gif" alt=""&gt;</span><br><span class="line">          &lt;span&gt;æˆ‘æ˜¯å†…å®¹&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/Pannel&gt;</span><br><span class="line">      &lt;Pannel&gt;</span><br><span class="line">        &lt;template #title&gt;</span><br><span class="line">          &lt;span style="color: red;"&gt;æˆ‘æ˜¯æ ‡é¢˜&lt;/span&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;template #content&gt;</span><br><span class="line">          &lt;p&gt;å¯’é›¨è¿æ±Ÿå¤œå…¥å´,&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚&lt;/p&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/Pannel&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Pannel from "../components/04/Pannel";</span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    Pannel,</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>==v-slotå¯ä»¥ç®€åŒ–æˆ#ä½¿ç”¨==</p>
<blockquote>
<p>v-bindå¯ä»¥çœç•¥æˆ:    v-on: å¯ä»¥çœç•¥æˆ@   é‚£ä¹ˆv-slot: å¯ä»¥ç®€åŒ–æˆ#</p>
</blockquote>
<blockquote>
<p>æ€»ç»“: slotçš„nameå±æ€§èµ·æ’æ§½å, ä½¿ç”¨ç»„ä»¶æ—¶, templateé…åˆ#æ’æ§½åä¼ å…¥å…·ä½“æ ‡ç­¾</p>
</blockquote>
<h3 id="1-6-ç»„ä»¶è¿›é˜¶-ä½œç”¨åŸŸæ’æ§½"><a href="#1-6-ç»„ä»¶è¿›é˜¶-ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="1.6 ç»„ä»¶è¿›é˜¶ - ä½œç”¨åŸŸæ’æ§½"></a>1.6 ç»„ä»¶è¿›é˜¶ - ä½œç”¨åŸŸæ’æ§½</h3><blockquote>
<p>ç›®æ ‡: å­ç»„ä»¶é‡Œå€¼, åœ¨ç»™æ’æ§½èµ‹å€¼æ—¶åœ¨çˆ¶ç»„ä»¶ç¯å¢ƒä¸‹ä½¿ç”¨</p>
</blockquote>
<p>å¤ä¹ : æ’æ§½å†…slotä¸­æ˜¾ç¤ºé»˜è®¤å†…å®¹</p>
<p>ä¾‹å­: é»˜è®¤å†…å®¹åœ¨å­ç»„ä»¶ä¸­, ä½†æ˜¯çˆ¶äº²åœ¨ç»™æ’æ§½ä¼ å€¼, æƒ³è¦æ”¹å˜æ’æ§½æ˜¾ç¤ºçš„é»˜è®¤å†…å®¹</p>
<p>å£è¯€: </p>
<ol>
<li>å­ç»„ä»¶, åœ¨slotä¸Šç»‘å®šå±æ€§å’Œå­ç»„ä»¶å†…çš„å€¼</li>
<li>ä½¿ç”¨ç»„ä»¶, ä¼ å…¥è‡ªå®šä¹‰æ ‡ç­¾, ç”¨templateå’Œv-slot=â€è‡ªå®šä¹‰å˜é‡åâ€ </li>
<li>scopeå˜é‡åè‡ªåŠ¨ç»‘å®šslotä¸Šæ‰€æœ‰å±æ€§å’Œå€¼</li>
</ol>
<p>components/05/Pannel.vue - å®šä¹‰ç»„ä»¶, å’Œå…·åæ’æ§½, ç»™slotç»‘å®šå±æ€§å’Œå€¼ </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- æŒ‰é’®æ ‡é¢˜ --&gt;</span><br><span class="line">    &lt;div class="title"&gt;</span><br><span class="line">      &lt;h4&gt;èŠ™è“‰æ¥¼é€è¾›æ¸&lt;/h4&gt;</span><br><span class="line">      &lt;span class="btn" @click="isShow = !isShow"&gt;</span><br><span class="line">        {{ isShow ? "æ”¶èµ·" : "å±•å¼€" }}</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- ä¸‹æ‹‰å†…å®¹ --&gt;</span><br><span class="line">    &lt;div class="container" v-show="isShow"&gt;</span><br><span class="line">     &lt;slot :row="defaultObj"&gt;{{ defaultObj.defaultOne }}&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: ä½œç”¨åŸŸæ’æ§½</span><br><span class="line">// åœºæ™¯: ä½¿ç”¨æ’æ§½, ä½¿ç”¨ç»„ä»¶å†…çš„å˜é‡</span><br><span class="line">// 1. slotæ ‡ç­¾, è‡ªå®šä¹‰å±æ€§å’Œå†…å˜é‡å…³è”</span><br><span class="line">// 2. ä½¿ç”¨ç»„ä»¶, templateé…åˆv-slot="å˜é‡å"</span><br><span class="line">// å˜é‡åä¼šæ”¶é›†slotèº«ä¸Šå±æ€§å’Œå€¼å½¢æˆå¯¹è±¡</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      isShow: false,</span><br><span class="line">      defaultObj: {</span><br><span class="line">        defaultOne: "æ— åæ°",</span><br><span class="line">        defaultTwo: "å°ä¼ åŒå­¦"</span><br><span class="line">      }</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>views/05_UseSlot.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="container"&gt;</span><br><span class="line">    &lt;div id="app"&gt;</span><br><span class="line">      &lt;h3&gt;æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿&lt;/h3&gt;</span><br><span class="line">      &lt;Pannel&gt;</span><br><span class="line">        &lt;!-- éœ€æ±‚: æ’æ§½æ—¶, ä½¿ç”¨ç»„ä»¶å†…å˜é‡ --&gt;</span><br><span class="line">        &lt;!-- scopeå˜é‡: {row: defaultObj} --&gt;</span><br><span class="line">        &lt;template v-slot="scope"&gt;</span><br><span class="line">          &lt;p&gt;{{ scope.row.defaultTwo }}&lt;/p&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/Pannel&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Pannel from "../components/05/Pannel";</span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    Pannel,</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ç»„ä»¶å†…å˜é‡ç»‘å®šåœ¨slotä¸Š, ç„¶åä½¿ç”¨ç»„ä»¶v-slot=â€å˜é‡â€  å˜é‡ä¸Šå°±ä¼šç»‘å®šslotèº«ä¸Šå±æ€§å’Œå€¼</p>
</blockquote>
<h3 id="1-7-ç»„ä»¶è¿›é˜¶-ä½œç”¨åŸŸæ’æ§½ä½¿ç”¨åœºæ™¯"><a href="#1-7-ç»„ä»¶è¿›é˜¶-ä½œç”¨åŸŸæ’æ§½ä½¿ç”¨åœºæ™¯" class="headerlink" title="1.7 ç»„ä»¶è¿›é˜¶ - ä½œç”¨åŸŸæ’æ§½ä½¿ç”¨åœºæ™¯"></a>1.7 ç»„ä»¶è¿›é˜¶ - ä½œç”¨åŸŸæ’æ§½ä½¿ç”¨åœºæ™¯</h3><blockquote>
<p>ç›®æ ‡: äº†è§£ä½œç”¨åŸŸæ’æ§½ä½¿ç”¨åœºæ™¯, è‡ªå®šä¹‰ç»„ä»¶å†…æ ‡ç­¾+<strong>å†…å®¹</strong></p>
</blockquote>
<p>æ¡ˆä¾‹: å°è£…ä¸€ä¸ªè¡¨æ ¼ç»„ä»¶, åœ¨è¡¨æ ¼ç»„ä»¶å†…å¾ªç¯äº§ç”Ÿå•å…ƒæ ¼</p>
<p>å‡†å¤‡MyTable.vueç»„ä»¶ â€“ å†…ç½®è¡¨æ ¼, ä¼ å…¥æ•°ç»„å¾ªç¯é“ºè®¾é¡µé¢, æŠŠå¯¹è±¡æ¯ä¸ªå†…å®¹æ˜¾ç¤ºåœ¨å•å…ƒæ ¼é‡Œ</p>
<p>å‡†å¤‡UseTable.vue â€“ å‡†å¤‡æ•°æ®ä¼ å…¥ç»™MyTable.vueä½¿ç”¨</p>
<p>components/06/MyTable.vue - æ¨¡æ¿(==ç›´æ¥å¤åˆ¶==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;table border="1"&gt;</span><br><span class="line">          &lt;thead&gt;</span><br><span class="line">              &lt;tr&gt;</span><br><span class="line">                  &lt;th&gt;åºå·&lt;/th&gt;</span><br><span class="line">                  &lt;th&gt;å§“å&lt;/th&gt;</span><br><span class="line">                  &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">                  &lt;th&gt;å¤´åƒ&lt;/th&gt;</span><br><span class="line">              &lt;/tr&gt;</span><br><span class="line">          &lt;/thead&gt;</span><br><span class="line">          &lt;thead&gt;</span><br><span class="line">              &lt;tr&gt;</span><br><span class="line">                  &lt;td&gt;&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;&lt;/td&gt;</span><br><span class="line">              &lt;/tr&gt;</span><br><span class="line">          &lt;/thead&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>views/06_UseTable.vue - å‡†å¤‡æ•°æ®, ä¼ å…¥ç»™MyTable.vueç»„ä»¶é‡Œå¾ªç¯ä½¿ç”¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">list: [</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">name</span>: <span class="string">"å°ä¼ åŒå­¦"</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">        <span class="attr">headImgUrl</span>:</span><br><span class="line">        <span class="string">"http://yun.itheima.com/Upload/./Images/20210303/603f2d2153241.jpg"</span>,</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">name</span>: <span class="string">"å°é»‘åŒå­¦"</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">25</span>,</span><br><span class="line">        <span class="attr">headImgUrl</span>:</span><br><span class="line">        <span class="string">"http://yun.itheima.com/Upload/./Images/20210304/6040b101a18ef.jpg"</span>,</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">name</span>: <span class="string">"æ™ºæ…§åŒå­¦"</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">21</span>,</span><br><span class="line">        <span class="attr">headImgUrl</span>:</span><br><span class="line">        <span class="string">"http://yun.itheima.com/Upload/./Images/20210302/603e0142e535f.jpg"</span>,</span><br><span class="line">    },</span><br><span class="line">],</span><br></pre></td></tr></tbody></table></figure>

<p>ä¾‹å­: æˆ‘æƒ³è¦ç»™tdå†…æ˜¾ç¤ºå›¾ç‰‡, éœ€è¦ä¼ å…¥è‡ªå®šä¹‰çš„imgæ ‡ç­¾</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20210511170436114.png" alt="image-20210511170436114"></p>
<p>æ­£ç¡®åšæ³•:    </p>
<p>â€‹    åœ¨MyTable.vueçš„tdä¸­å‡†å¤‡<slot>å ä½, ä½†æ˜¯å¤–é¢éœ€è¦æŠŠå›¾ç‰‡åœ°å€èµ‹äºˆç»™srcå±æ€§,æ‰€ä»¥åœ¨slotä¸ŠæŠŠobjæ•°æ®ç»‘å®š</slot></p>
<p>components/06/MyTable.vue   - ==æ­£ç¡®ä»£ç ==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;table border="1"&gt;</span><br><span class="line">          &lt;thead&gt;</span><br><span class="line">              &lt;tr&gt;</span><br><span class="line">                  &lt;th&gt;åºå·&lt;/th&gt;</span><br><span class="line">                  &lt;th&gt;å§“å&lt;/th&gt;</span><br><span class="line">                  &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">                  &lt;th&gt;å¤´åƒ&lt;/th&gt;</span><br><span class="line">              &lt;/tr&gt;</span><br><span class="line">          &lt;/thead&gt;</span><br><span class="line">          &lt;tbody&gt;</span><br><span class="line">              &lt;tr v-for="(obj, index) in arr" :key="index"&gt;</span><br><span class="line">                  &lt;td&gt;{{ index + 1 }}&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;{{ obj.name }}&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;{{ obj.age }}&lt;/td&gt;</span><br><span class="line">                  &lt;td&gt;</span><br><span class="line">                      &lt;slot :row="obj"&gt;</span><br><span class="line">                          &lt;!-- é»˜è®¤å€¼ç»™ä¸Š,å¦‚æœä½¿ç”¨ç»„ä»¶ä¸è‡ªå®šä¹‰æ ‡ç­¾æ˜¾ç¤ºé»˜è®¤æ–‡å­— --&gt;</span><br><span class="line">                          {{ obj.headImgUrl}}</span><br><span class="line">                      &lt;/slot&gt;</span><br><span class="line">                  &lt;/td&gt;</span><br><span class="line">              &lt;/tr&gt;</span><br><span class="line">          &lt;/tbody&gt;</span><br><span class="line">      &lt;/table&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">    props: {</span><br><span class="line">        arr: Array</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>â€‹    åœ¨UseTableä½¿ç”¨MyTableçš„æ—¶å€™, templateä¸Šv-slotç»‘å®šå˜é‡, ä¼ å…¥imgç»„ä»¶è®¾ç½®å›¾ç‰‡åœ°å€</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyTable :arr="list"&gt;&lt;/MyTable&gt;</span><br><span class="line">    &lt;MyTable :arr="list"&gt;</span><br><span class="line">        &lt;!-- scope: {row: obj} --&gt;</span><br><span class="line">       &lt;template v-slot="scope"&gt;</span><br><span class="line">            &lt;a :href="scope.row.headImgUrl"&gt;{{ scope.row.headImgUrl }}&lt;/a&gt;</span><br><span class="line">       &lt;/template&gt;</span><br><span class="line">    &lt;/MyTable&gt;</span><br><span class="line">    &lt;MyTable :arr="list"&gt;</span><br><span class="line">       &lt;template v-slot="scope"&gt;</span><br><span class="line">            &lt;img style="width: 100px;" :src="scope.row.headImgUrl" alt=""&gt;</span><br><span class="line">       &lt;/template&gt;</span><br><span class="line">    &lt;/MyTable&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyTable from "../components/06/MyTable";</span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    MyTable,</span><br><span class="line">  },</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [</span><br><span class="line">        {</span><br><span class="line">          name: "å°ä¼ åŒå­¦",</span><br><span class="line">          age: 18,</span><br><span class="line">          headImgUrl:</span><br><span class="line">            "http://yun.itheima.com/Upload/./Images/20210303/603f2d2153241.jpg",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "å°é»‘åŒå­¦",</span><br><span class="line">          age: 25,</span><br><span class="line">          headImgUrl:</span><br><span class="line">            "http://yun.itheima.com/Upload/./Images/20210304/6040b101a18ef.jpg",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "æ™ºæ…§åŒå­¦",</span><br><span class="line">          age: 21,</span><br><span class="line">          headImgUrl:</span><br><span class="line">            "http://yun.itheima.com/Upload/./Images/20210302/603e0142e535f.jpg",</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æ’æ§½å¯ä»¥è‡ªå®šä¹‰æ ‡ç­¾, ä½œç”¨åŸŸæ’æ§½å¯ä»¥æŠŠç»„ä»¶å†…çš„å€¼å–å‡ºæ¥è‡ªå®šä¹‰å†…å®¹</p>
</blockquote>
<h2 id="2-è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#2-è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="2. è‡ªå®šä¹‰æŒ‡ä»¤"></a>2. è‡ªå®šä¹‰æŒ‡ä»¤</h2><p><a href="https://www.vue3js.cn/docs/zh/guide/custom-directive.html">è‡ªå®šä¹‰æŒ‡ä»¤æ–‡æ¡£</a></p>
<p>é™¤äº†æ ¸å¿ƒåŠŸèƒ½é»˜è®¤å†…ç½®çš„æŒ‡ä»¤ (<code>v-model</code> å’Œ <code>v-show</code>)ï¼ŒVue ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚ <code>v-xxx</code>  </p>
<p>html+cssçš„å¤ç”¨çš„ä¸»è¦å½¢å¼æ˜¯ç»„ä»¶</p>
<p>ä½ éœ€è¦å¯¹æ™®é€š DOM å…ƒç´ è¿›è¡Œåº•å±‚æ“ä½œï¼Œè¿™æ—¶å€™å°±ä¼šç”¨åˆ°è‡ªå®šä¹‰æŒ‡ä»¤</p>
<h3 id="2-0-è‡ªå®šä¹‰æŒ‡ä»¤-æ³¨å†Œ"><a href="#2-0-è‡ªå®šä¹‰æŒ‡ä»¤-æ³¨å†Œ" class="headerlink" title="2.0 è‡ªå®šä¹‰æŒ‡ä»¤-æ³¨å†Œ"></a>2.0 è‡ªå®šä¹‰æŒ‡ä»¤-æ³¨å†Œ</h3><blockquote>
<p>ç›®æ ‡: è·å–æ ‡ç­¾, æ‰©å±•é¢å¤–çš„åŠŸèƒ½</p>
</blockquote>
<blockquote>
<h3 id="å±€éƒ¨æ³¨å†Œå’Œä½¿ç”¨"><a href="#å±€éƒ¨æ³¨å†Œå’Œä½¿ç”¨" class="headerlink" title="å±€éƒ¨æ³¨å†Œå’Œä½¿ç”¨"></a>å±€éƒ¨æ³¨å†Œå’Œä½¿ç”¨</h3></blockquote>
<p>07_UseDirective.vue - åªèƒ½åœ¨å½“å‰ç»„ä»¶.vueæ–‡ä»¶ä¸­ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;!-- &lt;input type="text" v-gfocus&gt; --&gt;</span><br><span class="line">      &lt;input type="text" v-focus&gt;</span><br><span class="line">      </span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: åˆ›å»º "è‡ªå®šä¹‰æŒ‡ä»¤", è®©è¾“å…¥æ¡†è‡ªåŠ¨èšç„¦</span><br><span class="line">// 1. åˆ›å»ºè‡ªå®šä¹‰æŒ‡ä»¤</span><br><span class="line">// å…¨å±€ / å±€éƒ¨</span><br><span class="line">// 2. åœ¨æ ‡ç­¾ä¸Šä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤  v-æŒ‡ä»¤å</span><br><span class="line">// æ³¨æ„:</span><br><span class="line">// insertedæ–¹æ³• - æŒ‡ä»¤æ‰€åœ¨æ ‡ç­¾, è¢«æ’å…¥åˆ°ç½‘é¡µä¸Šè§¦å‘(ä¸€æ¬¡)</span><br><span class="line">// updateæ–¹æ³• - æŒ‡ä»¤å¯¹åº”æ•°æ®/æ ‡ç­¾æ›´æ–°æ—¶, æ­¤æ–¹æ³•æ‰§è¡Œ</span><br><span class="line">export default {</span><br><span class="line">    data(){</span><br><span class="line">        return {</span><br><span class="line">            colorStr: 'red'</span><br><span class="line">        }</span><br><span class="line">    },</span><br><span class="line">    directives: {</span><br><span class="line">        focus: {</span><br><span class="line">            inserted(el){</span><br><span class="line">                el.focus()</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<h3 id="å…¨å±€æ³¨å†Œ"><a href="#å…¨å±€æ³¨å†Œ" class="headerlink" title="å…¨å±€æ³¨å†Œ"></a>å…¨å±€æ³¨å†Œ</h3></blockquote>
<p>åœ¨main.jsç”¨ Vue.directive()æ–¹æ³•æ¥è¿›è¡Œæ³¨å†Œ, ä»¥åéšä¾¿å“ªä¸ª.vueæ–‡ä»¶é‡Œéƒ½å¯ä»¥ç›´æ¥ç”¨v-fofoæŒ‡ä»¤</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€æŒ‡ä»¤ - åˆ°å¤„"ç›´æ¥"ä½¿ç”¨</span></span><br><span class="line">Vue.directive(<span class="string">"gfocus"</span>, {</span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">el</span>)</span> {</span><br><span class="line">    el.focus() <span class="comment">// è§¦å‘æ ‡ç­¾çš„äº‹ä»¶æ–¹æ³•</span></span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å…¨å±€æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤, å“ªé‡Œéƒ½èƒ½ç”¨, å±€éƒ¨æ³¨å†Œ, åªèƒ½åœ¨å½“å‰vueæ–‡ä»¶é‡Œç”¨</p>
</blockquote>
<h3 id="2-1-è‡ªå®šä¹‰æŒ‡ä»¤-ä¼ å€¼"><a href="#2-1-è‡ªå®šä¹‰æŒ‡ä»¤-ä¼ å€¼" class="headerlink" title="2.1 è‡ªå®šä¹‰æŒ‡ä»¤-ä¼ å€¼"></a>2.1 è‡ªå®šä¹‰æŒ‡ä»¤-ä¼ å€¼</h3><blockquote>
<p>ç›®æ ‡: ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤, ä¼ å…¥ä¸€ä¸ªå€¼</p>
</blockquote>
<p>éœ€æ±‚: å®šä¹‰coloræŒ‡ä»¤-ä¼ å…¥ä¸€ä¸ªé¢œè‰², ç»™æ ‡ç­¾è®¾ç½®æ–‡å­—é¢œè‰²</p>
<p>main.jså®šä¹‰å¤„ä¿®æ”¹ä¸€ä¸‹</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç›®æ ‡: è‡ªå®šä¹‰æŒ‡ä»¤ä¼ å€¼</span></span><br><span class="line">Vue.directive(<span class="string">'color'</span>, {</span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">el, binding</span>)</span> {</span><br><span class="line">    el.style.color = binding.value</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">update</span>(<span class="params">el, binding</span>)</span> {</span><br><span class="line">    el.style.color = binding.value</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>Direct.vueå¤„æ›´æ”¹ä¸€ä¸‹</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;p v-color="colorStr" @click="changeColor"&gt;ä¿®æ”¹æ–‡å­—é¢œè‰²&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      theColor: "red",</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    changeColor() {</span><br><span class="line">      this.theColor = 'blue';</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: v-xxx, è‡ªå®šä¹‰æŒ‡ä»¤, è·å–åŸç”ŸDOM, è‡ªå®šä¹‰æ“ä½œ</p>
</blockquote>
<h2 id="3-æ¡ˆä¾‹-tabbar"><a href="#3-æ¡ˆä¾‹-tabbar" class="headerlink" title="3. æ¡ˆä¾‹-tabbar"></a>3. æ¡ˆä¾‹-tabbar</h2><blockquote>
<p>å®Œæˆå¦‚ä¸‹æ¡ˆä¾‹å’Œå„æ­¥åŠŸèƒ½</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/21_tabbar%E6%A1%88%E4%BE%8B_%E6%89%80%E6%9C%89%E6%95%88%E6%9E%9C.gif" alt="image-20201224004845495"></p>
<p>çŸ¥è¯†ç‚¹:</p>
<ul>
<li>ç»„ä»¶å°è£…</li>
<li>åŠ¨æ€ç»„ä»¶</li>
<li>keep-alive</li>
<li>ä½œç”¨åŸŸæ’æ§½</li>
<li>è‡ªå®šä¹‰æŒ‡ä»¤</li>
</ul>
<h3 id="3-0-æ¡ˆä¾‹-tabbar-åˆå§‹åŒ–é¡¹ç›®"><a href="#3-0-æ¡ˆä¾‹-tabbar-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="3.0 æ¡ˆä¾‹-tabbar-åˆå§‹åŒ–é¡¹ç›®"></a>3.0 æ¡ˆä¾‹-tabbar-åˆå§‹åŒ–é¡¹ç›®</h3><blockquote>
<p>ç›®æ ‡: åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹, å¼•å…¥å­—ä½“å›¾æ ‡, ä¸‹è½½bootstrap, less, <a href="mailto:less-loader@5.0.0">less-loader@5.0.0</a> axios, åœ¨App.vueæ³¨å†Œç»„ä»¶</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20210511172408766.png" alt="image-20210511172408766"></p>
<ul>
<li>éœ€æ±‚: ä»0æ–°å»ºé¡¹ç›®, æ‹†åˆ†ç»„ä»¶, åˆ›å»ºä½¿ç”¨</li>
</ul>
<p>ç»„ä»¶åˆ†æ:</p>
<ul>
<li><p>ç»„ä»¶æ‹†åˆ†:</p>
<ul>
<li>MyHeader.vue â€“ ==å¤ç”¨ä¹‹å‰çš„==</li>
<li>MyTabBar.vue â€“ åº•éƒ¨å¯¼èˆª</li>
<li>MyTable.vue â€“ å°è£…è¡¨æ ¼</li>
</ul>
</li>
<li><p>ä¸‰ä¸ªé¡µé¢</p>
<ul>
<li>-MyGoodsList.vue â€“ å•†å“é¡µ</li>
<li>MyGoodsSearch.vue â€“ æœç´¢é¡µ</li>
<li>-MyUserInfo.vue â€“ ç”¨æˆ·ä¿¡æ¯é¡µ</li>
</ul>
</li>
</ul>
<p>æ€è·¯åˆ†æï¼š</p>
<p>â€‹    â‘ : vue create tabbar-demo</p>
<p>â€‹    â‘¡: yarn add less <a href="mailto:less-loader@5.0.0">less-loader@5.0.0</a> -D</p>
<p>â€‹    â‘¢: yarn add bootstrap axios å¹¶åœ¨main.js å¼•å…¥å’Œå…¨å±€å±æ€§</p>
<p>â€‹    â‘£: æ ¹æ®éœ€æ±‚-åˆ›å»ºéœ€è¦çš„é¡µé¢ç»„ä»¶</p>
<p>â€‹    â‘¤: æŠŠæ˜¨å¤©è´­ç‰©è½¦æ¡ˆä¾‹-å°è£…çš„MyHeader.vueæ–‡ä»¶å¤åˆ¶è¿‡æ¥å¤ç”¨</p>
<p>â€‹    â‘¥: ä»App.vue â€“ å¼•å…¥ç»„ç»‡ç›¸å…³æ ‡ç­¾</p>
<p>æ–°å»ºå·¥ç¨‹:</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">vue create tabbar-demo</span><br><span class="line">yarn add less less-loader@5.0.0 -D</span><br><span class="line">yarn add bootstrap axios</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨main.jsä¸­å¼•å…¥bootStrap.csså’Œå­—ä½“å›¾æ ‡æ ·å¼</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"bootstrap/dist/css/bootstrap.css"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./assets/fonts/iconfont.css"</span></span><br></pre></td></tr></tbody></table></figure>

<p>åˆ›å»º/å¤åˆ¶å¦‚ä¸‹æ–‡ä»¶</p>
<p>ä»æ˜¨å¤©æ¡ˆä¾‹ä¸­-ç›´æ¥å¤åˆ¶è¿‡æ¥components/MyHeader.vue</p>
<p>components/MyTabBar.vue</p>
<p>views/MyGoodsList.vue</p>
<p>views/MyGoodsSearch.vue</p>
<p>views/MyUserInfo.vue</p>
<p>components/MyTable.vue</p>
<h3 id="3-1-æ¡ˆä¾‹-tabbar-åº•éƒ¨å°è£…"><a href="#3-1-æ¡ˆä¾‹-tabbar-åº•éƒ¨å°è£…" class="headerlink" title="3.1 æ¡ˆä¾‹-tabbar-åº•éƒ¨å°è£…"></a>3.1 æ¡ˆä¾‹-tabbar-åº•éƒ¨å°è£…</h3><blockquote>
<p>ç›®æ ‡: å®ç°MyTabBar.vueç»„ä»¶</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20210511172826513.png" alt="image-20210511172826513"></p>
<ul>
<li>éœ€æ±‚: æŠŠåº•éƒ¨å¯¼èˆªä¹Ÿçµæ´»å°è£…èµ·æ¥</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : åŸºæœ¬æ ‡ç­¾+æ ·å¼(mdé‡Œå¤åˆ¶)</p>
<p>â€‹    â‘¡: ä¸ºtabbarç»„ä»¶æŒ‡å®šæ•°æ®æº</p>
<p>â€‹    â‘¢: æ•°æ®æºæœ€å°‘2ä¸ª, æœ€å¤š5ä¸ª(validator)</p>
<p>â€‹    â‘£: ä»App.vueç»™MyTabBar.vueä¼ å…¥åº•éƒ¨å¯¼èˆªçš„æ•°æ®</p>
<p>â€‹    â‘¤: MyTabBar.vueä¸­å¾ªç¯å±•ç¤º</p>
<p>App.vue-æ•°ç»„å‡†å¤‡</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">tabList: [</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">iconText</span>: <span class="string">"icon-shangpinliebiao"</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">"å•†å“åˆ—è¡¨"</span>,</span><br><span class="line">        <span class="attr">componentName</span>: <span class="string">"MyGoodsList"</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">iconText</span>: <span class="string">"icon-sousuo"</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">"å•†å“æœç´¢"</span>,</span><br><span class="line">        <span class="attr">componentName</span>: <span class="string">"MyGoodsSearch"</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">iconText</span>: <span class="string">"icon-user"</span>,</span><br><span class="line">        <span class="attr">text</span>: <span class="string">"æˆ‘çš„ä¿¡æ¯"</span>,</span><br><span class="line">        <span class="attr">componentName</span>: <span class="string">"MyUserInfo"</span></span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<p>MyTabBar.vue - æ ‡ç­¾æ¨¡æ¿</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-tab-bar"&gt;</span><br><span class="line">  	&lt;div class="tab-item"&gt;</span><br><span class="line">      &lt;!-- å›¾æ ‡ --&gt;</span><br><span class="line">      &lt;span class="iconfont"&gt;&lt;/span&gt;</span><br><span class="line">      &lt;!-- æ–‡å­— --&gt;</span><br><span class="line">      &lt;span&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  </span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="less" scoped&gt;</span><br><span class="line">.my-tab-bar {</span><br><span class="line">  position: fixed;</span><br><span class="line">  left: 0;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 50px;</span><br><span class="line">  border-top: 1px solid #ccc;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-around;</span><br><span class="line">  align-items: center;</span><br><span class="line">  background-color: white;</span><br><span class="line">  .tab-item {</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: column;</span><br><span class="line">    align-items: center;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">    </span><br><span class="line">.current {</span><br><span class="line">  color: #1d7bff;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>MyTabBar.vueæ­£ç¡®ä»£ç (==ä¸å¯å¤åˆ¶==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-tab-bar"&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      class="tab-item"</span><br><span class="line">      v-for="(obj, index) in arr"</span><br><span class="line">      :key="index"</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;!-- å›¾æ ‡ --&gt;</span><br><span class="line">      &lt;span class="iconfont" :class="obj.iconText"&gt;&lt;/span&gt;</span><br><span class="line">      &lt;!-- æ–‡å­— --&gt;</span><br><span class="line">      &lt;span&gt;{{ obj.text }}&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    arr: {</span><br><span class="line">      type: Array,</span><br><span class="line">      required: true,</span><br><span class="line">      // è‡ªå®šä¹‰æ ¡éªŒè§„åˆ™</span><br><span class="line">      validator(value) {</span><br><span class="line">        // valueå°±æ˜¯æ¥åˆ°æ•°ç»„</span><br><span class="line">        if (value.length &gt;= 2 &amp;&amp; value.length &lt;= 5) {</span><br><span class="line">          return true; // ç¬¦åˆæ¡ä»¶å°±return true</span><br><span class="line">        } else {</span><br><span class="line">          console.error("æ•°æ®æºå¿…é¡»åœ¨2-5é¡¹");</span><br><span class="line">          return false;</span><br><span class="line">        }</span><br><span class="line">      },</span><br><span class="line">    },</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸è¦å¿˜äº†æŠŠtabListæ•°ç»„ä»App.vue -&gt; MyTabBar.vue</p>
<h3 id="3-2-æ¡ˆä¾‹-tabbar-åº•éƒ¨é«˜äº®"><a href="#3-2-æ¡ˆä¾‹-tabbar-åº•éƒ¨é«˜äº®" class="headerlink" title="3.2 æ¡ˆä¾‹-tabbar-åº•éƒ¨é«˜äº®"></a>3.2 æ¡ˆä¾‹-tabbar-åº•éƒ¨é«˜äº®</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»åº•éƒ¨å¯¼èˆªå®ç°é«˜äº®æ•ˆæœ</p>
</blockquote>
<ul>
<li>éœ€æ±‚: ç‚¹å‡»åº•éƒ¨å®ç°é«˜äº®æ•ˆæœ</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : ç»‘å®šç‚¹å‡»äº‹ä»¶, è·å–ç‚¹å‡»çš„ç´¢å¼•</p>
<p>â€‹    â‘¡: å¾ªç¯çš„æ ‡ç­¾è®¾ç½®åŠ¨æ€class, éå†çš„ç´¢å¼•, å’Œç‚¹å‡»ä¿å­˜çš„ç´¢å¼•æ¯”è¾ƒ, ç›¸åŒåˆ™é«˜äº®</p>
<p>æ•ˆæœæ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20210511173026688.png" alt="image-20210511173026688"></p>
<p>MyTabBar.vue(==æ­£ç¡®ä»£ç ==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-tab-bar"&gt;</span><br><span class="line">    &lt;div class="tab-item" </span><br><span class="line">    v-for="(obj, index) in arr" </span><br><span class="line">    :key="index"</span><br><span class="line">    :class="{current: activeIndex === index}"</span><br><span class="line">    @click="activeIndex = index"&gt;</span><br><span class="line">      &lt;!-- å›¾æ ‡ --&gt;</span><br><span class="line">      &lt;span class="iconfont" :class="obj.iconText"&gt;&lt;/span&gt;</span><br><span class="line">      &lt;!-- æ–‡å­— --&gt;</span><br><span class="line">      &lt;span&gt;{{ obj.text }}&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      activeIndex: 0 // é«˜äº®å…ƒç´ ä¸‹æ ‡</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // ....å…¶ä»–ä»£ç </span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-3-æ¡ˆä¾‹-tabbar-ç»„ä»¶åˆ‡æ¢"><a href="#3-3-æ¡ˆä¾‹-tabbar-ç»„ä»¶åˆ‡æ¢" class="headerlink" title="3.3 æ¡ˆä¾‹-tabbar-ç»„ä»¶åˆ‡æ¢"></a>3.3 æ¡ˆä¾‹-tabbar-ç»„ä»¶åˆ‡æ¢</h3><blockquote>
<p>ç›®çš„: ç‚¹å‡»åº•éƒ¨å¯¼èˆª, åˆ‡æ¢é¡µé¢ç»„ä»¶æ˜¾ç¤º</p>
</blockquote>
<p>éœ€æ±‚: ç‚¹å‡»åº•éƒ¨åˆ‡æ¢ç»„ä»¶</p>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : åº•éƒ¨å¯¼èˆªä¼ å‡ºåŠ¨æ€ç»„ä»¶åå­—ç¬¦ä¸²åˆ°App.vue</p>
<p>â€‹    â‘¡: åˆ‡æ¢åŠ¨æ€ç»„ä»¶iså±æ€§çš„å€¼ä¸ºè¦æ˜¾ç¤ºçš„ç»„ä»¶å</p>
<p>æ•ˆæœæ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/tabbar_%E5%88%87%E6%8D%A2%E7%BB%84%E4%BB%B6.gif" alt="image-20210511173144326"></p>
<p>è¡¥å……: ç»™å†…å®¹div.app- è®¾ç½®ä¸Šä¸‹å†…è¾¹è·</p>
<p>App.vue - å¼•å…¥å¹¶æ³¨å†Œ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyHeader</span><br><span class="line">      :background="'blue'"</span><br><span class="line">      :fontColor="'white'"</span><br><span class="line">      title="TabBaræ¡ˆä¾‹"</span><br><span class="line">    &gt;&lt;/MyHeader&gt;</span><br><span class="line">    &lt;div class="main"&gt;</span><br><span class="line">      &lt;component :is="comName"&gt;&lt;/component&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;MyTabBar :arr="tabList"</span><br><span class="line">    @changeCom="changeComFn"</span><br><span class="line">    &gt;&lt;/MyTabBar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyHeader from "./components/MyHeader";</span><br><span class="line">// ç›®æ ‡: å®Œæˆåº•éƒ¨å°è£…</span><br><span class="line">// 1. MyTabBar.vue ç»„ä»¶æ ‡ç­¾+æ ·å¼ å‡†å¤‡</span><br><span class="line">// 2. å­—ä½“å›¾æ ‡å¼•å…¥</span><br><span class="line">// 3. å‡†å¤‡åº•éƒ¨æ•°æ®</span><br><span class="line">// 4. ä½¿ç”¨MyTabBarç»„ä»¶, ä¼ å…¥æ•°æ®(çˆ¶-&gt;å­), å¾ªç¯äº§ç”Ÿåº•éƒ¨å¯¼èˆª</span><br><span class="line">// 5. å­ç»„ä»¶å†…propsè‡ªå®šä¹‰æ£€éªŒè§„åˆ™(2-5é¡¹)</span><br><span class="line">// 6. å­ç»„ä»¶å†…å¾ªç¯äº§ç”Ÿåº•éƒ¨å¯¼èˆª</span><br><span class="line">import MyTabBar from './components/MyTabBar'</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: åˆ‡æ¢ç»„ä»¶æ˜¾ç¤º</span><br><span class="line">// 1. åˆ›å»ºç»„ä»¶ - ç¼–å†™å†…å®¹</span><br><span class="line">// 2. å¼•å…¥App.vueæ³¨å†Œ</span><br><span class="line">// 3. æŒ‚è½½ç‚¹è®¾ç½®is</span><br><span class="line">// 4. åˆ‡æ¢comNameçš„å€¼(é‡è¦)</span><br><span class="line">// 5. åº•éƒ¨å¯¼èˆªç‚¹å‡»- MyTabBar.vueé‡Œ</span><br><span class="line">// å­ -&gt; çˆ¶æŠ€æœ¯ (ä¼ è¦åˆ‡æ¢çš„ç»„ä»¶åå‡ºæ¥)</span><br><span class="line"></span><br><span class="line">import MyGoodsList from './views/MyGoodsList'</span><br><span class="line">import MyGoodsSearch from './views/MyGoodsSearch'</span><br><span class="line">import MyUserInfo from './views/MyUserInfo'</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      comName: "MyGoodsList", // é»˜è®¤æ˜¾ç¤ºçš„ç»„ä»¶</span><br><span class="line">      tabList: [ // åº•éƒ¨å¯¼èˆªçš„æ•°æ®</span><br><span class="line">        {</span><br><span class="line">          iconText: "icon-shangpinliebiao",</span><br><span class="line">          text: "å•†å“åˆ—è¡¨",</span><br><span class="line">          componentName: "MyGoodsList",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          iconText: "icon-sousuo",</span><br><span class="line">          text: "å•†å“æœç´¢",</span><br><span class="line">          componentName: "MyGoodsSearch",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          iconText: "icon-user",</span><br><span class="line">          text: "æˆ‘çš„ä¿¡æ¯",</span><br><span class="line">          componentName: "MyUserInfo",</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  components: {</span><br><span class="line">    MyHeader,</span><br><span class="line">    MyTabBar,</span><br><span class="line">    MyGoodsList,</span><br><span class="line">    MyGoodsSearch,</span><br><span class="line">    MyUserInfo</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    changeComFn(cName){</span><br><span class="line">      </span><br><span class="line">      this.comName = cName; // MyTabBaré‡Œé€‰å‡ºæ¥çš„ç»„ä»¶åèµ‹äºˆç»™iså±æ€§çš„comName</span><br><span class="line">      // å¯¼è‡´ç»„ä»¶çš„åˆ‡æ¢</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.main{</span><br><span class="line">  padding-top: 45px;</span><br><span class="line">  padding-bottom: 51px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>MyTabBar.vue - ç‚¹å‡»ä¼ é€’è¿‡æ¥ç»„ä»¶å</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">methods: {</span><br><span class="line">    <span class="function"><span class="title">btn</span>(<span class="params">index, theObj</span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.selIndex = index; <span class="comment">// ç‚¹è°, å°±æŠŠè°çš„ç´¢å¼•å€¼ä¿å­˜èµ·æ¥</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">"changeCom"</span>, theObj.componentName); <span class="comment">// è¦åˆ‡æ¢çš„ç»„ä»¶åä¼ App.vue</span></span><br><span class="line">    },</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-4-æ¡ˆä¾‹-tabbar-å•†å“åˆ—è¡¨"><a href="#3-4-æ¡ˆä¾‹-tabbar-å•†å“åˆ—è¡¨" class="headerlink" title="3.4 æ¡ˆä¾‹-tabbar-å•†å“åˆ—è¡¨"></a>3.4 æ¡ˆä¾‹-tabbar-å•†å“åˆ—è¡¨</h3><blockquote>
<p>ç›®æ ‡: ä¸ºMyGoodsListé¡µé¢, å‡†å¤‡è¡¨æ ¼ç»„ä»¶MyTable.vue-é“ºè®¾å±•ç¤ºæ•°æ® </p>
</blockquote>
<ul>
<li>éœ€æ±‚: å•†å“åˆ—è¡¨é“ºè®¾é¡µé¢</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : å°è£…MyTable.vue â€“ å‡†å¤‡æ ‡ç­¾å’Œæ ·å¼</p>
<p>â€‹    â‘¡: axiosåœ¨MyGoodsList.vueè¯·æ±‚æ•°æ®å›æ¥</p>
<p>â€‹    â‘¢: è¯·æ±‚åœ°å€: <a href="https://www.escook.cn/api/goods">https://www.escook.cn/api/goods</a></p>
<p>â€‹    â‘£: ä¼ å…¥MyTable.vueä¸­å¾ªç¯æ•°æ®æ˜¾ç¤º</p>
<p>â€‹    â‘¤: ç»™åˆ é™¤æŒ‰é’®æ·»åŠ bootstrapçš„æ ·å¼: btn btn-danger btn-sm</p>
<p>æ•ˆæœæ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20210511173412963.png" alt="image-20210511173412963"></p>
<p>MyTable.vue - å‡†å¤‡tableæ•´ä¸ªè¡¨æ ¼æ ‡ç­¾å’Œæ ·å¼(å¯å¤åˆ¶)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;table class="table table-bordered table-stripped"&gt;</span><br><span class="line">    &lt;!-- è¡¨æ ¼æ ‡é¢˜åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;#&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å•†å“åç§°&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ä»·æ ¼&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ ‡ç­¾&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;!-- è¡¨æ ¼ä¸»ä½“åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr &gt;</span><br><span class="line">        &lt;td&gt;1&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;å•†å“&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;998&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;xxx&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;xxx&lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  name: 'MyTable'</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang="less"&gt;</span><br><span class="line">.my-goods-list {</span><br><span class="line">  .badge {</span><br><span class="line">    margin-right: 5px;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä½¿ç”¨axiosè¯·æ±‚æ•°æ®, æŠŠè¡¨æ ¼é¡µé¢é“ºè®¾å‡ºæ¥</p>
</blockquote>
<p>main.js - æ³¨å†Œaxiosé…ç½®é»˜è®¤åœ°å€</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line">axios.defaults.baseURL = <span class="string">"https://www.escook.cn"</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>MyGoodsList.vue - ä½¿ç”¨axiosè¯·æ±‚æ•°æ®, æŠŠæ•°æ®ä¼ å…¥ç»™MyTable.vueé‡Œå¾ªç¯é“ºè®¾</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyTable :arr="list"&gt;</span><br><span class="line">    &lt;/MyTable&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyTable from "../components/MyTable";</span><br><span class="line">import axios from "axios";</span><br><span class="line">axios.defaults.baseURL = "https://www.escook.cn";</span><br><span class="line">// ç›®æ ‡: å¾ªç¯å•†å“åˆ—è¡¨è¡¨æ ¼</span><br><span class="line">// 1. å°è£…MyTable.vue æ•´ä½“è¡¨æ ¼ç»„ä»¶-ä¸€å¥—æ ‡ç­¾å’Œæ ·å¼</span><br><span class="line">// 2. axiosè¯·æ±‚æ•°æ®</span><br><span class="line">// 3. ä¼ å…¥MyTableç»„ä»¶é‡Œå¾ªç¯træ˜¾ç¤ºæ•°æ®</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: å±•ç¤ºtagsæ ‡ç­¾</span><br><span class="line">// 1. tagsæ•°ç»„ - æŸä¸ªtdå¾ªç¯spanä½¿ç”¨æ–‡å­—</span><br><span class="line">// 2. spanè®¾ç½®bsçš„æ ·å¼</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: åˆ é™¤æ•°æ®</span><br><span class="line">// 1. åˆ é™¤æŒ‰é’® - ç‚¹å‡»äº‹ä»¶</span><br><span class="line">// 2. ä½œç”¨åŸŸæ’æ§½æŠŠç´¢å¼•å€¼å…³è”å‡ºæ¥äº†</span><br><span class="line">// scopeèº«ä¸Šå°±æœ‰rowå’Œindex</span><br><span class="line">// 3. åˆ é™¤ä¸­ä½¿ç”¨scope.indexçš„ç´¢å¼•å€¼</span><br><span class="line">// 4. åˆ é™¤äº‹ä»¶é‡Œåˆ é™¤æ•°ç»„é‡Œå¯¹åº”ç´¢å¼•å€¼çš„æ•°æ®</span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    MyTable,</span><br><span class="line">  },</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [] // æ‰€æœ‰æ•°æ®</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  created() {</span><br><span class="line">    axios({</span><br><span class="line">      url: "/api/goods",</span><br><span class="line">    }).then((res) =&gt; {</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.list = res.data.data;</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>MyTable.vueé‡Œæ­£ç¡®ä»£ç (==ä¸å¯å¤åˆ¶==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;table class="table table-bordered table-stripped"&gt;</span><br><span class="line">    &lt;!-- è¡¨æ ¼æ ‡é¢˜åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;#&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å•†å“åç§°&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ä»·æ ¼&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ ‡ç­¾&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;!-- è¡¨æ ¼ä¸»ä½“åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for="(obj, index) in arr"</span><br><span class="line">      :key="obj.id"</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;td&gt;{{ obj.id }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.goods_name }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.goods_price }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.tags }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">            &lt;button class="btn btn-danger btn-sm"&gt;åˆ é™¤&lt;/button&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  name: 'MyTable',</span><br><span class="line">  props: {</span><br><span class="line">      arr: Array</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang="less"&gt;</span><br><span class="line">.my-goods-list {</span><br><span class="line">  .badge {</span><br><span class="line">    margin-right: 5px;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-5-æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-æ’æ§½"><a href="#3-5-æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-æ’æ§½" class="headerlink" title="3.5_æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-æ’æ§½"></a>3.5_æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-æ’æ§½</h3><blockquote>
<p>ç›®æ ‡: ä½¿ç”¨æ’æ§½æŠ€æœ¯, å’Œä½œç”¨åŸŸæ’æ§½æŠ€æœ¯, ç»™MyTable.vueç»„ä»¶, è‡ªå®šä¹‰åˆ—æ ‡é¢˜, è‡ªå®šä¹‰è¡¨æ ¼å†…å®¹</p>
</blockquote>
<ul>
<li>éœ€æ±‚: å…è®¸ç”¨æˆ·è‡ªå®šä¹‰è¡¨æ ¼å¤´å’Œè¡¨æ ¼å•å…ƒæ ¼å†…å®¹</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : æŠŠMyTable.vueé‡Œå‡†å¤‡slot</p>
<p>â€‹    â‘¡: ä½¿ç”¨MyTableç»„ä»¶æ—¶ä¼ å…¥å…·ä½“æ ‡ç­¾</p>
<p>æ­¥éª¤:</p>
<ol>
<li>æé«˜ç»„ä»¶==å¤ç”¨æ€§å’Œçµæ´»æ€§==, æŠŠè¡¨æ ¼åˆ—æ ‡é¢˜theadéƒ¨åˆ†é¢„ç•™<slot>æ ‡ç­¾, è®¾ç½®nameå±æ€§</slot></li>
<li>ä½¿ç”¨MyTable.vueæ—¶, ä¼ å…¥åˆ—æ ‡é¢˜æ ‡ç­¾</li>
<li>è¡¨æ ¼å†…å®¹tdéƒ¨åˆ†ä¹Ÿå¯ä»¥è®©ç»„ä»¶ä½¿ç”¨è€…è‡ªå®šä¹‰, ä¹Ÿç»™tbodyä¸‹trå†…ç•™å¥½<slot>æ ‡ç­¾å’Œnameå±æ€§å</slot></li>
<li>ä½¿ç”¨æ’æ§½éœ€è¦ç”¨åˆ°æ’æ§½å†…çš„objå¯¹è±¡ä¸Šçš„æ•°æ®, ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½æŠ€æœ¯</li>
</ol>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20201225230419844-1610538206980.png" alt="image-20201225230419844"></p>
<p>MyTable.vue - ç•™å¥½å…·åæ’æ§½</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;table class="table table-bordered table-stripped"&gt;</span><br><span class="line">    &lt;!-- è¡¨æ ¼æ ‡é¢˜åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;!-- &lt;th&gt;#&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å•†å“åç§°&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ä»·æ ¼&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ ‡ç­¾&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ“ä½œ&lt;/th&gt; --&gt;</span><br><span class="line">        &lt;slot name="header"&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">    &lt;!-- è¡¨æ ¼ä¸»ä½“åŒºåŸŸ --&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">      &lt;tr v-for="(obj, index) in arr"</span><br><span class="line">      :key="obj.id"</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;!-- &lt;td&gt;{{ obj.id }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.goods_name }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.goods_price }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ obj.tags }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">            &lt;button class="btn btn-danger btn-sm"&gt;åˆ é™¤&lt;/button&gt;</span><br><span class="line">        &lt;/td&gt; --&gt;</span><br><span class="line">        &lt;slot name="body" :row="obj" :index="index"&gt;&lt;/slot&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  name: 'MyTable',</span><br><span class="line">  props: {</span><br><span class="line">      arr: Array</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>MyGoodsList.vue ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyTable :arr="list"&gt;</span><br><span class="line">      &lt;template #header&gt;</span><br><span class="line">        &lt;th&gt;#&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å•†å“åç§°&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ä»·æ ¼&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ ‡ç­¾&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;!-- scopeçš„å€¼: {row: obj, index: ç´¢å¼•å€¼} --&gt;</span><br><span class="line">      &lt;template #body="scope"&gt;</span><br><span class="line">        &lt;td&gt;{{ scope.row.id }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ scope.row.goods_name }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;{{ scope.row.goods_price }}&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">            {{ scope.row.tags }}</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">          &lt;button class="btn btn-danger btn-sm"</span><br><span class="line">          &gt;åˆ é™¤&lt;/button&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/MyTable&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyTable from "../components/MyTable";</span><br><span class="line">import axios from "axios";</span><br><span class="line">axios.defaults.baseURL = "https://www.escook.cn";</span><br><span class="line">// ç›®æ ‡: å¾ªç¯å•†å“åˆ—è¡¨è¡¨æ ¼</span><br><span class="line">// 1. å°è£…MyTable.vue æ•´ä½“è¡¨æ ¼ç»„ä»¶-ä¸€å¥—æ ‡ç­¾å’Œæ ·å¼</span><br><span class="line">// 2. axiosè¯·æ±‚æ•°æ®</span><br><span class="line">// 3. ä¼ å…¥MyTableç»„ä»¶é‡Œå¾ªç¯træ˜¾ç¤ºæ•°æ®</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: å±•ç¤ºtagsæ ‡ç­¾</span><br><span class="line">// 1. tagsæ•°ç»„ - æŸä¸ªtdå¾ªç¯spanä½¿ç”¨æ–‡å­—</span><br><span class="line">// 2. spanè®¾ç½®bsçš„æ ·å¼</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: åˆ é™¤æ•°æ®</span><br><span class="line">// 1. åˆ é™¤æŒ‰é’® - ç‚¹å‡»äº‹ä»¶</span><br><span class="line">// 2. ä½œç”¨åŸŸæ’æ§½æŠŠç´¢å¼•å€¼å…³è”å‡ºæ¥äº†</span><br><span class="line">// scopeèº«ä¸Šå°±æœ‰rowå’Œindex</span><br><span class="line">// 3. åˆ é™¤ä¸­ä½¿ç”¨scope.indexçš„ç´¢å¼•å€¼</span><br><span class="line">// 4. åˆ é™¤äº‹ä»¶é‡Œåˆ é™¤æ•°ç»„é‡Œå¯¹åº”ç´¢å¼•å€¼çš„æ•°æ®</span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    MyTable,</span><br><span class="line">  },</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [] // æ‰€æœ‰æ•°æ®</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  created() {</span><br><span class="line">    axios({</span><br><span class="line">      url: "/api/goods",</span><br><span class="line">    }).then((res) =&gt; {</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.list = res.data.data;</span><br><span class="line">    });</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-6-æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-tagså¾®æ ‡"><a href="#3-6-æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-tagså¾®æ ‡" class="headerlink" title="3.6 æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-tagså¾®æ ‡"></a>3.6 æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-tagså¾®æ ‡</h3><blockquote>
<p>ç›®æ ‡: æŠŠå•å…ƒæ ¼é‡Œçš„æ ‡ç­¾, tagså¾½ç« é“ºè®¾ä¸‹</p>
</blockquote>
<ul>
<li>éœ€æ±‚: æ ‡ç­¾åˆ—è‡ªå®šä¹‰æ˜¾ç¤º</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : æ’æ§½é‡Œä¼ å…¥çš„tdå•å…ƒæ ¼</p>
<p>â€‹    â‘¡: è‡ªå®šä¹‰spanæ ‡ç­¾çš„å¾ªç¯å±•ç¤º-ç»™äºˆæ ·å¼</p>
<p>æ•ˆæœæ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20210511174218209.png" alt="image-20210511174218209"></p>
<p>bootstrapå¾½ç« : <a href="https://v4.bootcss.com/docs/components/badge/">https://v4.bootcss.com/docs/components/badge/</a></p>
<p>MyGoodsList.vue - æ’æ§½</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;span v-for="(str, ind) in scope.row.tags" :key="ind"</span><br><span class="line">      class="badge badge-warning"</span><br><span class="line">      &gt;</span><br><span class="line">    {{ str }}</span><br><span class="line">&lt;/span&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢é¢å¤–æ·»åŠ æ ·å¼</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;style lang="less" scoped&gt;</span><br><span class="line">.my-goods-list {</span><br><span class="line">  .badge {</span><br><span class="line">    margin-right: 5px;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-7-æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-åˆ é™¤åŠŸèƒ½"><a href="#3-7-æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-åˆ é™¤åŠŸèƒ½" class="headerlink" title="3.7 æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-åˆ é™¤åŠŸèƒ½"></a>3.7 æ¡ˆä¾‹-tabbar-å•†å“è¡¨æ ¼-åˆ é™¤åŠŸèƒ½</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»åˆ é™¤å¯¹åº”è¿™æ¡æ•°æ®</p>
</blockquote>
<ul>
<li>éœ€æ±‚: ç‚¹å‡»åˆ é™¤æŒ‰é’®åˆ é™¤æ•°æ®</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : åˆ é™¤æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶</p>
<p>â€‹    â‘¡: ä½œç”¨åŸŸæ’æ§½ç»‘å®šidå€¼å‡ºæ¥</p>
<p>â€‹    â‘¢: ä¼ ç»™åˆ é™¤æ–¹æ³•, åˆ é™¤MyGoodsList.vueé‡Œæ•°ç»„é‡Œæ•°æ®</p>
<p>æ•ˆæœæ¼”ç¤º</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/tabbar_%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD.gif" alt="tabbar_åˆ é™¤åŠŸèƒ½"></p>
<p>æç¤º: idåœ¨MyTable.vueé‡Œ, ä½†æ˜¯MyGoodsList.vueé‡Œè¦ä½¿ç”¨, è€Œä¸”åœ¨æ’æ§½ä½ç½®, ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½å·²ç»æŠŠæ•´ä¸ªobjå¯¹è±¡(åŒ…å«id)å¸¦å‡ºæ¥äº†</p>
<p>MyTable.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;slot name="body" :row="obj"&gt;&lt;/slot&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol>
<li>MyGoodsList.vue - æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
</ol>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line">&lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">"btn btn-danger btn-sm"</span></span><br><span class="line">    @click=<span class="string">"removeBtn(scope.row.id)"</span></span><br><span class="line">    &gt;åˆ é™¤&lt;/button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>â€‹    2. <code>my-goods-list.vue</code> æ ¹æ® id åˆ é™¤</p>
<figure class="highlight jsx"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">removeBtn</span>(<span class="params">id</span>)</span>{</span><br><span class="line">    <span class="keyword">let</span> index = <span class="built_in">this</span>.list.findIndex(<span class="function"><span class="params">obj</span> =&gt;</span> obj.id === id)</span><br><span class="line">    <span class="built_in">this</span>.list.splice(index, <span class="number">1</span>)</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-8-æ¡ˆä¾‹-tabbar-æ·»åŠ tab"><a href="#3-8-æ¡ˆä¾‹-tabbar-æ·»åŠ tab" class="headerlink" title="3.8 æ¡ˆä¾‹-tabbar-æ·»åŠ tab"></a>3.8 æ¡ˆä¾‹-tabbar-æ·»åŠ tab</h3><blockquote>
<p>ç›®æ ‡: å®ç°ç‚¹å‡»tabæŒ‰é’®, å‡ºç°è¾“å…¥æ¡†è‡ªåŠ¨è·å–ç„¦ç‚¹, å¤±å»ç„¦ç‚¹å…³é—­input, å›è½¦æ–°å¢tag, escæ¸…ç©ºå†…å®¹</p>
</blockquote>
<ul>
<li>éœ€æ±‚1: ç‚¹å‡»Tab, æŒ‰é’®æ¶ˆå¤±, è¾“å…¥æ¡†å‡ºç°</li>
<li>éœ€æ±‚2: è¾“å…¥æ¡†è‡ªåŠ¨èšç„¦</li>
<li>éœ€æ±‚3: å¤±å»ç„¦ç‚¹, è¾“å…¥æ¡†æ¶ˆå¤±, æŒ‰é’®å‡º</li>
<li>éœ€æ±‚4: ç›‘æµ‹inputå›è½¦, æ— æ•°æ®æ‹¦æˆª</li>
<li>éœ€æ±‚5: ç›‘æµ‹inputå–æ¶ˆ, æ¸…ç©ºæ•°æ®</li>
<li>éœ€æ±‚6: ç›‘æµ‹inputå›è½¦, æœ‰æ•°æ®æ·»åŠ </li>
</ul>
<p>æ•ˆæœç›®æ ‡: </p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/tabbar_tab%E5%8A%9F%E8%83%BD.gif" alt="image-20201225233325965"></p>
<h4 id="3-8-0-ç‚¹å‡»æŒ‰é’®æ¶ˆå¤±-è¾“å…¥æ¡†å‡ºç°"><a href="#3-8-0-ç‚¹å‡»æŒ‰é’®æ¶ˆå¤±-è¾“å…¥æ¡†å‡ºç°" class="headerlink" title="3.8.0 ç‚¹å‡»æŒ‰é’®æ¶ˆå¤±, è¾“å…¥æ¡†å‡ºç°"></a>3.8.0 ç‚¹å‡»æŒ‰é’®æ¶ˆå¤±, è¾“å…¥æ¡†å‡ºç°</h4><p>MyGoodsList.vue - æ ‡ç­¾ä½ç½®æ·»åŠ </p>
<p>æ³¨æ„: æ¯ä¸ªtabæŒ‰é’®å’Œinputéƒ½æ˜¯ç‹¬ç«‹å˜é‡æ§åˆ¶, é‚£ä¹ˆç›´æ¥åœ¨rowèº«ä¸Šçš„å±æ€§æ§åˆ¶å³å¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">          class="tag-input form-control"</span><br><span class="line">          style="width: 100px;"</span><br><span class="line">          type="text"</span><br><span class="line">          v-if="scope.row.inputVisible"</span><br><span class="line">          /&gt;</span><br><span class="line">          &lt;button </span><br><span class="line">          v-else </span><br><span class="line">          style="display: block;" </span><br><span class="line">          class="btn btn-primary btn-sm add-tag"</span><br><span class="line">          @click="scope.row.inputVisible = true"</span><br><span class="line">          &gt;+Tag&lt;/button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h4 id="3-8-1-inputè‡ªåŠ¨è·å–ç„¦ç‚¹"><a href="#3-8-1-inputè‡ªåŠ¨è·å–ç„¦ç‚¹" class="headerlink" title="3.8.1 inputè‡ªåŠ¨è·å–ç„¦ç‚¹"></a>3.8.1 inputè‡ªåŠ¨è·å–ç„¦ç‚¹</h4><p>main.js - å®šä¹‰å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€æŒ‡ä»¤</span></span><br><span class="line">Vue.directive(<span class="string">"focus"</span>, {</span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">el</span>)</span>{</span><br><span class="line">    el.focus()</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>MyGoodsList.vue - ä½¿ç”¨ v-focusæŒ‡ä»¤</p>
<h4 id="3-8-2-inputå¤±å»ç„¦ç‚¹å…³é—­input"><a href="#3-8-2-inputå¤±å»ç„¦ç‚¹å…³é—­input" class="headerlink" title="3.8.2 inputå¤±å»ç„¦ç‚¹å…³é—­input"></a>3.8.2 inputå¤±å»ç„¦ç‚¹å…³é—­input</h4><p>ç›‘å¬inputå¤±å»ç„¦ç‚¹äº‹ä»¶, è®©inputæ¶ˆå¤±</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">@blur=<span class="string">"scope.row.inputVisible = false"</span></span><br></pre></td></tr></tbody></table></figure>

<h4 id="3-8-3-inputå›è½¦æ–°å¢tag"><a href="#3-8-3-inputå›è½¦æ–°å¢tag" class="headerlink" title="3.8.3 inputå›è½¦æ–°å¢tag"></a>3.8.3 inputå›è½¦æ–°å¢tag</h4><p>ç›‘å¬inputçš„å›è½¦äº‹ä»¶, å¦‚æœæ— æ•°æ®æ‹¦æˆªä»£ç </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">@keydown.enter=<span class="string">"enterFn(scope.row)"</span></span><br></pre></td></tr></tbody></table></figure>

<p>äº‹ä»¶å¤„ç†å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">enterFn</span>(<span class="params">obj</span>)</span>{ <span class="comment">// å›è½¦</span></span><br><span class="line">    <span class="comment">// console.log(obj.inputValue);</span></span><br><span class="line">    <span class="keyword">if</span> (obj.inputValue.trim().length === <span class="number">0</span>) {</span><br><span class="line">        alert(<span class="string">'è¯·è¾“å…¥æ•°æ®'</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    obj.tags.push(obj.inputValue) <span class="comment">// è¡¨å•é‡Œçš„å­—ç¬¦ä¸²çŠ¶æ€tagsæ•°ç»„</span></span><br><span class="line">    obj.inputValue = <span class="string">""</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h4 id="3-8-4-inputæ¡†escæ¸…ç©ºå†…å®¹"><a href="#3-8-4-inputæ¡†escæ¸…ç©ºå†…å®¹" class="headerlink" title="3.8.4 inputæ¡†escæ¸…ç©ºå†…å®¹"></a>3.8.4 inputæ¡†escæ¸…ç©ºå†…å®¹</h4><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">@keydown.esc=<span class="string">"scope.row.inputValue = ''"</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä»Šæ—¥æ€»ç»“"><a href="#ä»Šæ—¥æ€»ç»“" class="headerlink" title="ä»Šæ—¥æ€»ç»“"></a>ä»Šæ—¥æ€»ç»“</h2><ol>
<li>åŠ¨æ€ç»„ä»¶çš„ä½¿ç”¨æ­¥éª¤</li>
<li>ç»„ä»¶ç¼“å­˜ä½¿ç”¨æ­¥éª¤å’Œä½œç”¨</li>
<li>ç»„ä»¶æ’æ§½é»˜è®¤ä½¿ç”¨</li>
<li>æ’æ§½é»˜è®¤æ˜¾ç¤ºçš„å†…å®¹</li>
<li>å¤šä¸ªæ’æ§½æ—¶, å…·åæ’æ§½å¦‚ä½•ä½¿ç”¨</li>
<li>ä½œç”¨åŸŸæ’æ§½å¦‚ä½•ä½¿ç”¨ä»¥åŠç›®çš„</li>
<li>è‡ªå®šä¹‰å‘½ä»¤å¦‚ä½•ä½¿ç”¨</li>
<li>è·Ÿéšè§†é¢‘å®Œæˆtabbaræ¡ˆä¾‹</li>
</ol>
<h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><h3 id="1-vueä¸­soltçš„ä½¿ç”¨æ–¹å¼ï¼Œä»¥åŠsoltä½œç”¨åŸŸæ’æ§½çš„ç”¨æ³•"><a href="#1-vueä¸­soltçš„ä½¿ç”¨æ–¹å¼ï¼Œä»¥åŠsoltä½œç”¨åŸŸæ’æ§½çš„ç”¨æ³•" class="headerlink" title="1. vueä¸­soltçš„ä½¿ç”¨æ–¹å¼ï¼Œä»¥åŠsoltä½œç”¨åŸŸæ’æ§½çš„ç”¨æ³•"></a>1. vueä¸­soltçš„ä½¿ç”¨æ–¹å¼ï¼Œä»¥åŠsoltä½œç”¨åŸŸæ’æ§½çš„ç”¨æ³•</h3><p>   ä½¿ç”¨æ–¹å¼ï¼šå½“ç»„ä»¶å½“åšæ ‡ç­¾è¿›è¡Œä½¿ç”¨çš„æ—¶å€™ï¼Œç”¨slotå¯ä»¥ç”¨æ¥æ¥å—ç»„ä»¶æ ‡ç­¾åŒ…è£¹çš„å†…å®¹ï¼Œå½“ç»™soltæ ‡ç­¾æ·»åŠ nameå±æ€§çš„ æ—¶å€™ï¼Œå¯ä»¥è°ƒæ¢å“åº”çš„ä½ç½®<br>  (é«˜çº§ç”¨æ³•) æ’æ§½ä½œç”¨åŸŸï¼š å½“ä¼ é€’çš„ä¸æ˜¯å•ä¸€çš„æ ‡ç­¾, ä¾‹å¦‚éœ€è¦å¾ªç¯æ—¶, æŠŠè¦å¾ªç¯çš„æ ‡ç­¾ä¼ å…¥, ç»„ä»¶å†…ä½¿ç”¨v-foråœ¨slotæ ‡ç­¾ä¸Š, å†…éƒ¨å¯ä»¥v-bind:æŠŠå€¼ä¼ å‡ºæ¥, å†å¤–é¢æŠŠå€¼èµ‹äºˆè¿›å», çœ‹ç¤ºä¾‹</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&lt;current-user&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot:default</span>=<span class="string">"slotProps"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    {{ slotProps.user.firstName }}</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/current-user&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// current-userç»„ä»¶, userå±æ€§å’Œå€¼, ç»‘å®šç»™slotPropsä¸Š</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">slot</span> <span class="attr">v-bind:user</span>=<span class="string">"user"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    {{ user.lastName }}</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ‰©å±•é˜…è¯»: <a href="https://cn.vuejs.org/v2/guide/components-slots.html">https://cn.vuejs.org/v2/guide/components-slots.html</a> (äº†è§£å³å¯, ä¸€èˆ¬ç”¨ä¸ä¸Š)</p>
</blockquote>
<h3 id="2-è·Ÿkeep-aliveæœ‰å…³çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å“ªäº›ï¼Ÿï¼ˆå¿…ä¼šï¼‰"><a href="#2-è·Ÿkeep-aliveæœ‰å…³çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å“ªäº›ï¼Ÿï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="2. è·Ÿkeep-aliveæœ‰å…³çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å“ªäº›ï¼Ÿï¼ˆå¿…ä¼šï¼‰"></a>2. è·Ÿkeep-aliveæœ‰å…³çš„ç”Ÿå‘½å‘¨æœŸæ˜¯å“ªäº›ï¼Ÿï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    <strong>1****ï¼‰å‰è¨€ï¼š</strong>åœ¨å¼€å‘Vueé¡¹ç›®çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†ç»„ä»¶æ˜¯æ²¡å¿…è¦å¤šæ¬¡æ¸²æŸ“çš„ï¼Œæ‰€ä»¥Vueæä¾›äº†ä¸€ä¸ªå†…ç½®ç»„ä»¶keep-aliveæ¥ç¼“å­˜ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œé¿å…é‡æ–°æ¸²æŸ“ï¼Œåœ¨å¼€å‘Vueé¡¹ç›®çš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†ç»„ä»¶æ˜¯æ²¡å¿…è¦å¤šæ¬¡æ¸²æŸ“çš„ï¼Œæ‰€ä»¥Vueæä¾›äº†ä¸€ä¸ªå†…ç½®ç»„ä»¶keep-aliveæ¥ç¼“å­˜ç»„ä»¶å†…éƒ¨çŠ¶æ€ï¼Œé¿å…é‡æ–°æ¸²æŸ“</p>
<p>â€‹    <strong>2****ï¼‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š</strong>åœ¨è¢«keep-aliveåŒ…å«çš„ç»„ä»¶/è·¯ç”±ä¸­ï¼Œä¼šå¤šå‡ºä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸçš„é’©å­:activated ä¸ deactivatedã€‚</p>
<p>â€‹       <strong>1****ã€activatedé’©å­ï¼š</strong>åœ¨åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¼šè¢«è°ƒç”¨ï¼Œä¹‹ååœ¨æ¯æ¬¡ç¼“å­˜ç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨ã€‚</p>
<p>â€‹       <strong>2****ã€Activatedé’©å­è°ƒç”¨æ—¶æœºï¼š</strong> ç¬¬ä¸€æ¬¡è¿›å…¥ç¼“å­˜è·¯ç”±/ç»„ä»¶ï¼Œåœ¨mountedåé¢ï¼ŒbeforeRouteEnterå®ˆå«ä¼ ç»™ next çš„å›è°ƒå‡½æ•°ä¹‹å‰è°ƒç”¨ï¼Œå¹¶ä¸”ç»™å› ä¸ºç»„ä»¶è¢«ç¼“å­˜äº†ï¼Œå†æ¬¡è¿›å…¥ç¼“å­˜è·¯ç”±ã€ç»„ä»¶æ—¶ï¼Œä¸ä¼šè§¦å‘è¿™äº›é’©å­å‡½æ•°ï¼ŒbeforeCreate created beforeMount mounted éƒ½ä¸ä¼šè§¦å‘</p>
<p>â€‹       <strong>1****ã€deactivatedé’©å­ï¼š</strong>ç»„ä»¶è¢«åœç”¨ï¼ˆç¦»å¼€è·¯ç”±ï¼‰æ—¶è°ƒç”¨ã€‚</p>
<p>â€‹       <strong>2****ã€deactivatedé’©å­è°ƒç”¨æ—¶æœº</strong>ï¼šä½¿ç”¨keep-aliveå°±ä¸ä¼šè°ƒç”¨beforeDestroy(ç»„ä»¶é”€æ¯å‰é’©å­)å’Œdestroyed(ç»„ä»¶é”€æ¯)ï¼Œå› ä¸ºç»„ä»¶æ²¡è¢«é”€æ¯ï¼Œè¢«ç¼“å­˜èµ·æ¥äº†ï¼Œè¿™ä¸ªé’©å­å¯ä»¥çœ‹ä½œbeforeDestroyçš„æ›¿ä»£ï¼Œå¦‚æœä½ ç¼“å­˜äº†ç»„ä»¶ï¼Œè¦åœ¨ç»„ä»¶é”€æ¯çš„çš„æ—¶å€™åšä¸€äº›äº‹æƒ…ï¼Œå¯ä»¥æ”¾åœ¨è¿™ä¸ªé’©å­é‡Œï¼Œç»„ä»¶å†…çš„ç¦»å¼€å½“å‰è·¯ç”±é’©å­beforeRouteLeave =&gt; è·¯ç”±å‰ç½®å®ˆå« beforeEach =&gt;å…¨å±€åç½®é’©å­afterEach =&gt; deactivated ç¦»å¼€ç¼“å­˜ç»„ä»¶ =&gt; activated è¿›å…¥ç¼“å­˜ç»„ä»¶(å¦‚æœä½ è¿›å…¥çš„ä¹Ÿæ˜¯ç¼“å­˜è·¯ç”±)</p>
<h3 id="3-è‡ªå®šä¹‰æŒ‡ä»¤-v-checkã€v-focus-çš„æ–¹æ³•æœ‰å“ªäº›-å®ƒæœ‰å“ªäº›é’©å­å‡½æ•°-è¿˜æœ‰å“ªäº›é’©å­å‡½æ•°å‚æ•°-ï¼ˆå¿…ä¼šï¼‰"><a href="#3-è‡ªå®šä¹‰æŒ‡ä»¤-v-checkã€v-focus-çš„æ–¹æ³•æœ‰å“ªäº›-å®ƒæœ‰å“ªäº›é’©å­å‡½æ•°-è¿˜æœ‰å“ªäº›é’©å­å‡½æ•°å‚æ•°-ï¼ˆå¿…ä¼šï¼‰" class="headerlink" title="3. è‡ªå®šä¹‰æŒ‡ä»¤(v-checkã€v-focus)çš„æ–¹æ³•æœ‰å“ªäº›?å®ƒæœ‰å“ªäº›é’©å­å‡½æ•°?è¿˜æœ‰å“ªäº›é’©å­å‡½æ•°å‚æ•°?ï¼ˆå¿…ä¼šï¼‰"></a>3. è‡ªå®šä¹‰æŒ‡ä»¤(v-checkã€v-focus)çš„æ–¹æ³•æœ‰å“ªäº›?å®ƒæœ‰å“ªäº›é’©å­å‡½æ•°?è¿˜æœ‰å“ªäº›é’©å­å‡½æ•°å‚æ•°?ï¼ˆå¿…ä¼šï¼‰</h3><p>â€‹    å…¨å±€å®šä¹‰æŒ‡ä»¤ï¼šåœ¨vueå¯¹è±¡çš„directiveæ–¹æ³•é‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æŒ‡ä»¤åç§°ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯å‡½æ•°ã€‚ç»„ä»¶å†…å®šä¹‰æŒ‡ä»¤ï¼šdirectives</p>
<p>â€‹    é’©å­å‡½æ•°ï¼šbind(ç»‘å®šäº‹ä»¶è§¦å‘)ã€inserted(èŠ‚ç‚¹æ’å…¥çš„æ—¶å€™è§¦å‘)ã€update(ç»„ä»¶å†…ç›¸å…³æ›´æ–°)</p>
<p>â€‹    é’©å­å‡½æ•°å‚æ•°ï¼šelã€binding</p>
<h3 id="4-isè¿™ä¸ªç‰¹æ€§ä½ æœ‰ç”¨è¿‡å—ï¼Ÿä¸»è¦ç”¨åœ¨å“ªäº›æ–¹é¢ï¼Ÿï¼ˆé«˜è–ªå¸¸é—®ï¼‰"><a href="#4-isè¿™ä¸ªç‰¹æ€§ä½ æœ‰ç”¨è¿‡å—ï¼Ÿä¸»è¦ç”¨åœ¨å“ªäº›æ–¹é¢ï¼Ÿï¼ˆé«˜è–ªå¸¸é—®ï¼‰" class="headerlink" title="4. isè¿™ä¸ªç‰¹æ€§ä½ æœ‰ç”¨è¿‡å—ï¼Ÿä¸»è¦ç”¨åœ¨å“ªäº›æ–¹é¢ï¼Ÿï¼ˆé«˜è–ªå¸¸é—®ï¼‰"></a>4. isè¿™ä¸ªç‰¹æ€§ä½ æœ‰ç”¨è¿‡å—ï¼Ÿä¸»è¦ç”¨åœ¨å“ªäº›æ–¹é¢ï¼Ÿï¼ˆé«˜è–ªå¸¸é—®ï¼‰</h3><p><strong>ï‚· 1****ï¼‰åŠ¨æ€ç»„ä»¶</strong></p>
<p>â€‹    <component :is="componentName"></component>ï¼Œ componentNameå¯ä»¥æ˜¯åœ¨æœ¬é¡µé¢å·²ç»æ³¨å†Œçš„å±€éƒ¨ç»„ä»¶åå’Œå…¨å±€ç»„ä»¶å,ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç»„ä»¶çš„é€‰é¡¹å¯¹è±¡ã€‚ å½“æ§åˆ¶componentNameæ”¹å˜æ—¶å°±å¯ä»¥åŠ¨æ€åˆ‡æ¢é€‰æ‹©ç»„ä»¶ã€‚</p>
<p><strong>ï‚·  2****ï¼‰isçš„ç”¨æ³•</strong></p>
<p>â€‹    æœ‰äº›HTMLå…ƒç´ ï¼Œè¯¸å¦‚ </p><ul>ã€<ol>ã€å’Œ<select>ï¼Œå¯¹äºå“ªäº›å…ƒç´ å¯ä»¥å‡ºç°åœ¨å…¶å†…éƒ¨æ˜¯æœ‰ä¸¥æ ¼é™åˆ¶çš„ã€‚</select><table></table></ol></ul><p></p>
<p>â€‹    è€Œæœ‰äº›HTMLå…ƒç´ ï¼Œè¯¸å¦‚ </p><li>ã€ å’Œ <option>ï¼Œåªèƒ½å‡ºç°åœ¨å…¶å®ƒæŸäº›ç‰¹å®šçš„å…ƒç´ å†…éƒ¨ã€‚</option></li><p></p>
<p>â€‹    </p><ul></ul><p></p>
<p>â€‹      <card-list></card-list></p>
<p>â€‹    </p>
<p>â€‹    æ‰€ä»¥ä¸Šé¢<card-list></card-list>ä¼šè¢«ä½œä¸ºæ— æ•ˆçš„å†…å®¹æå‡åˆ°å¤–éƒ¨ï¼Œå¹¶å¯¼è‡´æœ€ç»ˆæ¸²æŸ“ç»“æœå‡ºé”™ã€‚åº”è¯¥è¿™ä¹ˆå†™ï¼š</p>
<p>â€‹    </p><ul></ul><p></p>
<p>â€‹      </p><li is="cardList"></li><p></p>
<p>â€‹     </p>
<h2 id="é™„åŠ ç»ƒä¹ -1-æ³¨å†Œç»„ä»¶å¤ç”¨"><a href="#é™„åŠ ç»ƒä¹ -1-æ³¨å†Œç»„ä»¶å¤ç”¨" class="headerlink" title="é™„åŠ ç»ƒä¹ _1.æ³¨å†Œç»„ä»¶å¤ç”¨"></a>é™„åŠ ç»ƒä¹ _1.æ³¨å†Œç»„ä»¶å¤ç”¨</h2><p>ç›®çš„: å°è£…ä¸€ä¸ªå¤ç”¨çš„ç»„ä»¶, å¯ä»¥åŠ¨æ€çš„æ’å…¥æ ‡ç­¾, æ¥ä½œä¸ºæ³¨å†Œé¡µçš„ä¸€å—é¡¹</p>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%805-%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6_%E6%8F%92%E6%A7%BD_%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/image-20210115194708455.png" alt="image-20210115194708455"></p>
<p>æ­£ç¡®ä»£ç :</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child-com</span> <span class="attr">:title</span>=<span class="string">"'å§“å'"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'text'</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">child-com</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child-com</span> <span class="attr">:title</span>=<span class="string">"'å¯†ç '"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'password'</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">child-com</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child-com</span> <span class="attr">:title</span>=<span class="string">"'æ€§åˆ«'"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'radio'</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"ç”·"</span>/&gt;</span>ç”·</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'radio'</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"å¥³"</span>/&gt;</span>å¥³</span><br><span class="line">    <span class="tag">&lt;/<span class="name">child-com</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child-com</span> <span class="attr">:title</span>=<span class="string">"'çˆ±å¥½'"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'checkbox'</span> <span class="attr">value</span>=<span class="string">"æŠ½çƒŸ"</span> /&gt;</span>æŠ½çƒŸ</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'checkbox'</span> <span class="attr">value</span>=<span class="string">"å–é…’"</span> /&gt;</span>å–é…’</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">'checkbox'</span> <span class="attr">value</span>=<span class="string">"çƒ«å¤´"</span> /&gt;</span>çƒ«å¤´</span><br><span class="line">    <span class="tag">&lt;/<span class="name">child-com</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child-com</span> <span class="attr">:title</span>=<span class="string">"'æ¥è‡ªäº'"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"åŒ—äº¬"</span>&gt;</span>åŒ—äº¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"å¤©æ´¥"</span>&gt;</span>å¤©æ´¥<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"å—äº¬"</span>&gt;</span>å—äº¬<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">child-com</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue/dist/vue.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="handlebars"><span class="xml"></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    new Vue({</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">        el: "#app",</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">        components: {</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">            childCom: { // ç»„ä»¶åå­—</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">                props: {</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">                    title: {</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">                        type: String</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">                    }</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">                },</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">                template: `<span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"border: 1px solid black;"</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><span class="template-variable">{{<span class="name">title</span>}}</span><span class="xml"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">            }</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">        }</span></span></span><br><span class="line"><span class="xml"><span class="handlebars">    })</span></span></span><br><span class="line"><span class="xml"><span class="handlebars"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåº”ç”¨1â€”ç”¨vantå’Œnodeå®ç°ç½‘æ˜“äº‘éŸ³ä¹æ¡ˆä¾‹</title>
    <url>/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<h2 id="æœ¬åœ°æ¥å£é¡¹ç›®éƒ¨ç½²"><a href="#æœ¬åœ°æ¥å£é¡¹ç›®éƒ¨ç½²" class="headerlink" title="æœ¬åœ°æ¥å£é¡¹ç›®éƒ¨ç½²"></a>æœ¬åœ°æ¥å£é¡¹ç›®éƒ¨ç½²</h2></blockquote>
<p>ä¸‹è½½ç½‘æ˜“äº‘éŸ³ä¹nodeæ¥å£é¡¹ç›®, åœ¨æœ¬åœ°å¯åŠ¨, ä¸ºæˆ‘ä»¬vueé¡¹ç›®æä¾›æ•°æ®æ”¯æŒ</p>
<p><a href="https://binaryify.github.io/NeteaseCloudMusicApi/#/?id=%e5%ae%89%e8%a3%85">é¡¹ç›®åœ°å€</a></p>
<p><a href="https://github.com/Binaryify/NeteaseCloudMusicApi/tree/master/docs">å¤‡ç”¨åœ°å€</a></p>
<p>ä¸‹è½½å, å®‰è£…æ‰€æœ‰ä¾èµ–, åœ¨æœ¬åœ°å¯åŠ¨èµ·æ¥, æµ‹è¯•è®¿é—®æ­¤åœ°å€æ˜¯å¦æœ‰æ•°æ®</p>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210328231901220.png" alt="image-20210328231901220"></p>
<blockquote>
<p>æ€»ç»“: å‰ç«¯è¯·æ±‚æœ¬åœ°çš„nodeé¡¹ç›®, nodeæœåŠ¡å™¨ä¼ªè£…è¯·æ±‚å»æ‹¿ç½‘æ˜“äº‘éŸ³ä¹æœåŠ¡å™¨æ•°æ®è½¬å‘å›ç»™è‡ªå·±å‰ç«¯</p>
</blockquote>
<h2 id="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"><a href="#ä»Šæ—¥å­¦ä¹ ç›®æ ‡" class="headerlink" title="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"></a>ä»Šæ—¥å­¦ä¹ ç›®æ ‡</h2><ol>
<li>èƒ½å¤ŸæŒæ¡vantç»„ä»¶åº“çš„ä½¿ç”¨</li>
<li>èƒ½å¤ŸæŒæ¡vantç»„ä»¶è‡ªå®šä¹‰æ ·å¼èƒ½åŠ›</li>
<li>èƒ½å¤ŸæŒæ¡ç»„ä»¶åº“ä½¿ç”¨å’Œæ–‡æ¡£ä½¿ç”¨èƒ½åŠ›</li>
<li>èƒ½å¤Ÿå®Œæˆç½‘æ˜“äº‘éŸ³ä¹æ¡ˆä¾‹</li>
</ol>
<h2 id="1-æ¡ˆä¾‹-ç½‘æ˜“äº‘éŸ³ä¹"><a href="#1-æ¡ˆä¾‹-ç½‘æ˜“äº‘éŸ³ä¹" class="headerlink" title="1. æ¡ˆä¾‹-ç½‘æ˜“äº‘éŸ³ä¹"></a>1. æ¡ˆä¾‹-ç½‘æ˜“äº‘éŸ³ä¹</h2><h3 id="1-0-ç½‘æ˜“äº‘éŸ³ä¹-æœ¬åœ°æ¥å£"><a href="#1-0-ç½‘æ˜“äº‘éŸ³ä¹-æœ¬åœ°æ¥å£" class="headerlink" title="1.0 ç½‘æ˜“äº‘éŸ³ä¹-æœ¬åœ°æ¥å£"></a>1.0 ç½‘æ˜“äº‘éŸ³ä¹-æœ¬åœ°æ¥å£</h3><blockquote>
<p>ç›®çš„: è¯·æ±‚ç½‘æ˜“äº‘éŸ³ä¹æœåŠ¡å™¨APIæ¥å£-è·å–æ•°æ®</p>
</blockquote>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210512135848114.png" alt="image-20210512135848114"></p>
<blockquote>
<p>æ€»ç»“: åå‘ä»£ç†å°±æ˜¯ç”¨æœ¬åœ°å¼€å¯corsçš„æœåŠ¡å™¨å»è½¬å‘è¯·æ±‚æ‹¿åˆ°æ•°æ®</p>
</blockquote>
<h3 id="1-1-ç½‘æ˜“äº‘éŸ³ä¹-æœ¬åœ°æ¥å£å¯åŠ¨"><a href="#1-1-ç½‘æ˜“äº‘éŸ³ä¹-æœ¬åœ°æ¥å£å¯åŠ¨" class="headerlink" title="1.1 ç½‘æ˜“äº‘éŸ³ä¹-æœ¬åœ°æ¥å£å¯åŠ¨"></a>1.1 ç½‘æ˜“äº‘éŸ³ä¹-æœ¬åœ°æ¥å£å¯åŠ¨</h3><blockquote>
<p>ç›®çš„: å¯åŠ¨æœ¬åœ°ç½‘æ˜“äº‘éŸ³ä¹APIæœåŠ¡</p>
</blockquote>
<p>åœ¨ä»Šå¤©çš„ç¬”è®°é“ºå«ä¸­, å¤§å®¶è‡ªå­¦ä¸‹è½½äº†ä¸€ä¸ªé¡¹ç›®å¯åŠ¨å³å¯</p>
<h3 id="1-2-ç½‘æ˜“äº‘éŸ³ä¹-å‰ç«¯é¡¹ç›®åˆå§‹åŒ–"><a href="#1-2-ç½‘æ˜“äº‘éŸ³ä¹-å‰ç«¯é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="1.2 ç½‘æ˜“äº‘éŸ³ä¹-å‰ç«¯é¡¹ç›®åˆå§‹åŒ–"></a>1.2 ç½‘æ˜“äº‘éŸ³ä¹-å‰ç«¯é¡¹ç›®åˆå§‹åŒ–</h3><blockquote>
<p>ç›®æ ‡: åˆå§‹åŒ–é¡¹ç›®, ä¸‹è½½å¿…å¤‡åŒ…, å¼•å…¥åˆå§‹æ–‡ä»¶, é…ç½®æŒ‰éœ€è‡ªåŠ¨å¼•å…¥vant, åˆ›å»ºé¡µé¢ç»„ä»¶</p>
</blockquote>
<ol>
<li><p>åˆå§‹åŒ–å·¥ç¨‹</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">vue create music-demo</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>ä¸‹è½½éœ€è¦çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add axios vant vue-router </span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¼•å…¥ç¬”è®°ä»£ç é‡Œå‡†å¤‡å¥½çš„reset.csså’Œflexible.js - å®ç°æ ·å¼åˆå§‹åŒ–å’Œé€‚é…é—®é¢˜ - å¼•å…¥åˆ°main.js</p>
</li>
<li><p>æœ¬æ¬¡vantä½¿ç”¨<strong>è‡ªåŠ¨æŒ‰éœ€å¼•å…¥</strong>çš„æ–¹å¼</p>
<p>æ–‡æ¡£: <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart">https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add babel-plugin-import  -D</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨babel.config.js - æ·»åŠ æ’ä»¶é…ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">       [<span class="string">'import'</span>, {</span><br><span class="line">           <span class="attr">libraryName</span>: <span class="string">'vant'</span>,</span><br><span class="line">           <span class="attr">libraryDirectory</span>: <span class="string">'es'</span>,</span><br><span class="line">           <span class="attr">style</span>: <span class="literal">true</span></span><br><span class="line">       }, <span class="string">'vant'</span>]</span><br><span class="line">   ]</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-3-ç½‘æ˜“äº‘éŸ³ä¹-éœ€æ±‚åˆ†æ"><a href="#1-3-ç½‘æ˜“äº‘éŸ³ä¹-éœ€æ±‚åˆ†æ" class="headerlink" title="1.3 ç½‘æ˜“äº‘éŸ³ä¹-éœ€æ±‚åˆ†æ"></a>1.3 ç½‘æ˜“äº‘éŸ³ä¹-éœ€æ±‚åˆ†æ</h3><p>æ ¹æ®éœ€æ±‚, åˆ›å»ºè·¯ç”±æ‰€éœ€è¦çš„5ä¸ªé¡µé¢çš„ç»„ä»¶</p>
<p>Layout(å¸ƒå±€, é¡¶éƒ¨å¯¼èˆªå’Œåº•éƒ¨å¯¼èˆª) &gt; äºŒçº§è·¯ç”± Home å’Œ Search</p>
<p>Play</p>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210426212251154.png" alt="image-20210426212251154"></p>
<p>åˆ›å»ºéœ€è¦çš„viewsä¸‹çš„é¡µé¢ç»„ä»¶4ä¸ª</p>
<p>views/Layout/index.vue  - è´Ÿè´£å¸ƒå±€(ä¸Šä¸‹å¯¼èˆª - ä¸­é—´äºŒçº§è·¯ç”±åˆ‡æ¢é¦–é¡µå’Œæœç´¢é¡µé¢)</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/* ä¸­é—´å†…å®¹åŒºåŸŸ - å®¹å™¨æ ·å¼(ç•™å¥½ä¸Šä¸‹å¯¼èˆªæ‰€å ä½ç½®) */</span></span><br><span class="line"><span class="selector-class">.main</span> {</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">46px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>views/Home/index.vue - æ ‡é¢˜å’Œæ­Œåæ ·å¼</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/* æ ‡é¢˜ */</span></span><br><span class="line"><span class="selector-class">.title</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.266667rem</span> <span class="number">0.24rem</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0.24rem</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/* æ¨èæ­Œå• - æ­Œå */</span></span><br><span class="line"><span class="selector-class">.song_name</span> {</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.346667rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0.08rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.266667rem</span>;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box; <span class="comment">/** å¯¹è±¡ä½œä¸ºä¼¸ç¼©ç›’å­æ¨¡å‹æ˜¾ç¤º **/</span></span><br><span class="line">  -webkit-box-orient: vertical; <span class="comment">/** è®¾ç½®æˆ–æ£€ç´¢ä¼¸ç¼©ç›’å¯¹è±¡çš„å­å…ƒç´ çš„æ’åˆ—æ–¹å¼ **/</span></span><br><span class="line">  -webkit-line-clamp: <span class="number">2</span>; <span class="comment">/** æ˜¾ç¤ºçš„è¡Œæ•° **/</span></span><br><span class="line">  <span class="attribute">overflow</span>: hidden; <span class="comment">/** éšè—è¶…å‡ºçš„å†…å®¹ **/</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>views/Search/index.vue</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/* æœç´¢å®¹å™¨çš„æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.search_wrap</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.266667rem</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*çƒ­é—¨æœç´¢æ–‡å­—æ ‡é¢˜æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.hot_title</span> {</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.32rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/* çƒ­æœè¯_å®¹å™¨ */</span></span><br><span class="line"><span class="selector-class">.hot_name_wrap</span> {</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0.266667rem</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/* çƒ­æœè¯_æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.hot_item</span> {</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.853333rem</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0.213333rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.213333rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0.373333rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.373333rem</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">0.853333rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#d3d4da</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.853333rem</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d3d4da</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>views/Play/index.vue - ç›´æ¥ä»é¢„ä¹ èµ„æ–™é‡Œå¤åˆ¶(èŠ‚çœæ—¶é—´) - å¯è‡ªå·±æ‰©å±•é˜…è¯»ä»£ç </p>
<h3 id="1-4-ç½‘æ˜“äº‘éŸ³ä¹-è·¯ç”±å‡†å¤‡"><a href="#1-4-ç½‘æ˜“äº‘éŸ³ä¹-è·¯ç”±å‡†å¤‡" class="headerlink" title="1.4 ç½‘æ˜“äº‘éŸ³ä¹-è·¯ç”±å‡†å¤‡"></a>1.4 ç½‘æ˜“äº‘éŸ³ä¹-è·¯ç”±å‡†å¤‡</h3><blockquote>
<p>ç›®æ ‡: å‡†å¤‡è·¯ç”±é…ç½®, æ˜¾ç¤ºä¸åŒè·¯ç”±é¡µé¢</p>
</blockquote>
<p>router/index.js - å‡†å¤‡è·¯ç”± - ä»¥åŠé»˜è®¤æ˜¾ç¤ºLayout, ç„¶åLayouté»˜è®¤æ˜¾ç¤ºäºŒçº§è·¯ç”±çš„é¦–é¡µ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è·¯ç”±-ç›¸å…³æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'@/views/Layout'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@/views/Home'</span></span><br><span class="line"><span class="keyword">import</span> Search <span class="keyword">from</span> <span class="string">'@/views/Search'</span></span><br><span class="line"><span class="keyword">import</span> Play <span class="keyword">from</span> <span class="string">'@/views/Play'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">'/layout'</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/layout'</span>,</span><br><span class="line">        <span class="attr">component</span>: Layout,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">'/layout/home'</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'home'</span>,</span><br><span class="line">                <span class="attr">component</span>: Home,</span><br><span class="line">                <span class="attr">meta</span>: { <span class="comment">// metaä¿å­˜è·¯ç”±å¯¹è±¡é¢å¤–ä¿¡æ¯çš„</span></span><br><span class="line">                    <span class="attr">title</span>: <span class="string">"é¦–é¡µ"</span></span><br><span class="line">                }</span><br><span class="line">            },</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'search'</span>,</span><br><span class="line">                <span class="attr">component</span>: Search,</span><br><span class="line">                <span class="attr">meta</span>: {</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">"æœç´¢"</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/play'</span>,</span><br><span class="line">        <span class="attr">component</span>: Play</span><br><span class="line">    }</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter({</span><br><span class="line">    routes</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></tbody></table></figure>

<p>main.js - å¼•å…¥è·¯ç”±å¯¹è±¡, æ³¨å†Œåˆ°new Vueä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  router</span><br><span class="line">}).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>App.vueä¸­ç•™å¥½router-viewæ˜¾ç¤ºè·¯ç”±é¡µé¢</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: æŠŠé¡¹ç›®çš„æ¡†æ­å¥½, é€ä¸ªæ”»ç ´</p>
</blockquote>
<h3 id="1-5-ç½‘æ˜“äº‘éŸ³ä¹-Tabbarç»„ä»¶"><a href="#1-5-ç½‘æ˜“äº‘éŸ³ä¹-Tabbarç»„ä»¶" class="headerlink" title="1.5 ç½‘æ˜“äº‘éŸ³ä¹-Tabbarç»„ä»¶"></a>1.5 ç½‘æ˜“äº‘éŸ³ä¹-Tabbarç»„ä»¶</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»åº•éƒ¨å¯¼èˆª, åˆ‡æ¢è·¯ç”±é¡µé¢æ˜¾ç¤º</p>
</blockquote>
<p>æ–‡æ¡£: <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/tabbar">https://vant-contrib.gitee.io/vant/#/zh-CN/tabbar</a></p>
<ol>
<li><p>æ³¨å†ŒTabbarç»„ä»¶, åœ¨main.jsä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { Tabbar, TabbarItem  } <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line">Vue.use(Tabbar);</span><br><span class="line">Vue.use(TabbarItem);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨Layout.vueä¸­ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class="main"&gt;</span><br><span class="line">      &lt;!-- äºŒçº§è·¯ç”±-æŒ‚è½½ç‚¹ --&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;van-tabbar route&gt;</span><br><span class="line">      &lt;van-tabbar-item replace to="/layout/home" icon="home-o"</span><br><span class="line">        &gt;é¦–é¡µ&lt;/van-tabbar-item</span><br><span class="line">      &gt;</span><br><span class="line">      &lt;van-tabbar-item replace to="/layout/search" icon="search"</span><br><span class="line">        &gt;æœç´¢&lt;/van-tabbar-item</span><br><span class="line">      &gt;</span><br><span class="line">    &lt;/van-tabbar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* ä¸­é—´å†…å®¹åŒºåŸŸ - å®¹å™¨æ ·å¼(ç•™å¥½ä¸Šä¸‹å¯¼èˆªæ‰€å ä½ç½®) */</span><br><span class="line">.main {</span><br><span class="line">  padding-top: 46px;</span><br><span class="line">  padding-bottom: 50px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¼€å¯è·¯ç”±æ¨¡å¼ routeå±æ€§, å’Œtoå±æ€§æŒ‡å‘è¦åˆ‡æ¢çš„è·¯ç”±è·¯å¾„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;van-tabbar route&gt;</span><br><span class="line">    &lt;van-tabbar-item icon="home-o" to="/layout/home"</span><br><span class="line">                     &gt;é¦–é¡µ&lt;/van-tabbar-item</span><br><span class="line">        &gt;</span><br><span class="line">    &lt;van-tabbar-item icon="search" to="/layout/search"</span><br><span class="line">                     &gt;æœç´¢&lt;/van-tabbar-item</span><br><span class="line">        &gt;</span><br><span class="line">&lt;/van-tabbar&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p>æ€»ç»“: van-tabbarå¼€å¯route</p>
</blockquote>
<h3 id="1-6-ç½‘æ˜“äº‘éŸ³ä¹-NavBarå¯¼èˆªç»„ä»¶"><a href="#1-6-ç½‘æ˜“äº‘éŸ³ä¹-NavBarå¯¼èˆªç»„ä»¶" class="headerlink" title="1.6 ç½‘æ˜“äº‘éŸ³ä¹-NavBarå¯¼èˆªç»„ä»¶"></a>1.6 ç½‘æ˜“äº‘éŸ³ä¹-NavBarå¯¼èˆªç»„ä»¶</h3><blockquote>
<p>ç›®æ ‡: å®ç°é¡¶éƒ¨æ ‡é¢˜å±•ç¤º</p>
</blockquote>
<p>æ–‡æ¡£: <a href="https://vant-contrib.gitee.io/vant/#/zh-CN/nav-bar">https://vant-contrib.gitee.io/vant/#/zh-CN/nav-bar</a></p>
<ol>
<li><p>main.js - æ³¨å†ŒNavBarç»„ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { NavBar } <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line">Vue.use(NavBar);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å¤åˆ¶æ–‡æ¡£é‡Œçš„, ç„¶ååˆ åˆ åªç•™æ ‡é¢˜</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;van-nav-bar :title="activeTitle" fixed /&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default {</span><br><span class="line">        activeTitle: "é¦–é¡µ"</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-7-ç½‘æ˜“äº‘éŸ³ä¹-NavBaræ ‡é¢˜åˆ‡æ¢"><a href="#1-7-ç½‘æ˜“äº‘éŸ³ä¹-NavBaræ ‡é¢˜åˆ‡æ¢" class="headerlink" title="1.7 ç½‘æ˜“äº‘éŸ³ä¹-NavBaræ ‡é¢˜åˆ‡æ¢"></a>1.7 ç½‘æ˜“äº‘éŸ³ä¹-NavBaræ ‡é¢˜åˆ‡æ¢</h3><blockquote>
<p>ç›®æ ‡: å®ç°ç‚¹å‡»åº•éƒ¨å¯¼èˆª/åˆ·æ–°éç¬¬ä¸€é¡µé¢é¡µé¢, å¯¼èˆªæ ‡é¢˜æ­£ç¡®æ˜¾ç¤º</p>
</blockquote>
<ul>
<li><p>åœ¨router/index.js - ç»™$routeé‡Œéœ€è¦å¯¼èˆªæ ‡é¢˜çš„æ·»åŠ metaå…ƒä¿¡æ¯å±æ€§</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/layout'</span>,</span><br><span class="line">        <span class="attr">component</span>: Layout,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">'/layout/home'</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'home'</span>,</span><br><span class="line">                <span class="attr">component</span>: Home,</span><br><span class="line">                <span class="attr">meta</span>: { <span class="comment">// metaä¿å­˜è·¯ç”±å¯¹è±¡é¢å¤–ä¿¡æ¯çš„</span></span><br><span class="line">                    <span class="attr">title</span>: <span class="string">"é¦–é¡µ"</span></span><br><span class="line">                }</span><br><span class="line">            },</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'search'</span>,</span><br><span class="line">                <span class="attr">component</span>: Search,</span><br><span class="line">                <span class="attr">meta</span>: {</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">"æœç´¢"</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">    },</span><br></pre></td></tr></tbody></table></figure>

<p>Layout.vueä¸­ç›‘å¬$routeæ”¹å˜:</p>
<p>ç»™å¯¼èˆªactiveçš„å€¼è®¾ç½®$routeé‡Œçš„å…ƒä¿¡æ¯çš„æ ‡é¢˜</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">activeTitle</span>: <span class="built_in">this</span>.$route.meta.title, <span class="comment">// "é»˜è®¤"é¡¶éƒ¨å¯¼èˆªè¦æ˜¾ç¤ºçš„æ ‡é¢˜ (é»˜è®¤è·å–å½“å‰è·¯ç”±å¯¹è±¡é‡Œçš„metaä¸­titleå€¼)</span></span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// è·¯ç”±åˆ‡æ¢ - ä¾¦å¬$routeå¯¹è±¡æ”¹å˜</span></span><br><span class="line">  <span class="attr">watch</span>: {</span><br><span class="line">    $route() {</span><br><span class="line">      <span class="built_in">this</span>.activeTitle = <span class="built_in">this</span>.$route.meta.title; <span class="comment">// æå–åˆ‡æ¢åè·¯ç”±ä¿¡æ¯å¯¹è±¡é‡Œçš„titleæ˜¾ç¤º</span></span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<blockquote>
<p>æ€»ç»“: ç‚¹å‡»åº•éƒ¨å¯¼èˆªå’Œåˆ·æ–°å½“å‰ç½‘é¡µ, éƒ½èƒ½ä¿è¯å¯¼èˆªæ ‡é¢˜çš„æ­£ç¡®æ˜¾ç¤º</p>
</blockquote>
<h3 id="1-8-ç½‘æ˜“äº‘éŸ³ä¹-ç½‘ç»œè¯·æ±‚å°è£…"><a href="#1-8-ç½‘æ˜“äº‘éŸ³ä¹-ç½‘ç»œè¯·æ±‚å°è£…" class="headerlink" title="1.8 ç½‘æ˜“äº‘éŸ³ä¹-ç½‘ç»œè¯·æ±‚å°è£…"></a>1.8 ç½‘æ˜“äº‘éŸ³ä¹-ç½‘ç»œè¯·æ±‚å°è£…</h3><blockquote>
<p>ç›®æ ‡: ä¸æƒ³æŠŠç½‘ç»œè¯·æ±‚æ•£è½åœ¨å„ä¸ªé€»è¾‘é¡µé¢é‡Œ, ä¸ç„¶ä»¥åæ‰¾èµ·æ¥æ”¹èµ·æ¥å¾ˆéº»çƒ¦</p>
</blockquote>
<ol>
<li><p>å°è£…utils/request.js - åŸºäºaxiosè¿›è¡ŒäºŒæ¬¡å°è£… - è®¾ç½®åŸºç¡€åœ°å€</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç½‘ç»œè¯·æ±‚ - äºŒæ¬¡å°è£…</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">"http://localhost:3000"</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å°è£…src/api/Home.js</p>
<p>ç»Ÿä¸€å°è£…ç½‘ç»œè¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶å-å°½é‡å’Œæ¨¡å—é¡µé¢æ–‡ä»¶åç»Ÿä¸€(æ–¹ä¾¿æŸ¥æ‰¾)</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é¦–é¡µ - æ¨èæ­Œå•</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> recommendMusic = <span class="function"><span class="params">params</span> =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/personalized'</span>,</span><br><span class="line">    params</span><br><span class="line">    <span class="comment">// å°†æ¥å¤–é¢å¯èƒ½ä¼ å…¥paramsçš„å€¼ {limit: 20}</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨src/api/index.js - ç»Ÿä¸€å¯¼å‡ºæ¥å£ä¾›å¤–éƒ¨ä½¿ç”¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// apiæ–‡ä»¶å¤¹ä¸‹ å„ä¸ªè¯·æ±‚æ¨¡å—js, éƒ½ç»Ÿä¸€æ¥åˆ°index.jså†å‘å¤–å¯¼å‡º</span></span><br><span class="line"><span class="keyword">import</span> {recommendMusic} <span class="keyword">from</span> <span class="string">'./Home'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> recommendMusicAPI = recommendMusic <span class="comment">// è¯·æ±‚æ¨èæ­Œå•çš„æ–¹æ³•å¯¼å‡º</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨main.js - æµ‹è¯•ä½¿ç”¨ä¸€ä¸‹.</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { recommendMusicAPI } <span class="keyword">from</span> <span class="string">'@/api/index'</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">myFn</span>(<span class="params"></span>)</span>{</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> recommendMusicAPI({<span class="attr">limit</span>: <span class="number">6</span>});</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">}</span><br><span class="line">myFn();</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p> æ€»ç»“: å°è£…ç½‘ç»œè¯·æ±‚æ–¹æ³•ç›®çš„, æ–¹ä¾¿æˆ‘ä»¬ç»Ÿä¸€ç®¡ç†</p>
</blockquote>
<h3 id="1-9-ç½‘æ˜“äº‘éŸ³ä¹-é¦–é¡µ-æ¨èæ­Œå•"><a href="#1-9-ç½‘æ˜“äº‘éŸ³ä¹-é¦–é¡µ-æ¨èæ­Œå•" class="headerlink" title="1.9 ç½‘æ˜“äº‘éŸ³ä¹-é¦–é¡µ-æ¨èæ­Œå•"></a>1.9 ç½‘æ˜“äº‘éŸ³ä¹-é¦–é¡µ-æ¨èæ­Œå•</h3><p>æ¥å£åœ°å€: /personalized</p>
<ol>
<li><p>å¸ƒå±€é‡‡ç”¨van-rowå’Œvan-col </p>
<p>å¸ƒå±€æ–‡æ¡£<a href="https://vant-contrib.gitee.io/vant/#/zh-CN/col">https://vant-contrib.gitee.io/vant/#/zh-CN/col</a></p>
</li>
<li><p>ä½¿ç”¨vantå†…ç½®çš„å›¾ç‰‡ç»„ä»¶æ¥æ˜¾ç¤ºå›¾ç‰‡</p>
</li>
<li><p>åœ¨main.jsæ³¨å†Œä½¿ç”¨çš„ç»„ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { Col, Row, Image <span class="keyword">as</span> VanImage } <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Col);</span><br><span class="line">Vue.use(Row);</span><br><span class="line">Vue.use(VanImage);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åœ¨api/index.jsä¸‹å®šä¹‰æ¨èæ­Œå•çš„æ¥å£æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// é¦–é¡µ - æ¨èæ­Œå•</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> recommendMusic = <span class="function"><span class="params">params</span> =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/personalized'</span>,</span><br><span class="line">    params</span><br><span class="line">    <span class="comment">// å°†æ¥å¤–é¢å¯èƒ½ä¼ å…¥paramsçš„å€¼ {limit: 20}</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>æŠŠæ•°æ®è¯·æ±‚å›æ¥, ç”¨van-imageå’Œpæ ‡ç­¾å±•ç¤ºæ¨èæ­Œå•å’Œæ­Œå•åå­—</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">   &lt;p class="title"&gt;æ¨èæ­Œå•&lt;/p&gt;</span><br><span class="line">    &lt;van-row gutter="6"&gt;</span><br><span class="line">      &lt;van-col span="8" v-for="obj in reList" :key="obj.id"&gt;</span><br><span class="line">        &lt;van-image width="100%" height="3rem" fit="cover" :src="obj.picUrl" /&gt;</span><br><span class="line">        &lt;p class="song_name"&gt;{{ obj.name }}&lt;/p&gt;</span><br><span class="line">      &lt;/van-col&gt;</span><br><span class="line">    &lt;/van-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { recommendMusicAPI } from "@/api";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">       reList: [], // æ¨èæ­Œå•æ•°æ®</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  async created() {</span><br><span class="line">    const res = await recommendMusicAPI({</span><br><span class="line">      limit: 6,</span><br><span class="line">    });</span><br><span class="line">    console.log(res);</span><br><span class="line">    this.reList = res.data.result;</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-10-ç½‘æ˜“äº‘éŸ³ä¹-é¦–é¡µ-æœ€æ–°éŸ³ä¹"><a href="#1-10-ç½‘æ˜“äº‘éŸ³ä¹-é¦–é¡µ-æœ€æ–°éŸ³ä¹" class="headerlink" title="1.10 ç½‘æ˜“äº‘éŸ³ä¹- é¦–é¡µ-æœ€æ–°éŸ³ä¹"></a>1.10 ç½‘æ˜“äº‘éŸ³ä¹- é¦–é¡µ-æœ€æ–°éŸ³ä¹</h3><blockquote>
<p>ç›®æ ‡: van-cellå•å…ƒæ ¼ä½¿ç”¨</p>
</blockquote>
<p>è¯·æ±‚åœ°å€: /personalized/newsong</p>
<ol>
<li><p>å¼•å…¥van-cellä½¿ç”¨ - æ³¨å†Œç»„ä»¶main.jsä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> {Cell} <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line">Vue.use(Cell);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>å®šä¹‰æ¥å£è¯·æ±‚æ–¹æ³• - api/index.js</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// é¦–é¡µ - æ¨èæœ€æ–°éŸ³ä¹</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> newMusic = <span class="function"><span class="params">params</span> =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/personalized/newsong"</span>,</span><br><span class="line">    params</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>åˆ—è¡¨æ•°æ®é“ºè®¾ - æ’å…¥è‡ªå®šä¹‰æ ‡ç­¾</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p class="title"&gt;æ¨èæ­Œå•&lt;/p&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;van-row gutter="5"&gt;</span><br><span class="line">        &lt;van-col span="8" v-for="obj in recommendList" :key="obj.id"&gt;</span><br><span class="line">          &lt;van-image fit="cover" :src="obj.picUrl" /&gt;</span><br><span class="line">          &lt;p class="song_name"&gt;{{ obj.name }}&lt;/p&gt;</span><br><span class="line">        &lt;/van-col&gt;</span><br><span class="line">      &lt;/van-row&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;p class="title"&gt;æœ€æ–°éŸ³ä¹&lt;/p&gt;</span><br><span class="line">    &lt;van-cell center v-for="obj in songList" :key="obj.id" :title="obj.name" :label="obj.song.artists[0].name + ' - ' + obj.name"&gt;</span><br><span class="line">        &lt;template #right-icon&gt;</span><br><span class="line">          &lt;van-icon name="play-circle-o" size="0.6rem"/&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/van-cell&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { recommendMusicAPI, newMusicAPI } from "@/api";</span><br><span class="line">export default {</span><br><span class="line">   data() {</span><br><span class="line">    return {</span><br><span class="line">      reList: [], // æ¨èæ­Œå•æ•°æ®</span><br><span class="line">      songList: [], // æœ€æ–°éŸ³ä¹æ•°æ®</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  async created() {</span><br><span class="line">    const res = await recommendMusicAPI({</span><br><span class="line">      limit: 6,</span><br><span class="line">    });</span><br><span class="line">    console.log(res);</span><br><span class="line">    this.reList = res.data.result;</span><br><span class="line"></span><br><span class="line">    const res2 = await newMusicAPI({</span><br><span class="line">      limit: 20</span><br><span class="line">    })</span><br><span class="line">    console.log(res2);</span><br><span class="line">    this.songList = res2.data.result</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-11-ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢-çƒ­æœå…³é”®å­—"><a href="#1-11-ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢-çƒ­æœå…³é”®å­—" class="headerlink" title="1.11 ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢-çƒ­æœå…³é”®å­—"></a>1.11 ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢-çƒ­æœå…³é”®å­—</h3><blockquote>
<p>ç›®æ ‡: å®Œæˆçƒ­æœå…³é”®å­—é“ºè®¾</p>
</blockquote>
<p>æœç´¢æ¡† â€“ van-searchç»„ä»¶</p>
<p>api/Search.js â€“ çƒ­æœå…³é”®å­— - æ¥å£æ–¹æ³•</p>
<p>Search/index.vueå¼•å…¥-è·å–çƒ­æœå…³é”®å­— - é“ºè®¾é¡µé¢</p>
<p>ç‚¹å‡»æ–‡å­—å¡«å……åˆ°è¾“å…¥æ¡†</p>
<ol>
<li>å‡†å¤‡æœç´¢ç•Œé¢æ ‡ç­¾</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-search</span><br><span class="line">      shape="round"</span><br><span class="line">      placeholder="è¯·è¾“å…¥æœç´¢å…³é”®è¯"</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;!-- æœç´¢ä¸‹å®¹å™¨ --&gt;</span><br><span class="line">    &lt;div class="search_wrap"&gt;</span><br><span class="line">      &lt;!-- æ ‡é¢˜ --&gt;</span><br><span class="line">      &lt;p class="hot_title"&gt;çƒ­é—¨æœç´¢&lt;/p&gt;</span><br><span class="line">      &lt;!-- çƒ­æœå…³é”®è¯å®¹å™¨ --&gt;</span><br><span class="line">      &lt;div class="hot_name_wrap"&gt;</span><br><span class="line">        &lt;!-- æ¯ä¸ªæœç´¢å…³é”®è¯ --&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          class="hot_item"</span><br><span class="line">          &gt;çƒ­æœå…³é”®å­—&lt;/span</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* æœç´¢å®¹å™¨çš„æ ·å¼ */</span><br><span class="line">.search_wrap {</span><br><span class="line">  padding: 0.266667rem;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/*çƒ­é—¨æœç´¢æ–‡å­—æ ‡é¢˜æ ·å¼ */</span><br><span class="line">.hot_title {</span><br><span class="line">  font-size: 0.32rem;</span><br><span class="line">  color: #666;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/* çƒ­æœè¯_å®¹å™¨ */</span><br><span class="line">.hot_name_wrap {</span><br><span class="line">  margin: 0.266667rem 0;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/* çƒ­æœè¯_æ ·å¼ */</span><br><span class="line">.hot_item {</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: 0.853333rem;</span><br><span class="line">  margin-right: 0.213333rem;</span><br><span class="line">  margin-bottom: 0.213333rem;</span><br><span class="line">  padding: 0 0.373333rem;</span><br><span class="line">  font-size: 0.373333rem;</span><br><span class="line">  line-height: 0.853333rem;</span><br><span class="line">  color: #333;</span><br><span class="line">  border-color: #d3d4da;</span><br><span class="line">  border-radius: 0.853333rem;</span><br><span class="line">  border: 1px solid #d3d4da;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/* ç»™å•å…ƒæ ¼è®¾ç½®åº•éƒ¨è¾¹æ¡† */</span><br><span class="line">.van-cell {</span><br><span class="line">  border-bottom: 1px solid lightgray;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>api/Search.js - å®šä¹‰çƒ­é—¨æœç´¢æ¥å£æ–¹æ³•å’Œæœç´¢ç»“æœæ–¹æ³•</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çƒ­æœå…³é”®å­—</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hotSearch = <span class="function">() =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/search/hot'</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// æœç´¢ç»“æœåˆ—è¡¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> searchResult = <span class="function"><span class="params">params</span> =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/cloudsearch'</span>,</span><br><span class="line">    params</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>api/index.js - å¯¼å…¥ä½¿ç”¨å¹¶ç»Ÿä¸€å¯¼å‡º</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç»Ÿä¸€å‡ºå£</span></span><br><span class="line"><span class="comment">// ä½ ä¹Ÿå¯ä»¥åœ¨é€»è¾‘é¡µé¢é‡Œ.vueä¸­ç›´æ¥å¼•å…¥@/api/Homeä¸‹çš„ç½‘ç»œè¯·æ±‚å·¥å…·æ–¹æ³•</span></span><br><span class="line"><span class="comment">// ä¸ºä»€ä¹ˆ: æˆ‘ä»¬å¯ä»¥æŠŠapiæ‰€æœ‰çš„æ–¹æ³•éƒ½ç»Ÿä¸€åˆ°ä¸€å¤„. </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> {recommendMusic, hotMusic} <span class="keyword">from</span> <span class="string">'@/api/Home'</span></span><br><span class="line"><span class="keyword">import</span> {hotSearch, searchResult} <span class="keyword">from</span> <span class="string">'@/api/Search'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> recommendMusicAPI = recommendMusic <span class="comment">// æŠŠç½‘ç»œè¯·æ±‚æ–¹æ³•æ‹¿è¿‡æ¥ å¯¼å‡º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hotMusicAPI = hotMusic <span class="comment">// æŠŠè·å–æœ€æ–°éŸ³ä¹çš„, ç½‘ç»œè¯·æ±‚æ–¹æ³•å¯¼å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hotSearchAPI = hotSearch <span class="comment">// çƒ­æœ</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> searchResultAPI = searchResult <span class="comment">// æœç´¢ç»“æœ</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li>createdä¸­è¯·æ±‚æ¥å£-æ‹¿åˆ°çƒ­æœå…³é”®è¯åˆ—è¡¨</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!-- æ¯ä¸ªæœç´¢å…³é”®è¯ --&gt;</span><br><span class="line">&lt;span</span><br><span class="line">      class="hot_item"</span><br><span class="line">      v-for="(obj, index) in hotArr"</span><br><span class="line">      :key="index"</span><br><span class="line">      &gt;{{ obj.first }}&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // ç›®æ ‡: é“ºè®¾çƒ­æœå…³é”®å­—</span><br><span class="line">    // 1. æœç´¢æ¡†van-searchç»„ä»¶, å…³é”®è¯æ ‡ç­¾å’Œæ ·å¼</span><br><span class="line">    // 2. æ‰¾æ¥å£, api/Search.jsé‡Œå®šä¹‰è·å–æœç´¢å…³é”®è¯çš„è¯·æ±‚æ–¹æ³•</span><br><span class="line">    // 3. å¼•å…¥åˆ°å½“å‰é¡µé¢, è°ƒç”¨æ¥å£æ‹¿åˆ°æ•°æ®å¾ªç¯é“ºè®¾é¡µé¢</span><br><span class="line">    // 4. ç‚¹å‡»å…³é”®è¯æŠŠå€¼èµ‹äºˆç»™van-searchçš„v-modelå˜é‡</span><br><span class="line">    import { hotSearchAPI } from "@/api";</span><br><span class="line">    export default {</span><br><span class="line">        data(){</span><br><span class="line">            return {</span><br><span class="line">                hotArr: [], // çƒ­æœå…³é”®å­—</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        async created() {</span><br><span class="line">            const res = await hotSearchAPI();</span><br><span class="line">            console.log(res);</span><br><span class="line">            this.hotArr = res.data.result.hots;</span><br><span class="line">        },</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="5">
<li>ç‚¹å‡»çƒ­è¯å¡«å……åˆ°è¾“å…¥æ¡†</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;van-search</span><br><span class="line">            shape="round"</span><br><span class="line">            v-model="value"</span><br><span class="line">            placeholder="è¯·è¾“å…¥æœç´¢å…³é”®è¯"</span><br><span class="line">            /&gt;</span><br><span class="line">&lt;!-- æ¯ä¸ªæœç´¢å…³é”®è¯ --&gt;</span><br><span class="line">&lt;span</span><br><span class="line">      class="hot_item"</span><br><span class="line">      v-for="(obj, index) in hotArr"</span><br><span class="line">      :key="index"</span><br><span class="line">      @click="fn(obj.first)"</span><br><span class="line">      &gt;{{ obj.first }}&lt;/span</span><br><span class="line">    &gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default {</span><br><span class="line">        data(){</span><br><span class="line">            return {</span><br><span class="line">                value: "",</span><br><span class="line">                hotArr: [], // çƒ­æœå…³é”®å­—</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        // ...çœç•¥äº†created</span><br><span class="line">        methods: {</span><br><span class="line">            async fn(val) {</span><br><span class="line">                // ç‚¹å‡»çƒ­æœå…³é”®è¯</span><br><span class="line">                this.value = val; // é€‰ä¸­çš„å…³é”®è¯æ˜¾ç¤ºåˆ°æœç´¢æ¡†</span><br><span class="line">            },</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: å†™å¥½æ ‡ç­¾å’Œæ ·å¼, æ‹¿åˆ°æ•°æ®å¾ªç¯é“ºè®¾, ç‚¹å‡»å…³é”®è¯å¡«å…¥åˆ°van-searchä¸­</p>
</blockquote>
<h3 id="1-12-ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢-ç‚¹å‡»çƒ­è¯-æœç´¢ç»“æœ"><a href="#1-12-ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢-ç‚¹å‡»çƒ­è¯-æœç´¢ç»“æœ" class="headerlink" title="1.12 ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢-ç‚¹å‡»çƒ­è¯-æœç´¢ç»“æœ"></a>1.12 ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢-ç‚¹å‡»çƒ­è¯-æœç´¢ç»“æœ</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»çƒ­è¯å¡«å……åˆ°è¾“å…¥æ¡†-å‡ºæœç´¢ç»“æœ</p>
</blockquote>
<p>api/Search.js - æœç´¢ç»“æœ, æ¥å£æ–¹æ³•</p>
<p>Search/index.vueå¼•å…¥-è·å–æœç´¢ç»“æœ - é“ºè®¾é¡µé¢</p>
<p>å’Œçƒ­æœå…³é”®å­—å®¹å™¨ â€“ äº’æ–¥æ˜¾ç¤º</p>
<p>ç‚¹å‡»æ–‡å­—å¡«å……åˆ°è¾“å…¥æ¡†, è¯·æ±‚æœç´¢ç»“æœé“ºè®¾</p>
<ol>
<li>æœç´¢ç»“æœæ˜¾ç¤ºåŒºåŸŸæ ‡ç­¾+æ ·å¼(ç›´æ¥å¤åˆ¶/vantæ–‡æ¡£æ‰¾)</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æœç´¢ç»“æœ --&gt;</span><br><span class="line">    &lt;div class="search_wrap"&gt;</span><br><span class="line">      &lt;!-- æ ‡é¢˜ --&gt;</span><br><span class="line">      &lt;p class="hot_title"&gt;æœ€ä½³åŒ¹é…&lt;/p&gt;</span><br><span class="line">      &lt;van-cell</span><br><span class="line">        center</span><br><span class="line">        title='ç»“æœåå­—'</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template #right-icon&gt;</span><br><span class="line">          &lt;van-icon name="play-circle-o" size="0.6rem"/&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>ç‚¹å‡» - è·å–æœç´¢ç»“æœ - å¾ªç¯é“ºè®¾é¡µé¢</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-search shape="round" v-model="value" placeholder="è¯·è¾“å…¥æœç´¢å…³é”®è¯" /&gt;</span><br><span class="line">    &lt;!-- æœç´¢ä¸‹å®¹å™¨ --&gt;</span><br><span class="line">    &lt;div class="search_wrap"&gt;</span><br><span class="line">      &lt;!-- æ ‡é¢˜ --&gt;</span><br><span class="line">      &lt;p class="hot_title"&gt;çƒ­é—¨æœç´¢&lt;/p&gt;</span><br><span class="line">      &lt;!-- çƒ­æœå…³é”®è¯å®¹å™¨ --&gt;</span><br><span class="line">      &lt;div class="hot_name_wrap"&gt;</span><br><span class="line">        &lt;!-- æ¯ä¸ªæœç´¢å…³é”®è¯ --&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          class="hot_item"</span><br><span class="line">          v-for="(obj, index) in hotArr"</span><br><span class="line">          :key="index"</span><br><span class="line">          @click="fn(obj.first)"</span><br><span class="line">          &gt;{{ obj.first }}&lt;/span</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- æœç´¢ç»“æœ --&gt;</span><br><span class="line">    &lt;div class="search_wrap"&gt;</span><br><span class="line">      &lt;!-- æ ‡é¢˜ --&gt;</span><br><span class="line">      &lt;p class="hot_title"&gt;æœ€ä½³åŒ¹é…&lt;/p&gt;</span><br><span class="line">      &lt;van-cell</span><br><span class="line">        center</span><br><span class="line">        v-for="obj in resultList"</span><br><span class="line">        :key="obj.id"</span><br><span class="line">        :title="obj.name"</span><br><span class="line">        :label="obj.ar[0].name + ' - ' + obj.name"</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template #right-icon&gt;</span><br><span class="line">          &lt;van-icon name="play-circle-o" size="0.6rem"/&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: é“ºè®¾çƒ­æœå…³é”®å­—</span><br><span class="line">// 1. æœç´¢æ¡†van-searchç»„ä»¶, å…³é”®è¯æ ‡ç­¾å’Œæ ·å¼</span><br><span class="line">// 2. æ‰¾æ¥å£, api/Search.jsé‡Œå®šä¹‰è·å–æœç´¢å…³é”®è¯çš„è¯·æ±‚æ–¹æ³•</span><br><span class="line">// 3. å¼•å…¥åˆ°å½“å‰é¡µé¢, è°ƒç”¨æ¥å£æ‹¿åˆ°æ•°æ®å¾ªç¯é“ºè®¾é¡µé¢</span><br><span class="line">// 4. ç‚¹å‡»å…³é”®è¯æŠŠå€¼èµ‹äºˆç»™van-searchçš„v-modelå˜é‡</span><br><span class="line"></span><br><span class="line">// ç›®æ ‡: é“ºè®¾æœç´¢ç»“æœ</span><br><span class="line">// 1. æ‰¾åˆ°æœç´¢ç»“æœçš„æ¥å£ - api/Search.jså®šä¹‰è¯·æ±‚æ–¹æ³•</span><br><span class="line">// 2. å†å®šä¹‰methodsé‡ŒgetListFnæ–¹æ³•(è·å–æ•°æ®)</span><br><span class="line">// 3. åœ¨ç‚¹å‡»äº‹ä»¶æ–¹æ³•é‡Œè°ƒç”¨getListFnæ–¹æ³•æ‹¿åˆ°æœç´¢ç»“æœæ•°æ®</span><br><span class="line">// 4. é“ºè®¾é¡µé¢(é¦–é¡µvan-cellæ ‡ç­¾å¤åˆ¶è¿‡æ¥)</span><br><span class="line">// 5. æŠŠæ•°æ®ä¿å­˜åˆ°dataå, å¾ªç¯van-cellä½¿ç”¨å³å¯(åˆ‡æ¢æ­Œæ‰‹å­—æ®µ)</span><br><span class="line">// 6. äº’æ–¥æ˜¾ç¤ºæœç´¢ç»“æœå’Œçƒ­æœå…³é”®è¯</span><br><span class="line">import { hotSearchAPI, searchResultListAPI } from "@/api";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      value: "",</span><br><span class="line">      hotArr: [], // çƒ­æœå…³é”®å­—</span><br><span class="line">      resultList: [], // æœç´¢ç»“æœ</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  async created() {</span><br><span class="line">    const res = await hotSearchAPI();</span><br><span class="line">    console.log(res);</span><br><span class="line">    this.hotArr = res.data.result.hots;</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    async getListFn() {</span><br><span class="line">      return await searchResultListAPI({</span><br><span class="line">        keywords: this.value,</span><br><span class="line">        limit: 20,</span><br><span class="line">      }); // æŠŠæœç´¢ç»“æœreturnå‡ºå»</span><br><span class="line">      // (éš¾ç‚¹):</span><br><span class="line">      // asyncä¿®é¥°çš„å‡½æ•° -&gt; é»˜è®¤è¿”å›ä¸€ä¸ªå…¨æ–°Promiseå¯¹è±¡</span><br><span class="line">      // è¿™ä¸ªPromiseå¯¹è±¡çš„ç»“æœå°±æ˜¯asyncå‡½æ•°å†…returnçš„å€¼</span><br><span class="line">      // æ‹¿åˆ°getListFnçš„è¿”å›å€¼ç”¨awaitæå–ç»“æœ</span><br><span class="line">    },</span><br><span class="line">    async fn(val) {</span><br><span class="line">      // ç‚¹å‡»çƒ­æœå…³é”®è¯</span><br><span class="line">      this.value = val; // é€‰ä¸­çš„å…³é”®è¯æ˜¾ç¤ºåˆ°æœç´¢æ¡†</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.resultList = res.data.result.songs;</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>äº’æ–¥æ˜¾ç¤º, çƒ­æœå…³é”®è¯å’Œæœç´¢ç»“æœåˆ—è¡¨</li>
</ol>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210512142504929.png" alt="image-20210512142504929"></p>
<blockquote>
<p>æ€»ç»“: ç‚¹å‡»çƒ­è¯å, è°ƒç”¨æ¥å£ä¼ å…¥å…³é”®è¯, è¿”å›æ•°æ®é“ºè®¾</p>
</blockquote>
<h3 id="1-13-ç½‘æ˜“äº‘éŸ³ä¹-è¾“å…¥æ¡†-æœç´¢ç»“æœ"><a href="#1-13-ç½‘æ˜“äº‘éŸ³ä¹-è¾“å…¥æ¡†-æœç´¢ç»“æœ" class="headerlink" title="1.13 ç½‘æ˜“äº‘éŸ³ä¹-è¾“å…¥æ¡†-æœç´¢ç»“æœ"></a>1.13 ç½‘æ˜“äº‘éŸ³ä¹-è¾“å…¥æ¡†-æœç´¢ç»“æœ</h3><blockquote>
<p>ç›®æ ‡: ç›‘æµ‹è¾“å…¥æ¡†æ”¹å˜-æ‹¿åˆ°æœç´¢ç»“æœ</p>
</blockquote>
<p>è§‚å¯Ÿvan-searchç»„ä»¶æ˜¯å¦æ”¯æŒå’Œå®ç°inputäº‹ä»¶</p>
<p>ç»‘å®š@inputäº‹ä»¶å’Œæ–¹æ³•</p>
<p>åœ¨äº‹ä»¶å¤„ç†æ–¹æ³•ä¸­è·å–å¯¹åº”çš„å€¼ä½¿ç”¨</p>
<p>å¦‚æœæœç´¢ä¸å­˜åœ¨çš„æ•°æ®-è¦æ³¨æ„æ¥å£è¿”å›å­—æ®µä¸åŒ</p>
<ol>
<li>ç»‘å®š@inputäº‹ä»¶åœ¨van-searchä¸Š</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;van-search shape="round" v-model="value" placeholder="è¯·è¾“å…¥æœç´¢å…³é”®è¯" @input="inputFn"/&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>å®ç°è¾“å…¥æ¡†æ”¹å˜ - è·å–æœç´¢ç»“æœé“ºè®¾</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">inputFn</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">// è¾“å…¥æ¡†å€¼æ”¹å˜</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.value.length === <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">// æœç´¢å…³é”®è¯å¦‚æœæ²¡æœ‰, å°±æŠŠæœç´¢ç»“æœæ¸…ç©ºé˜»æ­¢ç½‘ç»œè¯·æ±‚å‘é€(æå‰return)</span></span><br><span class="line">        <span class="built_in">this</span>.resultList = [];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="built_in">this</span>.getListFn();</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">    <span class="comment">// å¦‚æœæœç´¢ç»“æœå“åº”æ•°æ®æ²¡æœ‰songså­—æ®µ-æ— æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (res.data.result.songs === <span class="literal">undefined</span>) {</span><br><span class="line">        <span class="built_in">this</span>.resultList = [];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">this</span>.resultList = res.data.result.songs;</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ç›‘æµ‹è¾“å…¥æ¡†æ”¹å˜-ä¿å­˜æ–°çš„å…³é”®è¯å»è¯·æ±‚ç»“æœå›æ¥é“ºè®¾</p>
</blockquote>
<h3 id="1-14-ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢ç»“æœ-åŠ è½½æ›´å¤š"><a href="#1-14-ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢ç»“æœ-åŠ è½½æ›´å¤š" class="headerlink" title="1.14 ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢ç»“æœ-åŠ è½½æ›´å¤š"></a>1.14 ç½‘æ˜“äº‘éŸ³ä¹-æœç´¢ç»“æœ-åŠ è½½æ›´å¤š</h3><blockquote>
<p>ç›®æ ‡: è§¦åº•å, åŠ è½½ä¸‹ä¸€é¡µæ•°æ®</p>
</blockquote>
<p>è§‚å¯Ÿæ¥å£æ–‡æ¡£: å‘ç°éœ€è¦ä¼ å…¥offsetå’Œåˆ†é¡µå…¬å¼</p>
<p>van-listç»„ä»¶ç›‘æµ‹è§¦åº•æ‰§è¡Œonloadäº‹ä»¶</p>
<p>é…åˆåå°æ¥å£, ä¼ é€’ä¸‹ä¸€é¡µçš„æ ‡è¯†</p>
<p>æ‹¿åˆ°ä¸‹ä¸€é¡µæ•°æ®åè¿½åŠ åˆ°å½“å‰æ•°ç»„æœ«å°¾å³å¯</p>
<ol>
<li>è®¾ç½®van-listç»„ä»¶å®ç°ç›¸åº”çš„å±æ€§å’Œæ–¹æ³•, è®©page++å»è¯·æ±‚ä¸‹é¡µæ•°æ®</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line">      &lt;van-list</span><br><span class="line">        v-model="loading"</span><br><span class="line">        :finished="finished"</span><br><span class="line">        finished-text="æ²¡æœ‰æ›´å¤šäº†"</span><br><span class="line">        @load="onLoad"</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;van-cell</span><br><span class="line">          center</span><br><span class="line">          v-for="obj in resultList"</span><br><span class="line">          :key="obj.id"</span><br><span class="line">          :title="obj.name"</span><br><span class="line">          :label="obj.ar[0].name + ' - ' + obj.name"</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;template #right-icon&gt;</span><br><span class="line">            &lt;van-icon name="play-circle-o" size="0.6rem" /&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/van-cell&gt;</span><br><span class="line">      &lt;/van-list&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: åŠ è½½æ›´å¤š</span><br><span class="line">// 1. é›†æˆlistç»„ä»¶-å®šä¹‰ç›¸å…³çš„å˜é‡(ææ‡‚å˜é‡çš„ä½œç”¨) -ç›‘æµ‹è§¦åº•äº‹ä»¶</span><br><span class="line">// 2. ä¸€æ—¦è§¦åº•, è‡ªåŠ¨æ‰§è¡Œonloadæ–¹æ³•</span><br><span class="line">// 3. å¯¹page++, ç»™åå°ä¼ é€’offsetåç§»é‡å‚æ•°-è¯·æ±‚ä¸‹ä¸€é¡µçš„æ•°æ®</span><br><span class="line">// 4. æŠŠå½“å‰æ•°æ®å’Œä¸‹ä¸€é¡µæ–°æ¥çš„æ•°æ®æ‹¼æ¥èµ·æ¥ç”¨åœ¨å½“å‰ é¡µé¢çš„æ•°ç»„é‡Œ</span><br><span class="line">// (åˆ‡è®°) - åŠ è½½æ›´å¤šæ•°æ®å,ä¸€å®šè¦æŠŠloadingæ”¹æˆfalse, ä¿è¯ä¸‹ä¸€æ¬¡è¿˜èƒ½è§¦å‘onloadæ–¹æ³•</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      value: "",</span><br><span class="line">      hotArr: [], // çƒ­æœå…³é”®å­—</span><br><span class="line">      resultList: [], // æœç´¢ç»“æœ</span><br><span class="line">      loading: false, // åŠ è½½ä¸­ (çŠ¶æ€) - åªæœ‰ä¸ºfalse, æ‰èƒ½è§¦åº•åè‡ªåŠ¨è§¦å‘onloadæ–¹æ³•</span><br><span class="line">      finished: false, // æœªåŠ è½½å…¨éƒ¨ (å¦‚æœè®¾ç½®ä¸ºtrue, åº•éƒ¨å°±ä¸ä¼šå†æ¬¡æ‰§è¡Œonload, ä»£è¡¨å…¨éƒ¨åŠ è½½å®Œæˆ)</span><br><span class="line">      page: 1, // å½“å‰æœç´¢ç»“æœçš„é¡µç </span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  // ...çœç•¥å…¶ä»–</span><br><span class="line">  methods: {</span><br><span class="line">    async getListFn() {</span><br><span class="line">      return await searchResultListAPI({</span><br><span class="line">        keywords: this.value,</span><br><span class="line">        limit: 20,</span><br><span class="line">        offset: (this.page - 1) * 20, // å›ºå®šå…¬å¼</span><br><span class="line">      }); // æŠŠæœç´¢ç»“æœreturnå‡ºå»</span><br><span class="line">      // (éš¾ç‚¹):</span><br><span class="line">      // asyncä¿®é¥°çš„å‡½æ•° -&gt; é»˜è®¤è¿”å›ä¸€ä¸ªå…¨æ–°Promiseå¯¹è±¡</span><br><span class="line">      // è¿™ä¸ªPromiseå¯¹è±¡çš„ç»“æœå°±æ˜¯asyncå‡½æ•°å†…returnçš„å€¼</span><br><span class="line">      // æ‹¿åˆ°getListFnçš„è¿”å›å€¼ç”¨awaitæå–ç»“æœ</span><br><span class="line">    },</span><br><span class="line">    async onLoad() {</span><br><span class="line">      // è§¦åº•äº‹ä»¶(è¦åŠ è½½ä¸‹ä¸€é¡µçš„æ•°æ®å’¯), å†…éƒ¨ä¼šè‡ªåŠ¨æŠŠloadingæ”¹ä¸ºtrue</span><br><span class="line">      this.page++;</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      this.resultList = [...this.resultList, ...res.data.result.songs];</span><br><span class="line">      this.loading = false; // æ•°æ®åŠ è½½å®Œæ¯•-ä¿è¯ä¸‹ä¸€æ¬¡è¿˜èƒ½è§¦å‘onload</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: listç»„ä»¶è´Ÿè´£UIå±‚ç›‘æµ‹è§¦åº•, æ‰§è¡Œonloadå‡½æ•°, page++, è¯·æ±‚ä¸‹é¡µæ•°æ®, å’Œç°åœ¨æ•°æ®åˆå¹¶æ˜¾ç¤ºæ›´å¤š, è®¾ç½®loadingä¸ºfalse, ç¡®ä¿ä¸‹æ¬¡è§¦åº•è¿˜èƒ½æ‰§è¡ŒonLoad</p>
</blockquote>
<h3 id="1-15-ç½‘æ˜“äº‘éŸ³ä¹-åŠ è½½æ›´å¤š-bugä¿®å¤"><a href="#1-15-ç½‘æ˜“äº‘éŸ³ä¹-åŠ è½½æ›´å¤š-bugä¿®å¤" class="headerlink" title="1.15 ç½‘æ˜“äº‘éŸ³ä¹-åŠ è½½æ›´å¤š-bugä¿®å¤"></a>1.15 ç½‘æ˜“äº‘éŸ³ä¹-åŠ è½½æ›´å¤š-bugä¿®å¤</h3><blockquote>
<p>ç›®æ ‡: å¦‚æœåªæœ‰ä¸€é¡µæ•°æ®/æ— æ•°æ®åˆ¤æ–­</p>
</blockquote>
<p>æ— æ•°æ®/åªæœ‰ä¸€é¡µæ•°æ®, finishedä¸ºtrue</p>
<p>é˜²æ­¢listç»„ä»¶è§¦åº•å†åŠ è½½æ›´å¤š</p>
<p>è¿˜è¦æµ‹è¯•-æŒ‰é’®ç‚¹å‡»/è¾“å…¥æ¡†æœ‰æ•°æ®æƒ…å†µçš„åŠ è½½æ›´å¤š</p>
<p>æ­£ç¡®ä»£ç </p>
<figure class="highlight diff"><table><tbody><tr><td class="code"><pre><span class="line"> async fn(val) {</span><br><span class="line">      // ç‚¹å‡»çƒ­æœå…³é”®è¯</span><br><span class="line"><span class="addition">+        this.finished = false; // ç‚¹å‡»æ–°å…³é”®è¯-å¯èƒ½æœ‰æ–°çš„æ•°æ®</span></span><br><span class="line">      this.value = val; // é€‰ä¸­çš„å…³é”®è¯æ˜¾ç¤ºåˆ°æœç´¢æ¡†</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.resultList = res.data.result.songs;</span><br><span class="line"><span class="addition">+        this.loading = false; // æœ¬æ¬¡æ•°æ®åŠ è½½å®Œæ¯•-æ‰èƒ½è®©liståŠ è½½æ›´å¤š</span></span><br><span class="line">    },</span><br><span class="line">    async inputFn() {</span><br><span class="line"><span class="addition">+       this.finished = false // è¾“å…¥æ¡†å…³é”®å­—æ”¹å˜-å¯èƒ½æœ‰æ–°æ•°æ®(ä¸ä¸€å®šåŠ è½½å®Œæˆäº†)</span></span><br><span class="line">      // è¾“å…¥æ¡†å€¼æ”¹å˜</span><br><span class="line">      if (this.value.length <span class="comment">=== 0) {</span></span><br><span class="line">        // æœç´¢å…³é”®è¯å¦‚æœæ²¡æœ‰, å°±æŠŠæœç´¢ç»“æœæ¸…ç©ºé˜»æ­¢ç½‘ç»œè¯·æ±‚å‘é€(æå‰return)</span><br><span class="line">        this.resultList = [];</span><br><span class="line">        return;</span><br><span class="line">      }</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      console.log(res);</span><br><span class="line">      </span><br><span class="line"><span class="addition">+      // å¦‚æœæœç´¢ç»“æœå“åº”æ•°æ®æ²¡æœ‰songså­—æ®µ-æ— æ•°æ®</span></span><br><span class="line"><span class="addition">+      if (res.data.result.songs === undefined) {</span></span><br><span class="line"><span class="addition">+        this.resultList = [];</span></span><br><span class="line"><span class="addition">+        return;</span></span><br><span class="line"><span class="addition">+      }</span></span><br><span class="line">      this.resultList = res.data.result.songs;</span><br><span class="line"><span class="addition">+        this.loading = false;</span></span><br><span class="line">    },</span><br><span class="line">    async onLoad() {</span><br><span class="line">      // è§¦åº•äº‹ä»¶(è¦åŠ è½½ä¸‹ä¸€é¡µçš„æ•°æ®å’¯), å†…éƒ¨ä¼šè‡ªåŠ¨æŠŠloadingæ”¹ä¸ºtrue</span><br><span class="line">      this.page++;</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line"><span class="addition">+        if (res.data.result.songs === undefined) { // æ²¡æœ‰æ›´å¤šæ•°æ®äº†</span></span><br><span class="line"><span class="addition">+          this.finished = true; // å…¨éƒ¨åŠ è½½å®Œæˆ(listä¸ä¼šåœ¨è§¦å‘onloadæ–¹æ³•)</span></span><br><span class="line"><span class="addition">+          this.loading = false; // æœ¬æ¬¡åŠ è½½å®Œæˆ</span></span><br><span class="line"><span class="addition">+          return;</span></span><br><span class="line"><span class="addition">+        }</span></span><br><span class="line">      this.resultList = [...this.resultList, ...res.data.result.songs];</span><br><span class="line"><span class="addition">+      this.loading = false; // æ•°æ®åŠ è½½å®Œæ¯•-ä¿è¯ä¸‹ä¸€æ¬¡è¿˜èƒ½è§¦å‘onload</span></span><br><span class="line">    },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: åœ¨3ä¸ªå‡½æ•° ä¸Šå’Œä¸‹, è®¾ç½®finishedè¿˜æœªå®Œæˆ, æœ€åè¦æŠŠloadingæ”¹æˆfalse, åˆ¤æ–­songså­—æ®µ, å¯¹è¿™é‡Œçš„å€¼è¦éå¸¸ç†Ÿæ‚‰æ‰å¯ä»¥</p>
</blockquote>
<h3 id="1-16-ç½‘æ˜“äº‘éŸ³ä¹-è¾“å…¥æ¡†-é˜²æŠ–"><a href="#1-16-ç½‘æ˜“äº‘éŸ³ä¹-è¾“å…¥æ¡†-é˜²æŠ–" class="headerlink" title="1.16 ç½‘æ˜“äº‘éŸ³ä¹-è¾“å…¥æ¡†-é˜²æŠ–"></a>1.16 ç½‘æ˜“äº‘éŸ³ä¹-è¾“å…¥æ¡†-é˜²æŠ–</h3><blockquote>
<p>ç›®æ ‡: è¾“å…¥æ¡†è§¦å‘é¢‘ç‡è¿‡é«˜</p>
</blockquote>
<p>è¾“å…¥æ¡†è¾“å…¥â€asdfghjklâ€</p>
<p>â€‹    æ¥ç€å¿«é€Ÿçš„åˆ é™¤</p>
<p>â€‹    æ¯æ¬¡æ”¹å˜-é©¬ä¸Šå‘é€ç½‘ç»œè¯·æ±‚</p>
<p>â€‹    ç½‘ç»œè¯·æ±‚å¼‚æ­¥è€—æ—¶ â€“ æ•°æ®å›æ¥åè¿˜æ˜¯é“ºè®¾åˆ°é¡µé¢ä¸Š</p>
<p>è§£å†³:</p>
<p>â€‹    å¼•å…¥é˜²æŠ–åŠŸèƒ½</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">inputFn</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">// ç›®æ ‡: è¾“å…¥æ¡†æ”¹å˜-é€»è¾‘ä»£ç -æ…¢ç‚¹æ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// è§£å†³: é˜²æŠ–</span></span><br><span class="line">    <span class="comment">// æ¦‚å¿µ: è®¡æ—¶nç§’, æœ€åæ‰§è¡Œä¸€æ¬¡, å¦‚æœå†æ¬¡è§¦å‘, é‡æ–°è®¡æ—¶</span></span><br><span class="line">    <span class="comment">// æ•ˆæœ: ç”¨æˆ·åœ¨nç§’å†…ä¸è§¦å‘è¿™ä¸ªäº‹ä»¶äº†, æ‰ä¼šå¼€å§‹æ‰§è¡Œé€»è¾‘ä»£ç </span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.timer) <span class="built_in">clearTimeout</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">    <span class="built_in">this</span>.timer = <span class="built_in">setTimeout</span>(<span class="keyword">async</span> () =&gt; {</span><br><span class="line">        <span class="built_in">this</span>.finished = <span class="literal">false</span>; <span class="comment">// è¾“å…¥æ¡†å…³é”®å­—æ”¹å˜-å¯èƒ½æœ‰æ–°æ•°æ®(ä¸ä¸€å®šåŠ è½½å®Œæˆäº†)</span></span><br><span class="line">        <span class="comment">// è¾“å…¥æ¡†å€¼æ”¹å˜</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.value.length === <span class="number">0</span>) {</span><br><span class="line">            <span class="comment">// æœç´¢å…³é”®è¯å¦‚æœæ²¡æœ‰, å°±æŠŠæœç´¢ç»“æœæ¸…ç©ºé˜»æ­¢ç½‘ç»œè¯·æ±‚å‘é€(æå‰return)</span></span><br><span class="line">            <span class="built_in">this</span>.resultList = [];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="built_in">this</span>.getListFn();</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="comment">// å¦‚æœæœç´¢ç»“æœå“åº”æ•°æ®æ²¡æœ‰songså­—æ®µ-æ— æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (res.data.result.songs === <span class="literal">undefined</span>) {</span><br><span class="line">            <span class="built_in">this</span>.resultList = [];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">this</span>.resultList = res.data.result.songs;</span><br><span class="line">        <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">    }, <span class="number">900</span>);</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: é™ä½å‡½æ•°æ‰§è¡Œé¢‘ç‡</p>
</blockquote>
<h3 id="1-17-ç½‘æ˜“äº‘éŸ³ä¹-é¡µç bugä¿®å¤"><a href="#1-17-ç½‘æ˜“äº‘éŸ³ä¹-é¡µç bugä¿®å¤" class="headerlink" title="1.17 ç½‘æ˜“äº‘éŸ³ä¹-é¡µç bugä¿®å¤"></a>1.17 ç½‘æ˜“äº‘éŸ³ä¹-é¡µç bugä¿®å¤</h3><blockquote>
<p>ç›®æ ‡: ç¬¬ä¸€ä¸ªå…³é”®è¯pageå·²ç»+åˆ°äº†10, å†ç¬¬äºŒä¸ªå…³é”®è¯åº”è¯¥ä»1å¼€å§‹</p>
</blockquote>
<p>åŠ è½½æ›´å¤šæ—¶, pageå·²ç»å¾€åè®¡æ•°äº†</p>
<p>é‡æ–°è·å–æ—¶, pageä¸æ˜¯ä»ç¬¬ä¸€é¡µè·å–çš„</p>
<p>ç‚¹å‡»æœç´¢/è¾“å…¥æ¡†æœç´¢æ—¶, æŠŠpageæ”¹å›1</p>
<p>ä»£ç å¦‚ä¸‹:</p>
<figure class="highlight diff"><table><tbody><tr><td class="code"><pre><span class="line"> async fn(val) {</span><br><span class="line">      // ç‚¹å‡»çƒ­æœå…³é”®è¯</span><br><span class="line"><span class="addition">+      this.page = 1; // ç‚¹å‡»é‡æ–°è·å–ç¬¬ä¸€é¡µæ•°æ®</span></span><br><span class="line">      this.finished = false; // ç‚¹å‡»æ–°å…³é”®è¯-å¯èƒ½æœ‰æ–°çš„æ•°æ®</span><br><span class="line">      this.value = val; // é€‰ä¸­çš„å…³é”®è¯æ˜¾ç¤ºåˆ°æœç´¢æ¡†</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.resultList = res.data.result.songs;</span><br><span class="line">      this.loading = false; // æœ¬æ¬¡æ•°æ®åŠ è½½å®Œæ¯•-æ‰èƒ½è®©liståŠ è½½æ›´å¤š</span><br><span class="line"> },</span><br><span class="line"> async inputFn() {</span><br><span class="line">      // ç›®æ ‡: è¾“å…¥æ¡†æ”¹å˜-é€»è¾‘ä»£ç -æ…¢ç‚¹æ‰§è¡Œ</span><br><span class="line">      // è§£å†³: é˜²æŠ–</span><br><span class="line">      // æ¦‚å¿µ: è®¡æ—¶nç§’, æœ€åæ‰§è¡Œä¸€æ¬¡, å¦‚æœå†æ¬¡è§¦å‘, é‡æ–°è®¡æ—¶</span><br><span class="line">      // æ•ˆæœ: ç”¨æˆ·åœ¨nç§’å†…ä¸è§¦å‘è¿™ä¸ªäº‹ä»¶äº†, æ‰ä¼šå¼€å§‹æ‰§è¡Œé€»è¾‘ä»£ç </span><br><span class="line">      if (this.timer) clearTimeout(this.timer);</span><br><span class="line">      this.timer = setTimeout(async () =&gt; {</span><br><span class="line"><span class="addition">+        this.page = 1; // ç‚¹å‡»é‡æ–°è·å–ç¬¬ä¸€é¡µæ•°æ®</span></span><br><span class="line">        this.finished = false; // è¾“å…¥æ¡†å…³é”®å­—æ”¹å˜-å¯èƒ½æœ‰æ–°æ•°æ®(ä¸ä¸€å®šåŠ è½½å®Œæˆäº†)</span><br><span class="line">        // è¾“å…¥æ¡†å€¼æ”¹å˜</span><br><span class="line">        if (this.value.length <span class="comment">=== 0) {</span></span><br><span class="line">          // æœç´¢å…³é”®è¯å¦‚æœæ²¡æœ‰, å°±æŠŠæœç´¢ç»“æœæ¸…ç©ºé˜»æ­¢ç½‘ç»œè¯·æ±‚å‘é€(æå‰return)</span><br><span class="line">          this.resultList = [];</span><br><span class="line">          return;</span><br><span class="line">        }</span><br><span class="line">        const res = await this.getListFn();</span><br><span class="line">        console.log(res);</span><br><span class="line">        // å¦‚æœæœç´¢ç»“æœå“åº”æ•°æ®æ²¡æœ‰songså­—æ®µ-æ— æ•°æ®</span><br><span class="line">        if (res.data.result.songs <span class="comment">=== undefined) {</span></span><br><span class="line">          this.resultList = [];</span><br><span class="line">          return;</span><br><span class="line">        }</span><br><span class="line">        this.resultList = res.data.result.songs;</span><br><span class="line">        this.loading = false;</span><br><span class="line">      }, 900);</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: åˆ‡æ¢æ—¶, è®©pageé¡µé¢å›åˆ°1</p>
</blockquote>
<h3 id="1-18-ç½‘æ˜“äº‘éŸ³ä¹-Layoutè¾¹è·ä¼˜åŒ–"><a href="#1-18-ç½‘æ˜“äº‘éŸ³ä¹-Layoutè¾¹è·ä¼˜åŒ–" class="headerlink" title="1.18 ç½‘æ˜“äº‘éŸ³ä¹-Layoutè¾¹è·ä¼˜åŒ–"></a>1.18 ç½‘æ˜“äº‘éŸ³ä¹-Layoutè¾¹è·ä¼˜åŒ–</h3><blockquote>
<p>ç›®æ ‡: ä¸Šä¸‹å¯¼èˆªä¼šç›–ä½ä¸­é—´å†…å®¹</p>
</blockquote>
<p>æˆ‘ä»¬çš„å¤´éƒ¨å¯¼èˆªå’Œåº•éƒ¨å¯¼èˆªæŒ¡ä½äº†ä¸­é—´å†…å®¹</p>
<p>ç»™ä¸­é—´è·¯ç”±é¡µé¢è®¾ç½®ä¸Šä¸‹å†…è¾¹è·å³å¯</p>
<p>åœ¨Layout/index.vueä¸­</p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/* ä¸­é—´å†…å®¹åŒºåŸŸ - å®¹å™¨æ ·å¼(ç•™å¥½ä¸Šä¸‹å¯¼èˆªæ‰€å ä½ç½®) */</span></span><br><span class="line"><span class="selector-class">.main</span> {</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">46px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-19-ç½‘æ˜“äº‘éŸ³ä¹-SongItemå°è£…"><a href="#1-19-ç½‘æ˜“äº‘éŸ³ä¹-SongItemå°è£…" class="headerlink" title="1.19 ç½‘æ˜“äº‘éŸ³ä¹-SongItemå°è£…"></a>1.19 ç½‘æ˜“äº‘éŸ³ä¹-SongItemå°è£…</h3><blockquote>
<p>ç›®æ ‡: æŠŠé¦–é¡µå’Œæœç´¢ç»“æœçš„æ­Œæ›²cellå°è£…èµ·æ¥</p>
</blockquote>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210512144538038.png" alt="image-20210512144538038"></p>
<p>åˆ›å»ºsrc/components/SongItem.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;van-cell center :title="name" :label="author + ' - ' + name"&gt;</span><br><span class="line">    &lt;template #right-icon&gt;</span><br><span class="line">      &lt;van-icon name="play-circle-o" size="0.6rem"/&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/van-cell&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    name: String, // æ­Œå</span><br><span class="line">    author: String, // æ­Œæ‰‹</span><br><span class="line">    id: Number, // æ­Œæ›²id (æ ‡è®°è¿™é¦–æ­Œæ›²-ä¸ºå°†æ¥è·³è½¬æ’­æ”¾é¡µåšå‡†å¤‡)</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* ç»™å•å…ƒæ ¼è®¾ç½®åº•éƒ¨è¾¹æ¡† */</span><br><span class="line">.van-cell {</span><br><span class="line">  border-bottom: 1px solid lightgray;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>Home/index.vue - é‡æ„</p>
<p>==æ³¨æ„: authorå­—æ®µä¸åŒ==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;SongItem v-for="obj in songList"</span><br><span class="line">    :key="obj.id"</span><br><span class="line">    :name="obj.name"</span><br><span class="line">    :author="obj.song.artists[0].name"</span><br><span class="line">    :id="obj.id"</span><br><span class="line">&gt;&lt;/SongItem&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>Search/index.vue - é‡æ„</p>
<p>==æ³¨æ„: authorå­—æ®µä¸åŒ==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;SongItem</span><br><span class="line">          v-for="obj in resultList"</span><br><span class="line">          :key="obj.id"</span><br><span class="line">          :name="obj.name"</span><br><span class="line">          :author="obj.ar[0].name"</span><br><span class="line">          :id="obj.id"</span><br><span class="line">&gt;&lt;/SongItem&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: é‡åˆ°é‡å¤æ ‡ç­¾è¦å°è£…</p>
</blockquote>
<h3 id="1-20-ç½‘æ˜“äº‘éŸ³ä¹-æ’­æ”¾éŸ³ä¹"><a href="#1-20-ç½‘æ˜“äº‘éŸ³ä¹-æ’­æ”¾éŸ³ä¹" class="headerlink" title="1.20 ç½‘æ˜“äº‘éŸ³ä¹-æ’­æ”¾éŸ³ä¹"></a>1.20 ç½‘æ˜“äº‘éŸ³ä¹-æ’­æ”¾éŸ³ä¹</h3><blockquote>
<p>ç›®æ ‡: ä»é¢„ä¹ èµ„æ–™æ‹¿åˆ°æ’­æ”¾çš„apiå’Œé¡µé¢, é…ç½®å¥½è·¯ç”±è§„åˆ™</p>
</blockquote>
<p>==æ—¶é—´å…³ç³»,è¿™ä¸ªé¡µé¢ä¸ç”¨å†™, ç›´æ¥ç”¨, æ³¨é‡Šåœ¨å¤‡è¯¾ä»£ç é‡Œå†™å¥½äº†==</p>
<p>ç»„ä»¶SongItemé‡Œ â€“ ç‚¹å‡»äº‹ä»¶</p>
<p>api/Play.js â€“ æå‰å‡†å¤‡å¥½ â€“ æ¥å£æ–¹æ³•</p>
<p>è·³è½¬åˆ°Playé¡µé¢ â€“ æŠŠæ­Œæ›²idå¸¦è¿‡è¿›å»</p>
<p>åœ¨SongItem.vue - ç‚¹å‡»æ’­æ”¾å­—ä½“å›¾æ ‡</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">methods: {</span><br><span class="line">    <span class="function"><span class="title">playFn</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="built_in">this</span>.$router.push({</span><br><span class="line">            <span class="attr">path</span>: <span class="string">'/play'</span>,</span><br><span class="line">            <span class="attr">query</span>: {</span><br><span class="line">                <span class="attr">id</span>: <span class="built_in">this</span>.id <span class="comment">// æ­Œæ›²id, é€šè¿‡è·¯ç”±è·³è½¬ä¼ é€’è¿‡å»</span></span><br><span class="line">            }</span><br><span class="line">        })</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210512144906051.png" alt="image-20210512144906051"></p>
<blockquote>
<p>æ€»ç»“: å‡†å¤‡å¥½æ’­æ”¾é¡µ, ç‚¹å‡»æ’­æ”¾ä¼ æ­Œæ›²idè¿‡å», åˆ°æ’­æ”¾é¡µ-å†è¯·æ±‚å“åº”æ•°æ®å’Œæ­Œæ›²åœ°å€ç”¨audioæ ‡ç­¾æ’­æ”¾</p>
</blockquote>
<h3 id="1-21-ç½‘æ˜“äº‘éŸ³ä¹-vanté€‚é…"><a href="#1-21-ç½‘æ˜“äº‘éŸ³ä¹-vanté€‚é…" class="headerlink" title="1.21 ç½‘æ˜“äº‘éŸ³ä¹-vanté€‚é…"></a>1.21 ç½‘æ˜“äº‘éŸ³ä¹-vanté€‚é…</h3><blockquote>
<p>ç›®æ ‡: åˆ‡æ¢ä¸åŒæœºå‹, ==åˆ·æ–°å==çœ‹çœ‹æ ‡ç­¾å¤§å°é€‚é…å—</p>
</blockquote>
<ul>
<li>postcss â€“ é…åˆwebpackç¿»è¯‘cssä»£ç </li>
<li>postcss-pxtorem â€“ é…åˆwebpack, è‡ªåŠ¨æŠŠpxè½¬æˆrem</li>
<li>æ–°å»ºpostcss.config.js â€“ è®¾ç½®ç›¸å…³é…ç½®</li>
<li>é‡å¯æœåŠ¡å™¨, å†æ¬¡è§‚å¯ŸVantç»„ä»¶æ˜¯å¦é€‚é…</li>
</ul>
<ol>
<li><p>ä¸‹è½½postcsså’Œ==<a href="mailto:postcss-pxtorem@5.1.1">postcss-pxtorem@5.1.1</a>==</p>
<p>postcssä½œç”¨: æ˜¯å¯¹cssä»£ç åšé™çº§å¤„ç†</p>
<p>postcss-pxtorem: è‡ªåŠ¨æŠŠæ‰€æœ‰ä»£ç é‡Œçš„cssæ ·å¼çš„px, è‡ªåŠ¨è½¬rem</p>
</li>
<li><p>src/æ–°å»ºpostcss.config.js</p>
</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'postcss-pxtorem'</span>: {</span><br><span class="line">      <span class="comment">// èƒ½å¤ŸæŠŠæ‰€æœ‰å…ƒç´ çš„pxå•ä½è½¬æˆRem</span></span><br><span class="line">      <span class="comment">// rootValue: è½¬æ¢pxçš„åŸºå‡†å€¼ã€‚</span></span><br><span class="line">      <span class="comment">// ä¾‹å¦‚ä¸€ä¸ªå…ƒç´ å®½æ˜¯75pxï¼Œåˆ™æ¢æˆremä¹‹åå°±æ˜¯2remã€‚</span></span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">37.5</span>,</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">'*'</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>==ä»¥iphone6ä¸ºåŸºå‡†, 37.5pxä¸ºåŸºå‡†å€¼æ¢ç®—rem==</p>
<h2 id="ä»Šæ—¥æ€»ç»“"><a href="#ä»Šæ—¥æ€»ç»“" class="headerlink" title="ä»Šæ—¥æ€»ç»“"></a>ä»Šæ—¥æ€»ç»“</h2><ul>
<li><input disabled="" type="checkbox"> æŒæ¡vantç»„ä»¶åº“çš„ä½¿ç”¨ - æ‰¾ç»„ä»¶, å¼•ç»„ä»¶, ç”¨ç»„ä»¶</li>
<li><input disabled="" type="checkbox"> èƒ½å¤Ÿå¯¹vantç»„ä»¶è‡ªå¸¦æ ·å¼è¿›è¡Œè¦†ç›–è‡ªå®šä¹‰</li>
<li><input disabled="" type="checkbox"> é‡åˆ°é‡å¤çš„æ ‡ç­¾, è‡ªå·±ä¹Ÿå°è£…äº†ä¸€ä¸ªå¤ç”¨çš„ç»„ä»¶</li>
<li><input disabled="" type="checkbox"> æŒæ¡æŸ¥è¯¢æ–‡æ¡£å’Œä½¿ç”¨æ¯ä¸ªå±æ€§çš„æ–¹å¼</li>
</ul>
<h2 id="ä»Šæ—¥ä½œä¸š"><a href="#ä»Šæ—¥ä½œä¸š" class="headerlink" title="ä»Šæ—¥ä½œä¸š"></a>ä»Šæ—¥ä½œä¸š</h2><p>æŠŠè¯¾ä¸Šçš„æ¡ˆä¾‹-ä»0å†æ¥ä¸€é, ä¸ºä¸‹é˜¶æ®µç§»åŠ¨ç«¯é¡¹ç›®é“ºå«</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vueåº”ç”¨</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåŸºç¡€3-vueç»„ä»¶_ç»„ä»¶é€šä¿¡_todoæ¡ˆä¾‹</title>
    <url>/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="çŸ¥è¯†ç‚¹è‡ªæµ‹"><a href="#çŸ¥è¯†ç‚¹è‡ªæµ‹" class="headerlink" title="çŸ¥è¯†ç‚¹è‡ªæµ‹"></a>çŸ¥è¯†ç‚¹è‡ªæµ‹</h2><ul>
<li><input disabled="" type="checkbox"> thisæŒ‡å‘</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = {</span><br><span class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="comment">// thisæŒ‡å‘æ­¤å‡½æ•°çš„è°ƒç”¨è€…</span></span><br><span class="line">    },</span><br><span class="line">    fn () {</span><br><span class="line">        <span class="comment">// thisæŒ‡å‘å½“å‰å‡½æ•°çš„è°ƒç”¨è€… (å¦‚æœéƒ½æ˜¯åœ¨vueé‡Œ, thisæŒ‡å‘çš„éƒ½æ˜¯vueå®ä¾‹å¯¹è±¡)</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">fn</span>: <span class="function">() =&gt;</span> {</span><br><span class="line">        <span class="comment">// thisæŒ‡å‘å¤–å±‚å‡½æ•°ä½œç”¨åŸŸthisçš„å€¼</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">obj.fn();</span><br><span class="line"></span><br><span class="line">axios().then(<span class="function"><span class="params">res</span> =&gt;</span> {</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„thisçš„å€¼æ˜¯å¤šå°‘å“¦?</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><input disabled="" type="checkbox"> =ä½œç”¨</li>
</ul>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">let</span> b = a; </span><br><span class="line">b = <span class="number">20</span>; <span class="comment">// åŸºç¡€ç±»å‹, å•çº¯çš„å€¼çš„èµ‹å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = {<span class="attr">name</span>: <span class="string">"å“ˆå“ˆ"</span>};</span><br><span class="line"><span class="keyword">let</span> b = a; <span class="comment">// aå˜é‡çš„å€¼æ˜¯å¼•ç”¨ç±»å‹, aé‡Œä¿å­˜çš„æ˜¯å¯¹è±¡åœ¨å †çš„å†…å­˜åœ°å€, æ‰€ä»¥bå’ŒaæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ (å¼•ç”¨ç±»å‹=æ˜¯å†…å­˜åœ°å€çš„èµ‹å€¼)</span></span><br><span class="line">b.name = <span class="string">"åˆ˜æ€»"</span>;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"><a href="#ä»Šæ—¥å­¦ä¹ ç›®æ ‡" class="headerlink" title="ä»Šæ—¥å­¦ä¹ ç›®æ ‡"></a>ä»Šæ—¥å­¦ä¹ ç›®æ ‡</h2><ol>
<li>èƒ½å¤Ÿç†è§£vueç»„ä»¶æ¦‚å¿µå’Œä½œç”¨</li>
<li>èƒ½å¤ŸæŒæ¡å°è£…ç»„ä»¶èƒ½åŠ›</li>
<li>èƒ½å¤Ÿä½¿ç”¨ç»„ä»¶ä¹‹é—´é€šä¿¡</li>
<li>èƒ½å¤Ÿå®Œæˆtodoæ¡ˆä¾‹</li>
</ol>
<h2 id="1-vueç»„ä»¶"><a href="#1-vueç»„ä»¶" class="headerlink" title="1. vueç»„ä»¶"></a>1. vueç»„ä»¶</h2><h3 id="1-0-ä¸ºä»€ä¹ˆç”¨ç»„ä»¶"><a href="#1-0-ä¸ºä»€ä¹ˆç”¨ç»„ä»¶" class="headerlink" title="1.0_ä¸ºä»€ä¹ˆç”¨ç»„ä»¶"></a>1.0_ä¸ºä»€ä¹ˆç”¨ç»„ä»¶</h3><p>ä»¥å‰åšè¿‡ä¸€ä¸ªæŠ˜å é¢æ¿</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210115092834016.png" alt="image-20210115092834016"></p>
<p>éœ€æ±‚: ç°åœ¨æƒ³è¦å¤šä¸ªæ”¶èµ·å±•å¼€çš„éƒ¨åˆ†</p>
<p>æ–¹æ¡ˆ1: å¤åˆ¶ä»£ç </p>
<ul>
<li>ä»£ç é‡å¤ å†—ä½™</li>
<li>ä¸åˆ©äºç»´æŠ¤</li>
</ul>
<ol>
<li>æ¡ˆä¾‹ç”¨lesså†™çš„æ ·å¼, æ‰€ä»¥ä¸‹è½½</li>
</ol>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">yarn add less less-loader@5.0.0 -D</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>æ¨¡æ¿æ ‡ç­¾ - åœ¨è¿™ä¸ªåŸºç¡€ä¸Š, æŠŠ==è¦å¤ç”¨çš„å¤šå¤åˆ¶å‡ ä»½==(è®²è§£ä¸å¥½çš„åœ°æ–¹å¼•å‡ºè§£å†³æ–¹æ¡ˆ)</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;h3&gt;æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿&lt;/h3&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div class="title"&gt;</span><br><span class="line">        &lt;h4&gt;èŠ™è“‰æ¥¼é€è¾›æ¸&lt;/h4&gt;</span><br><span class="line">        &lt;span class="btn" @click="isShow = !isShow"&gt;</span><br><span class="line">          {{ isShow ? 'æ”¶èµ·' : 'å±•å¼€' }}</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;div class="container" v-show="isShow"&gt;</span><br><span class="line">        &lt;p&gt;å¯’é›¨è¿æ±Ÿå¤œå…¥å´, &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      isShow: false</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="less"&gt;</span><br><span class="line">body {</span><br><span class="line">  background-color: #ccc;</span><br><span class="line">  #app {</span><br><span class="line">    width: 400px;</span><br><span class="line">    margin: 20px auto;</span><br><span class="line">    background-color: #fff;</span><br><span class="line">    border: 4px solid blueviolet;</span><br><span class="line">    border-radius: 1em;</span><br><span class="line">    box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.5);</span><br><span class="line">    padding: 1em 2em 2em;</span><br><span class="line">    h3 {</span><br><span class="line">      text-align: center;</span><br><span class="line">    }</span><br><span class="line">    .title {</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: space-between;</span><br><span class="line">      align-items: center;</span><br><span class="line">      border: 1px solid #ccc;</span><br><span class="line">      padding: 0 1em;</span><br><span class="line">    }</span><br><span class="line">    .title h4 {</span><br><span class="line">      line-height: 2;</span><br><span class="line">      margin: 0;</span><br><span class="line">    }</span><br><span class="line">    .container {</span><br><span class="line">      border: 1px solid #ccc;</span><br><span class="line">      padding: 0 1em;</span><br><span class="line">    }</span><br><span class="line">    .btn {</span><br><span class="line">      /* é¼ æ ‡æ”¹æˆæ‰‹çš„å½¢çŠ¶ */</span><br><span class="line">      cursor: pointer;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li><p>ä¸Šé¢å¤åˆ¶3ä»½, å‘ç°å˜åŒ–ä¸€èµ·å˜åŒ–</p>
<p>è§£å†³æ–¹æ¡ˆ: ä¸åŒçš„éƒ¨åˆ†, ç”¨ä¸åŒçš„isShowå˜é‡</p>
</li>
</ol>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>èŠ™è“‰æ¥¼é€è¾›æ¸<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"isShow = !isShow"</span>&gt;</span></span><br><span class="line">          {{ isShow ? 'æ”¶èµ·' : 'å±•å¼€' }}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span> <span class="attr">v-show</span>=<span class="string">"isShow"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯’é›¨è¿æ±Ÿå¤œå…¥å´, <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>èŠ™è“‰æ¥¼é€è¾›æ¸<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"isShow1 = !isShow1"</span>&gt;</span></span><br><span class="line">          {{ isShow1 ? 'æ”¶èµ·' : 'å±•å¼€' }}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span> <span class="attr">v-show</span>=<span class="string">"isShow1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯’é›¨è¿æ±Ÿå¤œå…¥å´, <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span>&gt;</span>èŠ™è“‰æ¥¼é€è¾›æ¸<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"isShow2 = !isShow2"</span>&gt;</span></span><br><span class="line">          {{ isShow2 ? 'æ”¶èµ·' : 'å±•å¼€' }}</span><br><span class="line">        <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span> <span class="attr">v-show</span>=<span class="string">"isShow2"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯’é›¨è¿æ±Ÿå¤œå…¥å´, <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">isShow</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">isShow1</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">isShow2</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">body</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-id">#app</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">400px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin</span>: <span class="number">20px</span> auto;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: <span class="number">4px</span> solid blueviolet;</span></span><br><span class="line"><span class="css">    <span class="attribute">border-radius</span>: <span class="number">1em</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">box-shadow</span>: <span class="number">3px</span> <span class="number">3px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">1em</span> <span class="number">2em</span> <span class="number">2em</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">h3</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.title</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.title</span> <span class="selector-tag">h4</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">line-height</span>: <span class="number">2</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">1em</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.btn</span> {</span></span><br><span class="line"><span class="css">      <span class="comment">/* é¼ æ ‡æ”¹æˆæ‰‹çš„å½¢çŠ¶ */</span></span></span><br><span class="line"><span class="css">      <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ä»£ç éå¸¸çš„å†—ä½™å’Œé‡å¤å§? è§£å†³æ–¹æ¡ˆå‘¢? å°±æ˜¯é‡‡ç”¨æˆ‘ä»¬çš„ç»„ä»¶åŒ–å¼€å‘çš„æ–¹å¼, å¾€ä¸‹çœ‹</p>
</blockquote>
<h3 id="1-1-vueç»„ä»¶-æ¦‚å¿µ"><a href="#1-1-vueç»„ä»¶-æ¦‚å¿µ" class="headerlink" title="1.1_vueç»„ä»¶_æ¦‚å¿µ"></a>1.1_vueç»„ä»¶_æ¦‚å¿µ</h3><blockquote>
<p>ç»„ä»¶æ˜¯å¯å¤ç”¨çš„ Vue å®ä¾‹, å°è£…æ ‡ç­¾, æ ·å¼å’ŒJSä»£ç </p>
</blockquote>
<p><strong>ç»„ä»¶åŒ–</strong> ï¼šå°è£…çš„æ€æƒ³ï¼ŒæŠŠé¡µé¢ä¸Š <code>å¯é‡ç”¨çš„éƒ¨åˆ†</code> å°è£…ä¸º <code>ç»„ä»¶</code>ï¼Œä»è€Œæ–¹ä¾¿é¡¹ç›®çš„ å¼€å‘ å’Œ ç»´æŠ¤</p>
<p><strong>ä¸€ä¸ªé¡µé¢ï¼Œ å¯ä»¥æ‹†åˆ†æˆä¸€ä¸ªä¸ªç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å°±æ˜¯ä¸€ä¸ªæ•´ä½“, æ¯ä¸ªç»„ä»¶å¯ä»¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ ç»“æ„ æ ·å¼ å’Œ è¡Œä¸º(html, csså’Œjs)</strong></p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210216114452712.png" alt="image-20210216114452712"></p>
<h3 id="1-2-vueç»„ä»¶-åŸºç¡€ä½¿ç”¨"><a href="#1-2-vueç»„ä»¶-åŸºç¡€ä½¿ç”¨" class="headerlink" title="1.2_vueç»„ä»¶_åŸºç¡€ä½¿ç”¨"></a>1.2_vueç»„ä»¶_åŸºç¡€ä½¿ç”¨</h3><blockquote>
<p>ç›®æ ‡: æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä¸ªä½“, ä»£ç é‡Œä½“ç°ä¸ºä¸€ä¸ªç‹¬ç«‹çš„.vueæ–‡ä»¶</p>
</blockquote>
<p>å£è¯€: å“ªéƒ¨åˆ†æ ‡ç­¾å¤ç”¨, å°±æŠŠå“ªéƒ¨åˆ†å°è£…åˆ°ç»„ä»¶å†…</p>
<p>==(é‡è¦): ç»„ä»¶å†…templateåªèƒ½æœ‰ä¸€ä¸ªæ ¹æ ‡ç­¾==</p>
<p>==(é‡è¦): ç»„ä»¶å†…dataå¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°, ç‹¬ç«‹ä½œç”¨åŸŸ==</p>
<p>æ­¥éª¤:</p>
<ol>
<li>åˆ›å»ºç»„ä»¶ components/Pannel.vue</li>
</ol>
<blockquote>
<p>å°è£…æ ‡ç­¾+æ ·å¼+js - ç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„, ä¸ºäº†å¤ç”¨</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class="title"&gt;</span><br><span class="line">      &lt;h4&gt;èŠ™è“‰æ¥¼é€è¾›æ¸&lt;/h4&gt;</span><br><span class="line">      &lt;span class="btn" @click="isShow = !isShow"&gt;</span><br><span class="line">        {{ isShow ? "æ”¶èµ·" : "å±•å¼€" }}</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class="container" v-show="isShow"&gt;</span><br><span class="line">      &lt;p&gt;å¯’é›¨è¿æ±Ÿå¤œå…¥å´,&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;å¹³æ˜é€å®¢æ¥šå±±å­¤ã€‚&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;æ´›é˜³äº²å‹å¦‚ç›¸é—®ï¼Œ&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;ä¸€ç‰‡å†°å¿ƒåœ¨ç‰å£¶ã€‚&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      isShow: false,</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.title {</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  padding: 0 1em;</span><br><span class="line">}</span><br><span class="line">.title h4 {</span><br><span class="line">  line-height: 2;</span><br><span class="line">  margin: 0;</span><br><span class="line">}</span><br><span class="line">.container {</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  padding: 0 1em;</span><br><span class="line">}</span><br><span class="line">.btn {</span><br><span class="line">  /* é¼ æ ‡æ”¹æˆæ‰‹çš„å½¢çŠ¶ */</span><br><span class="line">  cursor: pointer;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>æ³¨å†Œç»„ä»¶: åˆ›å»ºåéœ€è¦æ³¨å†Œåå†ä½¿ç”¨</li>
</ol>
<blockquote>
<h3 id="å…¨å±€-æ³¨å†Œä½¿ç”¨"><a href="#å…¨å±€-æ³¨å†Œä½¿ç”¨" class="headerlink" title="å…¨å±€ - æ³¨å†Œä½¿ç”¨"></a>å…¨å±€ - æ³¨å†Œä½¿ç”¨</h3></blockquote>
<p>å…¨å±€å…¥å£åœ¨main.js, åœ¨new Vueä¹‹ä¸Šæ³¨å†Œ</p>
<p>è¯­æ³•:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> ç»„ä»¶å¯¹è±¡ <span class="keyword">from</span> <span class="string">'vueæ–‡ä»¶è·¯å¾„'</span></span><br><span class="line"></span><br><span class="line">Vue.component(<span class="string">"ç»„ä»¶å"</span>, ç»„ä»¶å¯¹è±¡)</span><br></pre></td></tr></tbody></table></figure>

<p>main.js - ç«‹å³æ¼”ç¤º</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç›®æ ‡: å…¨å±€æ³¨å†Œ (ä¸€å¤„å®šä¹‰åˆ°å¤„ä½¿ç”¨)</span></span><br><span class="line"><span class="comment">// 1. åˆ›å»ºç»„ä»¶ - æ–‡ä»¶å.vue</span></span><br><span class="line"><span class="comment">// 2. å¼•å…¥ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> Pannel <span class="keyword">from</span> <span class="string">'./components/Pannel'</span></span><br><span class="line"><span class="comment">// 3. å…¨å±€ - æ³¨å†Œç»„ä»¶</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  è¯­æ³•: </span></span><br><span class="line"><span class="comment">  Vue.component("ç»„ä»¶å", ç»„ä»¶å¯¹è±¡)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">Vue.component(<span class="string">"PannelG"</span>, Pannel)</span><br></pre></td></tr></tbody></table></figure>

<p>å…¨å±€æ³¨å†ŒPannelGç»„ä»¶åå, å°±å¯ä»¥å½“åšæ ‡ç­¾åœ¨ä»»æ„Vueæ–‡ä»¶ä¸­templateé‡Œç”¨</p>
<p>å•åŒæ ‡ç­¾éƒ½å¯ä»¥æˆ–è€…å°å†™åŠ -å½¢å¼, è¿è¡Œå, ä¼šæŠŠè¿™ä¸ªè‡ªå®šä¹‰æ ‡ç­¾å½“åšç»„ä»¶è§£æ, ä½¿ç”¨==ç»„ä»¶é‡Œå°è£…çš„æ ‡ç­¾æ›¿æ¢åˆ°è¿™ä¸ªä½ç½®==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;PannelG&gt;&lt;/PannelG&gt;</span><br><span class="line">&lt;PannelG/&gt;</span><br><span class="line">&lt;pannel-g&gt;&lt;/pannel-g&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<h3 id="å±€éƒ¨-æ³¨å†Œä½¿ç”¨"><a href="#å±€éƒ¨-æ³¨å†Œä½¿ç”¨" class="headerlink" title="å±€éƒ¨ - æ³¨å†Œä½¿ç”¨"></a>å±€éƒ¨ - æ³¨å†Œä½¿ç”¨</h3></blockquote>
<p>è¯­æ³•:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> ç»„ä»¶å¯¹è±¡ <span class="keyword">from</span> <span class="string">'vueæ–‡ä»¶è·¯å¾„'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">    <span class="attr">components</span>: {</span><br><span class="line">        <span class="string">"ç»„ä»¶å"</span>: ç»„ä»¶å¯¹è±¡</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä»»æ„vueæ–‡ä»¶ä¸­ä¸­å¼•å…¥, æ³¨å†Œ, ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id="app"&gt;</span><br><span class="line">    &lt;h3&gt;æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 4. ç»„ä»¶åå½“åšæ ‡ç­¾ä½¿ç”¨ --&gt;</span><br><span class="line">    &lt;!-- &lt;ç»„ä»¶å&gt;&lt;/ç»„ä»¶å&gt; --&gt;</span><br><span class="line">    &lt;PannelG&gt;&lt;/PannelG&gt;</span><br><span class="line">    &lt;PannelL&gt;&lt;/PannelL&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: å±€éƒ¨æ³¨å†Œ (ç”¨çš„å¤š)</span><br><span class="line">// 1. åˆ›å»ºç»„ä»¶ - æ–‡ä»¶å.vue</span><br><span class="line">// 2. å¼•å…¥ç»„ä»¶</span><br><span class="line">import Pannel from './components/Pannel_1'</span><br><span class="line">export default {</span><br><span class="line">  // 3. å±€éƒ¨ - æ³¨å†Œç»„ä»¶</span><br><span class="line">  /*</span><br><span class="line">    è¯­æ³•: </span><br><span class="line">    components: {</span><br><span class="line">      "ç»„ä»¶å": ç»„ä»¶å¯¹è±¡</span><br><span class="line">    }</span><br><span class="line">  */</span><br><span class="line">  components: {</span><br><span class="line">    PannelL: Pannel</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>ç»„ä»¶ä½¿ç”¨æ€»ç»“:</p>
<ol>
<li>(åˆ›å»º)å°è£…html+css+vueåˆ°ç‹¬ç«‹çš„.vueæ–‡ä»¶ä¸­</li>
<li>(å¼•å…¥æ³¨å†Œ)ç»„ä»¶æ–‡ä»¶ =&gt; å¾—åˆ°ç»„ä»¶é…ç½®å¯¹è±¡</li>
<li>(ä½¿ç”¨)å½“å‰é¡µé¢å½“åšæ ‡ç­¾ä½¿ç”¨</li>
</ol>
<h3 id="1-3-vueç»„ä»¶-scopedä½œç”¨"><a href="#1-3-vueç»„ä»¶-scopedä½œç”¨" class="headerlink" title="1.3_vueç»„ä»¶-scopedä½œç”¨"></a>1.3_vueç»„ä»¶-scopedä½œç”¨</h3><blockquote>
<p>ç›®çš„: è§£å†³å¤šä¸ªç»„ä»¶æ ·å¼åç›¸åŒ, å†²çªé—®é¢˜</p>
</blockquote>
<p>éœ€æ±‚: divæ ‡ç­¾åé€‰æ‹©å™¨, è®¾ç½®èƒŒæ™¯è‰²</p>
<p>é—®é¢˜: å‘ç°ç»„ä»¶é‡Œçš„divå’Œå¤–é¢çš„divéƒ½ç”Ÿæ•ˆäº†</p>
<p>è§£å†³: ç»™Pannel.vueç»„ä»¶é‡Œstyleæ ‡ç­¾ä¸ŠåŠ scopedå±æ€§å³å¯</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨styleä¸ŠåŠ å…¥scopedå±æ€§, å°±ä¼šåœ¨æ­¤ç»„ä»¶çš„æ ‡ç­¾ä¸ŠåŠ ä¸Šä¸€ä¸ªéšæœºç”Ÿæˆçš„data-vå¼€å¤´çš„å±æ€§</p>
<p>è€Œä¸”å¿…é¡»æ˜¯å½“å‰ç»„ä»¶çš„å…ƒç´ , æ‰ä¼šæœ‰è¿™ä¸ªè‡ªå®šä¹‰å±æ€§, æ‰ä¼šè¢«è¿™ä¸ªæ ·å¼ä½œç”¨åˆ°</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210216122749906.png" alt="image-20210216122749906"></p>
<blockquote>
<p>æ€»ç»“: styleä¸ŠåŠ scoped, ç»„ä»¶å†…çš„æ ·å¼åªåœ¨å½“å‰vueç»„ä»¶ç”Ÿæ•ˆ</p>
</blockquote>
<h2 id="2-vueç»„ä»¶é€šä¿¡"><a href="#2-vueç»„ä»¶é€šä¿¡" class="headerlink" title="2. vueç»„ä»¶é€šä¿¡"></a>2. vueç»„ä»¶é€šä¿¡</h2><p>å› ä¸ºæ¯ä¸ªç»„ä»¶çš„å˜é‡å’Œå€¼éƒ½æ˜¯ç‹¬ç«‹çš„</p>
<p>ç»„ä»¶é€šä¿¡å…ˆæš‚æ—¶å…³æ³¨çˆ¶ä¼ å­, å­ä¼ çˆ¶</p>
<p>çˆ¶: ä½¿ç”¨å…¶ä»–ç»„ä»¶çš„vueæ–‡ä»¶</p>
<p>å­: è¢«å¼•å…¥çš„ç»„ä»¶(åµŒå…¥)</p>
<p>ä¾‹å¦‚: App.vue(çˆ¶)  MyProduct.vue(å­)</p>
<h3 id="2-0-vueç»„ä»¶é€šä¿¡-çˆ¶å‘å­-props"><a href="#2-0-vueç»„ä»¶é€šä¿¡-çˆ¶å‘å­-props" class="headerlink" title="2.0_vueç»„ä»¶é€šä¿¡_çˆ¶å‘å­-props"></a>2.0_vueç»„ä»¶é€šä¿¡_çˆ¶å‘å­-props</h3><blockquote>
<p>ç›®çš„: ä»å¤–é¢ç»™ç»„ä»¶å†…ä¼ å€¼, å…ˆå­¦ä¼šè¯­æ³•, ç»ƒä¹ ä¸­åœ¨çœ‹ä½¿ç”¨åœºæ™¯</p>
</blockquote>
<p>éœ€æ±‚: å°è£…ä¸€ä¸ªå•†å“ç»„ä»¶MyProduct.vue - å¤–éƒ¨ä¼ å…¥å…·ä½“è¦æ˜¾ç¤ºçš„æ•°æ®, å¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210305201956669.png" alt="image-20210305201956669"></p>
<p>æ­¥éª¤:</p>
<ol>
<li><p>åˆ›å»ºç»„ä»¶components/MyProduct.vue - å¤åˆ¶ä¸‹é¢æ ‡ç­¾</p>
</li>
<li><p>ç»„ä»¶å†…åœ¨propså®šä¹‰å˜é‡, ç”¨äºæ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„å€¼</p>
</li>
<li><p>App.vueä¸­å¼•å…¥æ³¨å†Œç»„ä»¶, ä½¿ç”¨æ—¶, ä¼ å…¥å…·ä½“æ•°æ®ç»™ç»„ä»¶æ˜¾ç¤º</p>
</li>
</ol>
<p>components/MyProduct.vue - å‡†å¤‡æ ‡ç­¾</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-product"&gt;</span><br><span class="line">    &lt;h3&gt;æ ‡é¢˜: {{ title }}&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;ä»·æ ¼: {{ price }}å…ƒ&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;{{ intro }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: ['title', 'price', 'intro']</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.my-product {</span><br><span class="line">  width: 400px;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border: 2px solid #000;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  margin: 10px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vueä¸­ä½¿ç”¨å¹¶ä¼ å…¥æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- </span><br><span class="line">      ç›®æ ‡: çˆ¶(App.vue) -&gt; å­(MyProduct.vue) åˆ†åˆ«ä¼ å€¼è¿›å…¥</span><br><span class="line">      éœ€æ±‚: æ¯æ¬¡ç»„ä»¶æ˜¾ç¤ºä¸åŒçš„æ•°æ®ä¿¡æ¯</span><br><span class="line">      æ­¥éª¤(å£è¯€):</span><br><span class="line">        1. å­ç»„ä»¶ - props - å˜é‡ (å‡†å¤‡æ¥æ”¶)</span><br><span class="line">        2. çˆ¶ç»„ä»¶ - ä¼ å€¼è¿›å»</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;Product title="å¥½åƒçš„å£æ°´é¸¡" price="50" intro="å¼€ä¸šå¤§é…¬å®¾, å…¨åœº8æŠ˜"&gt;&lt;/Product&gt;</span><br><span class="line">    &lt;Product title="å¥½å¯çˆ±çš„å¯çˆ±å¤š" price="20" intro="è€æ¿ä¸åœ¨å®¶, å…¨åœº1æŠ˜"&gt;&lt;/Product&gt;</span><br><span class="line">    &lt;Product title="å¥½è´µçš„åŒ—äº¬çƒ¤é¸­" price="290" :intro="str"&gt;&lt;/Product&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 1. åˆ›å»ºç»„ä»¶ (.vueæ–‡ä»¶)</span><br><span class="line">// 2. å¼•å…¥ç»„ä»¶</span><br><span class="line">import Product from './components/MyProduct'</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      str: "å¥½è´µå•Š, å¿«æ¥å•Š, å¥½åƒ"</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // 3. æ³¨å†Œç»„ä»¶</span><br><span class="line">  components: {</span><br><span class="line">    // Product: Product // keyå’Œvalueå˜é‡ååŒå - ç®€å†™</span><br><span class="line">    Product</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ç»„ä»¶å°è£…å¤ç”¨çš„æ ‡ç­¾å’Œæ ·å¼, è€Œå…·ä½“æ•°æ®è¦é å¤–é¢ä¼ å…¥</p>
</blockquote>
<h3 id="2-1-vueç»„ä»¶é€šä¿¡-çˆ¶å‘å­-é…åˆå¾ªç¯"><a href="#2-1-vueç»„ä»¶é€šä¿¡-çˆ¶å‘å­-é…åˆå¾ªç¯" class="headerlink" title="2.1_vueç»„ä»¶é€šä¿¡_çˆ¶å‘å­-é…åˆå¾ªç¯"></a>2.1_vueç»„ä»¶é€šä¿¡_çˆ¶å‘å­-é…åˆå¾ªç¯</h3><blockquote>
<p>ç›®çš„: æŠŠæ•°æ®å¾ªç¯åˆ†åˆ«ä¼ å…¥ç»™ç»„ä»¶å†…æ˜¾ç¤º</p>
</blockquote>
<p>æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">list: [</span><br><span class="line">    { <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">proname</span>: <span class="string">"è¶…çº§å¥½åƒçš„æ£’æ£’ç³–"</span>, <span class="attr">proprice</span>: <span class="number">18.8</span>, <span class="attr">info</span>: <span class="string">'å¼€ä¸šå¤§é…¬å®¾, å…¨åœº8æŠ˜'</span> },</span><br><span class="line">    { <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">proname</span>: <span class="string">"è¶…çº§å¥½åƒçš„å¤§é¸¡è…¿"</span>, <span class="attr">proprice</span>: <span class="number">34.2</span>, <span class="attr">info</span>: <span class="string">'å¥½åƒä¸è…», å¿«æ¥ä¹°å•Š'</span> },</span><br><span class="line">    { <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">proname</span>: <span class="string">"è¶…çº§æ— æ•Œçš„å†°æ¿€å‡Œ"</span>, <span class="attr">proprice</span>: <span class="number">14.2</span>, <span class="attr">info</span>: <span class="string">'ç‚çƒ­çš„å¤å¤©, æ¥ä¸ªå†°æ¿€å‡Œäº†'</span> },</span><br><span class="line">],</span><br></pre></td></tr></tbody></table></figure>

<p>æ­£ç¡®ä»£ç (==ä¸å¯å¤åˆ¶==)`</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;MyProduct v-for="obj in list" :key="obj.id"</span><br><span class="line">    :title="obj.proname"</span><br><span class="line">    :price="obj.proprice"</span><br><span class="line">    :intro="obj.info"</span><br><span class="line">    &gt;&lt;/MyProduct&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: å¾ªç¯ä½¿ç”¨ç»„ä»¶-åˆ†åˆ«ä¼ å…¥æ•°æ®</span><br><span class="line">// 1. åˆ›å»ºç»„ä»¶</span><br><span class="line">// 2. å¼•å…¥ç»„ä»¶</span><br><span class="line">import MyProduct from './components/MyProduct'</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [</span><br><span class="line">        {</span><br><span class="line">          id: 1,</span><br><span class="line">          proname: "è¶…çº§å¥½åƒçš„æ£’æ£’ç³–",</span><br><span class="line">          proprice: 18.8,</span><br><span class="line">          info: "å¼€ä¸šå¤§é…¬å®¾, å…¨åœº8æŠ˜",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          id: 2,</span><br><span class="line">          proname: "è¶…çº§å¥½åƒçš„å¤§é¸¡è…¿",</span><br><span class="line">          proprice: 34.2,</span><br><span class="line">          info: "å¥½åƒä¸è…», å¿«æ¥ä¹°å•Š",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          id: 3,</span><br><span class="line">          proname: "è¶…çº§æ— æ•Œçš„å†°æ¿€å‡Œ",</span><br><span class="line">          proprice: 14.2,</span><br><span class="line">          info: "ç‚çƒ­çš„å¤å¤©, æ¥ä¸ªå†°æ¿€å‡Œäº†",</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  // 3. æ³¨å†Œç»„ä»¶</span><br><span class="line">  components: {</span><br><span class="line">    // MyProduct: MyProduct</span><br><span class="line">    MyProduct</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<h3 id="å•å‘æ•°æ®æµ"><a href="#å•å‘æ•°æ®æµ" class="headerlink" title="å•å‘æ•°æ®æµ"></a>å•å‘æ•°æ®æµ</h3></blockquote>
<p>åœ¨vueä¸­éœ€è¦éµå¾ªå•å‘æ•°æ®æµåŸåˆ™</p>
<ol>
<li>çˆ¶ç»„ä»¶çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œå­ç»„ä»¶ä¼šè‡ªåŠ¨è·Ÿç€å˜</li>
<li>å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„props  propsæ˜¯åªè¯»çš„</li>
</ol>
<p>==çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå­ç»„ä»¶ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œæ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œå¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹, äº’ç›¸æ›´æ–°==</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210423161646951.png" alt="image-20210423161646951"></p>
<blockquote>
<p>æ€»ç»“: propsçš„å€¼ä¸èƒ½é‡æ–°èµ‹å€¼, å¯¹è±¡å¼•ç”¨å…³ç³»å±æ€§å€¼æ”¹å˜, äº’ç›¸å½±å“</p>
</blockquote>
<h3 id="2-2-vueç»„ä»¶é€šä¿¡-å•å‘æ•°æ®æµ"><a href="#2-2-vueç»„ä»¶é€šä¿¡-å•å‘æ•°æ®æµ" class="headerlink" title="2.2_vueç»„ä»¶é€šä¿¡_å•å‘æ•°æ®æµ"></a>2.2_vueç»„ä»¶é€šä¿¡_å•å‘æ•°æ®æµ</h3><blockquote>
<p>ç›®æ ‡: propså˜é‡æœ¬èº«æ˜¯åªè¯»ä¸èƒ½é‡æ–°èµ‹å€¼</p>
</blockquote>
<p>ç›®æ ‡ï¼šä»==çˆ¶åˆ°å­==çš„æ•°æ®æµå‘,å«==å•å‘æ•°æ®æµ==</p>
<p>åŸå› : å­ç»„ä»¶ä¿®æ”¹, ä¸é€šçŸ¥çˆ¶çº§, é€ æˆæ•°æ®ä¸ä¸€è‡´æ€§</p>
<p>å¦‚æœç¬¬ä¸€ä¸ªMyProduct.vueå†…è‡ªå·±ä¿®æ”¹å•†å“ä»·æ ¼ä¸º5.5, ä½†æ˜¯App.vueé‡ŒåŸæ¥è¿˜è®°ç€18.8 - æ•°æ® ä¸ä¸€è‡´äº†</p>
<p>æ‰€ä»¥: Vueè§„å®š==props==é‡Œçš„å˜é‡, ==æœ¬èº«æ˜¯åªè¯»==çš„</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210511143218215.png" alt="image-20210511143218215"></p>
<blockquote>
<p>æ€»ç»“: æ‰€ä»¥propså˜é‡æœ¬èº«æ˜¯ä¸èƒ½é‡æ–°èµ‹å€¼çš„</p>
</blockquote>
<p>é—®é¢˜:  é‚£æˆ‘æ€ä¹ˆæ‰èƒ½ä¿®æ”¹å­ç»„ä»¶æ¥æ”¶åˆ°çš„å€¼å‘¢? - å…¶å®è¦å½±å“çˆ¶äº², ç„¶åæ•°æ®å“åº”å¼æ¥å½±å“å„¿å­ä»¬</p>
<h3 id="2-3-vueç»„ä»¶é€šä¿¡-å­å‘çˆ¶"><a href="#2-3-vueç»„ä»¶é€šä¿¡-å­å‘çˆ¶" class="headerlink" title="2.3_vueç»„ä»¶é€šä¿¡_å­å‘çˆ¶"></a>2.3_vueç»„ä»¶é€šä¿¡_å­å‘çˆ¶</h3><blockquote>
<p>ç›®æ ‡: ä»å­ç»„ä»¶æŠŠå€¼ä¼ å‡ºæ¥ç»™å¤–é¢ä½¿ç”¨</p>
</blockquote>
<p>éœ€æ±‚: è¯¾ä¸Šä¾‹å­, ç ä»·åŠŸèƒ½, å­ç»„ä»¶ç‚¹å‡»å®ç°éšæœºç ä»·-1åŠŸèƒ½</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210307134253897.png" alt="image-20210307134253897"></p>
<p>è¯­æ³•:</p>
<ul>
<li>çˆ¶: @è‡ªå®šä¹‰äº‹ä»¶å=â€çˆ¶methodså‡½æ•°â€</li>
<li>å­: this.$emit(â€œè‡ªå®šä¹‰äº‹ä»¶åâ€, ä¼ å€¼) - æ‰§è¡Œçˆ¶methodsé‡Œå‡½æ•°ä»£ç </li>
</ul>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210217102551882.png" alt="image-20210217102551882"></p>
<p>components/MyProduct_sub.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-product"&gt;</span><br><span class="line">    &lt;h3&gt;æ ‡é¢˜: {{ title }}&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;ä»·æ ¼: {{ price }}å…ƒ&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;{{ intro }}&lt;/p&gt;</span><br><span class="line">    &lt;button @click="subFn"&gt;å®åˆ€-ç 1å…ƒ&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import eventBus from '../EventBus'</span><br><span class="line">export default {</span><br><span class="line">  props: ['index', 'title', 'price', 'intro'],</span><br><span class="line">  methods: {</span><br><span class="line">    subFn(){</span><br><span class="line">      this.$emit('subprice', this.index, 1) // å­å‘çˆ¶</span><br><span class="line">      eventBus.$emit("send", this.index, 1) // è·¨ç»„ä»¶</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.my-product {</span><br><span class="line">  width: 400px;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border: 2px solid #000;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  margin: 10px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- ç›®æ ‡: å­ä¼ çˆ¶ --&gt;</span><br><span class="line">    &lt;!-- 1. çˆ¶ç»„ä»¶, @è‡ªå®šä¹‰äº‹ä»¶å="çˆ¶methodså‡½æ•°" --&gt;</span><br><span class="line">    &lt;MyProduct v-for="(obj, ind) in list" :key="obj.id"</span><br><span class="line">    :title="obj.proname"</span><br><span class="line">    :price="obj.proprice"</span><br><span class="line">    :intro="obj.info"</span><br><span class="line">    :index="ind"</span><br><span class="line">    @subprice="fn"</span><br><span class="line">    &gt;&lt;/MyProduct&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import MyProduct from './components/MyProduct_sub'</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [</span><br><span class="line">        {</span><br><span class="line">          id: 1,</span><br><span class="line">          proname: "è¶…çº§å¥½åƒçš„æ£’æ£’ç³–",</span><br><span class="line">          proprice: 18.8,</span><br><span class="line">          info: "å¼€ä¸šå¤§é…¬å®¾, å…¨åœº8æŠ˜",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          id: 2,</span><br><span class="line">          proname: "è¶…çº§å¥½åƒçš„å¤§é¸¡è…¿",</span><br><span class="line">          proprice: 34.2,</span><br><span class="line">          info: "å¥½åƒä¸è…», å¿«æ¥ä¹°å•Š",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          id: 3,</span><br><span class="line">          proname: "è¶…çº§æ— æ•Œçš„å†°æ¿€å‡Œ",</span><br><span class="line">          proprice: 14.2,</span><br><span class="line">          info: "ç‚çƒ­çš„å¤å¤©, æ¥ä¸ªå†°æ¿€å‡Œäº†",</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  components: {</span><br><span class="line">    MyProduct</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    fn(inde, price){</span><br><span class="line">      // é€»è¾‘ä»£ç </span><br><span class="line">      this.list[inde].proprice &gt; 1 &amp;&amp; (this.list[inde].proprice = (this.list[inde].proprice - price).toFixed(2))</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: çˆ¶è‡ªå®šä¹‰äº‹ä»¶å’Œæ–¹æ³•, ç­‰å¾…å­ç»„ä»¶è§¦å‘äº‹ä»¶ç»™æ–¹æ³•ä¼ å€¼</p>
</blockquote>
<h3 id="2-4-é˜¶æ®µå°ç»“"><a href="#2-4-é˜¶æ®µå°ç»“" class="headerlink" title="2.4_é˜¶æ®µå°ç»“"></a>2.4_é˜¶æ®µå°ç»“</h3><blockquote>
<p>ç›®æ ‡: æ€»ç»“çˆ¶å­ç»„ä»¶å…³ç³»-é€šä¿¡æŠ€æœ¯å£è¯€</p>
</blockquote>
<p>ç»„ä»¶æ˜¯ä»€ä¹ˆ?</p>
<ul>
<li>æ˜¯ä¸€ä¸ªvueå®ä¾‹, å°è£…æ ‡ç­¾, æ ·å¼å’ŒJSä»£ç </li>
</ul>
<p>ç»„ä»¶å¥½å¤„?</p>
<ul>
<li>ä¾¿äºå¤ç”¨, æ˜“äºæ‰©å±•</li>
</ul>
<p>ç»„ä»¶é€šä¿¡å“ªå‡ ç§, å…·ä½“å¦‚ä½•å®ç°?</p>
<ul>
<li><p>çˆ¶ -&gt; å­</p>
</li>
<li><p>çˆ¶ &lt;- å­</p>
</li>
</ul>
<h3 id="2-5-vueç»„ä»¶é€šä¿¡-EventBus"><a href="#2-5-vueç»„ä»¶é€šä¿¡-EventBus" class="headerlink" title="2.5_vueç»„ä»¶é€šä¿¡-EventBus"></a>2.5_vueç»„ä»¶é€šä¿¡-EventBus</h3><blockquote>
<p>ç›®æ ‡: å¸¸ç”¨äºè·¨ç»„ä»¶é€šä¿¡æ—¶ä½¿ç”¨</p>
</blockquote>
<p>ä¸¤ä¸ªç»„ä»¶çš„å…³ç³»éå¸¸çš„å¤æ‚ï¼Œé€šè¿‡çˆ¶å­ç»„ä»¶é€šè®¯æ˜¯éå¸¸éº»çƒ¦çš„ã€‚è¿™æ—¶å€™å¯ä»¥ä½¿ç”¨é€šç”¨çš„ç»„ä»¶é€šè®¯æ–¹æ¡ˆï¼šäº‹ä»¶æ€»çº¿ï¼ˆevent-bus)</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210416122123301.png" alt="image-20210416122123301"></p>
<p>æ ¸å¿ƒè¯­æ³•</p>
<p>EventBus/index.js- å®šä¹‰äº‹ä»¶æ€»çº¿buså¯¹è±¡</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="comment">// å¯¼å‡ºç©ºç™½vueå¯¹è±¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vue()</span><br></pre></td></tr></tbody></table></figure>

<p>List.vueæ³¨å†Œäº‹ä»¶ - ç­‰å¾…æ¥æ”¶è¦ç ä»·çš„å€¼ (==ç›´æ¥å¤åˆ¶==) - å‡†å¤‡å…„å¼Ÿé¡µé¢</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class="my-product"&gt;</span><br><span class="line">      &lt;li v-for="(item, index) in arr" :key="index"&gt;</span><br><span class="line">          &lt;span&gt;{{ item.proname }}&lt;/span&gt;</span><br><span class="line">          &lt;span&gt;{{ item.proprice }}&lt;/span&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: ['arr'],</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.my-product {</span><br><span class="line">  width: 400px;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border: 2px solid #000;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  margin: 10px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>components/MyProduct_sub.vue(==å¸¦å­¦ç”Ÿä¸»è¦å†™è§¦å‘eventBusèº«ä¸Šäº‹ä»¶==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my-product"&gt;</span><br><span class="line">    &lt;h3&gt;æ ‡é¢˜: {{ title }}&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;ä»·æ ¼: {{ price }}å…ƒ&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;{{ intro }}&lt;/p&gt;</span><br><span class="line">    &lt;button @click="subFn"&gt;å®åˆ€-ç 1å…ƒ&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import eventBus from '../EventBus'</span><br><span class="line">export default {</span><br><span class="line">  props: ['index', 'title', 'price', 'intro'],</span><br><span class="line">  methods: {</span><br><span class="line">    subFn(){</span><br><span class="line">      this.$emit('subprice', this.index, 1) // å­å‘çˆ¶</span><br><span class="line">      eventBus.$emit("send", this.index, 1) // è·¨ç»„ä»¶</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.my-product {</span><br><span class="line">  width: 400px;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border: 2px solid #000;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  margin: 10px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>List.vueæ­£ç¡®ä»£ç (==EventBusæ¥æ”¶æ–¹==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class="my-product"&gt;</span><br><span class="line">    &lt;li v-for="(item, index) in arr" :key="index"&gt;</span><br><span class="line">      &lt;span&gt;{{ item.proname }}&lt;/span&gt;</span><br><span class="line">      &lt;span&gt;{{ item.proprice }}&lt;/span&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// ç›®æ ‡: è·¨ç»„ä»¶ä¼ å€¼</span><br><span class="line">// 1. å¼•å…¥ç©ºç™½vueå¯¹è±¡(EventBus)</span><br><span class="line">// 2. æ¥æ”¶æ–¹ - $onç›‘å¬äº‹ä»¶</span><br><span class="line">import eventBus from "../EventBus";</span><br><span class="line">export default {</span><br><span class="line">  props: ["arr"],</span><br><span class="line">  // 3. ç»„ä»¶åˆ›å»ºå®Œæ¯•, ç›‘å¬sendäº‹ä»¶</span><br><span class="line">  created() {</span><br><span class="line">    eventBus.$on("send", (index, price) =&gt; {</span><br><span class="line">      this.arr[index].proprice &gt; 1 &amp;&amp;</span><br><span class="line">        (this.arr[index].proprice = (this.arr[index].proprice - price).toFixed(2));</span><br><span class="line">    });</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.my-product {</span><br><span class="line">  width: 400px;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border: 2px solid #000;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  margin: 10px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: ç©ºçš„Vueå¯¹è±¡, åªè´Ÿè´£$onæ³¨å†Œäº‹ä»¶, $emitè§¦å‘äº‹ä»¶, ä¸€å®šè¦ç¡®ä¿$onå…ˆæ‰§è¡Œ</p>
</blockquote>
<h2 id="3-todoæ¡ˆä¾‹"><a href="#3-todoæ¡ˆä¾‹" class="headerlink" title="3. todoæ¡ˆä¾‹"></a>3. todoæ¡ˆä¾‹</h2><p>å®Œæ•´æ•ˆæœæ¼”ç¤º</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/%E5%93%81%E7%89%8C%E7%AE%A1%E7%90%86_%E9%93%BA%E5%A2%9E%E5%88%A0.gif" alt="å“ç‰Œç®¡ç†_é“ºå¢åˆ "></p>
<h3 id="3-0-todoæ¡ˆä¾‹-åˆ›å»ºå·¥ç¨‹å’Œç»„ä»¶"><a href="#3-0-todoæ¡ˆä¾‹-åˆ›å»ºå·¥ç¨‹å’Œç»„ä»¶" class="headerlink" title="3.0_todoæ¡ˆä¾‹-åˆ›å»ºå·¥ç¨‹å’Œç»„ä»¶"></a>3.0_todoæ¡ˆä¾‹-åˆ›å»ºå·¥ç¨‹å’Œç»„ä»¶</h3><blockquote>
<p>ç›®æ ‡: æ–°å»ºå·¥ç¨‹, å‡†å¤‡å¥½æ‰€éœ€çš„ä¸€åˆ‡</p>
</blockquote>
<ul>
<li>éœ€æ±‚1: åˆ›å»ºæ–°å·¥ç¨‹</li>
<li>éœ€æ±‚2: åˆ†ç»„ä»¶åˆ›å»º â€“ å‡†å¤‡æ ‡ç­¾å’Œæ ·å¼(ä».mdç¬”è®°å¤åˆ¶)</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ ï¼šåˆå§‹åŒ–todoå·¥ç¨‹</p>
<p>â€‹    â‘¡ï¼šåˆ›å»ºï¼“ä¸ªç»„ä»¶å’Œé‡Œé¢ä»£ç (åœ¨é¢„ä¹ èµ„æ–™.mdå¤åˆ¶)</p>
<p>â€‹    â‘¢ï¼šæŠŠstylesçš„æ ·å¼æ–‡ä»¶å‡†å¤‡å¥½(ä»é¢„ä¹ èµ„æ–™å¤åˆ¶)</p>
<p>â€‹    â‘£:  App.vueå¼•å…¥æ³¨å†Œä½¿ç”¨, æœ€å¤–å±‚å®¹å™¨ç±»åtodoapp</p>
<p>é¢„å…ˆå‡†å¤‡: æŠŠstylesçš„æ ·å¼æ–‡ä»¶å‡†å¤‡å¥½(ä»é¢„ä¹ èµ„æ–™å¤åˆ¶), åœ¨App.vueå¼•å…¥ä½¿ç”¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// 1.0 æ ·å¼å¼•å…¥</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./styles/base.css"</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">"./styles/index.css"</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ ¹æ®éœ€æ±‚: æˆ‘ä»¬å®šä¹‰3ä¸ªç»„ä»¶å‡†å¤‡å¤ç”¨</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210423162040577.png" alt="image-20210423162040577"></p>
<p>components/TodoHeader.vue - å¤åˆ¶æ ‡ç­¾å’Œç±»å</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header class="header"&gt;</span><br><span class="line">    &lt;h1&gt;todos&lt;/h1&gt;</span><br><span class="line">    &lt;input id="toggle-all" class="toggle-all" type="checkbox" &gt;</span><br><span class="line">    &lt;label for="toggle-all"&gt;&lt;/label&gt;</span><br><span class="line">    &lt;input</span><br><span class="line">      class="new-todo"</span><br><span class="line">      placeholder="è¾“å…¥ä»»åŠ¡åç§°-å›è½¦ç¡®è®¤"</span><br><span class="line">      autofocus</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"> </span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>components/TodoMain.vue - å¤åˆ¶æ ‡ç­¾å’Œç±»å</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class="todo-list"&gt;</span><br><span class="line">    &lt;!-- completed: å®Œæˆçš„ç±»å --&gt;</span><br><span class="line">    &lt;li class="completed" &gt;</span><br><span class="line">      &lt;div class="view"&gt;</span><br><span class="line">        &lt;input class="toggle" type="checkbox" /&gt;</span><br><span class="line">        &lt;label&gt;ä»»åŠ¡å&lt;/label&gt;</span><br><span class="line">        &lt;button class="destroy"&gt;&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  </span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>components/TodoFooter.vue - å¤åˆ¶æ ‡ç­¾å’Œç±»å</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;footer class="footer"&gt;</span><br><span class="line">    &lt;span class="todo-count"&gt;å‰©ä½™&lt;strong&gt;æ•°é‡å€¼&lt;/strong&gt;&lt;/span&gt;</span><br><span class="line">    &lt;ul class="filters"&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;a class="selected" href="javascript:;" &gt;å…¨éƒ¨&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;a href="javascript:;"&gt;æœªå®Œæˆ&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;a href="javascript:;" &gt;å·²å®Œæˆ&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button class="clear-completed" &gt;æ¸…é™¤å·²å®Œæˆ&lt;/button&gt;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vueä¸­å¼•å…¥å’Œä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;section class="todoapp"&gt;</span><br><span class="line">    &lt;!-- é™¤äº†é©¼å³°, è¿˜å¯ä»¥ä½¿ç”¨-è½¬æ¢é“¾æ¥ --&gt;</span><br><span class="line">    &lt;TodoHeader&gt;&lt;/TodoHeader&gt;</span><br><span class="line">    &lt;TodoMain&gt;&lt;/TodoMain&gt;</span><br><span class="line">    &lt;TodoFooter&gt;&lt;/TodoFooter&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 1.0 æ ·å¼å¼•å…¥</span><br><span class="line">import "./styles/base.css"</span><br><span class="line">import "./styles/index.css"</span><br><span class="line">    </span><br><span class="line">import TodoHeader from "./components/TodoHeader";</span><br><span class="line">import TodoMain from "./components/TodoMain";</span><br><span class="line">import TodoFooter from "./components/TodoFooter";</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    TodoHeader,</span><br><span class="line">    TodoMain,</span><br><span class="line">    TodoFooter,</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-1-todoæ¡ˆä¾‹-é“ºè®¾å¾…åŠä»»åŠ¡"><a href="#3-1-todoæ¡ˆä¾‹-é“ºè®¾å¾…åŠä»»åŠ¡" class="headerlink" title="3.1_todoæ¡ˆä¾‹-é“ºè®¾å¾…åŠä»»åŠ¡"></a>3.1_todoæ¡ˆä¾‹-é“ºè®¾å¾…åŠä»»åŠ¡</h3><blockquote>
<p>ç›®çš„: æŠŠå¾…åŠä»»åŠ¡, å±•ç¤ºåˆ°é¡µé¢TodoMain.vueç»„ä»¶ä¸Š</p>
</blockquote>
<ul>
<li>éœ€æ±‚1: æŠŠå¾…åŠä»»åŠ¡, å±•ç¤ºåˆ°é¡µé¢TodoMain.vueç»„ä»¶ä¸Š</li>
<li>éœ€æ±‚2: å…³è”é€‰ä¸­çŠ¶æ€, è®¾ç½®ç›¸å…³æ ·å¼</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : App.vue â€“ å‡†å¤‡æ•°ç»„ä¼ å…¥TodoMain.vueå†…</p>
<p>â€‹    â‘¡: v-forå¾ªç¯å±•ç¤ºæ•°æ®</p>
<p>â€‹    â‘¢: v-modelç»‘å®šå¤é€‰æ¡†é€‰ä¸­çŠ¶æ€</p>
<p>â€‹    â‘£: æ ¹æ®é€‰ä¸­çŠ¶æ€, è®¾ç½®å®Œæˆåˆ’çº¿æ ·å¼</p>
<p>App.vue</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"> &lt;TodoMain :arr=<span class="string">"showArr"</span>&gt;&lt;/TodoMain&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">list</span>: [</span><br><span class="line">        { <span class="attr">id</span>: <span class="number">100</span>, <span class="attr">name</span>: <span class="string">"åƒé¥­"</span>, <span class="attr">isDone</span>: <span class="literal">true</span> },</span><br><span class="line">        { <span class="attr">id</span>: <span class="number">201</span>, <span class="attr">name</span>: <span class="string">"ç¡è§‰"</span>, <span class="attr">isDone</span>: <span class="literal">false</span> },</span><br><span class="line">        { <span class="attr">id</span>: <span class="number">103</span>, <span class="attr">name</span>: <span class="string">"æ‰“è±†è±†"</span>, <span class="attr">isDone</span>: <span class="literal">true</span> },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  }</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>

<p>TodoMain.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul class="todo-list"&gt;</span><br><span class="line">    &lt;!-- 2.2 å¾ªç¯ä»»åŠ¡-å…³è”é€‰ä¸­çŠ¶æ€-é“ºè®¾æ•°æ® --&gt;</span><br><span class="line">    &lt;!-- completed: å®Œæˆçš„ç±»å --&gt;</span><br><span class="line">    &lt;li :class="{completed: obj.isDone}" v-for="(obj, index) in arr" :key='obj.id'&gt;</span><br><span class="line">      &lt;div class="view"&gt;</span><br><span class="line">        &lt;input class="toggle" type="checkbox" v-model="obj.isDone"/&gt;</span><br><span class="line">        &lt;label&gt;{{ obj.name }}&lt;/label&gt;</span><br><span class="line">        &lt;!-- 4.0 æ³¨å†Œç‚¹å‡»äº‹ä»¶ --&gt;</span><br><span class="line">        &lt;button @click="delFn(index)" class="destroy"&gt;&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: ["list"]</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-2-todoæ¡ˆä¾‹-æ·»åŠ ä»»åŠ¡"><a href="#3-2-todoæ¡ˆä¾‹-æ·»åŠ ä»»åŠ¡" class="headerlink" title="3.2_todoæ¡ˆä¾‹-æ·»åŠ ä»»åŠ¡"></a>3.2_todoæ¡ˆä¾‹-æ·»åŠ ä»»åŠ¡</h3><blockquote>
<p>ç›®æ ‡: åœ¨é¡¶éƒ¨è¾“å…¥æ¡†è¾“å…¥è¦å®Œæˆçš„ä»»åŠ¡å, æ•²å‡»å›è½¦, å®Œæˆæ–°å¢åŠŸèƒ½</p>
</blockquote>
<ul>
<li>éœ€æ±‚: è¾“å…¥ä»»åŠ¡æ•²å‡»å›è½¦, æ–°å¢å¾…åŠä»»åŠ¡</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : TodoHeader.vue â€“ è¾“å…¥æ¡† â€“ é”®ç›˜äº‹ä»¶ â€“ å›è½¦æŒ‰é”®</p>
<p>â€‹    â‘¡: å­ä¼ çˆ¶, æŠŠå¾…åŠä»»åŠ¡ â€“ App.vueä¸­ â€“ åŠ å…¥æ•°ç»„listé‡Œ</p>
<p>â€‹    â‘¢: åŸæ•°ç»„æ”¹å˜, æ‰€æœ‰ç”¨åˆ°çš„åœ°æ–¹éƒ½ä¼šæ›´æ–°</p>
<p>â€‹    â‘£: è¾“å…¥æ¡†ä¸ºç©º, æç¤ºç”¨æˆ·å¿…é¡»è¾“å…¥å†…å®¹</p>
<p>TodoHeader.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;header class="header"&gt;</span><br><span class="line">    &lt;h1&gt;todos&lt;/h1&gt;</span><br><span class="line">    &lt;input id="toggle-all" class="toggle-all" type="checkbox" v-model="isAll"&gt;</span><br><span class="line">    &lt;label for="toggle-all"&gt;&lt;/label&gt;</span><br><span class="line">    &lt;!-- 3.0 é”®ç›˜äº‹ä»¶-å›è½¦æŒ‰é”®</span><br><span class="line">         3.1 è¾“å…¥æ¡† - v-modelè·å–å€¼</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;input</span><br><span class="line">      class="new-todo"</span><br><span class="line">      placeholder="è¾“å…¥ä»»åŠ¡åç§°-å›è½¦ç¡®è®¤"</span><br><span class="line">      autofocus</span><br><span class="line">      @keydown.enter="downFn"</span><br><span class="line">      v-model="task"</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/header&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 3. ç›®æ ‡ - æ–°å¢ä»»åŠ¡</span><br><span class="line">export default {</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      task: ""</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    downFn(){</span><br><span class="line">      if (this.task.trim().length === 0) {</span><br><span class="line">        alert("ä»»åŠ¡åä¸èƒ½ä¸ºç©º");</span><br><span class="line">        return;</span><br><span class="line">      }</span><br><span class="line">      // 3.2(é‡è¦) - å½“å‰ä»»åŠ¡åå­—è¦åŠ åˆ°listæ•°ç»„é‡Œ</span><br><span class="line">      // å­ä¼ çˆ¶æŠ€æœ¯</span><br><span class="line">      this.$emit("create", this.task)</span><br><span class="line">      this.task = ""</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&lt;TodoHeader @create=<span class="string">"createFn"</span>&gt;&lt;/TodoHeader&gt;</span><br><span class="line"></span><br><span class="line">methods: {</span><br><span class="line">   <span class="function"><span class="title">createFn</span>(<span class="params">taskName</span>)</span>{ <span class="comment">// æ·»åŠ ä»»åŠ¡</span></span><br><span class="line">      <span class="comment">// 3.3 pushåˆ°æ•°ç»„é‡Œ</span></span><br><span class="line">      <span class="keyword">let</span> id = <span class="built_in">this</span>.list.length == <span class="number">0</span> ? <span class="number">100</span> : <span class="built_in">this</span>.list[<span class="built_in">this</span>.list.length - <span class="number">1</span>].id + <span class="number">1</span></span><br><span class="line">      <span class="built_in">this</span>.list.push({</span><br><span class="line">        <span class="attr">id</span>: id,</span><br><span class="line">        <span class="attr">name</span>: taskName,</span><br><span class="line">        <span class="attr">isDone</span>: <span class="literal">false</span></span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-3-todoæ¡ˆä¾‹-åˆ é™¤ä»»åŠ¡"><a href="#3-3-todoæ¡ˆä¾‹-åˆ é™¤ä»»åŠ¡" class="headerlink" title="3.3_todoæ¡ˆä¾‹-åˆ é™¤ä»»åŠ¡"></a>3.3_todoæ¡ˆä¾‹-åˆ é™¤ä»»åŠ¡</h3><blockquote>
<p>ç›®æ ‡: å®ç°ç‚¹x, åˆ é™¤ä»»åŠ¡åŠŸèƒ½</p>
</blockquote>
<ul>
<li>éœ€æ±‚: ç‚¹å‡»ä»»åŠ¡åçš„x, åˆ é™¤å½“å‰è¿™æ¡ä»»åŠ¡</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : xæ ‡ç­¾ â€“ ç‚¹å‡»äº‹ä»¶ â€“ ä¼ å…¥idåŒºåˆ†</p>
<p>â€‹    â‘¡: å­ä¼ çˆ¶, æŠŠidä¼ å›â€“ App.vueä¸­ â€“ åˆ é™¤æ•°ç»„listé‡ŒæŸä¸ªå¯¹åº”çš„å¯¹è±¡</p>
<p>â€‹    â‘¢: åŸæ•°ç»„æ”¹å˜, æ‰€æœ‰ç”¨åˆ°çš„åœ°æ–¹éƒ½ä¼šæ›´æ–°</p>
<p>App.vue - ä¼ å…¥è‡ªå®šä¹‰äº‹ä»¶ç­‰å¾…æ¥æ”¶è¦è¢«åˆ é™¤çš„åºå·</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&lt;TodoMain :arr=<span class="string">"showArr"</span> @del=<span class="string">"deleteFn"</span>&gt;&lt;/TodoMain&gt;</span><br><span class="line"></span><br><span class="line">methods: {</span><br><span class="line">    <span class="function"><span class="title">deleteFn</span>(<span class="params">theId</span>)</span>{ <span class="comment">// åˆ é™¤ä»»åŠ¡</span></span><br><span class="line">      <span class="keyword">let</span> index = <span class="built_in">this</span>.list.findIndex(<span class="function"><span class="params">obj</span> =&gt;</span> obj.id === theId)</span><br><span class="line">      <span class="built_in">this</span>.list.splice(index, <span class="number">1</span>)</span><br><span class="line">    },</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p>TodoMain.vue - æŠŠidä¼ å›å»å®ç°åˆ é™¤(æƒ³å¥½æ•°æ®åœ¨å“ªé‡Œ, å°±åœ¨å“ªé‡Œåˆ é™¤)</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- <span class="number">4.0</span> æ³¨å†Œç‚¹å‡»äº‹ä»¶ --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"destroy"</span> @<span class="attr">click</span>=<span class="string">"delFn(obj.id)"</span>&gt;</span><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">methods: {</span><br><span class="line">     <span class="function"><span class="title">delFn</span>(<span class="params">id</span>)</span>{</span><br><span class="line">      <span class="comment">// 4.1 å­ä¼ çˆ¶</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'del'</span>, id)</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-4-todoæ¡ˆä¾‹-åº•éƒ¨ç»Ÿè®¡"><a href="#3-4-todoæ¡ˆä¾‹-åº•éƒ¨ç»Ÿè®¡" class="headerlink" title="3.4_todoæ¡ˆä¾‹-åº•éƒ¨ç»Ÿè®¡"></a>3.4_todoæ¡ˆä¾‹-åº•éƒ¨ç»Ÿè®¡</h3><blockquote>
<p>ç›®çš„: æ˜¾ç¤ºç°åœ¨ä»»åŠ¡çš„æ€»æ•°</p>
</blockquote>
<ul>
<li>éœ€æ±‚: ç»Ÿè®¡å½“å‰ä»»åŠ¡çš„æ¡æ•°</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : App.vueä¸­ â€“ æ•°ç»„list â€“ ä¼ ç»™TodoFooter.vue</p>
<p>â€‹    â‘¡: ç›´æ¥åœ¨æ ‡ç­¾ä¸Šæ˜¾ç¤º / å®šä¹‰è®¡ç®—å±æ€§ç”¨äºæ˜¾ç¤ºéƒ½å¯ä»¥</p>
<p>â€‹    â‘¢: åŸæ•°ç»„åªè¦æ”¹å˜, æ‰€æœ‰ç”¨åˆ°æ­¤æ•°ç»„çš„åœ°æ–¹éƒ½ä¼šæ›´æ–°</p>
<p>TodoFooter.vue - æ¥æ”¶listç»Ÿè®¡ç›´æ¥æ˜¾ç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;footer class="footer"&gt;</span><br><span class="line">    &lt;span class="todo-count"&gt;å‰©ä½™&lt;strong&gt;{{ count }}&lt;/strong&gt;&lt;/span&gt;</span><br><span class="line">    &lt;ul class="filters"&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;a class="selected" href="javascript:;"&gt;å…¨éƒ¨&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;a href="javascript:;"&gt;æœªå®Œæˆ&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;a href="javascript:;"&gt;å·²å®Œæˆ&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;button class="clear-completed"&gt;æ¸…é™¤å·²å®Œæˆ&lt;/button&gt;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  // 5.0 propså®šä¹‰</span><br><span class="line">  props: ['farr'],</span><br><span class="line">  // 5.1 è®¡ç®—å±æ€§ - ä»»åŠ¡æ•°é‡</span><br><span class="line">  computed: {</span><br><span class="line">    count(){</span><br><span class="line">      return this.farr.length</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue - ä¼ å…¥æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;TodoFooter :farr="showArr"&gt;&lt;/TodoFooter&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-5-todoæ¡ˆä¾‹-æ•°æ®åˆ‡æ¢"><a href="#3-5-todoæ¡ˆä¾‹-æ•°æ®åˆ‡æ¢" class="headerlink" title="3.5_todoæ¡ˆä¾‹-æ•°æ®åˆ‡æ¢"></a>3.5_todoæ¡ˆä¾‹-æ•°æ®åˆ‡æ¢</h3><blockquote>
<p>ç›®çš„: ç‚¹å‡»åº•éƒ¨åˆ‡æ¢æ•°æ®</p>
</blockquote>
<ul>
<li>éœ€æ±‚1: ç‚¹å‡»åº•éƒ¨åˆ‡æ¢ â€“ ç‚¹è°è°æœ‰è¾¹æ¡†</li>
<li>éœ€æ±‚2: å¯¹åº”åˆ‡æ¢ä¸åŒæ•°æ®æ˜¾ç¤º</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : TodoFooter.vue â€“ å®šä¹‰isSel â€“ å€¼ä¸ºall, yes, noå…¶ä¸­ä¸€ç§</p>
<p>â€‹    â‘¡: å¤šä¸ªclassåˆ†åˆ«åˆ¤æ–­è°åº”è¯¥æœ‰ç±»åselected</p>
<p>â€‹    â‘¢: ç‚¹å‡»ä¿®æ”¹isSelçš„å€¼</p>
<p>â€‹    â‘£: å­ä¼ çˆ¶, æŠŠç±»å‹isSelä¼ åˆ°App.vue</p>
<p>â€‹    â‘¤: å®šä¹‰è®¡ç®—å±æ€§showArr, å†³å®šä»listé‡Œæ˜¾ç¤ºå“ªäº›æ•°æ®ç»™TodoMain.vueå’ŒTodoFooter.vue</p>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;TodoFooter :farr="showArr" @changeType="typeFn"&gt;&lt;/TodoFooter&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default{</span><br><span class="line">       data(){</span><br><span class="line">            return {</span><br><span class="line">              // ...å…¶ä»–çœç•¥</span><br><span class="line">              getSel: "all" // é»˜è®¤æ˜¾ç¤ºå…¨éƒ¨</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        methods: {</span><br><span class="line">            // ...å…¶ä»–çœç•¥</span><br><span class="line">            typeFn(str){ // 'all' 'yes' 'no' // ä¿®æ”¹ç±»å‹</span><br><span class="line">              this.getSel = str</span><br><span class="line">            },</span><br><span class="line">        },</span><br><span class="line">        // 6.5 å®šä¹‰showArræ•°ç»„ - é€šè¿‡listé…åˆæ¡ä»¶ç­›é€‰è€Œæ¥</span><br><span class="line">          computed: {</span><br><span class="line">            showArr(){</span><br><span class="line">              if (this.getSel === 'yes') { // æ˜¾ç¤ºå·²å®Œæˆ</span><br><span class="line">                return this.list.filter(obj =&gt; obj.isDone === true)</span><br><span class="line">              } else if (this.getSel === 'no') { // æ˜¾ç¤ºæœªå®Œæˆ</span><br><span class="line">                return this.list.filter(obj =&gt; obj.isDone === false)</span><br><span class="line">              } else {</span><br><span class="line">                return this.list // å…¨éƒ¨æ˜¾ç¤º</span><br><span class="line">              }</span><br><span class="line">            }</span><br><span class="line">          },</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>TodoFooter.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;footer class="footer"&gt;</span><br><span class="line">    &lt;span class="todo-count"&gt;å‰©ä½™&lt;strong&gt;{{ count }}&lt;/strong&gt;&lt;/span&gt;</span><br><span class="line">    &lt;ul class="filters" @click="fn"&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;!-- 6.1 åˆ¤æ–­è°åº”è¯¥æœ‰é«˜äº®æ ·å¼: åŠ¨æ€class</span><br><span class="line">            6.2 ç”¨æˆ·ç‚¹å‡»è¦åˆ‡æ¢isSelé‡Œä¿å­˜çš„å€¼</span><br><span class="line">         --&gt;</span><br><span class="line">        &lt;a :class="{selected: isSel === 'all'}" href="javascript:;" @click="isSel='all'"&gt;å…¨éƒ¨&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;a :class="{selected: isSel === 'no'}" href="javascript:;" @click="isSel='no'"&gt;æœªå®Œæˆ&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;a :class="{selected: isSel === 'yes'}" href="javascript:;" @click="isSel='yes'"&gt;å·²å®Œæˆ&lt;/a&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;!-- 7. ç›®æ ‡: æ¸…é™¤å·²å®Œæˆ --&gt;</span><br><span class="line">    &lt;!-- 7.0 ç‚¹å‡»äº‹ä»¶ --&gt;</span><br><span class="line">    &lt;button class="clear-completed" &gt;æ¸…é™¤å·²å®Œæˆ&lt;/button&gt;</span><br><span class="line">  &lt;/footer&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 5. ç›®æ ‡: æ•°é‡ç»Ÿè®¡</span><br><span class="line">export default {</span><br><span class="line">  // 5.0 propså®šä¹‰</span><br><span class="line">  props: ['farr'],</span><br><span class="line">  // 5.1 è®¡ç®—å±æ€§ - ä»»åŠ¡æ•°é‡</span><br><span class="line">  computed: {</span><br><span class="line">    count(){</span><br><span class="line">      return this.farr.length</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // 6. ç›®æ ‡: ç‚¹è°è°äº®</span><br><span class="line">  // 6.0 å˜é‡isSel</span><br><span class="line">  data(){</span><br><span class="line">    return {</span><br><span class="line">      isSel: 'all' // å…¨éƒ¨:'all', å·²å®Œæˆ'yes', æœªå®Œæˆ'no'</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    fn(){ // åˆ‡æ¢ç­›é€‰æ¡ä»¶</span><br><span class="line">      // 6.3 å­ -&gt; çˆ¶ æŠŠç±»å‹å­—ç¬¦ä¸²ä¼ ç»™App.vue </span><br><span class="line">      this.$emit("changeType", this.isSel)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-6-todoæ¡ˆä¾‹-æ¸…ç©ºå·²å®Œæˆ"><a href="#3-6-todoæ¡ˆä¾‹-æ¸…ç©ºå·²å®Œæˆ" class="headerlink" title="3.6_todoæ¡ˆä¾‹-æ¸…ç©ºå·²å®Œæˆ"></a>3.6_todoæ¡ˆä¾‹-æ¸…ç©ºå·²å®Œæˆ</h3><blockquote>
<p>ç›®çš„: ç‚¹å‡»å³ä¸‹è§’æŒ‰é’®- æŠŠå·²ç»å®Œæˆçš„ä»»åŠ¡æ¸…ç©ºäº†</p>
</blockquote>
<ul>
<li>éœ€æ±‚: ç‚¹å‡»å³ä¸‹è§’é“¾æ¥æ ‡ç­¾, æ¸…é™¤å·²å®Œæˆä»»åŠ¡ </li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : æ¸…ç©ºæ ‡ç­¾ â€“ ç‚¹å‡»äº‹ä»¶</p>
<p>â€‹    â‘¡: å­ä¼ çˆ¶ â€“ App.vue â€“ ä¸€ä¸ªæ¸…ç©ºæ–¹æ³•</p>
<p>â€‹    â‘¢: è¿‡æ»¤æœªå®Œæˆçš„è¦†ç›–listæ•°ç»„ (ä¸è€ƒè™‘æ¢å¤)</p>
<p>App.vue - å…ˆä¼ å…¥ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶-å› ä¸ºå¾—æ¥æ”¶TodoFooter.vueé‡Œçš„ç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;TodoFooter :farr="showArr" @changeType="typeFn" @clear="clearFun"&gt;&lt;/TodoFooter&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    methods: {</span><br><span class="line">        // ...çœç•¥å…¶ä»–</span><br><span class="line">        clearFun(){ // æ¸…é™¤å·²å®Œæˆ</span><br><span class="line">          this.list = this.list.filter(obj =&gt; obj.isDone == false)</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>TodoFooter.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- 7. ç›®æ ‡: æ¸…é™¤å·²å®Œæˆ --&gt;</span><br><span class="line">&lt;!-- 7.0 ç‚¹å‡»äº‹ä»¶ --&gt;</span><br><span class="line">&lt;button class="clear-completed" @click="clearFn"&gt;æ¸…é™¤å·²å®Œæˆ&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	methods: {</span><br><span class="line">        clearFn(){ // æ¸…ç©ºå·²å®Œæˆä»»åŠ¡</span><br><span class="line">          // 7.1 è§¦å‘App.vueé‡Œäº‹ä»¶å¯¹åº”clearFunæ–¹æ³•</span><br><span class="line">          this.$emit('clear')</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-7-todoæ¡ˆä¾‹-æ•°æ®ç¼“å­˜"><a href="#3-7-todoæ¡ˆä¾‹-æ•°æ®ç¼“å­˜" class="headerlink" title="3.7_todoæ¡ˆä¾‹-æ•°æ®ç¼“å­˜"></a>3.7_todoæ¡ˆä¾‹-æ•°æ®ç¼“å­˜</h3><blockquote>
<p>ç›®çš„: æ–°å¢/ä¿®æ”¹çŠ¶æ€/åˆ é™¤ å, é©¬ä¸ŠæŠŠæ•°æ®åŒæ­¥åˆ°æµè§ˆå™¨æœ¬åœ°å­˜å‚¨</p>
</blockquote>
<ul>
<li>éœ€æ±‚: æ— è®ºå¦‚ä½•å˜åŒ– â€“ éƒ½ä¿è¯åˆ·æ–°åæ•°æ®è¿˜åœ¨</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : App.vue â€“ ä¾¦å¬listæ•°ç»„æ”¹å˜ â€“ æ·±åº¦</p>
<p>â€‹    â‘¡: è¦†ç›–å¼å­˜å…¥åˆ°æœ¬åœ° â€“ æ³¨æ„æœ¬åœ°åªèƒ½å­˜å…¥JSONå­—ç¬¦ä¸²</p>
<p>â€‹    â‘¢: åˆ·æ–°é¡µé¢ â€“ liståº”è¯¥é»˜è®¤ä»æœ¬åœ°å–å€¼ â€“ è¦è€ƒè™‘æ— æ•°æ®æƒ…å†µç©ºæ•°ç»„</p>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    export default {</span><br><span class="line">        data(){</span><br><span class="line">            return {</span><br><span class="line">                // 8.1 é»˜è®¤ä»æœ¬åœ°å–å€¼</span><br><span class="line">                list: JSON.parse(localStorage.getItem('todoList')) || [],</span><br><span class="line">                // 6.4 å…ˆä¸­è½¬æ¥æ”¶ç±»å‹å­—ç¬¦ä¸²</span><br><span class="line">                getSel: "all" // é»˜è®¤æ˜¾ç¤ºå…¨éƒ¨</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        // 8. ç›®æ ‡: æ•°æ®ç¼“å­˜</span><br><span class="line">        watch: {</span><br><span class="line">            list: {</span><br><span class="line">                deep: true,</span><br><span class="line">                handler(){</span><br><span class="line">                    // 8.0 åªè¦listå˜åŒ– - è¦†ç›–å¼ä¿å­˜åˆ°localStorageé‡Œ</span><br><span class="line">                    localStorage.setItem('todoList', JSON.stringify(this.list))</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="3-8-todoæ¡ˆä¾‹-å…¨é€‰åŠŸèƒ½"><a href="#3-8-todoæ¡ˆä¾‹-å…¨é€‰åŠŸèƒ½" class="headerlink" title="3.8_todoæ¡ˆä¾‹-å…¨é€‰åŠŸèƒ½"></a>3.8_todoæ¡ˆä¾‹-å…¨é€‰åŠŸèƒ½</h3><blockquote>
<p>ç›®æ ‡: ç‚¹å‡»å·¦ä¸Šè§’vå·, å¯ä»¥è®¾ç½®ä¸€é”®å®Œæˆ, å†ç‚¹ä¸€æ¬¡å–æ¶ˆå…¨é€‰</p>
</blockquote>
<ul>
<li>éœ€æ±‚1: ç‚¹å‡»å…¨é€‰ â€“ å°é€‰æ¡†å—åˆ°å½±å“</li>
<li>éœ€æ±‚2: å°é€‰æ¡†éƒ½é€‰ä¸­(æ‰‹é€‰) â€“ å…¨é€‰è‡ªåŠ¨é€‰ä¸­çŠ¶æ€</li>
</ul>
<p>åˆ†æï¼š</p>
<p>â€‹    â‘ : TodoHeader.vue â€“ è®¡ç®—å±æ€§ - isAll</p>
<p>â€‹    â‘¡: App.vue â€“ ä¼ å…¥æ•°ç»„list â€“ åœ¨isAllçš„seté‡Œå½±å“å°é€‰æ¡†</p>
<p>â€‹    â‘¢: isAllçš„geté‡Œç»Ÿè®¡å°é€‰æ¡†æœ€åçŠ¶æ€, å½±å“isAll â€“ å½±å“å…¨é€‰çŠ¶æ€</p>
<p>â€‹    â‘£: è€ƒè™‘æ— æ•°æ®æƒ…å†µç©ºæ•°ç»„ â€“ å…¨é€‰ä¸åº”è¯¥å‹¾é€‰</p>
<p>æç¤º: å°±æ˜¯éå†æ‰€æœ‰çš„å¯¹è±¡, ä¿®æ”¹ä»–ä»¬çš„å®ŒæˆçŠ¶æ€å±æ€§çš„å€¼</p>
<p>TodoHeader.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- 9. ç›®æ ‡: å…¨é€‰çŠ¶æ€</span><br><span class="line">9.0 v-modelå…³è”å…¨é€‰çŠ¶æ€</span><br><span class="line">é¡µé¢å˜åŒ–(å‹¾é€‰true, æœªå‹¾é€‰false) -&gt; v-model -&gt; isAllå˜é‡</span><br><span class="line">--&gt;</span><br><span class="line">&lt;input id="toggle-all" class="toggle-all" type="checkbox" v-model="isAll"&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default {</span><br><span class="line">        // ...å…¶ä»–çœç•¥</span><br><span class="line">        // 9.1 å®šä¹‰è®¡ç®—å±æ€§</span><br><span class="line">        computed: {</span><br><span class="line">            isAll: {</span><br><span class="line">                set(checked){ // åªæœ‰true / false</span><br><span class="line">                    // 9.3 å½±å“æ•°ç»„é‡Œæ¯ä¸ªå°é€‰æ¡†ç»‘å®šçš„isDoneå±æ€§</span><br><span class="line">                    this.arr.forEach(obj =&gt; obj.isDone = checked)</span><br><span class="line">                },</span><br><span class="line">                get(){</span><br><span class="line">                    // 9.4 å°é€‰æ¡†ç»Ÿè®¡çŠ¶æ€ -&gt; å…¨é€‰æ¡†</span><br><span class="line">                    // 9.5 å¦‚æœæ²¡æœ‰æ•°æ®, ç›´æ¥è¿”å›false-ä¸è¦è®©å…¨é€‰å‹¾é€‰çŠ¶æ€</span><br><span class="line">                    return this.arr.length !== 0 &amp;&amp; this.arr.every(obj =&gt; obj.isDone === true)</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;TodoHeader :arr="list" @create="createFn"&gt;&lt;/TodoHeader&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä»Šæ—¥æ€»ç»“"><a href="#ä»Šæ—¥æ€»ç»“" class="headerlink" title="ä»Šæ—¥æ€»ç»“"></a>ä»Šæ—¥æ€»ç»“</h2><ul>
<li><input disabled="" type="checkbox"> ç»„ä»¶æ¦‚å¿µå’Œä½œç”¨ä»¥åŠåˆ›å»ºå’Œä½¿ç”¨æ–¹å¼</li>
</ul>
<ul>
<li><input disabled="" type="checkbox"> æŒæ¡ç»„ä»¶é€šä¿¡åŒ…æ‹¬çˆ¶å‘å­, å­å‘çˆ¶ä¼ å€¼</li>
</ul>
<ul>
<li><input disabled="" type="checkbox"> ç†Ÿæ‚‰EventBusçš„ä½¿ç”¨å’ŒåŸç†</li>
</ul>
<ul>
<li><input disabled="" type="checkbox"> è·Ÿéšè€å¸ˆçš„è§†é¢‘å®Œæˆtodoæ¡ˆä¾‹çš„å…¨éƒ¨åŠŸèƒ½</li>
</ul>
<h2 id="é¢è¯•é¢˜"><a href="#é¢è¯•é¢˜" class="headerlink" title="é¢è¯•é¢˜"></a>é¢è¯•é¢˜</h2><h3 id="1-è¯·è¯´ä¸‹å°è£…-vue-ç»„ä»¶çš„è¿‡ç¨‹"><a href="#1-è¯·è¯´ä¸‹å°è£…-vue-ç»„ä»¶çš„è¿‡ç¨‹" class="headerlink" title="1. è¯·è¯´ä¸‹å°è£… vue ç»„ä»¶çš„è¿‡ç¨‹"></a>1. è¯·è¯´ä¸‹å°è£… vue ç»„ä»¶çš„è¿‡ç¨‹</h3><p>â€‹    é¦–å…ˆï¼Œç»„ä»¶å¯ä»¥æå‡æ•´ä¸ªé¡¹ç›®çš„å¼€å‘æ•ˆç‡ã€‚èƒ½å¤ŸæŠŠé¡µé¢æŠ½è±¡æˆå¤šä¸ªç›¸å¯¹ç‹¬ç«‹çš„æ¨¡å—ï¼Œè§£å†³äº†æˆ‘ä»¬ä¼ ç»Ÿé¡¹ç›®å¼€å‘ï¼šæ•ˆç‡ä½ã€éš¾ç»´æŠ¤ã€å¤ç”¨æ€§ç­‰é—®é¢˜ã€‚</p>
<ul>
<li><p>åˆ†æéœ€æ±‚ï¼šç¡®å®šä¸šåŠ¡éœ€æ±‚ï¼ŒæŠŠé¡µé¢ä¸­å¯ä»¥å¤ç”¨çš„ç»“æ„ï¼Œæ ·å¼ä»¥åŠåŠŸèƒ½ï¼Œå•ç‹¬æŠ½ç¦»æˆä¸€ä¸ªç»„ä»¶ï¼Œå®ç°å¤ç”¨</p>
</li>
<li><p>å…·ä½“æ­¥éª¤ï¼šVue.component æˆ–è€…åœ¨new Vueé…ç½®é¡¹componentsä¸­, å®šä¹‰ç»„ä»¶å, å¯ä»¥åœ¨propsä¸­æ¥å—ç»™ç»„ä»¶ä¼ çš„å‚æ•°å’Œå€¼ï¼Œå­ç»„ä»¶ä¿®æ”¹å¥½æ•°æ®åï¼Œæƒ³æŠŠæ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ã€‚å¯ä»¥é‡‡ç”¨$emitæ–¹æ³•ã€‚</p>
</li>
</ul>
<h3 id="2-Vueç»„ä»¶å¦‚ä½•è¿›è¡Œä¼ å€¼çš„"><a href="#2-Vueç»„ä»¶å¦‚ä½•è¿›è¡Œä¼ å€¼çš„" class="headerlink" title="2. Vueç»„ä»¶å¦‚ä½•è¿›è¡Œä¼ å€¼çš„"></a>2. Vueç»„ä»¶å¦‚ä½•è¿›è¡Œä¼ å€¼çš„</h3><p>çˆ¶å‘å­ -&gt; propså®šä¹‰å˜é‡ -&gt; çˆ¶åœ¨ä½¿ç”¨ç»„ä»¶ç”¨å±æ€§ç»™propså˜é‡ä¼ å€¼</p>
<p>å­å‘çˆ¶ -&gt; $emitè§¦å‘çˆ¶çš„äº‹ä»¶ -&gt; çˆ¶åœ¨ä½¿ç”¨ç»„ä»¶ç”¨@è‡ªå®šä¹‰äº‹ä»¶å=çˆ¶çš„æ–¹æ³• (å­æŠŠå€¼å¸¦å‡ºæ¥)</p>
<h3 id="3-Vue-ç»„ä»¶-data-ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯å‡½æ•°"><a href="#3-Vue-ç»„ä»¶-data-ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯å‡½æ•°" class="headerlink" title="3. Vue ç»„ä»¶ data ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯å‡½æ•°"></a>3. Vue ç»„ä»¶ data ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯å‡½æ•°</h3><p>æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ Vue çš„å®ä¾‹, ä¸ºäº†ç‹¬ç«‹ä½œç”¨åŸŸ, ä¸è®©å˜é‡æ±¡æŸ“åˆ«äººçš„å˜é‡</p>
<h3 id="4-è®²ä¸€ä¸‹ç»„ä»¶çš„å‘½åè§„èŒƒ"><a href="#4-è®²ä¸€ä¸‹ç»„ä»¶çš„å‘½åè§„èŒƒ" class="headerlink" title="4. è®²ä¸€ä¸‹ç»„ä»¶çš„å‘½åè§„èŒƒ"></a>4. è®²ä¸€ä¸‹ç»„ä»¶çš„å‘½åè§„èŒƒ</h3><p>â€‹    ç»™ç»„ä»¶å‘½åæœ‰ä¸¤ç§æ–¹å¼(åœ¨Vue.Component/componentsæ—¶)ï¼Œä¸€ç§æ˜¯ä½¿ç”¨é“¾å¼å‘½åâ€my-componentâ€ï¼Œä¸€ç§æ˜¯ä½¿ç”¨å¤§é©¼å³°å‘½åâ€MyComponentâ€ï¼Œ</p>
<p>â€‹    å› ä¸ºè¦éµå¾ªW3Cè§„èŒƒä¸­çš„è‡ªå®šä¹‰ç»„ä»¶å (å­—æ¯å…¨å°å†™ä¸”å¿…é¡»åŒ…å«ä¸€ä¸ªè¿å­—ç¬¦)ï¼Œé¿å…å’Œå½“å‰ä»¥åŠæœªæ¥çš„ HTML å…ƒç´ ç›¸å†²çª</p>
<h2 id="é™„åŠ ç»ƒä¹ -1-å–œæ¬¢å°ç‹—ç‹—å—"><a href="#é™„åŠ ç»ƒä¹ -1-å–œæ¬¢å°ç‹—ç‹—å—" class="headerlink" title="é™„åŠ ç»ƒä¹ _1.å–œæ¬¢å°ç‹—ç‹—å—"></a>é™„åŠ ç»ƒä¹ _1.å–œæ¬¢å°ç‹—ç‹—å—</h2><blockquote>
<p>ç›®æ ‡: å°è£…Dogç»„ä»¶, ç”¨æ¥å¤ç”¨æ˜¾ç¤ºå›¾ç‰‡å’Œæ ‡é¢˜çš„</p>
</blockquote>
<p>æ•ˆæœ:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210115103545558.png" alt="image-20210115103545558"></p>
<hr>
<p>æ­£ç¡®ç­”æ¡ˆ(==å…ˆä¸è¦çœ‹==)</p>
<p>components/practise/Dog1.vue</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my_div"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">"https://scpic.chinaz.net/files/pic/pic9/202003/zzpic23514.jpg"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå­¤ç‹¬å¯æ€œçš„ç‹—<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.my_div</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">  <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.my_div</span> <span class="selector-tag">img</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨App.vueä¸­ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Dog&gt;&lt;/Dog&gt;</span><br><span class="line">    &lt;Dog/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Dog from '@/components/practise/Dog1'</span><br><span class="line">export default {</span><br><span class="line">  components: {</span><br><span class="line">    Dog</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ€»ç»“: é‡å¤éƒ¨åˆ†å°è£…æˆç»„ä»¶, ç„¶åæ³¨å†Œä½¿ç”¨</p>
</blockquote>
<h2 id="é™„åŠ ç»ƒä¹ -2-ç‚¹å‡»æ–‡å­—å˜è‰²"><a href="#é™„åŠ ç»ƒä¹ -2-ç‚¹å‡»æ–‡å­—å˜è‰²" class="headerlink" title="é™„åŠ ç»ƒä¹ _2.ç‚¹å‡»æ–‡å­—å˜è‰²"></a>é™„åŠ ç»ƒä¹ _2.ç‚¹å‡»æ–‡å­—å˜è‰²</h2><blockquote>
<p>ç›®æ ‡: ä¿®æ”¹Dogç»„ä»¶, å®ç°ç»„ä»¶å†…ç‚¹å‡»å˜è‰²</p>
</blockquote>
<p>æç¤º: æ–‡å­—åœ¨ç»„ä»¶å†…, æ‰€ä»¥äº‹ä»¶å’Œæ–¹æ³•éƒ½è¯¥åœ¨ç»„ä»¶å†…-ç‹¬ç«‹</p>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/10.3.1_%E7%BB%84%E4%BB%B6_%E4%BA%8B%E4%BB%B6%E5%8F%98%E9%87%8F%E4%BD%BF%E7%94%A8.gif" alt="10.3.1_ç»„ä»¶_äº‹ä»¶å˜é‡ä½¿ç”¨"></p>
<p>æ­£ç¡®ä»£ç (==å…ˆä¸è¦çœ‹==)</p>
<p>components/practise/Dog2.vue</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my_div"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">"https://scpic.chinaz.net/files/pic/pic9/202003/zzpic23514.jpg"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">alt</span>=<span class="string">""</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">:style</span>=<span class="string">"{backgroundColor: colorStr}"</span> @<span class="attr">click</span>=<span class="string">"btn"</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå­¤ç‹¬å¯æ€œçš„ç‹—<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">colorStr</span>: <span class="string">""</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">btn</span>(<span class="params"></span>)</span>{</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.colorStr = <span class="string">`rgb(<span class="subst">${<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">256</span>)}</span>, <span class="subst">${<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">256</span>)}</span>, <span class="subst">${<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">256</span>)}</span>)`</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.my_div</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">  <span class="attribute">float</span>: left;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.my_div</span> <span class="selector-tag">img</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="é™„åŠ ç»ƒä¹ -3-å–ç‹—å•¦"><a href="#é™„åŠ ç»ƒä¹ -3-å–ç‹—å•¦" class="headerlink" title="é™„åŠ ç»ƒä¹ _3.å–ç‹—å•¦"></a>é™„åŠ ç»ƒä¹ _3.å–ç‹—å•¦</h2><blockquote>
<p>ç›®æ ‡: æŠŠæ•°æ®å¾ªç¯ç”¨ç»„ä»¶æ˜¾ç¤ºé“ºè®¾</p>
</blockquote>
<p>æ•°æ®:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">dogImgUrl</span>:</span><br><span class="line">        <span class="string">"http://nwzimg.wezhan.cn/contents/sitefiles2029/10146688/images/21129958.jpg"</span>,</span><br><span class="line">        <span class="attr">dogName</span>: <span class="string">"åšç¾"</span>,</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">dogImgUrl</span>:</span><br><span class="line">        <span class="string">"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1224576619,1307855467&amp;fm=26&amp;gp=0.jpg"</span>,</span><br><span class="line">        <span class="attr">dogName</span>: <span class="string">"æ³°è¿ª"</span>,</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">dogImgUrl</span>:</span><br><span class="line">        <span class="string">"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2967740259,1518632757&amp;fm=26&amp;gp=0.jpg"</span>,</span><br><span class="line">        <span class="attr">dogName</span>: <span class="string">"é‡‘æ¯›"</span>,</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">dogImgUrl</span>:</span><br><span class="line">        <span class="string">"https://pic1.zhimg.com/80/v2-7ba4342e6fedb9c5f3726eb0888867da_1440w.jpg?source=1940ef5c"</span>,</span><br><span class="line">        <span class="attr">dogName</span>: <span class="string">"å“ˆå£«å¥‡"</span>,</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">dogImgUrl</span>:</span><br><span class="line">        <span class="string">"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1563813435580&amp;di=946902d419c3643e33a0c9113fc8d780&amp;imgtype=0&amp;src=http%3A%2F%2Fvpic.video.qq.com%2F3388556%2Fd0522aynh3x_ori_3.jpg"</span>,</span><br><span class="line">        <span class="attr">dogName</span>: <span class="string">"é˜¿æ‹‰æ–¯åŠ "</span>,</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">dogImgUrl</span>:</span><br><span class="line">        <span class="string">"https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1563813454815&amp;di=ecdd2ebf479568453d704dffacdfa12c&amp;imgtype=0&amp;src=http%3A%2F%2Fwww.officedoyen.com%2Fuploads%2Fallimg%2F150408%2F1-15040Q10J5B0.jpg"</span>,</span><br><span class="line">        <span class="attr">dogName</span>: <span class="string">"è¨æ‘©è€¶"</span>,</span><br><span class="line">    },</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210115112811452.png" alt="image-20210115112811452"></p>
<p>æ­£ç¡®ä»£ç (==ä¸å¯å¤åˆ¶==)</p>
<p>components/practise/Dog3.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my_div"&gt;</span><br><span class="line">    &lt;img :src="imgurl" alt="" /&gt;</span><br><span class="line">    &lt;p :style="{ backgroundColor: colorStr }" @click="btn"&gt;{{ dogname }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: ["imgurl", "dogname"],</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      colorStr: "",</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    btn() {</span><br><span class="line">      this.colorStr = `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(</span><br><span class="line">        Math.random() * 256</span><br><span class="line">      )}, ${Math.floor(Math.random() * 256)})`;</span><br><span class="line"></span><br><span class="line">      </span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.my_div {</span><br><span class="line">  width: 200px;</span><br><span class="line">  border: 1px solid black;</span><br><span class="line">  text-align: center;</span><br><span class="line">  float: left;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.my_div img {</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 200px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vueå¼•å…¥ä½¿ç”¨æŠŠæ•°æ®å¾ªç¯ä¼ ç»™ç»„ä»¶æ˜¾ç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Dog v-for="(obj, index) in arr"</span><br><span class="line">    :key="index"</span><br><span class="line">    :imgurl="obj.dogImgUrl"</span><br><span class="line">    :dogname="obj.dogName"</span><br><span class="line">    &gt;&lt;/Dog&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Dog from '@/components/practise/Dog3'</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      // 1. å‡†å¤‡æ•°æ®</span><br><span class="line">      arr: [</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "http://nwzimg.wezhan.cn/contents/sitefiles2029/10146688/images/21129958.jpg",</span><br><span class="line">          dogName: "åšç¾",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1224576619,1307855467&amp;fm=26&amp;gp=0.jpg",</span><br><span class="line">          dogName: "æ³°è¿ª",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2967740259,1518632757&amp;fm=26&amp;gp=0.jpg",</span><br><span class="line">          dogName: "é‡‘æ¯›",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://pic1.zhimg.com/80/v2-7ba4342e6fedb9c5f3726eb0888867da_1440w.jpg?source=1940ef5c",</span><br><span class="line">          dogName: "å“ˆå£«å¥‡",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1563813435580&amp;di=946902d419c3643e33a0c9113fc8d780&amp;imgtype=0&amp;src=http%3A%2F%2Fvpic.video.qq.com%2F3388556%2Fd0522aynh3x_ori_3.jpg",</span><br><span class="line">          dogName: "é˜¿æ‹‰æ–¯åŠ ",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1563813454815&amp;di=ecdd2ebf479568453d704dffacdfa12c&amp;imgtype=0&amp;src=http%3A%2F%2Fwww.officedoyen.com%2Fuploads%2Fallimg%2F150408%2F1-15040Q10J5B0.jpg",</span><br><span class="line">          dogName: "è¨æ‘©è€¶",</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  components: {</span><br><span class="line">    Dog</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="é™„åŠ ç»ƒä¹ -4-é€‰æ‹©å–œæ¬¢çš„ç‹—"><a href="#é™„åŠ ç»ƒä¹ -4-é€‰æ‹©å–œæ¬¢çš„ç‹—" class="headerlink" title="é™„åŠ ç»ƒä¹ _4.é€‰æ‹©å–œæ¬¢çš„ç‹—"></a>é™„åŠ ç»ƒä¹ _4.é€‰æ‹©å–œæ¬¢çš„ç‹—</h2><blockquote>
<p>ç›®æ ‡: ç”¨æˆ·ç‚¹å‡»ç‹—ç‹—çš„åå­—, åœ¨å³ä¾§åˆ—è¡¨æ˜¾ç¤ºä¸€æ¬¡åå­—</p>
</blockquote>
<p>æ•ˆæœ:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/11.5_%E5%96%9C%E6%AC%A2%E7%9A%84%E7%8B%97%E7%8B%97.gif" alt="11.5_å–œæ¬¢çš„ç‹—ç‹—"></p>
<p>æ­£ç¡®ä»£ç (==ä¸å¯å¤åˆ¶==)</p>
<p>components/practise/Dog4.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="my_div"&gt;</span><br><span class="line">    &lt;img :src="imgurl" alt="" /&gt;</span><br><span class="line">    &lt;p :style="{ backgroundColor: colorStr }" @click="btn"&gt;{{ dogname }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: ["imgurl", "dogname"],</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      colorStr: "",</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    btn() {</span><br><span class="line">      this.colorStr = `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(</span><br><span class="line">        Math.random() * 256</span><br><span class="line">      )}, ${Math.floor(Math.random() * 256)})`;</span><br><span class="line"></span><br><span class="line">      // è¡¥å……: è§¦å‘çˆ¶çº§äº‹ä»¶</span><br><span class="line">      this.$emit("love", this.dogname);</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.my_div {</span><br><span class="line">  width: 200px;</span><br><span class="line">  border: 1px solid black;</span><br><span class="line">  text-align: center;</span><br><span class="line">  float: left;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.my_div img {</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 200px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Dog</span><br><span class="line">      v-for="(obj, index) in arr"</span><br><span class="line">      :key="index"</span><br><span class="line">      :imgurl="obj.dogImgUrl"</span><br><span class="line">      :dogname="obj.dogName"</span><br><span class="line">      @love="fn"</span><br><span class="line">    &gt;&lt;/Dog&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;p&gt;æ˜¾ç¤ºå–œæ¬¢çš„ç‹—:&lt;/p&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for="(item, index) in loveArr" :key="index"&gt;{{ item }}&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Dog from "@/components/practise/Dog4";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      // 1. å‡†å¤‡æ•°æ®</span><br><span class="line">      arr: [</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "http://nwzimg.wezhan.cn/contents/sitefiles2029/10146688/images/21129958.jpg",</span><br><span class="line">          dogName: "åšç¾",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1224576619,1307855467&amp;fm=26&amp;gp=0.jpg",</span><br><span class="line">          dogName: "æ³°è¿ª",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2967740259,1518632757&amp;fm=26&amp;gp=0.jpg",</span><br><span class="line">          dogName: "é‡‘æ¯›",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://pic1.zhimg.com/80/v2-7ba4342e6fedb9c5f3726eb0888867da_1440w.jpg?source=1940ef5c",</span><br><span class="line">          dogName: "å“ˆå£«å¥‡",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1563813435580&amp;di=946902d419c3643e33a0c9113fc8d780&amp;imgtype=0&amp;src=http%3A%2F%2Fvpic.video.qq.com%2F3388556%2Fd0522aynh3x_ori_3.jpg",</span><br><span class="line">          dogName: "é˜¿æ‹‰æ–¯åŠ ",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          dogImgUrl:</span><br><span class="line">            "https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1563813454815&amp;di=ecdd2ebf479568453d704dffacdfa12c&amp;imgtype=0&amp;src=http%3A%2F%2Fwww.officedoyen.com%2Fuploads%2Fallimg%2F150408%2F1-15040Q10J5B0.jpg",</span><br><span class="line">          dogName: "è¨æ‘©è€¶",</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">      loveArr: []</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  components: {</span><br><span class="line">    Dog,</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    fn(dogName) {</span><br><span class="line">      this.loveArr.push(dogName)</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style &gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="é™„åŠ ç»ƒä¹ -5-å–å®Œäº†"><a href="#é™„åŠ ç»ƒä¹ -5-å–å®Œäº†" class="headerlink" title="é™„åŠ ç»ƒä¹ _5.å–å®Œäº†"></a>é™„åŠ ç»ƒä¹ _5.å–å®Œäº†</h2><blockquote>
<p>ç›®æ ‡: å®Œæˆå›¾ç¤ºçš„å–å®Œäº†æ•ˆæœ</p>
</blockquote>
<p>éœ€æ±‚: </p>
<ul>
<li>å¦‚æœä¸º0äº†åé¢æ˜¾ç¤ºå–å…‰äº†!!!</li>
<li>å¦‚æœåº“å­˜æœ‰å€¼, åé¢å°±ä¸æ˜¾ç¤ºå–å…‰äº†!!!</li>
<li>å¦‚æœåº“å­˜æœ‰å€¼, ç´¯è®¡å•†å“æ€»æ•°é‡</li>
</ul>
<p>è¦æ±‚: ä¸€è¡Œæ˜¯ä¸€ä¸ªç»„ä»¶è¿›è¡Œå¤ç”¨, è¿™é‡Œè¦æ±‚å¿…é¡»ç”¨table&gt;tr (ä¹Ÿå°±æ˜¯å°è£…trç»„ä»¶)</p>
<p>ç»„ä»¶ä½¿ç”¨æ³¨æ„: htmlæ­£å¸¸è§£æ, table&gt;træˆ–è€…select&gt;option, è™½ç„¶vueæ¸²æŸ“é¡µé¢å¯ä»¥è‡ªå®šä¹‰, ä½†æ˜¯è¿˜éœ€è¦éµå¾ªæµè§ˆå™¨çš„æ ‡ç­¾å…³ç³»</p>
<ul>
<li>table&gt;trä¸­ä¸èƒ½ç›´æ¥ä½¿ç”¨ç»„ä»¶, éœ€è¦åœ¨trçš„iså±æ€§æŒ‡å®šç»„ä»¶å</li>
<li>select&gt;option ä¹Ÿä¸èƒ½å°è£…optionsç»„ä»¶, éœ€è¦åœ¨optionçš„iså±æ€§æŒ‡å®šç»„ä»¶å</li>
</ul>
<p>æ•ˆæœæ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/11.7_%E8%AF%BE%E4%B8%8A%E7%BB%83%E4%B9%A0.gif" alt="11.7_è¯¾ä¸Šç»ƒä¹ "></p>
<p>vueå®ä¾‹dataé‡Œçš„æ•°ç»„å¦‚ä¸‹</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">goodsArr: [</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">goodsName</span>: <span class="string">"Watermelon"</span></span><br><span class="line">    }, {</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">goodsName</span>: <span class="string">"Banana"</span></span><br><span class="line">    }, {</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">goodsName</span>: <span class="string">"Orange"</span></span><br><span class="line">    }, {</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">goodsName</span>: <span class="string">"Pineapple"</span></span><br><span class="line">    }, {</span><br><span class="line">        <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">goodsName</span>: <span class="string">"Strawberry"</span></span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<p>æ­£ç¡®ä»£ç (ä¸å¯å¤åˆ¶)</p>
<p>components/practise/MyTr.vue</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">v-model.number</span>=<span class="string">"obj['count']"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ obj["goodsName"] }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-show</span>=<span class="string">"obj['count'] == 0"</span>&gt;</span>å–å…‰äº†!!!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ä¼ å…¥å¯¹è±¡æœ‰é£é™©, ä½†æ˜¯å¦‚æœæ˜¯ä¸€å¯¹ä¸€å…³ç³»å¯ä»¥ä¼ å…¥å¯¹è±¡-ç›´æ¥ä¿®æ”¹å¯¹è±¡é‡Œçš„å€¼å½±å“å¤–éƒ¨æ•ˆæœ</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">props</span>: [<span class="string">"obj"</span>]</span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>App.vueä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">      &lt;!-- 2. ä½¿ç”¨trç»„ä»¶, ä¼ å…¥éœ€è¦çš„æ•°æ® --&gt;</span><br><span class="line">      &lt;tr</span><br><span class="line">        is="myTr"</span><br><span class="line">        v-for="(item, index) in goodsArr"</span><br><span class="line">        :key="index"</span><br><span class="line">        :obj="item"</span><br><span class="line">        :index="index"</span><br><span class="line">      &gt;&lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">    &lt;p&gt;All Number:{{ sumNumber }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MyTr from '@/components/practise/MyTr'</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      goodsArr: [</span><br><span class="line">        {</span><br><span class="line">          count: 0,</span><br><span class="line">          goodsName: "Watermelon",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          count: 0,</span><br><span class="line">          goodsName: "Banana",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          count: 0,</span><br><span class="line">          goodsName: "Orange",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          count: 0,</span><br><span class="line">          goodsName: "Pineapple",</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          count: 0,</span><br><span class="line">          goodsName: "Strawberry",</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  components: {</span><br><span class="line">    MyTr</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    sumNumber(){</span><br><span class="line">      return this.goodsArr.reduce((sum, obj) =&gt; sum += obj.count * 1, 0)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="é™„åŠ ç»ƒä¹ -6-ä¹°ç‚¹å¥½åƒçš„"><a href="#é™„åŠ ç»ƒä¹ -6-ä¹°ç‚¹å¥½åƒçš„" class="headerlink" title="é™„åŠ ç»ƒä¹ _6.ä¹°ç‚¹å¥½åƒçš„"></a>é™„åŠ ç»ƒä¹ _6.ä¹°ç‚¹å¥½åƒçš„</h2><blockquote>
<p>ç›®æ ‡: å•†å“åˆ—è¡¨æ˜¾ç¤ºä¸€ä¸‹, ç„¶åå°è£…ç»„ä»¶å®ç°å¢åŠ å‡å°‘åŠŸèƒ½å¹¶åœ¨æœ€åç»Ÿè®¡æ€»ä»·</p>
</blockquote>
<p>è¦æ±‚: å•†å“å, å¢åŠ  æ•°é‡, å‡å°‘è¿™ä¸€æ¡å°è£…æˆç»„ä»¶ä½¿ç”¨</p>
<p>æ•ˆæœæ¼”ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/11.6_%E8%AF%BE%E4%B8%8A%E7%BB%83%E4%B9%A0.gif" alt="11.6_è¯¾ä¸Šç»ƒä¹ "></p>
<p>æ•°æ®:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    {</span><br><span class="line">        <span class="string">"shopName"</span>: <span class="string">"å¯æ¯”å…‹è–¯ç‰‡"</span>,</span><br><span class="line">        <span class="string">"price"</span>: <span class="number">5.5</span>,</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">0</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="string">"shopName"</span>: <span class="string">"è‰è“é…±"</span>,</span><br><span class="line">        <span class="string">"price"</span>: <span class="number">3.5</span>,</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">0</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="string">"shopName"</span>: <span class="string">"çº¢çƒ§è‚‰"</span>,</span><br><span class="line">        <span class="string">"price"</span>: <span class="number">55</span>,</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">0</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="string">"shopName"</span>: <span class="string">"æ–¹ä¾¿é¢"</span>,</span><br><span class="line">        <span class="string">"price"</span>: <span class="number">12</span>,</span><br><span class="line">        <span class="string">"count"</span>: <span class="number">0</span></span><br><span class="line">    }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<p>æ­£ç¡®ä»£ç (==ä¸å¯å¤åˆ¶==)</p>
<p>components/practise/Food.vue</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ goodsname }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"add(ind)"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span> {{ count }} <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"sec(ind)"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">props</span>: [<span class="string">'goodsname'</span>, <span class="string">'ind'</span>, <span class="string">'count'</span>], <span class="comment">// å•†å“å,ç´¢å¼•,æ•°é‡</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">add</span>(<span class="params">ind</span>)</span>{</span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.$emit(<span class="string">'addE'</span>, ind)</span></span><br><span class="line"><span class="javascript">        },</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">sec</span>(<span class="params">ind</span>)</span>{</span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.$emit(<span class="string">"secE"</span>, ind)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;å•†å“æ¸…å•å¦‚ä¸‹:&lt;/p&gt;</span><br><span class="line">    &lt;div v-for="(obj, index) in shopData" :key="index"&gt;</span><br><span class="line">      {{ obj.shopName }} -- {{ obj.price }}å…ƒ/ä»½</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;p&gt;è¯·é€‰æ‹©è´­ä¹°æ•°é‡:&lt;/p&gt;</span><br><span class="line">    &lt;Food</span><br><span class="line">      v-for="(obj, index) in shopData"</span><br><span class="line">      :key="index + ' '"</span><br><span class="line">      :goodsname="obj.shopName"</span><br><span class="line">      :ind="index"</span><br><span class="line">      :count="obj.count"</span><br><span class="line">      @addE="addFn"</span><br><span class="line">      @secE="secFn"</span><br><span class="line">    &gt;</span><br><span class="line">    &lt;/Food&gt;</span><br><span class="line">    &lt;p&gt;æ€»ä»·ä¸º: {{ allPrice }}&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Food from "@/components/practise/Food";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      // å•†å“æ•°æ®</span><br><span class="line">      shopData: [</span><br><span class="line">        {</span><br><span class="line">          shopName: "å¯æ¯”å…‹è–¯ç‰‡",</span><br><span class="line">          price: 5.5,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          shopName: "è‰è“é…±",</span><br><span class="line">          price: 3.5,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          shopName: "çº¢çƒ§è‚‰",</span><br><span class="line">          price: 55,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          shopName: "æ–¹ä¾¿é¢",</span><br><span class="line">          price: 12,</span><br><span class="line">          count: 0,</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  components: {</span><br><span class="line">    Food,</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    addFn(ind){</span><br><span class="line">      this.shopData[ind].count++</span><br><span class="line">    },</span><br><span class="line">    secFn(ind){</span><br><span class="line">      this.shopData[ind].count &gt; 0 &amp;&amp; this.shopData[ind].count--</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    allPrice(){</span><br><span class="line">      return this.shopData.reduce((sum, obj) =&gt; sum += obj.count * obj.price, 0)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä»Šæ—¥ä½œä¸š"><a href="#ä»Šæ—¥ä½œä¸š" class="headerlink" title="ä»Šæ—¥ä½œä¸š"></a>ä»Šæ—¥ä½œä¸š</h2><p>==è¯¾ä¸Šç»ƒä¹ å’Œæ¡ˆä¾‹ä¸»è¦==</p>
<h3 id="è´­ç‰©è½¦"><a href="#è´­ç‰©è½¦" class="headerlink" title="è´­ç‰©è½¦"></a>è´­ç‰©è½¦</h3><p>ç›®çš„: æŠŠä¸€è¡Œtrå°è£…æˆä¸€ä¸ªç»„ä»¶, ç„¶åv-forå¾ªç¯å¤ç”¨ä¼ å€¼</p>
<blockquote>
<p>æç¤º: å¯¹è±¡ç±»å‹ä¼ å…¥åˆ°å­ç»„ä»¶, å†…éƒ¨ä¿®æ”¹ä¹Ÿä¼šç›¸åº”å¤–éƒ¨è¿™ä¸ªå¯¹è±¡ (å¯¹è±¡æ˜¯å¼•ç”¨å…³ç³»å“¦)</p>
</blockquote>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/image-20210115195904519.png" alt="image-20210115195904519"></p>
<p>ä¸å¸¦vueä»£ç çš„æ ‡ç­¾ç»“æ„(==å¯ä»¥å¤åˆ¶==)æ¥ç€å†™</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;table</span><br><span class="line">      border="1"</span><br><span class="line">      width="700"</span><br><span class="line">      style="border-collapse: collapse"</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;caption&gt;</span><br><span class="line">        è´­ç‰©è½¦</span><br><span class="line">      &lt;/caption&gt;</span><br><span class="line">      &lt;thead&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;th&gt;</span><br><span class="line">            &lt;input type="checkbox" /&gt; &lt;span&gt;å…¨é€‰&lt;/span&gt;</span><br><span class="line">          &lt;/th&gt;</span><br><span class="line">          &lt;th&gt;åç§°&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;ä»·æ ¼&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;æ•°é‡&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;æ€»ä»·&lt;/th&gt;</span><br><span class="line">          &lt;th&gt;æ“ä½œ&lt;/th&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/thead&gt;</span><br><span class="line">      &lt;tbody&gt;</span><br><span class="line">        </span><br><span class="line">      &lt;/tbody&gt;</span><br><span class="line">      &lt;tfoot&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;td&gt;åˆè®¡:&lt;/td&gt;</span><br><span class="line">          &lt;td colspan="5"&gt;</span><br><span class="line">            </span><br><span class="line">          &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/tfoot&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      goodList: [</span><br><span class="line">        {</span><br><span class="line">          name: "è¯¸è‘›äº®",</span><br><span class="line">          price: 1000,</span><br><span class="line">          num: 1,</span><br><span class="line">          checked: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "è”¡æ–‡å§¬",</span><br><span class="line">          price: 1500,</span><br><span class="line">          num: 1,</span><br><span class="line">          checked: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "å¦²å·±",</span><br><span class="line">          price: 2000,</span><br><span class="line">          num: 1,</span><br><span class="line">          checked: false,</span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          name: "é²ç­",</span><br><span class="line">          price: 2200,</span><br><span class="line">          num: 1,</span><br><span class="line">          checked: false,</span><br><span class="line">        },</span><br><span class="line">      ],</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åšæ•°å­¦é¢˜"><a href="#åšæ•°å­¦é¢˜" class="headerlink" title="åšæ•°å­¦é¢˜"></a>åšæ•°å­¦é¢˜</h3><p>ç›®çš„: éšæœºäº§ç”Ÿæ•°å­¦é¢˜, è¾“å…¥ç­”æ¡ˆæäº¤å, åœ¨ä¸‹é¢å¯¹åº”åºå·æ˜¾ç¤ºç»“æœ</p>
<blockquote>
<p>æ•°å­—è¾“å…¥æ¡†æŒ‰é’®æ˜¯ä¸€ä¸ªç»„ä»¶, ä¸‹é¢æ¯ä¸ªåºå·å’Œæç¤ºæ˜¯ä¸€ä¸ªç»„ä»¶</p>
</blockquote>
<p>å›¾ç¤º:</p>
<p><img src="/2021/05/14/vue%E5%9F%BA%E7%A1%803-vue%E7%BB%84%E4%BB%B6_%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1_todo%E6%A1%88%E4%BE%8B/Day04_%E4%BD%9C%E4%B8%9A_%E6%95%B0%E5%AD%A6%E9%A2%98.gif" alt="Day04_ä½œä¸š_æ•°å­¦é¢˜"></p>
<p>Subject.vue - é¢˜ç›®ä¸€è¡Œç»„ä»¶ (æ ·å¼å’Œæ ‡ç­¾)(==å¯ä»¥å¤åˆ¶æ¥ç€å†™==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="subject"&gt;</span><br><span class="line">    &lt;span&gt;&lt;/span&gt;</span><br><span class="line">    &lt;span&gt;+&lt;/span&gt;</span><br><span class="line">    &lt;span&gt;&lt;/span&gt;</span><br><span class="line">    &lt;span&gt;=&lt;/span&gt;</span><br><span class="line">    &lt;input type="number" /&gt;</span><br><span class="line">    &lt;button&gt;æäº¤&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.subject {</span><br><span class="line">  margin: 5px;</span><br><span class="line">  padding: 5px;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">}</span><br><span class="line">.subject span {</span><br><span class="line">  display: inline-block;</span><br><span class="line">  text-align: center;</span><br><span class="line">  width: 20px;</span><br><span class="line">}</span><br><span class="line">.subject input {</span><br><span class="line">  width: 50px;</span><br><span class="line">  height: 20px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>Flag.vue - ä¸‹é¢ç»“æœä¸€æ¡çš„ç»„ä»¶ (å¤åˆ¶æ ‡ç­¾å’Œæ ·å¼)(==å¯ä»¥å¤åˆ¶==)</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;span &gt;1: æœªå®Œæˆ&lt;/span&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.right {</span><br><span class="line">  color: green;</span><br><span class="line">}</span><br><span class="line">.error {</span><br><span class="line">  color: red;</span><br><span class="line">}</span><br><span class="line">.undo {</span><br><span class="line">  color: #ccc;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue - å¤åˆ¶æ ‡ç­¾å’Œæ ·å¼</p>
<p>æ— vueä»£ç çš„æ ‡ç­¾(==å¯ä»¥å¤åˆ¶==)</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>æµ‹è¯•é¢˜<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">subject</span> &gt;</span><span class="tag">&lt;/<span class="name">subject</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">flag</span>&gt;</span><span class="tag">&lt;/<span class="name">flag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  </span></span><br><span class="line"><span class="javascript">};</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-tag">body</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-id">#app</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span></span><br><span class="line"><span class="css">  <span class="attribute">box-shadow</span>: <span class="number">3px</span> <span class="number">3px</span> <span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">2em</span>;</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåº”ç”¨2-vueç§»åŠ¨ç«¯-ä»¿å¤´æ¡demo</title>
    <url>/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä¸€ã€é¡¹ç›®åˆå§‹åŒ–"><a href="#ä¸€ã€é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="ä¸€ã€é¡¹ç›®åˆå§‹åŒ–"></a>ä¸€ã€é¡¹ç›®åˆå§‹åŒ–</h1><blockquote>
<p>ç›®æ ‡</p>
<ul>
<li>èƒ½ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›®</li>
<li>äº†è§£ Vant ç»„ä»¶åº“çš„å¯¼å…¥æ–¹å¼</li>
<li>æŒæ¡åˆ¶ä½œä½¿ç”¨å­—ä½“å›¾æ ‡çš„æ–¹å¼</li>
<li>æŒæ¡å¦‚ä½•åœ¨ Vue é¡¹ç›®ä¸­å¤„ç† REM é€‚é…</li>
<li>ç†è§£ axios è¯·æ±‚æ¨¡å—çš„å°è£…</li>
</ul>
</blockquote>
<h2 id="ä½¿ç”¨-Vue-CLI-åˆ›å»ºé¡¹ç›®"><a href="#ä½¿ç”¨-Vue-CLI-åˆ›å»ºé¡¹ç›®" class="headerlink" title="ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›®"></a>ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›®</h2><blockquote>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… VueCLIï¼Œè¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…æˆ–æ˜¯å‡çº§ï¼š</p>
<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">npm install --global @vue/cli</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»º Vue é¡¹ç›®ï¼š</p>
<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">vue create toutiao-m</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">Vue CLI v4.2.3</span><br><span class="line">? Please pick a preset:</span><br><span class="line">  default (babel, eslint)</span><br><span class="line">&gt; Manually select features</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>defaultï¼šé»˜è®¤å‹¾é€‰ babelã€eslintï¼Œå›è½¦ä¹‹åç›´æ¥è¿›å…¥è£…åŒ…</p>
<p>manuallyï¼šè‡ªå®šä¹‰å‹¾é€‰ç‰¹æ€§é…ç½®ï¼Œé€‰æ‹©å®Œæ¯•ä¹‹åï¼Œæ‰ä¼šè¿›å…¥è£…åŒ…</p>
<p>é€‰æ‹©ç¬¬ 2 ç§ï¼šæ‰‹åŠ¨é€‰æ‹©ç‰¹æ€§ï¼Œæ”¯æŒæ›´å¤šè‡ªå®šä¹‰é€‰é¡¹</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">? Please pick a preset: Manually select features</span><br><span class="line">? Check the features needed for your project:</span><br><span class="line"> (*) Babel</span><br><span class="line"> ( ) TypeScript</span><br><span class="line"> ( ) Progressive Web App (PWA) Support</span><br><span class="line"> (*) Router</span><br><span class="line"> (*) Vuex</span><br><span class="line"> (*) CSS Pre-processors</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">(*) Linter / Formatter</span></span><br><span class="line"> ( ) Unit Testing</span><br><span class="line"> ( ) E2E Testing</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>åˆ†åˆ«é€‰æ‹©ï¼š<br>Babelï¼šes6 è½¬ es5<br>Routerï¼šè·¯ç”±<br>Vuexï¼šæ•°æ®å®¹å™¨ï¼Œå­˜å‚¨å…±äº«æ•°æ®<br>CSS Pre-processorsï¼šCSS é¢„å¤„ç†å™¨ï¼Œåé¢ä¼šæç¤ºä½ é€‰æ‹© lessã€sassã€stylus ç­‰<br>Linter / Formatterï¼šä»£ç æ ¼å¼æ ¡éªŒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">? Use history mode for router? (Requires proper server setup for index fallback in production) (Y/n) n</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>æ˜¯å¦ä½¿ç”¨ history è·¯ç”±æ¨¡å¼ï¼Œè¿™é‡Œè¾“å…¥ n ä¸ä½¿ç”¨</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default):</span><br><span class="line">  Sass/SCSS (with dart-sass)</span><br><span class="line">  Sass/SCSS (with node-sass)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Less</span></span><br><span class="line">  Stylus</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>é€‰æ‹© CSS é¢„å¤„ç†å™¨ï¼Œè¿™é‡Œé€‰æ‹©æˆ‘ä»¬ç†Ÿæ‚‰çš„ Less</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">? Pick a linter / formatter config:</span><br><span class="line">  ESLint with error prevention only</span><br><span class="line">  ESLint + Airbnb config</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> ESLint + Standard config</span></span><br><span class="line">  ESLint + Prettier</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>é€‰æ‹©æ ¡éªŒå·¥å…·ï¼Œè¿™é‡Œé€‰æ‹© ESLint + <a href="https://standardjs.com/">Standard config</a></p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">? Pick additional lint features:</span><br><span class="line"> (*) Lint on save</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">(*) Lint and fix on commit</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>é€‰æ‹©åœ¨ä»€ä¹ˆæ—¶æœºä¸‹è§¦å‘ä»£ç æ ¼å¼æ ¡éªŒï¼š</p>
<ul>
<li>Lint on saveï¼šæ¯å½“ä¿å­˜æ–‡ä»¶çš„æ—¶å€™</li>
<li>Lint and fix on commitï¼šæ¯å½“æ‰§è¡Œ <code>git commit</code> æäº¤çš„æ—¶å€™</li>
</ul>
</blockquote>
<p>è¿™é‡Œå»ºè®®ä¸¤ä¸ªéƒ½é€‰ä¸Šï¼Œæ›´ä¸¥è°¨ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> In dedicated config files</span></span><br><span class="line">  In package.json</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>Babelã€ESLint ç­‰å·¥å…·ä¼šæœ‰ä¸€äº›é¢å¤–çš„é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œçš„æ„æ€æ˜¯é—®ä½ å°†è¿™äº›å·¥å…·ç›¸å…³çš„é…ç½®æ–‡ä»¶å†™åˆ°å“ªé‡Œï¼š</p>
<ul>
<li>In dedicated config filesï¼šåˆ†åˆ«ä¿å­˜åˆ°å•ç‹¬çš„é…ç½®æ–‡ä»¶</li>
<li>In package.jsonï¼šä¿å­˜åˆ° package.json æ–‡ä»¶ä¸­</li>
</ul>
</blockquote>
<p>è¿™é‡Œå»ºè®®é€‰æ‹©ç¬¬ 1 ä¸ªï¼Œä¿å­˜åˆ°å•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åšè‡ªå®šä¹‰é…ç½®ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">? Save this as a preset for future projects? (y/N) N</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>è¿™é‡Œé‡Œæ˜¯é—®ä½ æ˜¯å¦éœ€è¦å°†åˆšæ‰é€‰æ‹©çš„ä¸€ç³»åˆ—é…ç½®ä¿å­˜èµ·æ¥ï¼Œç„¶åå®ƒå¯ä»¥å¸®ä½ è®°ä½ä¸Šé¢çš„ä¸€ç³»åˆ—é€‰æ‹©ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç›´æ¥é‡ç”¨ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™é‡Œæ ¹æ®è‡ªå·±éœ€è¦è¾“å…¥ y æˆ–è€… nï¼Œæˆ‘è¿™é‡Œè¾“å…¥ n ä¸éœ€è¦ã€‚</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">âœ¨  Creating project in C:\Users\LPZ\Desktop\topline-m-fe89\topline-m-89.</span><br><span class="line">ï¿½  Initializing git repository...</span><br><span class="line">âš™  Installing CLI plugins. This might take a while...</span><br><span class="line"></span><br><span class="line">[          ........] - extract:object-keys: sill extract json5@2.1.1</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>å‘å¯¼é…ç½®ç»“æŸï¼Œå¼€å§‹è£…åŒ…ã€‚<br>å®‰è£…åŒ…çš„æ—¶é—´å¯èƒ½è¾ƒé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…â€¦â€¦</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">âš“  Running completion hooks...</span><br><span class="line"></span><br><span class="line">ï¿½  Generating README.md...</span><br><span class="line"></span><br><span class="line">ï¿½  Successfully created project topline-m-89.</span><br><span class="line">ï¿½  Get started with the following commands:</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"> $</span><span class="bash"> <span class="built_in">cd</span> topline-m</span></span><br><span class="line"><span class="meta"> $</span><span class="bash"> npm run serve</span></span><br></pre></td></tr></tbody></table></figure>
<p>å®‰è£…ç»“æŸï¼Œå‘½ä»¤æç¤ºä½ é¡¹ç›®åˆ›å»ºæˆåŠŸï¼ŒæŒ‰ç…§å‘½ä»¤è¡Œçš„æç¤ºåœ¨ç»ˆç«¯ä¸­åˆ†åˆ«è¾“å…¥ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•</span></span><br><span class="line">cd toutiao-webapp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨å¼€å‘æœåŠ¡</span></span><br><span class="line">npm run serve</span><br></pre></td></tr></tbody></table></figure>




<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">DONE  Compiled successfully in 7527ms</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> App running at:</span><br><span class="line"> - Local:   http://localhost:8080/</span><br><span class="line"> - Network: http://192.168.10.216:8080/</span><br><span class="line"></span><br><span class="line"> Note that the development build is not optimized.</span><br><span class="line"> To create a production build, run npm run build.</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>å¯åŠ¨æˆåŠŸï¼Œå‘½ä»¤è¡Œä¸­è¾“å‡ºé¡¹ç›®çš„ http è®¿é—®åœ°å€ã€‚<br>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥å…¶ä¸­ä»»ä½•ä¸€ä¸ªåœ°å€è¿›è¡Œè®¿é—®ã€‚</p>
</blockquote>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582010300149-9932febe-2625-4ee7-986f-9190ab449fec.png" alt="image.png"></p>
<p>å¦‚æœèƒ½çœ‹åˆ°è¯¥é¡µé¢ï¼Œæ­å–œä½ ï¼Œé¡¹ç›®åˆ›å»ºæˆåŠŸäº†ã€‚</p>
<h2 id="åŠ å…¥-Git-ç‰ˆæœ¬ç®¡ç†"><a href="#åŠ å…¥-Git-ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="åŠ å…¥ Git ç‰ˆæœ¬ç®¡ç†"></a>åŠ å…¥ Git ç‰ˆæœ¬ç®¡ç†</h2><p>å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>ä»£ç å¤‡ä»½</li>
<li>å¤šäººåä½œ</li>
<li>å†å²è®°å½•</li>
<li>â€¦</li>
</ul>
<p>ï¼ˆ1ï¼‰åˆ›å»ºè¿œç¨‹ä»“åº“</p>
<ul>
<li><a href="https://github.com/lipengzhou">GitHub</a></li>
<li><a href="https://gitee.com/">ç äº‘</a></li>
<li><a href="https://coding.net/">Coding</a></li>
<li>â€¦</li>
</ul>
<p>ï¼ˆ2ï¼‰å°†æœ¬åœ°ä»“åº“æ¨åˆ°çº¿ä¸Š</p>
<p>å¦‚æœæ²¡æœ‰æœ¬åœ°ä»“åº“ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºæœ¬åœ°ä»“åº“</span></span><br><span class="line">git init</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git add æ–‡ä»¶</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æäº¤å†å²è®°å½•</span></span><br><span class="line">git commit "æäº¤æ—¥å¿—"</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ è¿œç«¯ä»“åº“åœ°å€</span></span><br><span class="line">git remote add origin ä½ çš„è¿œç¨‹ä»“åº“åœ°å€</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¨é€æäº¤</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœå·²æœ‰æœ¬åœ°ä»“åº“ï¼ˆVue CLI å·²ç»å¸®æˆ‘ä»¬åˆå§‹åŒ–å¥½äº†ï¼‰ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ è¿œç«¯ä»“åº“åœ°å€</span></span><br><span class="line">git remote add origin ä½ çš„è¿œç¨‹ä»“åº“åœ°å€</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¨é€æäº¤</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœä¹‹åé¡¹ç›®ä»£ç æœ‰äº†å˜åŠ¨éœ€è¦æäº¤ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">git add</span><br><span class="line">git commit</span><br><span class="line">git push</span><br></pre></td></tr></tbody></table></figure>

<h2 id="è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„"><a href="#è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„" class="headerlink" title="è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„"></a>è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„</h2><p>é»˜è®¤ç”Ÿæˆçš„ç›®å½•ç»“æ„ä¸æ»¡è¶³æˆ‘ä»¬çš„å¼€å‘éœ€æ±‚ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åšä¸€äº›è‡ªå®šä¹‰æ”¹åŠ¨ã€‚</p>
<p>è¿™é‡Œä¸»è¦å°±æ˜¯ä¸‹é¢çš„ä¸¤ä¸ªå·¥ä½œï¼š</p>
<ul>
<li>åˆ é™¤åˆå§‹åŒ–çš„é»˜è®¤æ–‡ä»¶</li>
<li>æ–°å¢è°ƒæ•´æˆ‘ä»¬éœ€è¦çš„ç›®å½•ç»“æ„</li>
</ul>
<p>1ã€å°† <code>App.vue</code> ä¿®æ”¹ä¸º</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é»‘é©¬å¤´æ¡<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'App'</span></span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€å°† <code>router/index.js</code> ä¿®æ”¹ä¸º</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter({</span><br><span class="line">  routes</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åˆ é™¤</p>
<ul>
<li>src/views/About.vue</li>
<li>src/views/Home.vue</li>
<li>src/components/HelloWorld.vue</li>
<li>src/assets/logo.png</li>
</ul>
<p>4ã€åˆ›å»ºä»¥ä¸‹å‡ ä¸ªç›®å½•</p>
<ul>
<li>src/api ç›®å½•<ul>
<li>å­˜å‚¨æ¥å£å°è£…</li>
</ul>
</li>
<li>src/utils ç›®å½•<ul>
<li>å­˜å‚¨ä¸€äº›å·¥å…·æ¨¡å—</li>
</ul>
</li>
<li>src/styles ç›®å½•<ul>
<li>index.less æ–‡ä»¶ï¼Œå­˜å‚¨å…¨å±€æ ·å¼</li>
<li>åœ¨ <code>main.js</code> ä¸­åŠ è½½å…¨å±€æ ·å¼ <code>import './styles/index.less'</code></li>
</ul>
</li>
</ul>
<p>è°ƒæ•´ä¹‹åçš„ç›®å½•ç»“æ„å¦‚ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">.                                 </span><br><span class="line">â”œâ”€â”€ README.md                     </span><br><span class="line">â”œâ”€â”€ babel.config.js               </span><br><span class="line">â”œâ”€â”€ package-lock.json             </span><br><span class="line">â”œâ”€â”€ package.json                  </span><br><span class="line">â”œâ”€â”€ public                        </span><br><span class="line">â”‚   â”œâ”€â”€ favicon.ico               </span><br><span class="line">â”‚   â””â”€â”€ index.html                </span><br><span class="line">â””â”€â”€ src                           </span><br><span class="line">    â”œâ”€â”€ api</span><br><span class="line">    â”œâ”€â”€ App.vue                   </span><br><span class="line">    â”œâ”€â”€ assets                    </span><br><span class="line">    â”œâ”€â”€ components                </span><br><span class="line">    â”œâ”€â”€ main.js                   </span><br><span class="line">    â”œâ”€â”€ router</span><br><span class="line">    â”œâ”€â”€ utils</span><br><span class="line">    â”œâ”€â”€ styles</span><br><span class="line">    â”œâ”€â”€ store                     </span><br><span class="line">    â””â”€â”€ views</span><br></pre></td></tr></tbody></table></figure>



<h2 id="å¯¼å…¥å›¾æ ‡ç´ æ"><a href="#å¯¼å…¥å›¾æ ‡ç´ æ" class="headerlink" title="å¯¼å…¥å›¾æ ‡ç´ æ"></a>å¯¼å…¥å›¾æ ‡ç´ æ</h2><p>è®¾è®¡å¸ˆä¸ºæˆ‘ä»¬å•ç‹¬æä¾›äº†è®¾è®¡ç¨¿ä¸­çš„å›¾æ ‡ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬åœ¨è¿™é‡ŒæŠŠå®ƒåˆ¶ä½œä¸ºå­—ä½“å›¾æ ‡ã€‚</p>
<p>åˆ¶ä½œå­—ä½“å›¾æ ‡çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ¨èå¤§å®¶ä½¿ç”¨ï¼š<a href="https://www.iconfont.cn/%E3%80%82">https://www.iconfont.cn/ã€‚</a></p>
<p>ä¸€ã€æ³¨å†Œè´¦æˆ·</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325004756766.png" alt="image-20200325004756766"></p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325004912687.png" alt="image-20200325004912687"></p>
<blockquote>
<p>ç›´æ¥é€‰æ‹©ç¬¬ä¸‰æ–¹ç™»å½•å³å¯</p>
</blockquote>
<p>äºŒã€åˆ›å»ºé¡¹ç›®</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325005117323.png" alt="image-20200325005117323"></p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325005648620.png" alt="image-20200325005648620"></p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010034390.png" alt="image-20200325010034390"></p>
<p>ä¸‰ã€ä¸Šä¼ å›¾æ ‡åˆ°é¡¹ç›®</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010119980.png" alt="image-20200325010119980"></p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010201945.png" alt="image-20200325010201945"></p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010254398.png" alt="image-20200325010254398"></p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010413448.png" alt="image-20200325010413448"></p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010439802.png" alt="image-20200325010439802"></p>
<p>å››ã€ç”Ÿæˆé“¾æ¥</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010505302.png" alt="image-20200325010505302"></p>
<p>äº”ã€é…ç½®åˆ°é¡¹ç›®ä¸­ä½¿ç”¨</p>
<p>ä¸€ç§æ–¹å¼æ˜¯<a href="https://cn.vuejs.org/v2/cookbook/editable-svg-icons.html">å°† SVG å›¾æ ‡ åŒ…è£…ä¸º Vue ç»„ä»¶æ¥ä½¿ç”¨</a>ã€‚</p>
<p>ä¸€ç§æ–¹å¼æ˜¯å°† SVG åˆ¶ä½œä¸ºå­—ä½“å›¾æ ‡æ¥ä½¿ç”¨ï¼š</p>
<h2 id="å¼•å…¥-Vant-ç»„ä»¶åº“"><a href="#å¼•å…¥-Vant-ç»„ä»¶åº“" class="headerlink" title="å¼•å…¥ Vant ç»„ä»¶åº“"></a>å¼•å…¥ Vant ç»„ä»¶åº“</h2><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582010382780-c25b1af8-ce6d-438e-a6d5-009cd426b927.png" alt="image.png" style="zoom:25%;">



<p>Vant æ˜¯æœ‰èµå•†åŸå‰ç«¯å¼€å‘å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªåŸºäº Vue.js çš„ç§»åŠ¨ç«¯ç»„ä»¶åº“ï¼Œå®ƒæä¾›äº†éå¸¸ä¸°å¯Œçš„ç§»åŠ¨ç«¯åŠŸèƒ½ç»„ä»¶ï¼Œç®€å•æ˜“ç”¨ã€‚</p>
<ul>
<li><a href="https://youzan.github.io/vant/#/zh-CN/">å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://github.com/youzan/vant">GitHub ä»“åº“</a></li>
</ul>
<p>ä¸‹é¢æ˜¯åœ¨ Vant å®˜ç½‘ä¸­åˆ—å‡ºçš„ä¸€äº›ä¼˜ç‚¹ï¼š</p>
<ul>
<li>60+ é«˜è´¨é‡ç»„ä»¶</li>
<li>90% å•å…ƒæµ‹è¯•è¦†ç›–ç‡</li>
<li>å®Œå–„çš„ä¸­è‹±æ–‡æ–‡æ¡£å’Œç¤ºä¾‹</li>
<li>æ”¯æŒæŒ‰éœ€å¼•å…¥</li>
<li>æ”¯æŒä¸»é¢˜å®šåˆ¶</li>
<li>æ”¯æŒå›½é™…åŒ–</li>
<li>æ”¯æŒ TS</li>
<li>æ”¯æŒ SSR</li>
</ul>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¸»è¦ä½¿ç”¨ Vant ä½œä¸ºæ ¸å¿ƒç»„ä»¶åº“ï¼Œä¸‹é¢æˆ‘ä»¬æ ¹æ®<a href="https://youzan.github.io/vant/#/zh-CN/quickstart#yin-ru-zu-jian">å®˜æ–¹æ–‡æ¡£</a>å°† Vant å¯¼å…¥é¡¹ç›®ä¸­ã€‚</p>
<p>å°† Vant å¼•å…¥é¡¹ç›®ä¸€å…±æœ‰å››ç§æ–¹å¼ï¼š</p>
<ul>
<li><p>æ–¹å¼ä¸€ï¼šè‡ªåŠ¨æŒ‰éœ€å¼•å…¥ç»„ä»¶</p>
<ul>
<li>å’Œæ–¹å¼äºŒä¸€æ ·ï¼Œéƒ½æ˜¯æŒ‰éœ€å¼•å…¥ï¼Œä½†æ˜¯åŠ è½½æ›´æ–¹ä¾¿ä¸€äº›ï¼ˆéœ€è¦é¢å¤–é…ç½®æ’ä»¶ï¼‰</li>
<li>ä¼˜ç‚¹ï¼šæ‰“åŒ…ä½“ç§¯å°</li>
<li>ç¼ºç‚¹ï¼šæ¯ä¸ªç»„ä»¶åœ¨ä½¿ç”¨ä¹‹å‰éƒ½éœ€è¦æ‰‹åŠ¨åŠ è½½æ³¨å†Œ</li>
</ul>
</li>
<li><p>æ–¹å¼äºŒï¼šæ‰‹åŠ¨æŒ‰éœ€å¼•å…¥ç»„ä»¶</p>
<ul>
<li>åœ¨ä¸ä½¿ç”¨æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰‹åŠ¨å¼•å…¥éœ€è¦çš„ç»„ä»¶</li>
<li>ä¼˜ç‚¹ï¼šæ‰“åŒ…ä½“ç§¯å°</li>
<li>ç¼ºç‚¹ï¼šæ¯ä¸ªç»„ä»¶åœ¨ä½¿ç”¨ä¹‹å‰éƒ½éœ€è¦æ‰‹åŠ¨åŠ è½½æ³¨å†Œ</li>
</ul>
</li>
<li><p>æ–¹å¼ä¸‰ï¼šå¯¼å…¥æ‰€æœ‰ç»„ä»¶</p>
<ul>
<li>Vant æ”¯æŒä¸€æ¬¡æ€§å¯¼å…¥æ‰€æœ‰ç»„ä»¶ï¼Œå¼•å…¥æ‰€æœ‰ç»„ä»¶ä¼šå¢åŠ ä»£ç åŒ…ä½“ç§¯ï¼Œå› æ­¤ä¸æ¨èè¿™ç§åšæ³•</li>
<li>ä¼˜ç‚¹ï¼šå¯¼å…¥ä¸€æ¬¡ï¼Œä½¿ç”¨æ‰€æœ‰</li>
<li>ç¼ºç‚¹ï¼šæ‰“åŒ…ä½“ç§¯å¤§</li>
</ul>
</li>
<li><p>æ–¹å¼å››ï¼šé€šè¿‡ CDN å¼•å…¥</p>
<ul>
<li>ä½¿ç”¨ Vant æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥åœ¨ html æ–‡ä»¶ä¸­å¼•å…¥ CDN é“¾æ¥ï¼Œä¹‹åä½ å¯ä»¥é€šè¿‡å…¨å±€å˜é‡<code>vant</code>è®¿é—®åˆ°æ‰€æœ‰ç»„ä»¶ã€‚</li>
<li>ä¼˜ç‚¹ï¼šé€‚åˆä¸€äº›æ¼”ç¤ºã€ç¤ºä¾‹é¡¹ç›®ï¼Œä¸€ä¸ª html æ–‡ä»¶å°±å¯ä»¥è·‘èµ·æ¥</li>
<li>ç¼ºç‚¹ï¼šä¸é€‚åˆåœ¨æ¨¡å—åŒ–ç³»ç»Ÿä¸­ä½¿ç”¨</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œå»ºè®®ä¸ºäº†å‰æœŸå¼€å‘çš„ä¾¿åˆ©æ€§æˆ‘ä»¬é€‰æ‹©æ–¹å¼ä¸‰ï¼šå¯¼å…¥æ‰€æœ‰ç»„ä»¶ï¼Œåœ¨æœ€ååšæ‰“åŒ…ä¼˜åŒ–çš„æ—¶å€™æ ¹æ®éœ€æ±‚é…ç½®æŒ‰éœ€åŠ è½½ä»¥é™ä½æ‰“åŒ…ä½“ç§¯å¤§å°ã€‚</p>
<p>1ã€å®‰è£… Vant</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">npm i vant</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ <code>main.js</code> ä¸­åŠ è½½æ³¨å†Œ Vant ç»„ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vant <span class="keyword">from</span> <span class="string">'vant'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'vant/lib/index.css'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vant)</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æŸ¥é˜…æ–‡æ¡£ä½¿ç”¨ç»„ä»¶</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582017539392-6c48b63f-8e8b-4ef2-b4fa-ddeb059cec04.png" alt="image.png"></p>
<blockquote>
<p>Vant çš„æ–‡æ¡£éå¸¸æ¸…æ™°ï¼Œå·¦ä¾§æ˜¯ç»„ä»¶ç›®å½•å¯¼èˆªï¼Œä¸­é—´æ˜¯æ•ˆæœä»£ç ï¼Œå³è¾¹æ˜¯æ•ˆæœé¢„è§ˆã€‚</p>
</blockquote>
<p>ä¾‹å¦‚æˆ‘ä»¬åœ¨æ ¹ç»„ä»¶ä½¿ç”¨ Vant ä¸­çš„ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"info"</span>&gt;</span>ä¿¡æ¯æŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"warning"</span>&gt;</span>è­¦å‘ŠæŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"danger"</span>&gt;</span>å±é™©æŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å•å…ƒæ ¼"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å•å…ƒæ ¼"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> <span class="attr">label</span>=<span class="string">"æè¿°ä¿¡æ¯"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200227231037762.png" alt="image-20200227231037762" style="zoom:50%;">

<blockquote>
<p>å¦‚æœåœ¨é¡µé¢ä¸­èƒ½å¤Ÿæ­£å¸¸çš„çœ‹åˆ°ä¸‹é¢çš„æ•ˆæœï¼Œåˆ™è¯´æ˜ Vant å¯¼å…¥æˆåŠŸäº†ã€‚</p>
</blockquote>
<h2 id="ç§»åŠ¨ç«¯-REM-é€‚é…"><a href="#ç§»åŠ¨ç«¯-REM-é€‚é…" class="headerlink" title="ç§»åŠ¨ç«¯ REM é€‚é…"></a>ç§»åŠ¨ç«¯ REM é€‚é…</h2><p>Vant ä¸­çš„æ ·å¼é»˜è®¤ä½¿ç”¨ <code>px</code> ä½œä¸ºå•ä½ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ <code>rem</code> å•ä½ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå·¥å…·ï¼š</p>
<ul>
<li><a href="https://github.com/cuth/postcss-pxtorem">postcss-pxtorem</a> æ˜¯ä¸€æ¬¾ postcss æ’ä»¶ï¼Œç”¨äºå°†å•ä½è½¬åŒ–ä¸º rem</li>
<li><a href="https://github.com/amfe/lib-flexible">lib-flexible</a> ç”¨äºè®¾ç½® rem åŸºå‡†å€¼</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«å°†è¿™ä¸¤ä¸ªå·¥å…·é…ç½®åˆ°é¡¹ç›®ä¸­å®Œæˆ REM é€‚é…ã€‚</p>
<p><strong>ä¸€ã€ä½¿ç”¨ <a href="https://github.com/amfe/lib-flexible">lib-flexible</a> åŠ¨æ€è®¾ç½® REM åŸºå‡†å€¼ï¼ˆhtml æ ‡ç­¾çš„å­—ä½“å¤§å°ï¼‰</strong></p>
<p>1ã€å®‰è£…</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yarn add amfe-flexible</span></span><br><span class="line">npm i amfe-flexible</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨ <code>main.js</code> ä¸­åŠ è½½æ‰§è¡Œè¯¥æ¨¡å—</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'amfe-flexible'</span></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ï¼šåœ¨æµè§ˆå™¨ä¸­åˆ‡æ¢ä¸åŒçš„æ‰‹æœºè®¾å¤‡å°ºå¯¸ï¼Œè§‚å¯Ÿ html æ ‡ç­¾ <code>font-size</code> çš„å˜åŒ–ã€‚</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582034718723-500ef407-af66-4770-8fdd-33d0fc3ef9ed.png" alt="image.png"></p>
<blockquote>
<p>ä¾‹å¦‚åœ¨ iPhone 6/7/8 è®¾å¤‡ä¸‹ï¼Œhtml æ ‡ç­¾å­—ä½“å¤§å°ä¸º 37.5 px</p>
</blockquote>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582034950176-868d5875-3496-45d3-8a61-e556e1cc1f90.png" alt="image.png"></p>
<blockquote>
<p>ä¾‹å¦‚åœ¨ iPhone 6/7/8 Plus è®¾å¤‡ä¸‹ï¼Œhtml æ ‡ç­¾å­—ä½“å¤§å°ä¸º 41.4 px</p>
</blockquote>
<p><strong>äºŒã€ä½¿ç”¨ <a href="https://github.com/cuth/postcss-pxtorem">postcss-pxtorem</a> å°† <code>px</code> è½¬ä¸º <code>rem</code></strong></p>
<p>1ã€å®‰è£…</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yarn add -D postcss-pxtorem</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -D æ˜¯ --save-dev çš„ç®€å†™</span></span><br><span class="line">npm install postcss-pxtorem -D</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨<strong>é¡¹ç›®æ ¹ç›®å½•</strong>ä¸­åˆ›å»º <code>.postcssrc.js</code> æ–‡ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'autoprefixer'</span>: {</span><br><span class="line">      <span class="attr">browsers</span>: [<span class="string">'Android &gt;= 4.0'</span>, <span class="string">'iOS &gt;= 8'</span>]</span><br><span class="line">    },</span><br><span class="line">    <span class="string">'postcss-pxtorem'</span>: {</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">37.5</span>,</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">'*'</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€<strong>é…ç½®å®Œæ¯•ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡</strong></p>
<p>æœ€åæµ‹è¯•ï¼š<strong>åˆ·æ–°æµè§ˆå™¨é¡µé¢</strong>ï¼Œå®¡æŸ¥å…ƒç´ çš„æ ·å¼æŸ¥çœ‹æ˜¯å¦å·²å°† <code>px</code> è½¬æ¢ä¸º <code>rem</code>ã€‚</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582035408807-1adb02e6-4576-48b6-8fb9-b3a0c57ead0d.png" alt="image.png"></p>
<blockquote>
<p>è¿™æ˜¯æ²¡æœ‰é…ç½®è½¬æ¢ä¹‹å‰çš„ã€‚</p>
</blockquote>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582035305177-d13c0a83-65bf-4fe5-a509-83bbb3bbf627.png" alt="image.png"></p>
<blockquote>
<p>è¿™æ˜¯è½¬æ¢ä¹‹åçš„ï¼Œå¯ä»¥çœ‹åˆ° px éƒ½è¢«è½¬æ¢ä¸ºäº† remã€‚</p>
</blockquote>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</strong></p>
<ul>
<li>è¯¥æ’ä»¶**ä¸èƒ½è½¬æ¢è¡Œå†…æ ·å¼ä¸­çš„ <code>px</code>**ï¼Œä¾‹å¦‚ <code>&lt;div style="width: 200px;"&gt;&lt;/div&gt;</code></li>
</ul>
<h2 id="å…³äº-postcssrc-js-é…ç½®æ–‡ä»¶"><a href="#å…³äº-postcssrc-js-é…ç½®æ–‡ä»¶" class="headerlink" title="å…³äº .postcssrc.js é…ç½®æ–‡ä»¶"></a>å…³äº <code>.postcssrc.js</code> é…ç½®æ–‡ä»¶</h2><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'autoprefixer'</span>: {</span><br><span class="line">      <span class="attr">browsers</span>: [<span class="string">'Android &gt;= 4.0'</span>, <span class="string">'iOS &gt;= 8'</span>]</span><br><span class="line">    },</span><br><span class="line">    <span class="string">'postcss-pxtorem'</span>: {</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">37.5</span>,</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">'*'</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><code>.postcssrc.js</code> æ˜¯ PostCSS çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>ï¼ˆ1ï¼‰PostCSS ä»‹ç»</p>
<p><a href="https://postcss.org/">PostCSS</a> æ˜¯ä¸€ä¸ªå¤„ç† CSS çš„å¤„ç†å·¥å…·ï¼Œæœ¬èº«åŠŸèƒ½æ¯”è¾ƒå•ä¸€ï¼Œå®ƒä¸»è¦è´Ÿè´£è§£æ CSS ä»£ç ï¼Œå†äº¤ç”±æ’ä»¶æ¥è¿›è¡Œå¤„ç†ï¼Œå®ƒçš„æ’ä»¶ä½“ç³»éå¸¸å¼ºå¤§ï¼Œæ‰€èƒ½è¿›è¡Œçš„æ“ä½œæ˜¯å¤šç§å¤šæ ·çš„ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><a href="https://github.com/postcss/autoprefixer">Autoprefixer</a> æ’ä»¶å¯ä»¥å®ç°è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨ç›¸å…³çš„å£°æ˜å‰ç¼€</li>
<li><a href="https://github.com/csstools/postcss-preset-env">PostCSS Preset Env</a> æ’ä»¶å¯ä»¥è®©ä½ ä½¿ç”¨æ›´æ–°çš„ CSS è¯­æ³•ç‰¹æ€§å¹¶å®ç°å‘ä¸‹å…¼å®¹</li>
<li><a href="https://github.com/cuth/postcss-pxtorem">postcss-pxtorem</a> å¯ä»¥å®ç°å°† px è½¬æ¢ä¸º rem</li>
<li>â€¦</li>
</ul>
<p>ç›®å‰ PostCSS å·²ç»æœ‰ <a href="https://github.com/postcss/postcss/blob/master/docs/plugins.md">200 å¤šä¸ªåŠŸèƒ½å„å¼‚çš„æ’ä»¶</a>ã€‚å¼€å‘äººå‘˜ä¹Ÿå¯ä»¥æ ¹æ®é¡¹ç›®çš„éœ€è¦ï¼Œå¼€å‘å‡ºè‡ªå·±çš„ PostCSS æ’ä»¶ã€‚</p>
<p>PostCSS ä¸€èˆ¬ä¸å•ç‹¬ä½¿ç”¨ï¼Œè€Œæ˜¯ä¸å·²æœ‰çš„æ„å»ºå·¥å…·è¿›è¡Œé›†æˆã€‚</p>
<p><a href="https://cli.vuejs.org/zh/guide/css.html#postcss">Vue CLI é»˜è®¤é›†æˆäº† PostCSS</a>ï¼Œå¹¶ä¸”é»˜è®¤å¼€å¯äº† <a href="https://github.com/postcss/autoprefixer">autoprefixer</a> æ’ä»¶ã€‚</p>
<blockquote>
<p>Vue CLI å†…éƒ¨ä½¿ç”¨äº† PostCSSã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>.postcssrc</code> æˆ–ä»»ä½• <a href="https://github.com/michael-ciniawsky/postcss-load-config">postcss-load-config</a> æ”¯æŒçš„é…ç½®æºæ¥é…ç½® PostCSSã€‚ä¹Ÿå¯ä»¥é€šè¿‡ <code>vue.config.js</code> ä¸­çš„ <code>css.loaderOptions.postcss</code> é…ç½® <a href="https://github.com/postcss/postcss-loader">postcss-loader</a>ã€‚</p>
<p>æˆ‘ä»¬é»˜è®¤å¼€å¯äº† <a href="https://github.com/postcss/autoprefixer">autoprefixer</a>ã€‚å¦‚æœè¦é…ç½®ç›®æ ‡æµè§ˆå™¨ï¼Œå¯ä½¿ç”¨ <code>package.json</code> çš„ <a href="https://cli.vuejs.org/zh/guide/browser-compatibility.html#browserslist">browserslist</a> å­—æ®µã€‚</p>
</blockquote>
<p>ï¼ˆ2ï¼‰Autoprefixer æ’ä»¶çš„é…ç½®</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200319104557718.png" alt="image-20200319104557718"></p>
<p><a href="https://github.com/postcss/autoprefixer">autoprefixer</a> æ˜¯ä¸€ä¸ªè‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€çš„ PostCss æ’ä»¶ï¼Œ<code>browsers</code> ç”¨æ¥é…ç½®å…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯ï¼Œä½†æ˜¯å†™åœ¨è¿™é‡Œçš„è¯ä¼šå¼•èµ·ç¼–è¯‘å™¨è­¦å‘Šã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Replace Autoprefixer browsers option to Browserslist config.</span><br><span class="line">Use browserslist key in package.json or .browserslistrc file.</span><br><span class="line"></span><br><span class="line">Using browsers option can cause errors. Browserslist config</span><br><span class="line">can be used for Babel, Autoprefixer, postcss-normalize and other tools.</span><br><span class="line"></span><br><span class="line">If you really need to use option, rename it to overrideBrowserslist.</span><br><span class="line"></span><br><span class="line">Learn more at:</span><br><span class="line">https://github.com/browserslist/browserslist#readme</span><br><span class="line">https://twitter.com/browserslist</span><br></pre></td></tr></tbody></table></figure>

<p>è­¦å‘Šæ„æ€å°±æ˜¯è¯´ä½ åº”è¯¥å°† <code>browsers</code> é€‰é¡¹å†™åˆ° <code>package.json</code> æˆ– <code>.browserlistrc</code> æ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">[Android]</span><br><span class="line">&gt;= 4.0</span><br><span class="line"></span><br><span class="line">[iOS]</span><br><span class="line">&gt;= 8</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å…·ä½“è¯­æ³•è¯·<a href="https://github.com/browserslist/browserslist">å‚è€ƒè¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>ï¼ˆ3ï¼‰postcss-pxtorem æ’ä»¶çš„é…ç½®</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200319105610557.png" alt="image-20200319105610557"></p>
<ul>
<li><code>rootValue</code>ï¼šè¡¨ç¤ºæ ¹å…ƒç´ å­—ä½“å¤§å°ï¼Œå®ƒä¼šæ ¹æ®æ ¹å…ƒç´ å¤§å°è¿›è¡Œå•ä½è½¬æ¢</li>
<li><code>propList</code> ç”¨æ¥è®¾å®šå¯ä»¥ä» px è½¬ä¸º rem çš„å±æ€§<ul>
<li>ä¾‹å¦‚ <code>*</code> å°±æ˜¯æ‰€æœ‰å±æ€§éƒ½è¦è½¬æ¢ï¼Œ<code>width</code> å°±æ˜¯ä»…è½¬æ¢ <code>width</code> å±æ€§</li>
</ul>
</li>
</ul>
<p><code>rootValue</code> åº”è¯¥å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">å¦‚æœä½ ä½¿ç”¨çš„æ˜¯åŸºäº lib-flexable çš„ REM é€‚é…æ–¹æ¡ˆï¼Œåˆ™åº”è¯¥è®¾ç½®ä¸ºä½ çš„è®¾è®¡ç¨¿çš„ååˆ†ä¹‹ä¸€ã€‚</span><br><span class="line">ä¾‹å¦‚è®¾è®¡ç¨¿æ˜¯ 750 å®½ï¼Œåˆ™åº”è¯¥è®¾ç½®ä¸º 75ã€‚</span><br></pre></td></tr></tbody></table></figure>



<p>å¤§å¤šæ•°è®¾è®¡ç¨¿çš„åŸå‹éƒ½æ˜¯ä»¥ iphone6 ä¸ºåŸå‹ï¼Œiphone6 è®¾å¤‡çš„å®½æ˜¯ 750ï¼Œæˆ‘ä»¬çš„è®¾è®¡ç¨¿ä¹Ÿæ˜¯è¿™æ ·ã€‚</p>
<p>ä½†æ˜¯ Vant å»ºè®®è®¾ç½®ä¸º 37.5ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">å› ä¸º Vant æ˜¯åŸºäº 375 å†™çš„ï¼Œæ‰€ä»¥å¦‚æœä½ è®¾ç½®ä¸º 75 çš„è¯ï¼ŒVant çš„æ ·å¼å°±å°äº†ä¸€åŠã€‚</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰€ä»¥å¦‚æœè®¾ç½®ä¸º <code>37.5</code> çš„è¯ï¼ŒVant çš„æ ·å¼æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨æµ‹é‡è®¾è®¡ç¨¿çš„æ—¶å€™éƒ½å¿…é¡»é™¤2æ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™å°±ä¼šå˜å¾—å¾ˆå¤§ã€‚</p>
<p>è¿™æ ·åšå…¶å®ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å‘¢ï¼Ÿæˆ‘å°±æƒ³å®ç°æµ‹é‡å¤šå°‘å†™å¤šå°‘ï¼ˆä¸ç”¨æ¢ç®—ï¼‰ã€‚äºæ˜¯èªæ˜çš„ä½ å°±æƒ³ï¼Œå¯ä»¥ä¸å¯ä»¥è¿™æ ·æ¥åšï¼Ÿ</p>
<ul>
<li>å¦‚æœæ˜¯ Vant çš„æ ·å¼ï¼Œå°±æŠŠ <code>rootValue</code> è®¾ç½®ä¸º 37.5 æ¥è½¬æ¢</li>
<li>å¦‚æœæ˜¯æˆ‘ä»¬çš„æ ·å¼ï¼Œå°±æŒ‰ç…§ 75 çš„ <code>rootValue</code> æ¥è½¬æ¢</li>
</ul>
<p>é€šè¿‡<a href="https://github.com/cuth/postcss-pxtorem#options">æŸ¥é˜…æ–‡æ¡£</a>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>rootValue</code> æ”¯æŒä¸¤ç§å‚æ•°ç±»å‹ï¼š</p>
<ul>
<li>æ•°å­—ï¼šå›ºå®šå€¼</li>
<li>å‡½æ•°ï¼šåŠ¨æ€è®¡ç®—è¿”å›<ul>
<li>postcss-pxtorem å¤„ç†æ¯ä¸ª CSS æ–‡ä»¶çš„æ—¶å€™éƒ½ä¼šæ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°</li>
<li>å®ƒä¼šæŠŠè¢«å¤„ç†çš„ CSS æ–‡ä»¶ç›¸å…³çš„ä¿¡æ¯é€šè¿‡å‚æ•°ä¼ é€’ç»™è¯¥å‡½æ•°</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PostCSS é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="comment">// é…ç½®è¦ä½¿ç”¨çš„ PostCSS æ’ä»¶</span></span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="comment">// é…ç½®ä½¿ç”¨ autoprefixer æ’ä»¶</span></span><br><span class="line">    <span class="comment">// ä½œç”¨ï¼šç”Ÿæˆæµè§ˆå™¨ CSS æ ·å¼è§„åˆ™å‰ç¼€</span></span><br><span class="line">    <span class="comment">// VueCLI å†…éƒ¨å·²ç»é…ç½®äº† autoprefixer æ’ä»¶</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥åˆé…ç½®äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥äº§ç”Ÿå†²çªäº†</span></span><br><span class="line">    <span class="comment">// 'autoprefixer': { // autoprefixer æ’ä»¶çš„é…ç½®</span></span><br><span class="line">    <span class="comment">//   // é…ç½®è¦å…¼å®¹åˆ°çš„ç¯å¢ƒä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//   browsers: ['Android &gt;= 4.0', 'iOS &gt;= 8']</span></span><br><span class="line">    <span class="comment">// },</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®ä½¿ç”¨ postcss-pxtorem æ’ä»¶</span></span><br><span class="line">    <span class="comment">// ä½œç”¨ï¼šæŠŠ px è½¬ä¸º rem</span></span><br><span class="line">    <span class="string">'postcss-pxtorem'</span>: {</span><br><span class="line">      rootValue ({ file }) {</span><br><span class="line">        <span class="keyword">return</span> file.indexOf(<span class="string">'vant'</span>) !== -<span class="number">1</span> ? <span class="number">37.5</span> : <span class="number">75</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">'*'</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>é…ç½®å®Œæ¯•ï¼ŒæŠŠæœåŠ¡é‡å¯ä¸€ä¸‹ï¼Œæœ€åæµ‹è¯•ï¼Œvery goodã€‚</p>
<h2 id="å°è£…è¯·æ±‚æ¨¡å—"><a href="#å°è£…è¯·æ±‚æ¨¡å—" class="headerlink" title="å°è£…è¯·æ±‚æ¨¡å—"></a>å°è£…è¯·æ±‚æ¨¡å—</h2><p>å’Œä¹‹å‰é¡¹ç›®ä¸€æ ·ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ <a href="https://github.com/axios/axios">axios</a> ä½œä¸ºæˆ‘ä»¬é¡¹ç›®ä¸­çš„è¯·æ±‚åº“ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬æŠŠå®ƒå°è£…ä¸ºä¸€ä¸ªè¯·æ±‚æ¨¡å—ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ç›´æ¥åŠ è½½å³å¯ã€‚</p>
<p>1ã€å®‰è£… axios</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">npm i axios</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åˆ›å»º <code>src/utils/request.js</code></p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£… axios è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">"http://ttapi.research.itcast.cn/"</span> <span class="comment">// åŸºç¡€è·¯å¾„</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€å¦‚ä½•ä½¿ç”¨</p>
<ul>
<li>æ–¹å¼ä¸€ï¼ˆç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯ä¸åˆ©äºæ¥å£ç»´æŠ¤ï¼‰ï¼šæˆ‘ä»¬å¯ä»¥æŠŠè¯·æ±‚å¯¹è±¡æŒ‚è½½åˆ° <code>Vue.prototype</code> åŸå‹å¯¹è±¡ä¸­ï¼Œç„¶ååœ¨ç»„ä»¶ä¸­é€šè¿‡ <code>this.xxx</code> ç›´æ¥è®¿é—®</li>
<li>æ–¹å¼äºŒï¼ˆæ¨èï¼‰ï¼šæˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªè¯·æ±‚éƒ½å°è£…æˆæ¯ä¸ªç‹¬ç«‹çš„åŠŸèƒ½å‡½æ•°ï¼Œåœ¨éœ€è¦çš„æ—¶å€™åŠ è½½è°ƒç”¨ï¼Œè¿™ç§åšæ³•æ›´ä¾¿äºæ¥å£çš„ç®¡ç†å’Œç»´æŠ¤</li>
</ul>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å»ºè®®ä½¿ç”¨æ–¹å¼äºŒï¼Œæ›´æ¨èï¼ˆåœ¨éšåçš„ä¸šåŠ¡åŠŸèƒ½ä¸­æˆ‘ä»¬å°±èƒ½å­¦åˆ°ï¼‰ã€‚</p>
<h1 id="äºŒã€ç™»å½•æ³¨å†Œ"><a href="#äºŒã€ç™»å½•æ³¨å†Œ" class="headerlink" title="äºŒã€ç™»å½•æ³¨å†Œ"></a>äºŒã€ç™»å½•æ³¨å†Œ</h1><blockquote>
<p>ç›®æ ‡</p>
<ul>
<li>èƒ½å®ç°ç™»å½•é¡µé¢çš„å¸ƒå±€</li>
<li>èƒ½å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½</li>
<li>èƒ½æŒæ¡ Vant ä¸­ Toast æç¤ºç»„ä»¶çš„ä½¿ç”¨</li>
<li>èƒ½ç†è§£ API è¯·æ±‚æ¨¡å—çš„å°è£…</li>
<li>èƒ½ç†è§£å‘é€éªŒè¯ç çš„å®ç°æ€è·¯</li>
<li>èƒ½ç†è§£ Vant Form å®ç°è¡¨å•éªŒè¯çš„ä½¿ç”¨</li>
</ul>
</blockquote>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200228161041266.png" alt="image-20200228161041266" style="zoom:50%;">

<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><h3 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h3><p>1ã€åˆ›å»º <code>src/views/login/index.vue</code> å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-container"</span>&gt;</span>ç™»å½•é¡µé¢<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'LoginPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨ <code>src/router/index.js</code> ä¸­é…ç½®ç™»å½•é¡µçš„è·¯ç”±è¡¨</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'login'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/login'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<p>æœ€åï¼Œè®¿é—® <code>/login</code> æŸ¥çœ‹æ˜¯å¦èƒ½è®¿é—®åˆ°ç™»å½•é¡µé¢ã€‚</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200229115109026.png" alt="image-20200229115109026" style="zoom:50%;">


<h3 id="å¸ƒå±€ç»“æ„"><a href="#å¸ƒå±€ç»“æ„" class="headerlink" title="å¸ƒå±€ç»“æ„"></a>å¸ƒå±€ç»“æ„</h3><p>è¿™é‡Œä¸»è¦ä½¿ç”¨åˆ°ä¸‰ä¸ª Vant ç»„ä»¶ï¼š</p>
<ul>
<li><a href="https://youzan.github.io/vant/#/zh-CN/nav-bar">NavBar å¯¼èˆªæ </a></li>
<li><a href="https://youzan.github.io/vant/#/zh-CN/form">Form è¡¨å•</a><ul>
<li><a href="https://youzan.github.io/vant/#/zh-CN/field">Field è¾“å…¥æ¡†</a></li>
<li><a href="https://youzan.github.io/vant/#/zh-CN/button">Button æŒ‰é’®</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>ä¸€ä¸ªç»éªŒï¼šä½¿ç”¨ç»„ä»¶åº“ä¸­çš„ç°æœ‰ç»„ä»¶å¿«é€Ÿå¸ƒå±€ï¼Œå†æ…¢æ…¢è°ƒæ•´ç»†èŠ‚ï¼Œæ•ˆç‡æ›´é«˜ï¼ˆåˆšå¼€å§‹å¯èƒ½ä¼šæ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦ï¼Œè¶Šç”¨è¶Šç†Ÿï¼Œæ…¢æ…¢çš„å°±æœ‰äº†è‡ªå·±çš„æ€æƒ³ï¼‰ã€‚</p>
</blockquote>
<h3 id="å¸ƒå±€æ ·å¼"><a href="#å¸ƒå±€æ ·å¼" class="headerlink" title="å¸ƒå±€æ ·å¼"></a>å¸ƒå±€æ ·å¼</h3><blockquote>
<p>å†™æ ·å¼çš„åŸåˆ™ï¼šå°†å…¬å…±æ ·å¼å†™åˆ°å…¨å±€ï¼ˆ<code>src/styles/index.less</code>ï¼‰ï¼Œå°†å±€éƒ¨æ ·å¼å†™åˆ°ç»„ä»¶å†…éƒ¨ã€‚</p>
</blockquote>
<p>1ã€<code>src/styles/index.less</code></p>
<figure class="highlight less"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> {</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f7f9</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.page-nav-bar</span> {</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3296fa</span>;</span><br><span class="line">  <span class="selector-class">.van-nav-bar__title</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€<code>src/views/login/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">class</span>=<span class="string">"page-nav-bar"</span> <span class="attr">title</span>=<span class="string">"ç™»å½•"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç™»å½•è¡¨å• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-form</span> @<span class="attr">submit</span>=<span class="string">"onSubmit"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"ç”¨æˆ·å"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-shouji"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-yanzhengma"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"send-sms-btn"</span> <span class="attr">round</span> <span class="attr">size</span>=<span class="string">"small"</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>å‘é€éªŒè¯ç <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-btn-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"login-btn"</span> <span class="attr">block</span> <span class="attr">type</span>=<span class="string">"info"</span> <span class="attr">native-type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">          ç™»å½•</span><br><span class="line">        <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /ç™»å½•è¡¨å• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'LoginIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    onSubmit (values) {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'submit'</span>, values)</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.login-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.toutiao</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">37px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.send-sms-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">152px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#ededed</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.login-btn-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">53px</span> <span class="number">33px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.login-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">background-color</span>: <span class="number">#6db4fb</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½"><a href="#å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½" class="headerlink" title="å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½"></a>å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>æ³¨å†Œç‚¹å‡»ç™»å½•çš„äº‹ä»¶</li>
<li>è·å–è¡¨å•æ•°æ®ï¼ˆæ ¹æ®æ¥å£è¦æ±‚ä½¿ç”¨ v-model ç»‘å®šï¼‰</li>
<li>è¡¨å•éªŒè¯</li>
<li>å‘è¯·æ±‚æäº¤</li>
<li>æ ¹æ®è¯·æ±‚ç»“æœåšä¸‹ä¸€æ­¥å¤„ç†</li>
</ul>
<p><strong>ä¸€ã€æ ¹æ®æ¥å£è¦æ±‚ç»‘å®šè·å–è¡¨å•æ•°æ®</strong></p>
<p>1ã€åœ¨ç™»å½•é¡µé¢ç»„ä»¶çš„å®ä¾‹é€‰é¡¹ data ä¸­æ·»åŠ  <code>user</code> æ•°æ®å­—æ®µ</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">...</span><br><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    <span class="attr">user</span>: {</span><br><span class="line">      <span class="attr">mobile</span>: <span class="string">''</span>,</span><br><span class="line">      <span class="attr">code</span>: <span class="string">''</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è¡¨å•ä¸­ä½¿ç”¨ <code>v-model</code> ç»‘å®šå¯¹åº”æ•°æ®</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- van-cell-group ä»…ä»…æ˜¯æä¾›äº†ä¸€ä¸ªä¸Šä¸‹å¤–è¾¹æ¡†ï¼Œèƒ½çœ‹åˆ°åŒ…è£¹çš„åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-model</span>=<span class="string">"user.mobile"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">required</span></span></span><br><span class="line"><span class="tag">    <span class="attr">clearable</span></span></span><br><span class="line"><span class="tag">    <span class="attr">label</span>=<span class="string">"æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-model</span>=<span class="string">"user.code"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"number"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">label</span>=<span class="string">"éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">    <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">    <span class="attr">required</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªå°æŠ€å·§ï¼šä½¿ç”¨ VueDevtools è°ƒè¯•å·¥å…·æŸ¥çœ‹æ˜¯å¦ç»‘å®šæˆåŠŸã€‚</p>
</blockquote>
<p><strong>äºŒã€è¯·æ±‚ç™»å½•</strong></p>
<p>1ã€åˆ›å»º <code>src/api/user.js</code> å°è£…è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç›¸å…³çš„è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">"@/utils/request"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç™»å½•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> login = <span class="function"><span class="params">data</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/authorizations'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™ç™»å½•æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onLogin () {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> login(<span class="built_in">this</span>.user)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•æˆåŠŸ'</span>, res)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="keyword">if</span> (err.response.status === <span class="number">400</span>) {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'ç™»å½•å¤±è´¥'</span>, err)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h2 id="ç™»å½•çŠ¶æ€æç¤º"><a href="#ç™»å½•çŠ¶æ€æç¤º" class="headerlink" title="ç™»å½•çŠ¶æ€æç¤º"></a>ç™»å½•çŠ¶æ€æç¤º</h2><p>Vant ä¸­å†…ç½®äº†<a href="https://youzan.github.io/vant/#/zh-CN/toast">Toast è½»æç¤º</a>ç»„ä»¶ï¼Œå¯ä»¥å®ç°ç§»åŠ¨ç«¯å¸¸è§çš„æç¤ºæ•ˆæœã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç®€å•æ–‡å­—æç¤º</span></span><br><span class="line">Toast(<span class="string">"æç¤ºå†…å®¹"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// loading è½¬åœˆåœˆæç¤º</span></span><br><span class="line">Toast.loading({</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span><br><span class="line">  <span class="attr">message</span>: <span class="string">"åŠ è½½ä¸­..."</span>,</span><br><span class="line">  <span class="attr">forbidClick</span>: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆåŠŸæç¤º</span></span><br><span class="line">Ttoast.success(<span class="string">"æˆåŠŸæ–‡æ¡ˆ"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤±è´¥æç¤º</span></span><br><span class="line">Toast.fail(<span class="string">"å¤±è´¥æ–‡æ¡ˆ"</span>);</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æç¤ºï¼šåœ¨ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥é€šè¿‡ <code>this.$toast</code> è°ƒç”¨ã€‚</p>
</blockquote>
<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šToast é»˜è®¤é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œå³åŒä¸€æ—¶é—´åªä¼šå­˜åœ¨ä¸€ä¸ª Toastï¼Œå¦‚æœéœ€è¦åœ¨åŒä¸€æ—¶é—´å¼¹å‡ºå¤šä¸ª Toastï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„ç¤ºä¾‹</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">Toast.allowMultiple();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> toast1 = Toast(<span class="string">'ç¬¬ä¸€ä¸ª Toast'</span>);</span><br><span class="line"><span class="keyword">const</span> toast2 = Toast.success(<span class="string">'ç¬¬äºŒä¸ª Toast'</span>);</span><br><span class="line"></span><br><span class="line">toast1.clear();</span><br><span class="line">toast2.clear();</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢æ˜¯ä¸ºæˆ‘ä»¬çš„ç™»å½•åŠŸèƒ½å¢åŠ  toast äº¤äº’æç¤ºã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onLogin () {</span><br><span class="line">  <span class="comment">// å¼€å§‹è½¬åœˆåœˆ</span></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­æ—¶é—´ï¼Œ0è¡¨ç¤ºæŒç»­å±•ç¤ºä¸åœæ­¢</span></span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'ç™»å½•ä¸­...'</span> <span class="comment">// æç¤ºæ¶ˆæ¯</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> request({</span><br><span class="line">      <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">'/app/v1_0/authorizations'</span>,</span><br><span class="line">      <span class="attr">data</span>: <span class="built_in">this</span>.user</span><br><span class="line">    })</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•æˆåŠŸ'</span>, res)</span><br><span class="line">    <span class="comment">// æç¤º success æˆ–è€… fail çš„æ—¶å€™ï¼Œä¼šå…ˆæŠŠå…¶å®ƒçš„ toast å…ˆæ¸…é™¤</span></span><br><span class="line">    <span class="built_in">this</span>.$toast.success(<span class="string">'ç™»å½•æˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•å¤±è´¥'</span>, err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'ç™»å½•å¤±è´¥ï¼Œæ‰‹æœºå·æˆ–éªŒè¯ç é”™è¯¯'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å‡å¦‚è¯·æ±‚éå¸¸å¿«çš„è¯å°±çœ‹ä¸åˆ° loading æ•ˆæœäº†ï¼Œè¿™é‡Œå¯ä»¥æ‰‹åŠ¨å°†è°ƒè¯•å·¥å…·ä¸­çš„ç½‘ç»œè®¾ç½®ä¸ºæ…¢é€Ÿç½‘ç»œã€‚</p>
<p>æµ‹è¯•ç»“æŸï¼Œå†æŠŠç½‘ç»œè®¾ç½®æ¢å¤ä¸º <code>Online</code> æ­£å¸¸ç½‘ç»œã€‚</p>
<h2 id="è¡¨å•éªŒè¯"><a href="#è¡¨å•éªŒè¯" class="headerlink" title="è¡¨å•éªŒè¯"></a>è¡¨å•éªŒè¯</h2><blockquote>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a href="https://youzan.github.io/vant/#/zh-CN/form#xiao-yan-gui-ze">Form è¡¨å•éªŒè¯</a></p>
</blockquote>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">class</span>=<span class="string">"page-nav-bar"</span> <span class="attr">title</span>=<span class="string">"ç™»å½•"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç™»å½•è¡¨å• --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      è¡¨å•éªŒè¯ï¼š</span></span><br><span class="line"><span class="comment">        1ã€ç»™ van-field ç»„ä»¶é…ç½® rules éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="comment">          å‚è€ƒæ–‡æ¡£ï¼šhttps://youzan.github.io/vant/#/zh-CN/form#rule-shu-ju-jie-gou</span></span><br><span class="line"><span class="comment">        2ã€å½“è¡¨å•æäº¤çš„æ—¶å€™ä¼šè‡ªåŠ¨è§¦å‘è¡¨å•éªŒè¯</span></span><br><span class="line"><span class="comment">           å¦‚æœéªŒè¯é€šè¿‡ï¼Œä¼šè§¦å‘ submit äº‹ä»¶</span></span><br><span class="line"><span class="comment">           å¦‚æœéªŒè¯å¤±è´¥ï¼Œä¸ä¼šè§¦å‘ submit</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-form</span> @<span class="attr">submit</span>=<span class="string">"onSubmit"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"user.mobile"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:rules</span>=<span class="string">"userFormRules.mobile"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"number"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxlength</span>=<span class="string">"11"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-shouji"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"user.code"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:rules</span>=<span class="string">"userFormRules.code"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"number"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxlength</span>=<span class="string">"6"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-yanzhengma"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"send-sms-btn"</span> <span class="attr">round</span> <span class="attr">size</span>=<span class="string">"small"</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>å‘é€éªŒè¯ç <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-btn-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"login-btn"</span> <span class="attr">block</span> <span class="attr">type</span>=<span class="string">"info"</span> <span class="attr">native-type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">          ç™»å½•</span><br><span class="line">        <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /ç™»å½•è¡¨å• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> { login } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'LoginIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">user</span>: {</span></span><br><span class="line"><span class="javascript">        <span class="attr">mobile</span>: <span class="string">''</span>, <span class="comment">// æ‰‹æœºå·</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">code</span>: <span class="string">''</span> <span class="comment">// éªŒè¯ç </span></span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript">      <span class="attr">userFormRules</span>: {</span></span><br><span class="line"><span class="javascript">        <span class="attr">mobile</span>: [{</span></span><br><span class="line"><span class="javascript">          <span class="attr">required</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">message</span>: <span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span></span></span><br><span class="line"><span class="javascript">        }, {</span></span><br><span class="line"><span class="javascript">          <span class="attr">pattern</span>: <span class="regexp">/^1[3|5|7|8]\d{9}$/</span>,</span></span><br><span class="line"><span class="javascript">          message: <span class="string">'æ‰‹æœºå·æ ¼å¼é”™è¯¯'</span></span></span><br><span class="line"><span class="javascript">        }],</span></span><br><span class="line"><span class="javascript">        <span class="attr">code</span>: [{</span></span><br><span class="line"><span class="javascript">          <span class="attr">required</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">message</span>: <span class="string">'éªŒè¯ç ä¸èƒ½ä¸ºç©º'</span></span></span><br><span class="line"><span class="javascript">        }, {</span></span><br><span class="line"><span class="javascript">          <span class="attr">pattern</span>: <span class="regexp">/^\d{6}$/</span>,</span></span><br><span class="line"><span class="javascript">          message: <span class="string">'éªŒè¯ç æ ¼å¼é”™è¯¯'</span></span></span><br><span class="line"><span class="javascript">        }]</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> onSubmit () {</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 1. è·å–è¡¨å•æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> user = <span class="built_in">this</span>.user</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// <span class="doctag">TODO:</span> 2. è¡¨å•éªŒè¯</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 3. æäº¤è¡¨å•è¯·æ±‚ç™»å½•</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$toast.loading({</span></span><br><span class="line"><span class="javascript">        <span class="attr">message</span>: <span class="string">'ç™»å½•ä¸­...'</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// ç¦ç”¨èƒŒæ™¯ç‚¹å‡»</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">duration</span>: <span class="number">0</span> <span class="comment">// æŒç»­æ—¶é—´ï¼Œé»˜è®¤ 2000ï¼Œ0 è¡¨ç¤ºæŒç»­å±•ç¤ºä¸å…³é—­</span></span></span><br><span class="line"><span class="javascript">      })</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">try</span> {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> res = <span class="keyword">await</span> login(user)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'ç™»å½•æˆåŠŸ'</span>, res)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$toast.success(<span class="string">'ç™»å½•æˆåŠŸ'</span>)</span></span><br><span class="line"><span class="javascript">      } <span class="keyword">catch</span> (err) {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (err.response.status === <span class="number">400</span>) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.$toast.fail(<span class="string">'æ‰‹æœºå·æˆ–éªŒè¯ç é”™è¯¯'</span>)</span></span><br><span class="line"><span class="javascript">        } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.$toast.fail(<span class="string">'ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 4. æ ¹æ®è¯·æ±‚å“åº”ç»“æœå¤„ç†åç»­æ“ä½œ</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.login-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.toutiao</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">37px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.send-sms-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">152px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#ededed</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.login-btn-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">53px</span> <span class="number">33px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.login-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">background-color</span>: <span class="number">#6db4fb</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="éªŒè¯ç å¤„ç†"><a href="#éªŒè¯ç å¤„ç†" class="headerlink" title="éªŒè¯ç å¤„ç†"></a>éªŒè¯ç å¤„ç†</h2><h3 id="éªŒè¯æ‰‹æœºå·"><a href="#éªŒè¯æ‰‹æœºå·" class="headerlink" title="éªŒè¯æ‰‹æœºå·"></a>éªŒè¯æ‰‹æœºå·</h3><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onSendSms () {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'onSendSms'</span>)</span><br><span class="line">  <span class="comment">// 1. æ ¡éªŒæ‰‹æœºå·</span></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.loginForm.validate(<span class="string">'mobile'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">'éªŒè¯å¤±è´¥'</span>, err)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. éªŒè¯é€šè¿‡ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶</span></span><br><span class="line">  <span class="comment">// 3. è¯·æ±‚å‘é€éªŒè¯ç </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶"><a href="#ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶" class="headerlink" title="ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶"></a>ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶</h3><p>1ã€åœ¨ data ä¸­æ·»åŠ æ•°æ®ç”¨æ¥æ§åˆ¶å€’è®¡æ—¶çš„æ˜¾ç¤ºå’Œéšè—</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isCountDownShow</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"user.code"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"icon icon-mima"</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-count-down</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-if</span>=<span class="string">"isCountDownShow"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">slot</span>=<span class="string">"button"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:time</span>=<span class="string">"1000 * 5"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">format</span>=<span class="string">"ss s"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">finish</span>=<span class="string">"isCountDownShow = false"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-else</span></span></span><br><span class="line"><span class="tag">    <span class="attr">slot</span>=<span class="string">"button"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"primary"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">round</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">"onSendSmsCode"</span></span></span><br><span class="line"><span class="tag">  &gt;</span>å‘é€éªŒè¯ç <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‘é€éªŒè¯ç "><a href="#å‘é€éªŒè¯ç " class="headerlink" title="å‘é€éªŒè¯ç "></a>å‘é€éªŒè¯ç </h3><p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getSmsCode = <span class="function"><span class="params">mobile</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/sms/codes/<span class="subst">${mobile}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™å‘é€éªŒè¯ç æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>3ã€å‘é€å¤„ç†</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onSendSms () {</span><br><span class="line">  <span class="comment">// 1. æ ¡éªŒæ‰‹æœºå·</span></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.loginForm.validate(<span class="string">'mobile'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">'éªŒè¯å¤±è´¥'</span>, err)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. éªŒè¯é€šè¿‡ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶</span></span><br><span class="line">  <span class="built_in">this</span>.isCountDownShow = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. è¯·æ±‚å‘é€éªŒè¯ç </span></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> sendSms(<span class="built_in">this</span>.user.mobile)</span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'å‘é€æˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="comment">// å‘é€å¤±è´¥ï¼Œå…³é—­å€’è®¡æ—¶</span></span><br><span class="line">    <span class="built_in">this</span>.isCountDownShow = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> (err.response.status === <span class="number">429</span>) {</span><br><span class="line">      <span class="built_in">this</span>.$toast(<span class="string">'å‘é€å¤ªé¢‘ç¹äº†ï¼Œè¯·ç¨åé‡è¯•'</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="built_in">this</span>.$toast(<span class="string">'å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å¤„ç†ç”¨æˆ·-Token"><a href="#å¤„ç†ç”¨æˆ·-Token" class="headerlink" title="å¤„ç†ç”¨æˆ· Token"></a>å¤„ç†ç”¨æˆ· Token</h2><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200329121650635.png" alt="image-20200329121650635">

<p>Token æ˜¯ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åæœåŠ¡ç«¯è¿”å›çš„ä¸€ä¸ªèº«ä»½ä»¤ç‰Œï¼Œåœ¨é¡¹ç›®ä¸­çš„å¤šä¸ªä¸šåŠ¡ä¸­éœ€è¦ä½¿ç”¨åˆ°ï¼š</p>
<ul>
<li>è®¿é—®éœ€è¦æˆæƒçš„ API æ¥å£</li>
<li>æ ¡éªŒé¡µé¢çš„è®¿é—®æƒé™</li>
<li>â€¦</li>
</ul>
<p>ä½†æ˜¯æˆ‘ä»¬åªæœ‰åœ¨ç¬¬ä¸€æ¬¡ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åæ‰èƒ½æ‹¿åˆ° Tokenã€‚</p>
<p>æ‰€ä»¥ä¸ºäº†èƒ½åœ¨å…¶å®ƒæ¨¡å—ä¸­è·å–åˆ° Token æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒå­˜å‚¨åˆ°ä¸€ä¸ªå…¬å…±çš„ä½ç½®ï¼Œæ–¹ä¾¿éšæ—¶å–ç”¨ã€‚</p>
<p>å¾€å“ªå„¿å­˜ï¼Ÿ</p>
<ul>
<li>æœ¬åœ°å­˜å‚¨<ul>
<li>è·å–éº»çƒ¦</li>
<li>æ•°æ®ä¸æ˜¯å“åº”å¼</li>
</ul>
</li>
<li>Vuex å®¹å™¨ï¼ˆæ¨èï¼‰<ul>
<li>è·å–æ–¹ä¾¿</li>
<li>å“åº”å¼çš„</li>
</ul>
</li>
</ul>
<p>ä½¿ç”¨å®¹å™¨å­˜å‚¨ Token çš„æ€è·¯ï¼š</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200109192157006.png" alt="image-20200109192157006"></p>
<ul>
<li>ç™»å½•æˆåŠŸï¼Œå°† Token å­˜å‚¨åˆ° Vuex å®¹å™¨ä¸­<ul>
<li>è·å–æ–¹ä¾¿</li>
<li>å“åº”å¼</li>
</ul>
</li>
<li>ä¸ºäº†æŒä¹…åŒ–ï¼Œè¿˜éœ€è¦æŠŠ Token æ”¾åˆ°æœ¬åœ°å­˜å‚¨<ul>
<li>æŒä¹…åŒ–</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢æ˜¯å…·ä½“å®ç°ã€‚</p>
<p>1ã€åœ¨ <code>src/store/index.js</code> ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">state</span>: {</span><br><span class="line">    <span class="comment">// ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">user</span>: <span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localStorage.getItem(<span class="string">'TOUTIAO_USER'</span>))</span><br><span class="line">    <span class="comment">// user: null</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">mutations</span>: {</span><br><span class="line">    setUser (state, user) {</span><br><span class="line">      state.user = user</span><br><span class="line">      <span class="built_in">window</span>.localStorage.setItem(<span class="string">'TOUTIAO_USER'</span>, <span class="built_in">JSON</span>.stringify(user))</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">actions</span>: {</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç™»å½•æˆåŠŸä»¥åå°†åç«¯è¿”å›çš„ token ç›¸å…³æ•°æ®å­˜å‚¨åˆ°å®¹å™¨ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onLogin () {</span><br><span class="line">  <span class="comment">// const loginToast = this.$toast.loading({</span></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­æ—¶é—´ï¼Œ0è¡¨ç¤ºæŒç»­å±•ç¤ºä¸åœæ­¢</span></span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'ç™»å½•ä¸­...'</span> <span class="comment">// æç¤ºæ¶ˆæ¯</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> login(<span class="built_in">this</span>.user)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// res.data.data =&gt; { token: 'xxx', refresh_token: 'xxx' }</span></span><br><span class="line">+    <span class="built_in">this</span>.$store.commit(<span class="string">'setUser'</span>, res.data.data)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æç¤º success æˆ–è€… fail çš„æ—¶å€™ï¼Œä¼šå…ˆæŠŠå…¶å®ƒçš„ toast å…ˆæ¸…é™¤</span></span><br><span class="line">    <span class="built_in">this</span>.$toast.success(<span class="string">'ç™»å½•æˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•å¤±è´¥'</span>, err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'ç™»å½•å¤±è´¥ï¼Œæ‰‹æœºå·æˆ–éªŒè¯ç é”™è¯¯'</span>)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœæ­¢ loadingï¼Œå®ƒä¼šæŠŠå½“å‰é¡µé¢ä¸­æ‰€æœ‰çš„ toast éƒ½ç»™æ¸…é™¤</span></span><br><span class="line">  <span class="comment">// loginToast.clear()</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—"><a href="#ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—" class="headerlink" title="ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—"></a>ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—</h2><p>åˆ›å»º <code>src/utils/storage.js</code> æ¨¡å—ã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getItem = <span class="function"><span class="params">name</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">const</span> data = <span class="built_in">window</span>.localStorage.getItem(name)</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setItem = <span class="function">(<span class="params">name, value</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">'object'</span>) {</span><br><span class="line">    value = <span class="built_in">JSON</span>.stringify(value)</span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">window</span>.localStorage.setItem(name, value)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> removeItem = <span class="function"><span class="params">name</span> =&gt;</span> {</span><br><span class="line">  <span class="built_in">window</span>.localStorage.removeItem(name)</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å…³äº-Token-è¿‡æœŸé—®é¢˜"><a href="#å…³äº-Token-è¿‡æœŸé—®é¢˜" class="headerlink" title="å…³äº Token è¿‡æœŸé—®é¢˜"></a>å…³äº Token è¿‡æœŸé—®é¢˜</h2><p>ç™»å½•æˆåŠŸä¹‹ååç«¯ä¼šè¿”å›ä¸¤ä¸ª Tokenï¼š</p>
<ul>
<li><code>token</code>ï¼šè®¿é—®ä»¤ç‰Œï¼Œæœ‰æ•ˆæœŸ2å°æ—¶</li>
<li><code>refresh_token</code>ï¼šåˆ·æ–°ä»¤ç‰Œï¼Œæœ‰æ•ˆæœŸ14å¤©ï¼Œç”¨äºè®¿é—®ä»¤ç‰Œè¿‡æœŸä¹‹åé‡æ–°è·å–æ–°çš„è®¿é—®ä»¤ç‰Œ</li>
</ul>
<p>æˆ‘ä»¬çš„é¡¹ç›®æ¥å£ä¸­è®¾å®šçš„ <code>Token</code> æœ‰æ•ˆæœŸæ˜¯ <code>2 å°æ—¶</code>ï¼Œè¶…è¿‡æœ‰æ•ˆæœŸæœåŠ¡ç«¯ä¼šè¿”å› <code>401</code> è¡¨ç¤º Token æ— æ•ˆæˆ–è¿‡æœŸäº†ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿‡æœŸæ—¶é—´è¿™ä¹ˆçŸ­ï¼Ÿ</p>
<ul>
<li>ä¸ºäº†å®‰å…¨ï¼Œä¾‹å¦‚ Token è¢«åˆ«äººç›—ç”¨</li>
</ul>
<p>è¿‡æœŸäº†æ€ä¹ˆåŠï¼Ÿ</p>
<ul>
<li><del>è®©ç”¨æˆ·é‡æ–°ç™»å½•</del>ï¼Œç”¨æˆ·ä½“éªŒå¤ªå·®äº†</li>
<li>ä½¿ç”¨ <code>refresh_token</code> è§£å†³ <code>token</code> è¿‡æœŸ</li>
</ul>
<p>å¦‚ä½•ä½¿ç”¨ <code>refresh_token</code> è§£å†³ <code>token</code> è¿‡æœŸï¼Ÿ</p>
<blockquote>
<p>åˆ°è¯¾ç¨‹çš„åé¢æˆ‘ä»¬å¼€å‘çš„ä¸šåŠ¡åŠŸèƒ½ä¸°å¯Œèµ·æ¥ä¹‹åï¼Œå†ç»™å¤§å®¶è®²è§£ Token è¿‡æœŸå¤„ç†ã€‚</p>
<p>å¤§å®¶éœ€è¦æ³¨æ„çš„æ˜¯<strong>åœ¨å­¦ä¹ æµ‹è¯•çš„æ—¶å€™å¦‚æœæ”¶åˆ° 401 å“åº”ç ï¼Œè¯·é‡æ–°ç™»å½•å†æµ‹è¯•</strong>ã€‚</p>
</blockquote>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/v2-8f29f24dd291ddf46abda5d5ab7bec6c_720w.jpg" alt="img"></p>
<p>æ¦‚è¿°ï¼šæœåŠ¡å™¨ç”Ÿæˆtokençš„è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªæ—¶é—´ï¼Œä¸€ä¸ªæ˜¯tokenå¤±æ•ˆæ—¶é—´ï¼Œä¸€ä¸ªæ˜¯tokenåˆ·æ–°æ—¶é—´ï¼Œåˆ·æ–°æ—¶é—´è‚¯å®šæ¯”å¤±æ•ˆæ—¶é—´é•¿ï¼Œå½“ç”¨æˆ·çš„ <code>token</code> è¿‡æœŸæ—¶ï¼Œä½ å¯ä»¥æ‹¿ç€è¿‡æœŸçš„tokenå»æ¢å–æ–°çš„tokenï¼Œæ¥ä¿æŒç”¨æˆ·çš„ç™»é™†çŠ¶æ€ï¼Œå½“ç„¶ä½ è¿™ä¸ªè¿‡æœŸtokençš„è¿‡æœŸæ—¶é—´å¿…é¡»åœ¨åˆ·æ–°æ—¶é—´ä¹‹å†…ï¼Œå¦‚æœè¶…å‡ºäº†åˆ·æ–°æ—¶é—´ï¼Œé‚£ä¹ˆè¿”å›çš„ä¾æ—§æ˜¯ 401ã€‚</p>
<p>å¤„ç†æµç¨‹ï¼š</p>
<ol>
<li>åœ¨axiosçš„æ‹¦æˆªå™¨ä¸­åŠ å…¥tokenåˆ·æ–°é€»è¾‘</li>
<li>å½“ç”¨æˆ·tokenè¿‡æœŸæ—¶ï¼Œå»å‘æœåŠ¡å™¨è¯·æ±‚æ–°çš„ token</li>
<li>æŠŠæ—§çš„tokenæ›¿æ¢ä¸ºæ–°çš„token</li>
<li>ç„¶åç»§ç»­ç”¨æˆ·å½“å‰çš„è¯·æ±‚</li>
</ol>
<p>åœ¨è¯·æ±‚çš„å“åº”æ‹¦æˆªå™¨ä¸­ç»Ÿä¸€å¤„ç† token è¿‡æœŸï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£… axios è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"><span class="keyword">import</span> jsonBig <span class="keyword">from</span> <span class="string">"json-bigint"</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">"@/store"</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">"@/router"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios.create æ–¹æ³•ï¼šå¤åˆ¶ä¸€ä¸ª axios</span></span><br><span class="line"><span class="keyword">const</span> request = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">"http://ttapi.research.itcast.cn/"</span> <span class="comment">// åŸºç¡€è·¯å¾„</span></span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é…ç½®å¤„ç†åç«¯è¿”å›æ•°æ®ä¸­è¶…å‡º js å®‰å…¨æ•´æ•°èŒƒå›´é—®é¢˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">request.defaults.transformResponse = [</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">      <span class="keyword">return</span> jsonBig.parse(data);</span><br><span class="line">    } <span class="keyword">catch</span> (err) {</span><br><span class="line">      <span class="keyword">return</span> {};</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">request.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">config</span>) </span>{</span><br><span class="line">    <span class="keyword">const</span> user = store.state.user;</span><br><span class="line">    <span class="keyword">if</span> (user) {</span><br><span class="line">      config.headers.Authorization = <span class="string">`Bearer <span class="subst">${user.token}</span>`</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Do something before request is sent</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>{</span><br><span class="line">    <span class="comment">// Do something with request error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  }</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">request.interceptors.response.use(</span><br><span class="line">  <span class="comment">// å“åº”æˆåŠŸè¿›å…¥ç¬¬1ä¸ªå‡½æ•°</span></span><br><span class="line">  <span class="comment">// è¯¥å‡½æ•°çš„å‚æ•°æ˜¯å“åº”å¯¹è±¡</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>{</span><br><span class="line">    <span class="comment">// Any status code that lie within the range of 2xx cause this function to trigger</span></span><br><span class="line">    <span class="comment">// Do something with response data</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// å“åº”å¤±è´¥è¿›å…¥ç¬¬2ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„å‚æ•°æ˜¯é”™è¯¯å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>{</span><br><span class="line">    <span class="comment">// Any status codes that falls outside the range of 2xx cause this function to trigger</span></span><br><span class="line">    <span class="comment">// Do something with response error</span></span><br><span class="line">    <span class="comment">// å¦‚æœå“åº”ç æ˜¯ 401 ï¼Œåˆ™è¯·æ±‚è·å–æ–°çš„ token</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å“åº”æ‹¦æˆªå™¨ä¸­çš„ error å°±æ˜¯é‚£ä¸ªå“åº”çš„é”™è¯¯å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">console</span>.dir(error);</span><br><span class="line">    <span class="keyword">if</span> (error.response &amp;&amp; error.response.status === <span class="number">401</span>) {</span><br><span class="line">      <span class="comment">// æ ¡éªŒæ˜¯å¦æœ‰ refresh_token</span></span><br><span class="line">      <span class="keyword">const</span> user = store.state.user;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!user || !user.refresh_token) {</span><br><span class="line">        router.push(<span class="string">"/login"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»£ç ä¸è¦å¾€åæ‰§è¡Œäº†</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæœ‰refresh_tokenï¼Œåˆ™è¯·æ±‚è·å–æ–°çš„ token</span></span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> axios({</span><br><span class="line">          <span class="attr">method</span>: <span class="string">"PUT"</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">"http://ttapi.research.itcast.cn/app/v1_0/authorizations"</span>,</span><br><span class="line">          <span class="attr">headers</span>: {</span><br><span class="line">            <span class="attr">Authorization</span>: <span class="string">`Bearer <span class="subst">${user.refresh_token}</span>`</span></span><br><span class="line">          }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœè·å–æˆåŠŸï¼Œåˆ™æŠŠæ–°çš„ token æ›´æ–°åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"åˆ·æ–° token  æˆåŠŸ"</span>, res);</span><br><span class="line">        store.commit(<span class="string">"setUser"</span>, {</span><br><span class="line">          <span class="attr">token</span>: res.data.data.token, <span class="comment">// æœ€æ–°è·å–çš„å¯ç”¨ token</span></span><br><span class="line">          <span class="attr">refresh_token</span>: user.refresh_token <span class="comment">// è¿˜æ˜¯åŸæ¥çš„ refresh_token</span></span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠŠä¹‹å‰å¤±è´¥çš„ç”¨æˆ·è¯·æ±‚ç»§ç»­å‘å‡ºå»</span></span><br><span class="line">        <span class="comment">// config æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æœ¬æ¬¡å¤±è´¥è¯·æ±‚ç›¸å…³çš„é‚£äº›é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚ urlã€method éƒ½æœ‰</span></span><br><span class="line">        <span class="comment">// return æŠŠ request çš„è¯·æ±‚ç»“æœç»§ç»­è¿”å›ç»™å‘è¯·æ±‚çš„å…·ä½“ä½ç½®</span></span><br><span class="line">        <span class="keyword">return</span> request(error.config);</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="comment">// å¦‚æœè·å–å¤±è´¥ï¼Œç›´æ¥è·³è½¬ ç™»å½•é¡µ</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"è¯·æ±‚åˆ·çº¿ token å¤±è´¥"</span>, err);</span><br><span class="line">        router.push(<span class="string">"/login"</span>);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  }</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request;</span><br></pre></td></tr></tbody></table></figure>
<h1 id="ä¸‰ã€ä¸ªäººä¸­å¿ƒ"><a href="#ä¸‰ã€ä¸ªäººä¸­å¿ƒ" class="headerlink" title="ä¸‰ã€ä¸ªäººä¸­å¿ƒ"></a>ä¸‰ã€ä¸ªäººä¸­å¿ƒ</h1><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566431827166.png" width="250">

<h2 id="TabBar-å¤„ç†"><a href="#TabBar-å¤„ç†" class="headerlink" title="TabBar å¤„ç†"></a>TabBar å¤„ç†</h2><p>é€šè¿‡åˆ†æé¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé¦–é¡µã€é—®ç­”ã€è§†é¢‘ã€æˆ‘çš„ éƒ½ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªåº•éƒ¨æ ‡ç­¾æ ï¼Œæˆ‘ä»¬æ²¡å¿…è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­éƒ½å†™ä¸€ä¸ªï¼Œæ‰€ä»¥ä¸ºäº†é€šç”¨æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Vue Router çš„åµŒå¥—è·¯ç”±æ¥å¤„ç†ã€‚</p>
<ul>
<li>çˆ¶è·¯ç”±ï¼šä¸€ä¸ªç©ºé¡µé¢ï¼ŒåŒ…å«ä¸€ä¸ª tabbarï¼Œä¸­é—´ç•™å­è·¯ç”±å‡ºå£</li>
<li>å­è·¯ç”±<ul>
<li>é¦–é¡µ</li>
<li>é—®ç­”</li>
<li>è§†é¢‘</li>
<li>æˆ‘çš„</li>
</ul>
</li>
</ul>
<p>ä¸€ã€åˆ›å»º tabbar ç»„ä»¶å¹¶é…ç½®è·¯ç”±</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200109153050432.png" alt="image-20200109153050432" width="250">

<p>è¿™é‡Œä¸»è¦ä½¿ç”¨åˆ°çš„ Vant ç»„ä»¶ï¼š</p>
<ul>
<li><a href="https://youzan.github.io/vant/#/zh-CN/tabbar">Tabbar æ ‡ç­¾æ </a></li>
</ul>
<p>1ã€åˆ›å»º <code>src/views/layout/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layout-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å­è·¯ç”±å‡ºå£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å­è·¯ç”±å‡ºå£ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ ‡ç­¾å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      route: å¼€å¯è·¯ç”±æ¨¡å¼</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar</span> <span class="attr">class</span>=<span class="string">"layout-tabbar"</span> <span class="attr">route</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-shouye"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">"/qa"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-wenda"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>é—®ç­”<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">"/video"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-shipin"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è§†é¢‘<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">"/my"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-wode"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>æˆ‘çš„<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-tabbar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /æ ‡ç­¾å¯¼èˆªæ  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'LayoutIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.layout-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.layout-tabbar</span> {</span></span><br><span class="line"><span class="css">    <span class="selector-tag">i</span><span class="selector-class">.toutiao</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-tag">span</span><span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶åå°† layout ç»„ä»¶é…ç½®åˆ°ä¸€çº§è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/layout'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>è®¿é—® <code>/</code> æµ‹è¯•ã€‚</p>
<p>äºŒã€åˆ†åˆ«åˆ›å»ºé¦–é¡µã€é—®ç­”ã€è§†é¢‘ã€æˆ‘çš„é¡µé¢ç»„ä»¶</p>
<p>é¦–é¡µç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home-container"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'HomePage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>é—®ç­”ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"qa-container"</span>&gt;</span>é—®ç­”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'QaPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>è§†é¢‘ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"video-container"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'VideoPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>æˆ‘çš„ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-container"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'MyPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>äºŒã€å°†å››ä¸ªä¸»é¡µé¢é…ç½®ä¸º tab-bar çš„å­è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'tab-bar'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/tab-bar'</span>),</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">path</span>: <span class="string">''</span>, <span class="comment">// é»˜è®¤å­è·¯ç”±</span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">'home'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/home'</span>)</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">path</span>: <span class="string">'qa'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'qa'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/qa'</span>)</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">path</span>: <span class="string">'video'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'video'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/video'</span>)</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">path</span>: <span class="string">'my'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'my'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/my'</span>)</span><br><span class="line">    }</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h2 id="é¡µé¢å¸ƒå±€"><a href="#é¡µé¢å¸ƒå±€" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><h3 id="æœªç™»å½•å¤´éƒ¨çŠ¶æ€"><a href="#æœªç™»å½•å¤´éƒ¨çŠ¶æ€" class="headerlink" title="æœªç™»å½•å¤´éƒ¨çŠ¶æ€"></a>æœªç™»å½•å¤´éƒ¨çŠ¶æ€</h3><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"mobile-img"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">src</span>=<span class="string">"~@/assets/mobile.png"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$router.push('/login')"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid-nav"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ¶ˆæ¯é€šçŸ¥"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å®åè®¤è¯"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”¨æˆ·åé¦ˆ"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å°æ™ºåŒå­¦"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç³»ç»Ÿè®¾ç½®"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'MyIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.my-container</span> {</span></span><br><span class="line"><span class="css">  &gt; <span class="selector-class">.header</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">361px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"~@/assets/banner.png"</span>) no-repeat;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-size</span>: cover;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.mobile-img</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">132px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">132px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å·²ç™»å½•å¤´éƒ¨"><a href="#å·²ç™»å½•å¤´éƒ¨" class="headerlink" title="å·²ç™»å½•å¤´éƒ¨"></a>å·²ç™»å½•å¤´éƒ¨</h3><h3 id="å®«æ ¼å¯¼èˆª"><a href="#å®«æ ¼å¯¼èˆª" class="headerlink" title="å®«æ ¼å¯¼èˆª"></a>å®«æ ¼å¯¼èˆª</h3><h3 id="å•å…ƒæ ¼å¯¼èˆª"><a href="#å•å…ƒæ ¼å¯¼èˆª" class="headerlink" title="å•å…ƒæ ¼å¯¼èˆª"></a>å•å…ƒæ ¼å¯¼èˆª</h3><h2 id="å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º"><a href="#å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º" class="headerlink" title="å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º"></a>å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º</h2><ul>
<li>æœªç™»å½•ï¼Œå±•ç¤ºç™»å½•æŒ‰é’®</li>
<li>å·²ç™»å½•ï¼Œå±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å·²ç™»å½•ï¼šç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"$store.state.user"</span> <span class="attr">class</span>=<span class="string">"user-info-wrap"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å·²ç™»å½•ï¼šç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœªç™»å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">"not-login"</span> @<span class="attr">click</span>=<span class="string">"$router.push('/login')"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æœªç™»å½• --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€€å‡º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-if</span>=<span class="string">"$store.state.user"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /é€€å‡º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ç”¨æˆ·é€€å‡º"><a href="#ç”¨æˆ·é€€å‡º" class="headerlink" title="ç”¨æˆ·é€€å‡º"></a>ç”¨æˆ·é€€å‡º</h2><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/ç”¨æˆ·é€€å‡º-1578559616164.gif" alt="ç”¨æˆ·é€€å‡º" width="250">

<p>1ã€ç»™é€€å‡ºæŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>2ã€é€€å‡ºå¤„ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">onLogout () {</span><br><span class="line">  <span class="comment">// é€€å‡ºæç¤º</span></span><br><span class="line">  <span class="comment">// åœ¨ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨ this.$dialog æ¥è°ƒç”¨å¼¹æ¡†ç»„ä»¶</span></span><br><span class="line">  <span class="built_in">this</span>.$dialog.confirm({</span><br><span class="line">    <span class="attr">title</span>: <span class="string">'ç¡®è®¤é€€å‡ºå—ï¼Ÿ'</span></span><br><span class="line">  }).then(<span class="function">() =&gt;</span> {</span><br><span class="line">    <span class="comment">// on confirm</span></span><br><span class="line">    <span class="comment">// ç¡®è®¤é€€å‡ºï¼šæ¸…é™¤ç™»å½•çŠ¶æ€ï¼ˆå®¹å™¨ä¸­çš„ user + æœ¬åœ°å­˜å‚¨ä¸­çš„ userï¼‰</span></span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">'setUser'</span>, <span class="literal">null</span>)</span><br><span class="line">  }).catch(<span class="function">() =&gt;</span> {</span><br><span class="line">    <span class="comment">// on cancel</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å–æ¶ˆæ‰§è¡Œè¿™é‡Œ'</span>)</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h2 id="å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯"><a href="#å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯"></a>å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯</h2><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200109133717775.png" alt="image-20200109133717775" width="250">

<p>æ­¥éª¤ï¼š</p>
<ul>
<li>å°è£…æ¥å£</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·è‡ªå·±çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUserInfo = <span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user'</span>,</span><br><span class="line">    <span class="comment">// å‘é€è¯·æ±‚å¤´æ•°æ®</span></span><br><span class="line">    <span class="attr">headers</span>: {</span><br><span class="line">      <span class="comment">// æ³¨æ„ï¼šè¯¥æ¥å£éœ€è¦æˆæƒæ‰èƒ½è®¿é—®</span></span><br><span class="line">      <span class="comment">//       tokençš„æ•°æ®æ ¼å¼ï¼šBearer tokenæ•°æ®ï¼Œæ³¨æ„ Bearer åé¢æœ‰ä¸ªç©ºæ ¼</span></span><br><span class="line">      <span class="attr">Authorization</span>: <span class="string">`Bearer <span class="subst">${store.state.user.token}</span>`</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ <code>views/my/index.vue</code> è¯·æ±‚åŠ è½½æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">+ <span class="keyword">import</span> { getUserInfo } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'MyPage'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {},</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">+      userInfo: {} <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">+++  created () {</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¦‚æœç”¨æˆ·ç™»å½•äº†ï¼Œæˆ‘æ‰è¯·æ±‚è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$store.state.user) {</span><br><span class="line">      <span class="built_in">this</span>.loadUser()</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">+++    <span class="keyword">async</span> loadUser () {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getUserInfo()</span><br><span class="line">        <span class="built_in">this</span>.user = data.data</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">        <span class="built_in">this</span>.$toast(<span class="string">'è·å–æ•°æ®å¤±è´¥'</span>)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<h2 id="ä¼˜åŒ–è®¾ç½®-Token"><a href="#ä¼˜åŒ–è®¾ç½®-Token" class="headerlink" title="ä¼˜åŒ–è®¾ç½® Token"></a>ä¼˜åŒ–è®¾ç½® Token</h2><p>é¡¹ç›®ä¸­çš„æ¥å£é™¤äº†ç™»å½•ä¹‹å¤–å¤§å¤šæ•°éƒ½éœ€è¦æä¾› token æ‰æœ‰è®¿é—®æƒé™ã€‚</p>
<p>é€šè¿‡æ¥å£æ–‡æ¡£å¯ä»¥çœ‹åˆ°ï¼Œåç«¯æ¥å£è¦æ±‚æˆ‘ä»¬å°† token æ”¾åˆ°è¯·æ±‚å¤´ <code>Header</code> ä¸­å¹¶ä»¥ä¸‹é¢çš„æ ¼å¼å‘é€ã€‚</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200301214857543.png" alt="image-20200301214857543"></p>
<blockquote>
<p>å­—æ®µåç§°ï¼š<code>Authorization</code></p>
<p>å­—æ®µå€¼ï¼š<code>Bearer token</code>ï¼Œæ³¨æ„ <code>Bearer</code> å’Œ <code>token</code> ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼</p>
</blockquote>
<p>æ–¹å¼ä¸€ï¼šåœ¨æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™æ‰‹åŠ¨æ·»åŠ ï¼ˆéº»çƒ¦ï¼‰ã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">axios({</span><br><span class="line">  <span class="attr">method</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">headers</span>: {</span><br><span class="line">    <span class="attr">Authorization</span>: <span class="string">"Bearer token"</span></span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>æ–¹å¼äºŒï¼šä½¿ç”¨è¯·æ±‚æ‹¦æˆªå™¨ç»Ÿä¸€æ·»åŠ ï¼ˆæ¨èï¼Œæ›´æ–¹ä¾¿ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">  participant A as å‘èµ·è¯·æ±‚</span><br><span class="line">  participant B as è¯·æ±‚æ‹¦æˆªå™¨</span><br><span class="line">  participant C as æœåŠ¡ç«¯</span><br><span class="line">  A--&gt;&gt;B: http://xxx</span><br><span class="line">  Note right of B: è®¾ç½® token</span><br><span class="line">  B-&gt;&gt;C: è¯·æ±‚å‘å‡º</span><br><span class="line">  </span><br><span class="line">  </span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ <code>src/utils/request.js</code> ä¸­æ·»åŠ æ‹¦æˆªå™¨ç»Ÿä¸€è®¾ç½® tokenï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">'http://ttapi.research.itcast.cn/'</span> <span class="comment">// æ¥å£çš„åŸºå‡†è·¯å¾„</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">// Add a request interceptor</span></span><br><span class="line">request.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>{</span><br><span class="line">  <span class="comment">// Do something before request is sent</span></span><br><span class="line">  <span class="comment">// config ï¼šæœ¬æ¬¡è¯·æ±‚çš„é…ç½®å¯¹è±¡</span></span><br><span class="line">  <span class="comment">// config é‡Œé¢æœ‰ä¸€ä¸ªå±æ€§ï¼šheaders</span></span><br><span class="line">  <span class="keyword">const</span> { user } = store.state</span><br><span class="line">  <span class="keyword">if</span> (user &amp;&amp; user.token) {</span><br><span class="line">    config.headers.Authorization = <span class="string">`Bearer <span class="subst">${user.token}</span>`</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">}, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>{</span><br><span class="line">  <span class="comment">// Do something with request error</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h1 id="å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨"><a href="#å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨" class="headerlink" title="å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨"></a>å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨</h1><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566539328996.png" width="250">

<h2 id="é¡µé¢å¸ƒå±€-1"><a href="#é¡µé¢å¸ƒå±€-1" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><h3 id="å¤´éƒ¨å¯¼èˆªæ "><a href="#å¤´éƒ¨å¯¼èˆªæ " class="headerlink" title="å¤´éƒ¨å¯¼èˆªæ "></a>å¤´éƒ¨å¯¼èˆªæ </h3><p>1ã€ä½¿ç”¨å¯¼èˆªæ ç»„ä»¶</p>
<p>2ã€åœ¨å¯¼èˆªæ ç»„ä»¶ä¸­æ’å…¥æŒ‰é’®</p>
<ul>
<li>æ–‡æœ¬</li>
<li>å›¾æ ‡</li>
</ul>
<p>3ã€æ ·å¼è°ƒæ•´</p>
<ul>
<li>å®½é«˜</li>
<li>èƒŒæ™¯è‰²</li>
<li>è¾¹æ¡†</li>
<li>æ–‡æœ¬å¤§å°</li>
<li>å›¾æ ‡å¤§å°</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">class</span>=<span class="string">"page-nav-bar"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"search-btn"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"title"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"info"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        <span class="attr">icon</span>=<span class="string">"search"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>æœç´¢<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'HomeIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.home-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-nav-bar__title</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">max-width</span>: unset;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.search-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">555px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">64px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#5babfb</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">28px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="é¢‘é“åˆ—è¡¨"><a href="#é¢‘é“åˆ—è¡¨" class="headerlink" title="é¢‘é“åˆ—è¡¨"></a>é¢‘é“åˆ—è¡¨</h2><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200305195458197.png" alt="image-20200305195458197" style="zoom: 80%;">

<h3 id="ä½¿ç”¨-Tab-æ ‡ç­¾é¡µç»„ä»¶"><a href="#ä½¿ç”¨-Tab-æ ‡ç­¾é¡µç»„ä»¶" class="headerlink" title="ä½¿ç”¨ Tab æ ‡ç­¾é¡µç»„ä»¶"></a>ä½¿ç”¨ Tab æ ‡ç­¾é¡µç»„ä»¶</h3><p>å‚è€ƒï¼š<a href="https://youzan.github.io/vant/#/zh-CN/tab">Tab æ ‡ç­¾é¡µç»„ä»¶</a></p>
<h3 id="æ ·å¼è°ƒæ•´"><a href="#æ ·å¼è°ƒæ•´" class="headerlink" title="æ ·å¼è°ƒæ•´"></a>æ ·å¼è°ƒæ•´</h3><p>ï¼ˆ1ï¼‰åŸºç¡€æ ·å¼è°ƒæ•´</p>
<ul>
<li>æ ‡ç­¾é¡¹<ul>
<li>å³è¾¹æ¡†</li>
<li>ä¸‹è¾¹æ¡†</li>
<li>å®½é«˜</li>
<li>æ–‡å­—å¤§å°</li>
<li>æ–‡å­—é¢œè‰²</li>
</ul>
</li>
<li>åº•éƒ¨æ¡<ul>
<li>å®½é«˜</li>
<li>é¢œè‰²</li>
<li>ä½ç½®</li>
</ul>
</li>
</ul>
<p>ï¼ˆ2ï¼‰å¤„ç†æ±‰å ¡æŒ‰é’®</p>
<p>1ã€ä½¿ç”¨æ’æ§½æ’å…¥å†…å®¹</p>
<p>2ã€æ ·å¼è°ƒæ•´</p>
<ul>
<li>å®šä½</li>
<li>å†…å®¹å±…ä¸­</li>
<li>å®½é«˜</li>
<li>èƒŒæ™¯è‰²ã€é€æ˜åº¦</li>
<li>å­—ä½“å›¾æ ‡å¤§å°</li>
</ul>
<p>3ã€ä½¿ç”¨ä¼ªå…ƒç´ è®¾ç½®æ¸å˜è¾¹æ¡†</p>
<ul>
<li>å®šä½</li>
<li>å®½é«˜</li>
<li>èƒŒæ™¯å›¾</li>
<li>èƒŒæ™¯å›¾å¡«å……æ¨¡å¼</li>
</ul>
<p>4ã€æ·»åŠ å ä½ç¬¦å……å½“å†…å®¹åŒºåŸŸ</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200402215736215.png" alt="image-20200402215736215" style="zoom:50%;">

<p>CSS æ ·å¼ï¼š</p>
<figure class="highlight less"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.placeholder</span> {</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">66px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">82px</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hamburger-btn</span> {</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">66px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">82px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.902</span>;</span><br><span class="line">  <span class="selector-tag">i</span><span class="selector-class">.toutiao</span> {</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">33px</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="selector-tag">&amp;</span>:<span class="selector-tag">before</span> {</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: url(<span class="string">~@/assets/gradient-gray-line.png</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: contain;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>




<h3 id="å±•ç¤ºé¢‘é“åˆ—è¡¨"><a href="#å±•ç¤ºé¢‘é“åˆ—è¡¨" class="headerlink" title="å±•ç¤ºé¢‘é“åˆ—è¡¨"></a>å±•ç¤ºé¢‘é“åˆ—è¡¨</h3><p>æ€è·¯ï¼š</p>
<ol>
<li>æ‰¾æ•°æ®æ¥å£</li>
<li>æŠŠæ¥å£å°è£…ä¸ºè¯·æ±‚æ–¹æ³•</li>
<li>åœ¨ç»„ä»¶ä¸­è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ol>
<p>1ã€å°è£…æ•°æ®è¯·æ±‚æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·è‡ªå·±çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUserChannels = <span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/channels'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€è¯·æ±‚è·å–æ•°æ®</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200401004107079.png" alt="image-20200401004107079" style="zoom:50%;">

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200401004138232.png" alt="image-20200401004138232" style="zoom:50%;">


<h2 id="æ–‡ç« åˆ—è¡¨"><a href="#æ–‡ç« åˆ—è¡¨" class="headerlink" title="æ–‡ç« åˆ—è¡¨"></a>æ–‡ç« åˆ—è¡¨</h2><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200311221143472.png" alt="image-20200311221143472" style="zoom: 50%;">

<h3 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h3><p>ä½ çš„æ€è·¯å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<p>1ã€æ‰¾åˆ°æ•°æ®æ¥å£</p>
<p>2ã€å°è£…è¯·æ±‚æ–¹æ³•</p>
<p>3ã€åœ¨ç»„ä»¶ä¸­è¯·æ±‚è·å–æ•°æ®ï¼Œå°†æ•°æ®å­˜å‚¨åˆ° data ä¸­</p>
<p>4ã€æ¨¡æ¿ç»‘å®šå±•ç¤º</p>
<p>æ ¹æ®ä¸åŒçš„é¢‘é“åŠ è½½ä¸åŒçš„æ–‡ç« åˆ—è¡¨ï¼Œä½ çš„æ€è·¯å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>æœ‰ä¸€ä¸ª <code>list</code> æ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨æ–‡ç« åˆ—è¡¨</li>
<li>æŸ¥çœ‹ <code>a</code> é¢‘é“ï¼šè¯·æ±‚è·å–æ•°æ®ï¼Œè®© <code>list = a</code> é¢‘é“æ–‡ç« </li>
<li>æŸ¥çœ‹ <code>b</code> é¢‘é“ï¼šè¯·æ±‚è·å–æ•°æ®ï¼Œè®© <code>list = b</code> é¢‘é“æ–‡ç« </li>
<li>æŸ¥çœ‹ <code>c</code> é¢‘é“ï¼šè¯·æ±‚è·å–æ•°æ®ï¼Œè®© <code>list = c</code> é¢‘é“æ–‡ç« </li>
<li>â€¦</li>
</ul>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200111124415227.png" alt="image-20200111124415227"></p>
<p>æ€è·¯æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚</p>
<p>æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ï¼š<strong>åŠ è½½è¿‡çš„æ•°æ®åˆ—è¡¨ä¸è¦é‡æ–°åŠ è½½</strong>ã€‚</p>
<p>å®ç°æ€è·¯ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬å‡†å¤‡<strong>å¤šä¸ª list æ•°ç»„ï¼Œæ¯ä¸ªé¢‘é“å¯¹åº”ä¸€ä¸ªï¼ŒæŸ¥çœ‹å“ªä¸ªé¢‘é“å°±æŠŠæ•°æ®å¾€å“ªä¸ªé¢‘é“çš„åˆ—è¡¨æ•°ç»„ä¸­å­˜æ”¾ï¼Œè¿™æ ·çš„è¯å°±ä¸ä¼šå¯¼è‡´è¦†ç›–é—®é¢˜</strong>ã€‚</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200111124530323.png" alt="image-20200111124530323"></p>
<p>å¯æ˜¯æœ‰å¤šå°‘é¢‘é“å°±å¾—æœ‰å¤šå°‘é¢‘é“æ–‡ç« æ•°ç»„ï¼Œæˆ‘ä»¬éƒ½ä¸€ä¸ªä¸€ä¸ªå£°æ˜çš„è¯ä¼šéå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥è¿™é‡Œçš„å»ºè®®æ˜¯åˆ©ç”¨ç»„ä»¶æ¥å¤„ç†ã€‚</p>
<p>å…·ä½“åšæ³•å°±æ˜¯ï¼š</p>
<ul>
<li>å°è£…ä¸€ä¸ªæ–‡ç« åˆ—è¡¨ç»„ä»¶</li>
<li>ç„¶ååœ¨é¢‘é“åˆ—è¡¨ä¸­æŠŠæ–‡ç« åˆ—è¡¨éå†å‡ºæ¥</li>
</ul>
<p><strong>å› ä¸ºæ–‡ç« åˆ—è¡¨ç»„ä»¶ä¸­è¯·æ±‚è·å–æ–‡ç« åˆ—è¡¨æ•°æ®éœ€è¦é¢‘é“ idï¼Œæ‰€ä»¥ é¢‘é“ id åº”è¯¥ä½œä¸º props å‚æ•°ä¼ é€’ç»™æ–‡ç« åˆ—è¡¨ç»„ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠé¢‘é“å¯¹è±¡ä¼ é€’ç»™æ–‡ç« åˆ—è¡¨ç»„ä»¶å°±å¯ä»¥äº†ã€‚</strong></p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200306155328108.png" alt="image-20200306155328108" style="zoom: 67%;">

<p>åœ¨æ–‡ç« åˆ—è¡¨ä¸­è¯·æ±‚è·å–å¯¹åº”çš„åˆ—è¡¨æ•°æ®ï¼Œå±•ç¤ºåˆ°åˆ—è¡¨ä¸­ã€‚</p>
<p>æœ€åæŠŠç»„ä»¶åœ¨é¢‘é“åˆ—è¡¨ä¸­éå†å‡ºæ¥ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200306154805522.png" alt="image-20200306154805522"></p>
<p>1ã€åˆ›å»º <code>src/views/home/components/article-list.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-list"</span>&gt;</span>æ–‡ç« åˆ—è¡¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleList'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">channel</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>2ã€åœ¨ <code>home/index.vue</code> ä¸­æ³¨å†Œä½¿ç”¨</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200305205441485.png" alt="image-20200305205441485" style="zoom:50%;">



<p>3ã€æœ€åæµ‹è¯•ã€‚</p>
<p>ç­”ç–‘ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆæ ‡ç­¾å†…å®¹æ˜¯æ‡’æ¸²æŸ“çš„ï¼Ÿ<ul>
<li>å› ä¸ºè¿™æ˜¯ Tab æ ‡ç­¾é¡µç»„ä»¶æœ¬èº«æ”¯æŒçš„é»˜è®¤åŠŸèƒ½ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥é€šè¿‡é…ç½® <code>:lazy-render="false"</code> æ¥å…³é—­è¿™ä¸ªæ•ˆæœã€‚</li>
</ul>
</li>
</ul>
<h3 id="ä½¿ç”¨-List-åˆ—è¡¨ç»„ä»¶"><a href="#ä½¿ç”¨-List-åˆ—è¡¨ç»„ä»¶" class="headerlink" title="ä½¿ç”¨ List åˆ—è¡¨ç»„ä»¶"></a>ä½¿ç”¨ List åˆ—è¡¨ç»„ä»¶</h3><p><a href="https://youzan.github.io/vant/#/zh-CN/list">List åˆ—è¡¨ç»„ä»¶</a>ï¼šç€‘å¸ƒæµæ»šåŠ¨åŠ è½½ï¼Œç”¨äºå±•ç¤ºé•¿åˆ—è¡¨ã€‚</p>
<p>List ç»„ä»¶é€šè¿‡ loading å’Œ finished ä¸¤ä¸ªå˜é‡æ§åˆ¶åŠ è½½çŠ¶æ€ï¼Œ<br>å½“ç»„ä»¶åˆå§‹åŒ–æˆ–æ»šåŠ¨åˆ°åˆ°åº•éƒ¨æ—¶ï¼Œä¼šè§¦å‘ load äº‹ä»¶å¹¶å°† loading è®¾ç½®æˆ trueï¼Œæ­¤æ—¶å¯ä»¥å‘èµ·å¼‚æ­¥æ“ä½œå¹¶æ›´æ–°æ•°æ®ï¼Œæ•°æ®æ›´æ–°å®Œæ¯•åï¼Œå°† loading è®¾ç½®æˆ false å³å¯ã€‚<br>è‹¥æ•°æ®å·²å…¨éƒ¨åŠ è½½å®Œæ¯•ï¼Œåˆ™ç›´æ¥å°† finished è®¾ç½®æˆ true å³å¯ã€‚</p>
<ul>
<li><code>load äº‹ä»¶</code>ï¼š<ul>
<li>List åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®ã€‚</li>
<li>å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼ŒList ä¼šç»§ç»­è§¦å‘ load äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆã€‚</li>
</ul>
</li>
<li><code>loading å±æ€§</code>ï¼šæ§åˆ¶åŠ è½½ä¸­çš„ loading çŠ¶æ€<ul>
<li>éåŠ è½½ä¸­ï¼Œloading ä¸º falseï¼Œæ­¤æ—¶ä¼šæ ¹æ®åˆ—è¡¨æ»šåŠ¨ä½ç½®åˆ¤æ–­æ˜¯å¦è§¦å‘ load äº‹ä»¶ï¼ˆåˆ—è¡¨å†…å®¹ä¸è¶³ä¸€å±å¹•æ—¶ï¼Œä¼šç›´æ¥è§¦å‘ï¼‰</li>
<li>åŠ è½½ä¸­ï¼Œloading ä¸º trueï¼Œè¡¨ç¤ºæ­£åœ¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ load äº‹ä»¶</li>
</ul>
</li>
<li><code>finished å±æ€§</code>ï¼šæ§åˆ¶åŠ è½½ç»“æŸçš„çŠ¶æ€<ul>
<li>åœ¨æ¯æ¬¡è¯·æ±‚å®Œæ¯•åï¼Œéœ€è¦æ‰‹åŠ¨å°† loading è®¾ç½®ä¸º falseï¼Œè¡¨ç¤ºæœ¬æ¬¡åŠ è½½ç»“æŸ</li>
<li>æ‰€æœ‰æ•°æ®åŠ è½½ç»“æŸï¼Œfinished ä¸º trueï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ load äº‹ä»¶</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-list"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      List åˆ—è¡¨ç»„ä»¶ï¼šç€‘å¸ƒæµæ»šåŠ¨åŠ è½½ï¼Œç”¨äºå±•ç¤ºé•¿åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      List ç»„ä»¶é€šè¿‡ loading å’Œ finished ä¸¤ä¸ªå˜é‡æ§åˆ¶åŠ è½½çŠ¶æ€ï¼Œ</span></span><br><span class="line"><span class="comment">      å½“ç»„ä»¶åˆå§‹åŒ–æˆ–æ»šåŠ¨åˆ°åˆ°åº•éƒ¨æ—¶ï¼Œä¼šè§¦å‘ load äº‹ä»¶å¹¶å°† loading è‡ªåŠ¨è®¾ç½®æˆ trueï¼Œæ­¤æ—¶å¯ä»¥å‘èµ·å¼‚æ­¥æ“ä½œå¹¶æ›´æ–°æ•°æ®ï¼Œ</span></span><br><span class="line"><span class="comment">      æ•°æ®æ›´æ–°å®Œæ¯•åï¼Œå°† loading è®¾ç½®æˆ false å³å¯ã€‚</span></span><br><span class="line"><span class="comment">      è‹¥æ•°æ®å·²å…¨éƒ¨åŠ è½½å®Œæ¯•ï¼Œåˆ™ç›´æ¥å°† finished è®¾ç½®æˆ true å³å¯ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      - load äº‹ä»¶ï¼š</span></span><br><span class="line"><span class="comment">        + List åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">        + å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼ŒList ä¼šç»§ç»­è§¦å‘ load äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      - loading å±æ€§ï¼šæ§åˆ¶åŠ è½½ä¸­çš„ loading çŠ¶æ€</span></span><br><span class="line"><span class="comment">        + éåŠ è½½ä¸­ï¼Œloading ä¸º falseï¼Œæ­¤æ—¶ä¼šæ ¹æ®åˆ—è¡¨æ»šåŠ¨ä½ç½®åˆ¤æ–­æ˜¯å¦è§¦å‘ load äº‹ä»¶ï¼ˆåˆ—è¡¨å†…å®¹ä¸è¶³ä¸€å±å¹•æ—¶ï¼Œä¼šç›´æ¥è§¦å‘ï¼‰</span></span><br><span class="line"><span class="comment">        + åŠ è½½ä¸­ï¼Œloading ä¸º trueï¼Œè¡¨ç¤ºæ­£åœ¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ load äº‹ä»¶</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      - finished å±æ€§ï¼šæ§åˆ¶åŠ è½½ç»“æŸçš„çŠ¶æ€</span></span><br><span class="line"><span class="comment">        + åœ¨æ¯æ¬¡è¯·æ±‚å®Œæ¯•åï¼Œéœ€è¦æ‰‹åŠ¨å°† loading è®¾ç½®ä¸º falseï¼Œè¡¨ç¤ºæœ¬æ¬¡åŠ è½½ç»“æŸ</span></span><br><span class="line"><span class="comment">        + æ‰€æœ‰æ•°æ®åŠ è½½ç»“æŸï¼Œfinished ä¸º trueï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ load äº‹ä»¶</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> <span class="attr">:key</span>=<span class="string">"item"</span> <span class="attr">:title</span>=<span class="string">"item"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleList'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">channel</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">list</span>: [], <span class="comment">// å­˜å‚¨åˆ—è¡¨æ•°æ®çš„æ•°ç»„</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶åŠ è½½ä¸­ loading çŠ¶æ€</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">finished</span>: <span class="literal">false</span> <span class="comment">// æ§åˆ¶æ•°æ®åŠ è½½ç»“æŸçš„çŠ¶æ€</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="comment">// åˆå§‹åŒ–æˆ–æ»šåŠ¨åˆ°åº•éƒ¨çš„æ—¶å€™ä¼šè§¦å‘è°ƒç”¨ onLoad</span></span></span><br><span class="line"><span class="javascript">    onLoad () {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'onLoad'</span>)</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// setTimeout ä»…åšç¤ºä¾‹ï¼ŒçœŸå®åœºæ™¯ä¸­ä¸€èˆ¬ä¸º ajax è¯·æ±‚</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 2. æŠŠè¯·æ±‚ç»“æœæ•°æ®æ”¾åˆ° list æ•°ç»„ä¸­</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 0 + 1 = 1</span></span></span><br><span class="line"><span class="javascript">          <span class="comment">// 1 + 1 = 2</span></span></span><br><span class="line"><span class="javascript">          <span class="comment">// 2 + 1 = 3</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.list.push(<span class="built_in">this</span>.list.length + <span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 3. æœ¬æ¬¡æ•°æ®åŠ è½½ç»“æŸä¹‹åè¦æŠŠåŠ è½½çŠ¶æ€è®¾ç½®ä¸ºç»“æŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//     loading å…³é—­ä»¥åæ‰èƒ½è§¦å‘ä¸‹ä¸€æ¬¡çš„åŠ è½½æ›´å¤š</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦å…¨éƒ¨åŠ è½½å®Œæˆ</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.list.length &gt;= <span class="number">40</span>) {</span></span><br><span class="line"><span class="javascript">          <span class="comment">// å¦‚æœæ²¡æœ‰æ•°æ®äº†ï¼ŒæŠŠ finished è®¾ç½®ä¸º trueï¼Œä¹‹åä¸å†è§¦å‘åŠ è½½æ›´å¤š</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.finished = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      }, <span class="number">1000</span>)</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è®©åˆ—è¡¨å›ºå®šå®šä½"><a href="#è®©åˆ—è¡¨å›ºå®šå®šä½" class="headerlink" title="è®©åˆ—è¡¨å›ºå®šå®šä½"></a>è®©åˆ—è¡¨å›ºå®šå®šä½</h3><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line">.article-list {</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 180px;</span><br><span class="line">  bottom: 100px;</span><br><span class="line">  right: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®"><a href="#åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®" class="headerlink" title="åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®"></a>åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®</h3><p>å®ç°æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>1ã€åˆ›å»º <code>src/api/article.js</code> å°è£…è·å–æ–‡ç« åˆ—è¡¨æ•°æ®çš„æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ç« æ¥å£æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–é¢‘é“çš„æ–‡ç« åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getArticles = <span class="function"><span class="params">params</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_1/articles'</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šä½¿ç”¨æ¥å£æ–‡æ¡£ä¸­æœ€ä¸‹é¢çš„ <strong>é¢‘é“æ–°é—»æ¨è_V1.1</strong></p>
</blockquote>
<p>2ã€ç„¶ååœ¨é¦–é¡µæ–‡ç« åˆ—è¡¨ç»„ä»¶ <code>onload</code> çš„æ—¶å€™è¯·æ±‚åŠ è½½æ–‡ç« åˆ—è¡¨</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-list"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        loading æ§åˆ¶ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„ loading çŠ¶æ€</span></span><br><span class="line"><span class="comment">        finished æ§åˆ¶æ•°æ®æ˜¯å¦åŠ è½½ç»“æŸ</span></span><br><span class="line"><span class="comment">        load äº‹ä»¶ï¼šå½“è§¦å‘ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ—¶å€™ä¼šè§¦å‘è°ƒç”¨ load äº‹ä»¶</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        List åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®</span></span><br><span class="line"><span class="comment">        å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼ŒList ä¼šç»§ç»­è§¦å‘ load äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:error.sync</span>=<span class="string">"error"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">error-text</span>=<span class="string">"è¯·æ±‚å¤±è´¥ï¼Œç‚¹å‡»é‡æ–°åŠ è½½"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">"(article, index) in list"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:title</span>=<span class="string">"article.title"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> { getArticles } <span class="keyword">from</span> <span class="string">'@/api/article'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleList'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">channel</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">list</span>: [], <span class="comment">// æ–‡ç« åˆ—è¡¨æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„ loading çŠ¶æ€</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">finished</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦åŠ è½½ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">error</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦åŠ è½½å¤±è´¥</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">timestamp</span>: <span class="literal">null</span> <span class="comment">// è¯·æ±‚ä¸‹ä¸€é¡µæ•°æ®çš„æ—¶é—´æˆ³</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="comment">// å½“è§¦å‘ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ—¶å€™è°ƒç”¨è¯¥å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> onLoad () {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">try</span> {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getArticles({</span></span><br><span class="line"><span class="javascript">          <span class="attr">channel_id</span>: <span class="built_in">this</span>.channel.id, <span class="comment">// é¢‘é“ id</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">timestamp</span>: <span class="built_in">this</span>.timestamp || <span class="built_in">Date</span>.now(), <span class="comment">// æ—¶é—´æˆ³ï¼Œè¯·æ±‚æ–°çš„æ¨èæ•°æ®ä¼ å½“å‰çš„æ—¶é—´æˆ³ï¼Œè¯·æ±‚å†å²æ¨èä¼ æŒ‡å®šçš„æ—¶é—´æˆ³</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">with_top</span>: <span class="number">1</span> <span class="comment">// æ˜¯å¦åŒ…å«ç½®é¡¶ï¼Œè¿›å…¥é¡µé¢ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶è¦åŒ…å«ç½®é¡¶æ–‡ç« ï¼Œ1-åŒ…å«ç½®é¡¶ï¼Œ0-ä¸åŒ…å«</span></span></span><br><span class="line"><span class="javascript">        })</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 2. æŠŠæ•°æ®æ·»åŠ åˆ° list æ•°ç»„ä¸­</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> { results } = data.data</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.list.push(...results)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 3. è®¾ç½®æœ¬æ¬¡åŠ è½½ä¸­ loading çŠ¶æ€ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (results.length) {</span></span><br><span class="line"><span class="javascript">          <span class="comment">// æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„æ—¶é—´æˆ³</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.timestamp = data.data.pre_timestamp</span></span><br><span class="line"><span class="javascript">        } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="javascript">          <span class="comment">// æ²¡æœ‰æ•°æ®äº†ï¼Œè®¾ç½®åŠ è½½çŠ¶æ€ç»“æŸï¼Œä¸å†è§¦å‘ä¸Šæ‹‰åŠ è½½æ›´å¤šäº†</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.finished = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      } <span class="keyword">catch</span> (err) {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(err)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loading = <span class="literal">false</span> <span class="comment">// å…³é—­ loading æ•ˆæœ</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.error = <span class="literal">true</span> <span class="comment">// å¼€å¯é”™è¯¯æç¤º</span></span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h3 id="ä¸‹æ‹‰åˆ·æ–°"><a href="#ä¸‹æ‹‰åˆ·æ–°" class="headerlink" title="ä¸‹æ‹‰åˆ·æ–°"></a>ä¸‹æ‹‰åˆ·æ–°</h3><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/å±•ç¤ºæ–‡ç« åˆ—è¡¨-ä¸‹æ‹‰åˆ·æ–°.gif" alt="å±•ç¤ºæ–‡ç« åˆ—è¡¨-ä¸‹æ‹‰åˆ·æ–°" width="250">

<p>è¿™é‡Œä¸»è¦ä½¿ç”¨åˆ° Vant ä¸­çš„ <a href="https://youzan.github.io/vant/#/zh-CN/pull-refresh">PullRefresh ä¸‹æ‹‰åˆ·æ–°</a> ç»„ä»¶ã€‚</p>
<p>æ€è·¯ï¼š</p>
<ul>
<li>æ³¨å†Œä¸‹æ‹‰åˆ·æ–°äº‹ä»¶ï¼ˆç»„ä»¶ï¼‰çš„å¤„ç†å‡½æ•°</li>
<li>å‘é€è¯·æ±‚è·å–æ–‡ç« åˆ—è¡¨æ•°æ®</li>
<li>æŠŠè·å–åˆ°çš„æ•°æ®æ·»åŠ åˆ°å½“å‰é¢‘é“çš„æ–‡ç« åˆ—è¡¨çš„é¡¶éƒ¨</li>
<li>æç¤ºç”¨æˆ·åˆ·æ–°æˆåŠŸï¼</li>
</ul>
<p>ä¸‹æ‹‰åˆ·æ–°æ—¶ä¼šè§¦å‘ç»„ä»¶çš„ <code>refresh</code> äº‹ä»¶ï¼Œåœ¨äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­å¯ä»¥è¿›è¡ŒåŒæ­¥æˆ–å¼‚æ­¥æ“ä½œï¼Œæ“ä½œå®Œæˆåå°† <code>v-model</code> è®¾ç½®ä¸º <code>false</code>ï¼Œè¡¨ç¤ºåŠ è½½å®Œæˆã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å½“è§¦å‘ä¸‹æ‹‰åˆ·æ–°çš„æ—¶å€™è°ƒç”¨è¯¥å‡½æ•°</span></span><br><span class="line"><span class="keyword">async</span> onRefresh () {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> { data } = <span class="keyword">await</span> getArticles({</span><br><span class="line">      <span class="attr">channel_id</span>: <span class="built_in">this</span>.channel.id, <span class="comment">// é¢‘é“ id</span></span><br><span class="line">      <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now(), <span class="comment">// ä¸‹æ‹‰åˆ·æ–°æ¯æ¬¡éƒ½åº”è¯¥è·å–æœ€æ–°æ•°æ®</span></span><br><span class="line">      <span class="attr">with_top</span>: <span class="number">1</span> <span class="comment">// æ˜¯å¦åŒ…å«ç½®é¡¶ï¼Œè¿›å…¥é¡µé¢ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶è¦åŒ…å«ç½®é¡¶æ–‡ç« ï¼Œ1-åŒ…å«ç½®é¡¶ï¼Œ0-ä¸åŒ…å«</span></span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. å°†æ•°æ®è¿½åŠ åˆ°åˆ—è¡¨çš„é¡¶éƒ¨</span></span><br><span class="line">    <span class="keyword">const</span> { results } = data.data</span><br><span class="line">    <span class="built_in">this</span>.list.unshift(...results)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. å…³é—­ä¸‹æ‹‰åˆ·æ–°çš„ loading çŠ¶æ€</span></span><br><span class="line">    <span class="built_in">this</span>.isRefreshLoading = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æç¤ºæˆåŠŸ</span></span><br><span class="line">    <span class="built_in">this</span>.refreshSuccessText = <span class="string">`åˆ·æ–°æˆåŠŸï¼Œæ›´æ–°äº†<span class="subst">${results.length}</span>æ¡æ•°æ®`</span></span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.isRefreshLoading = <span class="literal">false</span> <span class="comment">// å…³é—­ä¸‹æ‹‰åˆ·æ–°çš„ loading çŠ¶æ€</span></span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'åˆ·æ–°å¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ–‡ç« åˆ—è¡¨é¡¹"><a href="#æ–‡ç« åˆ—è¡¨é¡¹" class="headerlink" title="æ–‡ç« åˆ—è¡¨é¡¹"></a>æ–‡ç« åˆ—è¡¨é¡¹</h2><h3 id="å‡†å¤‡ç»„ä»¶"><a href="#å‡†å¤‡ç»„ä»¶" class="headerlink" title="å‡†å¤‡ç»„ä»¶"></a>å‡†å¤‡ç»„ä»¶</h3><p>åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­æœ‰å¥½å‡ ä¸ªé¡µé¢ä¸­éƒ½æœ‰è¿™ä¸ªæ–‡ç« åˆ—è¡¨é¡¹å†…å®¹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ¯ä¸ªé¡µé¢ä¸­éƒ½å†™ä¸€æ¬¡çš„è¯ä¸ä»…æ•ˆç‡ä½è€Œä¸”ç»´æŠ¤èµ·æ¥ä¹Ÿéº»çƒ¦ã€‚æ‰€ä»¥æœ€å¥½çš„åŠæ³•å°±æ˜¯æˆ‘ä»¬æŠŠå®ƒå°è£…ä¸ºä¸€ä¸ªç»„ä»¶ï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨çš„ç»„ä»¶ä¸­åŠ è½½ä½¿ç”¨å³å¯ã€‚</p>
<p>1ã€åˆ›å»º <code>src/components/article-item/index.vue</code> ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-item"</span>&gt;</span>æ–‡ç« åˆ—è¡¨é¡¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">article</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>2ã€åœ¨æ–‡ç« åˆ—è¡¨ç»„ä»¶ä¸­æ³¨å†Œä½¿ç”¨æ–‡ç« åˆ—è¡¨é¡¹ç»„ä»¶</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200404224728524.png" alt="image-20200404224728524" style="zoom:50%;">

<h3 id="å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹"><a href="#å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹" class="headerlink" title="å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹"></a>å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹</h3><ul>
<li>ä½¿ç”¨ Cell å•å…ƒæ ¼ç»„ä»¶</li>
<li>å±•ç¤ºæ ‡é¢˜</li>
<li>å±•ç¤ºåº•éƒ¨ä¿¡æ¯</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"article-item"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>{{ article.title }}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"article.cover.type === 3"</span> <span class="attr">class</span>=<span class="string">"cover-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"cover-item"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">"(img, index) in article.cover.images"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">            <span class="attr">width</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">height</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:src</span>=<span class="string">"img"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.aut_name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.comm_count }}è¯„è®º<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.pubdate }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-if</span>=<span class="string">"article.cover.type === 1"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">height</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:src</span>=<span class="string">"article.cover.images[0]"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">article</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ ·å¼è°ƒæ•´-1"><a href="#æ ·å¼è°ƒæ•´-1" class="headerlink" title="æ ·å¼è°ƒæ•´"></a>æ ·å¼è°ƒæ•´</h3><ul>
<li>æ–‡ç« æ ‡é¢˜<ul>
<li>å­—å·</li>
<li>é¢œè‰²</li>
<li>å¤šè¡Œæ–‡å­—çœç•¥</li>
</ul>
</li>
<li>å•å›¾å°é¢<ul>
<li>å°é¢å®¹å™¨<ul>
<li>å»é™¤ flex: 1ï¼Œå›ºå®šå®½é«˜</li>
<li>å·¦å†…è¾¹è·</li>
</ul>
</li>
<li>å°é¢å›¾<ul>
<li>å®½é«˜</li>
<li>å¡«å……æ¨¡å¼ï¼šcover</li>
</ul>
</li>
</ul>
</li>
<li>åº•éƒ¨æ–‡æœ¬ä¿¡æ¯<ul>
<li>å­—å·</li>
<li>é¢œè‰²</li>
<li>é—´è·</li>
</ul>
</li>
<li>å¤šå›¾å°é¢<ul>
<li>å¤–å±‚å®¹å™¨<ul>
<li>flex å®¹å™¨</li>
<li>ä¸Šä¸‹å¤–è¾¹è·</li>
</ul>
</li>
<li>å›¾ç‰‡å®¹å™¨<ul>
<li>å¹³å‡åˆ†é…å®¹å™¨ç©ºé—´ï¼šflex: 1;</li>
<li>å›ºå®šé«˜åº¦</li>
<li>å®¹å™¨é¡¹é—´è·</li>
</ul>
</li>
<li>å›¾ç‰‡<ul>
<li>å®½é«˜</li>
<li>å¡«å……æ¨¡å¼</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"article-item"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"title van-multi-ellipsis--l2"</span>&gt;</span>{{ article.title }}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"article.cover.type === 3"</span> <span class="attr">class</span>=<span class="string">"cover-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"cover-item"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">"(img, index) in article.cover.images"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"cover-item-img"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:src</span>=<span class="string">"img"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"label-info-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.aut_name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.comm_count }}è¯„è®º<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.pubdate }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-if</span>=<span class="string">"article.cover.type === 1"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"right-cover"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:src</span>=<span class="string">"article.cover.images[0]"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">article</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.article-item</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.title</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#3a3a3a</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-cell__value</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">flex</span>: unset;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">232px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">146px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding-left</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.right-cover</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">232px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">146px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.label-info-wrap</span> <span class="selector-tag">span</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#b4b4b4</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.cover-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.cover-item</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">146px</span>;</span></span><br><span class="line"><span class="css">      &amp;<span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:last-child</span>) {</span></span><br><span class="line"><span class="css">        <span class="attribute">padding-right</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.cover-item-img</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">146px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h3 id="å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜"><a href="#å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜" class="headerlink" title="å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜"></a>å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜</h3><p>ä¸ºä»€ä¹ˆæ–‡ç« åˆ—è¡¨æ•°æ®ä¸­çš„å¥½å¤šå›¾ç‰‡èµ„æºè¯·æ±‚å¤±è´¥è¿”å› 403ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é¡¹ç›®çš„æ¥å£æ•°æ®æ˜¯åç«¯é€šè¿‡çˆ¬è™«æŠ“å–çš„ç¬¬ä¸‰æ–¹å¹³å°å†…å®¹ï¼Œè€Œç¬¬ä¸‰æ–¹å¹³å°å¯¹å›¾ç‰‡èµ„æºåšäº†é˜²ç›—é“¾ä¿æŠ¤å¤„ç†ã€‚</span><br></pre></td></tr></tbody></table></figure>



<p>ç¬¬ä¸‰æ–¹å¹³å°æ€ä¹ˆå¤„ç†å›¾ç‰‡èµ„æºä¿æŠ¤çš„ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ Referer è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œç„¶åå¤„ç†èµ„æºè®¿é—®ã€‚</span><br></pre></td></tr></tbody></table></figure>

<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200405134347749.png" alt="image-20200405134347749">



<p>Referer æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p>
<blockquote>
<p>æ‰©å±•å‚è€ƒï¼š<a href="http://www.ruanyifeng.com/blog/2019/06/http-referer.html">http://www.ruanyifeng.com/blog/2019/06/http-referer.html</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">Referer æ˜¯ HTTP è¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘ Web æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸Š Refererï¼Œå®ƒåŒ…å«äº†å½“å‰è¯·æ±‚èµ„æºçš„æ¥æºé¡µé¢çš„åœ°å€ã€‚æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ Referer è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œå¯èƒ½ä¼šä»¥æ­¤è¿›è¡Œç»Ÿè®¡åˆ†æã€æ—¥å¿—è®°å½•ä»¥åŠç¼“å­˜ä¼˜åŒ–ç­‰ã€‚</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ referer å®é™…ä¸Šæ˜¯ â€œreferrerâ€ è¯¯æ‹¼å†™ã€‚å‚è§ <a href="https://zh.wikipedia.org/wiki/HTTP_referer">HTTP referer on Wikipedia</a> ï¼ˆHTTP referer åœ¨ç»´åŸºç™¾ç§‘ä¸Šçš„æ¡ç›®ï¼‰æ¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p>æ€ä¹ˆè§£å†³ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">ä¸è¦å‘é€ referrer ï¼Œå¯¹æ–¹æœåŠ¡ç«¯å°±ä¸çŸ¥é“ä½ ä»å“ªæ¥çš„äº†ï¼Œå§‘ä¸”è®¤ä¸ºæ˜¯ä½ æ˜¯è‡ªå·±äººå§ã€‚</span><br></pre></td></tr></tbody></table></figure>



<p>å¦‚ä½•è®¾ç½®ä¸å‘é€ referrerï¼Ÿ</p>
<p>ç”¨ <code>&lt;a&gt;</code>ã€<code>&lt;area&gt;</code>ã€<code>&lt;img&gt;</code>ã€<code>&lt;iframe&gt;</code>ã€<code>&lt;script&gt;</code> æˆ–è€… <code>&lt;link&gt;</code> å…ƒç´ ä¸Šçš„ <code>referrerpolicy</code> å±æ€§ä¸ºå…¶è®¾ç½®ç‹¬ç«‹çš„è¯·æ±‚ç­–ç•¥ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://â€¦â€¦"</span> <span class="attr">referrerPolicy</span>=<span class="string">"no-referrer"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æˆ–è€…ç›´æ¥åœ¨ HTMl é¡µé¢å¤´ä¸­é€šè¿‡ meta å±æ€§å…¨å±€é…ç½®ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"referrer"</span> <span class="attr">content</span>=<span class="string">"no-referrer"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¤„ç†ç›¸å¯¹æ—¶é—´"><a href="#å¤„ç†ç›¸å¯¹æ—¶é—´" class="headerlink" title="å¤„ç†ç›¸å¯¹æ—¶é—´"></a>å¤„ç†ç›¸å¯¹æ—¶é—´</h3><p>æ¨èä¸¤ä¸ªç¬¬ä¸‰æ–¹åº“ï¼š</p>
<ul>
<li><a href="https://momentjs.com/">Moment.js</a></li>
<li><a href="https://day.js.org/">Day.js</a></li>
</ul>
<p>ä¸¤è€…éƒ½æ˜¯ä¸“é—¨ç”¨äºå¤„ç†æ—¶é—´çš„ JavaScript åº“ï¼ŒåŠŸèƒ½å·®ä¸å¤šï¼Œå› ä¸º Day.js çš„è®¾è®¡å°±æ˜¯å‚è€ƒçš„ Moment.jsã€‚ä½†æ˜¯ Day.js ç›¸æ¯” Moment.js çš„åŒ…ä½“ç§¯è¦æ›´å°ä¸€äº›ï¼Œå› ä¸ºå®ƒé‡‡ç”¨äº†æ’ä»¶åŒ–çš„å¤„ç†æ–¹å¼ã€‚</p>
<p><a href="https://day.js.org/zh-CN/">Day.js</a> æ˜¯ä¸€ä¸ªè½»é‡çš„å¤„ç†æ—¶é—´å’Œæ—¥æœŸçš„ JavaScript åº“ï¼Œå’Œ <a href="https://momentjs.com/">Moment.js</a> çš„ API è®¾è®¡ä¿æŒå®Œå…¨ä¸€æ ·ï¼Œå¦‚æœæ‚¨æ›¾ç»ç”¨è¿‡ Moment.js, é‚£ä¹ˆæ‚¨å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨ Day.js ã€‚</p>
<ul>
<li><p>Day.js å¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨å’Œ Node.js ä¸­ã€‚</p>
</li>
<li><p>ğŸ•’ å’Œ Moment.js ç›¸åŒçš„ API å’Œç”¨æ³•</p>
</li>
<li><p>ğŸ’ª ä¸å¯å˜æ•°æ® (Immutable)</p>
</li>
<li><p>ğŸ”¥ æ”¯æŒé“¾å¼æ“ä½œ (Chainable)</p>
</li>
<li><p>ğŸŒ å›½é™…åŒ– I18n</p>
</li>
<li><p>ğŸ“¦ ä»… 2kb å¤§å°çš„å¾®å‹åº“</p>
</li>
<li><p>ğŸ‘« å…¨æµè§ˆå™¨å…¼å®¹</p>
</li>
</ul>
<p>1ã€å®‰è£…</p>
<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line">npm i dayjs</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åˆ›å»º <code>utils/dayjs.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">'dayjs'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ è½½ä¸­æ–‡è¯­è¨€åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'dayjs/locale/zh-cn'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> relativeTime <span class="keyword">from</span> <span class="string">'dayjs/plugin/relativeTime'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®ä½¿ç”¨å¤„ç†ç›¸å¯¹æ—¶é—´çš„æ’ä»¶</span></span><br><span class="line">dayjs.extend(relativeTime)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®ä½¿ç”¨ä¸­æ–‡è¯­è¨€åŒ…</span></span><br><span class="line">dayjs.locale(<span class="string">'zh-cn'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€è¿‡æ»¤å™¨ï¼šå¤„ç†ç›¸å¯¹æ—¶é—´</span></span><br><span class="line">Vue.filter(<span class="string">'relativeTime'</span>, <span class="function"><span class="params">value</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> dayjs().to(dayjs(value))</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨ <code>main.js</code> ä¸­åŠ è½½åˆå§‹åŒ–</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./utils/dayjs'</span></span><br></pre></td></tr></tbody></table></figure>

<p>4ã€ä½¿ç”¨</p>
<p>ä½¿ç”¨è¿‡æ»¤å™¨ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>{{ æ—¥æœŸæ•°æ® | relativeTime }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h1 id="äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘"><a href="#äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘" class="headerlink" title="äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘"></a>äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘</h1><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566541118035.png" width="300">





<h2 id="å¤„ç†é¡µé¢å¼¹å‡ºå±‚"><a href="#å¤„ç†é¡µé¢å¼¹å‡ºå±‚" class="headerlink" title="å¤„ç†é¡µé¢å¼¹å‡ºå±‚"></a>å¤„ç†é¡µé¢å¼¹å‡ºå±‚</h2><p>Vant ä¸­å†…ç½®äº† <a href="https://youzan.github.io/vant/#/zh-CN/popup">Popup å¼¹å‡ºå±‚</a> ç»„ä»¶ã€‚</p>
<p>1ã€åœ¨ <code>data</code>ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥æ§åˆ¶å¼¹å±‚çš„æ˜¾ç¤ºå’Œéšè—</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isChannelEditShow</span>: <span class="literal">true</span> <span class="comment">// è¿™é‡Œæˆ‘ä»¬å…ˆè®¾ç½®ä¸º true å°±èƒ½çœ‹åˆ°å¼¹çª—çš„é¡µé¢äº†</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨é¦–é¡µæ¨¡æ¿ä¸­çš„é¢‘é“åˆ—è¡¨åé¢æ·»åŠ å¼¹å‡ºå±‚ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é¢‘é“ç¼–è¾‘ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"edit-channel-popup"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isEditChannelShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:style</span>=<span class="string">"{ height: '100%' }"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">closeable</span></span></span><br><span class="line"><span class="tag">  <span class="attr">close-icon-position</span>=<span class="string">"top-left"</span></span></span><br><span class="line"><span class="tag">&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /é¢‘é“ç¼–è¾‘ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight less"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.edit-channel-popup</span> {</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æµ‹è¯•æŸ¥çœ‹ç»“æœã€‚</p>
<h2 id="åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶"><a href="#åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶" class="headerlink" title="åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶"></a>åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶</h2><p>1ã€åˆ›å»º <code>views/home/components/channel-edit.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"channel-edit"</span>&gt;</span>é¢‘é“ç¼–è¾‘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ChannelEdit'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨é¦–é¡µä¸­åŠ è½½æ³¨å†Œ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> ChannelEdit <span class="keyword">from</span> <span class="string">'./components/channel-edit'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">components</span>: {</span><br><span class="line">    ...</span><br><span class="line">    ChannelEdit</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p>3ã€åœ¨å¼¹å‡ºå±‚ä¸­ä½¿ç”¨é¢‘é“ç¼–è¾‘ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é¢‘é“ç¼–è¾‘ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isChannelEditShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">closeable</span></span></span><br><span class="line"><span class="tag">  <span class="attr">close-icon-position</span>=<span class="string">"top-left"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:style</span>=<span class="string">"{ height: '100%' }"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">+  <span class="tag">&lt;<span class="name">channel-edit</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /é¢‘é“ç¼–è¾‘ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="é¡µé¢å¸ƒå±€-2"><a href="#é¡µé¢å¸ƒå±€-2" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"channel-edit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æˆ‘çš„é¢‘é“"</span> <span class="attr">:border</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"danger"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">plain</span></span></span><br><span class="line"><span class="tag">      &gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid</span> <span class="attr">:gutter</span>=<span class="string">"10"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-grid-item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"channel-item"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">"value in 8"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:key</span>=<span class="string">"value"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">text</span>=<span class="string">"æ–‡å­—"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-grid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"é¢‘é“æ¨è"</span> <span class="attr">:border</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid</span> <span class="attr">:gutter</span>=<span class="string">"10"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-grid-item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"channel-item"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">"value in 8"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:key</span>=<span class="string">"value"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">text</span>=<span class="string">"æ–‡å­—"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-grid</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ChannelEdit'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.channel-edit</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.channel-item</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">86px</span>;</span></span><br><span class="line"><span class="css">    /deep/ <span class="selector-class">.van-grid-item__content</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">background-color</span>: <span class="number">#f5f5f6</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.van-grid-item__text</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">28px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å±•ç¤ºæˆ‘çš„é¢‘é“"><a href="#å±•ç¤ºæˆ‘çš„é¢‘é“" class="headerlink" title="å±•ç¤ºæˆ‘çš„é¢‘é“"></a>å±•ç¤ºæˆ‘çš„é¢‘é“</h2><p>1ã€åœ¨çˆ¶ç»„ä»¶ä¸­æŠŠ <code>channels</code> ä¼ é€’ç»™é¢‘é“ç¼–è¾‘ç»„ä»¶</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316002816033.png" alt="image-20200316002816033" style="zoom:50%;">



<p>2ã€åœ¨é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­å£°æ˜æ¥æ”¶çˆ¶ç»„ä»¶çš„ <code>userChannels</code> é¢‘é“åˆ—è¡¨æ•°æ®å¹¶éå†å±•ç¤º</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316002911027.png" alt="image-20200316002911027" style="zoom:50%;">

<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316002958971.png" alt="image-20200316002958971" style="zoom:50%;">

<h2 id="å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨"><a href="#å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨" class="headerlink" title="å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨"></a>å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨</h2><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1571040968593.png" alt="1571040968593" style="zoom:50%;">

<p>æ²¡æœ‰ç”¨æ¥è·å–æ¨èé¢‘é“çš„æ•°æ®æ¥å£ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰è·å–æ‰€æœ‰é¢‘é“åˆ—è¡¨çš„æ•°æ®æ¥å£ã€‚</p>
<p>æ‰€ä»¥ï¼š<code>æ‰€æœ‰é¢‘é“åˆ—è¡¨ - æˆ‘çš„é¢‘é“ = å‰©ä½™æ¨èçš„é¢‘é“</code>ã€‚</p>
<p>å®ç°è¿‡ç¨‹æ‰€ä»¥ä¸€å…±åˆ†ä¸ºä¸¤å¤§æ­¥ï¼š</p>
<ul>
<li>è·å–æ‰€æœ‰é¢‘é“</li>
<li>åŸºäºæ‰€æœ‰é¢‘é“å’Œæˆ‘çš„é¢‘é“è®¡ç®—è·å–å‰©ä½™çš„æ¨èé¢‘é“</li>
</ul>
<h3 id="è·å–æ‰€æœ‰é¢‘é“"><a href="#è·å–æ‰€æœ‰é¢‘é“" class="headerlink" title="è·å–æ‰€æœ‰é¢‘é“"></a>è·å–æ‰€æœ‰é¢‘é“</h3><p>1ã€å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ‰€æœ‰é¢‘é“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getAllChannels = <span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/channels'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç¼–è¾‘é¢‘é“ç»„ä»¶ä¸­è¯·æ±‚è·å–æ‰€æœ‰é¢‘é“æ•°æ®</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316021948407.png" alt="image-20200316021948407" style="zoom:50%;">

<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316022017473.png" alt="image-20200316022017473" style="zoom:50%;">

<p>3ã€åœ¨è°ƒè¯•å·¥å…·ä¸­æµ‹è¯•æ˜¯å¦æœ‰æ‹¿åˆ°æ•°æ®</p>
<h3 id="å¤„ç†å±•ç¤ºæ¨èé¢‘é“"><a href="#å¤„ç†å±•ç¤ºæ¨èé¢‘é“" class="headerlink" title="å¤„ç†å±•ç¤ºæ¨èé¢‘é“"></a>å¤„ç†å±•ç¤ºæ¨èé¢‘é“</h3><p>æ€è·¯ï¼š<code>æ‰€æœ‰é¢‘é“ - ç”¨æˆ·é¢‘é“ = æ¨èé¢‘é“</code></p>
<p>1ã€å°è£…è®¡ç®—å±æ€§ç­›é€‰æ•°æ®</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316022123370.png" alt="image-20200316022123370" style="zoom:50%;">

<ul>
<li>éå†æ‰€æœ‰é¢‘é“</li>
<li>å¯¹æ¯ä¸€ä¸ªé¢‘é“éƒ½åˆ¤æ–­ï¼šè¯¥é¢‘é“æ˜¯å¦å±äºæˆ‘çš„é¢‘é“</li>
<li>å¦‚æœä¸å±äºæˆ‘çš„é¢‘é“ï¼Œåˆ™æ”¶é›†èµ·æ¥</li>
<li>ç›´åˆ°éå†ç»“æŸï¼Œå‰©ä¸‹æ¥å°±æ˜¯é‚£äº›å‰©ä½™çš„æ¨èé¢‘é“</li>
</ul>
<p>2ã€æ¨¡æ¿ç»‘å®š</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316022153646.png" alt="image-20200316022153646" style="zoom:50%;">



<h2 id="æ·»åŠ é¢‘é“"><a href="#æ·»åŠ é¢‘é“" class="headerlink" title="æ·»åŠ é¢‘é“"></a>æ·»åŠ é¢‘é“</h2><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/é¢‘é“ç®¡ç†-æ·»åŠ é¢‘é“.gif" alt="é¢‘é“ç®¡ç†-æ·»åŠ é¢‘é“" width="250">

<p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™æ¨èé¢‘é“åˆ—è¡¨ä¸­æ¯ä¸€é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>è·å–ç‚¹å‡»çš„é¢‘é“é¡¹</li>
<li>å°†é¢‘é“é¡¹æ·»åŠ åˆ°æˆ‘çš„é¢‘é“ä¸­</li>
<li><del>å°†å½“å‰ç‚¹å‡»çš„é¢‘é“é¡¹ä»æ¨èé¢‘é“ä¸­ç§»é™¤</del><ul>
<li>ä¸éœ€è¦åˆ é™¤ï¼Œå› ä¸ºæˆ‘ä»¬è·å–æ•°æ®ä½¿ç”¨çš„æ˜¯è®¡ç®—å±æ€§ï¼Œå½“æˆ‘é¢‘é“å‘ç”Ÿæ”¹å˜ï¼Œè®¡ç®—å±æ€§é‡æ–°æ±‚å€¼äº†</li>
</ul>
</li>
</ul>
<p>1ã€ç»™æ¨èé¢‘é“ä¸­çš„é¢‘é“æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316030501261.png" alt="image-20200316030501261" style="zoom:50%;">

<p>2ã€åœ¨æ·»åŠ é¢‘é“äº‹ä»¶å¤„ç†å‡½æ•°ä¸­</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316030518012.png" alt="image-20200316030518012" style="zoom:50%;">

<p>ç„¶åä½ ä¼šç¥å¥‡çš„å‘ç°ç‚¹å‡»çš„é‚£ä¸ªæ¨èé¢‘é“è·‘åˆ°æˆ‘çš„é¢‘é“ä¸­äº†ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å»æ‰‹åŠ¨çš„åˆ é™¤ç‚¹å‡»çš„è¿™ä¸ªæ¨èé¢‘é“ï¼Œä½†æ˜¯å®ƒæ²¡äº†ï¼ä¸»è¦æ˜¯å› ä¸ºæ¨èé¢‘é“æ˜¯é€šè¿‡ä¸€ä¸ªè®¡ç®—å±æ€§è·å–çš„ï¼Œè®¡ç®—å±æ€§ä¸­ä½¿ç”¨äº† channelsï¼ˆæˆ‘çš„é¢‘é“ï¼‰æ•°æ®ï¼Œæ‰€ä»¥åªè¦æˆ‘çš„é¢‘é“ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆè®¡ç®—å±æ€§å°±ä¼šé‡æ–°è¿ç®—è·å–æœ€æ–°çš„æ•°æ®ã€‚</p>
<h2 id="ç¼–è¾‘é¢‘é“"><a href="#ç¼–è¾‘é¢‘é“" class="headerlink" title="ç¼–è¾‘é¢‘é“"></a>ç¼–è¾‘é¢‘é“</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™æˆ‘çš„é¢‘é“ä¸­çš„é¢‘é“é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­<ul>
<li>å¦‚æœæ˜¯ç¼–è¾‘çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œåˆ é™¤é¢‘é“æ“ä½œ</li>
<li>å¦‚æœæ˜¯éç¼–è¾‘çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œåˆ‡æ¢é¢‘é“æ“ä½œ</li>
</ul>
</li>
</ul>
<h3 id="å¤„ç†ç¼–è¾‘çŠ¶æ€"><a href="#å¤„ç†ç¼–è¾‘çŠ¶æ€" class="headerlink" title="å¤„ç†ç¼–è¾‘çŠ¶æ€"></a>å¤„ç†ç¼–è¾‘çŠ¶æ€</h3><p>1ã€åœ¨ data ä¸­æ·»åŠ æ•°æ®ç”¨æ¥æ§åˆ¶ç¼–è¾‘çŠ¶æ€çš„æ˜¾ç¤º</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316033317098.png" alt="image-20200316033317098" style="zoom:50%;">

<p>2ã€åœ¨æˆ‘çš„é¢‘é“é¡¹ä¸­æ·»åŠ åˆ é™¤å›¾æ ‡</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316033121847.png" alt="image-20200316033121847" style="zoom:50%;">

<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316033200148.png" alt="image-20200316033200148" style="zoom:50%;">

<p>3ã€å¤„ç†ç‚¹å‡»ç¼–è¾‘æŒ‰é’®</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316033239687.png" alt="image-20200316033239687" style="zoom:50%;">





<h3 id="åˆ‡æ¢é¢‘é“"><a href="#åˆ‡æ¢é¢‘é“" class="headerlink" title="åˆ‡æ¢é¢‘é“"></a>åˆ‡æ¢é¢‘é“</h3><p>åŠŸèƒ½éœ€æ±‚ï¼šåœ¨éç¼–è¾‘å™¨çŠ¶æ€ä¸‹åˆ‡æ¢é¢‘é“ã€‚</p>
<p>1ã€ç»™æˆ‘çš„é¢‘é“é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316040309812.png" alt="image-20200316040309812" style="zoom:50%;">

<p>2ã€å¤„ç†å‡½æ•°</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316040344551.png" alt="image-20200316040344551" style="zoom:50%;">

<p>3ã€åœ¨çˆ¶ç»„ä»¶ä¸­ç›‘å¬å¤„ç†è‡ªå®šä¹‰äº‹ä»¶</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316040428331.png" alt="image-20200316040428331" style="zoom:50%;">

<h3 id="è®©æ¿€æ´»é¢‘é“é«˜äº®"><a href="#è®©æ¿€æ´»é¢‘é“é«˜äº®" class="headerlink" title="è®©æ¿€æ´»é¢‘é“é«˜äº®"></a>è®©æ¿€æ´»é¢‘é“é«˜äº®</h3><p>æ€è·¯ï¼š</p>
<ul>
<li>å°†é¦–é¡µä¸­çš„æ¿€æ´»çš„æ ‡ç­¾ç´¢å¼•ä¼ é€’ç»™é¢‘é“ç¼–è¾‘ç»„ä»¶</li>
<li>åœ¨é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­éå†æˆ‘çš„é¢‘é“åˆ—è¡¨çš„æ—¶å€™åˆ¤æ–­éå†é¡¹çš„ç´¢å¼•æ˜¯å¦ç­‰äºæ¿€æ´»çš„é¢‘é“æ ‡ç­¾ç´¢å¼•ï¼Œå¦‚æœä¸€æ ·åˆ™ä½œç”¨ä¸€ä¸ªé«˜äº®çš„ CSS ç±»å</li>
</ul>
<p>1ã€å°†é¦–é¡µç»„ä»¶ä¸­çš„ <code>active</code> ä¼ é€’åˆ°é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316004637299.png" alt="image-20200316004637299" style="zoom:50%;">

<p>2ã€åœ¨é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­å£°æ˜ props æ¥æ”¶</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316004657340.png" alt="image-20200316004657340" style="zoom:50%;">

<p>3ã€åˆ¤æ–­éå†é¡¹ï¼Œå¦‚æœ <code>éå†é¡¹ç´¢å¼• === active</code>ï¼Œåˆ™ç»™è¿™ä¸ªé¢‘é“é¡¹è®¾ç½®é«˜äº®æ ·å¼</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316004830847.png" alt="image-20200316004830847" style="zoom:50%;">

<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316004847629.png" alt="image-20200316004847629" style="zoom:50%;">

<h3 id="åˆ é™¤é¢‘é“"><a href="#åˆ é™¤é¢‘é“" class="headerlink" title="åˆ é™¤é¢‘é“"></a>åˆ é™¤é¢‘é“</h3><p>åŠŸèƒ½éœ€æ±‚ï¼šåœ¨ç¼–è¾‘çŠ¶æ€ä¸‹åˆ é™¤é¢‘é“ã€‚</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316042008623.png" alt="image-20200316042008623" style="zoom:50%;">

<h2 id="é¢‘é“æ•°æ®æŒä¹…åŒ–"><a href="#é¢‘é“æ•°æ®æŒä¹…åŒ–" class="headerlink" title="é¢‘é“æ•°æ®æŒä¹…åŒ–"></a>é¢‘é“æ•°æ®æŒä¹…åŒ–</h2><h3 id="ä¸šåŠ¡åˆ†æ"><a href="#ä¸šåŠ¡åˆ†æ" class="headerlink" title="ä¸šåŠ¡åˆ†æ"></a>ä¸šåŠ¡åˆ†æ</h3><p>é¢‘é“ç¼–è¾‘è¿™ä¸ªåŠŸèƒ½ï¼Œæ— è®ºç”¨æˆ·æ˜¯å¦ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>ä¸ç™»å½•ä¹Ÿèƒ½ä½¿ç”¨</p>
<ul>
<li>æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°</li>
<li>ä¸æ”¯æŒåŒæ­¥åŠŸèƒ½</li>
</ul>
<p>ç™»å½•ä¹Ÿèƒ½ä½¿ç”¨</p>
<ul>
<li>æ•°æ®å­˜å‚¨åœ¨çº¿ä¸Šåå°æœåŠ¡å™¨</li>
<li>æ›´æ¢ä¸åŒçš„è®¾å¤‡å¯ä»¥åŒæ­¥æ•°æ®</li>
</ul>
<h3 id="æ·»åŠ é¢‘é“-1"><a href="#æ·»åŠ é¢‘é“-1" class="headerlink" title="æ·»åŠ é¢‘é“"></a>æ·»åŠ é¢‘é“</h3><p>æ€è·¯ï¼š</p>
<ul>
<li>å¦‚æœæœªç™»å½•ï¼Œåˆ™å­˜å‚¨åˆ°æœ¬åœ°</li>
<li>å¦‚æœå·²ç™»å½•ï¼Œåˆ™å­˜å‚¨åˆ°çº¿ä¸Š<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è°ƒç”¨</li>
</ul>
</li>
</ul>
<p>1ã€å°è£…æ·»åŠ é¢‘é“çš„è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ç”¨æˆ·é¢‘é“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addUserChannel = <span class="function"><span class="params">channels</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'PATCH'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/channels'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      channels</span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ä¿®æ”¹æ·»åŠ é¢‘é“çš„å¤„ç†é€»è¾‘</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onAddChannel (channel) {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="built_in">this</span>.userChannels.push(channel)</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.user) {</span><br><span class="line">      <span class="comment">// å·²ç™»å½•ï¼Œæ•°æ®å­˜å‚¨åˆ°çº¿ä¸Š</span></span><br><span class="line">      <span class="keyword">await</span> addUserChannel([{</span><br><span class="line">        <span class="attr">id</span>: channel.id, <span class="comment">// é¢‘é“ id</span></span><br><span class="line">        <span class="attr">seq</span>: <span class="built_in">this</span>.userChannels.length <span class="comment">// é¢‘é“çš„ åºå·</span></span><br><span class="line">      }])</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æœªç™»å½•ï¼Œæ•°æ®å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">      setItem(<span class="string">'channels'</span>, <span class="built_in">this</span>.userChannels)</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'æ·»åŠ é¢‘é“å¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>



<h3 id="åˆ é™¤é¢‘é“-1"><a href="#åˆ é™¤é¢‘é“-1" class="headerlink" title="åˆ é™¤é¢‘é“"></a>åˆ é™¤é¢‘é“</h3><p>æ€è·¯ï¼š</p>
<ul>
<li>å¦‚æœæœªç™»å½•ï¼Œåˆ™å­˜å‚¨åˆ°æœ¬åœ°</li>
<li>å¦‚æœå·²ç™»å½•ï¼Œåˆ™å­˜å‚¨åˆ°çº¿ä¸Š<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è°ƒç”¨</li>
</ul>
</li>
</ul>
<p>1ã€å°è£…åˆ é™¤ç”¨æˆ·é¢‘é“è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤ç”¨æˆ·é¢‘é“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteUserChannel = <span class="function"><span class="params">channelId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/user/channels/<span class="subst">${channelId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ä¿®æ”¹åˆ é™¤é¢‘é“çš„å¤„ç†é€»è¾‘</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316051028617.png" alt="image-20200316051028617" style="zoom:50%;">

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> deleteChannel (channel) {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.user) {</span><br><span class="line">      <span class="comment">// å·²ç™»å½•ï¼Œå°†æ•°æ®å­˜å‚¨åˆ°çº¿ä¸Š</span></span><br><span class="line">      <span class="keyword">await</span> deleteUserChannel(channel.id)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æœªç™»å½•ï¼Œå°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">      setItem(<span class="string">'channles'</span>, <span class="built_in">this</span>.userChannels)</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'åˆ é™¤é¢‘é“å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®"><a href="#æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®" class="headerlink" title="æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®"></a>æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®</h2><p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/%E9%A6%96%E9%A1%B5-%E8%8E%B7%E5%8F%96%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8.png" alt="é¦–é¡µ-è·å–é¢‘é“åˆ—è¡¨"></p>
<blockquote>
<p>æç¤ºï¼šè·å–ç™»å½•ç”¨æˆ·çš„é¢‘é“åˆ—è¡¨å’Œè·å–é»˜è®¤æ¨èçš„é¢‘é“åˆ—è¡¨æ˜¯åŒä¸€ä¸ªæ•°æ®æ¥å£ã€‚åç«¯ä¼šæ ¹æ®æ¥å£ä¸­çš„ token æ¥åˆ¤å®šè¿”å›æ•°æ®ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> loadChannels () {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">let</span> channels = []</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.user) {</span><br><span class="line">      <span class="comment">// å·²ç™»å½•ï¼Œè¯·æ±‚è·å–çº¿ä¸Šçš„é¢‘é“æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> { data } = <span class="keyword">await</span> getChannels()</span><br><span class="line">      channels = data.data.channels</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æœªç™»å½•</span></span><br><span class="line">      <span class="keyword">const</span> localChannels = getItem(<span class="string">'channels'</span>)</span><br><span class="line">      <span class="keyword">if</span> (localChannels) {</span><br><span class="line">        <span class="comment">// æœ‰æœ¬åœ°é¢‘é“æ•°æ®ï¼Œåˆ™ä½¿ç”¨</span></span><br><span class="line">        channels = localChannels</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// æ²¡æœ‰æœ¬åœ°é¢‘é“æ•°æ®ï¼Œåˆ™è¯·æ±‚è·å–é»˜è®¤æ¨èçš„é¢‘é“åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getChannels()</span><br><span class="line">        channels = data.data.channels</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ•°æ®æ›´æ–°åˆ°ç»„ä»¶ä¸­</span></span><br><span class="line">    <span class="built_in">this</span>.channels = channels</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'æ•°æ®è·å–å¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>
<h1 id="å…­ã€æ–‡ç« æœç´¢"><a href="#å…­ã€æ–‡ç« æœç´¢" class="headerlink" title="å…­ã€æ–‡ç« æœç´¢"></a>å…­ã€æ–‡ç« æœç´¢</h1><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566431801892.png" width="250">



<h2 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-1"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-1" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h2><p>1ã€åˆ›å»º <code>src/views/search/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-container"</span>&gt;</span>æœç´¢é¡µé¢<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">"SearchPage"</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> {};</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {},</span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">  };</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶åæŠŠæœç´¢é¡µé¢çš„è·¯ç”±é…ç½®åˆ°æ ¹ç»„ä»¶è·¯ç”±ï¼ˆä¸€çº§è·¯ç”±ï¼‰</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/search'</span>,</span><br><span class="line">  <span class="attr">omponent</span>: Search</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åè®¿é—® <code>/search</code> æµ‹è¯•ã€‚</p>
<h2 id="é¡µé¢å¸ƒå±€-3"><a href="#é¡µé¢å¸ƒå±€-3" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><p>1ã€åˆ›å»º <code>src/views/search/components/search-history.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-history"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æœç´¢å†å²"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>å…¨éƒ¨åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>å®Œæˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"delete"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'SearchHistory'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åˆ›å»º <code>src/views/search/components/search-suggestion.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-suggestion"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'SearchSuggestion'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>3ã€åˆ›å»º <code>src/views/search/components/search-result.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-result"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> <span class="attr">:key</span>=<span class="string">"item"</span> <span class="attr">:title</span>=<span class="string">"item"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'SearchResult'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">list</span>: [],</span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">finished</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    onLoad () {</span></span><br><span class="line"><span class="javascript">      <span class="comment">// å¼‚æ­¥æ›´æ–°æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// setTimeout ä»…åšç¤ºä¾‹ï¼ŒçœŸå®åœºæ™¯ä¸­ä¸€èˆ¬ä¸º ajax è¯·æ±‚</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.list.push(<span class="built_in">this</span>.list.length + <span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// åŠ è½½çŠ¶æ€ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.list.length &gt;= <span class="number">40</span>) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.finished = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      }, <span class="number">1000</span>)</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>4ã€æœç´¢ç»„ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœç´¢æ  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      Tips: åœ¨ van-search å¤–å±‚å¢åŠ  form æ ‡ç­¾ï¼Œä¸” action ä¸ä¸ºç©ºï¼Œå³å¯åœ¨ iOS è¾“å…¥æ³•ä¸­æ˜¾ç¤ºæœç´¢æŒ‰é’®</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-search</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"searchText"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">show-action</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥æœç´¢å…³é”®è¯"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">background</span>=<span class="string">"#3296fa"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">search</span>=<span class="string">"onSearch"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">cancel</span>=<span class="string">"onCancel"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /æœç´¢æ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æœç´¢å†å²è®°å½• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">search-history</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /æœç´¢å†å²è®°å½• --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">search-suggestion</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å†å²è®°å½• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">search-result</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å†å²è®°å½• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> SearchHistory <span class="keyword">from</span> <span class="string">'./components/search-history'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> SearchSuggestion <span class="keyword">from</span> <span class="string">'./components/search-suggestion'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> SearchResult <span class="keyword">from</span> <span class="string">'./components/search-result'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'SearchIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {</span></span><br><span class="line"><span class="javascript">    SearchHistory,</span></span><br><span class="line"><span class="javascript">    SearchSuggestion,</span></span><br><span class="line"><span class="javascript">    SearchResult</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">searchText</span>: <span class="string">''</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    onSearch (val) {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(val)</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    onCancel () {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$router.back()</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.search-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-search__action</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€"><a href="#å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€" class="headerlink" title="å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€"></a>å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€</h2><p>1ã€åœ¨ <code>data</code> ä¸­æ·»åŠ æ•°æ®ç”¨æ¥æ§åˆ¶æœç´¢ç»“æœçš„æ˜¾ç¤ºçŠ¶æ€</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">isResultShow</span>: <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨æ¨¡æ¿ä¸­ç»‘å®šæ¡ä»¶æ¸²æŸ“</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœç´¢ç»“æœ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">search-result</span> <span class="attr">v-if</span>=<span class="string">"isResultShow"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æœç´¢ç»“æœ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">search-suggestion</span> <span class="attr">v-else-if</span>=<span class="string">"searchText"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœç´¢å†å²è®°å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">search-history</span> <span class="attr">v-else</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æœç´¢å†å²è®°å½• --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="æœç´¢è”æƒ³å»ºè®®"><a href="#æœç´¢è”æƒ³å»ºè®®" class="headerlink" title="æœç´¢è”æƒ³å»ºè®®"></a>æœç´¢è”æƒ³å»ºè®®</h2><p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>å½“æœç´¢æ¡†è¾“å…¥å†…å®¹çš„æ—¶å€™ï¼Œè¯·æ±‚åŠ è½½è”æƒ³å»ºè®®çš„æ•°æ®</li>
<li>å°†è¯·æ±‚å¾—åˆ°çš„ç»“æœç»‘å®šåˆ°æ¨¡æ¿ä¸­</li>
</ul>
<h3 id="åŸºæœ¬åŠŸèƒ½"><a href="#åŸºæœ¬åŠŸèƒ½" class="headerlink" title="åŸºæœ¬åŠŸèƒ½"></a>åŸºæœ¬åŠŸèƒ½</h3><p>ä¸€ã€å°†çˆ¶ç»„ä»¶ä¸­æœç´¢æ¡†è¾“å…¥çš„å†…å®¹ä¼ ç»™è”æƒ³å»ºè®®å­ç»„ä»¶</p>
<p>äºŒã€åœ¨å­ç»„ä»¶ä¸­ç›‘è§†æœç´¢æ¡†è¾“å…¥å†…å®¹çš„å˜åŒ–ï¼Œå¦‚æœå˜åŒ–åˆ™è¯·æ±‚è·å–è”æƒ³å»ºè®®æ•°æ®</p>
<p>ä¸‰ã€å°†è·å–åˆ°çš„è”æƒ³å»ºè®®æ•°æ®å±•ç¤ºåˆ°åˆ—è¡¨ä¸­</p>
<h3 id="é˜²æŠ–ä¼˜åŒ–"><a href="#é˜²æŠ–ä¼˜åŒ–" class="headerlink" title="é˜²æŠ–ä¼˜åŒ–"></a>é˜²æŠ–ä¼˜åŒ–</h3><p>1ã€å®‰è£… lodash</p>
<figure class="highlight sh"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># yarn add lodash</span></span><br><span class="line">npm i lodash</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€é˜²æŠ–å¤„ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// lodash æ”¯æŒæŒ‰éœ€åŠ è½½ï¼Œæœ‰åˆ©äºæ‰“åŒ…ç»“æœä¼˜åŒ–</span></span><br><span class="line"><span class="keyword">import</span> { debounce } <span class="keyword">from</span> <span class="string">"lodash"</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸å»ºè®®ä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼Œå› ä¸ºè¿™æ ·ä¼šåŠ è½½æ•´ä¸ªæ¨¡å—ã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span></span><br><span class="line">_.debounce()</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// debounce å‡½æ•°</span></span><br><span class="line"><span class="comment">// å‚æ•°1ï¼šå‡½æ•°</span></span><br><span class="line"><span class="comment">// å‚æ•°2ï¼šé˜²æŠ–æ—¶é—´</span></span><br><span class="line"><span class="comment">// è¿”å›å€¼ï¼šé˜²æŠ–ä¹‹åçš„å‡½æ•°ï¼Œå’Œå‚æ•°1åŠŸèƒ½æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="attr">onSearchInput</span>: debounce(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">const</span> searchContent = <span class="built_in">this</span>.searchContent</span><br><span class="line">  <span class="keyword">if</span> (!searchContent) {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> { data } = <span class="keyword">await</span> getSuggestions(searchContent)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å°†æ•°æ®æ·»åŠ åˆ°ç»„ä»¶å®ä¾‹ä¸­</span></span><br><span class="line">  <span class="built_in">this</span>.suggestions = data.data.options</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. æ¨¡æ¿ç»‘å®š</span></span><br><span class="line">}, <span class="number">200</span>),</span><br></pre></td></tr></tbody></table></figure>





<h3 id="æœç´¢å…³é”®å­—é«˜äº®"><a href="#æœç´¢å…³é”®å­—é«˜äº®" class="headerlink" title="æœç´¢å…³é”®å­—é«˜äº®"></a>æœç´¢å…³é”®å­—é«˜äº®</h3><p>å¦‚ä½•å°†å­—ç¬¦ä¸²ä¸­çš„æŒ‡å®šå­—ç¬¦åœ¨<strong>ç½‘é¡µ</strong>ä¸­é«˜äº®å±•ç¤ºï¼Ÿ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="string">"Hello World"</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>å°†éœ€è¦é«˜äº®çš„å­—ç¬¦åŒ…è£¹ HTML æ ‡ç­¾ï¼Œä¸ºå…¶å•ç‹¬è®¾ç½®é¢œè‰²ã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="string">"Hello &lt;span style="</span>color: red<span class="string">"&gt;World&lt;/span&gt;"</span></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ Vue ä¸­å¦‚ä½•æ¸²æŸ“å¸¦æœ‰ HTML æ ‡ç­¾çš„å­—ç¬¦ä¸²ï¼Ÿ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    <span class="attr">htmlStr</span>: <span class="string">'Hello &lt;span style="color: red"&gt;World&lt;/span&gt;'</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>{{ htmlStr }}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">"htmlStr"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200112154732044.png" alt="image-20200112154732044"></p>
<p>å¦‚ä½•æŠŠå­—ç¬¦ä¸²ä¸­æŒ‡å®šå­—ç¬¦ç»Ÿä¸€æ›¿æ¢ä¸ºé«˜äº®ï¼ˆåŒ…è£¹äº† HTMLï¼‰çš„å­—ç¬¦ï¼Ÿ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">"Hello World"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœï¼š&lt;span style="color: red"&gt;Hello&lt;/span&gt; World</span></span><br><span class="line"><span class="string">"Hello World"</span>.replace(<span class="string">'Hello'</span>, <span class="string">'&lt;span style="color: red"&gt;Hello&lt;/span&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œreplace æ–¹æ³•çš„å­—ç¬¦ä¸²åŒ¹é…åªèƒ½æ›¿æ¢ç¬¬1ä¸ªæ»¡è¶³çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment">// &lt;span style="color: red"&gt;Hello&lt;/span&gt; World Hello abc</span></span><br><span class="line"><span class="string">"Hello World Hello abc"</span>.replace(<span class="string">'Hello'</span>, <span class="string">'&lt;span style="color: red"&gt;Hello&lt;/span&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæƒ³è¦å…¨æ–‡æ›¿æ¢ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">// g å…¨å±€</span></span><br><span class="line"><span class="comment">// i å¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="comment">// &lt;span style="color: red"&gt;Hello&lt;/span&gt; World &lt;span style="color: red"&gt;Hello&lt;/span&gt; abc</span></span><br><span class="line"><span class="string">"Hello World Hello abc"</span>.replace(<span class="regexp">/Hello/gi</span>, <span class="string">'&lt;span style="color: red"&gt;Hello&lt;/span&gt;'</span>)</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸€ä¸ªå°æ‰©å±•ï¼šä½¿ç”¨å­—ç¬¦ä¸²çš„ split ç»“åˆæ•°ç»„çš„ join æ–¹æ³•å®ç°é«˜äº®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello world ä½ å¥½ hello"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["", " world ä½ å¥½ ", ""]</span></span><br><span class="line"><span class="keyword">const</span> arr = str.split(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// "&lt;span&gt;hello&lt;/span&gt; world ä½ å¥½ &lt;span&gt;hello&lt;/span&gt;"</span></span><br><span class="line">arr.join(<span class="string">"&lt;span&gt;hello&lt;/span&gt;"</span>);</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>ä¸‹é¢æ˜¯å…·ä½“çš„å¤„ç†ã€‚</p>
<p>1ã€åœ¨ methods ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•å¤„ç†é«˜äº®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å‚æ•° source: åŸå§‹å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">// å‚æ•° keyword: éœ€è¦é«˜äº®çš„å…³é”®è¯</span></span><br><span class="line"><span class="comment">// è¿”å›å€¼ï¼šæ›¿æ¢ä¹‹åçš„é«˜äº®å­—ç¬¦ä¸²</span></span><br><span class="line">highlight (source, keyword) {</span><br><span class="line">  <span class="comment">// /searchContent/ æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ä¸€åˆ‡å†…å®¹éƒ½ä¼šå½“åšå­—ç¬¦ä¸²ä½¿ç”¨</span></span><br><span class="line">  <span class="comment">// è¿™é‡Œå¯ä»¥ new RegExp æ–¹å¼æ ¹æ®å­—ç¬¦ä¸²åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">  <span class="comment">// RegExp æ˜¯åŸç”Ÿ JavaScript çš„å†…ç½®æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="comment">// å‚æ•°1ï¼šå­—ç¬¦ä¸²ï¼Œæ³¨æ„ï¼Œè¿™é‡Œä¸è¦åŠ  //</span></span><br><span class="line">  <span class="comment">// å‚æ•°2ï¼šåŒ¹é…æ¨¡å¼ï¼Œg å…¨å±€ï¼Œi å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">  <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(keyword, <span class="string">'gi'</span>)</span><br><span class="line">  <span class="keyword">return</span> source.replace(reg, <span class="string">`&lt;span style="color: #3296fa"&gt;<span class="subst">${keyword}</span>&lt;/span&gt;`</span>)</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨è”æƒ³å»ºè®®åˆ—è¡¨é¡¹ä¸­ç»‘å®šè°ƒç”¨</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-else-if</span>=<span class="string">"searchContent"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">icon</span>=<span class="string">"search"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(item, index) in suggestions"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">"onSearch(item)"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">v-html</span>=<span class="string">"highlight(item, searchContent)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /è”æƒ³å»ºè®® --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="æœç´¢ç»“æœ"><a href="#æœç´¢ç»“æœ" class="headerlink" title="æœç´¢ç»“æœ"></a>æœç´¢ç»“æœ</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>å°†æ•°æ®å±•ç¤ºåˆ°æ¨¡æ¿ä¸­</li>
</ul>
<p>ä¸€ã€è·å–æœç´¢å…³é”®å­—</p>
<p>1ã€å£°æ˜æ¥æ”¶çˆ¶ç»„ä»¶ä¸­çš„æœç´¢æ¡†è¾“å…¥çš„å†…å®¹</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">props: {</span><br><span class="line">  <span class="attr">q</span>: {</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">require</span>: <span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>



<p>2ã€åœ¨çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœç´¢ç»“æœ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">search-result</span> <span class="attr">v-if</span>=<span class="string">"isResultShow"</span> <span class="attr">:q</span>=<span class="string">"searchText"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æœç´¢ç»“æœ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<p>æœ€ååœ¨è°ƒè¯•å·¥å…·ä¸­æŸ¥çœ‹ç¡®è®¤æ˜¯å¦æ¥æ”¶åˆ° props æ•°æ®ã€‚</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200112162223915.png" alt="image-20200112162223915"></p>
<p>äºŒã€è¯·æ±‚è·å–æ•°æ®</p>
<p>1ã€åœ¨ <code>api/serach.js</code> æ·»åŠ å°è£…è·å–æœç´¢ç»“æœçš„è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æœç´¢ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getSearch</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"GET"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/app/v1_0/search"</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€è¯·æ±‚è·å–</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">+ <span class="keyword">import</span> { getSearch } <span class="keyword">from</span> <span class="string">'@/api/search'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'SearchResult'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {</span><br><span class="line">    <span class="attr">q</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">require</span>: <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">list</span>: [],</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">finished</span>: <span class="literal">false</span>,</span><br><span class="line">+      page: <span class="number">1</span>,</span><br><span class="line">+      perPage: <span class="number">20</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">  created () {},</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">+++    <span class="keyword">async</span> onLoad () {</span><br><span class="line">      <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> { data } = <span class="keyword">await</span> getSearch({</span><br><span class="line">        <span class="attr">page</span>: <span class="built_in">this</span>.page, <span class="comment">// é¡µç </span></span><br><span class="line">        <span class="attr">per_page</span>: <span class="built_in">this</span>.perPage, <span class="comment">// æ¯é¡µå¤§å°</span></span><br><span class="line">        <span class="attr">q</span>: <span class="built_in">this</span>.q <span class="comment">// æœç´¢å…³é”®å­—</span></span><br><span class="line">      })</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2. å°†æ•°æ®æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">      <span class="keyword">const</span> { results } = data.data</span><br><span class="line">      <span class="built_in">this</span>.list.push(...results)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 3. è®¾ç½®åŠ è½½çŠ¶æ€ç»“æŸ</span></span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•</span></span><br><span class="line">      <span class="keyword">if</span> (results.length) {</span><br><span class="line">        <span class="built_in">this</span>.page++ <span class="comment">// æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="built_in">this</span>.finished = <span class="literal">true</span> <span class="comment">// æ²¡æœ‰æ•°æ®äº†ï¼Œå°†åŠ è½½çŠ¶æ€è®¾ç½®ç»“æŸï¼Œä¸å† onLoad</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‰ã€æœ€åï¼Œæ¨¡æ¿ç»‘å®š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">+    <span class="attr">v-for</span>=<span class="string">"(article, index) in list"</span></span></span><br><span class="line"><span class="tag">+    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">+    <span class="attr">:title</span>=<span class="string">"article.title"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="æœç´¢å†å²è®°å½•"><a href="#æœç´¢å†å²è®°å½•" class="headerlink" title="æœç´¢å†å²è®°å½•"></a>æœç´¢å†å²è®°å½•</h2><h3 id="æ·»åŠ å†å²è®°å½•"><a href="#æ·»åŠ å†å²è®°å½•" class="headerlink" title="æ·»åŠ å†å²è®°å½•"></a>æ·»åŠ å†å²è®°å½•</h3><p>å½“å‘ç”Ÿæœç´¢çš„æ—¶å€™æˆ‘ä»¬æ‰éœ€è¦è®°å½•å†å²è®°å½•ã€‚</p>
<p>1ã€åœ¨ data ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥å­˜å‚¨å†å²è®°å½•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">searchHistories</span>: []</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è§¦å‘æœç´¢çš„æ—¶å€™ï¼Œè®°å½•å†å²è®°å½•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">onSearch (val) {</span><br><span class="line">  <span class="comment">// æ›´æ–°æ–‡æœ¬æ¡†å†…å®¹</span></span><br><span class="line">  <span class="built_in">this</span>.searchText = val</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜å‚¨æœç´¢å†å²è®°å½•</span></span><br><span class="line">  <span class="comment">// è¦æ±‚ï¼šä¸è¦æœ‰é‡å¤å†å²è®°å½•ã€æœ€æ–°çš„æ’åœ¨æœ€å‰é¢</span></span><br><span class="line">  <span class="keyword">const</span> index = <span class="built_in">this</span>.searchHistories.indexOf(val)</span><br><span class="line">  <span class="keyword">if</span> (index !== -<span class="number">1</span>) {</span><br><span class="line">    <span class="built_in">this</span>.searchHistories.splice(index, <span class="number">1</span>)</span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">this</span>.searchHistories.unshift(val)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸²æŸ“æœç´¢ç»“æœ</span></span><br><span class="line">  <span class="built_in">this</span>.isResultShow = <span class="literal">true</span></span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>



<h3 id="å±•ç¤ºå†å²è®°å½•"><a href="#å±•ç¤ºå†å²è®°å½•" class="headerlink" title="å±•ç¤ºå†å²è®°å½•"></a>å±•ç¤ºå†å²è®°å½•</h3><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å†å²è®°å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å†å²è®°å½•"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"delete"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>å…¨éƒ¨åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>å®Œæˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">"item"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(item, index) in searchHistories"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å†å²è®°å½• --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="åˆ é™¤å†å²è®°å½•"><a href="#åˆ é™¤å†å²è®°å½•" class="headerlink" title="åˆ é™¤å†å²è®°å½•"></a>åˆ é™¤å†å²è®°å½•</h3><p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>ç»™å†å²è®°å½•ä¸­çš„æ¯ä¸€é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>åœ¨å¤„ç†å‡½æ•°ä¸­åˆ¤æ–­<ul>
<li>å¦‚æœæ˜¯åˆ é™¤çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œåˆ é™¤æ“ä½œ</li>
<li>å¦‚æœæ˜¯éåˆ é™¤çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œæœç´¢æ“ä½œ</li>
</ul>
</li>
</ul>
<p>ä¸€ã€å¤„ç†åˆ é™¤ç›¸å…³å…ƒç´ çš„å±•ç¤ºçŠ¶æ€</p>
<p>1ã€åœ¨ data ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥æ§åˆ¶åˆ é™¤ç›¸å…³å…ƒç´ çš„æ˜¾ç¤ºçŠ¶æ€</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isDeleteShow</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»‘å®šä½¿ç”¨</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å†å²è®°å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å†å²è®°å½•"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">"isDeleteShow"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"searchHistories = []"</span>&gt;</span>å…¨éƒ¨åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"isDeleteShow = false"</span>&gt;</span>å®Œæˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">v-else</span> <span class="attr">name</span>=<span class="string">"delete"</span> @<span class="attr">click</span>=<span class="string">"isDeleteShow = true"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">"item"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(item, index) in searchHistories"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">"onSearch(item)"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-show</span>=<span class="string">"isDeleteShow"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">"close"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">"searchHistories.splice(index, 1)"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å†å²è®°å½• --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>äºŒã€å¤„ç†åˆ é™¤æ“ä½œ</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å†å²è®°å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å†å²è®°å½•"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">"isDeleteShow"</span>&gt;</span></span><br><span class="line">+      <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"searchHistories = []"</span>&gt;</span>å…¨éƒ¨åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"isDeleteShow = false"</span>&gt;</span>å®Œæˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">v-else</span> <span class="attr">name</span>=<span class="string">"delete"</span> @<span class="attr">click</span>=<span class="string">"isDeleteShow = true"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">"item"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(item, index) in searchHistories"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">+    @<span class="attr">click</span>=<span class="string">"onHistoryClick(item, index)"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">v-show</span>=<span class="string">"isDeleteShow"</span> <span class="attr">name</span>=<span class="string">"close"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å†å²è®°å½• --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">onHistoryClick (item, index) {</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯åˆ é™¤çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œåˆ é™¤æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.isDeleteShow) {</span><br><span class="line">    <span class="built_in">this</span>.searchHistories.splice(index, <span class="number">1</span>)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// å¦åˆ™æ‰§è¡Œæœç´¢æ“ä½œ</span></span><br><span class="line">    <span class="built_in">this</span>.onSearch(item)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ•°æ®æŒä¹…åŒ–"><a href="#æ•°æ®æŒä¹…åŒ–" class="headerlink" title="æ•°æ®æŒä¹…åŒ–"></a>æ•°æ®æŒä¹…åŒ–</h3><p>1ã€åˆ©ç”¨ watch ç›‘è§†ç»Ÿä¸€å­˜å‚¨æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">watch: {</span><br><span class="line">  searchHistories (val) {</span><br><span class="line">    <span class="comment">// åŒæ­¥åˆ°æœ¬åœ°å­˜å‚¨</span></span><br><span class="line">    setItem(<span class="string">'serach-histories'</span>, val)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>



<p>2ã€åˆå§‹åŒ–çš„æ—¶å€™ä»æœ¬åœ°å­˜å‚¨è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">searchHistories</span>: getItem(<span class="string">'serach-histories'</span>) || [],</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h1 id="ä¸ƒã€æ–‡ç« è¯¦æƒ…"><a href="#ä¸ƒã€æ–‡ç« è¯¦æƒ…" class="headerlink" title="ä¸ƒã€æ–‡ç« è¯¦æƒ…"></a>ä¸ƒã€æ–‡ç« è¯¦æƒ…</h1><h2 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-2"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-2" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h2><p>1ã€åˆ›å»º <code>views/article/index.vue</code> ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-container"</span>&gt;</span>æ–‡ç« è¯¦æƒ…<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">articleId</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: [<span class="built_in">Number</span>, <span class="built_in">String</span>],</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶åå°†è¯¥é¡µé¢é…ç½®åˆ°æ ¹çº§è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/article/:articleId'</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'article'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/article'</span>),</span><br><span class="line">  <span class="comment">// å°†è·¯ç”±åŠ¨æ€å‚æ•°æ˜ å°„åˆ°ç»„ä»¶çš„ props ä¸­ï¼Œæ›´æ¨èè¿™ç§åšæ³•</span></span><br><span class="line">  <span class="attr">props</span>: <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><a href="https://router.vuejs.org/zh/guide/essentials/passing-props.html">å®˜æ–¹æ–‡æ¡£ï¼šè·¯ç”± props ä¼ å‚</a></p>
</blockquote>
<h2 id="é¡µé¢å¸ƒå±€-4"><a href="#é¡µé¢å¸ƒå±€-4" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><p>ä½¿ç”¨åˆ°çš„ Vant ä¸­çš„ç»„ä»¶ï¼š</p>
<ul>
<li><p><a href="https://youzan.github.io/vant/#/zh-CN/nav-bar">NavBar å¯¼èˆªæ </a></p>
</li>
<li><p><a href="https://youzan.github.io/vant/#/zh-CN/loading">Loading åŠ è½½</a></p>
</li>
<li><p><a href="https://youzan.github.io/vant/#/zh-CN/cell">Cell å•å…ƒæ ¼</a></p>
</li>
<li><p><a href="https://youzan.github.io/vant/#/zh-CN/button">Button æŒ‰é’®</a></p>
</li>
<li><p><a href="https://youzan.github.io/vant/#/zh-CN/image">Image å›¾ç‰‡</a></p>
</li>
<li><p><a href="https://youzan.github.io/vant/#/zh-CN/divider">Divider åˆ†å‰²çº¿</a></p>
</li>
<li><p><a href="https://youzan.github.io/vant/#/zh-CN/icon">Icon å›¾æ ‡</a></p>
</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"page-nav-bar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">left-arrow</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"é»‘é©¬å¤´æ¡"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main-wrap"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- åŠ è½½ä¸­ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-loading</span></span></span><br><span class="line"><span class="tag">          <span class="attr">color</span>=<span class="string">"#3296fa"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">vertical</span></span></span><br><span class="line"><span class="tag">        &gt;</span>åŠ è½½ä¸­<span class="tag">&lt;/<span class="name">van-loading</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- /åŠ è½½ä¸­ --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- åŠ è½½å®Œæˆ-æ–‡ç« è¯¦æƒ… --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-detail"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ–‡ç« æ ‡é¢˜ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"article-title"</span>&gt;</span>è¿™æ˜¯æ–‡ç« æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /æ–‡ç« æ ‡é¢˜ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">class</span>=<span class="string">"user-info"</span> <span class="attr">center</span> <span class="attr">:border</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">round</span></span></span><br><span class="line"><span class="tag">            <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"user-name"</span>&gt;</span>é»‘é©¬å¤´æ¡å·<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span> <span class="attr">class</span>=<span class="string">"publish-date"</span>&gt;</span>14å°æ—¶å‰<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"follow-btn"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"info"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">color</span>=<span class="string">"#3296fa"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">round</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">icon</span>=<span class="string">"plus"</span></span></span><br><span class="line"><span class="tag">          &gt;</span>å…³æ³¨<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- &lt;van-button</span></span><br><span class="line"><span class="comment">            class="follow-btn"</span></span><br><span class="line"><span class="comment">            round</span></span><br><span class="line"><span class="comment">            size="small"</span></span><br><span class="line"><span class="comment">          &gt;å·²å…³æ³¨&lt;/van-button&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ–‡ç« å†…å®¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-content"</span>&gt;</span>è¿™æ˜¯æ–‡ç« å†…å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-divider</span>&gt;</span>æ­£æ–‡ç»“æŸ<span class="tag">&lt;/<span class="name">van-divider</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- /åŠ è½½å®Œæˆ-æ–‡ç« è¯¦æƒ… --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- åŠ è½½å¤±è´¥ï¼š404 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"error-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"failure"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è¯¥èµ„æºä¸å­˜åœ¨æˆ–å·²åˆ é™¤ï¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- /åŠ è½½å¤±è´¥ï¼š404 --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- åŠ è½½å¤±è´¥ï¼šå…¶å®ƒæœªçŸ¥é”™è¯¯ï¼ˆä¾‹å¦‚ç½‘ç»œåŸå› æˆ–æœåŠ¡ç«¯å¼‚å¸¸ï¼‰ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"error-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"failure"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å†…å®¹åŠ è½½å¤±è´¥ï¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"retry-btn"</span>&gt;</span>ç‚¹å‡»é‡è¯•<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- /åŠ è½½å¤±è´¥ï¼šå…¶å®ƒæœªçŸ¥é”™è¯¯ï¼ˆä¾‹å¦‚ç½‘ç»œåŸå› æˆ–æœåŠ¡ç«¯å¼‚å¸¸ï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨åŒºåŸŸ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-bottom"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"comment-btn"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>å†™è¯„è®º<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"comment-o"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">info</span>=<span class="string">"123"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">color</span>=<span class="string">"#777"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">color</span>=<span class="string">"#777"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"star-o"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">color</span>=<span class="string">"#777"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"good-job-o"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"share"</span> <span class="attr">color</span>=<span class="string">"#777777"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /åº•éƒ¨åŒºåŸŸ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">articleId</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: [<span class="built_in">Number</span>, <span class="built_in">String</span>],</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.article-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.main-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">top</span>: <span class="number">92px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">bottom</span>: <span class="number">88px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">overflow-y</span>: scroll;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.article-detail</span> {</span></span><br><span class="line"><span class="css">    <span class="selector-class">.article-title</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">padding</span>: <span class="number">50px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#3a3a3a</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.user-info</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-right</span>: <span class="number">17px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.van-cell__label</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.user-name</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#3a3a3a</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.publish-date</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">23px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#b7b7b7</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.follow-btn</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">170px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">58px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.article-content</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">padding</span>: <span class="number">55px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">      /deep/ <span class="selector-tag">p</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">text-align</span>: justify;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.loading-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">200px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.error-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">200px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">122px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#b4b4b4</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#666666</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin</span>: <span class="number">33px</span> <span class="number">0</span> <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.retry-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">280px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">line-height</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#c3c3c3</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#666666</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.article-bottom</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: space-around;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">88px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#d8d8d8</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.comment-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">282px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#eeeeee</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">line-height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#a7a7a7</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.van-info</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#e22829</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜"><a href="#å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜" class="headerlink" title="å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜"></a>å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜</h2><p>ä¹‹æ‰€ä»¥è¯·æ±‚æ–‡ç« è¯¦æƒ…è¿”å› 404 æ˜¯å› ä¸ºæˆ‘ä»¬è¯·æ±‚å‘é€çš„æ–‡ç«  ID ï¼ˆarticle.art_idï¼‰ä¸æ­£ç¡®ã€‚</p>
<p>JavaScript èƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´åœ¨<code>-2^53</code>åˆ°<code>2^53</code>ä¹‹é—´ï¼ˆä¸å«ä¸¤ä¸ªç«¯ç‚¹ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºè¿™ä¸ªå€¼ï¼Œè¿™ä½¿å¾— JavaScript ä¸é€‚åˆè¿›è¡Œç§‘å­¦å’Œé‡‘èæ–¹é¢çš„ç²¾ç¡®è®¡ç®—ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) <span class="comment">// 9007199254740992</span></span><br><span class="line"></span><br><span class="line"><span class="number">9007199254740992</span>  <span class="comment">// 9007199254740992</span></span><br><span class="line"><span class="number">9007199254740993</span>  <span class="comment">// 9007199254740992</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) === <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) + <span class="number">1</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¶…å‡º 2 çš„ 53 æ¬¡æ–¹ä¹‹åï¼Œä¸€ä¸ªæ•°å°±ä¸ç²¾ç¡®äº†ã€‚<br>ES6 å¼•å…¥äº†<code>Number.MAX_SAFE_INTEGER</code>å’Œ<code>Number.MIN_SAFE_INTEGER</code>è¿™ä¸¤ä¸ªå¸¸é‡ï¼Œç”¨æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´çš„ä¸Šä¸‹é™ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">Number</span>.MAX_SAFE_INTEGER === <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) - <span class="number">1</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.MAX_SAFE_INTEGER === <span class="number">9007199254740991</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>.MIN_SAFE_INTEGER === -<span class="built_in">Number</span>.MAX_SAFE_INTEGER</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.MIN_SAFE_INTEGER === -<span class="number">9007199254740991</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ° JavaScript èƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æé™ã€‚</p>
<p>åç«¯è¿”å›çš„æ•°æ®ä¸€èˆ¬éƒ½æ˜¯ <strong>JSON æ ¼å¼çš„å­—ç¬¦ä¸²</strong>ã€‚</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">'{ <span class="attr">"id"</span>: <span class="number">9007199254740995</span>, <span class="attr">"name"</span>: <span class="string">"Jack"</span>, <span class="attr">"age"</span>: <span class="number">18</span> }'</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœè¿™ä¸ªå­—ç¬¦ä¸åšä»»ä½•å¤„ç†ï¼Œä½ èƒ½æ–¹ä¾¿çš„è·å–åˆ°å­—ç¬¦ä¸²ä¸­çš„æŒ‡å®šæ•°æ®å—ï¼Ÿéå¸¸éº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æŠŠå®ƒè½¬æ¢ä¸º JavaScript å¯¹è±¡æ¥ä½¿ç”¨å°±å¾ˆæ–¹ä¾¿äº†ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ axios ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨æ•°æ®ï¼Œå®ƒä¼šåœ¨å†…éƒ¨ä½¿ç”¨ <code>JSON.parse()</code> æŠŠåç«¯è¿”å›çš„æ•°æ®è½¬ä¸º JavaScript å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// { id: 9007199254740996, name: 'Jack', age: 18 }</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'{ "id": 9007199254740995, "name": "Jack", "age": 18 }'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œè¶…å‡ºå®‰å…¨æ•´æ•°èŒƒå›´çš„ id æ— æ³•ç²¾ç¡®è¡¨ç¤ºï¼Œè¿™ä¸ªé—®é¢˜å¹¶ä¸æ˜¯ axios çš„é”™ã€‚</p>
<p>äº†è§£äº†ä»€ä¹ˆæ˜¯å¤§æ•´æ•°çš„æ¦‚å¿µï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯å¦‚ä½•è§£å†³ï¼Ÿ</p>
<p><a href="https://github.com/sidorares/json-bigint">json-bigint</a> æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬å¾ˆå¥½çš„å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä½¿ç”¨å®ƒçš„ç¬¬ä¸€æ­¥å°±æ˜¯æŠŠå®ƒå®‰è£…åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">npm i json-bigint</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢æ˜¯ä½¿ç”¨å®ƒçš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> jsonStr = <span class="string">'{ "art_id": 1245953273786007552 }'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(jsonStr)) <span class="comment">// 1245953273786007600</span></span><br><span class="line"><span class="comment">// JSON.stringify()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// JSONBig å¯ä»¥å¤„ç†æ•°æ®ä¸­è¶…å‡º JavaScript å®‰å…¨æ•´æ•°èŒƒå›´çš„é—®é¢˜</span></span><br><span class="line"><span class="built_in">console</span>.log(JSONBig.parse(jsonStr)) <span class="comment">// æŠŠ JSON æ ¼å¼çš„å­—ç¬¦ä¸²è½¬ä¸º JavaScript å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨çš„æ—¶å€™éœ€è¦æŠŠ BigNumber ç±»å‹çš„æ•°æ®è½¬ä¸ºå­—ç¬¦ä¸²æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="built_in">console</span>.log(JSONBig.parse(jsonStr).art_id.toString()) <span class="comment">// 1245953273786007552</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(JSONBig.parse(jsonStr)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(JSONBig.stringify(JSONBig.parse(jsonStr))) <span class="comment">// æŠŠ JavaScript å¯¹è±¡ è½¬ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²è½¬</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582099315865-5e805425-7abf-4cf2-9df3-acc2ef8f9bb9.png" alt="image.png"></p>
<blockquote>
<p>json-bigint ä¼šæŠŠè¶…å‡º JS å®‰å…¨æ•´æ•°èŒƒå›´çš„æ•°å­—è½¬ä¸ºä¸€ä¸ª BigNumber ç±»å‹çš„å¯¹è±¡ï¼Œå¯¹è±¡æ•°æ®æ˜¯å®ƒå†…éƒ¨çš„ä¸€ä¸ªç®—æ³•å¤„ç†ä¹‹åçš„ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™è½¬ä¸ºå­—ç¬¦ä¸²æ¥ä½¿ç”¨ã€‚</p>
</blockquote>
<p>é€šè¿‡ Axios è¯·æ±‚å¾—åˆ°çš„æ•°æ®éƒ½æ˜¯ Axios å¤„ç†ï¼ˆJSON.parseï¼‰ä¹‹åçš„ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ Axios æ‰§è¡Œå¤„ç†ä¹‹å‰æ‰‹åŠ¨ä½¿ç”¨ json-bigint æ¥è§£æå¤„ç†ã€‚Axios æä¾›äº†è‡ªå®šä¹‰å¤„ç†åŸå§‹åç«¯è¿”å›æ•°æ®çš„ APIï¼š<code>transformResponse</code> ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jsonBig <span class="keyword">from</span> <span class="string">'json-bigint'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">'{ "value" : 9223372036854775807, "v2": 123 }'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(jsonBig.parse(json))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">'http://ttapi.research.itcast.cn/'</span>, <span class="comment">// æ¥å£åŸºç¡€è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// transformResponse å…è®¸è‡ªå®šä¹‰åŸå§‹çš„å“åº”æ•°æ®ï¼ˆå­—ç¬¦ä¸²ï¼‰</span></span><br><span class="line">  <span class="attr">transformResponse</span>: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">      <span class="comment">// å¦‚æœè½¬æ¢æˆåŠŸåˆ™è¿”å›è½¬æ¢çš„æ•°æ®ç»“æœ</span></span><br><span class="line">      <span class="keyword">return</span> jsonBig.parse(data)</span><br><span class="line">    } <span class="keyword">catch</span> (err) {</span><br><span class="line">      <span class="comment">// å¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™åŒ…è£…ä¸ºç»Ÿä¸€æ•°æ®æ ¼å¼å¹¶è¿”å›</span></span><br><span class="line">      <span class="keyword">return</span> {</span><br><span class="line">        data</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }]</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ‰©å±•ï¼šES2020 BigInt</p>
<p>ES2020 å¼•å…¥äº†ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ BigIntï¼ˆå¤§æ•´æ•°ï¼‰ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚BigInt åªç”¨æ¥è¡¨ç¤ºæ•´æ•°ï¼Œæ²¡æœ‰ä½æ•°çš„é™åˆ¶ï¼Œä»»ä½•ä½æ•°çš„æ•´æ•°éƒ½å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt</a></li>
<li><a href="http://es6.ruanyifeng.com/#docs/number#BigInt-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">http://es6.ruanyifeng.com/#docs/number#BigInt-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B</a></li>
</ul>
</blockquote>
<h2 id="å±•ç¤ºæ–‡ç« è¯¦æƒ…"><a href="#å±•ç¤ºæ–‡ç« è¯¦æƒ…" class="headerlink" title="å±•ç¤ºæ–‡ç« è¯¦æƒ…"></a>å±•ç¤ºæ–‡ç« è¯¦æƒ…</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>ä¸€ã€è¯·æ±‚å¹¶å±•ç¤ºæ–‡ç« è¯¦æƒ…</p>
<p>1ã€åœ¨ <code>api/article.js</code> ä¸­æ–°å¢å°è£…æ¥å£æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ® id è·å–æŒ‡å®šæ–‡ç« </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getArticleById = <span class="function"><span class="params">articleId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/articles/<span class="subst">${articleId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç»„ä»¶ä¸­è°ƒç”¨è·å–æ–‡ç« è¯¦æƒ…</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">+ <span class="keyword">import</span> { getArticleById } <span class="keyword">from</span> <span class="string">'@/api/article'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'ArticlePage'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {</span><br><span class="line">    <span class="attr">articleId</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">+      article: {} <span class="comment">// æ–‡ç« è¯¦æƒ…</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">  created () {</span><br><span class="line">+    <span class="built_in">this</span>.loadArticle()</span><br><span class="line">  },</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">+++    <span class="keyword">async</span> loadArticle () {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getArticleById(<span class="built_in">this</span>.articleId)</span><br><span class="line">        <span class="built_in">this</span>.article = data.data</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<h2 id="å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€"><a href="#å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€" class="headerlink" title="å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€"></a>å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€</h2><p>éœ€æ±‚ï¼š</p>
<ul>
<li>åŠ è½½ä¸­ï¼Œæ˜¾ç¤º loading</li>
<li>åŠ è½½æˆåŠŸï¼Œæ˜¾ç¤ºæ–‡ç« è¯¦æƒ…</li>
<li>åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤º<ul>
<li>å¦‚æœ 404ï¼Œæç¤ºèµ„æºä¸å­˜åœ¨</li>
<li>å…¶å®ƒçš„ï¼Œæç¤ºåŠ è½½å¤±è´¥ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»é‡è¯•é‡æ–°åŠ è½½</li>
</ul>
</li>
</ul>
<h2 id="å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼"><a href="#å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼" class="headerlink" title="å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼"></a>å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼</h2><p>æ–‡ç« æ­£æ–‡åŒ…æ‹¬å„ç§æ•°æ®ï¼šæ®µè½ã€æ ‡é¢˜ã€åˆ—è¡¨ã€é“¾æ¥ã€å›¾ç‰‡ã€è§†é¢‘ç­‰èµ„æºã€‚</p>
<ul>
<li>å°† <a href="https://github.com/sindresorhus/github-markdown-css">github-markdown-css</a> æ ·å¼æ–‡ä»¶ä¸‹è½½åˆ°é¡¹ç›®ä¸­</li>
<li>é…ç½®ä¸è¦è½¬æ¢æ ·å¼æ–‡ä»¶ä¸­çš„å­—å·</li>
</ul>
<h2 id="å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ"><a href="#å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ" class="headerlink" title="å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ"></a>å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ</h2><p>ä¸€ã€<a href="https://youzan.github.io/vant/#/zh-CN/image-preview">ImagePreview å›¾ç‰‡é¢„è§ˆ</a> çš„ä½¿ç”¨</p>
<p>äºŒã€å¤„ç†å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ</p>
<p>æ€è·¯ï¼š</p>
<p>1ã€ä»æ–‡ç« å†…å®¹ä¸­è·å–åˆ°æ‰€æœ‰çš„ img DOM èŠ‚ç‚¹</p>
<p>2ã€è·å–æ–‡ç« å†…å®¹ä¸­æ‰€æœ‰çš„å›¾ç‰‡åœ°å€</p>
<p>3ã€éå†æ‰€æœ‰ img èŠ‚ç‚¹ï¼Œç»™æ¯ä¸ªèŠ‚ç‚¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>4ã€åœ¨ img ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œè°ƒç”¨ ImagePreview é¢„è§ˆ</p>
<h2 id="å…³æ³¨ç”¨æˆ·"><a href="#å…³æ³¨ç”¨æˆ·" class="headerlink" title="å…³æ³¨ç”¨æˆ·"></a>å…³æ³¨ç”¨æˆ·</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­<ul>
<li>å¦‚æœå·²å…³æ³¨ï¼Œåˆ™å–æ¶ˆå…³æ³¨</li>
<li>å¦‚æœæ²¡æœ‰å…³æ³¨ï¼Œåˆ™æ·»åŠ å…³æ³¨</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢æ˜¯å…·ä½“å®ç°ã€‚</p>
<h3 id="è§†å›¾å¤„ç†"><a href="#è§†å›¾å¤„ç†" class="headerlink" title="è§†å›¾å¤„ç†"></a>è§†å›¾å¤„ç†</h3><h3 id="åŠŸèƒ½å¤„ç†"><a href="#åŠŸèƒ½å¤„ç†" class="headerlink" title="åŠŸèƒ½å¤„ç†"></a>åŠŸèƒ½å¤„ç†</h3><ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è°ƒç”¨</li>
<li>è§†å›¾æ›´æ–°</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ å…³æ³¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addFollow = <span class="function"><span class="params">userId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/followings'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      <span class="attr">target</span>: userId</span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆå…³æ³¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteFollow = <span class="function"><span class="params">userId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/user/followings/<span class="subst">${userId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™å…³æ³¨/å–æ¶ˆå…³æ³¨æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>3ã€åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { addFollow, deleteFollow } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onFollow () {</span><br><span class="line">  <span class="comment">// å¼€å¯æŒ‰é’®çš„ loading çŠ¶æ€</span></span><br><span class="line">  <span class="built_in">this</span>.isFollowLoading = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœå·²å…³æ³¨ï¼Œåˆ™å–æ¶ˆå…³æ³¨</span></span><br><span class="line">    <span class="keyword">const</span> authorId = <span class="built_in">this</span>.article.aut_id</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.article.is_followed) {</span><br><span class="line">      <span class="keyword">await</span> deleteFollow(authorId)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// å¦åˆ™æ·»åŠ å…³æ³¨</span></span><br><span class="line">      <span class="keyword">await</span> addFollow(authorId)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°è§†å›¾</span></span><br><span class="line">    <span class="built_in">this</span>.article.is_followed = !<span class="built_in">this</span>.article.is_followed</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'æ“ä½œå¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…³é—­æŒ‰é’®çš„ loading çŠ¶æ€</span></span><br><span class="line">  <span class="built_in">this</span>.isFollowLoading = <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h3 id="loading-æ•ˆæœ"><a href="#loading-æ•ˆæœ" class="headerlink" title="loading æ•ˆæœ"></a>loading æ•ˆæœ</h3><p>ä¸¤ä¸ªä½œç”¨ï¼š</p>
<ul>
<li>äº¤äº’åé¦ˆ</li>
<li>é˜²æ­¢ç½‘ç»œæ…¢ç”¨æˆ·å¤šæ¬¡ç‚¹å‡»æŒ‰é’®å¯¼è‡´é‡å¤è§¦å‘ç‚¹å‡»äº‹ä»¶</li>
</ul>
<h3 id="ç»„ä»¶å°è£…"><a href="#ç»„ä»¶å°è£…" class="headerlink" title="ç»„ä»¶å°è£…"></a>ç»„ä»¶å°è£…</h3><h2 id="æ–‡ç« æ”¶è—"><a href="#æ–‡ç« æ”¶è—" class="headerlink" title="æ–‡ç« æ”¶è—"></a>æ–‡ç« æ”¶è—</h2><blockquote>
<p>è¯¥åŠŸèƒ½å’Œå…³æ³¨ç”¨æˆ·çš„å¤„ç†æ€è·¯å‡ ä¹ä¸€æ ·ï¼Œå»ºè®®ç”±å­¦å‘˜è‡ªå·±ç¼–å†™ã€‚</p>
</blockquote>
<h3 id="å°è£…ç»„ä»¶"><a href="#å°è£…ç»„ä»¶" class="headerlink" title="å°è£…ç»„ä»¶"></a>å°è£…ç»„ä»¶</h3><h3 id="å¤„ç†è§†å›¾"><a href="#å¤„ç†è§†å›¾" class="headerlink" title="å¤„ç†è§†å›¾"></a>å¤„ç†è§†å›¾</h3><h3 id="åŠŸèƒ½å¤„ç†-1"><a href="#åŠŸèƒ½å¤„ç†-1" class="headerlink" title="åŠŸèƒ½å¤„ç†"></a>åŠŸèƒ½å¤„ç†</h3><p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™æ”¶è—æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>å¦‚æœå·²ç»æ”¶è—äº†ï¼Œåˆ™å–æ¶ˆæ”¶è—</li>
<li>å¦‚æœæ²¡æœ‰æ”¶è—ï¼Œåˆ™æ·»åŠ æ”¶è—</li>
</ul>
<p>ä¸‹é¢æ˜¯å…·ä½“å®ç°ã€‚</p>
<p>1ã€åœ¨ <code>api/article.js</code> æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ”¶è—æ–‡ç« </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addCollect = <span class="function"><span class="params">target</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/article/collections'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      target</span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆæ”¶è—æ–‡ç« </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteCollect = <span class="function"><span class="params">target</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/article/collections/<span class="subst">${target}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™æ”¶è—æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>3ã€å¤„ç†å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onCollect () {</span><br><span class="line">  <span class="comment">// è¿™é‡Œ loading ä¸ä»…ä»…æ˜¯ä¸ºäº†äº¤äº’æç¤ºï¼Œæ›´é‡è¦çš„æ˜¯è¯·æ±‚æœŸé—´ç¦ç”¨èƒŒæ™¯ç‚¹å‡»åŠŸèƒ½ï¼Œé˜²æ­¢ç”¨æˆ·ä¸æ–­çš„æ“ä½œç•Œé¢å‘å‡ºè¯·æ±‚</span></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'æ“ä½œä¸­...'</span>,</span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœå·²æ”¶è—ï¼Œåˆ™å–æ¶ˆæ”¶è—</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.article.is_collected) {</span><br><span class="line">      <span class="keyword">await</span> deleteCollect(<span class="built_in">this</span>.articleId)</span><br><span class="line">      <span class="comment">// this.article.is_collected = false</span></span><br><span class="line">      <span class="built_in">this</span>.$toast.success(<span class="string">'å–æ¶ˆæ”¶è—'</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æ·»åŠ æ”¶è—</span></span><br><span class="line">      <span class="keyword">await</span> addCollect(<span class="built_in">this</span>.articleId)</span><br><span class="line">      <span class="comment">// this.article.is_collected = true</span></span><br><span class="line">      <span class="built_in">this</span>.$toast.success(<span class="string">'æ”¶è—æˆåŠŸ'</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">this</span>.article.is_collected = !<span class="built_in">this</span>.article.is_collected</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'æ“ä½œå¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ–‡ç« ç‚¹èµ"><a href="#æ–‡ç« ç‚¹èµ" class="headerlink" title="æ–‡ç« ç‚¹èµ"></a>æ–‡ç« ç‚¹èµ</h2><blockquote>
<p>è¯¥åŠŸèƒ½å’Œå…³æ³¨ç”¨æˆ·çš„å¤„ç†æ€è·¯å‡ ä¹ä¸€æ ·ï¼Œå»ºè®®ç”±å­¦å‘˜è‡ªå·±ç¼–å†™ã€‚</p>
</blockquote>
<p>article ä¸­çš„ <code>attitude</code> è¡¨ç¤ºç”¨æˆ·å¯¹æ–‡ç« çš„æ€åº¦</p>
<ul>
<li><code>-1</code> æ— æ€åº¦</li>
<li><code>0</code> ä¸å–œæ¬¢</li>
<li><code>1</code> å·²ç‚¹èµ</li>
</ul>
<p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™ç‚¹èµæŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>å¦‚æœå·²ç»ç‚¹èµï¼Œåˆ™è¯·æ±‚å–æ¶ˆç‚¹èµ</li>
<li>å¦‚æœæ²¡æœ‰ç‚¹èµï¼Œåˆ™è¯·æ±‚ç‚¹èµ</li>
</ul>
<p>1ã€æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç‚¹èµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addLike = <span class="function"><span class="params">articleId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/article/likings'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      <span class="attr">target</span>: articleId</span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆç‚¹èµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteLike = <span class="function"><span class="params">articleId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/article/likings/<span class="subst">${articleId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™ç‚¹èµæŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>3ã€å¤„ç†å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onLike () {</span><br><span class="line">  <span class="comment">// ä¸¤ä¸ªä½œç”¨ï¼š1ã€äº¤äº’æç¤º 2ã€é˜²æ­¢ç½‘ç»œæ…¢ç”¨æˆ·è¿ç»­ä¸æ–­çš„ç‚¹å‡»æŒ‰é’®è¯·æ±‚</span></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'æ“ä½œä¸­...'</span>,</span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœå·²ç»ç‚¹èµï¼Œåˆ™å–æ¶ˆç‚¹èµ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.article.attitude === <span class="number">1</span>) {</span><br><span class="line">      <span class="keyword">await</span> deleteLike(<span class="built_in">this</span>.articleId)</span><br><span class="line">      <span class="built_in">this</span>.article.attitude = -<span class="number">1</span></span><br><span class="line">      <span class="built_in">this</span>.$toast.success(<span class="string">'å–æ¶ˆç‚¹èµ'</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// å¦åˆ™æ·»åŠ ç‚¹èµ</span></span><br><span class="line">      <span class="keyword">await</span> addLike(<span class="built_in">this</span>.articleId)</span><br><span class="line">      <span class="built_in">this</span>.article.attitude = <span class="number">1</span></span><br><span class="line">      <span class="built_in">this</span>.$toast.success(<span class="string">'ç‚¹èµæˆåŠŸ'</span>)</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'æ“ä½œå¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="å…«ã€æ–‡ç« è¯„è®º"><a href="#å…«ã€æ–‡ç« è¯„è®º" class="headerlink" title="å…«ã€æ–‡ç« è¯„è®º"></a>å…«ã€æ–‡ç« è¯„è®º</h1><h2 id="å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨"><a href="#å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨" class="headerlink" title="å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨"></a>å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨</h2><h3 id="å‡†å¤‡ç»„ä»¶-1"><a href="#å‡†å¤‡ç»„ä»¶-1" class="headerlink" title="å‡†å¤‡ç»„ä»¶"></a>å‡†å¤‡ç»„ä»¶</h3><p>ä¸ºäº†æ›´å¥½çš„å¼€å‘å’Œç»´æŠ¤ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠæ–‡ç« è¯„è®ºå•ç‹¬å°è£…åˆ°ä¸€ä¸ªç»„ä»¶ä¸­æ¥å¤„ç†ã€‚</p>
<p>1ã€åˆ›å»º <code>src/views/article/components/article-comment.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-comments"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºåˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> <span class="attr">:key</span>=<span class="string">"item"</span> <span class="attr">:title</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">          <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">          <span class="attr">width</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: #466b9d;"</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: #363636;"</span>&gt;</span>æˆ‘å‡ºå»è·Ÿåˆ«äººè¯´æˆ‘çš„æ˜¯ã€‚ã€‚ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span>&gt;</span>3å¤©å‰<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>å›å¤<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">slot</span>=<span class="string">"right-icon"</span> <span class="attr">name</span>=<span class="string">"like-o"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºåˆ—è¡¨ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å‘å¸ƒè¯„è®º --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">class</span>=<span class="string">"publish-wrap"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è¯„è®ºå†…å®¹"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">slot</span>=<span class="string">"button"</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"info"</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å‘å¸ƒè¯„è®º --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">"ArticleComment"</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">        <span class="attr">list</span>: [], <span class="comment">// è¯„è®ºåˆ—è¡¨</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„ loading</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">finished</span>: <span class="literal">false</span> <span class="comment">// æ˜¯å¦åŠ è½½ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">      };</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¼‚æ­¥æ›´æ–°æ•°æ®</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span></span><br><span class="line"><span class="javascript">          <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.list.push(<span class="built_in">this</span>.list.length + <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">          }</span></span><br><span class="line"><span class="javascript">          <span class="comment">// åŠ è½½çŠ¶æ€ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">          <span class="comment">// æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (<span class="built_in">this</span>.list.length &gt;= <span class="number">40</span>) {</span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.finished = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">          }</span></span><br><span class="line"><span class="javascript">        }, <span class="number">500</span>);</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  };</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.publish-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-list</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-bottom</span>: <span class="number">45px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨æ–‡ç« è¯¦æƒ…é¡µé¢ä¸­åŠ è½½æ³¨å†Œæ–‡ç« è¯„è®ºå­ç»„ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> ArticleComment <span class="keyword">from</span> <span class="string">'./components/article-comment'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">components</span>: {</span><br><span class="line">    ArticleComment</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨æ–‡ç« è¯¦æƒ…é¡µé¢çš„åŠ è½½å¤±è´¥æç¤ºæ¶ˆæ¯åé¢ä½¿ç”¨æ–‡ç« è¯„è®ºå­ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–‡ç« è¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article-comment</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æ–‡ç« è¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆé¡µé¢æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20191206152846065.png" alt="image-20191206152846065"></p>
<h3 id="è·å–æ•°æ®å¹¶å±•ç¤º"><a href="#è·å–æ•°æ®å¹¶å±•ç¤º" class="headerlink" title="è·å–æ•°æ®å¹¶å±•ç¤º"></a>è·å–æ•°æ®å¹¶å±•ç¤º</h3><blockquote>
<p>æç¤ºï¼šæœ‰è¯„è®ºæ•°æ®çš„æ–‡ç«  idï¼š<code>139987</code>ã€‚</p>
</blockquote>
<p>æ­¥éª¤ï¼š</p>
<ul>
<li>å°è£…æ¥å£</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>å¤„ç†æ¨¡æ¿</li>
</ul>
<p>å®ç°ï¼š</p>
<p>1ã€åœ¨ <code>api/comment.js</code> ä¸­æ·»åŠ å°è£…è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯„è®ºæ¥å£æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">"@/utils/request"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ–‡ç« åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getComments</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"GET"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/app/v1_0/comments"</span>,</span><br><span class="line">    params</span><br><span class="line">  });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€è¯·æ±‚è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">articleComment</span>: { <span class="comment">// æ–‡ç« è¯„è®ºç›¸å…³æ•°æ®</span></span><br><span class="line">      <span class="attr">list</span>: [],</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">finished</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">offset</span>: <span class="literal">null</span>, <span class="comment">// è¯·æ±‚ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">      <span class="attr">totalCount</span>: <span class="number">0</span> <span class="comment">// æ€»æ•°æ®æ¡æ•°</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onLoad () {</span><br><span class="line">  <span class="keyword">const</span> articleComment = <span class="built_in">this</span>.articleComment</span><br><span class="line">  <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> { data } = <span class="keyword">await</span> getComments({</span><br><span class="line">    <span class="attr">type</span>: <span class="string">'a'</span>, <span class="comment">// è¯„è®ºç±»å‹ï¼Œa-å¯¹æ–‡ç« (article)çš„è¯„è®ºï¼Œc-å¯¹è¯„è®º(comment)çš„å›å¤</span></span><br><span class="line">    <span class="attr">source</span>: <span class="built_in">this</span>.articleId, <span class="comment">// æºidï¼Œæ–‡ç« idæˆ–è¯„è®ºid</span></span><br><span class="line">    <span class="attr">offset</span>: articleComment.offset, <span class="comment">// è·å–è¯„è®ºæ•°æ®çš„åç§»é‡ï¼Œå€¼ä¸ºè¯„è®ºidï¼Œè¡¨ç¤ºä»æ­¤idçš„æ•°æ®å‘åå–ï¼Œä¸ä¼ è¡¨ç¤ºä»ç¬¬ä¸€é¡µå¼€å§‹è¯»å–æ•°æ®</span></span><br><span class="line">    <span class="attr">limit</span>: <span class="number">10</span> <span class="comment">// æ¯é¡µå¤§å°</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å°†æ•°æ®æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">  <span class="keyword">const</span> { results } = data.data</span><br><span class="line">  articleComment.list.push(...results)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°æ€»æ•°æ®æ¡æ•°</span></span><br><span class="line">  articleComment.totalCount = data.data.total_count</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. å°†åŠ è½½æ›´å¤šçš„ loading è®¾ç½®ä¸º false</span></span><br><span class="line">  articleComment.loading = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4. åˆ¤æ–­æ˜¯å¦è¿˜æœ‰æ•°æ®</span></span><br><span class="line">  <span class="keyword">if</span> (results.length) {</span><br><span class="line">    articleComment.offset = data.data.last_id <span class="comment">// æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    articleComment.finished = <span class="literal">true</span> <span class="comment">// æ²¡æœ‰æ•°æ®äº†ï¼Œå…³é—­åŠ è½½æ›´å¤š</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºåˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> + <span class="attr">:key</span>=<span class="string">"item.com_id.toString()"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">round</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">      +</span></span><br><span class="line"><span class="tag">      <span class="attr">:src</span>=<span class="string">"item.aut_photo"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    + <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: #466b9d;"</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>{{ item.aut_name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      +</span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: #363636;"</span>&gt;</span>{{ item.content }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        +</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">          &gt;</span>{{ item.pubdate | relativeTime }}&lt;/span</span><br><span class="line">        &gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>å›å¤<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">slot</span>=<span class="string">"right-icon"</span> <span class="attr">name</span>=<span class="string">"like-o"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¯„è®ºåˆ—è¡¨ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡"><a href="#å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡" class="headerlink" title="å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡"></a>å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡</h3><h3 id="æ–‡ç« è¯„è®ºé¡¹"><a href="#æ–‡ç« è¯„è®ºé¡¹" class="headerlink" title="æ–‡ç« è¯„è®ºé¡¹"></a>æ–‡ç« è¯„è®ºé¡¹</h3><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">class</span>=<span class="string">"comment-item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">round</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"title-wrap"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-name"</span>&gt;</span>ç”¨æˆ·åç§°<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"like-btn"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">icon</span>=<span class="string">"good-job-o"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>èµ<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"comment-content"</span>&gt;</span>è¿™æ˜¯è¯„è®ºå†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bottom-info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-pubdate"</span>&gt;</span>4å¤©å‰<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"reply-btn"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        &gt;</span>å›å¤ 0<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.comment-item</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">72px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">72px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.title-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.user-name</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#406599</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">26px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.comment-content</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222222</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">word-break</span>: break-all;</span></span><br><span class="line"><span class="css">    <span class="attribute">text-align</span>: justify;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.comment-pubdate</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.bottom-info</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.reply-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">135px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">21px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.like-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">7px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç»‘å®šä¹‹åï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">class</span>=<span class="string">"comment-item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">round</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:src</span>=<span class="string">"comment.aut_photo"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"title-wrap"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-name"</span>&gt;</span>{{ comment.aut_name }}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"like-btn"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">icon</span>=<span class="string">"good-job-o"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>{{ comment.like_count || 'èµ' }}<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"comment-content"</span>&gt;</span>{{ comment.content }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bottom-info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-pubdate"</span>&gt;</span>{{ comment.pubdate | relativeTime }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"reply-btn"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        &gt;</span>å›å¤ {{ comment.reply_count }}<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">comment</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.comment-item</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">72px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">72px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.title-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.user-name</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#406599</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">26px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.comment-content</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222222</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">word-break</span>: break-all;</span></span><br><span class="line"><span class="css">    <span class="attribute">text-align</span>: justify;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.comment-pubdate</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.bottom-info</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.reply-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">135px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">21px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.like-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">7px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="è¯„è®ºç‚¹èµ"><a href="#è¯„è®ºç‚¹èµ" class="headerlink" title="è¯„è®ºç‚¹èµ"></a>è¯„è®ºç‚¹èµ</h2><p>1ã€åœ¨ <code>api/comment.js</code> ä¸­æ·»åŠ å°è£…ä¸¤ä¸ªæ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹è¯„è®ºæˆ–è¯„è®ºå›å¤ç‚¹èµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addCommentLike</span>(<span class="params">commentId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"POST"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/app/v1_0/comment/likings"</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      <span class="attr">target</span>: commentId</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆå¯¹è¯„è®ºæˆ–è¯„è®ºå›å¤ç‚¹èµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteCommentLike</span>(<span class="params">commentId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"DELETE"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/comment/likings/<span class="subst">${commentId}</span>`</span></span><br><span class="line">  });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶åç»™è¯„è®ºé¡¹ä¸­çš„ <code>like</code> å›¾æ ‡æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">  <span class="attr">slot</span>=<span class="string">"right-icon"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">color</span>=<span class="string">"red"</span></span></span><br><span class="line"><span class="tag">  +</span></span><br><span class="line"><span class="tag">  <span class="attr">:name</span>=<span class="string">"item.is_liking ? 'like' : 'like-o'"</span></span></span><br><span class="line"><span class="tag">  +</span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">"onCommentLike(item)"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> {</span><br><span class="line">  getComments,</span><br><span class="line">  addComment,</span><br><span class="line">+  addCommentLike,</span><br><span class="line">+  deleteCommentLike</span><br><span class="line">} <span class="keyword">from</span> <span class="string">'@/api/comment'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onCommentLike (comment) {</span><br><span class="line">  <span class="comment">// å¦‚æœå·²ç»èµäº†åˆ™å–æ¶ˆç‚¹èµ</span></span><br><span class="line">  <span class="keyword">if</span> (comment.is_liking) {</span><br><span class="line">    <span class="keyword">await</span> deleteCommentLike(comment.com_id)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰èµï¼Œåˆ™ç‚¹èµ</span></span><br><span class="line">    <span class="keyword">await</span> addCommentLike(comment.com_id)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°è§†å›¾çŠ¶æ€</span></span><br><span class="line">  comment.is_liking = !comment.is_liking</span><br><span class="line">  <span class="built_in">this</span>.$toast(<span class="string">'æ“ä½œæˆåŠŸ'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å‘å¸ƒæ–‡ç« è¯„è®º"><a href="#å‘å¸ƒæ–‡ç« è¯„è®º" class="headerlink" title="å‘å¸ƒæ–‡ç« è¯„è®º"></a>å‘å¸ƒæ–‡ç« è¯„è®º</h2><h3 id="å‡†å¤‡å¼¹å‡ºå±‚"><a href="#å‡†å¤‡å¼¹å‡ºå±‚" class="headerlink" title="å‡†å¤‡å¼¹å‡ºå±‚"></a>å‡†å¤‡å¼¹å‡ºå±‚</h3><h3 id="å°è£…ç»„ä»¶-1"><a href="#å°è£…ç»„ä»¶-1" class="headerlink" title="å°è£…ç»„ä»¶"></a>å°è£…ç»„ä»¶</h3><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"post-field"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"message"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">rows</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">autosize</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"textarea"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">maxlength</span>=<span class="string">"50"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥ç•™è¨€"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">show-word-limit</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"post-btn"</span></span></span><br><span class="line"><span class="tag">    &gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentPost'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">message</span>: <span class="string">''</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.comment-post</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">  <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">32px</span> <span class="number">0</span> <span class="number">32px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.post-field</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#f5f7f9</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.post-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#6ba3d8</span>;</span></span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">::before</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>æ­¥éª¤ï¼š</p>
<ul>
<li>æ³¨å†Œå‘å¸ƒç‚¹å‡»äº‹ä»¶</li>
<li>è¯·æ±‚æäº¤è¡¨å•</li>
<li>æ ¹æ®å“åº”ç»“æœè¿›è¡Œåç»­å¤„ç†</li>
</ul>
<p>ä¸€ã€ä½¿ç”¨å¼¹å±‚å±•ç¤ºå‘å¸ƒè¯„è®º</p>
<p>1ã€æ·»åŠ å¼¹å±‚ç»„ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isPostShow</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å‘å¸ƒæ–‡ç« è¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isPostShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å‘å¸ƒæ–‡ç« è¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æç¤ºï¼šä¸è®¾ç½®é«˜åº¦çš„æ—¶å€™ï¼Œå†…å®¹ä¼šè‡ªåŠ¨æ’‘å¼€å¼¹å±‚é«˜åº¦</p>
</blockquote>
<p>2ã€ç‚¹å‡»å‘è¯„è®ºæŒ‰é’®çš„æ—¶å€™æ˜¾ç¤ºå¼¹å±‚</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"write-btn"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">round</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">"isPostShow = true"</span></span></span><br><span class="line"><span class="tag">&gt;</span>å†™è¯„è®º<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>äºŒã€å°è£…å‘å¸ƒè¯„è®ºç»„ä»¶</p>
<p>1ã€åˆ›å»º <code>post-comment.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-comment"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"post-field"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"message"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">rows</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">autosize</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"textarea"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">maxlength</span>=<span class="string">"50"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">"ä¼˜è´¨è¯„è®ºå°†ä¼šè¢«ä¼˜å…ˆå±•ç¤º"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">show-word-limit</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"primary"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">    &gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'PostComment'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">message</span>: <span class="string">''</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.post-comment</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">align-items</span>: flex-end;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.post-field</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: <span class="number">#f5f7f9</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è¯¦æƒ…é¡µåŠ è½½æ³¨å†Œ</p>
<p>3ã€åœ¨å‘å¸ƒè¯„è®ºçš„å¼¹å±‚ä¸­ä½¿ç”¨</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å‘å¸ƒæ–‡ç« è¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isPostShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">post-comment</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å‘å¸ƒæ–‡ç« è¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‰ã€å‘å¸ƒè¯„è®º</p>
<p>1ã€åœ¨ <code>api/comment.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ è¯„è®ºæˆ–è¯„è®ºå›å¤</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addComment</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"POST"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/app/v1_0/comments"</span>,</span><br><span class="line">    data</span><br><span class="line">  });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»‘å®šè·å–æ·»åŠ è¯„è®ºçš„è¾“å…¥æ¡†æ•°æ®å¹¶ä¸”æ³¨å†Œå‘å¸ƒæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">inputComment</span>: <span class="string">''</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å‘å¸ƒè¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">class</span>=<span class="string">"publish-wrap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-field</span> + <span class="attr">v-model</span>=<span class="string">"inputComment"</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è¯„è®ºå†…å®¹"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">slot</span>=<span class="string">"button"</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"info"</span> + @<span class="attr">click</span>=<span class="string">"onAddComment"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>å‘å¸ƒ&lt;/van-button</span><br><span class="line">    &gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å‘å¸ƒè¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> {</span><br><span class="line">  getComments,</span><br><span class="line">+  addComment</span><br><span class="line">} <span class="keyword">from</span> <span class="string">'@/api/comment'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onAddComment () {</span><br><span class="line">  <span class="keyword">const</span> inputComment = <span class="built_in">this</span>.inputComment.trim()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éç©ºæ ¡éªŒ</span></span><br><span class="line">  <span class="keyword">if</span> (!inputComment.length) {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¯·æ±‚æ·»åŠ </span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> addComment({</span><br><span class="line">    <span class="attr">target</span>: <span class="built_in">this</span>.$route.params.articleId, <span class="comment">// è¯„è®ºçš„ç›®æ ‡idï¼ˆè¯„è®ºæ–‡ç« å³ä¸ºæ–‡ç« idï¼Œå¯¹è¯„è®ºè¿›è¡Œå›å¤åˆ™ä¸ºè¯„è®ºidï¼‰</span></span><br><span class="line">    <span class="attr">content</span>: inputComment <span class="comment">// è¯„è®ºå†…å®¹</span></span><br><span class="line">    <span class="comment">// art_id // æ–‡ç« idï¼Œå¯¹è¯„è®ºå†…å®¹å‘è¡¨å›å¤æ—¶ï¼Œéœ€è¦ä¼ é€’æ­¤å‚æ•°ï¼Œè¡¨æ˜æ‰€å±æ–‡ç« idã€‚å¯¹æ–‡ç« è¿›è¡Œè¯„è®ºï¼Œä¸è¦ä¼ æ­¤å‚æ•°ã€‚</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†å‘å¸ƒçš„æœ€æ–°è¯„è®ºå±•ç¤ºåˆ°åˆ—è¡¨é¡¶éƒ¨</span></span><br><span class="line">  <span class="built_in">this</span>.list.unshift(res.data.data.new_obj)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç©ºæ–‡æœ¬æ¡†</span></span><br><span class="line">  <span class="built_in">this</span>.inputComment = <span class="string">''</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¯·æ±‚å‘å¸ƒ"><a href="#è¯·æ±‚å‘å¸ƒ" class="headerlink" title="è¯·æ±‚å‘å¸ƒ"></a>è¯·æ±‚å‘å¸ƒ</h3><p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>æ³¨å†Œå‘å¸ƒç‚¹å‡»äº‹ä»¶<ul>
<li>è¯·æ±‚å‘å¸ƒ</li>
<li>æˆåŠŸï¼šå°†å‘å¸ƒçš„å†…å®¹å±•ç¤ºåˆ°åˆ—è¡¨ä¸­</li>
<li>å¤±è´¥ï¼šæç¤ºå¤±è´¥</li>
</ul>
</li>
</ul>
<p>1ã€å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘å¸ƒè¯„è®º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addComment = <span class="function"><span class="params">data</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/comments'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p>2ã€ç»™å‘å¸ƒæŒ‰é’®ç‚¹å‡»äº‹ä»¶</p>
<p>3ã€äº‹ä»¶å¤„ç†å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onAddComment () {</span><br><span class="line">  <span class="comment">// 1. æ‹¿åˆ°æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> postMessage = <span class="built_in">this</span>.postMessage</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éç©ºæ ¡éªŒ</span></span><br><span class="line">  <span class="keyword">if</span> (!postMessage) {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'å‘å¸ƒä¸­...'</span>,</span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// 2. è¯·æ±‚æäº¤</span></span><br><span class="line">    <span class="keyword">const</span> { data } = <span class="keyword">await</span> addComment({</span><br><span class="line">      <span class="attr">target</span>: <span class="built_in">this</span>.articleId, <span class="comment">// è¯„è®ºçš„ç›®æ ‡idï¼ˆè¯„è®ºæ–‡ç« å³ä¸ºæ–‡ç« idï¼Œå¯¹è¯„è®ºè¿›è¡Œå›å¤åˆ™ä¸ºè¯„è®ºidï¼‰</span></span><br><span class="line">      <span class="attr">content</span>: postMessage</span><br><span class="line">      <span class="comment">// art_id: // æ–‡ç« idï¼Œå¯¹è¯„è®ºå†…å®¹å‘è¡¨å›å¤æ—¶ï¼Œéœ€è¦ä¼ é€’æ­¤å‚æ•°ï¼Œè¡¨æ˜æ‰€å±æ–‡ç« idã€‚å¯¹æ–‡ç« è¿›è¡Œè¯„è®ºï¼Œä¸è¦ä¼ æ­¤å‚æ•°ã€‚</span></span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­å‘å¸ƒè¯„è®ºçš„å¼¹å±‚</span></span><br><span class="line">    <span class="built_in">this</span>.isPostShow = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æœ€æ–°å‘å¸ƒçš„è¯„è®ºå±•ç¤ºåˆ°åˆ—è¡¨çš„é¡¶éƒ¨</span></span><br><span class="line">    <span class="built_in">this</span>.articleComment.list.unshift(data.data.new_obj)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°æ–‡ç« è¯„è®ºçš„æ€»æ•°é‡</span></span><br><span class="line">    <span class="built_in">this</span>.articleComment.totalCount++</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºæ–‡æœ¬æ¡†</span></span><br><span class="line">    <span class="built_in">this</span>.postMessage = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.$toast.success(<span class="string">'å‘å¸ƒæˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'å‘å¸ƒå¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‘å¸ƒæˆåŠŸå¤„ç†"><a href="#å‘å¸ƒæˆåŠŸå¤„ç†" class="headerlink" title="å‘å¸ƒæˆåŠŸå¤„ç†"></a>å‘å¸ƒæˆåŠŸå¤„ç†</h3><h2 id="è¯„è®ºå›å¤"><a href="#è¯„è®ºå›å¤" class="headerlink" title="è¯„è®ºå›å¤"></a>è¯„è®ºå›å¤</h2><h3 id="å‡†å¤‡å›å¤å¼¹å±‚"><a href="#å‡†å¤‡å›å¤å¼¹å±‚" class="headerlink" title="å‡†å¤‡å›å¤å¼¹å±‚"></a>å‡†å¤‡å›å¤å¼¹å±‚</h3><p>ä¸€ã€åœ¨è¯¦æƒ…é¡µä¸­ä½¿ç”¨å¼¹å±‚ç”¨æ¥å±•ç¤ºæ–‡ç« çš„å›å¤</p>
<p>1ã€åœ¨ data ä¸­æ·»åŠ æ•°æ®ç”¨æ¥æ§åˆ¶å±•ç¤ºå›å¤å¼¹å±‚çš„æ˜¾ç¤ºçŠ¶æ€</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isReplyShow</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è¯¦æƒ…é¡µä¸­æ·»åŠ ä½¿ç”¨å¼¹å±‚ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isReplyShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">"height: 95%"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  è¯„è®ºå›å¤</span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /è¯„è®ºå›å¤ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>äºŒã€å½“ç‚¹å‡»è¯„è®ºé¡¹ç»„ä»¶ä¸­çš„å›å¤æŒ‰é’®çš„æ—¶å€™å±•ç¤ºå¼¹å±‚</p>
<p>1ã€åœ¨ <code>comment-item.vue</code> ç»„ä»¶ä¸­ç‚¹å‡»å›å¤æŒ‰é’®çš„æ—¶å€™ï¼Œå¯¹å¤–å‘å¸ƒè‡ªå®šä¹‰äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;van-button</span><br><span class="line">  size="mini"</span><br><span class="line">  type="default"</span><br><span class="line">  @click="$emit('click-reply')"</span><br><span class="line">&gt;å›å¤ {{ comment.reply_count }}&lt;/van-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è¯¦æƒ…é¡µç»„ä»¶ä¸­ä½¿ç”¨çš„ä½ç½®ç›‘å¬å¤„ç†</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">comment-item</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">"(comment, index) in articleComment.list"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:comment</span>=<span class="string">"comment"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click-reply</span>=<span class="string">"isReplyShow = true"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚"><a href="#ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚" class="headerlink" title="ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚"></a>ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚</h3><h3 id="å°è£…å†…å®¹ç»„ä»¶"><a href="#å°è£…å†…å®¹ç»„ä»¶" class="headerlink" title="å°è£…å†…å®¹ç»„ä»¶"></a>å°è£…å†…å®¹ç»„ä»¶</h3><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-reply"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">:title</span>=<span class="string">"`${comment.reply_count}æ¡å›å¤`"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"cross"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$emit('click-close')"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ‰€æœ‰å›å¤"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /åº•éƒ¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentReply'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹"><a href="#ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹" class="headerlink" title="ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹"></a>ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹</h3><h3 id="å¤„ç†å¤´éƒ¨"><a href="#å¤„ç†å¤´éƒ¨" class="headerlink" title="å¤„ç†å¤´éƒ¨"></a>å¤„ç†å¤´éƒ¨</h3><h3 id="å¤„ç†å½“å‰è¯„è®ºé¡¹"><a href="#å¤„ç†å½“å‰è¯„è®ºé¡¹" class="headerlink" title="å¤„ç†å½“å‰è¯„è®ºé¡¹"></a>å¤„ç†å½“å‰è¯„è®ºé¡¹</h3><p>ä¸€ã€è®© <code>comment-reply.vue</code> ç»„ä»¶æ‹¿åˆ°ç‚¹å‡»å›å¤çš„è¯„è®ºå¯¹è±¡</p>
<p>1ã€åœ¨ <code>comment-item.vue</code> ç»„ä»¶ä¸­ç‚¹å‡»å›å¤æŒ‰é’®çš„æ—¶å€™æŠŠè¯„è®ºå¯¹è±¡ç»™ä¼ å‡ºæ¥</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">"$emit('click-reply', comment)"</span></span></span><br><span class="line"><span class="tag">&gt;</span>å›å¤ {{ comment.reply_count }}<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨æ–‡ç« è¯¦æƒ…ç»„ä»¶ä¸­æ¥æ”¶å¤„ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">currentComment</span>: {} <span class="comment">// ç‚¹å‡»å›å¤çš„é‚£ä¸ªè¯„è®ºå¯¹è±¡</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">comment-item</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">"(comment, index) in articleComment.list"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:comment</span>=<span class="string">"comment"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click-reply</span>=<span class="string">"onReplyShow"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onReplyShow (comment) {</span><br><span class="line">  <span class="comment">// å°†å­ç»„ä»¶ä¸­ä¼ ç»™æˆ‘è¯„è®ºå¯¹è±¡å­˜å‚¨åˆ°å½“å‰ç»„ä»¶</span></span><br><span class="line">  <span class="built_in">this</span>.currentComment = comment</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å±•ç¤ºè¯„è®ºå›å¤å¼¹å±‚</span></span><br><span class="line">  <span class="built_in">this</span>.isReplyShow = <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨è¯¦æƒ…ç»„ä»¶ä¸­å°† <code>currentComment</code> ä¼ é€’ç»™ <code>comment-reply.vue</code> ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isReplyShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">"height: 95%"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comment-reply</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click-close</span>=<span class="string">"isReplyShow = false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:comment</span>=<span class="string">"currentComment"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /è¯„è®ºå›å¤ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>4ã€åœ¨ <code>comment-reply.vue</code> ç»„ä»¶ä¸­å£°æ˜æ¥æ”¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">props: {</span><br><span class="line">  <span class="attr">comment</span>: {</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åä½¿ç”¨è°ƒè¯•å·¥å…·æŸ¥çœ‹ props æ•°æ®æ˜¯å¦æ¥æ”¶æ­£ç¡®ã€‚</p>
<p>äºŒã€åœ¨ <code>comment-reply.vue</code> ç»„ä»¶ä¸­å±•ç¤ºå½“å‰è¯„è®º</p>
<p>1ã€åŠ è½½æ³¨å†Œ <code>comment-item.vue</code> ç»„ä»¶</p>
<p>2ã€ä½¿ç”¨å±•ç¤º</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-reply"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">:title</span>=<span class="string">"`${comment.reply_count}æ¡å›å¤`"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"cross"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$emit('click-close')"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">comment-item</span> <span class="attr">:comment</span>=<span class="string">"comment"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /åº•éƒ¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>





<p>ä¸€ï¼šæŠŠç‚¹å‡»å›å¤çš„è¯„è®ºå¯¹è±¡ä¼ é€’ç»™è¯„è®ºå›å¤ç»„ä»¶</p>
<p>1ã€åœ¨ data ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥å­˜å‚¨ç‚¹å‡»å›å¤çš„è¯„è®ºå¯¹è±¡</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">currentComment</span>: {} <span class="comment">// å­˜å‚¨å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºå¯¹è±¡</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç‚¹å‡»å›å¤çš„å¤„ç†å‡½æ•°ä¸­è¯„è®ºå¯¹è±¡å­˜å‚¨åˆ°æ•°æ®ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> onReplyShow (comment) {</span><br><span class="line">+  <span class="built_in">this</span>.currentComment = comment</span><br><span class="line">  <span class="comment">// æ˜¾ç¤ºå›å¤çš„å¼¹å±‚</span></span><br><span class="line">  <span class="built_in">this</span>.isReplyShow = <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æŠŠå½“å‰ç»„ä»¶çš„ <code>currentComment</code> ä¼ é€’ç»™è¯„è®ºå›å¤ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isReplyShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">get-container</span>=<span class="string">"body"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">round</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:style</span>=<span class="string">"{ height: '90%' }"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">  + <span class="tag">&lt;<span class="name">comment-reply</span> <span class="attr">:comment</span>=<span class="string">"currentComment"</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- /å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>4ã€åœ¨è¯„è®ºå›å¤ç»„ä»¶ä¸­å£°æ˜ <code>props</code> æ¥æ”¶æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">props: {</span><br><span class="line">  <span class="attr">comment</span>: {</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p>æµ‹è¯•ï¼šç‚¹å‡»ä¸åŒçš„è¯„è®ºå›å¤æŒ‰é’®ï¼ŒæŸ¥çœ‹å­ç»„ä»¶ä¸­çš„ props æ•°æ® <code>comment</code> æ˜¯å¦æ˜¯å½“å‰ç‚¹å‡»å›å¤æ‰€åœ¨çš„è¯„è®ºå¯¹è±¡ã€‚</p>
<p>äºŒã€æ•°æ®ç»‘å®šï¼šåœ¨è¯„è®ºå›å¤ç»„ä»¶ä¸­å±•ç¤ºå½“å‰è¯„è®º</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">+</span><br><span class="line"><span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">:title</span>=<span class="string">"comment.reply_count + 'æ¡å›å¤'"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">slot</span>=<span class="string">"left"</span> <span class="attr">name</span>=<span class="string">"cross"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å½“å‰è¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å½“å‰è¯„è®º"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">    <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">round</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:src</span>=<span class="string">"comment.aut_photo"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  + <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: #466b9d;"</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>{{ comment.aut_name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">    +</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: #363636;"</span>&gt;</span>{{ comment.content }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      +</span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>{{ comment.pubdate | relativeTime }}&lt;/span</span><br><span class="line">      &gt;</span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"default"</span> +</span></span><br><span class="line"><span class="tag">        &gt;</span>å›å¤ {{ comment.reply_count }}&lt;/van-button</span><br><span class="line">      &gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">slot</span>=<span class="string">"right-icon"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å½“å‰è¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨"><a href="#å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨" class="headerlink" title="å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨"></a>å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨</h3><p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>å›å¤åˆ—è¡¨å’Œæ–‡ç« çš„è¯„è®ºåˆ—è¡¨å‡ ä¹æ˜¯ä¸€æ ·çš„</li>
<li>é‡ç”¨æŠŠä¹‹å‰å°è£…çš„è¯„è®ºåˆ—è¡¨</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-reply"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">:title</span>=<span class="string">"`${comment.reply_count}æ¡å›å¤`"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"cross"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$emit('click-close')"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">comment-item</span> <span class="attr">:comment</span>=<span class="string">"comment"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ‰€æœ‰å›å¤"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">comment-item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">"(comment, index) in list"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:comment</span>=<span class="string">"comment"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /åº•éƒ¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> CommentItem <span class="keyword">from</span> <span class="string">'./comment-item'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> { getComments } <span class="keyword">from</span> <span class="string">'@/api/comment'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentReply'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {</span></span><br><span class="line"><span class="javascript">    CommentItem</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">comment</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">list</span>: [],</span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">finished</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">offset</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">limit</span>: <span class="number">20</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> onLoad () {</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> { data } = <span class="keyword">await</span> getComments({</span></span><br><span class="line"><span class="javascript">        <span class="attr">type</span>: <span class="string">'c'</span>, <span class="comment">// è¯„è®ºç±»å‹ï¼Œa-å¯¹æ–‡ç« (article)çš„è¯„è®ºï¼Œc-å¯¹è¯„è®º(comment)çš„å›å¤</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">source</span>: <span class="built_in">this</span>.comment.com_id.toString(), <span class="comment">// æºidï¼Œæ–‡ç« idæˆ–è¯„è®ºid</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">offset</span>: <span class="built_in">this</span>.offset, <span class="comment">// è·å–è¯„è®ºæ•°æ®çš„åç§»é‡ï¼Œå€¼ä¸ºè¯„è®ºidï¼Œè¡¨ç¤ºä»æ­¤idçš„æ•°æ®å‘åå–ï¼Œä¸ä¼ è¡¨ç¤ºä»ç¬¬ä¸€é¡µå¼€å§‹è¯»å–æ•°æ®</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">limit</span>: <span class="built_in">this</span>.limit <span class="comment">// è·å–çš„è¯„è®ºæ•°æ®ä¸ªæ•°ï¼Œä¸ä¼ è¡¨ç¤ºé‡‡ç”¨åç«¯æœåŠ¡è®¾å®šçš„é»˜è®¤æ¯é¡µæ•°æ®é‡</span></span></span><br><span class="line"><span class="javascript">      })</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 2. å°†æ•°æ®æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> { results } = data.data</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.list.push(...results)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 3. å…³é—­ loading</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (results.length) {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.offset = data.data.last_id</span></span><br><span class="line"><span class="javascript">      } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.finished = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h3 id="è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜"><a href="#è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜" class="headerlink" title="è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜"></a>è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜</h3><p>å¼¹å±‚ç»„ä»¶ï¼š</p>
<ul>
<li>å¦‚æœåˆå§‹çš„æ¡ä»¶æ˜¯ falseï¼Œåˆ™å¼¹å±‚çš„å†…å®¹ä¸ä¼šæ¸²æŸ“</li>
<li>ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œå½“æ¡ä»¶å˜ä¸º true çš„æ—¶å€™ï¼Œå¼¹å±‚æ‰æ¸²æŸ“äº†å†…å®¹</li>
<li>ä¹‹ååˆ‡æ¢å¼¹å±‚çš„å±•ç¤ºï¼Œå¼¹å±‚åªæ˜¯é€šè¿‡ CSS æ§åˆ¶éšè—å’Œæ˜¾ç¤º</li>
</ul>
<p>å¼¹å±‚æ¸²æŸ“å‡ºæ¥ä»¥åå°±åªæ˜¯ç®€å•çš„åˆ‡æ¢æ˜¾ç¤ºå’Œéšè—ï¼Œé‡Œé¢çš„å†…å®¹ä¹Ÿä¸å†é‡æ–°æ¸²æŸ“äº†ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æˆ‘ä»¬çš„è¯„è®ºçš„å›å¤åˆ—è¡¨ä¸ä¼šåŠ¨æ€æ›´æ–°äº†ã€‚è§£å†³åŠæ³•å°±æ˜¯åœ¨æ¯æ¬¡å¼¹å±‚æ˜¾ç¤ºçš„æ—¶å€™é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isReplyShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">get-container</span>=<span class="string">"body"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">round</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:style</span>=<span class="string">"{ height: '90%' }"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comment-reply</span> <span class="attr">:comment</span>=<span class="string">"currentComment"</span> + <span class="attr">v-if</span>=<span class="string">"isReplyShow"</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- /å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‘å¸ƒå›å¤"><a href="#å‘å¸ƒå›å¤" class="headerlink" title="å‘å¸ƒå›å¤"></a>å‘å¸ƒå›å¤</h3><h1 id="ä¹ã€ç”¨æˆ·é¡µé¢"><a href="#ä¹ã€ç”¨æˆ·é¡µé¢" class="headerlink" title="ä¹ã€ç”¨æˆ·é¡µé¢"></a>ä¹ã€ç”¨æˆ·é¡µé¢</h1><blockquote>
<p>è¯¥æ¨¡å—ä½œä¸ºå­¦ç”Ÿä½œä¸šï¼Œä¸è®²è§£ï¼Œä»…ä¾›æºç å‚è€ƒã€‚</p>
</blockquote>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200111104547462.png" alt="image-20200111104547462" width="250">



<h2 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-3"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-3" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h2><p>1ã€åˆ›å»º <code>views/user/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-container"</span>&gt;</span>ç”¨æˆ·é¡µé¢<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'UserPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€é…ç½®åˆ°æ ¹è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/user/:userId'</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'user'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/user'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åè®¿é—® <code>/user/ç”¨æˆ·ID</code> æµ‹è¯•ã€‚</p>
<h2 id="é¡µé¢å¸ƒå±€-5"><a href="#é¡µé¢å¸ƒå±€-5" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"page-nav-bar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">left-arrow</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"ç”¨æˆ·å"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click-left</span>=<span class="string">"$router.back()"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-info"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"base-info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right-area"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-wrap"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>66<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>88<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å…³æ³¨<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>28<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>ç²‰ä¸<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>160<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è·èµ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"follow-btn"</span>&gt;</span>å…³æ³¨<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"label-info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bio-wrap"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>ç®€ä»‹ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è¿™æ˜¯ç”¨æˆ·ç®€ä»‹<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'UserIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">userId</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: [<span class="built_in">Number</span>, <span class="built_in">String</span>, <span class="built_in">Object</span>],</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.user-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.user-info</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">25px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.base-info</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin-bottom</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">155px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">155px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-right</span>: <span class="number">62px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.label-info</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.bio-wrap</span> {</span></span><br><span class="line"><span class="css">        <span class="selector-class">.label</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">color</span>: <span class="number">#646263</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">        <span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">color</span>: <span class="number">#212121</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.right-area</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: space-evenly;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.stats-wrap</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.stats-item</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">        <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">        <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">        <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.count</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">font-size</span>: <span class="number">26px</span>;</span></span><br><span class="line"><span class="css">          <span class="attribute">color</span>: <span class="number">#0d0a10</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">        <span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">font-size</span>: <span class="number">21px</span>;</span></span><br><span class="line"><span class="css">          <span class="attribute">color</span>: <span class="number">#9c9b9d</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.follow-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">289px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">55px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">line-height</span>: <span class="number">55px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background-color</span>: <span class="number">#6bb5ff</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">title</span>=<span class="string">"é»‘é©¬å¤´æ¡å·"</span> <span class="attr">left-arrow</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-info-container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"col1"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">          <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col2"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å…³æ³¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>ç²‰ä¸<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è·èµ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"action"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">"primary"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">            &gt;</span>ç§ä¿¡<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">            &gt;</span>ç¼–è¾‘èµ„æ–™<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>è®¤è¯ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç®€ä»‹ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç”¨æˆ·çš„ç®€ä»‹ä¿¡æ¯<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ–‡ç« åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /æ–‡ç« åˆ—è¡¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'UserPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.user-container</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.user-info-container</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">    &gt;<span class="selector-class">.row1</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.item</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      &gt;<span class="selector-class">.col1</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      &gt;<span class="selector-class">.col2</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">        <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">        <span class="attribute">justify-content</span>: space-evenly;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">70%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span>;</span></span><br><span class="line"><span class="css">        &gt;<span class="selector-class">.row1</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">          <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">        <span class="selector-class">.action</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">          <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">          <span class="selector-class">.van-button</span> {</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">45%</span>;</span></span><br><span class="line"><span class="css">          }</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å±•ç¤ºç”¨æˆ·ä¿¡æ¯"><a href="#å±•ç¤ºç”¨æˆ·ä¿¡æ¯" class="headerlink" title="å±•ç¤ºç”¨æˆ·ä¿¡æ¯"></a>å±•ç¤ºç”¨æˆ·ä¿¡æ¯</h2><p>æ­¥éª¤ï¼š</p>
<ul>
<li>å°è£…æ•°æ®æ¥å£</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯çš„æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUserById = <span class="function"><span class="params">userId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/users/<span class="subst">${userId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç”¨æˆ·é¡µé¢ä¸­è¯·æ±‚è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">+ <span class="keyword">import</span> { getUserById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'UserPage'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {},</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">+      user: {} <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">  created () {</span><br><span class="line">+    <span class="built_in">this</span>.loadUser()</span><br><span class="line">  },</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">+++    <span class="keyword">async</span> loadUser () {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getUserById(<span class="built_in">this</span>.$route.params.userId)</span><br><span class="line">        <span class="built_in">this</span>.user = data.data</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">        <span class="built_in">this</span>.$toast(<span class="string">'è·å–ç”¨æˆ·æ•°æ®å¤±è´¥'</span>)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<h2 id="ç”¨æˆ·å…³æ³¨"><a href="#ç”¨æˆ·å…³æ³¨" class="headerlink" title="ç”¨æˆ·å…³æ³¨"></a>ç”¨æˆ·å…³æ³¨</h2><h2 id="å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨"><a href="#å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨" class="headerlink" title="å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨"></a>å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨</h2><h3 id="åˆ—è¡¨ç»„ä»¶"><a href="#åˆ—è¡¨ç»„ä»¶" class="headerlink" title="åˆ—è¡¨ç»„ä»¶"></a>åˆ—è¡¨ç»„ä»¶</h3><figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;van-list</span><br><span class="line">  v-model="loading"</span><br><span class="line">  :finished="finished"</span><br><span class="line">  finished-text="æ²¡æœ‰æ›´å¤šäº†"</span><br><span class="line">  @load="onLoad"</span><br><span class="line">&gt;</span><br><span class="line">  &lt;van-cell</span><br><span class="line">    v-for="item in list"</span><br><span class="line">    :key="item"</span><br><span class="line">    :title="item"</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/van-list&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [],</span><br><span class="line">      loading: false,</span><br><span class="line">      finished: false</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  methods: {</span><br><span class="line">    onLoad() {</span><br><span class="line">      // å¼‚æ­¥æ›´æ–°æ•°æ®</span><br><span class="line">      setTimeout(() =&gt; {</span><br><span class="line">        for (let i = 0; i &lt; 10; i++) {</span><br><span class="line">          this.list.push(this.list.length + 1);</span><br><span class="line">        }</span><br><span class="line">        // åŠ è½½çŠ¶æ€ç»“æŸ</span><br><span class="line">        this.loading = false;</span><br><span class="line"></span><br><span class="line">        // æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ</span><br><span class="line">        if (this.list.length &gt;= 40) {</span><br><span class="line">          this.finished = true;</span><br><span class="line">        }</span><br><span class="line">      }, 500);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨"><a href="#åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨" class="headerlink" title="åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨"></a>åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨</h3><p>List çš„è¿è¡Œæœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">List ä¼šç›‘å¬æµè§ˆå™¨çš„æ»šåŠ¨äº‹ä»¶å¹¶è®¡ç®—åˆ—è¡¨çš„ä½ç½®ï¼Œå½“åˆ—è¡¨åº•éƒ¨ä¸å¯è§†åŒºåŸŸçš„è·ç¦»å°äºoffsetæ—¶ï¼ŒList ä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ã€‚</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸ºä»€ä¹ˆ List åˆå§‹åŒ–åä¼šç«‹å³è§¦å‘ load äº‹ä»¶ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">List åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®ï¼Œè¿™ä¸ªç‰¹æ€§å¯ä»¥é€šè¿‡`immediate-check`å±æ€§å…³é—­ã€‚</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸ºä»€ä¹ˆä¼šè¿ç»­è§¦å‘ load äº‹ä»¶ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼ŒList ä¼šç»§ç»­è§¦å‘ load äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆã€‚å› æ­¤ä½ éœ€è¦è°ƒæ•´æ¯æ¬¡è·å–çš„æ•°æ®æ¡æ•°ï¼Œç†æƒ³æƒ…å†µä¸‹æ¯æ¬¡è¯·æ±‚è·å–çš„æ•°æ®æ¡æ•°åº”èƒ½å¤Ÿå¡«æ»¡ä¸€å±é«˜åº¦ã€‚</span><br></pre></td></tr></tbody></table></figure>

<p>loading å’Œ finished åˆ†åˆ«æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ</p>
<blockquote>
<p><code>List</code>æœ‰ä»¥ä¸‹ä¸‰ç§çŠ¶æ€ï¼Œç†è§£è¿™äº›çŠ¶æ€æœ‰åŠ©äºä½ æ­£ç¡®åœ°ä½¿ç”¨<code>List</code>ç»„ä»¶ï¼š</p>
<ul>
<li>éåŠ è½½ä¸­ï¼Œ<code>loading</code>ä¸º<code>false</code>ï¼Œæ­¤æ—¶ä¼šæ ¹æ®åˆ—è¡¨æ»šåŠ¨ä½ç½®åˆ¤æ–­æ˜¯å¦è§¦å‘<code>load</code>äº‹ä»¶ï¼ˆåˆ—è¡¨å†…å®¹ä¸è¶³ä¸€å±å¹•æ—¶ï¼Œä¼šç›´æ¥è§¦å‘ï¼‰</li>
<li>åŠ è½½ä¸­ï¼Œ<code>loading</code>ä¸º<code>true</code>ï¼Œè¡¨ç¤ºæ­£åœ¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘<code>load</code>äº‹ä»¶</li>
<li>åŠ è½½å®Œæˆï¼Œ<code>finished</code>ä¸º<code>true</code>ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘<code>load</code>äº‹ä»¶</li>
</ul>
<p>åœ¨æ¯æ¬¡è¯·æ±‚å®Œæ¯•åï¼Œéœ€è¦æ‰‹åŠ¨å°†<code>loading</code>è®¾ç½®ä¸º<code>false</code>ï¼Œè¡¨ç¤ºæœ¬æ¬¡ load åŠ è½½ç»“æŸ</p>
</blockquote>
<p>ä½¿ç”¨ float å¸ƒå±€åä¸€ç›´è§¦å‘åŠ è½½ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">è‹¥ List çš„å†…å®¹ä½¿ç”¨äº† float å¸ƒå±€ï¼Œå¯ä»¥åœ¨å®¹å™¨ä¸Šæ·»åŠ van-clearfixç±»åæ¥æ¸…é™¤æµ®åŠ¨ï¼Œä½¿å¾— List èƒ½æ­£ç¡®åˆ¤æ–­å…ƒç´ ä½ç½®</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å±•ç¤ºæ–‡ç« åˆ—è¡¨"><a href="#å±•ç¤ºæ–‡ç« åˆ—è¡¨" class="headerlink" title="å±•ç¤ºæ–‡ç« åˆ—è¡¨"></a>å±•ç¤ºæ–‡ç« åˆ—è¡¨</h3><p>1ã€å°è£…è·å–ç”¨æˆ·æ–‡ç« åˆ—è¡¨çš„æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æŒ‡å®šç”¨æˆ·çš„æ–‡ç« åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getArticlesByUser = <span class="function">(<span class="params">userId, params</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/users/<span class="subst">${userId}</span>/articles`</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç”¨æˆ·é¡µé¢ä¸­è¯·æ±‚è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getUserById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line">+ <span class="keyword">import</span> { getArticlesByUser } <span class="keyword">from</span> <span class="string">'@/api/article'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'UserPage'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {},</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">user</span>: {}, <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">      <span class="attr">list</span>: [], <span class="comment">// åˆ—è¡¨æ•°æ®</span></span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„ loading</span></span><br><span class="line">      <span class="attr">finished</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ˜¯å¦åŠ è½½ç»“æŸäº†</span></span><br><span class="line">+      page: <span class="number">1</span> <span class="comment">// è·å–ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">  created () {</span><br><span class="line">    <span class="built_in">this</span>.loadUser()</span><br><span class="line">  },</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> loadUser () {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getUserById(<span class="built_in">this</span>.$route.params.userId)</span><br><span class="line">        <span class="built_in">this</span>.user = data.data</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">        <span class="built_in">this</span>.$toast(<span class="string">'è·å–ç”¨æˆ·æ•°æ®å¤±è´¥'</span>)</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line"></span><br><span class="line">+++    <span class="keyword">async</span> onLoad () {</span><br><span class="line">      <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> { data } = <span class="keyword">await</span> getArticlesByUser(<span class="built_in">this</span>.$route.params.userId, {</span><br><span class="line">        <span class="attr">page</span>: <span class="built_in">this</span>.page, <span class="comment">// å¯é€‰çš„ï¼Œé»˜è®¤æ˜¯ç¬¬ 1 é¡µ</span></span><br><span class="line">        <span class="attr">per_page</span>: <span class="number">20</span> <span class="comment">// å¯é€‰çš„ï¼Œé»˜è®¤æ¯é¡µ 10 æ¡</span></span><br><span class="line">      })</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2. æŠŠæ•°æ®æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">      <span class="comment">// list []</span></span><br><span class="line">      <span class="comment">// data.data.results []</span></span><br><span class="line">      <span class="comment">// ...[1, 2, 3] ä¼šæŠŠæ•°ç»„ç»™å±•å¼€ï¼Œæ‰€è°“çš„å±•å¼€å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„æ‹¿å‡ºæ¥</span></span><br><span class="line">      <span class="keyword">const</span> { results } = data.data</span><br><span class="line">      <span class="built_in">this</span>.list.push(...results)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 3. åŠ è½½çŠ¶æ€ç»“æŸ</span></span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦å…¨éƒ¨åŠ è½½å®Œæ¯•</span></span><br><span class="line">      <span class="keyword">if</span> (results.length) {</span><br><span class="line">        <span class="built_in">this</span>.page++ <span class="comment">// æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="built_in">this</span>.finished = <span class="literal">true</span> <span class="comment">// æ²¡æœ‰æ•°æ®äº†ï¼Œä¸éœ€è¦åŠ è½½æ›´å¤šäº†</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1 id="åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™"><a href="#åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™" class="headerlink" title="åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™"></a>åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™</h1><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566431661910.png" width="300">



<h2 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-4"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-4" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h2><p>1ã€åˆ›å»º <code>views/user/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">title</span>=<span class="string">"ä¸ªäººä¿¡æ¯"</span> <span class="attr">left-arrow</span> <span class="attr">right-text</span>=<span class="string">"ä¿å­˜"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å¤´åƒ"</span> <span class="attr">is-link</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">          <span class="attr">width</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">src</span>=<span class="string">"http://toutiao.meiduo.site/FgSTA3msGyxp5-Oufnm5c0kjVgW7"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ˜µç§°"</span> <span class="attr">value</span>=<span class="string">"abc"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ€§åˆ«"</span> <span class="attr">value</span>=<span class="string">"ç”·"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”Ÿæ—¥"</span> <span class="attr">value</span>=<span class="string">"2019-9-27"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">"UserIndex"</span></span></span><br><span class="line"><span class="javascript">  };</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€å°†è¯¥é¡µé¢é…ç½®åˆ°æ ¹è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'user-profile'</span>,</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/user/profile'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/user-profile'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="é¡µé¢å¸ƒå±€-6"><a href="#é¡µé¢å¸ƒå±€-6" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-profile"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"page-nav-bar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"ä¸ªäººä¿¡æ¯"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">left-arrow</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click-left</span>=<span class="string">"$router.back()"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¸ªäººä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">class</span>=<span class="string">"avatar-cell"</span> <span class="attr">title</span>=<span class="string">"å¤´åƒ"</span> <span class="attr">is-link</span> <span class="attr">center</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ˜µç§°"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ€§åˆ«"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”Ÿæ—¥"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /ä¸ªäººä¿¡æ¯ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'UserProfile'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.user-profile</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.avatar-cell</span> {</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-cell__value</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">flex-direction</span>: row-reverse;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å±•ç¤ºç”¨æˆ·ä¿¡æ¯-1"><a href="#å±•ç¤ºç”¨æˆ·ä¿¡æ¯-1" class="headerlink" title="å±•ç¤ºç”¨æˆ·ä¿¡æ¯"></a>å±•ç¤ºç”¨æˆ·ä¿¡æ¯</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ <code>views/user/index.vue</code> ç»„ä»¶ä¸­è¯·æ±‚è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<h2 id="ä¿®æ”¹æ˜µç§°"><a href="#ä¿®æ”¹æ˜µç§°" class="headerlink" title="ä¿®æ”¹æ˜µç§°"></a>ä¿®æ”¹æ˜µç§°</h2><p>ä¸€ã€å‡†å¤‡å¼¹å‡ºå±‚</p>
<p>äºŒã€å°è£…ç»„ä»¶</p>
<p>ä¸‰ã€é¡µé¢å¸ƒå±€</p>
<p>å››ã€åŸºæœ¬åŠŸèƒ½å¤„ç†</p>
<p>äº”ã€æ›´æ–°å®Œæˆ</p>
<h2 id="ä¿®æ”¹æ€§åˆ«"><a href="#ä¿®æ”¹æ€§åˆ«" class="headerlink" title="ä¿®æ”¹æ€§åˆ«"></a>ä¿®æ”¹æ€§åˆ«</h2><h2 id="ä¿®æ”¹ç”Ÿæ—¥"><a href="#ä¿®æ”¹ç”Ÿæ—¥" class="headerlink" title="ä¿®æ”¹ç”Ÿæ—¥"></a>ä¿®æ”¹ç”Ÿæ—¥</h2><h2 id="ä¿®æ”¹å¤´åƒ"><a href="#ä¿®æ”¹å¤´åƒ" class="headerlink" title="ä¿®æ”¹å¤´åƒ"></a>ä¿®æ”¹å¤´åƒ</h2><h3 id="å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ"><a href="#å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ" class="headerlink" title="å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ"></a>å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ</h3><p>æ–¹å¼ä¸€ï¼šç»“åˆæœåŠ¡å™¨çš„å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ</p>
<p><img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1567067894388.png" alt="1567067894388"></p>
<p>æ–¹å¼äºŒï¼šçº¯å®¢æˆ·ç«¯å®ç°ä¸Šä¼ å›¾ç‰‡é¢„è§ˆ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–æ–‡æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> file = fileInput.files[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å›¾ç‰‡çš„ src</span></span><br><span class="line">img.src = <span class="built_in">window</span>.URL.createObjectURL(file)</span><br></pre></td></tr></tbody></table></figure>

<p>å®¢æˆ·ç«¯ä¸Šä¼ é¢„è§ˆç¤ºä¾‹ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>å®¢æˆ·ç«¯å›¾ç‰‡ä¸Šä¼ é¢„è§ˆç¤ºä¾‹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.img-wrap</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">img</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">max-width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å®¢æˆ·ç«¯å›¾ç‰‡ä¸Šä¼ é¢„è§ˆç¤ºä¾‹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img-wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"file"</span> <span class="attr">onchange</span>=<span class="string">"onFileChange()"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> img = <span class="built_in">document</span>.querySelector(<span class="string">'#img'</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> file = <span class="built_in">document</span>.querySelector(<span class="string">'#file'</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">onFileChange</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="comment">// å¾—åˆ° file-input çš„æ–‡ä»¶å¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> fileObj = file.files[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> data = <span class="built_in">window</span>.URL.createObjectURL(fileObj)</span></span><br><span class="line"><span class="javascript">      img.src = data</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ä¸‹æ¥å°±æ˜¯åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çº¯å®¢æˆ·ç«¯çš„æ–¹å¼å¤„ç†ç”¨æˆ·å¤´åƒä¸Šä¼ é¢„è§ˆã€‚</p>
<p>åœ¨ <code>views/user/index.vue</code> ç»„ä»¶ä¸­ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">title</span>=<span class="string">"ä¸ªäººä¿¡æ¯"</span> <span class="attr">left-arrow</span> <span class="attr">right-text</span>=<span class="string">"ä¿å­˜"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">      +</span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å¤´åƒ"</span> <span class="attr">is-link</span> @<span class="attr">click</span>=<span class="string">"onChangePhoto"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span> <span class="attr">round</span> <span class="attr">width</span>=<span class="string">"30"</span> <span class="attr">height</span>=<span class="string">"30"</span> <span class="attr">:src</span>=<span class="string">"user.photo"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ˜µç§°"</span> <span class="attr">:value</span>=<span class="string">"user.name"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ€§åˆ«"</span> <span class="attr">:value</span>=<span class="string">"user.gender === 0 ? 'ç”·' : 'å¥³'"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”Ÿæ—¥"</span> <span class="attr">:value</span>=<span class="string">"user.birthday"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      è¡¨å•å…ƒç´ çš„ hidden è¡¨ç¤ºéšè—è¿™ä¸ªè¡¨å•å…ƒç´ </span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    + <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">hidden</span> <span class="attr">ref</span>=<span class="string">"file"</span> @<span class="attr">change</span>=<span class="string">"onFileChange"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> { getProfile } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">'UserIndex'</span>,</span></span><br><span class="line"><span class="javascript">    data () {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">        <span class="attr">user</span>: {}</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    created () {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.loadUserProfile()</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">async</span> loadUserProfile () {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getProfile()</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.user = data.data</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  +    onChangePhoto () {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$refs.file.click()</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  +    onFileChange () {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.user.photo = <span class="built_in">window</span>.URL.createObjectURL(<span class="built_in">this</span>.$refs.file.files[<span class="number">0</span>])</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>


<h3 id="å¤´åƒè£åˆ‡"><a href="#å¤´åƒè£åˆ‡" class="headerlink" title="å¤´åƒè£åˆ‡"></a>å¤´åƒè£åˆ‡</h3><p>æ–¹æ¡ˆä¸€ï¼šç»“åˆæœåŠ¡ç«¯çš„å›¾ç‰‡è£åˆ‡ä¸Šä¼ æµç¨‹</p>
<img src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200418015503681.png" alt="image-20200418015503681">

<p>æ–¹æ¡ˆäºŒï¼šçº¯å®¢æˆ·ç«¯çš„å›¾ç‰‡è£åˆ‡ä¸Šä¼ æµç¨‹</p>
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/Input/file">&lt;input type=â€fileâ€&gt;</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/File/Using_files_from_web_applications">åœ¨webåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ–‡ä»¶</a></li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">viewMode: 1,</span><br><span class="line">dragMode: 'move',</span><br><span class="line">aspectRatio: 1,</span><br><span class="line">autoCropArea: 1,</span><br><span class="line">cropBoxMovable: false,</span><br><span class="line">cropBoxResizable: false,</span><br><span class="line">background: false,</span><br><span class="line">movable: true</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ä¿å­˜æ›´æ–°"><a href="#ä¿å­˜æ›´æ–°" class="headerlink" title="ä¿å­˜æ›´æ–°"></a>ä¿å­˜æ›´æ–°</h3><p>å¦‚æœæ˜¯åŸºäºæœåŠ¡ç«¯çš„è£åˆ‡ï¼Œåˆ™ä½¿ç”¨ï¼š<a href="https://github.com/fengyuanchen/cropperjs#getdatarounded">getData</a> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¾—åˆ°è£åˆ‡çš„åŒºåŸŸå‚æ•°ã€‚</p>
<p>å¦‚æœæ˜¯çº¯å®¢æˆ·ç«¯çš„å›¾ç‰‡è£åˆ‡ï¼Œåˆ™ä½¿ç”¨ï¼š<a href="https://github.com/fengyuanchen/cropperjs#getcroppedcanvasoptions">getCroppedCanvas</a> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¾—åˆ°è£åˆ‡ä¹‹åçš„å›¾ç‰‡å¯¹è±¡ï¼ˆç±»ä¼¼äºURL.createObjectURL æ–¹æ³•å¾—åˆ°çš„æ–‡ä»¶å¯¹è±¡ï¼‰ã€‚</p>
<p>æ­¥éª¤ï¼š</p>
<ul>
<li>å°è£…æ¥å£</li>
<li>è¯·æ±‚æäº¤</li>
<li>æ›´æ–°è§†å›¾</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€æ¥å£é‡ç”¨</span></span><br><span class="line"><span class="comment"> * 2ã€æ¥å£ç»´æŠ¤</span></span><br><span class="line"><span class="comment"> * å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¥å£ç»å¸¸å®¹æ˜“å˜åŒ–ï¼Œ</span></span><br><span class="line"><span class="comment"> * ä½ èƒ½è®°ä½ä½ åœ¨å“ªé‡Œè¯·æ±‚äº†è¿™ä¸ªæ¥å£å—ï¼Ÿå¾ˆéš¾è®°ä½</span></span><br><span class="line"><span class="comment"> * æ€ä¹ˆåŠå‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment"> *  æˆ‘ä»¬å•ç‹¬çš„æŠŠæ¥å£è¯·æ±‚çš„ä»£ç å°è£…èµ·æ¥ï¼Œç»Ÿä¸€çš„æ”¾åˆ°ä¸€èµ·ã€‚</span></span><br><span class="line"><span class="comment"> * æ”¾åˆ°å“ªé‡Œå‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment"> *  æˆ‘ä»¬æ”¾åˆ°é¡¹ç›®çš„ api ç›®å½•ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment"> *  æ ¹æ®æ¥å£çš„ç§ç±»è¿›è¡Œå½’ç±»ç®¡ç†</span></span><br><span class="line"><span class="comment"> *  ä¾‹å¦‚ç”¨æˆ·ç›¸å…³çš„æ¥å£æ”¾åˆ° user.js ä¸­</span></span><br><span class="line"><span class="comment"> *      æ–‡ç« ç›¸å…³çš„æ¥å£æ”¾åˆ° article.js ä¸­</span></span><br><span class="line"><span class="comment"> * å¦‚ä½•å°è£…å‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment"> *  ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶å‚æ•°ï¼Œè¿”å›è¯·æ±‚ç»“æœå°±å¯ä»¥äº†ã€‚</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·æ¥å£ç›¸å…³è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ç™»å½•</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span> (<span class="params">user</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="comment">// method ç”¨æ¥æŒ‡å®šè¯·æ±‚æ–¹æ³•ï¼Œè¿™æ˜¯ axios çš„å›ºå®š APIï¼Œä¸èƒ½çå†™</span></span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="comment">// url ç”¨æ¥æŒ‡å®šè¯·æ±‚è·¯å¾„</span></span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/authorizations'</span>,</span><br><span class="line">    <span class="comment">// data æ˜¯ axios è¯·æ±‚è¦æ±‚çš„å­—æ®µåï¼Œç”¨æ¥ä¼ é€’è¯·æ±‚ä½“æ•°æ®çš„</span></span><br><span class="line">    <span class="attr">data</span>: user</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…³æ³¨ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">followUser</span> (<span class="params">userId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/followings'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      <span class="attr">target</span>: userId <span class="comment">// ç”¨æˆ·id</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆå…³æ³¨ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">unFollowUser</span> (<span class="params">userId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/followings/'</span> + userId</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·è‡ªå·±ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getSelf</span> (<span class="params">userId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·ä¸ªäººèµ„æ–™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getProfile</span> (<span class="params">userId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/profile'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°ç”¨æˆ·å¤´åƒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateUserPhoto</span> (<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'PATCH'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/photo'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ <code>views/user/index.vue</code> ç»„ä»¶ä¸­ä¿å­˜æäº¤</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"ä¸ªäººä¿¡æ¯"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">left-arrow</span></span></span><br><span class="line"><span class="tag">      <span class="attr">right-text</span>=<span class="string">"ä¿å­˜"</span></span></span><br><span class="line"><span class="tag">      +</span></span><br><span class="line"><span class="tag">      @<span class="attr">click-right</span>=<span class="string">"onSave"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å¤´åƒ"</span> <span class="attr">is-link</span> @<span class="attr">click</span>=<span class="string">"onChangePhoto"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span> <span class="attr">round</span> <span class="attr">width</span>=<span class="string">"30"</span> <span class="attr">height</span>=<span class="string">"30"</span> <span class="attr">:src</span>=<span class="string">"user.photo"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ˜µç§°"</span> <span class="attr">:value</span>=<span class="string">"user.name"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ€§åˆ«"</span> <span class="attr">:value</span>=<span class="string">"user.gender === 0 ? 'ç”·' : 'å¥³'"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”Ÿæ—¥"</span> <span class="attr">:value</span>=<span class="string">"user.birthday"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      è¡¨å•å…ƒç´ çš„ hidden è¡¨ç¤ºéšè—è¿™ä¸ªè¡¨å•å…ƒç´ </span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">hidden</span> <span class="attr">ref</span>=<span class="string">"file"</span> @<span class="attr">change</span>=<span class="string">"onFileChange"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  + <span class="keyword">import</span> { getProfile, updateUserPhoto } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">'UserIndex'</span>,</span></span><br><span class="line"><span class="javascript">    data () {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">        <span class="attr">user</span>: {}</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    created () {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.loadUserProfile()</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">async</span> loadUserProfile () {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getProfile()</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.user = data.data</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      onChangePhoto () {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$refs.file.click()</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      onFileChange () {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> fileObj = <span class="built_in">this</span>.$refs.file.files[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (fileObj) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.user.photo = <span class="built_in">window</span>.URL.createObjectURL(fileObj)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  +    <span class="keyword">async</span> onSave () {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¦‚æœ Content-Type è¦æ±‚æ˜¯  application/json  ï¼Œåˆ™ data ä¼ æ™®é€šå¯¹è±¡ {}</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¦‚æœ Content-Type è¦æ±‚æ˜¯  multipart/form-data ï¼Œåˆ™ data ä¼  FormData å¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// çºµè§‚æ‰€æœ‰æ•°æ®æ¥å£ï¼Œä½ ä¼šå‘ç°å¤§å¤šæ•°çš„æ¥å£éƒ½è¦æ±‚ Content-Type è¦æ±‚æ˜¯  application/json</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// ä¸€èˆ¬åªæœ‰æ¶‰åŠåˆ°æ–‡ä»¶ä¸Šä¼ çš„æ•°æ®æ¥å£æ‰è¦æ±‚Content-Type è¦æ±‚æ˜¯  multipart/form-data</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// è¿™ä¸ªæ—¶å€™ä¼ é€’ä¸€ä¸ª FormData å¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$toast.loading({</span></span><br><span class="line"><span class="javascript">          <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// ç¦ç”¨èƒŒæ™¯ç‚¹å‡»</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">loadingType</span>: <span class="string">'spinner'</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">message</span>: <span class="string">'ä¿å­˜ä¸­'</span></span></span><br><span class="line"><span class="javascript">        })</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">try</span> {</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData()</span></span><br><span class="line"><span class="javascript">          <span class="comment">// formData.append('åå­—', æ•°æ®)</span></span></span><br><span class="line"><span class="javascript">          formData.append(<span class="string">'photo'</span>, <span class="built_in">this</span>.$refs.file.files[<span class="number">0</span>])</span></span><br><span class="line"><span class="javascript">          <span class="keyword">await</span> updateUserPhoto(formData)</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.$toast.success(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span></span><br><span class="line"><span class="javascript">        } <span class="keyword">catch</span> (err) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(err)</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.$toast.fail(<span class="string">'ä¿å­˜å¤±è´¥'</span>)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>










]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vueåº”ç”¨</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>vueåº”ç”¨3â€”HR-saasä¸­å°ç³»ç»Ÿ</title>
    <url>/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="1-é¡¹ç›®è®¾è®¡"><a href="#1-é¡¹ç›®è®¾è®¡" class="headerlink" title="1.é¡¹ç›®è®¾è®¡"></a>1.é¡¹ç›®è®¾è®¡</h1><p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200810012833240.png" alt="image-20200810012833240"></p>
<h1 id="1-äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º"><a href="#1-äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º" class="headerlink" title="1.äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º"></a>1.äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º</h1><h2 id="vue-element-adminçš„äº†è§£å’Œä»‹ç»"><a href="#vue-element-adminçš„äº†è§£å’Œä»‹ç»" class="headerlink" title="vue-element-adminçš„äº†è§£å’Œä»‹ç»"></a>vue-element-adminçš„äº†è§£å’Œä»‹ç»</h2><p><strong><code>ç›®æ ‡</code></strong>: å­¦ä¹ å’Œäº†è§£é€šç”¨çš„vueåå°é›†æˆæ–¹æ¡ˆ**<code>vue-element-admin</code>**</p>
<p><a href="https://panjiachen.gitee.io/vue-element-admin-site/zh/">vue-element-admin</a> æ˜¯ä¸€ä¸ªåå°å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒåŸºäº <a href="https://github.com/vuejs/vue">vue</a> å’Œ <a href="https://github.com/ElemeFE/element">element-ui</a>å®ç°ã€‚å®ƒä½¿ç”¨äº†æœ€æ–°çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œå†…ç½®äº† i18 å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼ŒåŠ¨æ€è·¯ç”±ï¼Œæƒé™éªŒè¯ï¼Œæç‚¼äº†å…¸å‹çš„ä¸šåŠ¡æ¨¡å‹ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ç»„ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿæ­å»ºä¼ä¸šçº§ä¸­åå°äº§å“åŸå‹ã€‚</p>
<p><a href="http://panjiachen.github.io/vue-element-admin">vue-element-admin</a> æ˜¯ä¸€ä¸ªåå°é›†æˆæ–¹æ¡ˆ, é›†æˆäº†PCé¡¹ç›®ä¸­å¾ˆå¤šçš„ä¸šåŠ¡åœºæ™¯å’ŒåŠŸèƒ½, å°¤å…¶åœ¨å½“ä¸‹SPAçš„è¶‹åŠ¿ä¸‹,æˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾—å¾ˆå¤šæˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ.</p>
<blockquote>
<p><a href="http://panjiachen.github.io/vue-element-admin">vue-element-admin</a> æœ‰ä¸€ä¸ªæˆç†Ÿçš„<a href="https://github.com/PanJiaChen/vue-element-admin">é›†æˆæ–¹æ¡ˆ</a>ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„ä¸šåŠ¡åŠŸèƒ½å’Œåœºæ™¯,å¹¶ä¸é€‚åˆç›´æ¥æ‹¿æ¥è¿›è¡ŒäºŒæ¬¡å¼€å‘, ä½†æ˜¯å¯ä»¥é€šè¿‡è¯¥é¡¹ç›®ä¸­çš„ä¸€ä¸ªæ¡ˆä¾‹æ¥è¿›è¡Œå­¦ä¹ å’Œä½¿ç”¨.</p>
</blockquote>
<p>è¿™é‡Œæ˜¯<a href="https://panjiachen.gitee.io/vue-element-admin-site/zh/">å®˜ç½‘åœ°å€</a></p>
<p>è¿™é‡Œæ˜¯<a href="https://panjiachen.github.io/vue-element-admin/#/dashboard">çº¿ä¸Šdemoåœ°å€</a></p>
<blockquote>
<p>å¦‚æœä½ æƒ³æŸ¥çœ‹è¯¥é¡¹ç›®çš„å…·ä½“åŠŸèƒ½å’Œæ•ˆæœï¼Œå¯ä»¥æ‹‰å–ä»£ç ï¼Œå¯åŠ¨è¿›è¡Œé¢„è§ˆï¿¥ </p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/PanJiaChen/vue-element-admin.git  <span class="comment">#æ‹‰å–ä»£ç </span></span><br><span class="line">$ <span class="built_in">cd</span> vue-element-admin <span class="comment">#åˆ‡æ¢åˆ°å…·ä½“ç›®å½•ä¸‹</span></span><br><span class="line">$ npm run dev  <span class="comment">#å¯åŠ¨å¼€å‘è°ƒè¯•æ¨¡å¼  æŸ¥çœ‹package.jsonæ–‡ä»¶çš„scriptså¯çŸ¥æ™“å¯åŠ¨å‘½ä»¤</span></span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æ³¨æ„</code>**ï¼šå½“å‰é¡¹ç›®ä¸‹è½½é€Ÿåº¦å¦‚æœè¿‡æ…¢ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ä»£ç çš„å‹ç¼©åŒ…è¿è¡Œ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200703173319390.png" alt="image-20200703173319390"></p>
<blockquote>
<p>é›†æˆæ–¹æ¡ˆå¹¶ä¸é€‚åˆæˆ‘ä»¬ç›´æ¥æ‹¿æ¥è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œ<a href="https://github.com/PanJiaChen/vue-admin-template">åŸºç¡€æ¨¡æ¿</a>åˆ™æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©</p>
</blockquote>
<p>åŸºç¡€æ¨¡æ¿, åŒ…å«äº†åŸºæœ¬çš„ <strong>ç™»å½• / é‰´æƒ / ä¸»é¡µå¸ƒå±€</strong> çš„ä¸€äº›åŸºç¡€åŠŸèƒ½æ¨¡æ¿, æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¯¥æ¨¡æ¿ä¸Šè¿›è¡ŒåŠŸèƒ½çš„æ‰©å±•å’Œé¡¹ç›®çš„äºŒæ¬¡å¼€å‘</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š æµè§ˆvue-element-adminçš„æ–‡æ¡£ï¼Œäº†è§£è¿™ä¸ªé›†æˆæ–¹æ¡ˆ</p>
<h2 id="æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡"><a href="#æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡" class="headerlink" title="æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡"></a>æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡</h2><p><strong><code>ç›®æ ‡</code></strong>: ä»‹ç»æ­å»ºä¸€ä¸ªvueä¸­å°é¡¹ç›®,éœ€è¦ç¯å¢ƒå’Œå·¥å…·</p>
<blockquote>
<p>æ¥ä¸‹æ¥è¦åšçš„æ˜¯ä¸€ä¸ªå¤§å‹çš„é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¥½çš„ç¯å¢ƒå‡†å¤‡å’Œèµ„æºå‰ç½®ï¼Œæ‰€ä»¥æå‰æ£€æŸ¥æˆ‘ä»¬çš„ç¯å¢ƒå’Œèµ„æº</p>
</blockquote>
<p><strong>nodejsç¯å¢ƒ</strong></p>
<blockquote>
<p>nodejsæ˜¯å½“ä¸‹å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘å¿…ä¸å¯å°‘çš„ç¯å¢ƒ, ä½¿ç”¨ nodejsçš„**<code>npm</code>**åŠŸèƒ½æ¥ç®¡ç†ä¾èµ–åŒ…</p>
</blockquote>
<p>æŸ¥çœ‹node å’Œ npmçš„ç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ node -v <span class="comment">#æŸ¥çœ‹nodeç‰ˆæœ¬</span></span><br><span class="line">$ npm  -v <span class="comment">#æŸ¥çœ‹npmç‰ˆæœ¬</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200706130603160.png" alt="image-20200706130603160"></p>
<p><strong>gitç‰ˆæœ¬æ§åˆ¶</strong></p>
<blockquote>
<p>gitç‰ˆæœ¬æ§åˆ¶å·¥å…·æ˜¯ç›®å‰æœ€ä¸ºæµè¡Œçš„åˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†å·¥å…·,ä»£ç çš„**<code>æäº¤, æ£€å‡º, æ—¥å¿—</code>**, éƒ½éœ€è¦é€šè¿‡gitå®Œæˆ</p>
</blockquote>
<p>æŸ¥çœ‹gitå®‰è£…ç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ git --version <span class="comment">#æŸ¥çœ‹gitå®‰è£…ç‰ˆæœ¬</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200706131337563.png" alt="image-20200706131337563"></p>
<p><strong>npmæ·˜å®é•œåƒ</strong></p>
<blockquote>
<p>npmæ˜¯éå¸¸é‡è¦çš„npmç®¡ç†å·¥å…·,ç”±äºnpmçš„æœåŠ¡å™¨ä½äºå›½å¤–, æ‰€ä»¥ä¸€èˆ¬å»ºè®® å°† npmè®¾ç½®æˆå›½å†…çš„æ·˜å®é•œåƒ</p>
</blockquote>
<p>è®¾ç½®æ·˜å®é•œåƒ</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm config <span class="built_in">set</span> registry  https://registry.npm.taobao.org/  <span class="comment">#è®¾ç½®æ·˜å®é•œåƒåœ°å€</span></span><br><span class="line">$ npm config get registry  <span class="comment">#æŸ¥çœ‹é•œåƒåœ°å€</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>vscodeç¼–è¾‘å™¨</strong></p>
<blockquote>
<p>vscodeç¼–è¾‘å™¨æ˜¯ç›®å‰å‰ç«¯å¼€å‘çš„ç¼–ç åˆ©å™¨ï¼Œ ä»¥åŠä¸°å¯Œçš„æ’ä»¶ç³»ç»Ÿï¼Œéå¸¸é€‚åˆå¼€å‘å‰ç«¯é¡¹ç›® </p>
</blockquote>
<p>vscodeç¼–è¾‘å™¨æ’ä»¶ + <strong><code>vetur</code></strong> + <strong><code>eslint</code></strong></p>
<blockquote>
<p>veturæ˜¯åŸºäº å•æ–‡ä»¶ç»„ä»¶å¼€å‘çš„æ”¯æŒæ’ä»¶, eslintæ˜¯ åŸºäºä»£ç æ ¡éªŒçš„æ’ä»¶å·¥å…·</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200706134607517.png" alt="image-20200706134607517"></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200706134614330.png" alt="image-20200706134614330"></p>
<p>é™¤æ­¤ä¹‹å¤–, eslintéœ€è¦åœ¨vscodeä¸­è¿›è¡Œä¸€äº›å‚æ•°çš„é…ç½®</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">{ </span><br><span class="line">    <span class="attr">"eslint.enable"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"eslint.run"</span>: <span class="string">"onType"</span>,</span><br><span class="line">    <span class="attr">"eslint.options"</span>: {</span><br><span class="line">        <span class="attr">"extensions"</span>: [</span><br><span class="line">            <span class="string">".js"</span>,</span><br><span class="line">            <span class="string">".vue"</span>,</span><br><span class="line">            <span class="string">".jsx"</span>,</span><br><span class="line">            <span class="string">".tsx"</span></span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">"editor.codeActionsOnSave"</span>: {</span><br><span class="line">        <span class="attr">"source.fixAll.eslint"</span>: <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æœ¬é¡¹ç›®çš„æŠ€æœ¯æ ˆ æœ¬é¡¹ç›®æŠ€æœ¯æ ˆåŸºäº <a href="http://es6.ruanyifeng.com/">ES2015+</a>ã€<a href="https://cn.vuejs.org/index.html">vue</a>ã€<a href="https://vuex.vuejs.org/zh-cn/">vuex</a>ã€<a href="https://router.vuejs.org/zh-cn/">vue-router</a> ã€<a href="https://github.com/vuejs/vue-cli">vue-cli</a> ã€<a href="https://github.com/axios/axios">axios</a> å’Œ <a href="https://github.com/ElemeFE/element">element-ui</a></p>
</blockquote>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å¤§å®¶æ£€æŸ¥å„è‡ªçš„å¼€å‘ç¯å¢ƒå’Œèµ„æºï¼Œå°¤å…¶æ˜¯npmçš„æ·˜å®é•œåƒé¢å¤–éœ€è¦æ³¨æ„</p>
<h2 id="é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»"><a href="#é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»" class="headerlink" title="é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»"></a>é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»</h2><p><strong><code>ç›®æ ‡</code></strong>: æ‹‰å–é¡¹ç›®çš„åŸºç¡€æ¨¡æ¿,å¹¶å¯¹ç›®å½•è¿›è¡Œä»‹ç»</p>
<blockquote>
<p>vue-element-adminçš„åŸºç¡€ æ¨¡æ¿å’Œæˆ‘ä»¬ä¹‹å‰å¼€å‘çš„é¡¹ç›®ä¸€æ ·å— ï¼Ÿæœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å¯¹è¯¥é¡¹ç›®ç›®å½•è¿›è¡Œä¸€ä¸‹ä»‹ç»</p>
</blockquote>
<p><strong>gitæ‹‰å–åŸºç¡€é¡¹ç›®æ¨¡æ¿</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span>  https://github.com/PanJiaChen/vue-admin-template.git  hrsaas <span class="comment">#æ‹‰å–åŸºç¡€æ¨¡æ¿åˆ°hrsaasç›®å½•</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®‰è£…é¡¹ç›®ä¾èµ–</strong>ï¼ˆå®šä½åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm install  <span class="comment">#å®‰è£…ä¾èµ–</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¯åŠ¨é¡¹ç›®</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm run dev <span class="comment">#å¯åŠ¨å¼€å‘æ¨¡å¼çš„æœåŠ¡</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200708010741325.png" alt="image-20200708010741325"></p>
<p>é¡¹ç›®è¿è¡Œå®Œæ¯•ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€åŸºç¡€æ¨¡æ¿çš„ç™»å½•é¡µï¼Œå¦‚ä¸Šå›¾</p>
<p><strong>ç›®å½•ç»“æ„</strong></p>
<p>æœ¬é¡¹ç›®å·²ç»ä¸ºä½ ç”Ÿæˆäº†ä¸€ä¸ªåŸºæœ¬çš„å¼€å‘æ¡†æ¶ï¼Œæä¾›äº†æ¶µç›–ä¸­åå°å¼€å‘çš„å„ç±»åŠŸèƒ½å’Œå‘ä½ï¼Œä¸‹é¢æ˜¯æ•´ä¸ªé¡¹ç›®çš„ç›®å½•ç»“æ„ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">â”œâ”€â”€ build                      <span class="comment"># æ„å»ºç›¸å…³</span></span><br><span class="line">â”œâ”€â”€ mock                       <span class="comment"># é¡¹ç›®mock æ¨¡æ‹Ÿæ•°æ®</span></span><br><span class="line">â”œâ”€â”€ public                     <span class="comment"># é™æ€èµ„æº</span></span><br><span class="line">â”‚   â”‚â”€â”€ favicon.ico            <span class="comment"># faviconå›¾æ ‡</span></span><br><span class="line">â”‚   â””â”€â”€ index.html             <span class="comment"># htmlæ¨¡æ¿</span></span><br><span class="line">â”œâ”€â”€ src                        <span class="comment"># æºä»£ç </span></span><br><span class="line">â”‚   â”œâ”€â”€ api                    <span class="comment"># æ‰€æœ‰è¯·æ±‚</span></span><br><span class="line">â”‚   â”œâ”€â”€ assets                 <span class="comment"># ä¸»é¢˜ å­—ä½“ç­‰é™æ€èµ„æº</span></span><br><span class="line">â”‚   â”œâ”€â”€ components             <span class="comment"># å…¨å±€å…¬ç”¨ç»„ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ icons                  <span class="comment"># é¡¹ç›®æ‰€æœ‰ svg icons</span></span><br><span class="line">â”‚   â”œâ”€â”€ layout                 <span class="comment"># å…¨å±€ layout</span></span><br><span class="line">â”‚   â”œâ”€â”€ router                 <span class="comment"># è·¯ç”±</span></span><br><span class="line">â”‚   â”œâ”€â”€ store                  <span class="comment"># å…¨å±€ storeç®¡ç†</span></span><br><span class="line">â”‚   â”œâ”€â”€ styles                 <span class="comment"># å…¨å±€æ ·å¼</span></span><br><span class="line">â”‚   â”œâ”€â”€ utils                  <span class="comment"># å…¨å±€å…¬ç”¨æ–¹æ³•</span></span><br><span class="line">â”‚   â”œâ”€â”€ vendor                 <span class="comment"># å…¬ç”¨vendor</span></span><br><span class="line">â”‚   â”œâ”€â”€ views                  <span class="comment"># views æ‰€æœ‰é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ App.vue                <span class="comment"># å…¥å£é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.js                <span class="comment"># å…¥å£æ–‡ä»¶ åŠ è½½ç»„ä»¶ åˆå§‹åŒ–ç­‰</span></span><br><span class="line">â”‚   â””â”€â”€ permission.js          <span class="comment"># æƒé™ç®¡ç†</span></span><br><span class="line">â”‚   â””â”€â”€ settings.js          <span class="comment"># é…ç½®æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ tests                      <span class="comment"># æµ‹è¯•</span></span><br><span class="line">â”œâ”€â”€ .env.xxx                   <span class="comment"># ç¯å¢ƒå˜é‡é…ç½®</span></span><br><span class="line">â”œâ”€â”€ .eslintrc.js               <span class="comment"># eslint é…ç½®é¡¹</span></span><br><span class="line">â”œâ”€â”€ .babelrc                   <span class="comment"># babel-loader é…ç½®</span></span><br><span class="line">â”œâ”€â”€ .travis.yml                <span class="comment"># è‡ªåŠ¨åŒ–CIé…ç½®</span></span><br><span class="line">â”œâ”€â”€ vue.config.js              <span class="comment"># vue-cli é…ç½®</span></span><br><span class="line">â”œâ”€â”€ postcss.config.js          <span class="comment"># postcss é…ç½®</span></span><br><span class="line">â””â”€â”€ package.json               <span class="comment"># package.json</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶,ä½ å¯èƒ½ä¼š<strong>çœ¼èŠ±ç¼­ä¹±</strong>, å› ä¸ºç”Ÿæˆçš„ç›®å½•é‡Œé¢æœ‰å¤ªå¤šçš„æ–‡ä»¶ æˆ‘ä»¬åœ¨åšé¡¹ç›®æ—¶ å…¶ä¸­æœ€å…³æ³¨çš„å°±æ˜¯**<code>src</code>**ç›®å½•, é‡Œé¢æ˜¯æ‰€æœ‰çš„æºä»£ç å’Œèµ„æº, è‡³äºå…¶ä»–ç›®å½•, éƒ½æ˜¯å¯¹é¡¹ç›®çš„ç¯å¢ƒå’Œå·¥å…·çš„é…ç½®</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š æŒ‰ç…§æ“ä½œå’Œè®²è§£æ­¥éª¤ï¼Œè¿›è¡Œæ‹‰å–ä»£ç ï¼Œå®‰è£…ä¾èµ–ï¼Œè¿è¡Œé¡¹ç›®ï¼Œé˜…è¯»ç›®å½•å’Œæ–‡ä»¶çš„æ“ä½œ</p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code></strong> éœ€è¦æ³¨æ„è‡ªå·±çš„npmæ˜¯å¦å·²ç»è®¾ç½®äº†æ·˜å®é•œåƒ</p>
<h2 id="é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š"><a href="#é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š" class="headerlink" title="é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š"></a>é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š</h2><p><strong><code>ç›®æ ‡</code></strong>: äº†è§£å½“å‰æ¨¡æ¿çš„åŸºæœ¬è¿è¡Œæœºåˆ¶å’ŒåŸºç¡€æ¶æ„</p>
<blockquote>
<p>çœ¼èŠ±ç¼­ä¹±çš„ç›®å½•å’Œæ–‡ä»¶åˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ æˆ‘ä»¬è¿›è¡Œä¸€ä¸‹æœ€åŸºæœ¬çš„è®²è§£ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½çš„å»ç†è§£å’Œå¼€å‘</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">â”œâ”€â”€ src                        <span class="comment"># æºä»£ç </span></span><br><span class="line">â”‚   â”œâ”€â”€ api                    <span class="comment"># æ‰€æœ‰è¯·æ±‚</span></span><br><span class="line">â”‚   â”œâ”€â”€ assets                 <span class="comment"># ä¸»é¢˜ å­—ä½“ç­‰é™æ€èµ„æº</span></span><br><span class="line">â”‚   â”œâ”€â”€ components             <span class="comment"># å…¨å±€å…¬ç”¨ç»„ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ icons                  <span class="comment"># é¡¹ç›®æ‰€æœ‰ svg icons</span></span><br><span class="line">â”‚   â”œâ”€â”€ layout                 <span class="comment"># å…¨å±€ layout</span></span><br><span class="line">â”‚   â”œâ”€â”€ router                 <span class="comment"># è·¯ç”±</span></span><br><span class="line">â”‚   â”œâ”€â”€ store                  <span class="comment"># å…¨å±€ storeç®¡ç†</span></span><br><span class="line">â”‚   â”œâ”€â”€ styles                 <span class="comment"># å…¨å±€æ ·å¼</span></span><br><span class="line">â”‚   â”œâ”€â”€ utils                  <span class="comment"># å…¨å±€å…¬ç”¨æ–¹æ³•</span></span><br><span class="line">â”‚   â”œâ”€â”€ vendor                 <span class="comment"># å…¬ç”¨vendor</span></span><br><span class="line">â”‚   â”œâ”€â”€ views                  <span class="comment"># views æ‰€æœ‰é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ App.vue                <span class="comment"># å…¥å£é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.js                <span class="comment"># å…¥å£æ–‡ä»¶ åŠ è½½ç»„ä»¶ åˆå§‹åŒ–ç­‰</span></span><br><span class="line">â”‚   â””â”€â”€ permission.js          <span class="comment"># æƒé™ç®¡ç†</span></span><br><span class="line">â”‚   â””â”€â”€ settings.js            <span class="comment"># é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a><strong>main.js</strong></h3><p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824153141764.png" alt="image-20200824153141764"></p>
<p>è¯·æ³¨é‡Šæ‰**<code>mockæ•°æ®</code><strong>çš„éƒ¨åˆ†ï¼Œåˆ é™¤srcä¸‹çš„</strong><code>mock</code>**æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¼€å‘çš„æ—¶å€™ç”¨ä¸åˆ°æ¨¡æ‹Ÿæ•°æ®ï¼Œå¦‚å›¾</p>
<p>åŒæ—¶ï¼Œè¯·æ³¨é‡Šæ‰**<code>vue.config.js</code>**ä¸­çš„  <strong>before: require(â€˜./mock/mock-server.jsâ€™)</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200811013813693.png" alt="image-20200811013813693"></p>
<h3 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a><strong>App.vue</strong></h3><p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824155103340.png" alt="image-20200824155103340"></p>
<h3 id="permission-js"><a href="#permission-js" class="headerlink" title="permission.js"></a><strong>permission.js</strong></h3><blockquote>
<p>srcä¸‹ï¼Œé™¤äº†main.jsè¿˜æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œ**<code>permission.js</code>** å’Œ**<code>settings.js</code>**</p>
</blockquote>
<p><strong><code>permission.js</code></strong> æ˜¯æ§åˆ¶é¡µé¢ç™»å½•æƒé™çš„æ–‡ä»¶ï¼Œ æ­¤å¤„çš„ä»£ç æ²¡æœ‰ç»å†æ„å»ºè¿‡ç¨‹ä¼šå¾ˆéš¾ç†è§£ï¼Œ æ‰€ä»¥å…ˆå°†æ­¤å¤„çš„ä»£ç è¿›è¡Œæ³¨é‡Šï¼Œç­‰æˆ‘ä»¬æ„å»ºæƒé™åŠŸèƒ½æ—¶ï¼Œå†ä»0åˆ°1è¿›è¡Œæ„å»ºã€‚</p>
<p><strong>æ³¨é‡Šä»£ç </strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200708014558617.png" alt="image-20200708014558617"></p>
<blockquote>
<p>**<code>settings.js</code><strong>åˆ™æ˜¯å¯¹äºä¸€äº›é¡¹ç›®ä¿¡æ¯çš„é…ç½®ï¼Œé‡Œé¢æœ‰ä¸‰ä¸ªå±æ€§ <strong><code>title</code></strong>(é¡¹ç›®åç§°)ï¼Œ</strong><code>fixedHeader</code><strong>ï¼ˆå›ºå®šå¤´éƒ¨ï¼‰ï¼Œ</strong><code>sidebarLogo</code>**ï¼ˆæ˜¾ç¤ºå·¦ä¾§èœå•logoï¼‰</p>
</blockquote>
<p>**<code>settings.js</code>**ä¸­çš„æ–‡ä»¶åœ¨å…¶ä»–çš„ä½ç½®ä¼šå¼•ç”¨åˆ°ï¼Œæ‰€ä»¥è¿™é‡Œæš‚æ—¶ä¸å»å¯¹è¯¥æ–‡ä»¶è¿›è¡Œå˜åŠ¨</p>
<h3 id="Vuexç»“æ„"><a href="#Vuexç»“æ„" class="headerlink" title="Vuexç»“æ„"></a><strong>Vuexç»“æ„</strong></h3><blockquote>
<p>å½“å‰çš„Vuexç»“æ„é‡‡ç”¨äº†æ¨¡å—å½¢å¼è¿›è¡Œç®¡ç†å…±äº«çŠ¶æ€ï¼Œå…¶æ¶æ„å¦‚ä¸‹</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824165153331.png" alt="image-20200824165153331"></p>
<blockquote>
<p>å…¶ä¸­app.jsæ¨¡å—å’Œsettings.jsæ¨¡å—ï¼ŒåŠŸèƒ½å·²ç»å®Œå¤‡ï¼Œä¸éœ€è¦å†è¿›è¡Œä¿®æ”¹ã€‚ user.jsæ¨¡å—æ˜¯æˆ‘ä»¬åæœŸéœ€è¦é‡ç‚¹å¼€å‘çš„å†…å®¹ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°†user.jsé‡Œé¢çš„å†…å®¹åˆ é™¤ï¼Œå¹¶ä¸”å¯¼å‡ºä¸€ä¸ªé»˜è®¤é…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  {</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: {},</span><br><span class="line">  <span class="attr">mutations</span>: {},</span><br><span class="line">  <span class="attr">actions</span>: {}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>åŒæ—¶ï¼Œç”±äºgettersä¸­å¼•ç”¨äº†userä¸­çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†gettersä¸­çš„çŠ¶æ€æ”¹ä¸º</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = {</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.sidebar,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.device</span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="scss"><a href="#scss" class="headerlink" title="scss"></a><strong>scss</strong></h3><blockquote>
<p>è¯¥é¡¹ç›®è¿˜ä½¿ç”¨äº†<a href="https://www.sass.hk/">scss</a>ä½œä¸ºcssçš„æ‰©å±•è¯­è¨€ï¼Œåœ¨**<code>styles</code>**ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°scssçš„ç›¸å…³æ–‡ä»¶ï¼Œç›¸å…³ç”¨æ³• æˆ‘ä»¬<a href="">ä¸‹ä¸€å°èŠ‚</a> è¿›è¡Œè®²è§£<img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824171327384.png" alt="image-20200824171327384"></p>
</blockquote>
<h3 id="icons"><a href="#icons" class="headerlink" title="icons"></a><strong>icons</strong></h3><blockquote>
<p>iconsçš„ç»“æ„å¦‚ä¸‹</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824173239955.png" alt="image-20200824173239955"></p>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯vue-element-adminçš„åŸºç¡€å’Œä»‹ç»,å¸Œæœ›å¤§å®¶åœ¨è¿™è¿‡ç¨‹ä¸­ä½“ä¼š ä¸€ä¸ªåŸºç¡€çš„æ¨¡æ¿è¿è¡Œæœºåˆ¶</p>
</blockquote>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å¤§å®¶æ ¹æ®ç›®å½•ç»“æ„å’Œè®¾è®¡å›¾ï¼Œå¯¹ä»¥ä¸Šçš„å†…å®¹è¿›è¡Œäº†è§£</p>
<h2 id="SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨"><a href="#SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨" class="headerlink" title="SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨"></a>SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨</h2><p><strong><code>ç›®æ ‡</code></strong>: äº†è§£å’Œå­¦ä¹ Scsså¤„ç†å™¨çš„è§„èŒƒå’Œç”¨æ³•</p>
<p><a href="https://www.sass.hk/">å®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>é¦–å…ˆæ³¨æ„,è¿™é‡Œçš„sasså’Œæˆ‘ä»¬çš„scssæ˜¯ä»€ä¹ˆå…³ç³»</p>
</blockquote>
<p>sasså’Œscsså…¶å®æ˜¯**<code>ä¸€æ ·çš„</code>**cssé¢„å¤„ç†è¯­è¨€ï¼ŒSCSS æ˜¯ Sass 3 å¼•å…¥æ–°çš„è¯­æ³•ï¼Œå…¶åç¼€åæ˜¯åˆ†åˆ«ä¸º .sasså’Œ.scssä¸¤ç§ã€‚<br>SASSç‰ˆæœ¬3.0ä¹‹å‰çš„åç¼€åä¸º.sassï¼Œè€Œç‰ˆæœ¬3.0ä¹‹åçš„åç¼€å.scssã€‚<br>ä¸¤è€…æ˜¯æœ‰ä¸åŒçš„ï¼Œç»§sassä¹‹åscssçš„ç¼–å†™è§„èŒƒåŸºæœ¬å’Œcssä¸€è‡´ï¼Œsassæ—¶ä»£æ˜¯æœ‰ä¸¥æ ¼çš„ç¼©è¿›è§„èŒƒå¹¶ä¸”æ²¡æœ‰â€˜{}â€™å’Œâ€˜ï¼›â€™ã€‚<br>è€Œscssåˆ™å’Œcssçš„è§„èŒƒæ˜¯ä¸€è‡´çš„ã€‚</p>
<h3 id="æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ"><a href="#æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ"></a>æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ</h3><blockquote>
<p>ä¸ºäº†æ–¹ä¾¿åº”ç”¨scssï¼Œæˆ‘ä»¬å¯ä»¥åœ¨vscodeä¸­å®‰è£…ä¸€ä¸ªåä¸º**<code>easy sass</code>** çš„æ’ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬åªåœ¨è¯¥é¡¹ç›®ä¸­å·¥ä½œåŒºä¸­åº”ç”¨è¯¥æ’ä»¶ï¼Œå› ä¸ºåœ¨é¡¹ç›®ä¸­ï¼Œä¸éœ€è¦è¯¥æ’ä»¶çš„è¾…åŠ©</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200825143713888.png" alt="image-20200825143713888"></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200825143800666.png" alt="image-20200825143800666"></p>
<blockquote>
<p>é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹testï¼Œç„¶åæˆ‘ä»¬åœ¨testä¸‹æ–°å»ºä¸€ä¸ªindex.htmlï¼Œå¹¶æ–°å»ºä¸€ä¸ªtest.scss</p>
</blockquote>
<p>é¡µé¢ç»“æ„å¦‚ä¸‹</p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./test.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span>&gt;</span> Scssæ ·å¼ <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        Hello World</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ–‡ç« æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–‡ç« å†…å®¹ <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ç™¾åº¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aside</span>&gt;</span></span><br><span class="line">            ä¾§è¾¹æ </span><br><span class="line">        <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬ä½¿ç”¨çš„**<code>easy sass</code><strong>æ’ä»¶ä¼šè‡ªåŠ¨çš„å¸®åŠ©æˆ‘ä»¬æŠŠ</strong><code>test.scss  =&gt;  test.css</code>**</p>
<h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p><code>sass</code>ä½¿ç”¨<code>$</code>ç¬¦å·æ¥æ ‡è¯†å˜é‡ </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$highlight</span>-color: <span class="comment">#f90     </span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª åä¸º**<code>$highlight-color</code>**çš„å˜é‡, æˆ‘ä»¬å¯ä»¥æŠŠè¯¥å˜é‡ç”¨åœ¨ä»»ä½•ä½ç½®</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#app {</span></span><br><span class="line">    background-color:  <span class="variable">$highlight</span>-color;</span><br><span class="line">}     </span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ç©ºæ ¼åˆ†å‰²çš„å¤šå±æ€§å€¼ä¹Ÿå¯ä»¥æ ‡è¯†å˜é‡</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$basic</span>-border: 1px solid black;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">#app {</span></span><br><span class="line">    background-color:  <span class="variable">$highlight</span>-color;</span><br><span class="line">    border: <span class="variable">$basic</span>-border</span><br><span class="line">}     </span><br></pre></td></tr></tbody></table></figure>

<p><strong>å˜é‡èŒƒå›´</strong></p>
<p>ä¸<code>CSS</code>å±æ€§ä¸åŒï¼Œå˜é‡å¯ä»¥åœ¨<code>css</code>è§„åˆ™å—å®šä¹‰ä¹‹å¤–å­˜åœ¨ã€‚å½“å˜é‡å®šä¹‰åœ¨<code>css</code>è§„åˆ™å—å†…ï¼Œé‚£ä¹ˆè¯¥å˜é‡åªèƒ½åœ¨æ­¤è§„åˆ™å—å†…ä½¿ç”¨ã€‚å¦‚æœå®ƒä»¬å‡ºç°åœ¨ä»»ä½•å½¢å¼çš„<code>{...}</code>å—ä¸­ï¼ˆå¦‚<code>@media</code>æˆ–è€…<code>@font-face</code>å—ï¼‰ï¼Œæƒ…å†µä¹Ÿæ˜¯å¦‚æ­¤ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="variable">$nav</span>-color: <span class="comment">#F90;</span></span><br><span class="line">nav {</span><br><span class="line">  <span class="variable">$width</span>: 100px;</span><br><span class="line">  width: <span class="variable">$width</span>;</span><br><span class="line">  color: <span class="variable">$nav</span>-color;</span><br><span class="line">  background-color: black</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¯‘å </span></span><br><span class="line"></span><br><span class="line">nav {</span><br><span class="line">  width: 100px;</span><br><span class="line">  color: <span class="comment">#F90;</span></span><br><span class="line">  background-color: black;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>$nav-color</code>è¿™ä¸ªå˜é‡å®šä¹‰åœ¨äº†è§„åˆ™å—å¤–è¾¹ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæ ·å¼è¡¨ä¸­éƒ½å¯ä»¥åƒ <code>nav</code>è§„åˆ™å—é‚£æ ·å¼•ç”¨å®ƒã€‚<code>$width</code>è¿™ä¸ªå˜é‡å®šä¹‰åœ¨äº†<code>nav</code>çš„<code>{ }</code>è§„åˆ™å—å†…ï¼Œæ‰€ä»¥å®ƒåªèƒ½åœ¨<code>nav</code>è§„åˆ™å— å†…ä½¿ç”¨ã€‚è¿™æ„å‘³ç€æ˜¯ä½ å¯ä»¥åœ¨æ ·å¼è¡¨çš„å…¶ä»–åœ°æ–¹å®šä¹‰å’Œä½¿ç”¨<code>$width</code>å˜é‡ï¼Œä¸ä¼šå¯¹è¿™é‡Œé€ æˆå½±å“ã€‚</p>
<p><strong>åµŒå¥—è¯­æ³•</strong></p>
<p>å’Œlessä¸€æ ·,scssåŒæ ·æ”¯æŒ**<code>åµŒå¥—å‹</code>**çš„è¯­æ³•</p>
<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-id">#content</span> {</span><br><span class="line">    <span class="selector-tag">article</span> {</span><br><span class="line">      <span class="selector-tag">h1</span> { <span class="attribute">color</span>: <span class="number">#1dc08a</span> }</span><br><span class="line">      p {  font-style: italic; }</span><br><span class="line">    }</span><br><span class="line">    <span class="selector-tag">aside</span> { <span class="attribute">background-color</span>: <span class="number">#f90</span> }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>è½¬åŒ–å</p>
<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">article</span> <span class="selector-tag">h1</span> {</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#1dc08a</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">article</span> <span class="selector-tag">p</span> {</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">aside</span> {</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f90</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>&amp;çˆ¶é€‰æ‹©å™¨</strong></p>
<p>å‡å¦‚ä½ æƒ³é’ˆå¯¹æŸä¸ªç‰¹å®šå­å…ƒç´  è¿›è¡Œè®¾ç½®</p>
<p>æ¯”å¦‚</p>
<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-id">#content</span> {</span><br><span class="line">  <span class="selector-tag">article</span> {</span><br><span class="line">    <span class="selector-tag">h1</span> { <span class="attribute">color</span>: <span class="number">#1dc08a</span> }</span><br><span class="line">    p {  font-style: italic; }</span><br><span class="line">    <span class="selector-tag">a</span> {</span><br><span class="line">      <span class="attribute">color</span>: blue;</span><br><span class="line">      &amp;<span class="selector-pseudo">:hover</span> { <span class="attribute">color</span>: red }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  aside { background-color: <span class="number">#f90</span> }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å­¦åˆ°è¿™é‡Œ,æˆ‘ä»¬ä¼šå‘ç°scsså’Œlessæœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„,æœ€å¤§çš„åŒºåˆ«å°±åœ¨äºå£°æ˜å˜é‡çš„æ–¹å¼,lessé‡‡ç”¨çš„æ˜¯**<code>@å˜é‡å</code><strong>, è€Œscssé‡‡ç”¨çš„</strong><code>$å˜é‡å</code>**</p>
</blockquote>
<p>æ­¤æ—¶,æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æ¨¡æ¿ä¸­çš„ <strong><code>styles/variables.scss</code></strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201017230542301.png" alt="image-20201017230542301"></p>
<p>ä¸Šè¿°æ–‡ä»¶,å®é™…ä¸Šå®šä¹‰äº†æˆ‘ä»¬çš„ä¸€äº›åŸºç¡€æ•°å€¼,æ–¹ä¾¿å¤§å®¶åœ¨æŸä¸ªæ–‡ä»¶ç»Ÿä¸€çš„å¤„ç†.</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå¯¹scssè¿›è¡Œäº†è§£å’ŒæŒæ¡</p>
<h2 id="å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤"><a href="#å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤" class="headerlink" title="å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤"></a>å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤</h2><p><strong><code>ç›®æ ‡</code></strong> åœ¨<a href="https://gitee.com/">ç äº‘</a>æˆ–è€…<a href="https://github.com/">github</a>ä¸Šå»ºç«‹ç›¸åº”çš„è¿œç¨‹ä»“åº“,å¹¶å°†ä»£ç åˆ†æ”¯æäº¤</p>
<p><strong>å»ºç«‹è¿œç¨‹ä»“åº“</strong></p>
<blockquote>
<p>è¿œç¨‹ä»“åº“å»ºç«‹åªéœ€è¦åœ¨ç½‘ç«™ä¸Šç›´æ¥æ“ä½œå³å¯</p>
</blockquote>
<p><strong>æœ¬åœ°é¡¹ç›®æäº¤</strong></p>
<p><strong><code>æ³¨æ„</code></strong>: ç”±äºæˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®æ˜¯ç›´æ¥ä» vue-element-admin **<code>å…‹éš†</code><strong>è€Œæ¥,é‡Œé¢æ‹¥æœ‰åŸæ¥çš„æäº¤è®°å½•,ä¸ºäº†é¿å…å†²çª, å…ˆå°†åŸæ¥çš„</strong><code>.git</code>**æ–‡ä»¶å¤¹åˆ é™¤æ‰</p>
<p>å¹¶ä¸”å¯¹é¡¹ç›®è¿›è¡Œgitåˆå§‹åŒ–</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ git init  <span class="comment">#åˆå§‹åŒ–é¡¹ç›®</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$  git add . <span class="comment">#å°†ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜</span></span><br><span class="line">$  git commit -m <span class="string">'äººèµ„é¡¹ç›®åˆå§‹åŒ–'</span> <span class="comment">#å°†æš‚å­˜æåˆ°æœ¬åœ°ä»“åº“</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> <span class="comment">#æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ¨é€åˆ°è¿œç¨‹ä»“åº“</strong></p>
<p>æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸€èˆ¬å…ˆå°†**<code>è¿œç¨‹ä»“åº“åœ°å€</code>**ç”¨æœ¬åœ°ä»“åº“åˆ«åä»£æ›¿</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ git remote add origin &lt;è¿œç¨‹ä»“åº“åœ°å€&gt;  <span class="comment">#æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å½“æˆ‘ä»¬ä¸æ¸…æ¥šè‡ªå·±çš„ä»“åº“å¯¹åº”çš„originåœ°å€æ—¶, æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥çœ‹å½“å‰çš„è¿œç¨‹ä»“åº“åœ°å€</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ git remote -v <span class="comment">#æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„è¿œç¨‹ä»“åº“åœ°å€æ˜ å°„</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ¨é€masteråˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ git push -u origin master <span class="comment">#å°†masteråˆ†æ”¯æ¨é€åˆ°originæ‰€ä»£è¡¨çš„è¿œç¨‹ä»“åº“åœ°å€</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong>: åŒå­¦ä»¬ æ ¹æ®ä»¥ä¸Šæ“ä½œ,å°†æ‹‰å–ä¸‹çš„é¡¹ç›®æäº¤åˆ°è‡ªå·±çš„ä»“åº“é‡Œé¢</p>
<h2 id="APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»"><a href="#APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»" class="headerlink" title="APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»"></a>APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»</h2><p><strong><code>ç›®æ ‡</code></strong> ä»‹ç»APIæ¨¡å—çš„å•ç‹¬è¯·æ±‚å’Œ requestæ¨¡å—çš„å°è£…</p>
<h3 id="Axiosçš„æ‹¦æˆªå™¨ä»‹ç»"><a href="#Axiosçš„æ‹¦æˆªå™¨ä»‹ç»" class="headerlink" title="Axiosçš„æ‹¦æˆªå™¨ä»‹ç»"></a>Axiosçš„æ‹¦æˆªå™¨ä»‹ç»</h3><blockquote>
<p>è¯¥é¡¹ç›®é‡‡ç”¨äº†APIçš„å•ç‹¬æ¨¡å—å°è£…å’Œaxiosæ‹¦æˆªå™¨çš„æ–¹å¼è¿›è¡Œå¼€å‘</p>
</blockquote>
<p>axiosçš„æ‹¦æˆªå™¨åŸç†å¦‚ä¸‹</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200811012945409.png" alt="image-20200811012945409"></p>
<p><strong>axiosæ‹¦æˆªå™¨</strong></p>
<p>axiosä½œä¸ºç½‘ç»œè¯·æ±‚çš„ç¬¬ä¸‰æ–¹å·¥å…·, å¯ä»¥è¿›è¡Œè¯·æ±‚å’Œå“åº”çš„æ‹¦æˆª</p>
<p><strong>é€šè¿‡createåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„axioså®ä¾‹</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„axioså®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: process.env.VUE_APP_BASE_API, <span class="comment">// url = base url + request url</span></span><br><span class="line">  <span class="comment">// withCredentials: true, // send cookies when cross-domain requests</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span> <span class="comment">// è¶…æ—¶æ—¶é—´</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯·æ±‚æ‹¦æˆªå™¨</strong></p>
<p>è¯·æ±‚æ‹¦æˆªå™¨ä¸»è¦å¤„ç† tokençš„**<code>ç»Ÿä¸€æ³¨å…¥é—®é¢˜</code>**</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// axiosçš„è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> {</span><br><span class="line">    <span class="comment">// do something before request is sent</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">      <span class="comment">// let each request carry token</span></span><br><span class="line">      <span class="comment">// ['X-Token'] is a custom headers key</span></span><br><span class="line">      <span class="comment">// please modify it according to the actual situation</span></span><br><span class="line">      config.headers[<span class="string">'X-Token'</span>] = getToken()</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">    <span class="comment">// do something with request error</span></span><br><span class="line">    <span class="built_in">console</span>.log(error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  }</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å“åº”æ‹¦æˆªå™¨</strong></p>
<p>å“åº”æ‹¦æˆªå™¨ä¸»è¦å¤„ç† è¿”å›çš„**<code>æ•°æ®å¼‚å¸¸</code>** å’Œ**<code>æ•°æ®ç»“æ„</code>**é—®é¢˜</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">const</span> res = response.data</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if the custom code is not 20000, it is judged as an error.</span></span><br><span class="line">    <span class="keyword">if</span> (res.code !== <span class="number">20000</span>) {</span><br><span class="line">      Message({</span><br><span class="line">        <span class="attr">message</span>: res.message || <span class="string">'Error'</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">'error'</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">      })</span><br><span class="line">      <span class="keyword">if</span> (res.code === <span class="number">50008</span> || res.code === <span class="number">50012</span> || res.code === <span class="number">50014</span>) {</span><br><span class="line">        <span class="comment">// to re-login</span></span><br><span class="line">        MessageBox.confirm(<span class="string">'You have been logged out, you can cancel to stay on this page, or log in again'</span>, <span class="string">'Confirm logout'</span>, {</span><br><span class="line">          <span class="attr">confirmButtonText</span>: <span class="string">'Re-Login'</span>,</span><br><span class="line">          <span class="attr">cancelButtonText</span>: <span class="string">'Cancel'</span>,</span><br><span class="line">          <span class="attr">type</span>: <span class="string">'warning'</span></span><br><span class="line">        }).then(<span class="function">() =&gt;</span> {</span><br><span class="line">          store.dispatch(<span class="string">'user/resetToken'</span>).then(<span class="function">() =&gt;</span> {</span><br><span class="line">            location.reload()</span><br><span class="line">          })</span><br><span class="line">        })</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(res.message || <span class="string">'Error'</span>))</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'err'</span> + error) <span class="comment">// for debug</span></span><br><span class="line">    Message({</span><br><span class="line">      <span class="attr">message</span>: error.message,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">'error'</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">    })</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  }</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¿™é‡Œä¸ºäº†åç»­æ›´æ¸…æ¥šçš„ä¹¦å†™ä»£ç ,æˆ‘ä»¬å°†åŸæœ‰ä»£ç æ³¨é‡Šæ‰,æ¢æˆå¦‚ä¸‹ä»£ç </p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºä¸€ä¸ªaxiosçš„å®ä¾‹  è€Œä¸”è¿™ä¸ªå®ä¾‹è¦æœ‰è¯·æ±‚æ‹¦æˆªå™¨ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create() <span class="comment">// åˆ›å»ºä¸€ä¸ªaxiosçš„å®ä¾‹</span></span><br><span class="line">service.interceptors.request.use() <span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use() <span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service <span class="comment">// å¯¼å‡ºaxioså®ä¾‹</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="apiæ¨¡å—çš„å•ç‹¬å°è£…"><a href="#apiæ¨¡å—çš„å•ç‹¬å°è£…" class="headerlink" title="apiæ¨¡å—çš„å•ç‹¬å°è£…"></a><strong>apiæ¨¡å—çš„å•ç‹¬å°è£…</strong></h3><p>æˆ‘ä»¬ä¹ æƒ¯æ€§çš„å°†æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ æ”¾ç½®åœ¨apiç›®å½•ä¸‹ç»Ÿä¸€ç®¡ç†,æŒ‰ç…§æ¨¡å—è¿›è¡Œåˆ’åˆ†</p>
<p><strong>å•ç‹¬å°è£…ä»£ç </strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/vue-admin-template/user/login'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">token</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/vue-admin-template/user/info'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'get'</span>,</span><br><span class="line">    <span class="attr">params</span>: { token }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logout</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/vue-admin-template/user/logout'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­,ä½¿ç”¨äº†å°è£…çš„requestå·¥å…·,æ¯ä¸ªæ¥å£çš„è¯·æ±‚éƒ½å•ç‹¬**<code>å¯¼å‡º</code>**äº†ä¸€ä¸ªæ–¹æ³•,è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯,ä»»ä½•ä½ç½®éœ€è¦è¯·æ±‚çš„è¯,å¯ä»¥ç›´æ¥å¼•ç”¨æˆ‘ä»¬å¯¼å‡ºçš„è¯·æ±‚æ–¹æ³•</p>
<p>ä¸ºäº†åç»­æ›´å¥½çš„å¼€å‘ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°†<strong>user.js</strong>ä»£ç çš„æ–¹æ³•è®¾ç½®ä¸ºç©ºï¼Œåç»­åœ¨è¿›è¡Œæ›´æ­£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// import request from '@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>) </span>{</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">token</span>) </span>{</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logout</span>(<span class="params"></span>) </span>{</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å°†requestå’Œç”¨æˆ·æ¨¡å—çš„ä»£ç è¿›è¡Œæ¸…ç†ï¼Œç†è§£requestå’Œæ¨¡å—å°è£…</p>
<h2 id="å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼"><a href="#å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼" class="headerlink" title="å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼"></a>å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼</h2><p><strong><code>ç›®æ ‡</code></strong> å°†ä¸€äº›å…¬å…±çš„å›¾ç‰‡å’Œæ ·å¼èµ„æºæ”¾å…¥åˆ° è§„å®šç›®å½•ä¸­</p>
<blockquote>
<p>æˆ‘ä»¬å·²ç»å°†æ•´ä½“çš„åŸºç¡€æ¨¡å—è¿›è¡Œäº†ç®€å•çš„ä»‹ç»ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯¥é¡¹ç›®æ‰€ç”¨åˆ°çš„å›¾ç‰‡å’Œæ ·å¼è¿›è¡Œç»Ÿä¸€çš„å¤„ç†</p>
</blockquote>
<p> <strong>å›¾ç‰‡èµ„æº</strong></p>
<blockquote>
<p>å›¾ç‰‡èµ„æºåœ¨è¯¾ç¨‹èµ„æ–™çš„å›¾ç‰‡æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å°†**<code>common</code>**æ–‡ä»¶å¤¹æ‹·è´æ”¾ç½®åˆ° **<code>assets</code>**ç›®å½•å³å¯</p>
</blockquote>
<p><strong>æ ·å¼</strong></p>
<blockquote>
<p>æ ·å¼èµ„æºåœ¨  èµ„æº/æ ·å¼ç›®å½•ä¸‹</p>
</blockquote>
<p>ä¿®æ”¹**<code>variables.scss</code>**</p>
<p>æ–°å¢**<code>common.scss</code>**</p>
<p>æˆ‘ä»¬åœ¨**<code>variables.scss</code>**æ·»åŠ äº†ä¸€äº›åŸºç¡€çš„å˜é‡å€¼</p>
<p>æˆ‘ä»¬æä¾›äº† ä¸€ä»½å…¬å…±çš„**<code>common.scss</code>**æ ·å¼,é‡Œé¢å†…ç½®äº†ä¸€éƒ¨åˆ†å†…å®¹çš„æ ·å¼,åœ¨å¼€å‘æœŸé—´å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„å®ç°é¡µé¢æ ·å¼å’Œå¸ƒå±€</p>
<p>å°†ä¸¤ä¸ªæ–‡ä»¶æ”¾ç½®åˆ°<strong>styles</strong>ç›®å½•ä¸‹ï¼Œç„¶ååœ¨**<code>index.scss</code>**ä¸­å¼•å…¥è¯¥æ ·å¼</p>
<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">'./common.scss'</span>; <span class="comment">//å¼•å…¥common.scssæ ·å¼è¡¨ </span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šæ³¨æ„åœ¨scssæ–‡ä»¶ä¸­ï¼Œé€šè¿‡</strong>@import</strong> å¼•å…¥å…¶ä»–æ ·å¼æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„æœ€ååŠ åˆ†å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å°†å…¬å…±èµ„æºçš„å›¾ç‰‡å’Œæ ·å¼æ”¾ç½®åˆ°è§„å®šä½ç½®</p>
<h1 id="2-ç™»å½•æ¨¡å—"><a href="#2-ç™»å½•æ¨¡å—" class="headerlink" title="2.ç™»å½•æ¨¡å—"></a>2.ç™»å½•æ¨¡å—</h1><p><a href="http://ihrm-java.itheima.net/#/login">çº¿ä¸Šåœ°å€</a></p>
<p>æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å°†åœ¨ç°æœ‰æ¨¡æ¿çš„åŸºç¡€ä¸Šï¼Œå®Œæˆå¦‚å›¾çš„ç™»å½•æ¨¡å—çš„åŠŸèƒ½</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200811014205189.png" alt="image-20200811014205189"></p>
<h2 id="è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°"><a href="#è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°" class="headerlink" title="è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°"></a>è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°</h2><p><strong><code>ç›®æ ‡</code></strong>: è®¾ç½®ç»Ÿä¸€çš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™title</p>
<p>åœ¨æ­£å¼å¼€å‘ä¸šåŠ¡ä¹‹å‰ï¼Œå…ˆå°†é¡¹ç›®çš„<strong>æœ¬åœ°ç«¯å£</strong>å’Œ<strong>ç½‘ç«™åç§°</strong>è¿›è¡Œä¸€ä¸‹è°ƒæ•´</p>
<p><strong>æœ¬åœ°æœåŠ¡ç«¯å£</strong>:  åœ¨**<code>vue.config.js</code>**ä¸­è¿›è¡Œè®¾ç½®</p>
<p><strong><code>vue.config.js</code></strong> å°±æ˜¯vueé¡¹ç›®ç›¸å…³çš„ç¼–è¯‘ï¼Œé…ç½®ï¼Œæ‰“åŒ…ï¼Œå¯åŠ¨æœåŠ¡ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒçš„æ ¸å¿ƒåœ¨äº<strong>webpack</strong>ï¼Œä½†æ˜¯åˆä¸åŒäºwebpackï¼Œç›¸å½“äºæ”¹è‰¯ç‰ˆçš„webpackï¼Œ <a href="https://cli.vuejs.org/zh/">æ–‡æ¡£åœ°å€</a></p>
<blockquote>
<p>å¦‚å›¾ï¼Œæ˜¯å¼€å‘ç¯å¢ƒæœåŠ¡ç«¯å£çš„ä½ç½®</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200710162221402.png" alt="image-20200710162221402"></p>
<p>æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„ **<code>process.env.port</code>**å®é™…ä¸Šæ˜¯ä¸€ä¸ªnodejsæœåŠ¡ä¸‹çš„ç¯å¢ƒå˜é‡ï¼Œè¯¥å˜é‡åœ¨å“ªé‡Œè®¾ç½®å‘¢ï¼Ÿ</p>
<p>åœ¨é¡¹ç›®ä¸‹, æˆ‘ä»¬å‘ç°äº†**<code>.env.development</code><strong>å’Œ</strong><code>.env.production</code>**ä¸¤ä¸ªæ–‡ä»¶</p>
<p>development =&gt; å¼€å‘ç¯å¢ƒ</p>
<p>production =&gt; ç”Ÿäº§ç¯å¢ƒ</p>
<p>å½“æˆ‘ä»¬è¿è¡Œ<strong>npm run dev</strong>è¿›è¡Œå¼€å‘è°ƒè¯•çš„æ—¶å€™,æ­¤æ—¶ä¼šåŠ è½½æ‰§è¡Œ**<code>.env.development</code>**æ–‡ä»¶å†…å®¹</p>
<p>å½“æˆ‘ä»¬è¿è¡Œ<strong>npm run build:prod</strong>è¿›è¡Œç”Ÿäº§ç¯å¢ƒæ‰“åŒ…çš„æ—¶å€™,ä¼šåŠ è½½æ‰§è¡Œ**<code>.env.production</code>**æ–‡ä»¶å†…å®¹</p>
<p>æ‰€ä»¥,å¦‚æœæƒ³è¦è®¾ç½®å¼€å‘ç¯å¢ƒçš„æ¥å£,ç›´æ¥åœ¨**<code>.env.development</code>**ä¸­å†™å…¥å¯¹äºportå˜é‡çš„èµ‹å€¼å³å¯</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®ç«¯å£å·</span></span><br><span class="line">port = 8888</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚æ³¨æ„</code></strong>:ä¿®æ”¹æœåŠ¡çš„é…ç½®æ–‡ä»¶,æƒ³è¦ç”Ÿæ•ˆçš„è¯,å¿…é¡»è¦é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå€¼â€˜8888â€™åé¢ä¸èƒ½ç•™æœ‰ç©ºæ ¼</p>
<p><strong>ç½‘ç«™åç§°</strong></p>
<p>ç½‘ç«™åç§°å®é™…åœ¨<strong>configureWebpack</strong>é€‰é¡¹ä¸­çš„<strong>name</strong>é€‰é¡¹,é€šè¿‡é˜…è¯»ä»£ç ,æˆ‘ä»¬ä¼šå‘ç°nameå®é™…ä¸Šæ¥æºäºsrcç›®å½•ä¸‹</p>
<p>**<code>settings.js</code>**æ–‡ä»¶</p>
<p>æ‰€ä»¥,æˆ‘ä»¬å¯ä»¥å°†ç½‘ç«™åç§°æ”¹æˆâ€<strong><code>äººåŠ›èµ„æºç®¡ç†å¹³å°</code></strong>â€œ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200710164040042.png" alt="image-20200710164040042"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code></strong>:ä¿®æ”¹æœåŠ¡çš„é…ç½®æ–‡ä»¶,æƒ³è¦ç”Ÿæ•ˆçš„è¯,å¿…é¡»è¦é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå€¼â€˜8888â€™åé¢ä¸èƒ½ç•™æœ‰ç©ºæ ¼</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆç½‘ç«™çš„å¼€å‘æœåŠ¡ç«¯å£è®¾ç½®å’Œç½‘ç«™åç§°è®¾ç½®</p>
<h2 id="ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€"><a href="#ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€" class="headerlink" title="ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€"></a>ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€</h2><p>**<code>ç›®æ ‡</code>**å®Œæˆç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€</p>
<p><strong>é¡µé¢æ•ˆæœ</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200710164517167.png" alt="image-20200710164517167"></p>
<p>é¦–å…ˆè¦å®ç°ä»¥ä¸Šçš„é¡µé¢æ•ˆæœ, æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å½“å‰çš„ç™»å½•é¡µé¢è¿›è¡Œç›¸åº”çš„æ”¹é€ </p>
<p><strong>è®¾ç½®å¤´éƒ¨èƒŒæ™¯</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®æ ‡é¢˜å›¾ç‰‡ @æ˜¯è®¾ç½®çš„åˆ«å--&gt;</span><br><span class="line">&lt;div class="title-container"&gt;</span><br><span class="line">        &lt;h3 class="title"&gt;</span><br><span class="line">          &lt;img src="@/assets/common/login-logo.png" alt=""&gt;</span><br><span class="line">        &lt;/h3&gt;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼š <code>@</code>æ˜¯æˆ‘ä»¬åœ¨vue.config.jsä¸­è®¾ç½®çš„ä¸€ä¸ªè·¯å¾„åˆ«åï¼ŒæŒ‡å®šsrcæ ¹ç›®å½•ï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯»æ‰¾æ–‡ä»¶</p>
<p><strong>è®¾ç½®èƒŒæ™¯å›¾ç‰‡</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/* reset element-ui css */</span></span><br><span class="line"><span class="selector-class">.login-container</span> {</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'~@/assets/common/login.jpg'</span>); // è®¾ç½®èƒŒæ™¯å›¾ç‰‡</span><br><span class="line">  <span class="attribute">background-position</span>: center; // å°†å›¾ç‰‡ä½ç½®è®¾ç½®ä¸ºå……æ»¡æ•´ä¸ªå±å¹•</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼š å¦‚éœ€è¦åœ¨æ ·å¼è¡¨ä¸­ä½¿ç”¨</strong><code>@</code><strong>åˆ«åçš„æ—¶å€™ï¼Œéœ€è¦åœ¨@å‰é¢åŠ ä¸Šä¸€ä¸ª</strong><code>~</code>**ç¬¦å·ï¼Œå¦åˆ™ä¸è¯†åˆ«</p>
<p><strong>è®¾ç½®æ‰‹æœºå·å’Œå¯†ç çš„å­—ä½“é¢œè‰²</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line">$light_gray: <span class="number">#68b0fe</span>;  // å°†è¾“å…¥æ¡†é¢œè‰²æ”¹æˆè“è‰²</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®è¾“å…¥è¡¨å•æ•´ä½“èƒŒæ™¯è‰²</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.el-form-item</span> {</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.7</span>); // è¾“å…¥ç™»å½•è¡¨å•çš„èƒŒæ™¯è‰²</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#454545</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®é”™è¯¯ä¿¡æ¯çš„é¢œè‰²</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.el-form-item__error</span> {</span><br><span class="line">   <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®ç™»å½•æŒ‰é’®çš„æ ·å¼</strong></p>
<blockquote>
<p>éœ€è¦ç»™el-button å¢åŠ ä¸€ä¸ªloginBtnçš„classæ ·å¼</p>
</blockquote>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.loginBtn</span> {</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#407ffe</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¿®æ”¹æ˜¾ç¤ºçš„æç¤ºæ–‡æœ¬å’Œç™»å½•æ–‡æœ¬</strong></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tips"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"margin-right:20px;"</span>&gt;</span>è´¦å·: 13800000002<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span>&gt;</span> å¯†ç : 123456<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç»è¿‡ä»¥ä¸Šçš„æ”¹åŠ¨, æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„ç™»å½•é¡µé¢</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200711002545085.png" alt="image-20200711002545085"></p>
<blockquote>
<p>è§£é‡Š:æˆ‘ä»¬è¯¥é¡¹ç›®çš„ä¾§é‡ç‚¹åœ¨äºæ›´å¤šçš„ä»‹ç»Vueä¸­å°é¡¹ç›®æ‰€åº”ç”¨çš„æŠ€æœ¯,æ‰€ä»¥å¯¹äºä¸€äº›è¿‡äºç»†èŠ‚çš„æ ·å¼æˆ–è€…å¸ƒå±€,æˆ‘ä»¬é‡‡ç”¨ç›´æ¥ç²˜è´´æˆ–è€…æ‹·è´æˆå‹ä»£ç çš„æ–¹å¼,åŒå­¦ä»¬å¯ä»¥é€šè¿‡è¯¾ä¸‹å¤šå¤šç»ƒä¹ </p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼š <code>@</code>æ˜¯æˆ‘ä»¬åœ¨vue.config.jsä¸­è®¾ç½®çš„ä¸€ä¸ªè·¯å¾„åˆ«åï¼ŒæŒ‡å®šsrcæ ¹ç›®å½•ï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯»æ‰¾æ–‡ä»¶</p>
<p>**<code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼š å¦‚éœ€è¦åœ¨æ ·å¼è¡¨ä¸­ä½¿ç”¨</strong><code>@</code><strong>åˆ«åçš„æ—¶å€™ï¼Œéœ€è¦åœ¨@å‰é¢åŠ ä¸Šä¸€ä¸ª</strong><code>~</code>**ç¬¦å·ï¼Œå¦åˆ™ä¸è¯†åˆ«</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®Œæˆç™»å½•é¦–é¡µçš„åŸºæœ¬å¸ƒå±€</p>
<h2 id="ç™»å½•è¡¨å•çš„æ ¡éªŒ"><a href="#ç™»å½•è¡¨å•çš„æ ¡éªŒ" class="headerlink" title="ç™»å½•è¡¨å•çš„æ ¡éªŒ"></a>ç™»å½•è¡¨å•çš„æ ¡éªŒ</h2><p>**<code>ç›®æ ‡</code>**å¯¹ç™»å½•è¡¨å•è¿›è¡Œè§„åˆ™æ ¡éªŒ</p>
<blockquote>
<p>åŸºç¡€æ¨¡æ¿å·²ç»æœ‰äº†åŸºç¡€æ ¡éªŒçš„ä»£ç ,æ‰€ä»¥æˆ‘ä»¬è¿™ä¸€ç« èŠ‚æ›´å¤šçš„æ˜¯ä¿®æ­£å’Œå®Œå–„</p>
</blockquote>
<h3 id="el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶"><a href="#el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶" class="headerlink" title="el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶"></a><strong>el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶</strong></h3><p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200830212537835.png" alt="image-20200830212537835"></p>
<h3 id="æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ"><a href="#æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ" class="headerlink" title="æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ"></a>æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ</h3><p><strong>å­—æ®µåå¯¹åº”</strong></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦å¯¹åº”? å› ä¸ºåŸºç¡€æ¨¡æ¿é‡‡ç”¨çš„æ˜¯**<code>username</code><strong>çš„å­—æ®µ,ä½†æ˜¯å®é™…æ¥å£ä¸­é‡‡ç”¨çš„æ˜¯</strong><code>mobile</code><strong>çš„å­—æ®µ,ä¸ºäº†æ›´æ–¹ä¾¿çš„å†™ä»£ç ,æ‰€ä»¥æˆ‘ä»¬å°†</strong><code>username</code><strong>æ”¹æˆ</strong><code>mobile</code>**</p>
</blockquote>
<p>è¿™é‡Œé™¤äº†å­—æ®µåï¼Œè¿˜æœ‰æˆ‘ä»¬çš„è§„åˆ™æ ¡éªŒåç§°ï¼Œä»¥åŠpropåç§°ã€‚</p>
<p><strong>è‹±æ–‡æç¤ºå˜æˆä¸­æ–‡</strong></p>
<p>åŸºç¡€æ¨¡æ¿ä¸­éƒ½æ˜¯<strong>placeHolder</strong>å ä½ç¬¦æ˜¯è‹±æ–‡,è¦å˜æˆä¸­æ–‡</p>
<p>ç™»å½•æŒ‰é’®æ–‡å­—åŒæ ·éœ€è¦æ¢æˆä¸­æ–‡</p>
<p><strong>æ ¡éªŒæ‰‹æœºå·å’Œæ ¡éªŒå¯†ç </strong></p>
<p>åŸºç¡€æ¨¡æ¿ä¸­,å·²ç»åšäº†æ ¡éªŒ,æˆ‘ä»¬é’ˆå¯¹ä»£ç è¿›è¡Œä¸€äº›ä¼˜åŒ–</p>
<p>æ–°è§„åˆ™ï¼šæ‰‹æœºå·å¿…å¡«ï¼Œå¹¶ä¸”è¿›è¡Œæ ¼å¼æ ¡éªŒï¼Œå¯†ç å¿…å¡«ï¼Œé•¿åº¦6-16ä½ä¹‹é—´</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="comment">// è‡ªå®šä¹‰æ ¡éªŒå‡½æ•°</span></span><br><span class="line">   <span class="keyword">const</span> validateMobile = <span class="function"><span class="keyword">function</span>(<span class="params">rule, value, callback</span>) </span>{</span><br><span class="line">     <span class="comment">// æ ¡éªŒvalue</span></span><br><span class="line">     <span class="comment">// if (validMobile(value)) {</span></span><br><span class="line">     <span class="comment">//   // å¦‚æœé€šè¿‡ ç›´æ¥æ‰§è¡Œcallback</span></span><br><span class="line">     <span class="comment">//   callback()</span></span><br><span class="line">     <span class="comment">// } else {</span></span><br><span class="line">     <span class="comment">//   callback(new Error('æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'))</span></span><br><span class="line">     <span class="comment">// }</span></span><br><span class="line">     validMobile(value) ? callback() : callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'</span>))</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> {</span><br><span class="line">     <span class="attr">loginForm</span>: {</span><br><span class="line">       <span class="attr">mobile</span>: <span class="string">'13800000002'</span>,</span><br><span class="line">       <span class="attr">password</span>: <span class="string">'123456'</span></span><br><span class="line">     },</span><br><span class="line">     <span class="attr">loginRules</span>: {</span><br><span class="line">       <span class="attr">mobile</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span>, <span class="attr">message</span>: <span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span> }, {</span><br><span class="line">         <span class="attr">validator</span>: validateMobile, <span class="attr">trigger</span>: <span class="string">'blur'</span></span><br><span class="line">       }],</span><br><span class="line">       <span class="attr">password</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span>, <span class="attr">message</span>: <span class="string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span> }, {</span><br><span class="line">         <span class="attr">min</span>: <span class="number">6</span>, <span class="attr">max</span>: <span class="number">16</span>, <span class="attr">message</span>: <span class="string">'å¯†ç çš„é•¿åº¦åœ¨6-16ä½ä¹‹é—´ '</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span></span><br><span class="line">       }]</span><br><span class="line">     },</span><br><span class="line">     <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">     <span class="attr">passwordType</span>: <span class="string">'password'</span>,</span><br><span class="line">     <span class="attr">redirect</span>: <span class="literal">undefined</span></span><br><span class="line">   }</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬åœ¨**<code>utils/validate.js</code>**æ–¹æ³•ä¸­å¢åŠ äº†ä¸€ä¸ªæ ¡éªŒæ‰‹æœºå·çš„æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¡éªŒæ‰‹æœºå·</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validMobile</span>(<span class="params">str</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/^1[3-9]\d{9}$/</span>.test(str) <span class="comment">// æ ¡éªŒæ‰‹æœºå·</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>utils/validate.js</code>**æ˜¯ä¸€ä¸ªä¸“é—¨å­˜æ”¾æ ¡éªŒå·¥å…·æ–¹æ³•çš„æ–‡ä»¶</p>
<h3 id="å…³äºä¿®é¥°ç¬¦"><a href="#å…³äºä¿®é¥°ç¬¦" class="headerlink" title="å…³äºä¿®é¥°ç¬¦"></a>å…³äºä¿®é¥°ç¬¦</h3><p><strong>å…³äºä¿®é¥°ç¬¦</strong></p>
<blockquote>
<p>åœ¨è¯¥é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†äº‹ä»¶çš„å‡ ä¸ªä¿®é¥°ç¬¦ <strong><code>@keyup.enter.native</code></strong>  <strong><code>@click.native.prevent</code></strong></p>
</blockquote>
<p>@keyup.**<code>enter</code>**å±äºæŒ‰é”®ä¿®é¥°ç¬¦ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç›‘å¬åœ¨æŒ‰å›è½¦é”®çš„æ—¶å€™è§¦å‘ï¼Œå¯ä»¥å¦‚ä¸‹ç¼–å†™</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- åªæœ‰åœ¨ `key` æ˜¯ `Enter` æ—¶è°ƒç”¨ `vm.submit()` --&gt;</span><br><span class="line">&lt;input v-on:keyup.enter="submit"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>@keyup.enter.<strong><code>native</code></strong> è¡¨ç¤ºç›‘å¬ç»„ä»¶çš„åŸç”Ÿäº‹ä»¶ï¼Œæ¯”å¦‚ keyupå°±æ˜¯äºinputçš„åŸç”Ÿäº‹ä»¶ï¼Œè¿™é‡Œå†™nativeè¡¨ç¤ºkeyupæ˜¯ä¸€ä¸ªåŸç”Ÿäº‹ä»¶</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®ç°ç™»å½•ç”¨æˆ·çš„æ‰‹æœºå·å’Œå¯†ç æ ¡éªŒ</p>
<h2 id="Vue-Clié…ç½®è·¨åŸŸä»£ç†"><a href="#Vue-Clié…ç½®è·¨åŸŸä»£ç†" class="headerlink" title="Vue-Clié…ç½®è·¨åŸŸä»£ç†"></a>Vue-Clié…ç½®è·¨åŸŸä»£ç†</h2><p><strong><code>ç›®æ ‡</code></strong>: é€šè¿‡é…ç½®vue-cliçš„ä»£ç†è§£å†³è·¨åŸŸè®¿é—®çš„é—®é¢˜</p>
<h3 id="ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ</h3><p>å½“ä¸‹,æœ€æµè¡Œçš„å°±æ˜¯**<code>å‰ååˆ†ç¦»</code><strong>é¡¹ç›®,ä¹Ÿå°±æ˜¯</strong><code>å‰ç«¯é¡¹ç›®</code><strong>å’Œ</strong><code>åç«¯æ¥å£</code><strong>å¹¶ä¸åœ¨ä¸€ä¸ªåŸŸåä¹‹ä¸‹ï¼Œé‚£ä¹ˆå‰ç«¯é¡¹ç›®è®¿é—®åç«¯æ¥å£å¿…ç„¶å­˜åœ¨</strong><code>è·¨åŸŸ</code>**çš„è¡Œä¸º.</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200826110754199.png" alt="image-20200826110754199"></p>
<blockquote>
<p>æ€ä¹ˆè§£å†³è¿™ç§è·¨åŸŸ ï¼Ÿ</p>
</blockquote>
<p><strong><code>è¯·æ³¨æ„</code><strong>ï¼Œæˆ‘ä»¬æ‰€é‡åˆ°çš„è¿™ç§è·¨åŸŸæ˜¯ä½äº</strong>å¼€å‘ç¯å¢ƒ</strong>çš„ï¼ŒçœŸæ­£éƒ¨ç½²ä¸Šçº¿æ—¶çš„è·¨åŸŸæ˜¯<strong>ç”Ÿäº§ç¯å¢ƒ</strong>çš„</p>
<h3 id="è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜"><a href="#è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜" class="headerlink" title="è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜"></a>è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜</h3><p><strong>å¼€å‘ç¯å¢ƒçš„è·¨åŸŸ</strong></p>
<p>å¼€å‘ç¯å¢ƒçš„è·¨åŸŸï¼Œä¹Ÿå°±æ˜¯åœ¨**<code>vue-cliè„šæ‰‹æ¶ç¯å¢ƒ</code><strong>ä¸‹å¼€å‘å¯åŠ¨æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬è®¿é—®æ¥å£æ‰€é‡åˆ°çš„è·¨åŸŸé—®é¢˜ï¼Œvue-cliä¸ºæˆ‘ä»¬åœ¨æœ¬åœ°</strong><code>å¼€å¯äº†ä¸€ä¸ªæœåŠ¡</code><strong>,å¯ä»¥é€šè¿‡è¿™ä¸ªæœåŠ¡å¸®æˆ‘ä»¬</strong><code>ä»£ç†è¯·æ±‚</code>**,è§£å†³è·¨åŸŸé—®é¢˜</p>
<p>è¿™å°±æ˜¯vue-clié…ç½®<strong>webpackçš„åå‘ä»£ç†</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200811022013103.png" alt="image-20200811022013103"></p>
<blockquote>
<p>é‡‡ç”¨vue-cliçš„ä»£ç†é…ç½®</p>
</blockquote>
<p>vue-cliçš„é…ç½®æ–‡ä»¶å³**<code>vue.config.js</code>**,è¿™é‡Œæœ‰æˆ‘ä»¬éœ€è¦çš„ <a href="https://cli.vuejs.org/zh/config/#devserver-proxy">ä»£ç†é€‰é¡¹</a></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">devServer</span>: {</span><br><span class="line">   <span class="comment">// ä»£ç†é…ç½®</span></span><br><span class="line">    <span class="attr">proxy</span>: {</span><br><span class="line">        <span class="comment">// è¿™é‡Œçš„api è¡¨ç¤ºå¦‚æœæˆ‘ä»¬çš„è¯·æ±‚åœ°å€æœ‰/apiçš„æ—¶å€™,å°±å‡ºè§¦å‘ä»£ç†æœºåˆ¶</span></span><br><span class="line">        <span class="comment">// localhost:8888/api/abc  =&gt; ä»£ç†ç»™å¦ä¸€ä¸ªæœåŠ¡å™¨</span></span><br><span class="line">        <span class="comment">// æœ¬åœ°çš„å‰ç«¯  =ã€‹ æœ¬åœ°çš„åç«¯  =ã€‹ ä»£ç†æˆ‘ä»¬å‘å¦ä¸€ä¸ªæœåŠ¡å™¨å‘è¯·æ±‚ ï¼ˆè¡Œå¾—é€šï¼‰</span></span><br><span class="line">        <span class="comment">// æœ¬åœ°çš„å‰ç«¯  =ã€‹ å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨å‘è¯·æ±‚ ï¼ˆè·¨åŸŸ è¡Œä¸é€šï¼‰</span></span><br><span class="line">        <span class="string">'/api'</span>: {</span><br><span class="line">        <span class="attr">target</span>: <span class="string">'www.baidu.com'</span>, <span class="comment">// æˆ‘ä»¬è¦ä»£ç†çš„åœ°å€</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è·¨åŸŸ éœ€è¦è®¾ç½®æ­¤å€¼ä¸ºtrue æ‰å¯ä»¥è®©æœ¬åœ°æœåŠ¡ä»£ç†æˆ‘ä»¬å‘å‡ºè¯·æ±‚</span></span><br><span class="line">         <span class="comment">// è·¯å¾„é‡å†™</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: {</span><br><span class="line">            <span class="comment">// é‡æ–°è·¯ç”±  localhost:8888/api/login  =&gt; www.baidu.com/api/login</span></span><br><span class="line">            <span class="string">'^/api'</span>: <span class="string">''</span> <span class="comment">// å‡è®¾æˆ‘ä»¬æƒ³æŠŠ localhost:8888/api/login å˜æˆwww.baidu.com/login å°±éœ€è¦è¿™ä¹ˆåš </span></span><br><span class="line">        }</span><br><span class="line">      },</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬åœ¨vue-clié¡¹ç›®ä¸­é…ç½®çš„ä»£ç†è®¾ç½®</p>
<blockquote>
<p>æ¥ä¸‹æ¥,æˆ‘ä»¬åœ¨ä»£ç ä¸­å°†è¦ä»£ç†çš„åç«¯åœ°å€å˜æˆ <a href="http://ihrm-java.itheima.net/">åç«¯æ¥å£åœ°å€</a></p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ä»£ç†è·¨åŸŸçš„é…ç½®</span></span><br><span class="line">   <span class="attr">proxy</span>: {</span><br><span class="line">     <span class="comment">// å½“æˆ‘ä»¬çš„æœ¬åœ°çš„è¯·æ±‚ æœ‰/apiçš„æ—¶å€™ï¼Œå°±ä¼šä»£ç†æˆ‘ä»¬çš„è¯·æ±‚åœ°å€å‘å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨å‘å‡ºè¯·æ±‚</span></span><br><span class="line">     <span class="string">'/api'</span>: {</span><br><span class="line">       <span class="attr">target</span>: <span class="string">'http://ihrm-java.itheima.net/'</span>, <span class="comment">// è·¨åŸŸè¯·æ±‚çš„åœ°å€</span></span><br><span class="line">       <span class="attr">changeOrigin</span>: <span class="literal">true</span> <span class="comment">// åªæœ‰è¿™ä¸ªå€¼ä¸ºtrueçš„æƒ…å†µä¸‹ æ‰è¡¨ç¤ºå¼€å¯è·¨åŸŸ</span></span><br><span class="line">     }</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰è¿›è¡Œ</strong><code>pathRewrite</code></strong>,å› ä¸ºåç«¯æ¥å£å°±æ˜¯**<code>ihrm-java.itheima.net/api</code>**è¿™ç§æ ¼å¼,æ‰€ä»¥ä¸éœ€è¦é‡å†™</p>
<p>**<code>vue.config.js</code>**çš„æ”¹åŠ¨å¦‚æœè¦ç”Ÿæ•ˆ,éœ€è¦è¿›è¡Œé‡å¯æœåŠ¡</p>
<p>åŒæ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åŒæ—¶éœ€è¦æ³¨é‡Šæ‰ mockçš„åŠ è½½ï¼Œå› ä¸ºmock-serverä¼šå¯¼è‡´ä»£ç†æœåŠ¡çš„å¼‚å¸¸</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// before: require('./mock/mock-server.js'),  // æ³¨é‡Šmock-serveråŠ è½½</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç”Ÿäº§ç¯å¢ƒçš„è·¨åŸŸ</strong></p>
<p>ç”Ÿäº§ç¯å¢ƒè¡¨ç¤ºæˆ‘ä»¬å·²ç»å¼€å‘å®Œæˆé¡¹ç›®ï¼Œå°†é¡¹ç›®éƒ¨ç½²åˆ°äº†æœåŠ¡å™¨ä¸Š,è¿™æ—¶å·²ç»æ²¡æœ‰äº†vue-cliè„šæ‰‹æ¶çš„**<code>è¾…åŠ©</code><strong>äº†ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠæ‰“åŒ…å¥½çš„</strong><code>html+js+css</code><strong>äº¤ä»˜è¿ç»´äººå‘˜ï¼Œæ”¾åˆ°</strong><code>Nginx</code><strong>æœåŠ¡å™¨è€Œå·²,æ‰€ä»¥æ­¤æ—¶éœ€è¦å€ŸåŠ©</strong><code>Nginx</code>**çš„åå‘ä»£ç†æ¥è¿›è¡Œ</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">server{</span><br><span class="line">    <span class="comment"># ç›‘å¬9099ç«¯å£</span></span><br><span class="line">    listen 9099;</span><br><span class="line">    <span class="comment"># æœ¬åœ°çš„åŸŸåæ˜¯localhost</span></span><br><span class="line">    server_name localhost;</span><br><span class="line">    <span class="comment">#å‡¡æ˜¯localhost:9099/apiè¿™ä¸ªæ ·å­çš„ï¼Œéƒ½è½¬å‘åˆ°çœŸæ­£çš„æœåŠ¡ç«¯åœ°å€http://baidu.com</span></span><br><span class="line">    location ^~ /api {</span><br><span class="line">        proxy_pass http://baidu.com;</span><br><span class="line">    }    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æ³¨æ„</code></strong>:è¿™é‡Œçš„æ“ä½œä¸€èˆ¬ç”±è¿ç»´äººå‘˜å®Œæˆ,éœ€è¦å‰ç«¯è¿›è¡Œæ“ä½œ,è¿™é‡Œæˆ‘ä»¬è¿›è¡Œä¸€ä¸‹ç®€å•äº†è§£</p>
<p>æ›´å¤šæ­£å‘ä»£ç†å’Œåå‘ä»£ç†çŸ¥è¯†,è¯·é˜…è¯»è¿™ç¯‡æ–‡ç« <a href="https://www.cnblogs.com/ysocean/p/9392908.html">Nginxåå‘ä»£ç†</a></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰è¿›è¡Œ</strong><code>pathRewrite</code></strong>,å› ä¸ºåç«¯æ¥å£å°±æ˜¯**<code>ihrm-java.itheima.net/api</code>**è¿™ç§æ ¼å¼,æ‰€ä»¥ä¸éœ€è¦é‡å†™</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š é…ç½®vue-cliçš„åå‘ä»£ç†ï¼Œå®ç°åç«¯æ¥å£çš„è·¨åŸŸè®¿é—®</p>
<h2 id="å°è£…å•ç‹¬çš„ç™»å½•æ¥å£"><a href="#å°è£…å•ç‹¬çš„ç™»å½•æ¥å£" class="headerlink" title="å°è£…å•ç‹¬çš„ç™»å½•æ¥å£"></a>å°è£…å•ç‹¬çš„ç™»å½•æ¥å£</h2><p><strong><code>ç›®æ ‡</code></strong> åœ¨å•ç‹¬è¯·æ±‚æ¨¡å—ä¸­,å•ç‹¬å°è£…ç™»å½•æ¥å£</p>
<blockquote>
<p>å®Œæˆç™»å½•æ¨¡å—ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç™»å½•æ¥å£è¿›è¡Œå°è£…</p>
</blockquote>
<p>é¦–å…ˆï¼ŒæŸ¥é˜…æ¥å£æ–‡æ¡£ä¸­çš„ç™»å½•æ¥å£</p>
<blockquote>
<p>åŸºç¡€æ¨¡æ¿å·²ç»æœ‰äº†åŸæ¥çš„ç™»å½•ä»£ç ,æˆ‘ä»¬åªéœ€è¦è¿›è¡Œç®€å•çš„æ”¹é€ å³å¯</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªaxioså¯¹è±¡ =&gt; promise  // è¿”å›äº†ä¸€ä¸ªpromiseå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/login'</span>, <span class="comment">// å› ä¸ºæ‰€æœ‰çš„æ¥å£éƒ½è¦è·¨åŸŸ è¡¨ç¤ºæ‰€æœ‰çš„æ¥å£è¦å¸¦ /api</span></span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚å›¾</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812002834804.png" alt="image-20200812002834804"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå°è£…å•ç‹¬çš„ç™»å½•æ¥å£</p>
<h2 id="å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token"><a href="#å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token" class="headerlink" title="å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token"></a>å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token</h2><p>**<code>ç›®æ ‡</code>**åœ¨vuexä¸­å°è£…ç™»å½•çš„action,å¹¶å¤„ç†token</p>
<blockquote>
<p>åœ¨è¿™ä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨vuexä¸­åŠ å…¥å¯¹äºç”¨æˆ·çš„ç™»å½•çš„å¤„ç†</p>
</blockquote>
<h3 id="åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†"><a href="#åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†" class="headerlink" title="åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†"></a>åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†</h3><p>åœ¨ä¼ ç»Ÿæ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ç™»å½•çš„é€»è¾‘å¾ˆç®€å•ï¼Œå¦‚å›¾</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812003821680.png" alt="image-20200812003821680"></p>
<blockquote>
<p>ä¸Šå›¾ä¸­ï¼Œç»„ä»¶ç›´æ¥å’Œæ¥å£æ‰“äº¤é“ï¼Œè¿™å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·tokenè¿™ä¸€é«˜é¢‘ä½¿ç”¨çš„**<code>é’¥åŒ™</code>**ï¼Œæˆ‘ä»¬éœ€è¦è®©vuexæ¥ä»‹å…¥ï¼Œå°†ç”¨æˆ·çš„tokençŠ¶æ€å…±äº«ï¼Œæ›´æ–¹ä¾¿çš„è¯»å–ï¼Œå¦‚å›¾</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812011826021.png" alt="image-20200812011826021"></p>
<p><strong>å®ç°store/modules/user.jsåŸºæœ¬é…ç½®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> state = {}</span><br><span class="line"><span class="comment">// ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> mutations = {}</span><br><span class="line"><span class="comment">// æ‰§è¡Œå¼‚æ­¥</span></span><br><span class="line"><span class="keyword">const</span> actions = {}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®tokençš„å…±äº«çŠ¶æ€</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> state = {</span><br><span class="line">  <span class="attr">token</span>: <span class="literal">null</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬éœ€è¦çŸ¥é“,**<code>é’¥åŒ™</code>**ä¸èƒ½æ¯æ¬¡éƒ½é€šè¿‡ç™»å½•è·å–,æˆ‘ä»¬å¯ä»¥å°†tokenæ”¾ç½®åˆ°æœ¬åœ°çš„ç¼“å­˜ä¸­</p>
</blockquote>
<p>åœ¨**<code>utils/auth.js</code><strong>ä¸­,åŸºç¡€æ¨¡æ¿å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†</strong><code>è·å–token</code><strong>,</strong><code>è®¾ç½®token</code><strong>,</strong><code>åˆ é™¤token</code>**çš„æ–¹æ³•,å¯ä»¥ç›´æ¥ä½¿ç”¨</p>
<p>åªéœ€è¦å°†å­˜å‚¨çš„keyæ”¾ç½®æˆç‰¹å®šå€¼å³å¯</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Cookies <span class="keyword">from</span> <span class="string">'js-cookie'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TokenKey = <span class="string">'hrsaas-ihrm-token'</span> <span class="comment">// è®¾å®šä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„key</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getToken</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> Cookies.get(TokenKey)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setToken</span>(<span class="params">token</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> Cookies.set(TokenKey, token)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">removeToken</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> Cookies.remove(TokenKey)</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆå§‹åŒ–tokençŠ¶æ€</strong> - <strong><code>store/modules/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getToken, setToken, removeToken } <span class="keyword">from</span> <span class="string">'@/utils/auth'</span></span><br><span class="line"><span class="comment">// çŠ¶æ€</span></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–çš„æ—¶å€™ä»ç¼“å­˜ä¸­è¯»å–çŠ¶æ€ å¹¶èµ‹å€¼åˆ°åˆå§‹åŒ–çš„çŠ¶æ€ä¸Š</span></span><br><span class="line"><span class="comment">// Vuexçš„æŒä¹…åŒ– å¦‚ä½•å®ç° ï¼Ÿ Vuexå’Œå‰ç«¯ç¼“å­˜ç›¸ç»“åˆ</span></span><br><span class="line"><span class="keyword">const</span> state = {</span><br><span class="line">  <span class="attr">token</span>: getToken() <span class="comment">// è®¾ç½®tokenåˆå§‹çŠ¶æ€   tokenæŒä¹…åŒ– =&gt; æ”¾åˆ°ç¼“å­˜ä¸­</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æä¾›ä¿®æ”¹tokençš„mutations</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> mutations = {</span><br><span class="line">  <span class="comment">// è®¾ç½®token</span></span><br><span class="line">  <span class="function"><span class="title">setToken</span>(<span class="params">state, token</span>)</span> {</span><br><span class="line">    state.token = token <span class="comment">// è®¾ç½®token  åªæ˜¯ä¿®æ”¹stateçš„æ•°æ®  123 =ã€‹ 1234</span></span><br><span class="line">    <span class="comment">// vuexå˜åŒ– =&gt; ç¼“å­˜æ•°æ®</span></span><br><span class="line">    setToken(token) <span class="comment">// vuexå’Œ ç¼“å­˜æ•°æ®çš„åŒæ­¥</span></span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// åˆ é™¤ç¼“å­˜</span></span><br><span class="line">  <span class="function"><span class="title">removeToken</span>(<span class="params">state</span>)</span> {</span><br><span class="line">    state.token = <span class="literal">null</span> <span class="comment">// åˆ é™¤vuexçš„token</span></span><br><span class="line">    removeToken() <span class="comment">// å…ˆæ¸…é™¤ vuex  å†æ¸…é™¤ç¼“å­˜ vuexå’Œ ç¼“å­˜æ•°æ®çš„åŒæ­¥</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å°è£…ç™»å½•çš„Action"><a href="#å°è£…ç™»å½•çš„Action" class="headerlink" title="å°è£…ç™»å½•çš„Action"></a>å°è£…ç™»å½•çš„Action</h3><p><strong>å°è£…ç™»å½•çš„action</strong></p>
<blockquote>
<p>ç™»å½•actionè¦åšçš„äº‹æƒ…,<strong><code>è°ƒç”¨ç™»å½•æ¥å£</code></strong>,<strong><code>æˆåŠŸåè®¾ç½®tokenåˆ°vuex</code></strong>,<strong><code>å¤±è´¥åˆ™è¿”å›å¤±è´¥</code></strong></p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œå¼‚æ­¥</span></span><br><span class="line"><span class="keyword">const</span> actions = {</span><br><span class="line">  <span class="comment">// å®šä¹‰login action  ä¹Ÿéœ€è¦å‚æ•° è°ƒç”¨actionæ—¶ ä¼ é€’è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">login</span>(<span class="params">context, data</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> login(data) <span class="comment">// å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªpromise  resultå°±æ˜¯æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">    <span class="comment">// axiosé»˜è®¤ç»™æ•°æ®åŠ äº†ä¸€å±‚data</span></span><br><span class="line">    <span class="keyword">if</span> (result.data.success) {</span><br><span class="line">      <span class="comment">// è¡¨ç¤ºç™»å½•æ¥å£è°ƒç”¨æˆåŠŸ ä¹Ÿå°±æ˜¯æ„å‘³ç€ä½ çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">      <span class="comment">// ç°åœ¨æœ‰ç”¨æˆ·token</span></span><br><span class="line">      <span class="comment">// actions ä¿®æ”¹state å¿…é¡»é€šè¿‡mutations</span></span><br><span class="line">      context.commit(<span class="string">'setToken'</span>, result.data.data)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šè¿°ä»£ç ä¸­,æˆ‘ä»¬ä½¿ç”¨äº†**<code>async/await</code><strong>è¯­æ³•,å¦‚æœç”¨</strong><code>then</code>**è¯­æ³•ä¹Ÿæ˜¯å¯ä»¥çš„</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"> <span class="comment">// ä¸ºä»€ä¹ˆasync/await ä¸ç”¨è¿”å›new Promise,å› ä¸º asyncå‡½æ•°æœ¬èº«å°±æ˜¯ Promise,promiseçš„å€¼è¿”å›çš„å€¼  </span></span><br><span class="line"><span class="function"><span class="title">login</span>(<span class="params">context, data</span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>{</span><br><span class="line">      login(data).then(<span class="function"><span class="params">result</span> =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (result.data.success) {</span><br><span class="line">          context.commit(<span class="string">'setToken'</span>,  result.data.data) <span class="comment">// æäº¤mutationsè®¾ç½®token</span></span><br><span class="line">          resolve()  <span class="comment">// è¡¨ç¤ºæ‰§è¡ŒæˆåŠŸäº†</span></span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    })</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä»¥ä¸Šä¸¤ç§å†™æ³•éƒ½æ˜¯OKçš„,æˆ‘ä»¬åœ¨é¡¹ç›®ç ”å‘è¿‡ç¨‹ä¸­,å°½å¯èƒ½çš„é‡‡ç”¨å‰ä¸€ç§</p>
</blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œä¸ºäº†æ›´å¥½çš„è®©å…¶ä»–æ¨¡å—å’Œç»„ä»¶æ›´å¥½çš„è·å–tokenæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨**<code>store/getters.js</code>**ä¸­å°†tokenå€¼ä½œä¸ºå…¬å…±çš„è®¿é—®å±æ€§æ”¾å‡º</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = {</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.sidebar,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.device,</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.token <span class="comment">// åœ¨æ ¹çº§çš„gettersä¸Š å¼€å‘å­æ¨¡å—çš„å±æ€§ç»™åˆ«äººçœ‹ ç»™åˆ«äººç”¨</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<blockquote>
<p>é€šè¿‡æœ¬èŠ‚å†…å®¹ï¼Œæˆ‘ä»¬è¦æŒæ¡åœ¨Vuexä¸­å¦‚ä½•æ¥ç®¡ç†å…±äº«çŠ¶æ€</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200826145500269.png" alt="image-20200826145500269"></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token</p>
<h2 id="requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†"><a href="#requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†" class="headerlink" title="requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†"></a>requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†</h2><p>**<code>ç›®æ ‡</code>**è®¾ç½®requestç¯å¢ƒå˜é‡å’Œå¼‚å¸¸å¤„ç†</p>
<h3 id="åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€"><a href="#åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€" class="headerlink" title="åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€"></a>åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€</h3><blockquote>
<p>ä¸ºä»€ä¹ˆä¼šæœ‰ç¯å¢ƒå˜é‡ä¹‹åˆ†? å¦‚å›¾</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200826150136697.png" alt="image-20200826150136697"></p>
<blockquote>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¼€å‘ç¯å¢ƒå®é™…ä¸Šå°±æ˜¯åœ¨è‡ªå·±çš„æœ¬åœ°å¼€å‘æˆ–è€…è¦æ±‚ä¸é‚£ä¹ˆé«˜çš„ç¯å¢ƒï¼Œä½†æ˜¯ä¸€æ—¦è¿›å…¥ç”Ÿäº§ï¼Œå°±æ˜¯**<code>çœŸå®çš„æ•°æ®</code>**ã€‚ æ‹¿é“¶è¡Œä½œæ¯”å–»ï¼Œå¦‚æœä½ åœ¨å¼€å‘ç¯å¢ƒæ‹¿ç”Ÿäº§ç¯å¢ƒçš„æ¥å£åšæµ‹è¯•ï¼Œé“¶è¡Œç³»ç»Ÿå°±ä¼šå‘ç”Ÿå¾ˆå¤§çš„é£é™©ã€‚</p>
</blockquote>
<p>å‰ç«¯ä¸»è¦åŒºåˆ†ä¸¤ä¸ªç¯å¢ƒ,<strong><code>å¼€å‘ç¯å¢ƒ</code></strong>,<strong><code>ç”Ÿäº§ç¯å¢ƒ</code></strong></p>
<blockquote>
<p> ä¹Ÿå°±æ˜¯ä¸¤ä¸ªç¯å¢ƒå‘å‡ºçš„è¯·æ±‚åœ°å€æ˜¯ä¸åŒçš„ï¼Œç”¨ä»€ä¹ˆåŒºåˆ†å‘¢?</p>
</blockquote>
<p><strong>ç¯å¢ƒå˜é‡</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ process.env.NODE_ENV <span class="comment"># å½“ä¸ºproductionæ—¶ä¸ºç”Ÿäº§ç¯å¢ƒ ä¸ºdevelopmentæ—¶ä¸ºå¼€å‘ç¯å¢ƒ</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¯å¢ƒæ–‡ä»¶</strong></p>
<p> æˆ‘ä»¬å¯ä»¥åœ¨**<code>.env.development</code><strong>å’Œ</strong><code>.env.production</code>**å®šä¹‰å˜é‡ï¼Œå˜é‡è‡ªåŠ¨å°±ä¸ºå½“å‰ç¯å¢ƒçš„å€¼</p>
<p>åŸºç¡€æ¨¡æ¿åœ¨ä»¥ä¸Šæ–‡ä»¶å®šä¹‰äº†å˜é‡**<code>VUE_APP_BASE_API</code><strong>ï¼Œè¯¥å˜é‡å¯ä»¥ä½œä¸ºaxiosè¯·æ±‚çš„</strong><code>baseURL</code>**</p>
<p>æˆ‘ä»¬ä¼šå‘ç°,åœ¨æ¨¡æ¿ä¸­,ä¸¤ä¸ªå€¼åˆ†åˆ«ä¸º**<code>/dev-api</code><strong>å’Œ</strong><code>/prod-api</code>**</p>
<p>ä½†æ˜¯æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒä»£ç†æ˜¯**<code>/api</code>**ï¼Œæ‰€ä»¥å¯ä»¥ç»Ÿä¸€ä¸‹</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># å¼€å‘ç¯å¢ƒçš„åŸºç¡€åœ°å€å’Œä»£ç†å¯¹åº”</span></span><br><span class="line">VUE_APP_BASE_API = <span class="string">'/api'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œé…ç½®äº†/api,æ„å‘³ç€éœ€è¦åœ¨NginxæœåŠ¡å™¨ä¸Šä¸ºè¯¥æœåŠ¡é…ç½® nginxçš„åå‘ä»£ç†å¯¹åº”/prod-apiçš„åœ°å€ </span></span><br><span class="line">VUE_APP_BASE_API = <span class="string">'/prod-api'</span>  </span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼šæˆ‘ä»¬è¿™é‡Œç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒè®¾ç½®äº†ä¸åŒçš„å€¼ï¼Œåç»­æˆ‘ä»¬è¿˜ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„æ—¶å€™ï¼Œå»é…ç½®è¯¥å€¼æ‰€å¯¹åº”çš„åå‘ä»£ç†ï¼Œåå‘ä»£ç†æŒ‡å‘å“ªä¸ªåœ°å€ï¼Œå®Œå…¨ç”±æˆ‘ä»¬è‡ªå·±å†³å®šï¼Œä¸ä¼šå’Œå¼€å‘ç¯å¢ƒå†²çª</p>
<p><strong>åœ¨requestä¸­è®¾ç½®baseUrl</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> service = axios.create({</span><br><span class="line">  <span class="comment">// å¦‚æœæ‰§è¡Œ npm run dev  å€¼ä¸º /api æ­£ç¡®  /api è¿™ä¸ªä»£ç†åªæ˜¯ç»™å¼€å‘ç¯å¢ƒé…ç½®çš„ä»£ç†</span></span><br><span class="line">  <span class="comment">// å¦‚æœæ‰§è¡Œ npm run build å€¼ä¸º /prod-api  æ²¡å…³ç³»  è¿ç»´åº”è¯¥åœ¨ä¸Šçº¿çš„æ—¶å€™ ç»™ä½ é…ç½®ä¸Š /prod-apiçš„ä»£ç†</span></span><br><span class="line">  <span class="attr">baseURL</span>: process.env.VUE_APP_BASE_API, <span class="comment">// è®¾ç½®axiosè¯·æ±‚çš„åŸºç¡€çš„åŸºç¡€åœ°å€</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span> <span class="comment">// å®šä¹‰5ç§’è¶…æ—¶</span></span><br><span class="line">}) <span class="comment">// åˆ›å»ºä¸€ä¸ªaxiosçš„å®ä¾‹</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨"><a href="#å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨" class="headerlink" title="å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨"></a>å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨</h3><blockquote>
<p>OKï¼Œé™¤æ­¤ä¹‹å¤–,axiosè¿”å›çš„æ•°æ®ä¸­é»˜è®¤å¢åŠ äº†ä¸€å±‚**<code>dataçš„åŒ…è£¹</code>**,æˆ‘ä»¬éœ€è¦åœ¨è¿™é‡Œå¤„ç†ä¸‹</p>
</blockquote>
<blockquote>
<p>å¹¶ä¸”,äººèµ„é¡¹ç›®çš„æ¥å£,å¦‚æœæ‰§è¡Œå¤±è´¥,åªæ˜¯è®¾ç½®äº†**<code>success</code><strong>ä¸º</strong><code>false</code>**ï¼Œå¹¶æ²¡æœ‰rejectï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¹¶å¤„ç†ä¸‹</p>
</blockquote>
<p>å¤„ç†é€»è¾‘å¦‚å›¾</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812020656210.png" alt="image-20200812020656210"></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use(<span class="function"><span class="params">response</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// axiosé»˜è®¤åŠ äº†ä¸€å±‚data</span></span><br><span class="line">  <span class="keyword">const</span> { success, message, data } = response.data</span><br><span class="line">  <span class="comment">//   è¦æ ¹æ®successçš„æˆåŠŸä¸å¦å†³å®šä¸‹é¢çš„æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (success) {</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å·²ç»é”™è¯¯äº† è¿˜èƒ½è¿›then ? ä¸èƒ½ ï¼ åº”è¯¥è¿›catch</span></span><br><span class="line">    Message.error(message) <span class="comment">// æç¤ºé”™è¯¯æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(message))</span><br><span class="line">  }</span><br><span class="line">}, <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  Message.error(error.message) <span class="comment">// æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error) <span class="comment">// è¿”å›æ‰§è¡Œé”™è¯¯ è®©å½“å‰çš„æ‰§è¡Œé“¾è·³å‡ºæˆåŠŸ ç›´æ¥è¿›å…¥ catch</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ—¢ç„¶åœ¨requestä¸­å·²ç»é»˜è®¤å»é™¤äº†ä¸€å±‚dataçš„å¤–è¡£ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå°†ä¸ŠèŠ‚loginçš„actionè¿›è¡Œä¸€ä¸‹æ”¹åŠ¨</p>
</blockquote>
<p><strong>å¤„ç†ç™»å½•çš„è¿”å›ç»“æ„é—®é¢˜</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">login</span>(<span class="params">context, data</span>)</span> {</span><br><span class="line">  <span class="comment">// ç»è¿‡å“åº”æ‹¦æˆªå™¨çš„å¤„ç†ä¹‹å è¿™é‡Œçš„resultå®é™…ä¸Šå°±æ˜¯ token</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> login(data) <span class="comment">// å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªpromise  resultå°±æ˜¯æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">  <span class="comment">// axiosé»˜è®¤ç»™æ•°æ®åŠ äº†ä¸€å±‚data</span></span><br><span class="line">  <span class="comment">// è¡¨ç¤ºç™»å½•æ¥å£è°ƒç”¨æˆåŠŸ ä¹Ÿå°±æ˜¯æ„å‘³ç€ä½ çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">  <span class="comment">// ç°åœ¨æœ‰ç”¨æˆ·token</span></span><br><span class="line">  <span class="comment">// actions ä¿®æ”¹state å¿…é¡»é€šè¿‡mutations</span></span><br><span class="line">  context.commit(<span class="string">'setToken'</span>, result)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®Œæˆrequestç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†</p>
<h2 id="ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action-å¤„ç†å¼‚å¸¸"><a href="#ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action-å¤„ç†å¼‚å¸¸" class="headerlink" title="ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action,å¤„ç†å¼‚å¸¸"></a>ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action,å¤„ç†å¼‚å¸¸</h2><p><strong><code>ç›®æ ‡</code></strong> è°ƒç”¨vuexä¸­çš„ç™»å½•action,å¹¶è·³è½¬åˆ°ä¸»é¡µ</p>
<blockquote>
<p>æŒ‰ç…§å¦‚å›¾çš„ä¸šåŠ¡é€»è¾‘ï¼ŒæŠŠå‰©ä¸‹çš„å†…å®¹åœ¨ç™»å½•é¡µé¢å¼•å…¥</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812011826021.png" alt="image-20200812011826021"></p>
<p><strong>å¼•å…¥actionsè¾…åŠ©å‡½æ•°</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapActions } <span class="keyword">from</span> <span class="string">'vuex'</span>  <span class="comment">// å¼•å…¥vuexçš„è¾…åŠ©å‡½æ•°</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¼•å…¥actionæ–¹æ³•</strong></p>
<blockquote>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬é‡‡ç”¨ç›´æ¥å¼•å…¥æ¨¡å—actionçš„æ–¹å¼ï¼Œåé¢æˆ‘ä»¬é‡‡ç”¨åˆ†æ¨¡å—çš„å¼•ç”¨æ–¹å¼</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">methods: {</span><br><span class="line">    ...mapActions([<span class="string">'user/login'</span>])</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è°ƒç”¨ç™»å½•</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$refs.loginForm.validate(<span class="keyword">async</span> isOK =&gt; {</span><br><span class="line">      <span class="keyword">if</span> (isOK) {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">          <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">          <span class="comment">// åªæœ‰æ ¡éªŒé€šè¿‡äº† æˆ‘ä»¬æ‰å»è°ƒç”¨action</span></span><br><span class="line">          <span class="keyword">await</span> <span class="built_in">this</span>[<span class="string">'user/login'</span>](<span class="built_in">this</span>.loginForm)</span><br><span class="line">          <span class="comment">// åº”è¯¥ç™»å½•æˆåŠŸä¹‹å</span></span><br><span class="line">          <span class="comment">// asyncæ ‡è®°çš„å‡½æ•°å®é™…ä¸Šä¸€ä¸ªpromiseå¯¹è±¡</span></span><br><span class="line">          <span class="comment">// awaitä¸‹é¢çš„ä»£ç  éƒ½æ˜¯æˆåŠŸæ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">          <span class="built_in">this</span>.$router.push(<span class="string">'/'</span>)</span><br><span class="line">        } <span class="keyword">catch</span> (error) {</span><br><span class="line">          <span class="built_in">console</span>.log(error)</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">          <span class="comment">//  ä¸è®ºæ‰§è¡Œtry è¿˜æ˜¯catch  éƒ½å»å…³é—­è½¬åœˆ</span></span><br><span class="line">          <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    })</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šæˆ‘ä»¬è°ƒç”¨çš„æ˜¯Vuexä¸­å­æ¨¡å—çš„actionï¼Œè¯¥æ¨¡å—æˆ‘ä»¬è¿›è¡Œäº†namespaced: trueï¼Œæ‰€ä»¥å¼•ç”¨acitonæ—¶éœ€è¦å¸¦ä¸Š</strong><code>user/</code></strong>, å¹¶ä¸”åœ¨ä½¿ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œç›´æ¥ä½¿ç”¨ <strong><code>this['user/login']</code></strong>, ä½¿ç”¨this.user/login è¯­æ³•æ˜¯é”™è¯¯çš„</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šç™»å½•é¡µé¢è°ƒç”¨ç™»å½•actionï¼Œå¤„ç†å¼‚å¸¸</p>
<h2 id="ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†"><a href="#ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†" class="headerlink" title="ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†"></a>ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†</h2><p>**<code>ç›®æ ‡</code>**ï¼šæ ¹æ®tokenå¤„ç†ä¸»é¡µçš„è®¿é—®æƒé™é—®é¢˜</p>
<h3 id="æƒé™æ‹¦æˆªçš„æµç¨‹å›¾"><a href="#æƒé™æ‹¦æˆªçš„æµç¨‹å›¾" class="headerlink" title="æƒé™æ‹¦æˆªçš„æµç¨‹å›¾"></a>æƒé™æ‹¦æˆªçš„æµç¨‹å›¾</h3><blockquote>
<p>æˆ‘ä»¬å·²ç»å®Œæˆäº†ç™»å½•çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”å­˜å‚¨äº†tokenï¼Œä½†æ˜¯æ­¤æ—¶ä¸»é¡µå¹¶æ²¡æœ‰å› ä¸ºtokençš„æœ‰æ— è€Œè¢«æ§åˆ¶è®¿é—®æƒé™</p>
</blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®ç°ä»¥ä¸‹å¦‚ä¸‹çš„æµç¨‹å›¾</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200714093601730.png" alt="image-20200714093601730"></p>
<blockquote>
<p>åœ¨åŸºç¡€æ¡†æ¶é˜¶æ®µï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“**<code>src/permission.js</code>**æ˜¯ä¸“é—¨å¤„ç†è·¯ç”±æƒé™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œå¤„ç†</p>
</blockquote>
<h3 id="æµç¨‹å›¾è½¬åŒ–ä»£ç "><a href="#æµç¨‹å›¾è½¬åŒ–ä»£ç " class="headerlink" title="æµç¨‹å›¾è½¬åŒ–ä»£ç "></a>æµç¨‹å›¾è½¬åŒ–ä»£ç </h3><p><strong>æµç¨‹å›¾è½¬åŒ–çš„ä»£ç </strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æƒé™æ‹¦æˆª å¯¼èˆªå®ˆå« è·¯ç”±å®ˆå«  router</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router'</span> <span class="comment">// å¼•å…¥è·¯ç”±å®ä¾‹</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span> <span class="comment">// å¼•å…¥vuex storeå®ä¾‹</span></span><br><span class="line"><span class="keyword">import</span> NProgress <span class="keyword">from</span> <span class="string">'nprogress'</span> <span class="comment">// å¼•å…¥ä¸€ä»½è¿›åº¦æ¡æ’ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'nprogress/nprogress.css'</span> <span class="comment">// å¼•å…¥è¿›åº¦æ¡æ ·å¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">'/login'</span>, <span class="string">'/404'</span>] <span class="comment">// å®šä¹‰ç™½åå•  æ‰€æœ‰ä¸å—æƒé™æ§åˆ¶çš„é¡µé¢</span></span><br><span class="line"><span class="comment">// è·¯ç”±çš„å‰ç½®å®ˆå«</span></span><br><span class="line">router.beforeEach(<span class="function"><span class="keyword">function</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) </span>{</span><br><span class="line">  NProgress.start() <span class="comment">// å¼€å¯è¿›åº¦æ¡</span></span><br><span class="line">  <span class="comment">//  é¦–å…ˆåˆ¤æ–­æœ‰æ— token</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">    <span class="comment">//   å¦‚æœæœ‰token ç»§ç»­åˆ¤æ–­æ˜¯ä¸æ˜¯å»ç™»å½•é¡µ</span></span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">'/login'</span>) {</span><br><span class="line">      <span class="comment">//  è¡¨ç¤ºå»çš„æ˜¯ç™»å½•é¡µ</span></span><br><span class="line">      next(<span class="string">'/'</span>) <span class="comment">// è·³åˆ°ä¸»é¡µ</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      next() <span class="comment">// ç›´æ¥æ”¾è¡Œ</span></span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰token</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.indexOf(to.path) &gt; -<span class="number">1</span>) {</span><br><span class="line">      <span class="comment">// å¦‚æœæ‰¾åˆ°äº† è¡¨ç¤ºåœ¨åœ¨åå•é‡Œé¢</span></span><br><span class="line">      next()</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      next(<span class="string">'/login'</span>) <span class="comment">// è·³åˆ°ç™»å½•é¡µ</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  NProgress.done() <span class="comment">// æ‰‹åŠ¨å¼ºåˆ¶å…³é—­ä¸€æ¬¡  ä¸ºäº†è§£å†³ æ‰‹åŠ¨åˆ‡æ¢åœ°å€æ—¶  è¿›åº¦æ¡çš„ä¸å…³é—­çš„é—®é¢˜</span></span><br><span class="line">})</span><br><span class="line"><span class="comment">// åç½®å®ˆå«</span></span><br><span class="line">router.afterEach(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">  NProgress.done() <span class="comment">// å…³é—­è¿›åº¦æ¡</span></span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åœ¨å¯¼èˆªå®ˆå«çš„ä½ç½®ï¼Œæˆ‘ä»¬æ·»åŠ äº†NProgressçš„æ’ä»¶ï¼Œå¯ä»¥å®Œæˆè¿›å…¥æ—¶çš„è¿›åº¦æ¡æ•ˆæœ</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆä¸»é¡µä¸­æ ¹æ®æœ‰æ— tokenï¼Œè¿›è¡Œé¡µé¢è®¿é—®çš„å¤„ç†</p>
<h2 id="ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼"><a href="#ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼" class="headerlink" title="ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼"></a>ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼</h2><p>**<code>ç›®æ ‡</code>**è®¾ç½®å·¦ä¾§çš„å¯¼èˆªæ ·å¼</p>
<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†å·¦ä¾§å¯¼èˆªè®¾ç½®æˆå¦‚å›¾æ ·å¼</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200714142517337.png" alt="image-20200714142517337"></p>
<blockquote>
<p>ä¸»é¡µçš„å¸ƒå±€ç»„ä»¶ä½ç½®**<code>src/layout</code>**</p>
</blockquote>
<p><strong>ä¸»é¡µå¸ƒå±€æ¶æ„</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812023354631.png" alt="image-20200812023354631"></p>
<p><strong>å·¦ä¾§å¯¼èˆªç»„ä»¶çš„æ ·å¼æ–‡ä»¶</strong><code>styles/siderbar.scss</code></p>
<p><strong>è®¾ç½®èƒŒæ™¯æ¸å˜è‰²</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.sidebar-container</span> {</span><br><span class="line">      <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(bottom, <span class="number">#3d6df8</span>, <span class="number">#5b8cff</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®å·¦ä¾§å¯¼èˆªèƒŒæ™¯å›¾ç‰‡</strong></p>
<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.scrollbar-wrapper</span> { </span><br><span class="line">    <span class="attribute">background</span>: url(<span class="string">'~@/assets/common/leftnavBg.png'</span>) no-repeat <span class="number">0</span> <span class="number">100%</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æ³¨æ„</code><strong>ï¼šåœ¨scssä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨</strong><code>@</code><strong>åˆ«åï¼Œéœ€è¦åœ¨å‰é¢åŠ ä¸Šä¸€ä¸ª</strong><code>~</code>**æ‰å¯ä»¥</p>
<p><strong>è®¾ç½®èœå•é€‰ä¸­é¢œè‰²</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">.el-menu {</span><br><span class="line">  border: none;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100% !important;</span><br><span class="line">  a{</span><br><span class="line">    li{</span><br><span class="line">      .svg-icon{</span><br><span class="line">        color: <span class="comment">#fff;</span></span><br><span class="line">        font-size: 18px;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">        .icon{</span><br><span class="line">          color:<span class="comment">#fff;</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      span{</span><br><span class="line">        color: <span class="comment">#fff;</span></span><br><span class="line">      }</span><br><span class="line">      &amp;:hover{</span><br><span class="line">        .svg-icon{</span><br><span class="line">          color: <span class="comment">#43a7fe</span></span><br><span class="line">        }</span><br><span class="line">        span{</span><br><span class="line">          color: <span class="comment">#43a7fe;</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æ³¨æ„</code>**ï¼šå› ä¸ºæˆ‘ä»¬åæœŸæ²¡æœ‰äºŒçº§èœå•ï¼Œæ‰€ä»¥è¿™é‡Œæš‚æ—¶ä¸ç”¨å¯¹äºŒçº§èœå•çš„æ ·å¼è¿›è¡Œæ§åˆ¶</p>
<p><strong>æ˜¾ç¤ºå·¦ä¾§logoå›¾ç‰‡</strong> <strong><code>src/setttings.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line"></span><br><span class="line">  <span class="attr">title</span>: <span class="string">'äººåŠ›èµ„æºç®¡ç†å¹³å°'</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type <span class="type">{boolean}</span> </span>true | false</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description </span>Whether fix the header</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">fixedHeader</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type <span class="type">{boolean}</span> </span>true | false</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description </span>Whether show the logo in sidebar</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">sidebarLogo</span>: <span class="literal">true</span> <span class="comment">// æ˜¾ç¤ºlogo</span></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®å¤´éƒ¨å›¾ç‰‡ç»“æ„</strong> <strong><code>src/layout/components/Sidebar/Logo.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div class="sidebar-logo-container" :class="{'collapse':collapse}"&gt;</span><br><span class="line">    &lt;transition name="sidebarLogoFade"&gt;</span><br><span class="line">      &lt;router-link key="collapse" class="sidebar-logo-link" to="/"&gt;</span><br><span class="line">        &lt;img src="@/assets/common/logo.png" class="sidebar-logo  "&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®å¤§å›¾å’Œå°å›¾çš„æ ·å¼</strong></p>
<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line">  &amp;<span class="selector-class">.collapse</span> {</span><br><span class="line">    <span class="selector-class">.sidebar-logo</span> {</span><br><span class="line">      <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">32px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">32px</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"><span class="comment">// å°å›¾æ ·å¼</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.sidebar-logo</span> {</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">140px</span>;</span><br><span class="line">      <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">      <span class="attribute">margin-right</span>: <span class="number">12px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// å¤§å›¾æ ·å¼</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å»é™¤logoçš„èƒŒæ™¯è‰²</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827104724769.png" alt="image-20200827104724769"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®Œæˆä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼</p>
<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼šæˆ‘ä»¬è¯¥é¡¹ç›®ä¸­æ²¡æœ‰äºŒçº§æ˜¾ç¤ºèœå•ï¼Œæ‰€ä»¥äºŒçº§èœå•çš„æ ·å¼å¹¶æ²¡æœ‰åšè¿‡å¤šå¤„ç†ï¼ŒåŒå­¦ä»¬ä¸å¿…åœ¨æ„</p>
<h2 id="è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼"><a href="#è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼" class="headerlink" title="è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼"></a>è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼</h2><p>**<code>ç›®æ ‡</code>**è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼</p>
<blockquote>
<p>æˆ‘ä»¬éœ€è¦æŠŠé¡µé¢è®¾ç½®æˆå¦‚å›¾æ ·å¼</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200714172602305.png" alt="image-20200714172602305"></p>
<p><strong>å¤´éƒ¨ç»„ä»¶ä½ç½®</strong> <strong><code>layout/components/Navbar.vue</code></strong></p>
<p><strong>æ·»åŠ å…¬å¸åç§°</strong>ï¼Œ<strong>æ³¨é‡Šé¢åŒ…å±‘</strong></p>
<figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app-breadcrumb"</span>&gt;</span></span><br><span class="line">     æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸</span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"breadBtn"</span>&gt;</span>ä½“éªŒç‰ˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;breadcrumb class="breadcrumb-container" /&gt; --&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å…¬å¸æ ·å¼</strong></p>
<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.app-breadcrumb</span> {</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: text;</span><br><span class="line">  <span class="selector-class">.breadBtn</span> {</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#84a9fe</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">15px</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¤´éƒ¨èƒŒæ™¯æ¸å˜è‰²</strong></p>
<figure class="highlight scss"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.navbar</span> {</span><br><span class="line">    <span class="attribute">background-image</span>: -webkit-linear-gradient(left, <span class="number">#3d6df8</span>, <span class="number">#5b8cff</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ±‰å ¡ç»„ä»¶å›¾æ ‡é¢œè‰²</strong>  <strong><code>src/components/Hamburger/index.vue</code></strong></p>
<p><strong><code>æ³¨æ„</code><strong>è¿™é‡Œçš„å›¾æ ‡æˆ‘ä»¬ä½¿ç”¨äº†</strong><code>svg</code><strong>ï¼Œè®¾ç½®é¢œè‰²éœ€è¦ä½¿ç”¨svgæ ‡ç­¾çš„</strong><code>fillå±æ€§</code></strong></p>
<blockquote>
<p>è®¾ç½®svgå›¾æ ‡ä¸ºç™½è‰²</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;svg</span><br><span class="line">      :class="{'is-active':isActive}"</span><br><span class="line">      class="hamburger"</span><br><span class="line">      viewBox="0 0 1024 1024"</span><br><span class="line">      xmlns="http://www.w3.org/2000/svg"</span><br><span class="line">      width="64"</span><br><span class="line">      height="64"</span><br><span class="line">      fill="#fff" </span><br><span class="line">    &gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å³ä¾§ä¸‹æ‹‰èœå•è®¾ç½®</strong></p>
<blockquote>
<p>å°†ä¸‹æ‹‰èœå•è°ƒèŠ‚æˆ**<code>é¦–é¡µ/é¡¹ç›®åœ°å€/é€€å‡ºç™»å½•</code>**</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div class="right-menu"&gt;</span><br><span class="line">  &lt;el-dropdown class="avatar-container" trigger="click"&gt;</span><br><span class="line">    &lt;div class="avatar-wrapper"&gt;</span><br><span class="line">      &lt;img src="@/assets/common/bigUserHeader.png" class="user-avatar"&gt;</span><br><span class="line">      &lt;span class="name"&gt;ç®¡ç†å‘˜&lt;/span&gt;</span><br><span class="line">      &lt;i class="el-icon-caret-bottom" style="color:#fff" /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-dropdown-menu slot="dropdown" class="user-dropdown"&gt;</span><br><span class="line">      &lt;router-link to="/"&gt;</span><br><span class="line">        &lt;el-dropdown-item&gt;</span><br><span class="line">          é¦–é¡µ</span><br><span class="line">        &lt;/el-dropdown-item&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">      &lt;a target="_blank" href="https://gitee.com/shuiruohanyu/hrsaas53"&gt;</span><br><span class="line">        &lt;el-dropdown-item&gt;é¡¹ç›®åœ°å€&lt;/el-dropdown-item&gt;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">      &lt;el-dropdown-item divided @click.native="logout"&gt;</span><br><span class="line">        &lt;span style="display:block;"&gt;é€€å‡ºç™»å½•&lt;/span&gt;</span><br><span class="line">      &lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;/el-dropdown-menu&gt;</span><br><span class="line">  &lt;/el-dropdown&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¤´åƒå’Œä¸‹æ‹‰èœå•æ ·å¼</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"><span class="selector-class">.user-avatar</span> {</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">        <span class="attribute">vertical-align</span>: middle;</span><br><span class="line"></span><br><span class="line"> }</span><br><span class="line"> <span class="selector-class">.name</span> {</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">        <span class="attribute">margin-left</span>:<span class="number">5px</span>;</span><br><span class="line"> }</span><br><span class="line"> <span class="selector-class">.user-dropdown</span> {</span><br><span class="line">         <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>ç”¨æˆ·åå’Œå¤´åƒæˆ‘ä»¬å…ˆç”¨äº†å‡æ•°æ®è¿›è¡Œï¼Œä¸‹å°ç« èŠ‚ï¼Œä¼šè¿›è¡Œè¿™ä»½æ•°æ®çš„è·å–</p>
<p><strong>æœ€ç»ˆæ•ˆæœ</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716015113164.png"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<h1 id="3-ä¸»é¡µæ¨¡å—"><a href="#3-ä¸»é¡µæ¨¡å—" class="headerlink" title="3.ä¸»é¡µæ¨¡å—"></a>3.ä¸»é¡µæ¨¡å—</h1><h2 id="è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥"><a href="#è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥" class="headerlink" title="è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥"></a>è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥</h2><p><strong><code>ç›®æ ‡</code></strong> å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„èµ„æ–™ä¿¡æ¯</p>
<blockquote>
<p>ä¸Šå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†å¤´éƒ¨èœå•çš„åŸºæœ¬å¸ƒå±€ï¼Œä½†æ˜¯ç”¨æˆ·çš„å¤´åƒå’Œåç§°å¹¶æ²¡æœ‰ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ¥å£è°ƒç”¨çš„æ–¹å¼è·å–å½“å‰ç”¨æˆ·çš„èµ„æ–™ä¿¡æ¯</p>
</blockquote>
<p><strong>è·å–ç”¨æˆ·èµ„æ–™æ¥å£</strong></p>
<p>åœ¨**<code>src/api/user.js</code>**ä¸­å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  è·å–ç”¨æˆ·çš„åŸºæœ¬èµ„æ–™</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserInfo</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/profile'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬å¿½ç•¥äº†ä¸€ä¸ªé—®é¢˜ï¼æˆ‘ä»¬çš„headerså‚æ•°å¹¶æ²¡æœ‰åœ¨è¿™é‡Œä¼ å…¥ï¼Œä¸ºä»€ä¹ˆå‘¢</p>
</blockquote>
<p>headersä¸­çš„<strong>Authorization</strong>ç›¸å½“äºæˆ‘ä»¬<strong>å¼€é—¨</strong>ï¼ˆ<strong>è°ƒç”¨æ¥å£</strong>ï¼‰æ—¶**<code>é’¥åŒ™(token)</code><strong>ï¼Œæˆ‘ä»¬åœ¨æ‰“å¼€ä»»ä½•å¸¦å®‰å…¨æƒé™çš„é—¨çš„æ—¶å€™éƒ½éœ€è¦</strong><code>é’¥åŒ™(token)</code>** å¦‚å›¾</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200715233339927.png" alt="image-20200715233339927"></p>
<p>æ¯æ¬¡åœ¨æ¥å£ä¸­æºå¸¦**<code>é’¥åŒ™ï¼ˆtokenï¼‰</code>**å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨axiosæ‹¦æˆªå™¨ä¸­ç»Ÿä¸€æ³¨å…¥token </p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716000203862.png" alt="image-20200716000203862"></p>
<p><strong>ç»Ÿä¸€æ³¨å…¥token</strong> <strong><code>src/utils/request.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">service.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// åœ¨è¿™ä¸ªä½ç½®éœ€è¦ç»Ÿä¸€çš„å»æ³¨å…¥token</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">    <span class="comment">// å¦‚æœtokenå­˜åœ¨ æ³¨å…¥token</span></span><br><span class="line">    config.headers[<span class="string">'Authorization'</span>] = <span class="string">`Bearer <span class="subst">${store.getters.token}</span>`</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config <span class="comment">// å¿…é¡»è¿”å›é…ç½®</span></span><br><span class="line">}, <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">}) </span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®Œæˆè·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥</p>
<h2 id="å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€"><a href="#å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€" class="headerlink" title="å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€"></a>å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€</h2><p>**<code>ç›®æ ‡</code>**ï¼š åœ¨ç”¨æˆ·çš„vuexæ¨¡å—ä¸­å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionï¼Œå¹¶è®¾ç½®ç›¸å…³çŠ¶æ€</p>
<blockquote>
<p>ç”¨æˆ·çŠ¶æ€ä¼šåœ¨åç»­çš„å¼€å‘ä¸­ï¼Œé¢‘ç¹ç”¨åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ç”¨æˆ·çŠ¶æ€åŒæ ·çš„å°è£…åˆ°actionä¸­</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827111324564.png" alt="image-20200827111324564"></p>
<p><strong>å°è£…è·å–ç”¨æˆ·èµ„æ–™action</strong>   <strong><code>action</code></strong>  <strong><code>src/store/modules/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { login, getUserInfo } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è·å–ç”¨æˆ·èµ„æ–™action</span></span><br><span class="line">  <span class="keyword">async</span> getUserInfo (context) {</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> getUserInfo()  <span class="comment">// è·å–è¿”å›å€¼</span></span><br><span class="line">    context.commit(<span class="string">'setUserInfo'</span>, result) <span class="comment">// å°†æ•´ä¸ªçš„ä¸ªäººä¿¡æ¯è®¾ç½®åˆ°ç”¨æˆ·çš„vuexæ•°æ®ä¸­</span></span><br><span class="line">    <span class="keyword">return</span> result <span class="comment">// è¿™é‡Œä¸ºä»€ä¹ˆè¦è¿”å› ä¸ºåé¢åŸ‹ä¸‹ä¼ç¬”</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åŒæ—¶ï¼Œé…å¥—çš„æˆ‘ä»¬è¿˜è¿›è¡Œäº†å…³äºç”¨æˆ·çŠ¶æ€çš„mutationsæ–¹æ³•çš„è®¾è®¡</p>
</blockquote>
<p><strong>åˆå§‹åŒ–state</strong>  <strong><code>state</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> state = {</span><br><span class="line">  <span class="attr">token</span>: getToken(), <span class="comment">// è®¾ç½®tokenåˆå§‹çŠ¶æ€   tokenæŒä¹…åŒ– =&gt; æ”¾åˆ°ç¼“å­˜ä¸­</span></span><br><span class="line">  <span class="attr">userInfo</span>: {} <span class="comment">// å®šä¹‰ä¸€ä¸ªç©ºçš„å¯¹è±¡ ä¸æ˜¯null å› ä¸ºåè¾¹æˆ‘è¦å¼€å‘userInfoçš„å±æ€§ç»™åˆ«äººç”¨  userInfo.name</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>userInfoä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸è®¾ç½®ä¸ºnullï¼Œè€Œæ˜¯è®¾ç½®ä¸º {} </p>
</blockquote>
<p>å› ä¸ºæˆ‘ä»¬ä¼šåœ¨**<code>getters</code>**ä¸­å¼•ç”¨userinfoçš„å˜é‡ï¼Œå¦‚æœè®¾ç½®ä¸ºnullï¼Œåˆ™ä¼šå¼•èµ·å¼‚å¸¸å’ŒæŠ¥é”™</p>
<p><strong>è®¾ç½®å’Œåˆ é™¤ç”¨æˆ·èµ„æ–™</strong>   <strong><code>mutations</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"> <span class="function"><span class="title">setUserInfo</span>(<span class="params">state, userInfo</span>)</span> {</span><br><span class="line">   state.userInfo = { ...userInfo } <span class="comment">// ç”¨ æµ…æ‹·è´çš„æ–¹å¼å»èµ‹å€¼å¯¹è±¡ å› ä¸ºè¿™æ ·æ•°æ®æ›´æ–°ä¹‹åï¼Œæ‰ä¼šè§¦å‘ç»„ä»¶çš„æ›´æ–°</span></span><br><span class="line"> },</span><br><span class="line"> <span class="comment">// åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"> <span class="function"><span class="title">reomveUserInfo</span>(<span class="params">state</span>)</span> {</span><br><span class="line">   state.userInfo = {}</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åŒå­¦ä»¬ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„èµ„æ–™è®¾ç½®åˆ°äº†<strong>userInfo</strong>è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå¦‚æœæƒ³è¦å–å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨gettersä¸­å»ºç«‹ç›¸åº”çš„æ˜ å°„</p>
</blockquote>
<p>å› ä¸ºæˆ‘ä»¬è¦åšæ˜ å°„ï¼Œå¦‚æœåˆå§‹å€¼ä¸ºnullï¼Œä¸€æ—¦å¼•ç”¨äº†gettersï¼Œå°±ä¼šæŠ¥é”™</p>
<p><strong>å»ºç«‹ç”¨æˆ·åçš„æ˜ å°„</strong>  <strong><code>src/store/getters.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = {</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.sidebar,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.device,</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.token,</span><br><span class="line">  <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.username <span class="comment">// å»ºç«‹ç”¨æˆ·åç§°çš„æ˜ å°„</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°†ç”¨æˆ·èµ„æ–™çš„<strong>action =&gt;  mutation =&gt; state =&gt;  getters</strong> éƒ½è®¾ç½®å¥½äº†ï¼Œ é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥åœ¨ä»€ä¹ˆä½ç½®æ¥è°ƒç”¨è¿™ä¸ªactionå‘¢ ï¼Ÿ</p>
<blockquote>
<p>åˆ«ç€æ€¥ï¼Œå…ˆæäº¤ä»£ç ï¼Œä¸‹ä¸ªå°èŠ‚ï¼Œæˆ‘ä»¬æ¥æ­æ™“ç­”æ¡ˆ</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€</p>
<h2 id="æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action"><a href="#æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action" class="headerlink" title="æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action"></a>æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action</h2><p>**<code>ç›®æ ‡</code>**åœ¨æƒé™æ‹¦æˆªå¤„è°ƒç”¨aciton</p>
<h3 id="æƒé™æ‹¦æˆªå™¨è°ƒç”¨action"><a href="#æƒé™æ‹¦æˆªå™¨è°ƒç”¨action" class="headerlink" title="æƒé™æ‹¦æˆªå™¨è°ƒç”¨action"></a>æƒé™æ‹¦æˆªå™¨è°ƒç”¨action</h3><blockquote>
<p>åœ¨ä¸Šå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†ç”¨æˆ·èµ„æ–™çš„æ•´ä¸ªæµç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªactionåœ¨å“ªé‡Œè°ƒç”¨å‘¢ï¼Ÿ</p>
</blockquote>
<p>ç”¨æˆ·èµ„æ–™æœ‰ä¸ªç¡¬æ€§è¦æ±‚ï¼Œ**<code>å¿…é¡»æœ‰token</code>**æ‰å¯ä»¥è·å–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨ç¡®å®šæœ‰tokençš„ä½ç½®å»è·å–ç”¨æˆ·èµ„æ–™</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716004526838.png" alt="image-20200716004526838"></p>
<blockquote>
<p>ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œä¸€æ—¦ç¡®å®šæˆ‘ä»¬è¿›è¡Œäº†æ”¾è¡Œï¼Œå°±å¯ä»¥è·å–ç”¨æˆ·èµ„æ–™</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200813013009294.png" alt="image-20200813013009294"></p>
<p><strong>è°ƒç”¨action</strong> <strong><code>src/permission.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(!store.state.user.userInfo.userId) {</span><br><span class="line">      <span class="keyword">await</span> store.dispatch(<span class="string">'user/getUserInfo'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœæˆ‘ä»¬è§‰å¾—è·å–ç”¨æˆ·idçš„æ–¹å¼å†™äº†å¤ªå¤šå±‚çº§ï¼Œå¯ä»¥åœ¨vuexä¸­çš„gettersä¸­è®¾ç½®ä¸€ä¸ªæ˜ å°„ <strong><code>src/store/getters.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">userId: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.userId <span class="comment">// å»ºç«‹ç”¨æˆ·idçš„æ˜ å°„</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä»£ç å°±å˜æˆäº†</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!store.getters.userId) {</span><br><span class="line">       <span class="comment">// å¦‚æœæ²¡æœ‰idè¿™ä¸ªå€¼ æ‰ä¼šè°ƒç”¨ vuexçš„è·å–èµ„æ–™çš„action</span></span><br><span class="line">       <span class="keyword">await</span> store.dispatch(<span class="string">'user/getUserInfo'</span>)</span><br><span class="line">       <span class="comment">// ä¸ºä»€ä¹ˆè¦å†™await å› ä¸ºæˆ‘ä»¬æƒ³è·å–å®Œèµ„æ–™å†å»æ”¾è¡Œ</span></span><br><span class="line">     }</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡dev-toolså·¥å…·åœ¨æ§åˆ¶å°æ¸…æ¥šçš„çœ‹åˆ°æ•°æ®å·²ç»è·å–</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716012120619.png" alt="image-20200716012120619"></p>
<blockquote>
<p>æœ€åä¸€æ­¥ï¼Œåªéœ€è¦å°†å¤´éƒ¨èœå•ä¸­çš„åç§°æ¢æˆçœŸå®çš„ç”¨æˆ·åå³å¯</p>
</blockquote>
<h3 id="è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®"><a href="#è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®" class="headerlink" title="è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®"></a>è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®</h3><p><strong>å¤´åƒæ€ä¹ˆåŠï¼Ÿ</strong></p>
<blockquote>
<p>æˆ‘ä»¬å‘ç°å¤´åƒå¹¶ä¸åœ¨æ¥å£çš„è¿”å›ä½“ä¸­ï¼ˆæ¥å£åŸå› ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦ä¸€ä¸ªæ¥å£æ¥è·å–å¤´åƒï¼Œå¹¶æŠŠå¤´åƒåˆå¹¶åˆ°å½“å‰çš„èµ„æ–™ä¸­</p>
</blockquote>
<p><strong>å°è£…è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£</strong>  <strong><code>src/api/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯  ç°åœ¨å†™å®ƒ å®Œå…¨æ˜¯ä¸ºäº†æ˜¾ç¤ºå¤´åƒ</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserDetailById</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¿™ä¸ªæ¥å£éœ€è¦ç”¨æˆ·çš„userIdï¼Œåœ¨å‰ä¸€ä¸ªæ¥å£å¤„ï¼Œæˆ‘ä»¬å·²ç»è·å–åˆ°äº†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åœ¨åé¢çš„å†…å®¹å»è¡”æ¥</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { login, getUserInfo, getUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// è·å–ç”¨æˆ·èµ„æ–™action</span></span><br><span class="line"> <span class="keyword">async</span> <span class="function"><span class="title">getUserInfo</span>(<span class="params">context</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> getUserInfo() <span class="comment">// resultå°±æ˜¯ç”¨æˆ·çš„åŸºæœ¬èµ„æ–™</span></span><br><span class="line">    <span class="keyword">const</span> baseInfo = <span class="keyword">await</span> getUserDetailById(result.userId) <span class="comment">// ä¸ºäº†è·å–å¤´åƒ</span></span><br><span class="line">    <span class="keyword">const</span> baseResult = { ...result, ...baseInfo } <span class="comment">// å°†ä¸¤ä¸ªæ¥å£ç»“æœåˆå¹¶</span></span><br><span class="line">    <span class="comment">// æ­¤æ—¶å·²ç»è·å–åˆ°äº†ç”¨æˆ·çš„åŸºæœ¬èµ„æ–™ è¿«ä¸å¾—å·² ä¸ºäº†å¤´åƒå†æ¬¡è°ƒç”¨ä¸€ä¸ªæ¥å£</span></span><br><span class="line">    context.commit(<span class="string">'setUserInfo'</span>, baseResult) <span class="comment">// æäº¤mutations</span></span><br><span class="line">    <span class="comment">// åŠ ä¸€ä¸ªç‚¹ç›ä¹‹ç¬”  è¿™é‡Œè¿™ä¸€æ­¥ï¼Œæš‚æ—¶ç”¨ä¸åˆ°ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œè¿™ç»™æˆ‘ä»¬åè¾¹ä¼šç•™ä¸‹ä¼ç¬”</span></span><br><span class="line">    <span class="keyword">return</span> baseResult</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸ºäº†æ›´å¥½åœ°è·å–å¤´åƒï¼ŒåŒæ ·å¯ä»¥æŠŠå¤´åƒæ”¾äºgettersä¸­</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">staffPhoto: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.staffPhoto <span class="comment">// å»ºç«‹ç”¨æˆ·å¤´åƒçš„æ˜ å°„</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„å¤´åƒå’Œåç§°å·²ç»è·å–åˆ°äº†ï¼Œå¯ä»¥ç›´æ¥å°†ä¹‹å‰çš„å‡æ•°æ®æ¢æˆçœŸæ­£çš„å¤´åƒå’Œåç§°</p>
<p><strong>ç”¨æˆ·å</strong>  <strong><code>layout/components/Navbar.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">...mapGetters([</span><br><span class="line">     <span class="string">'sidebar'</span>,</span><br><span class="line">     <span class="string">'name'</span>,</span><br><span class="line">     <span class="string">'staffPhoto'</span></span><br><span class="line">   ])</span><br><span class="line">    &lt;img :src=<span class="string">"staffPhoto"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"user-avatar"</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>{{ name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡è®¾ç½®ï¼Œç”¨æˆ·åå·²ç»æ˜¾ç¤ºï¼Œå¤´åƒä¾ç„¶æ²¡æœ‰æ˜¾ç¤ºï¼Œè¿™æ˜¯å› ä¸ºè™½ç„¶æœ‰åœ°å€ï¼Œä½†æ˜¯åœ°å€æ¥æºæ˜¯ç§æœ‰äº‘ï¼Œç›®å‰å·²ç»å¤±æ•ˆï¼Œæ‰€ä»¥éœ€è¦é¢å¤–å¤„ç†ä¸‹å›¾ç‰‡çš„å¼‚å¸¸</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827140451144.png" alt="image-20200827140451144"></p>
<p>è‡³äºå¤„ç†å›¾ç‰‡çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œå¯é‡‡ç”¨è‡ªå®šä¹‰æŒ‡ä»¤çš„å½¢å¼æ¥è¿›è¡Œå¤„ç†</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®ç°æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action</p>
<h2 id="è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ"></a>è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ</h2><p>**<code>ç›®æ ‡</code>**ï¼š é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤çš„å½¢å¼è§£å†³å¼‚å¸¸å›¾ç‰‡çš„å¤„ç†</p>
<h3 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a>è‡ªå®šä¹‰æŒ‡ä»¤</h3><p>æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">Vue.directive(<span class="string">'æŒ‡ä»¤åç§°'</span>, {</span><br><span class="line">    <span class="comment">// ä¼šåœ¨å½“å‰æŒ‡ä»¤ä½œç”¨çš„domå…ƒç´  æ’å…¥ä¹‹åæ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// options é‡Œé¢æ˜¯æŒ‡ä»¤çš„è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="attr">inserted</span>: <span class="function"><span class="keyword">function</span> (<span class="params">dom,options</span>) </span>{</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥é‡‡ç”¨ç»Ÿä¸€çš„æ–‡ä»¶æ¥ç®¡ç†  <strong><code>src/directives/index.js</code></strong>,è¿™ä¸ªæ–‡ä»¶è´Ÿè´£ç®¡ç†æ‰€æœ‰çš„è‡ªå®šä¹‰æŒ‡ä»¤</p>
</blockquote>
<p>é¦–å…ˆå®šä¹‰ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤  <strong><code>v-imagerror</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> imagerror = {</span><br><span class="line">  <span class="comment">// æŒ‡ä»¤å¯¹è±¡ ä¼šåœ¨å½“å‰çš„domå…ƒç´ æ’å…¥åˆ°èŠ‚ç‚¹ä¹‹åæ‰§è¡Œ</span></span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">dom, options</span>)</span> {</span><br><span class="line">    <span class="comment">// optionsæ˜¯ æŒ‡ä»¤ä¸­çš„å˜é‡çš„è§£é‡Š  å…¶ä¸­æœ‰ä¸€ä¸ªå±æ€§å«åš value</span></span><br><span class="line">    <span class="comment">// dom è¡¨ç¤ºå½“å‰æŒ‡ä»¤ä½œç”¨çš„domå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// domè®¤ä¸ºæ­¤æ—¶å°±æ˜¯å›¾ç‰‡</span></span><br><span class="line">    <span class="comment">// å½“å›¾ç‰‡æœ‰åœ°å€ ä½†æ˜¯åœ°å€æ²¡æœ‰åŠ è½½æˆåŠŸçš„æ—¶å€™ ä¼šæŠ¥é”™ ä¼šè§¦å‘å›¾ç‰‡çš„ä¸€ä¸ªäº‹ä»¶ =&gt; onerror</span></span><br><span class="line">    dom.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">      <span class="comment">// å½“å›¾ç‰‡å‡ºç°å¼‚å¸¸çš„æ—¶å€™ ä¼šå°†æŒ‡ä»¤é…ç½®çš„é»˜è®¤å›¾ç‰‡è®¾ç½®ä¸ºè¯¥å›¾ç‰‡çš„å†…å®¹</span></span><br><span class="line">      <span class="comment">// domå¯ä»¥æ³¨å†Œerroräº‹ä»¶</span></span><br><span class="line">      dom.src = options.value <span class="comment">// è¿™é‡Œä¸èƒ½å†™æ­»</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åœ¨main-jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ"><a href="#åœ¨main-jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ" class="headerlink" title="åœ¨main.jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ"></a>åœ¨main.jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ</h3><p>ç„¶åï¼Œåœ¨**<code>main.js</code>**ä¸­å®Œæˆå¯¹äºè¯¥æ–‡ä»¶ä¸­æ‰€æœ‰æŒ‡ä»¤çš„å…¨å±€æ³¨å†Œ </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> directives <span class="keyword">from</span> <span class="string">'@/directives'</span></span><br><span class="line"><span class="comment">// æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</span></span><br><span class="line"><span class="comment">// éå†æ‰€æœ‰çš„å¯¼å‡ºçš„æŒ‡ä»¤å¯¹è±¡ å®Œæˆè‡ªå®šä¹‰å…¨å±€æ³¨å†Œ</span></span><br><span class="line"><span class="built_in">Object</span>.keys(directives).forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</span></span><br><span class="line">  Vue.directive(key, directives[key])</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>é’ˆå¯¹ä¸Šé¢çš„å¼•å…¥è¯­æ³•  <strong><code>import *  as  å˜é‡</code></strong>  å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡**<code>{ å˜é‡1ï¼šå¯¹è±¡1ï¼Œå˜é‡2ï¼š å¯¹è±¡2 ...   }</code>**, æ‰€ä»¥å¯ä»¥é‡‡ç”¨å¯¹è±¡éå†çš„æ–¹æ³•è¿›è¡Œå¤„ç†</p>
<p>æŒ‡ä»¤æ³¨å†ŒæˆåŠŸï¼Œå¯ä»¥åœ¨**<code>navbar.vue</code>**ä¸­ç›´æ¥ä½¿ç”¨äº†</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;img v-imageerror="defaultImg" :src="staffPhoto" class="user-avatar"&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="keyword">return</span> {</span><br><span class="line">     <span class="attr">defaultImg</span>: <span class="built_in">require</span>(<span class="string">'@/assets/common/head.jpg'</span>)</span><br><span class="line">   }</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®ç°ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œè§£å†³å›¾ç‰‡åŠ è½½å¼‚å¸¸çš„é—®é¢˜</p>
<h2 id="å®ç°ç™»å‡ºåŠŸèƒ½"><a href="#å®ç°ç™»å‡ºåŠŸèƒ½" class="headerlink" title="å®ç°ç™»å‡ºåŠŸèƒ½"></a>å®ç°ç™»å‡ºåŠŸèƒ½</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°ç”¨æˆ·çš„ç™»å‡ºæ“ä½œ</p>
<blockquote>
<p>ç™»å‡ºä»…ä»…æ˜¯è·³åˆ°ç™»å½•é¡µå—ï¼Ÿ</p>
</blockquote>
<p>ä¸ï¼Œå½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬è¦å¤„ç†å¦‚ä¸‹</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827143847893.png" alt="image-20200827143847893"></p>
<p>åŒæ ·çš„ï¼Œç™»å‡ºåŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨vuexä¸­çš„ç”¨æˆ·æ¨¡å—ä¸­å®ç°å¯¹åº”çš„<strong>action</strong></p>
<p><strong>ç™»å‡ºaction</strong>  <strong><code>src/store/modules/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç™»å‡ºçš„action</span></span><br><span class="line">  <span class="function"><span class="title">logout</span>(<span class="params">context</span>)</span> {</span><br><span class="line">    <span class="comment">// åˆ é™¤token</span></span><br><span class="line">    context.commit(<span class="string">'removeToken'</span>) <span class="comment">// ä¸ä»…ä»…åˆ é™¤äº†vuexä¸­çš„ è¿˜åˆ é™¤äº†ç¼“å­˜ä¸­çš„</span></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·èµ„æ–™</span></span><br><span class="line">    context.commit(<span class="string">'removeUserInfo'</span>) <span class="comment">// åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¤´éƒ¨èœå•è°ƒç”¨action</strong>  <strong><code>src/layout/components/Navbar.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">logout</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">'user/logout'</span>) <span class="comment">// è¿™é‡Œä¸è®ºå†™ä¸å†™ await ç™»å‡ºæ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(<span class="string">`/login`</span>) <span class="comment">// è·³åˆ°ç™»å½•</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æ³¨æ„</code>**æˆ‘ä»¬è¿™é‡Œä¹Ÿå¯ä»¥é‡‡ç”¨vuexä¸­çš„æ¨¡å—åŒ–å¼•å…¥è¾…åŠ©å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapGetters, createNamespacedHelpers  } <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">const</span> {  mapActions } = createNamespacedHelpers(<span class="string">'user'</span>) <span class="comment">// è¿™æ˜¯çš„mapActionç›´æ¥å¯¹åº”æ¨¡å—ä¸‹çš„actionè¾…åŠ©å‡½æ•°</span></span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    ...mapActions([<span class="string">'lgout'</span>]),</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šä»£ç ï¼Œå®é™…ä¸Šç›´æ¥å¯¹useræ¨¡å—ä¸‹çš„actionè¿›è¡Œäº†å¼•ç”¨ï¼Œ</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®ç°ç™»å‡ºåŠŸèƒ½</p>
<h2 id="Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥"><a href="#Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥" class="headerlink" title="Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥"></a>Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥</h2><p>**<code>ç›®æ ‡</code>**ï¼š å¤„ç†å½“tokenå¤±æ•ˆæ—¶ä¸šåŠ¡</p>
<h3 id="ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘"><a href="#ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘" class="headerlink" title="ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘"></a>ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘</h3><blockquote>
<p>å¼€é—¨çš„é’¥åŒ™ä¸æ˜¯ä¸€ç›´æœ‰æ•ˆçš„ï¼Œå¦‚æœä¸€ç›´æœ‰æ•ˆï¼Œä¼šæœ‰å®‰å…¨é£é™©ï¼Œæ‰€ä»¥æˆ‘ä»¬å°è¯•åœ¨å®¢æˆ·ç«¯è¿›è¡Œä¸€ä¸‹tokençš„æ—¶é—´æ£€æŸ¥</p>
</blockquote>
<p>å…·ä½“ä¸šåŠ¡å›¾å¦‚ä¸‹</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716231205153.png" alt="image-20200716231205153"></p>
<h3 id="æµç¨‹å›¾è½¬åŒ–ä»£ç -1"><a href="#æµç¨‹å›¾è½¬åŒ–ä»£ç -1" class="headerlink" title="æµç¨‹å›¾è½¬åŒ–ä»£ç "></a>æµç¨‹å›¾è½¬åŒ–ä»£ç </h3><p><strong>æµç¨‹å›¾è½¬åŒ–ä»£ç </strong> <strong><code>src/utils/auth.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> timeKey = <span class="string">'hrsaas-timestamp-key'</span> <span class="comment">// è®¾ç½®ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„key</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getTimeStamp</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> Cookies.get(timeKey)</span><br><span class="line">}</span><br><span class="line"><span class="comment">// è®¾ç½®æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setTimeStamp</span>(<span class="params"></span>) </span>{</span><br><span class="line">  Cookies.set(timeKey, <span class="built_in">Date</span>.now())</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>src/utils/request.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"><span class="keyword">import</span> { Message } <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line"><span class="keyword">import</span> { getTimeStamp } <span class="keyword">from</span> <span class="string">'@/utils/auth'</span></span><br><span class="line"><span class="keyword">const</span> TimeOut = <span class="number">3600</span> <span class="comment">// å®šä¹‰è¶…æ—¶æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.create({</span><br><span class="line"><span class="comment">// å½“æ‰§è¡Œ npm run dev  =&gt; .evn.development =&gt; /api =&gt; è·¨åŸŸä»£ç†</span></span><br><span class="line">  <span class="attr">baseURL</span>: process.env.VUE_APP_BASE_API, <span class="comment">// npm  run dev  =&gt; /api npm run build =&gt;  /prod-api</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span> <span class="comment">// è®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line">})</span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// config æ˜¯è¯·æ±‚çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// æ³¨å…¥token</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">    <span class="comment">// åªæœ‰åœ¨æœ‰tokençš„æƒ…å†µä¸‹ æ‰æœ‰å¿…è¦å»æ£€æŸ¥æ—¶é—´æˆ³æ˜¯å¦è¶…æ—¶</span></span><br><span class="line">    <span class="keyword">if</span> (IsCheckTimeOut()) {</span><br><span class="line">      <span class="comment">// å¦‚æœå®ƒä¸ºtrueè¡¨ç¤º è¿‡æœŸäº†</span></span><br><span class="line">      <span class="comment">// tokenæ²¡ç”¨äº† å› ä¸ºè¶…æ—¶äº†</span></span><br><span class="line">      store.dispatch(<span class="string">'user/logout'</span>) <span class="comment">// ç™»å‡ºæ“ä½œ</span></span><br><span class="line">      <span class="comment">// è·³è½¬åˆ°ç™»å½•é¡µ</span></span><br><span class="line">      router.push(<span class="string">'/login'</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'tokenè¶…æ—¶äº†'</span>))</span><br><span class="line">    }</span><br><span class="line">    config.headers[<span class="string">'Authorization'</span>] = <span class="string">`Bearer <span class="subst">${store.getters.token}</span>`</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config <span class="comment">// å¿…é¡»è¦è¿”å›çš„</span></span><br><span class="line">}, <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">})</span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use(<span class="function"><span class="params">response</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// axiosé»˜è®¤åŠ äº†ä¸€å±‚data</span></span><br><span class="line">  <span class="keyword">const</span> { success, message, data } = response.data</span><br><span class="line">  <span class="comment">//   è¦æ ¹æ®successçš„æˆåŠŸä¸å¦å†³å®šä¸‹é¢çš„æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (success) {</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å·²ç»é”™è¯¯äº† è¿˜èƒ½è¿›then ? ä¸èƒ½ ï¼ åº”è¯¥è¿›catch</span></span><br><span class="line">    Message.error(message) <span class="comment">// æç¤ºé”™è¯¯æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(message))</span><br><span class="line">  }</span><br><span class="line">}, <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  Message.error(error.message) <span class="comment">// æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error) <span class="comment">// è¿”å›æ‰§è¡Œé”™è¯¯ è®©å½“å‰çš„æ‰§è¡Œé“¾è·³å‡ºæˆåŠŸ ç›´æ¥è¿›å…¥ catch</span></span><br><span class="line">})</span><br><span class="line"><span class="comment">// æ˜¯å¦è¶…æ—¶</span></span><br><span class="line"><span class="comment">// è¶…æ—¶é€»è¾‘  (å½“å‰æ—¶é—´  - ç¼“å­˜ä¸­çš„æ—¶é—´) æ˜¯å¦å¤§äº æ—¶é—´å·®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsCheckTimeOut</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> currentTime = <span class="built_in">Date</span>.now() <span class="comment">// å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="keyword">var</span> timeStamp = getTimeStamp() <span class="comment">// ç¼“å­˜æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="keyword">return</span> (currentTime - timeStamp) / <span class="number">1000</span> &gt; TimeOut</span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼šæˆ‘ä»¬åœ¨è°ƒç”¨ç™»å½•æ¥å£çš„æ—¶å€™ ä¸€å®šæ˜¯æ²¡æœ‰tokençš„ï¼Œæ‰€ä»¥tokenæ£€æŸ¥ä¸ä¼šå½±å“ç™»å½•æ¥å£çš„è°ƒç”¨</p>
<blockquote>
<p>åŒç†ï¼Œåœ¨ç™»å½•çš„æ—¶å€™ï¼Œå¦‚æœç™»å½•æˆåŠŸï¼Œæˆ‘ä»¬åº”è¯¥è®¾ç½®æ—¶é—´æˆ³</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰login action  ä¹Ÿéœ€è¦å‚æ•° è°ƒç”¨actionæ—¶ ä¼ é€’è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line"><span class="comment">// async æ ‡è®°çš„å‡½æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•° -&gt; æœ¬è´¨æ˜¯è¿˜æ˜¯ ä¸€ä¸ªpromise</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">login</span>(<span class="params">context, data</span>)</span> {</span><br><span class="line">  <span class="comment">// ç»è¿‡å“åº”æ‹¦æˆªå™¨çš„å¤„ç†ä¹‹å è¿™é‡Œçš„resultå®é™…ä¸Šå°±æ˜¯ token</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> login(data) <span class="comment">// å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªpromise  resultå°±æ˜¯æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">  <span class="comment">// axiosé»˜è®¤ç»™æ•°æ®åŠ äº†ä¸€å±‚data</span></span><br><span class="line">  <span class="comment">// è¡¨ç¤ºç™»å½•æ¥å£è°ƒç”¨æˆåŠŸ ä¹Ÿå°±æ˜¯æ„å‘³ç€ä½ çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">  <span class="comment">// ç°åœ¨æœ‰ç”¨æˆ·token</span></span><br><span class="line">  <span class="comment">// actions ä¿®æ”¹state å¿…é¡»é€šè¿‡mutations</span></span><br><span class="line">  context.commit(<span class="string">'setToken'</span>, result)</span><br><span class="line">  <span class="comment">// å†™å…¥æ—¶é—´æˆ³</span></span><br><span class="line">  setTimeStamp() <span class="comment">// å°†å½“å‰çš„æœ€æ–°æ—¶é—´å†™å…¥ç¼“å­˜</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<blockquote>
<p>æœ‰ä¸»åŠ¨å¤„ç†å°±æœ‰è¢«åŠ¨å¤„ç†ï¼Œä¹Ÿå°±æ˜¯åç«¯å‘Šè¯‰æˆ‘ä»¬è¶…æ—¶äº†ï¼Œæˆ‘ä»¬è¢«è¿«åšå‡ºååº”ï¼Œå¦‚æœåç«¯æ¥å£æ²¡æœ‰åšå¤„ç†ï¼Œä¸»åŠ¨ä»‹å…¥å°±æ˜¯ä¸€ç§ç®€å•çš„æ–¹å¼</p>
</blockquote>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆtokenè¶…æ—¶çš„ä¸»åŠ¨ä»‹å…¥</p>
<h2 id="Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†"><a href="#Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†" class="headerlink" title="Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†"></a>Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†</p>
<blockquote>
<p>é™¤äº†tokençš„ä¸»åŠ¨ä»‹å…¥ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹tokenè¿›è¡Œè¢«åŠ¨çš„å¤„ç†ï¼Œå¦‚å›¾</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200818155842864.png" alt="image-20200818155842864"></p>
<p>tokenè¶…æ—¶çš„é”™è¯¯ç æ˜¯**<code>10002</code>**</p>
<p><strong>ä»£ç å®ç°</strong>  <strong><code>src/utils/request.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">error =&gt; {</span><br><span class="line">  <span class="comment">// error ä¿¡æ¯ é‡Œé¢ responseçš„å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (error.response &amp;&amp; error.response.data &amp;&amp; error.response.data.code === <span class="number">10002</span>) {</span><br><span class="line">    <span class="comment">// å½“ç­‰äº10002çš„æ—¶å€™ è¡¨ç¤º åç«¯å‘Šè¯‰æˆ‘tokenè¶…æ—¶äº†</span></span><br><span class="line">    store.dispatch(<span class="string">'user/logout'</span>) <span class="comment">// ç™»å‡ºaction åˆ é™¤token</span></span><br><span class="line">    router.push(<span class="string">'/login'</span>)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    Message.error(error.message) <span class="comment">// æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ— è®ºæ˜¯ä¸»åŠ¨ä»‹å…¥è¿˜æ˜¯è¢«åŠ¨å¤„ç†ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ä¸ºäº†æ›´å¥½åœ°å¤„ç†tokenï¼Œå‡å°‘é”™è¯¯å¼‚å¸¸çš„å¯èƒ½æ€§</p>
</blockquote>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong>  Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« èŠ‚æˆ‘ä¸€æ­¥æ­¥å®ç°äº†å¦‚ä¸‹çš„æ•ˆæœ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716015113164.png" alt="image-20200716015113164"></p>
<p>å®é™…çš„ä¸šåŠ¡èµ°å‘</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827152601712.png" alt="image-20200827152601712"></p>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„ä¸»é¡µåŠŸèƒ½æœ‰ä¸€ä¸ªé‡è¦çš„**<code>è§’è‰²æƒé™</code>**åŠŸèƒ½è¿˜æ²¡æœ‰å®Œæˆï¼Œæ­¤åŠŸèƒ½ç­‰åˆ°æˆ‘ä»¬å®ŒæˆåŸºæœ¬ä¸šåŠ¡ä¹‹åå†è¿›è¡Œå±•å¼€</p>
<p>ä¸­å°å¤§å‹åç«¯å¹³å°çš„æ·±å…¥æ˜¯ä¸€ä¸ª**<code>æŠ½ä¸å‰¥èŒ§</code>**çš„è¿‡ç¨‹ï¼Œå¾ªåºæ¸è¿›çš„æ˜ç™½æ¯ä¸€æ­¥çš„æ“ä½œæ˜¯éå¸¸å…³é”®çš„ã€‚</p>
<h1 id="4-è·¯ç”±å’Œé¡µé¢"><a href="#4-è·¯ç”±å’Œé¡µé¢" class="headerlink" title="4.è·¯ç”±å’Œé¡µé¢"></a>4.è·¯ç”±å’Œé¡µé¢</h1><h2 id="è·¯ç”±é¡µé¢æ•´ç†"><a href="#è·¯ç”±é¡µé¢æ•´ç†" class="headerlink" title="è·¯ç”±é¡µé¢æ•´ç†"></a>è·¯ç”±é¡µé¢æ•´ç†</h2><p><strong><code>ç›®æ ‡</code></strong> åˆ é™¤åŸºç¡€æ¨¡æ¿ä¸­é™„å¸¦çš„å¤šä½™é¡µé¢</p>
<blockquote>
<p>åŸºç¡€æ¨¡æ¿å¸®æˆ‘ä»¬æå‰å†…ç½®äº†ä¸€äº›é¡µé¢ï¼Œæœ¬ç« èŠ‚æˆ‘ä»¬è¿›è¡Œä¸€ä¸‹æ•´ç†</p>
</blockquote>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç±»ä¼¼è¿™ç§å¤§å‹ä¸­å°é¡¹ç›®çš„é¡µé¢è·¯ç”±æ˜¯å¦‚ä½•è®¾ç½®çš„ã€‚</p>
<p><strong>ç®€å•é¡¹ç›®</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827153753307.png" alt="image-20200827153753307"></p>
<p><strong>å½“å‰é¡¹ç›®ç»“æ„</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827155342126.png" alt="image-20200827155342126"></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦æ‹†æˆè‹¥å¹²ä¸ªè·¯ç”±æ¨¡å—å‘¢ï¼Ÿ </p>
</blockquote>
<p>å› ä¸ºå¤æ‚ä¸­å°é¡¹ç›®çš„é¡µé¢ä¼—å¤šï¼Œä¸å¯èƒ½æŠŠæ‰€æœ‰çš„ä¸šåŠ¡éƒ½é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸Šè¿›è¡Œç®¡ç†å’Œç»´æŠ¤ï¼Œå¹¶ä¸”è¿˜æœ‰æœ€é‡è¦çš„ï¼Œå‰ç«¯çš„é¡µé¢ä¸­ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯æ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®çš„ï¼Œ ä¸€éƒ¨åˆ†æ˜¯åªæœ‰æœ‰æƒé™çš„äººæ‰å¯ä»¥è®¿é—®çš„ï¼Œæ‹†åˆ†å¤šä¸ªæ¨¡å—ä¾¿äºæ›´å¥½çš„æ§åˆ¶</p>
<p><strong>é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716150421791.png" alt="image-20200716150421791"></p>
<p>**<code>æ³¨æ„</code>**è¿™é‡Œçš„åŠ¨æ€è·¯ç”±å¹¶ä¸æ˜¯ <strong>è·¯ç”±ä¼ å‚</strong>çš„åŠ¨æ€è·¯ç”±</p>
<p>äº†è§£å®Œæˆè·¯ç”±è®¾è®¡ä¹‹åï¼Œæˆ‘ä»¬å¯¹å½“å‰çš„è·¯ç”±è¿›è¡Œä¸€ä¸‹æ•´ç†</p>
<p><strong>åˆ é™¤å¤šä½™çš„é™æ€è·¯ç”±è¡¨</strong>   <strong><code>src/router/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * constantRoutes</span></span><br><span class="line"><span class="comment"> * a base page that does not have permission requirements</span></span><br><span class="line"><span class="comment"> * all roles can be accessed</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRoutes = [</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/login/index'</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/404'</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/404'</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">    <span class="attr">component</span>: Layout,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">'/dashboard'</span>,</span><br><span class="line">    <span class="attr">children</span>: [{</span><br><span class="line">      <span class="attr">path</span>: <span class="string">'dashboard'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'Dashboard'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/dashboard/index'</span>),</span><br><span class="line">      <span class="attr">meta</span>: { <span class="attr">title</span>: <span class="string">'Dashboard'</span>, <span class="attr">icon</span>: <span class="string">'dashboard'</span> }</span><br><span class="line">    }]</span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 404 page must be placed at the end !!!</span></span><br><span class="line">  { <span class="attr">path</span>: <span class="string">'*'</span>, <span class="attr">redirect</span>: <span class="string">'/404'</span>, <span class="attr">hidden</span>: <span class="literal">true</span> }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢ä»£ç ï¼Œæˆ‘ä»¬åªå¯¹ç™»å½•é¡µ/404/ä¸»é¡µè¿›è¡Œäº†ä¿ç•™</p>
</blockquote>
<p>å¹¶ä¸”æˆ‘ä»¬å‘ç°ï¼Œåˆ é™¤äº†å…¶ä»–é¡µé¢ä¹‹åï¼Œå·¦ä¾§å¯¼èˆªèœå•çš„æ•°æ®ä¹Ÿåªå‰©ä¸‹äº†é¦–é¡µ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716153900077.png" alt="image-20200716153900077"></p>
<p><strong>è¿™æ˜¯å› ä¸ºå·¦ä¾§å¯¼èˆªèœå•çš„æ•°æ®æ¥æºäºè·¯ç”±ä¿¡æ¯</strong></p>
<p><strong>åˆ é™¤å¤šä½™çš„è·¯ç”±ç»„ä»¶</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716154315430.png" alt="image-20200716154315430"></p>
<blockquote>
<p>åªä¿ç•™ä»¥ä¸Šä¸‰ä¸ªè·¯ç”±ç»„ä»¶çš„å†…å®¹ï¼Œåç»­æ…¢æ…¢å¢åŠ </p>
</blockquote>
<p>åŒæ ·çš„åœ¨apiç›®å½•ä¸‹ï¼Œå­˜åœ¨å¤šä½™çš„api-table.js ä¸€å¹¶åˆ é™¤</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆä¸šåŠ¡è·¯ç”±é¡µé¢çš„æ•´ç†</p>
<h2 id="ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º"><a href="#ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º" class="headerlink" title="ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º"></a>ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º</h2><p>**<code>ç›®æ ‡</code>**ï¼š å¿«é€Ÿæ­å»ºäººèµ„é¡¹ç›®çš„å¸¸è§„ä¸šåŠ¡æ¨¡å—</p>
<h3 id="æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶"><a href="#æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶" class="headerlink" title="æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶"></a>æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶</h3><blockquote>
<p>æˆªæ­¢åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªä¸­å°ç³»ç»Ÿçš„åŸºæœ¬è½®å»“ï¼Œå¦‚å›¾</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716224038544.png" alt="image-20200716224038544"></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†äººåŠ›èµ„æºéœ€è¦åšçš„æ¨¡å—å¿«é€Ÿæ­å»ºç›¸åº”çš„é¡µé¢å’Œè·¯ç”±</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">â”œâ”€â”€ dashboard           <span class="comment"># é¦–é¡µ</span></span><br><span class="line">â”œâ”€â”€ login               <span class="comment"># ç™»å½•</span></span><br><span class="line">â”œâ”€â”€ 404                 <span class="comment"># 404</span></span><br><span class="line">â”œâ”€â”€ departments         <span class="comment"># ç»„ç»‡æ¶æ„</span></span><br><span class="line">â”œâ”€â”€ employees           <span class="comment"># å‘˜å·¥</span></span><br><span class="line">â”œâ”€â”€ setting             <span class="comment"># å…¬å¸è®¾ç½®</span></span><br><span class="line">â”œâ”€â”€ salarys             <span class="comment"># å·¥èµ„</span></span><br><span class="line">â”œâ”€â”€ social              <span class="comment"># ç¤¾ä¿</span></span><br><span class="line">â”œâ”€â”€ attendances         <span class="comment"># è€ƒå‹¤</span></span><br><span class="line">â”œâ”€â”€ approvals           <span class="comment"># å®¡æ‰¹</span></span><br><span class="line">â”œâ”€â”€ permission          <span class="comment"># æƒé™ç®¡ç†</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ ¹æ®ä¸Šå›¾ä¸­çš„ç»“æ„ï¼Œåœ¨viewsç›®å½•ä¸‹ï¼Œå»ºç«‹å¯¹åº”çš„ç›®å½•ï¼Œç»™æ¯ä¸ªæ¨¡å—æ–°å»ºä¸€ä¸ª**<code>index.vue</code>**ï¼Œä½œä¸ºæ¯ä¸ªæ¨¡å—çš„ä¸»é¡µ</p>
<p><strong>å¿«é€Ÿæ–°å»ºæ–‡ä»¶å¤¹</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ mkdir departments employees setting salarys social attendances approvals permission</span><br></pre></td></tr></tbody></table></figure>

<p>æ¯ä¸ªæ¨¡å—çš„å†…å®¹ï¼Œå¯ä»¥å…ˆæŒ‰ç…§æ ‡å‡†çš„æ¨¡æ¿å»ºç«‹ï¼Œå¦‚</p>
<p><strong>å‘˜å·¥</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;h2&gt;</span><br><span class="line">        å‘˜å·¥</span><br><span class="line">      &lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ ¹æ®ä»¥ä¸Šçš„æ ‡å‡†å»ºç«‹å¥½å¯¹åº”é¡µé¢ä¹‹åï¼Œæ¥ä¸‹æ¥å»ºç«‹æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™</p>
</blockquote>
<p>è·¯ç”±æ¨¡å—ç›®å½•ç»“æ„</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">â”œâ”€â”€ router               <span class="comment"># è·¯ç”±ç›®å½•</span></span><br><span class="line"> â”œâ”€â”€ index.js            <span class="comment"># è·¯ç”±ä¸»æ–‡ä»¶</span></span><br><span class="line"> â”œâ”€â”€ modules             <span class="comment"># æ¨¡å—ç›®å½•</span></span><br><span class="line">  â”œâ”€â”€ departments.js     <span class="comment"># ç»„ç»‡æ¶æ„</span></span><br><span class="line">  â”œâ”€â”€ employees.js       <span class="comment"># å‘˜å·¥ </span></span><br><span class="line">  â”œâ”€â”€ setting.js         <span class="comment"># å…¬å¸è®¾ç½®</span></span><br><span class="line">  â”œâ”€â”€ salarys.js         <span class="comment"># å·¥èµ„</span></span><br><span class="line">  â”œâ”€â”€ social.js          <span class="comment"># ç¤¾ä¿</span></span><br><span class="line">  â”œâ”€â”€ attendances.js     <span class="comment"># è€ƒå‹¤</span></span><br><span class="line">  â”œâ”€â”€ approvals.js       <span class="comment"># å®¡æ‰¹</span></span><br><span class="line">  â”œâ”€â”€ permission.js      <span class="comment"># æƒé™ç®¡ç†</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¿«é€Ÿåˆ›å»ºå‘½ä»¤</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ touch departments.js employees.js setting.js salarys.js salarys.js social.js attendances.js approvals.js permission.js</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™"><a href="#è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™" class="headerlink" title="è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™"></a>è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™</h3><blockquote>
<p>æ¯ä¸ªæ¨¡å—å¯¼å‡ºçš„å†…å®¹è¡¨ç¤ºè¯¥æ¨¡å—ä¸‹çš„è·¯ç”±è§„åˆ™</p>
</blockquote>
<p>å¦‚å‘˜å·¥ <strong>employees.js</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºå±äºå‘˜å·¥çš„è·¯ç”±è§„åˆ™</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'@/layout'</span></span><br><span class="line"><span class="comment">//  {  path: '', component: '' }</span></span><br><span class="line"><span class="comment">// æ¯ä¸ªå­æ¨¡å— å…¶å® éƒ½æ˜¯å¤–å±‚æ˜¯layout  ç»„ä»¶ä½äºlayoutçš„äºŒçº§è·¯ç”±é‡Œé¢</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/employees'</span>, <span class="comment">// è·¯å¾„</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">'employees'</span>, <span class="comment">// ç»™è·¯ç”±è§„åˆ™åŠ ä¸€ä¸ªname</span></span><br><span class="line">  <span class="attr">component</span>: Layout, <span class="comment">// ç»„ä»¶</span></span><br><span class="line">  <span class="comment">// é…ç½®äºŒçº§è·¯çš„è·¯ç”±è¡¨</span></span><br><span class="line">  <span class="attr">children</span>: [{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">''</span>, <span class="comment">// è¿™é‡Œå½“äºŒçº§è·¯ç”±çš„pathä»€ä¹ˆéƒ½ä¸å†™çš„æ—¶å€™ è¡¨ç¤ºè¯¥è·¯ç”±ä¸ºå½“å‰äºŒçº§è·¯ç”±çš„é»˜è®¤è·¯ç”±</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/employees'</span>),</span><br><span class="line">    <span class="comment">// è·¯ç”±å…ƒä¿¡æ¯  å…¶å®å°±æ˜¯å­˜å‚¨æ•°æ®çš„å¯¹è±¡ æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ”¾ç½®ä¸€äº›ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">meta</span>: {</span><br><span class="line">      <span class="attr">title</span>: <span class="string">'å‘˜å·¥ç®¡ç†'</span> <span class="comment">// metaå±æ€§çš„é‡Œé¢çš„å±æ€§ éšæ„å®šä¹‰ ä½†æ˜¯è¿™é‡Œä¸ºä»€ä¹ˆè¦ç”¨titleå‘¢ï¼Œ å› ä¸ºå·¦ä¾§å¯¼èˆªä¼šè¯»å–æˆ‘ä»¬çš„è·¯ç”±é‡Œçš„metaé‡Œé¢çš„titleä½œä¸ºæ˜¾ç¤ºèœå•åç§°</span></span><br><span class="line">    }</span><br><span class="line">  }]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ä½ çš„è®¿é—®åœ°å€ æ˜¯ /employeesçš„æ—¶å€™ layoutç»„ä»¶ä¼šæ˜¾ç¤º æ­¤æ—¶ ä½ çš„äºŒçº§è·¯ç”±çš„é»˜è®¤ç»„ä»¶  ä¹Ÿä¼šæ˜¾ç¤º</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†metaå±æ€§ï¼Œè¯¥å±æ€§ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢å¯æ”¾ç½®è‡ªå®šä¹‰å±æ€§ï¼Œä¸»è¦ç”¨äºè¯»å–ä¸€äº›é…ç½®å’Œå‚æ•°ï¼Œå¹¶ä¸”å€¼å¾—**<code>æ³¨æ„</code><strong>çš„æ˜¯ï¼šæˆ‘ä»¬çš„metaå†™äº†äºŒçº§é»˜è®¤è·¯ç”±ä¸Šé¢ï¼Œè€Œä¸æ˜¯ä¸€çº§è·¯ç”±ï¼Œå› ä¸ºå½“å­˜åœ¨äºŒçº§è·¯ç”±çš„æ—¶å€™ï¼Œè®¿é—®å½“å‰è·¯ç”±ä¿¡æ¯è®¿é—®çš„å°±æ˜¯</strong><code>äºŒçº§é»˜è®¤è·¯ç”±</code>**</p>
</blockquote>
<p>å¤§å®¶é’ˆå¯¹ä¸Šè¿°çš„è®¾è®¡ï¼Œå¯¹ä¸Šé¢çš„æ¨¡å—è¿›è¡Œå¿«é€Ÿçš„æ­å»º</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆå…¶ä»–æ¨¡å—çš„é¡µé¢å’Œè·¯ç”±çš„å¿«é€Ÿæ­å»º</p>
<h2 id="é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•"><a href="#é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•" class="headerlink" title="é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•"></a>é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•</h2><p>**<code>ç›®æ ‡</code>**ï¼š å°†é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±çš„è·¯ç”±è¡¨è¿›è¡Œä¸´æ—¶åˆå¹¶</p>
<blockquote>
<p>ä»€ä¹ˆå«ä¸´æ—¶åˆå¹¶ï¼Ÿ</p>
</blockquote>
<p>åœ¨ç¬¬ä¸€ä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬è®²è¿‡äº†ï¼ŒåŠ¨æ€è·¯ç”±æ˜¯éœ€è¦æƒé™è¿›è¡Œè®¿é—®çš„ï¼Œä½†æ˜¯æƒé™çš„åŠ¨æ€è·¯ç”±è®¿é—®æ˜¯å¾ˆå¤æ‚çš„ï¼Œæˆ‘ä»¬ç¨ååœ¨è¿›è¡Œè®²è§£ï¼Œæ‰€ä»¥ä¸ºäº†æ›´å¥½åœ°çœ‹åˆ°æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°† é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±è¿›è¡Œåˆå¹¶</p>
<p><strong>è·¯ç”±ä¸»æ–‡ä»¶</strong>  <strong><code>src/router/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å¤šä¸ªæ¨¡å—çš„è§„åˆ™</span></span><br><span class="line"><span class="keyword">import</span> approvalsRouter <span class="keyword">from</span> <span class="string">'./modules/approvals'</span></span><br><span class="line"><span class="keyword">import</span> departmentsRouter <span class="keyword">from</span> <span class="string">'./modules/departments'</span></span><br><span class="line"><span class="keyword">import</span> employeesRouter <span class="keyword">from</span> <span class="string">'./modules/employees'</span></span><br><span class="line"><span class="keyword">import</span> permissionRouter <span class="keyword">from</span> <span class="string">'./modules/permission'</span></span><br><span class="line"><span class="keyword">import</span> attendancesRouter <span class="keyword">from</span> <span class="string">'./modules/attendances'</span></span><br><span class="line"><span class="keyword">import</span> salarysRouter <span class="keyword">from</span> <span class="string">'./modules/salarys'</span></span><br><span class="line"><span class="keyword">import</span> settingRouter <span class="keyword">from</span> <span class="string">'./modules/setting'</span></span><br><span class="line"><span class="keyword">import</span> socialRouter <span class="keyword">from</span> <span class="string">'./modules/social'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨æ€è·¯ç”±</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> asyncRoutes = [</span><br><span class="line">  approvalsRouter,</span><br><span class="line">  departmentsRouter,</span><br><span class="line">  employeesRouter,</span><br><span class="line">  permissionRouter,</span><br><span class="line">  attendancesRouter,</span><br><span class="line">  salarysRouter,</span><br><span class="line">  settingRouter,</span><br><span class="line">  socialRouter</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> createRouter = <span class="function">() =&gt;</span> <span class="keyword">new</span> Router({</span><br><span class="line">  <span class="comment">// mode: 'history', // require service support</span></span><br><span class="line">  <span class="attr">scrollBehavior</span>: <span class="function">() =&gt;</span> ({ <span class="attr">y</span>: <span class="number">0</span> }), <span class="comment">// ç®¡ç†æ»šåŠ¨è¡Œä¸º å¦‚æœå‡ºç°æ»šåŠ¨ åˆ‡æ¢å°±è®© è®©é¡µé¢å›åˆ°é¡¶éƒ¨</span></span><br><span class="line">  <span class="attr">routes</span>: [...constantRoutes, ...asyncRoutes] <span class="comment">// ä¸´æ—¶åˆå¹¶æ‰€æœ‰çš„è·¯ç”±</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡ä¸Šé¢çš„æ“ä½œï¼Œæˆ‘ä»¬å°†é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±è¿›è¡Œäº†åˆå¹¶</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827170403463.png" alt="image-20200827170403463"></p>
<p>å½“æˆ‘ä»¬åˆå¹¶æƒé™å®Œæˆï¼Œæˆ‘ä»¬æƒŠå¥‡çš„å‘ç°é¡µé¢æ•ˆæœå·²ç»å·¦ä¾§çš„å¯¼èˆªèœå• =ã€‹ è·¯ç”±é¡µé¢</p>
<p>è¿™æ˜¯ä¹‹å‰åŸºç¡€æ¨¡æ¿ä¸­å¯¹äºå·¦ä¾§å¯¼èˆªèœå•çš„å°è£…</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720003233026.png" alt="image-20200720003233026"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å°†é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå• </p>
<h2 id="å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡"><a href="#å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡" class="headerlink" title="å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡"></a>å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡</h2><p><strong><code>ç›®æ ‡</code></strong>  è§£æå·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œ  è®¾ç½®å·¦ä¾§å¯¼èˆªèœå•çš„å›¾æ ‡å†…å®¹</p>
<blockquote>
<p>ä¸Šå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬é›†æˆäº†è·¯ç”±ï¼Œèœå•å°±æ˜¾ç¤ºå†…å®¹äº†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆ ï¼Ÿ</p>
</blockquote>
<p><strong>é˜…è¯»å·¦ä¾§èœå•ä»£ç </strong></p>
<blockquote>
<p>æˆ‘ä»¬å‘ç°å¦‚å›¾çš„é€»è¾‘</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200828103109646.png" alt="image-20200828103109646"></p>
<p>ç”±äºï¼Œè¯¥é¡¹ç›®ä¸éœ€è¦äºŒçº§èœå•çš„æ˜¾ç¤ºï¼Œæ‰€ä»¥å¯¹ä»£ç è¿›è¡Œä¸€ä¸‹å¤„ç†ï¼Œåªä¿ç•™ä¸€çº§èœå•è·¯ç”±</p>
<p><strong><code>src/layout/components/Sidebar/SidebarItem.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if="!item.hidden"&gt;</span><br><span class="line">    &lt;template v-if="hasOneShowingChild(item.children,item) &amp;&amp; (!onlyOneChild.children||onlyOneChild.noShowingChildren)&amp;&amp;!item.alwaysShow"&gt;</span><br><span class="line">      &lt;app-link v-if="onlyOneChild.meta" :to="resolvePath(onlyOneChild.path)"&gt;</span><br><span class="line">        &lt;el-menu-item :index="resolvePath(onlyOneChild.path)" :class="{'submenu-title-noDropdown':!isNest}"&gt;</span><br><span class="line">          &lt;item :icon="onlyOneChild.meta.icon||(item.meta&amp;&amp;item.meta.icon)" :title="onlyOneChild.meta.title" /&gt;</span><br><span class="line">        &lt;/el-menu-item&gt;</span><br><span class="line">      &lt;/app-link&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- &lt;el-submenu v-else ref="subMenu" :index="resolvePath(item.path)" popper-append-to-body&gt;</span><br><span class="line">      &lt;template slot="title"&gt;</span><br><span class="line">        &lt;item v-if="item.meta" :icon="item.meta &amp;&amp; item.meta.icon" :title="item.meta.title" /&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;sidebar-item</span><br><span class="line">        v-for="child in item.children"</span><br><span class="line">        :key="child.path"</span><br><span class="line">        :is-nest="true"</span><br><span class="line">        :item="child"</span><br><span class="line">        :base-path="resolvePath(child.path)"</span><br><span class="line">        class="nest-menu"</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/el-submenu&gt; --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šé€šè¿‡ä»£ç å‘ç°ï¼Œå½“è·¯ç”±ä¸­çš„å±æ€§</strong><code>hidden</code>**ä¸ºtrueæ—¶ï¼Œè¡¨ç¤ºè¯¥è·¯ç”±ä¸æ˜¾ç¤ºåœ¨å·¦ä¾§èœå•ä¸­</p>
<blockquote>
<p>ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å‘ç°å·¦ä¾§èœå•å¹¶ä¸åè°ƒï¼Œæ˜¯å› ä¸ºç¼ºå°‘å›¾æ ‡ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬çš„å›¾æ ‡é‡‡ç”¨äº†SVGçš„ç»„ä»¶</p>
</blockquote>
<p>å·¦ä¾§èœå•çš„å›¾æ ‡å®é™…ä¸Šè¯»å–çš„æ˜¯metaå±æ€§çš„iconï¼Œè¿™ä¸ªiconéœ€è¦æˆ‘ä»¬æå‰æ”¾ç½®åœ¨**<code>src/icons/svg</code>**ç›®å½•ä¸‹</p>
<blockquote>
<p>è¯¥èµ„æºå·²ç»åœ¨èœå•svgç›®å½•ä¸­æä¾›ï¼Œè¯·å°†è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰svgæ”¾åˆ°**<code>src/icons/svg</code>**ç›®å½•ä¸‹</p>
</blockquote>
<p> å…·ä½“çš„iconåç§°å¯å‚è€ƒ<a href="https://panjiachen.github.io/vue-element-admin/#/icon/index">çº¿ä¸Šåœ°å€</a></p>
<p>functionalä¸ºtrueï¼Œè¡¨ç¤ºè¯¥ç»„ä»¶ä¸ºä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶</p>
<p>å‡½æ•°å¼ç»„ä»¶ï¼š æ²¡æœ‰dataçŠ¶æ€ï¼Œæ²¡æœ‰å“åº”å¼æ•°æ®ï¼Œåªä¼šæ¥æ”¶propså±æ€§ï¼Œ æ²¡æœ‰thisï¼Œ ä»–å°±æ˜¯ä¸€ä¸ªå‡½æ•°</p>
<p><strong>æ¨¡å—å¯¹åº”icon</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">â”œâ”€â”€ dashboard           <span class="comment"># dashboard</span></span><br><span class="line">â”œâ”€â”€ departments         <span class="comment"># tree</span></span><br><span class="line">â”œâ”€â”€ employees           <span class="comment"># people</span></span><br><span class="line">â”œâ”€â”€ setting             <span class="comment"># setting</span></span><br><span class="line">â”œâ”€â”€ salarys             <span class="comment"># money</span></span><br><span class="line">â”œâ”€â”€ social              <span class="comment"># table</span></span><br><span class="line">â”œâ”€â”€ attendances         <span class="comment"># skill</span></span><br><span class="line">â”œâ”€â”€ approvals           <span class="comment"># tree-table</span></span><br><span class="line">â”œâ”€â”€ permission          <span class="comment"># lock</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720010016813.png" alt="image-20200720010016813"></p>
<p>æŒ‰ç…§å¯¹åº”çš„iconè®¾ç½®å›¾æ ‡</p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡ï¼š</code></strong> ç†è§£å·¦ä¾§èœå•çš„ç”Ÿæˆé€»è¾‘ï¼Œå¹¶è®¾ç½®å·¦ä¾§èœå•çš„å›¾æ ‡</p>
<h1 id="5-ç»„ç»‡ç»“æ„"><a href="#5-ç»„ç»‡ç»“æ„" class="headerlink" title="5.ç»„ç»‡ç»“æ„"></a>5.ç»„ç»‡ç»“æ„</h1><h2 id="ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€"><a href="#ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€" class="headerlink" title="ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€"></a>ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€</h2><p>**<code>ç›®æ ‡</code>**ï¼šä½¿ç”¨element-UIç»„ä»¶å¸ƒå±€ç»„ç»‡æ¶æ„çš„åŸºæœ¬å¸ƒå±€</p>
<h3 id="è®¤è¯†ç»„ç»‡æ¶æ„"><a href="#è®¤è¯†ç»„ç»‡æ¶æ„" class="headerlink" title="è®¤è¯†ç»„ç»‡æ¶æ„"></a>è®¤è¯†ç»„ç»‡æ¶æ„</h3><p><a href="%5Bhttp://czpm.itcast.cn/ihrm/#g=1&amp;p=%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%5D(http://czpm.itcast.cn/ihrm/#g=1&amp;p=%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84)">ç»„ç»‡æ¶æ„äº§å“prd</a></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200828105046683.png" alt="image-20200828105046683"></p>
<blockquote>
<p>ä¸€ä¸ªä¼ä¸šçš„ç»„ç»‡æ¶æ„æ˜¯è¯¥ä¼ä¸šçš„çµé­‚ï¼Œç»„ç»‡æ¶æ„å¤šå¸¸é‡‡ç”¨æ ‘å½¢é‡‘å­—å¡”å¼ç»“æ„ï¼Œæœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å¸ƒå±€å‡ºé¡µé¢çš„åŸºæœ¬ç»“æ„</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720010954202.png" alt="image-20200720010954202"> </p>
<h3 id="å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹"><a href="#å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹" class="headerlink" title="å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹"></a>å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹</h3><p>é¦–å…ˆå®ç°å¤´éƒ¨çš„ç»“æ„ï¼Œé‡‡ç”¨elementçš„<strong>è¡Œåˆ—å¸ƒå±€</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-card class="tree-card"&gt;</span><br><span class="line">     &lt;!-- ç”¨äº†ä¸€ä¸ªè¡Œåˆ—å¸ƒå±€ --&gt;</span><br><span class="line">     &lt;el-row type="flex" justify="space-between" align="middle" style="height: 40px"&gt;</span><br><span class="line">       &lt;el-col&gt;</span><br><span class="line">         &lt;span&gt;æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸&lt;/span&gt;</span><br><span class="line">       &lt;/el-col&gt;</span><br><span class="line">       &lt;el-col :span="4"&gt;</span><br><span class="line">         &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">           &lt;!-- ä¸¤ä¸ªå†…å®¹ --&gt;</span><br><span class="line">           &lt;el-col&gt;è´Ÿè´£äºº&lt;/el-col&gt;</span><br><span class="line">           &lt;el-col&gt;</span><br><span class="line">             &lt;!-- ä¸‹æ‹‰èœå• element --&gt;</span><br><span class="line">             &lt;el-dropdown&gt;</span><br><span class="line">               &lt;span&gt;</span><br><span class="line">                 æ“ä½œ&lt;i class="el-icon-arrow-down" /&gt;</span><br><span class="line">               &lt;/span&gt;</span><br><span class="line">               &lt;!-- ä¸‹æ‹‰èœå• --&gt;</span><br><span class="line">               &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">                 &lt;el-dropdown-item&gt;æ·»åŠ å­éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">               &lt;/el-dropdown-menu&gt;</span><br><span class="line">             &lt;/el-dropdown&gt;</span><br><span class="line">           &lt;/el-col&gt;</span><br><span class="line">         &lt;/el-row&gt;</span><br><span class="line">       &lt;/el-col&gt;</span><br><span class="line">     &lt;/el-row&gt;</span><br><span class="line">   &lt;/el-card&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ ·å¼</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line"><span class="selector-class">.tree-card</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span>  <span class="number">140px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">14px</span>;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720180221662.png" alt="image-20200720180221662"></p>
<h3 id="æ ‘å½¢ç»„ä»¶è®¤è¯†"><a href="#æ ‘å½¢ç»„ä»¶è®¤è¯†" class="headerlink" title="æ ‘å½¢ç»„ä»¶è®¤è¯†"></a>æ ‘å½¢ç»„ä»¶è®¤è¯†</h3><p>æ¥ä¸‹æ¥ï¼Œå®ç°æ ‘å½¢çš„ç»“æ„ï¼Œé‡‡ç”¨elementçš„**<a href="https://element.eleme.cn/#/zh-CN/component/tree">treeç»„ä»¶</a>**ï¼Œ å¦‚å›¾æ•ˆæœ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200828105634138.png" alt="image-20200828105634138"></p>
<blockquote>
<p>æ ‘å½¢ç»„ä»¶å±æ€§</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
<th align="left">ç±»å‹</th>
<th align="left">å¯é€‰å€¼</th>
<th align="left">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">default-expand-all</td>
<td align="left">æ˜¯å¦é»˜è®¤å±•å¼€æ‰€æœ‰èŠ‚ç‚¹</td>
<td align="left">boolean</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">data</td>
<td align="left">å±•ç¤ºæ•°æ®</td>
<td align="left">array</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">node-key</td>
<td align="left">æ¯ä¸ªæ ‘èŠ‚ç‚¹ç”¨æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„å±æ€§ï¼Œæ•´æ£µæ ‘åº”è¯¥æ˜¯å”¯ä¸€çš„</td>
<td align="left">String</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">props</td>
<td align="left">é…ç½®é€‰é¡¹ï¼Œå…·ä½“çœ‹ä¸‹è¡¨</td>
<td align="left">object</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
</tbody></table>
<p><strong>propså±æ€§</strong></p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
<th align="left">ç±»å‹</th>
<th align="left">å¯é€‰å€¼</th>
<th align="left">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">label</td>
<td align="left">æŒ‡å®šèŠ‚ç‚¹æ ‡ç­¾ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">string, function(data, node)</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">children</td>
<td align="left">æŒ‡å®šå­æ ‘ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">string</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">disabled</td>
<td align="left">æŒ‡å®šèŠ‚ç‚¹é€‰æ‹©æ¡†æ˜¯å¦ç¦ç”¨ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">boolean, function(data, node)</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">isLeaf</td>
<td align="left">æŒ‡å®šèŠ‚ç‚¹æ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹ï¼Œä»…åœ¨æŒ‡å®šäº† lazy å±æ€§çš„æƒ…å†µä¸‹ç”Ÿæ•ˆ</td>
<td align="left">boolean, function(data, node)</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
</tbody></table>
<p><strong>data</strong>æ˜¯ç»„æˆæ ‘å½¢æ•°æ®çš„å…³é”®ï¼Œå¦‚ä¸‹çš„æ•°æ®ä¾¿èƒ½æ„å»ºæ ‘å½¢æ•°æ®</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line">[{</span><br><span class="line">         label: 'ä¸€çº§ <span class="number">1</span>',</span><br><span class="line">         children: [{</span><br><span class="line">           label: 'äºŒçº§ <span class="number">1</span><span class="number">-1</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">1</span><span class="number">-1</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }]</span><br><span class="line">       }, {</span><br><span class="line">         label: 'ä¸€çº§ <span class="number">2</span>',</span><br><span class="line">         children: [{</span><br><span class="line">           label: 'äºŒçº§ <span class="number">2</span><span class="number">-1</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">2</span><span class="number">-1</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }, {</span><br><span class="line">           label: 'äºŒçº§ <span class="number">2</span><span class="number">-2</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">2</span><span class="number">-2</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }]</span><br><span class="line">       }, {</span><br><span class="line">         label: 'ä¸€çº§ <span class="number">3</span>',</span><br><span class="line">         children: [{</span><br><span class="line">           label: 'äºŒçº§ <span class="number">3</span><span class="number">-1</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">3</span><span class="number">-1</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }, {</span><br><span class="line">           label: 'äºŒçº§ <span class="number">3</span><span class="number">-2</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">3</span><span class="number">-2</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }]</span><br><span class="line">       }]</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720232914114.png" alt="image-20200720232914114"></p>
<h3 id="å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„"><a href="#å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„" class="headerlink" title="å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„"></a>å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„</h3><p>ç”±æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆå®ç°é™æ€æ•°æ®çš„ç»„ç»‡æ¶æ„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"> &lt;!--æ”¾ç½®ä¸€ä¸ªå±æ€§   è¿™é‡Œçš„propså’Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„çˆ¶ä¼ å­ çš„propsæ²¡å…³ç³»--&gt;</span><br><span class="line"> &lt;el-tree :data="departs" :props="defaultProps" /&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      defaultProps: {</span><br><span class="line">        label: 'name'</span><br><span class="line">      },</span><br><span class="line">      departs: [{ name: 'æ€»è£åŠ', children: [{ name: 'è‘£äº‹ä¼š' }] },</span><br><span class="line">        { name: 'è¡Œæ”¿éƒ¨' }, { name: 'äººäº‹éƒ¨' }]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ¥ä¸‹æ¥ï¼Œå¯¹æ¯ä¸ªå±‚çº§èŠ‚ç‚¹å¢åŠ æ˜¾ç¤ºå†…å®¹ï¼Œæ­¤æ—¶éœ€è¦ç”¨åˆ°treeçš„æ’æ§½</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"> &lt;el-tree :data="departs" :props="defaultProps" :default-expand-all="true"&gt;</span><br><span class="line">          &lt;!-- ä¼ å…¥å†…å®¹ æ’æ§½å†…å®¹ ä¼šå¾ªç¯å¤šæ¬¡ æœ‰å¤šå°‘èŠ‚ç‚¹ å°±å¾ªç¯å¤šå°‘æ¬¡ --&gt;</span><br><span class="line">          &lt;!-- ä½œç”¨åŸŸæ’æ§½ slot-scope="obj" æ¥æ”¶ä¼ é€’ç»™æ’æ§½çš„æ•°æ®   data æ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®å¯¹è±¡--&gt;</span><br><span class="line">          &lt;el-row slot-scope="{ data }" type="flex" justify="space-between" align="middle" style="height: 40px; width: 100%"&gt;</span><br><span class="line">            &lt;el-col&gt;</span><br><span class="line">              &lt;!-- å·¦ä¾§å†…å®¹ --&gt;</span><br><span class="line">              &lt;span&gt;{{ data.name }}&lt;/span&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span="4"&gt;</span><br><span class="line">              &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">                &lt;el-col&gt;{{ data.manager }}&lt;/el-col&gt;</span><br><span class="line">                &lt;el-col&gt;</span><br><span class="line">                  &lt;!-- æ”¾ç½®ä¸‹æ‹‰èœå• --&gt;</span><br><span class="line">                  &lt;el-dropdown&gt;</span><br><span class="line">                    &lt;!-- å†…å®¹ --&gt;</span><br><span class="line">                    &lt;span&gt;æ“ä½œ</span><br><span class="line">                      &lt;i class="el-icon-arrow-down" /&gt;</span><br><span class="line">                    &lt;/span&gt;</span><br><span class="line">                    &lt;!-- å…·åæ’æ§½ --&gt;</span><br><span class="line">                    &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">                      &lt;!-- ä¸‹æ‹‰é€‰é¡¹ --&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;æ·»åŠ å­éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;ç¼–è¾‘éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;åˆ é™¤éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/el-dropdown-menu&gt;</span><br><span class="line">                  &lt;/el-dropdown&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">              &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- å³ä¾§å†…å®¹ --&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">          &lt;/el-row&gt;        &lt;/el-tree&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      departs: [{ name: 'æ€»è£åŠ', manager: 'æ›¹æ“', children: [{ name: 'è‘£äº‹ä¼š', manager: 'æ›¹ä¸•' }] },</span><br><span class="line">        { name: 'è¡Œæ”¿éƒ¨', manager: 'åˆ˜å¤‡' },</span><br><span class="line">        { name: 'äººäº‹éƒ¨', manager: 'å­™æƒ' }],</span><br><span class="line">      defaultProps: {</span><br><span class="line">        label: 'name' // è¡¨ç¤º ä»è¿™ä¸ªå±æ€§æ˜¾ç¤ºå†…å®¹</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆå½¢æˆé™æ€ç»“æ„æ•ˆæœ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200912150032528.png" alt="image-20200912150032528"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆæ ‘å½¢ç»“æ„çš„æ˜¾ç¤º</p>
<h2 id="å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶"><a href="#å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶" class="headerlink" title="å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶"></a>å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶</h2><p>**<code>ç›®æ ‡</code>**ï¼š å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶</p>
<h3 id="å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶"><a href="#å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶" class="headerlink" title="å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶"></a>å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶</h3><blockquote>
<p>é€šè¿‡ç¬¬ä¸€ä¸ªç« èŠ‚ï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ ‘å½¢çš„é¡¶çº§å†…å®¹å®é™…å’Œå­èŠ‚ç‚¹çš„å†…å®¹æ˜¯ä¸€è‡´çš„ï¼Œæ­¤æ—¶å¯ä»¥å°†è¯¥éƒ¨åˆ†æŠ½ææˆä¸€ä¸ªç»„ä»¶ï¼ŒèŠ‚çœä»£ç </p>
</blockquote>
<p>ç»„ä»¶ <strong><code>src/views/departments/components/tree-tools.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-row type="flex" justify="space-between" align="middle" style="height: 40px;width: 100%"&gt;</span><br><span class="line">    &lt;el-col&gt;</span><br><span class="line">      &lt;!-- åç§°åº”è¯¥å˜æˆ å¯¹åº”çš„èŠ‚ç‚¹ä¸­çš„name --&gt;</span><br><span class="line">      &lt;span&gt;{{ treeNode.name }}&lt;/span&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col :span="4"&gt;</span><br><span class="line">      &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">        &lt;!-- ä¸¤ä¸ªå†…å®¹ --&gt;</span><br><span class="line">        &lt;el-col&gt;{{ treeNode.manager }}&lt;/el-col&gt;</span><br><span class="line">        &lt;el-col&gt;</span><br><span class="line">          &lt;!-- ä¸‹æ‹‰èœå• element --&gt;</span><br><span class="line">          &lt;el-dropdown&gt;</span><br><span class="line">            &lt;span&gt;</span><br><span class="line">              æ“ä½œ&lt;i class="el-icon-arrow-down" /&gt;</span><br><span class="line">            &lt;/span&gt;</span><br><span class="line">            &lt;!-- ä¸‹æ‹‰èœå• --&gt;</span><br><span class="line">            &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;æ·»åŠ å­éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;ç¼–è¾‘éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;åˆ é™¤éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/el-dropdown-menu&gt;</span><br><span class="line">          &lt;/el-dropdown&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// è¯¥ç»„ä»¶éœ€è¦å¯¹å¤–å¼€æ”¾å±æ€§ å¤–éƒ¨éœ€è¦æä¾›ä¸€ä¸ªå¯¹è±¡ å¯¹è±¡é‡Œéœ€è¦æœ‰name  manager</span><br><span class="line">export default {</span><br><span class="line">  // propså¯ä»¥ç”¨æ•°ç»„æ¥æ¥æ”¶æ•°æ® ä¹Ÿå¯ä»¥ç”¨å¯¹è±¡æ¥æ¥æ”¶</span><br><span class="line">  // props: {   propså±æ€§: {  é…ç½®é€‰é¡¹ }  }</span><br><span class="line">  props: {</span><br><span class="line">    //   å®šä¹‰ä¸€ä¸ªpropså±æ€§</span><br><span class="line">    treeNode: {</span><br><span class="line">      type: Object, // å¯¹è±¡ç±»å‹</span><br><span class="line">      required: true // è¦æ±‚å¯¹æ–¹ä½¿ç”¨æ‚¨çš„ç»„ä»¶çš„æ—¶å€™ å¿…é¡»ä¼ treeNodeå±æ€§ å¦‚æœä¸ä¼  å°±ä¼šæŠ¥é”™</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶"><a href="#åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶" class="headerlink" title="åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶"></a>åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶</h3><p>æ¥ä¸‹æ¥ï¼Œåœ¨**<code>src/views/departments/index.vue</code>**è¿›è¡Œä»£ç çš„ç®€åŒ–</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;!-- å®ç°é¡µé¢çš„åŸºæœ¬å¸ƒå±€ --&gt;</span><br><span class="line">      &lt;el-card class="tree-card"&gt;</span><br><span class="line">        &lt;!-- ç”¨äº†ä¸€ä¸ªè¡Œåˆ—å¸ƒå±€ --&gt;</span><br><span class="line">        &lt;!-- ç¼ºå°‘treeNode --&gt;</span><br><span class="line">        &lt;tree-tools :tree-node="company" /&gt;</span><br><span class="line">        &lt;!--æ”¾ç½®ä¸€ä¸ªå±æ€§   è¿™é‡Œçš„propså’Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„çˆ¶ä¼ å­ çš„propsæ²¡å…³ç³»--&gt;</span><br><span class="line">        &lt;el-tree :data="departs" :props="defaultProps" default-expand-all&gt;</span><br><span class="line">          &lt;!-- è¯´æ˜el-treeé‡Œé¢çš„è¿™ä¸ªå†…å®¹ å°±æ˜¯æ’æ§½å†…å®¹ =&gt; å¡«å‘å†…å®¹  =&gt; æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹å¾ªç¯å¤šå°‘æ¬¡ --&gt;</span><br><span class="line">          &lt;!-- scope-scope æ˜¯ treeç»„ä»¶ä¼ ç»™æ¯ä¸ªèŠ‚ç‚¹çš„æ’æ§½çš„å†…å®¹çš„æ•°æ® --&gt;</span><br><span class="line">          &lt;!-- é¡ºåºä¸€å®šæ˜¯ æ‰§è¡Œslot-scopeçš„èµ‹å€¼ æ‰å»æ‰§è¡Œ propsçš„ä¼ å€¼ --&gt;</span><br><span class="line">          &lt;tree-tools slot-scope="{ data }" :tree-node="data" /&gt;</span><br><span class="line">        &lt;/el-tree&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œcompanyå˜é‡éœ€è¦åœ¨dataä¸­å®šä¹‰</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">company: { <span class="attr">name</span>: <span class="string">'æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸'</span>, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span> },</span><br></pre></td></tr></tbody></table></figure>

<p>åŒæ—¶ï¼Œç”±äºåœ¨ä¸¤ä¸ªä½ç½®éƒ½ä½¿ç”¨äº†è¯¥ç»„ä»¶ï¼Œä½†æ˜¯æ”¾ç½®åœ¨æœ€ä¸Šå±‚çš„ç»„ä»¶æ˜¯ä¸éœ€è¦æ˜¾ç¤º **<code>åˆ é™¤éƒ¨é—¨</code><strong>å’Œ</strong><code>ç¼–è¾‘éƒ¨é—¨</code>**çš„</p>
<p>æ‰€ä»¥ï¼Œå¢åŠ ä¸€ä¸ªæ–°çš„å±æ€§ **<code>isRootï¼ˆæ˜¯å¦æ ¹èŠ‚ç‚¹ï¼‰</code>**è¿›è¡Œæ§åˆ¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">props: {</span><br><span class="line">   <span class="attr">treeNode</span>: {</span><br><span class="line">     <span class="attr">required</span>: <span class="literal">true</span>, <span class="comment">// è®¾ç½®å½“å‰æ•°æ®ä¸ºå¿…å¡«</span></span><br><span class="line">     <span class="attr">type</span>: <span class="built_in">Object</span> <span class="comment">// ç±»å‹æ˜¯Object</span></span><br><span class="line">   },</span><br><span class="line">   <span class="attr">isRoot</span>: {</span><br><span class="line">     <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">     <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">   }</span><br><span class="line"> }</span><br><span class="line">&lt;tree-tools :tree-node=<span class="string">"company"</span> :is-root=<span class="string">"true"</span> /&gt;</span><br><span class="line">    </span><br></pre></td></tr></tbody></table></figure>

<p>ç»„ä»¶ä¸­ï¼Œ æ ¹æ®isRootåˆ¤æ–­æ˜¾ç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- ç¼–è¾‘éƒ¨é—¨å’Œåˆ é™¤éƒ¨é—¨åªä¼šåœ¨å­èŠ‚ç‚¹ä¸Šæ˜¾ç¤º --&gt;</span><br><span class="line">     &lt;el-dropdown-item v-if="!isRoot"&gt;ç¼–è¾‘éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;el-dropdown-item v-if="!isRoot"&gt;åˆ é™¤éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡å°è£…ï¼Œä»£ç çœ‹ä¸Šå»æ›´åŠ ç´§å‡‘ï¼Œç®€æ´ï¼Œè¿™å°±æ˜¯å°è£…çš„é­…åŠ›</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå°†æ ‘å½¢å†…å®¹å•ç‹¬æŠ½æç»„ä»¶</p>
<h2 id="è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†"><a href="#è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†" class="headerlink" title="è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†"></a>è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†</h2><p>**<code>ç›®æ ‡</code>**è·å–çœŸå®çš„ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶å°†å…¶è½¬åŒ–æˆæ ‘å½¢æ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</p>
<h3 id="å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®"><a href="#å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®" class="headerlink" title="å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®"></a>å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®</h3><blockquote>
<p>ç°åœ¨åŸºæœ¬çš„é™æ€ç»“æ„å·²ç»å½¢æˆï¼Œæ¥ä¸‹æ¥éœ€è¦è·å–çœŸå®çš„æ•°æ®</p>
</blockquote>
<p>é¦–å…ˆï¼Œ<strong>å°è£…è·å–ç»„ç»‡æ¶æ„çš„è¯·æ±‚</strong> <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è·å–ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDepartments</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/company/department'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨é’©å­å‡½æ•°ä¸­è°ƒç”¨æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> TreeTools <span class="keyword">from</span> <span class="string">'./components/tree-tools'</span></span><br><span class="line"><span class="keyword">import</span> { getDepartments } <span class="keyword">from</span> <span class="string">'@/api/departments'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">components</span>: {</span><br><span class="line">    TreeTools</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">company</span>: { }, <span class="comment">// å°±æ˜¯å¤´éƒ¨çš„æ•°æ®ç»“æ„</span></span><br><span class="line">      <span class="attr">departs</span>: [],</span><br><span class="line">      <span class="attr">defaultProps</span>: {</span><br><span class="line">        <span class="attr">label</span>: <span class="string">'name'</span> <span class="comment">// è¡¨ç¤º ä»è¿™ä¸ªå±æ€§æ˜¾ç¤ºå†…å®¹</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getDepartments() <span class="comment">// è°ƒç”¨è‡ªèº«çš„æ–¹æ³•</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> getDepartments()</span><br><span class="line">      <span class="built_in">this</span>.company = { <span class="attr">name</span>: result.companyName, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span> }</span><br><span class="line">      <span class="built_in">this</span>.departs = result.depts <span class="comment">// éœ€è¦å°†å…¶è½¬åŒ–æˆæ ‘å½¢ç»“æ„</span></span><br><span class="line">      <span class="built_in">console</span>.log(result)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„"><a href="#å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„" class="headerlink" title="å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„"></a>å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„</h3><p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å°†åˆ—è¡¨å‹çš„æ•°æ®ï¼Œè½¬åŒ–æˆæ ‘å½¢æ•°æ®ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°<strong>é€’å½’ç®—æ³•</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200721010931214.png" alt="image-20200721010931214"></p>
<p>å°è£…ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œ**<code>src/utils/index.js</code>**</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  å°†åˆ—è¡¨å‹çš„æ•°æ®è½¬åŒ–æˆæ ‘å½¢æ•°æ® =&gt; é€’å½’ç®—æ³• =&gt; è‡ªèº«è°ƒç”¨è‡ªèº« =&gt; ä¸€å®šæ¡ä»¶ä¸èƒ½ä¸€æ ·ï¼Œ å¦åˆ™å°±ä¼šæ­»å¾ªç¯</span></span><br><span class="line"><span class="comment"> *  éå†æ ‘å½¢ æœ‰ä¸€ä¸ªé‡ç‚¹ è¦å…ˆæ‰¾ä¸€ä¸ªå¤´å„¿</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">tranListToTreeData</span>(<span class="params">list, rootValue</span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> arr = []</span><br><span class="line">  list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (item.pid === rootValue) {</span><br><span class="line">      <span class="comment">// æ‰¾åˆ°ä¹‹å å°±è¦å»æ‰¾ item ä¸‹é¢æœ‰æ²¡æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">const</span> children = tranListToTreeData(list, item.id)</span><br><span class="line">      <span class="keyword">if</span> (children.length) {</span><br><span class="line">        <span class="comment">// å¦‚æœchildrençš„é•¿åº¦å¤§äº0 è¯´æ˜æ‰¾åˆ°äº†å­èŠ‚ç‚¹</span></span><br><span class="line">        item.children = children</span><br><span class="line">      }</span><br><span class="line">      arr.push(item) <span class="comment">// å°†å†…å®¹åŠ å…¥åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>è°ƒç”¨è½¬åŒ–æ–¹æ³•ï¼Œè½¬åŒ–æ ‘å½¢ç»“æ„</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.company = { <span class="attr">name</span>: result.companyName, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span> } <span class="comment">// è¿™é‡Œå®šä¹‰ä¸€ä¸ªç©ºä¸²  å› ä¸º å®ƒæ˜¯æ ¹ æ‰€æœ‰çš„å­èŠ‚ç‚¹çš„æ•°æ®pid éƒ½æ˜¯ ""</span></span><br><span class="line"> <span class="built_in">this</span>.departs = transListToTreeData(result.depts, <span class="string">''</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™æ ·ä¸€æ¥ï¼Œæ ‘å½¢æ•°æ®å°±æœ‰äº†ï¼Œä¸‹ä¸€ç« èŠ‚ï¼Œå°±å¯ä»¥é’ˆå¯¹éƒ¨é—¨è¿›è¡Œæ“ä½œ</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†</p>
<h2 id="åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°"><a href="#åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°" class="headerlink" title="åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°"></a>åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°</h2><p>**<code>ç›®æ ‡</code>**å®ç°æ“ä½œåŠŸèƒ½çš„åˆ é™¤åŠŸèƒ½</p>
<h3 id="å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶"><a href="#å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶" class="headerlink" title="å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶"></a>å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶</h3><p>é¦–å…ˆï¼Œå°è£…åˆ é™¤åŠŸèƒ½æ¨¡å— <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  æ ¹æ®idæ ¹æ®éƒ¨é—¨  æ¥å£æ˜¯æ ¹æ®restfulçš„è§„åˆ™è®¾è®¡çš„   åˆ é™¤ delete  æ–°å¢ post  ä¿®æ”¹put è·å– get</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">delDepartments</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">${id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'delete'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œåœ¨tree-toolsç»„ä»¶ä¸­ï¼Œç›‘å¬ä¸‹æ‹‰èœå•çš„ç‚¹å‡»äº‹ä»¶  <strong><code>src/views/departments/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-dropdown @command="operateDepts"&gt;</span><br><span class="line">  &lt;span&gt;</span><br><span class="line">    æ“ä½œ&lt;i class="el-icon-arrow-down" /&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">  &lt;!-- ä¸‹æ‹‰èœå• --&gt;</span><br><span class="line">  &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">    &lt;el-dropdown-item command="add"&gt;æ·»åŠ å­éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;!-- ç¼–è¾‘éƒ¨é—¨å’Œåˆ é™¤éƒ¨é—¨åªä¼šåœ¨å­èŠ‚ç‚¹ä¸Šæ˜¾ç¤º --&gt;</span><br><span class="line">    &lt;el-dropdown-item v-if="!isRoot" command="edit"&gt;ç¼–è¾‘éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;el-dropdown-item v-if="!isRoot" command="del"&gt;åˆ é™¤éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">  &lt;/el-dropdown-menu&gt;</span><br><span class="line">&lt;/el-dropdown&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>dropdownä¸‹æ‹‰èœå•çš„ç›‘å¬äº‹ä»¶command</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ“ä½œèŠ‚ç‚¹è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">operateDepts</span>(<span class="params">type</span>)</span> {</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">'add'</span>) {</span><br><span class="line">    <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">  } <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'edit'</span>) {</span><br><span class="line">    <span class="comment">//  ç¼–è¾‘éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">//  åˆ é™¤æ“ä½œ</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®"><a href="#è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®" class="headerlink" title="è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®"></a>è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®</h3><blockquote>
<p>åˆ é™¤ä¹‹å‰ï¼Œæç¤ºç”¨æˆ·æ˜¯å¦åˆ é™¤ï¼Œç„¶åè°ƒç”¨åˆ é™¤æ¥å£</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ“ä½œèŠ‚ç‚¹è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">operateDepts</span>(<span class="params">type</span>)</span> {</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">'add'</span>) {</span><br><span class="line">    <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">  } <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'edit'</span>) {</span><br><span class="line">    <span class="comment">//  ç¼–è¾‘éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">//  åˆ é™¤æ“ä½œ</span></span><br><span class="line">    <span class="built_in">this</span>.$confirm(<span class="string">'ç¡®å®šè¦åˆ é™¤è¯¥éƒ¨é—¨å—'</span>).then(<span class="function">() =&gt;</span> {</span><br><span class="line">      <span class="comment">// å¦‚æœç‚¹å‡»äº†ç¡®å®šå°±ä¼šè¿›å…¥then</span></span><br><span class="line">      <span class="keyword">return</span> delDepartments(<span class="built_in">this</span>.treeNode.id) <span class="comment">// è¿”å›promiseå¯¹è±¡</span></span><br><span class="line">    }).then(<span class="function">() =&gt;</span> {</span><br><span class="line">      <span class="comment">//  å¦‚æœåˆ é™¤æˆåŠŸäº†  å°±ä¼šè¿›å…¥è¿™é‡Œ</span></span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåˆ é™¤äº†å‘˜å·¥æ•°æ®ï¼Œä½†æ˜¯æ€ä¹ˆé€šçŸ¥çˆ¶ç»„ä»¶è¿›è¡Œæ›´æ–°å‘¢</p>
</blockquote>
<p>åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ è¿‡å¯ä»¥é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶**<code>this.$emit</code>**çš„æ–¹å¼æ¥è¿›è¡Œ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">//  å¦‚æœåˆ é™¤æˆåŠŸäº†  å°±ä¼šè¿›å…¥è¿™é‡Œ</span></span><br><span class="line">        <span class="built_in">this</span>.$emit(<span class="string">'delDepts'</span>) <span class="comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line">        <span class="built_in">this</span>.$message.success(<span class="string">'åˆ é™¤éƒ¨é—¨æˆåŠŸ'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>çˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶ <strong><code>src/views/department/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;tree-tools slot-scope="obj" :tree-node="obj.data" @delDepts="getDepartments" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šåˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°</p>
<h2 id="æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶"><a href="#æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶" class="headerlink" title="æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶"></a>æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°æ–°å¢éƒ¨é—¨åŠŸèƒ½çš„ç»„ä»¶å»ºç«‹</p>
<h3 id="å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„"><a href="#å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„" class="headerlink" title="å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„"></a>å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„</h3><p>é¦–å…ˆï¼Œ å°è£…æ–°å¢éƒ¨é—¨çš„apiæ¨¡å—  <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  æ–°å¢éƒ¨é—¨æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addDepartments</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/company/department'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªæ–°å¢éƒ¨é—¨çš„çª—ä½“ç»„ä»¶ <strong><code>src/views/department/components/add-dept.vue</code></strong></p>
<p>å…¶ä¸­çš„äº¤äº’è®¾è®¡å¦‚ä¸‹</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200828162901390.png" alt="image-20200828162901390"></p>
<p><a href="%5Bhttp://czpm.itcast.cn/ihrm/#g=1&amp;p=%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%5D(http://czpm.itcast.cn/ihrm/#g=1&amp;p=%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84)">è®¾è®¡è¦æ±‚</a></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- æ–°å¢éƒ¨é—¨çš„å¼¹å±‚ --&gt;</span><br><span class="line">  &lt;el-dialog title="æ–°å¢éƒ¨é—¨"&gt;</span><br><span class="line">    &lt;!-- è¡¨å•ç»„ä»¶  el-form   label-widthè®¾ç½®labelçš„å®½åº¦   --&gt;</span><br><span class="line">    &lt;!-- åŒ¿åæ’æ§½ --&gt;</span><br><span class="line">    &lt;el-form label-width="120px"&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨åç§°"&gt;</span><br><span class="line">        &lt;el-input style="width:80%" placeholder="1-50ä¸ªå­—ç¬¦" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨ç¼–ç "&gt;</span><br><span class="line">        &lt;el-input style="width:80%" placeholder="1-50ä¸ªå­—ç¬¦" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨è´Ÿè´£äºº"&gt;</span><br><span class="line">        &lt;el-select style="width:80%" placeholder="è¯·é€‰æ‹©" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨ä»‹ç»"&gt;</span><br><span class="line">        &lt;el-input style="width:80%" placeholder="1-300ä¸ªå­—ç¬¦" type="textarea" :rows="3" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- el-dialogæœ‰ä¸“é—¨æ”¾ç½®åº•éƒ¨æ“ä½œæ çš„ æ’æ§½  å…·åæ’æ§½ --&gt;</span><br><span class="line">    &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">      &lt;!-- åˆ—è¢«åˆ†ä¸º24 --&gt;</span><br><span class="line">      &lt;el-col :span="6"&gt;</span><br><span class="line">        &lt;el-button type="primary" size="small"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size="small"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶"><a href="#ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶" class="headerlink" title="ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶"></a>ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶</h3><p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ç”¨å±æ€§æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºæˆ–è€…éšè—</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦ä¼ å…¥ä¸€ä¸ªpropså˜é‡æ¥æ§åˆ¶ æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line"><span class="attr">props</span>: {</span><br><span class="line">  <span class="attr">showDialog</span>: {</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-dialog title="æ–°å¢éƒ¨é—¨" :visible="showDialog"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨**<code>departments/index.vue</code>** ä¸­å¼•å…¥è¯¥ç»„ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> AddDept <span class="keyword">from</span> <span class="string">'./components/add-dept'</span> <span class="comment">// å¼•å…¥æ–°å¢éƒ¨é—¨ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">components</span>: { AddDept }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å®šä¹‰æ§åˆ¶çª—ä½“æ˜¾ç¤ºçš„å˜é‡**<code>showDialog</code>**</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="keyword">return</span> {</span><br><span class="line">     <span class="attr">showDialog</span>: <span class="literal">false</span> <span class="comment">// æ˜¾ç¤ºçª—ä½“</span></span><br><span class="line">   }</span><br><span class="line"> },</span><br><span class="line">   &lt;!-- æ”¾ç½®æ–°å¢å¼¹å±‚ç»„ä»¶  --&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog</span>=<span class="string">"showDialog"</span> /&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>å½“ç‚¹å‡»æ–°å¢éƒ¨é—¨æ—¶ï¼Œå¼¹å‡ºç»„ä»¶</p>
<blockquote>
<p> æ³¨æ„ï¼Œç‚¹å‡»æ–°å¢æ—¶tree-toolsç»„ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œï¼Œæˆ‘ä»¬ä¾ç„¶éœ€è¦å­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶</p>
</blockquote>
<p><strong>å­ç»„ä»¶è§¦å‘æ–°å¢äº‹ä»¶</strong>Â· <strong><code>src/views/departments/tree-tools.vue</code></strong> </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (type === <span class="string">'add'</span>) {</span><br><span class="line">      <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">      <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶ æ˜¾ç¤ºå¼¹å±‚</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'addDepts'</span>, <span class="built_in">this</span>.treeNode) <span class="comment">// ä¸ºä½•ä¼ å‡ºtreeNode å› ä¸ºæ˜¯æ·»åŠ å­éƒ¨é—¨ éœ€è¦å½“å‰éƒ¨é—¨çš„æ•°æ®</span></span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>çˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶</strong>   </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;tree-tools slot-scope="obj" :tree-node="obj.data" @delDepts="getDepartments" @addDepts="addDepts"  /&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–¹æ³•ä¸­å¼¹å‡ºå±‚,è®°å½•åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸‹æ·»åŠ å­éƒ¨é—¨</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">addDepts</span>(<span class="params">node</span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.showDialog = <span class="literal">true</span> <span class="comment">// æ˜¾ç¤ºå¼¹å±‚</span></span><br><span class="line">     <span class="comment">// å› ä¸ºnodeæ˜¯å½“å‰çš„ç‚¹å‡»çš„éƒ¨é—¨ï¼Œ æ­¤æ—¶è¿™ä¸ªéƒ¨é—¨åº”è¯¥è®°å½•ä¸‹æ¥,</span></span><br><span class="line">     <span class="built_in">this</span>.node = node</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200722084707863.png" alt="image-20200722084707863"></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šæ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶</p>
<h2 id="å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ"><a href="#å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ" class="headerlink" title="å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ"></a>å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ</h2><p><strong><code>ç›®æ ‡</code></strong> å®Œæˆæ–°å¢éƒ¨é—¨åŠŸèƒ½çš„è§„åˆ™æ ¡éªŒå’Œæ•°æ®æäº¤éƒ¨åˆ†</p>
<h3 id="å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶"><a href="#å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶" class="headerlink" title="å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶"></a>å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶</h3><p>éƒ¨é—¨åç§°ï¼ˆnameï¼‰ï¼šå¿…å¡« 1-50ä¸ªå­—ç¬¦  / åŒçº§éƒ¨é—¨ä¸­ç¦æ­¢å‡ºç°é‡å¤éƒ¨é—¨</p>
<p>éƒ¨é—¨ç¼–ç ï¼ˆcodeï¼‰ï¼šå¿…å¡« 1-50ä¸ªå­—ç¬¦  / éƒ¨é—¨ç¼–ç åœ¨æ•´ä¸ªæ¨¡å—ä¸­éƒ½ä¸å…è®¸é‡å¤</p>
<p>éƒ¨é—¨è´Ÿè´£äººï¼ˆmanagerï¼‰ï¼šå¿…å¡«</p>
<p>éƒ¨é—¨ä»‹ç» ( introduce)ï¼šå¿…å¡« 1-300ä¸ªå­—ç¬¦</p>
<blockquote>
<p>å®šä¹‰æ•°æ®ç»“æ„</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">formData: {</span><br><span class="line">      <span class="attr">name</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨åç§°</span></span><br><span class="line">      <span class="attr">code</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨ç¼–ç </span></span><br><span class="line">      <span class="attr">manager</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨ç®¡ç†è€…</span></span><br><span class="line">      <span class="attr">introduce</span>: <span class="string">''</span> <span class="comment">// éƒ¨é—¨ä»‹ç»</span></span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å®Œæˆè¡¨å•æ ¡éªŒéœ€è¦çš„å‰ç½®æ¡ä»¶</p>
</blockquote>
<ul>
<li>el-formé…ç½®modelå’Œruleså±æ€§</li>
<li>el-form-itemé…ç½®propå±æ€§</li>
<li>è¡¨å•è¿›è¡Œv-modelåŒå‘ç»‘å®š</li>
</ul>
<h3 id="é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™"><a href="#é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™" class="headerlink" title="é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™"></a>é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™</h3><blockquote>
<p>æ ¹æ®è¿™äº›è¦æ±‚ï¼Œæ ¡éªŒè§„åˆ™</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    <span class="comment">// å®šä¹‰è¡¨å•æ•°æ®</span></span><br><span class="line">    <span class="attr">formData</span>: {</span><br><span class="line">      <span class="attr">name</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨åç§°</span></span><br><span class="line">      <span class="attr">code</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨ç¼–ç </span></span><br><span class="line">      <span class="attr">manager</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨ç®¡ç†è€…</span></span><br><span class="line">      <span class="attr">introduce</span>: <span class="string">''</span> <span class="comment">// éƒ¨é—¨ä»‹ç»</span></span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// å®šä¹‰æ ¡éªŒè§„åˆ™</span></span><br><span class="line">    <span class="attr">rules</span>: {</span><br><span class="line">      <span class="attr">name</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> },</span><br><span class="line">        { <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">50</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨åç§°è¦æ±‚1-50ä¸ªå­—ç¬¦'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">      <span class="attr">code</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ç¼–ç ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> },</span><br><span class="line">        { <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">50</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ç¼–ç è¦æ±‚1-50ä¸ªå­—ç¬¦'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">      <span class="attr">manager</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨è´Ÿè´£äººä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">      <span class="attr">introduce</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ä»‹ç»ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> },</span><br><span class="line">        { <span class="attr">trigger</span>: <span class="string">'blur'</span>, <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">300</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ä»‹ç»è¦æ±‚1-50ä¸ªå­—ç¬¦'</span> }]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ"><a href="#éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ" class="headerlink" title="éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ"></a>éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ</h3><p>**<code>æ³¨æ„</code><strong>ï¼šéƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è§„åˆ™ æœ‰ä¸¤æ¡æˆ‘ä»¬éœ€è¦é€šè¿‡</strong><code>è‡ªå®šä¹‰æ ¡éªŒå‡½æ•°validator</code>**æ¥å®ç°</p>
<blockquote>
<p>é¦–å…ˆï¼Œåœ¨æ ¡éªŒåç§°å’Œç¼–ç æ—¶ï¼Œè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è¿™é‡Œtriggeré‡‡ç”¨blurçš„åŸå› ï¼Œå› ä¸ºchangeå¯¹äºè®¿é—®çš„é¢‘ç‡è¿‡é«˜ï¼Œæˆ‘ä»¬éœ€è¦æ§åˆ¶è®¿é—®é¢‘ç‡</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆè·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>éƒ¨é—¨åç§°ä¸èƒ½å’Œ**<code>åŒçº§åˆ«</code>**çš„é‡å¤ï¼Œè¿™é‡Œæ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ‰€æœ‰åŒçº§åˆ«çš„æ•°æ®ï¼Œè¿›è¡Œæ ¡éªŒï¼Œæ‰€ä»¥è¿˜éœ€è¦å¦ä¸€ä¸ªå‚æ•°pid</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">props: {</span><br><span class="line">    <span class="comment">//   ç”¨æ¥æ§åˆ¶çª—ä½“æ˜¯å¦æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line">    <span class="attr">showDialog</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// å½“å‰æ“ä½œçš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="attr">treeNode</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">null</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog</span>=<span class="string">"showDialog"</span> <span class="attr">:tree-node</span>=<span class="string">"node"</span> /&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>æ ¹æ®å½“å‰éƒ¨é—¨idï¼Œæ‰¾åˆ°æ‰€æœ‰å­éƒ¨é—¨ç›¸å…³çš„æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦é‡å¤</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç°åœ¨å®šä¹‰ä¸€ä¸ªå‡½æ•° è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯ å»æ‰¾ åŒçº§éƒ¨é—¨ä¸‹ æ˜¯å¦æœ‰é‡å¤çš„éƒ¨é—¨åç§°</span></span><br><span class="line">   <span class="keyword">const</span> checkNameRepeat = <span class="keyword">async</span>(rule, value, callback) =&gt; {</span><br><span class="line">     <span class="comment">// å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">     <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">     <span class="comment">// deptsæ˜¯æ‰€æœ‰çš„éƒ¨é—¨æ•°æ®</span></span><br><span class="line">     <span class="comment">// å¦‚ä½•å»æ‰¾æŠ€æœ¯éƒ¨æ‰€æœ‰çš„å­èŠ‚ç‚¹</span></span><br><span class="line">     <span class="keyword">const</span> isRepeat = depts.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.pid === <span class="built_in">this</span>.treeNode.id).some(<span class="function"><span class="params">item</span> =&gt;</span> item.name === value)</span><br><span class="line">     isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`åŒçº§éƒ¨é—¨ä¸‹å·²ç»æœ‰<span class="subst">${value}</span>çš„éƒ¨é—¨äº†`</span>)) : callback()</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p>æ£€æŸ¥éƒ¨é—¨ç¼–ç çš„è¿‡ç¨‹åŒç†</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ£€æŸ¥ç¼–ç é‡å¤</span></span><br><span class="line">   <span class="keyword">const</span> checkCodeRepeat = <span class="keyword">async</span>(rule, value, callback) =&gt; {</span><br><span class="line">     <span class="comment">// å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">     <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">     <span class="keyword">const</span> isRepeat = depts.some(<span class="function"><span class="params">item</span> =&gt;</span> item.code === value &amp;&amp; value) <span class="comment">// è¿™é‡ŒåŠ ä¸€ä¸ª valueä¸ä¸ºç©º å› ä¸ºæˆ‘ä»¬çš„éƒ¨é—¨æœ‰å¯èƒ½æ²¡æœ‰code</span></span><br><span class="line">     isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`ç»„ç»‡æ¶æ„ä¸­å·²ç»æœ‰éƒ¨é—¨ä½¿ç”¨<span class="subst">${value}</span>ç¼–ç `</span>)) : callback()</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨è§„åˆ™ä¸­å®šä¹‰</p>
<figure class="highlight json"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ ¡éªŒè§„åˆ™</span></span><br><span class="line"> rules: {</span><br><span class="line">   name: [{ required: <span class="literal">true</span>, message: 'éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º', trigger: 'blur' },</span><br><span class="line">     { min: <span class="number">1</span>, max: <span class="number">50</span>, message: 'éƒ¨é—¨åç§°è¦æ±‚<span class="number">1</span><span class="number">-50</span>ä¸ªå­—ç¬¦', trigger: 'blur' }, {</span><br><span class="line">       trigger: 'blur',</span><br><span class="line">       validator: checkNameRepeat <span class="comment">// è‡ªå®šä¹‰å‡½æ•°çš„å½¢å¼æ ¡éªŒ</span></span><br><span class="line">     }],</span><br><span class="line">   code: [{ required: <span class="literal">true</span>, message: 'éƒ¨é—¨ç¼–ç ä¸èƒ½ä¸ºç©º', trigger: 'blur' },</span><br><span class="line">     { min: <span class="number">1</span>, max: <span class="number">50</span>, message: 'éƒ¨é—¨ç¼–ç è¦æ±‚<span class="number">1</span><span class="number">-50</span>ä¸ªå­—ç¬¦', trigger: 'blur' }, {</span><br><span class="line">       trigger: 'blur',</span><br><span class="line">       validator: checkCodeRepeat</span><br><span class="line">     }],</span><br><span class="line">   manager: [{ required: <span class="literal">true</span>, message: 'éƒ¨é—¨è´Ÿè´£äººä¸èƒ½ä¸ºç©º', trigger: 'blur' }],</span><br><span class="line">   introduce: [{ required: <span class="literal">true</span>, message: 'éƒ¨é—¨ä»‹ç»ä¸èƒ½ä¸ºç©º', trigger: 'blur' },</span><br><span class="line">     { trigger: 'blur', min: <span class="number">1</span>, max: <span class="number">300</span>, message: 'éƒ¨é—¨ä»‹ç»è¦æ±‚<span class="number">1</span><span class="number">-50</span>ä¸ªå­—ç¬¦' }]</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®"><a href="#å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®" class="headerlink" title="å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®"></a>å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®</h3><p>**<code>éœ€è¦æ³¨æ„</code><strong>ï¼šåœ¨æœ€æ ¹çº§çš„</strong><code>tree-tools</code>**ç»„ä»¶ä¸­ï¼Œç”±äºtreenodeå±æ€§ä¸­æ²¡æœ‰idï¼Œidä¾¿æ˜¯undefinedï¼Œä½†æ˜¯é€šè¿‡undefinedè¿›è¡Œç­‰å€¼åˆ¤æ–­æ˜¯å¯»æ‰¾ä¸åˆ°å¯¹åº”çš„æ ¹èŠ‚ç‚¹çš„ï¼Œ æ‰€ä»¥åœ¨ä¼ å€¼æ—¶ï¼Œæˆ‘ä»¬å°†idå±æ€§è®¾ç½®ä¸º <strong><code>â€œâ€</code></strong></p>
<p><strong><code>src/views/departments/index.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="keyword">const</span> result = <span class="keyword">await</span> getDepartments()</span><br><span class="line">     <span class="built_in">this</span>.departs = transListToTreeData(result.depts, <span class="string">''</span>)</span><br><span class="line">     <span class="built_in">this</span>.company = { <span class="attr">name</span>: result.companyName, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span>, <span class="attr">id</span>: <span class="string">''</span> }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ</p>
<h2 id="æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®"><a href="#æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®" class="headerlink" title="æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®"></a>æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®</h2><p>**<code>ç›®æ ‡</code>**ï¼šè·å–æ–°å¢è¡¨å•ä¸­çš„éƒ¨é—¨è´Ÿè´£äººä¸‹æ‹‰æ•°æ®</p>
<blockquote>
<p>åœ¨ä¸ŠèŠ‚çš„è¡¨å•ä¸­ï¼Œéƒ¨é—¨è´Ÿè´£äººæ˜¯ä¸‹æ‹‰æ•°æ®ï¼Œæˆ‘ä»¬åº”è¯¥ä»**<code>å‘˜å·¥æ¥å£</code>**ä¸­è·å–è¯¥æ•°æ®</p>
</blockquote>
<p>é¦–å…ˆï¼Œå°è£…è·å–ç®€å•å‘˜å·¥åˆ—è¡¨çš„æ¨¡å— <strong><code>src/api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  è·å–å‘˜å·¥çš„ç®€å•åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getEmployeeSimple</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user/simple'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œåœ¨**<code>add-dept.vue</code><strong>ä¸­çš„selectèšç„¦äº‹ä»¶</strong><code>focus</code>**ä¸­è°ƒç”¨è¯¥æ¥å£ï¼Œå› ä¸ºæˆ‘ä»¬è¦è·å–å®æ—¶çš„æœ€æ–°æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-select v-model="formData.manager" style="width:80%" placeholder="è¯·é€‰æ‹©" @focus="getEmployeeSimple"&gt;</span><br><span class="line">       &lt;!-- éœ€è¦å¾ªç¯ç”Ÿæˆé€‰é¡¹   è¿™é‡Œåšä¸€ä¸‹ç®€å•çš„å¤„ç† æ˜¾ç¤ºçš„æ˜¯ç”¨æˆ·å å­˜çš„ä¹Ÿæ˜¯ç”¨æˆ·å--&gt;</span><br><span class="line">       &lt;el-option v-for="item in peoples" :key="item.id" :label="item.username" :value="item.username" /&gt;</span><br><span class="line">     &lt;/el-select&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>è·å–å‘˜å·¥åˆ—è¡¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>  { getEmployeeSimple }   <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="comment">// è·å–å‘˜å·¥ç®€å•åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="keyword">async</span>  <span class="function"><span class="title">getEmployeeSimple</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.peoples = <span class="keyword">await</span> getEmployeeSimple()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="attr">peoples</span>: [] <span class="comment">// æ¥æ”¶è·å–çš„å‘˜å·¥ç®€å•åˆ—è¡¨çš„æ•°æ®</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šæ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®</p>
<h2 id="æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­"><a href="#æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­" class="headerlink" title="æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­"></a>æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®Œæˆæ–°å¢æ¨¡å—çš„æäº¤-å–æ¶ˆ-å…³é—­ç­‰åŠŸèƒ½</p>
<h3 id="æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£"><a href="#æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£" class="headerlink" title="æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£"></a>æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£</h3><blockquote>
<p>å½“ç‚¹å‡»æ–°å¢é¡µé¢çš„ç¡®å®šæŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆå¯¹è¡¨å•çš„æ•´ä½“æ ¡éªŒï¼Œå¦‚æœæ ¡éªŒæˆåŠŸï¼Œè¿›è¡Œæäº¤</p>
</blockquote>
<p>é¦–å…ˆï¼Œåœ¨ç‚¹å‡»ç¡®å®šæ—¶ï¼Œæ ¡éªŒè¡¨å•</p>
<p><strong>ç»™el-formå®šä¹‰ä¸€ä¸ªrefå±æ€§</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-form ref="deptForm" :model="formData" :rules="rules" label-width="120px"&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.$refs.deptForm.validate(<span class="function"><span class="params">isOK</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (isOK) {</span><br><span class="line">      <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œåœ¨æ ¡éªŒé€šè¿‡æ—¶ï¼Œè°ƒç”¨æ–°å¢æ¥å£</p>
<blockquote>
<p>å› ä¸ºæ˜¯æ·»åŠ å­éƒ¨é—¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ–°å¢çš„éƒ¨é—¨pidè®¾ç½®æˆå½“å‰éƒ¨é—¨çš„idï¼Œæ–°å¢çš„éƒ¨é—¨å°±æˆäº†è‡ªå·±çš„å­éƒ¨é—¨</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; {</span><br><span class="line">    <span class="keyword">if</span> (isOK) {</span><br><span class="line">      <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">      <span class="keyword">await</span> addDepartments({ ...this.formData, <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id }) <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£ æ·»åŠ çˆ¶éƒ¨é—¨çš„id</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>åŒæ ·ï¼Œåœ¨æ–°å¢æˆåŠŸä¹‹åï¼Œè°ƒç”¨å‘Šè¯‰çˆ¶ç»„ä»¶ï¼Œé‡æ–°æ‹‰å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$emit(<span class="string">'addDepts'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;add-dept :show-dialog="showDialog" :tree-node="node" @addDepts="getDepartments" /&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šåŒå­¦ä»¬å¯èƒ½ä¼šç–‘æƒ‘ï¼Œæˆ‘ä»¬</strong><code>tree-tools.vue</code></strong> å’Œ**<code>add-dept.vue</code>**ä¸¤ä¸ªç»„ä»¶éƒ½è§¦å‘äº†addDeptsäº‹ä»¶ï¼Œä¸å†²çªå—ï¼Ÿ</p>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶éƒ½æ˜¯ç»„ä»¶è‡ªèº«çš„ï¼Œä»–ä»¬ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªæ˜¯åå­—ç›¸åŒè€Œå·²ï¼Œå¤§å®¶ä¸è¦æ··æ·†</p>
<h3 id="åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚"><a href="#åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚" class="headerlink" title="åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚"></a>åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚</h3><blockquote>
<p>è¿™é‡Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸ªæ–°çš„æŠ€å·§ï¼Œ**<code>syncä¿®é¥°ç¬¦</code>**</p>
</blockquote>
<p> æŒ‰ç…§å¸¸è§„ï¼Œæƒ³è¦è®©çˆ¶ç»„ä»¶æ›´æ–°**<code>showDialog</code>**çš„è¯ï¼Œéœ€è¦è¿™æ ·åš </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">'changedialog'</span>, <span class="literal">false</span>) <span class="comment">//è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line">&lt;child @changedialog=<span class="string">"method"</span> :showDialog=<span class="string">"showDialog"</span> /&gt;</span><br><span class="line"> <span class="function"><span class="title">method</span>(<span class="params">value</span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.showDialog = value</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä½†æ˜¯ï¼Œvuejsä¸ºæˆ‘ä»¬æä¾›äº†**<code>syncä¿®é¥°ç¬¦</code>**ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å†™æ¨¡å¼ ä¹Ÿå°±æ˜¯</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶ update:å›ºå®šå†™æ³• (update:propsåç§°, å€¼)</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>) <span class="comment">//è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ syncä¿®é¥°ç¬¦</span></span><br><span class="line">&lt;child  :showDialog.sync=<span class="string">"showDialog"</span> /&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åªè¦ç”¨syncä¿®é¥°ï¼Œå°±å¯ä»¥çœç•¥çˆ¶ç»„ä»¶çš„ç›‘å¬å’Œæ–¹æ³•ï¼Œç›´æ¥å°†å€¼èµ‹å€¼ç»™showDialog</p>
<p><strong>å–æ¶ˆæŒ‰é’®å’Œå…³é—­</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line">    <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; {</span><br><span class="line">        <span class="keyword">if</span> (isOK) {</span><br><span class="line">          <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">          <span class="keyword">await</span> addDepartments({ ...this.formData, <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id }) <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£ æ·»åŠ çˆ¶éƒ¨é—¨çš„id</span></span><br><span class="line">          <span class="built_in">this</span>.$emit(<span class="string">'addDepts'</span>) <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶ æ–°å¢æ•°æ®æˆåŠŸ é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">          <span class="comment">// update:propsåç§°</span></span><br><span class="line">          <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ"><a href="#å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ" class="headerlink" title="å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ"></a>å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ</h3><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.$refs.deptForm.resetFields() <span class="comment">// é‡ç½®æ ¡éªŒå­—æ®µ</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>) <span class="comment">// å…³é—­</span></span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p>éœ€è¦åœ¨el-dialogä¸­ç›‘å¬å…¶closeäº‹ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-dialog title="æ–°å¢éƒ¨é—¨" :visible="showDialog" @close="btnCancel"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­</p>
<h2 id="ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™"><a href="#ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™" class="headerlink" title="ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™"></a>ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°ç¼–è¾‘éƒ¨é—¨çš„åŠŸèƒ½</p>
<h3 id="ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹"><a href="#ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹" class="headerlink" title="ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹"></a>ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹</h3><blockquote>
<p>ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®é™…ä¸Šå’Œæ–°å¢çª—ä½“é‡‡ç”¨çš„æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œåªä¸è¿‡æˆ‘ä»¬éœ€è¦å°†æ–°å¢åœºæ™¯å˜æˆç¼–è¾‘åœºæ™¯</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200831112149246.png" alt="image-20200831112149246"></p>
<p>é¦–å…ˆç‚¹å‡»ç¼–è¾‘éƒ¨é—¨æ—¶ï¼Œ è°ƒç”¨<strong>çˆ¶ç»„ä»¶ç¼–è¾‘æ–¹æ³•</strong> <strong><code>tree-tools.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="built_in">this</span>.$emit(<span class="string">'editDepts'</span>, <span class="built_in">this</span>.treeNode)</span><br></pre></td></tr></tbody></table></figure>

<p><strong>çˆ¶ç»„ä»¶å¼¹å±‚ï¼Œèµ‹å€¼å½“å‰ç¼–è¾‘èŠ‚ç‚¹</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">         &lt;tree-tools slot-scope="obj" :tree-node="obj.data" @delDepts="getDepartments" @editDepts="editDepts" /&gt;</span><br><span class="line"></span><br><span class="line">// ç¼–è¾‘éƒ¨é—¨èŠ‚ç‚¹</span><br><span class="line">    editDepts(node) {</span><br><span class="line">      // é¦–å…ˆæ‰“å¼€å¼¹å±‚</span><br><span class="line">      this.showDialog = true</span><br><span class="line">      this.node = node // èµ‹å€¼æ“ä½œçš„èŠ‚ç‚¹</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•"><a href="#çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•" class="headerlink" title="çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•"></a>çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•</h3><blockquote>
<p>ç¼–è¾‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è·å–ç‚¹å‡»éƒ¨é—¨çš„ä¿¡æ¯</p>
</blockquote>
<p><strong>å°è£…è·å–éƒ¨é—¨ä¿¡æ¯çš„æ¨¡å—</strong> <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * è·å–éƒ¨é—¨è¯¦æƒ…</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDepartDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åœ¨ä»€ä¹ˆæ—¶å€™è·å–éƒ¨é—¨è¯¦æƒ…?</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨<strong>ç¼–è¾‘æ–¹æ³•</strong> **<code>editDepts</code><strong>ä¸­é€šè¿‡</strong><code>ref</code><strong>è°ƒç”¨</strong><code>add-dept.vue</code>**çš„å®ä¾‹æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–éƒ¨é—¨è¯¦æƒ…</span></span><br><span class="line">   <span class="keyword">async</span>  <span class="function"><span class="title">getDepartDetail</span>(<span class="params">id</span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.formData = <span class="keyword">await</span> getDepartDetail(id)</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¼–è¾‘è§¦å‘çš„çˆ¶ç»„ä»¶çš„æ–¹æ³•</span></span><br><span class="line"> <span class="function"><span class="title">editDepts</span>(<span class="params">node</span>)</span> {</span><br><span class="line">   <span class="built_in">this</span>.showDialog = <span class="literal">true</span> <span class="comment">// æ˜¾ç¤ºæ–°å¢ç»„ä»¶å¼¹å±‚</span></span><br><span class="line">   <span class="built_in">this</span>.node = node <span class="comment">// å­˜å‚¨ä¼ é€’è¿‡æ¥çš„nodeæ•°æ®</span></span><br><span class="line">   <span class="comment">// æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªä½ç½® è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•</span></span><br><span class="line">   <span class="comment">// çˆ¶ç»„ä»¶ è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•</span></span><br><span class="line">   <span class="built_in">this</span>.$refs.addDept.getDepartDetail(node.id) <span class="comment">// ç›´æ¥è°ƒç”¨å­ç»„ä»¶ä¸­çš„æ–¹æ³• ä¼ å…¥ä¸€ä¸ªid</span></span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜"><a href="#æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜" class="headerlink" title="æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜"></a>æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜</h3><blockquote>
<p>éœ€è¦æ ¹æ®å½“å‰çš„åœºæ™¯åŒºåˆ†æ˜¾ç¤ºçš„æ ‡é¢˜</p>
</blockquote>
<p>è®¡ç®—å±æ€§</p>
<blockquote>
<p>å¦‚ä½•åˆ¤æ–­æ–°å¢è¿˜æ˜¯ç¼–è¾‘</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">computed: {</span><br><span class="line">    <span class="function"><span class="title">showTitle</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.formData.id ? <span class="string">'ç¼–è¾‘éƒ¨é—¨'</span> : <span class="string">'æ–°å¢å­éƒ¨é—¨'</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<p>åŒæ—¶å‘ç°ï¼Œel-formä¸­çš„resetFieldsä¸èƒ½é‡ç½®éè¡¨å•ä¸­çš„æ•°æ®ï¼Œæ‰€ä»¥åœ¨å–æ¶ˆçš„ä½ç½®éœ€è¦å¼ºåˆ¶åŠ ä¸Š é‡ç½®æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="comment">// é‡ç½®æ•°æ®  å› ä¸ºresetFields åªèƒ½é‡ç½® è¡¨å•ä¸Šçš„æ•°æ® éè¡¨å•ä¸Šçš„ æ¯”å¦‚ ç¼–è¾‘ä¸­id ä¸èƒ½é‡ç½®</span></span><br><span class="line">  <span class="built_in">this</span>.formData = {</span><br><span class="line">    <span class="attr">name</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">code</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">manager</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">introduce</span>: <span class="string">''</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// å…³é—­å¼¹å±‚</span></span><br><span class="line">  <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">  <span class="comment">// æ¸…é™¤ä¹‹å‰çš„æ ¡éªŒ  å¯ä»¥é‡ç½®æ•°æ® åªèƒ½é‡ç½® å®šä¹‰åœ¨dataä¸­çš„æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.$refs.deptForm.resetFields()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯"><a href="#åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯" class="headerlink" title="åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯"></a>åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯</h2><h3 id="å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯"><a href="#å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯" class="headerlink" title="å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯"></a>å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯</h3><blockquote>
<p>æ¥ä¸‹æ¥ï¼Œéœ€è¦åœ¨ç‚¹å‡»ç¡®å®šæ—¶ï¼ŒåŒæ—¶æ”¯æŒæ–°å¢éƒ¨é—¨å’Œç¼–è¾‘éƒ¨é—¨ä¸¤ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®formDataæ˜¯å¦æœ‰idè¿›è¡ŒåŒºåˆ†</p>
</blockquote>
<p><strong>å°è£…ç¼–è¾‘éƒ¨é—¨æ¥å£</strong>   <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¼–è¾‘éƒ¨é—¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateDepartments</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">${data.id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ç‚¹å‡»ç¡®å®šæ—¶ï¼Œè¿›è¡Œåœºæ™¯åŒºåˆ†</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line"> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; {</span><br><span class="line">     <span class="keyword">if</span> (isOK) {</span><br><span class="line">       <span class="comment">// è¦åˆ†æ¸…æ¥šç°åœ¨æ˜¯ç¼–è¾‘è¿˜æ˜¯æ–°å¢</span></span><br><span class="line">       <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) {</span><br><span class="line">         <span class="comment">// ç¼–è¾‘æ¨¡å¼  è°ƒç”¨ç¼–è¾‘æ¥å£</span></span><br><span class="line">         <span class="keyword">await</span> updateDepartments(<span class="built_in">this</span>.formData)</span><br><span class="line">       } <span class="keyword">else</span> {</span><br><span class="line">         <span class="comment">// æ–°å¢æ¨¡å¼</span></span><br><span class="line">         <span class="keyword">await</span> addDepartments({ ...this.formData, <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id }) <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£ æ·»åŠ çˆ¶éƒ¨é—¨çš„id</span></span><br><span class="line">       }</span><br><span class="line">       <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">       <span class="built_in">this</span>.$emit(<span class="string">'addDepts'</span>) <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶ æ–°å¢æ•°æ®æˆåŠŸ é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">       <span class="comment">// update:propsåç§°</span></span><br><span class="line">       <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">     }</span><br><span class="line">   })</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ"><a href="#æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ" class="headerlink" title="æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ"></a>æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ</h3><blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å‘ç°åŸæ¥çš„æ ¡éªŒè§„åˆ™å®é™…å’Œç¼–è¾‘éƒ¨é—¨æœ‰äº›å†²çªï¼Œæ‰€ä»¥éœ€è¦è¿›ä¸€æ­¥å¤„ç†</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç°åœ¨å®šä¹‰ä¸€ä¸ªå‡½æ•° è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯ å»æ‰¾ åŒçº§éƒ¨é—¨ä¸‹ æ˜¯å¦æœ‰é‡å¤çš„éƒ¨é—¨åç§°</span></span><br><span class="line"> <span class="keyword">const</span> checkNameRepeat = <span class="keyword">async</span>(rule, value, callback) =&gt; {</span><br><span class="line">   <span class="comment">// å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">   <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">   <span class="comment">//  æ£€æŸ¥é‡å¤è§„åˆ™ éœ€è¦æ”¯æŒä¸¤ç§ æ–°å¢æ¨¡å¼ / ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">   <span class="comment">// deptsæ˜¯æ‰€æœ‰çš„éƒ¨é—¨æ•°æ®</span></span><br><span class="line">   <span class="comment">// å¦‚ä½•å»æ‰¾æŠ€æœ¯éƒ¨æ‰€æœ‰çš„å­èŠ‚ç‚¹</span></span><br><span class="line">   <span class="keyword">let</span> isRepeat = <span class="literal">false</span></span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) {</span><br><span class="line">     <span class="comment">// æœ‰idå°±æ˜¯ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">     <span class="comment">// ç¼–è¾‘ å¼ ä¸‰ =&gt; æ ¡éªŒè§„åˆ™ é™¤äº†æˆ‘ä¹‹å¤– åŒçº§éƒ¨é—¨ä¸‹ ä¸èƒ½æœ‰å«å¼ ä¸‰çš„</span></span><br><span class="line">     isRepeat = depts.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.id !== <span class="built_in">this</span>.formData.id &amp;&amp; item.pid === <span class="built_in">this</span>.treeNode.pid).some(<span class="function"><span class="params">item</span> =&gt;</span> item.name === value)</span><br><span class="line">   } <span class="keyword">else</span> {</span><br><span class="line">     <span class="comment">// æ²¡idå°±æ˜¯æ–°å¢æ¨¡å¼</span></span><br><span class="line">     isRepeat = depts.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.pid === <span class="built_in">this</span>.treeNode.id).some(<span class="function"><span class="params">item</span> =&gt;</span> item.name === value)</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`åŒçº§éƒ¨é—¨ä¸‹å·²ç»æœ‰<span class="subst">${value}</span>çš„éƒ¨é—¨äº†`</span>)) : callback()</span><br><span class="line"> }</span><br><span class="line"> <span class="comment">// æ£€æŸ¥ç¼–ç é‡å¤</span></span><br><span class="line"> <span class="keyword">const</span> checkCodeRepeat = <span class="keyword">async</span>(rule, value, callback) =&gt; {</span><br><span class="line">   <span class="comment">// å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">   <span class="comment">//  æ£€æŸ¥é‡å¤è§„åˆ™ éœ€è¦æ”¯æŒä¸¤ç§ æ–°å¢æ¨¡å¼ / ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">   <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">   <span class="keyword">let</span> isRepeat = <span class="literal">false</span></span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) {</span><br><span class="line">     <span class="comment">// ç¼–è¾‘æ¨¡å¼  å› ä¸ºç¼–è¾‘æ¨¡å¼ä¸‹ ä¸èƒ½ç®—è‡ªå·±</span></span><br><span class="line">     isRepeat = depts.some(<span class="function"><span class="params">item</span> =&gt;</span> item.id !== <span class="built_in">this</span>.formData.id &amp;&amp; item.code === value &amp;&amp; value)</span><br><span class="line">   } <span class="keyword">else</span> {</span><br><span class="line">     <span class="comment">// æ–°å¢æ¨¡å¼</span></span><br><span class="line">     isRepeat = depts.some(<span class="function"><span class="params">item</span> =&gt;</span> item.code === value &amp;&amp; value) <span class="comment">// è¿™é‡ŒåŠ ä¸€ä¸ª valueä¸ä¸ºç©º å› ä¸ºæˆ‘ä»¬çš„éƒ¨é—¨æœ‰å¯èƒ½æ²¡æœ‰code</span></span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`ç»„ç»‡æ¶æ„ä¸­å·²ç»æœ‰éƒ¨é—¨ä½¿ç”¨<span class="subst">${value}</span>ç¼–ç `</span>)) : callback()</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è‡³æ­¤ï¼Œæ•´ä¸ªç»„ç»‡æ¶æ„ï¼Œ æˆ‘ä»¬å®Œæˆäº†ï¼Œç»„ç»‡æ¶æ„è¯»å– /  æ–°å¢éƒ¨é—¨ / åˆ é™¤éƒ¨é—¨  / ç¼–è¾‘éƒ¨é—¨</p>
</blockquote>
<p>å¦‚å›¾</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200722134415195.png" alt="image-20200722134415195"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°</p>
<h2 id="ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡"><a href="#ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡" class="headerlink" title="ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡"></a>ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡</h2><p><strong><code>ç›®æ ‡</code></strong>  ç»™å½“å‰ç»„ç»‡æ¶æ„æ·»åŠ åŠ è½½è¿›åº¦æ¡</p>
<p>ç”±äºè·å–æ•°æ®çš„å»¶è¿Ÿæ€§ï¼Œä¸ºäº†æ›´å¥½çš„ä½“éªŒï¼Œå¯ä»¥ç»™é¡µé¢å¢åŠ ä¸€ä¸ªLoadingè¿›åº¦æ¡ï¼Œé‡‡ç”¨elementçš„æŒ‡ä»¤è§£å†³æ–¹æ¡ˆå³å¯</p>
<p><strong>å®šä¹‰loadingå˜é‡</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">loading: <span class="literal">false</span> <span class="comment">// ç”¨æ¥æ§åˆ¶è¿›åº¦å¼¹å±‚çš„æ˜¾ç¤ºå’Œéšè—</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>èµ‹å€¼å˜é‡ç»™æŒ‡ä»¤</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div v-loading="loading" class="dashboard-container"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è·å–æ–¹æ³•å‰åè®¾ç½®å˜é‡</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> getDepartments()</span><br><span class="line">      <span class="built_in">this</span>.departs = transListToTreeData(result.depts, <span class="string">''</span>)</span><br><span class="line">      <span class="built_in">this</span>.company = { <span class="attr">name</span>: result.companyName, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span>, <span class="attr">id</span>: <span class="string">''</span> }</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="6-å…¬å¸å’Œè§’è‰²"><a href="#6-å…¬å¸å’Œè§’è‰²" class="headerlink" title="6.å…¬å¸å’Œè§’è‰²"></a>6.å…¬å¸å’Œè§’è‰²</h1><h2 id="å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„"><a href="#å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„" class="headerlink" title="å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„"></a>å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„</h2><p>**<code>ç›®æ ‡</code>**å»ºç«‹å…¬å¸é¡µé¢çš„åŸºæœ¬ç»“æ„</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200722221903217.png" alt="image-20200722221903217"></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200722221910776.png" alt="image-20200722221910776"></p>
<p>æ ¹æ®ä»¥ä¸Šçš„ç»“æ„ï¼Œæˆ‘ä»¬é‡‡ç”¨element-uiçš„ç»„ä»¶å®ç°</p>
<p><strong><code>src/views/setting/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;el-card&gt;</span><br><span class="line">        &lt;el-tabs&gt;</span><br><span class="line">          &lt;!-- æ”¾ç½®é¡µç­¾ --&gt;</span><br><span class="line">          &lt;el-tab-pane label="è§’è‰²ç®¡ç†"&gt;</span><br><span class="line">            &lt;!-- æ–°å¢è§’è‰²æŒ‰é’® --&gt;</span><br><span class="line">            &lt;el-row style="height:60px"&gt;</span><br><span class="line">              &lt;el-button</span><br><span class="line">                icon="el-icon-plus"</span><br><span class="line">                size="small"</span><br><span class="line">                type="primary"</span><br><span class="line">              &gt;æ–°å¢è§’è‰²&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">            &lt;!-- è¡¨æ ¼ --&gt;</span><br><span class="line">            &lt;el-table border=""&gt;</span><br><span class="line">              &lt;el-table-column label="åºå·" width="120" /&gt;</span><br><span class="line">              &lt;el-table-column label="è§’è‰²åç§°" width="240" /&gt;</span><br><span class="line">              &lt;el-table-column label="æè¿°" /&gt;</span><br><span class="line">              &lt;el-table-column label="æ“ä½œ"&gt;</span><br><span class="line">                &lt;el-button size="small" type="success"&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button size="small" type="primary"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button size="small" type="danger"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">              &lt;/el-table-column&gt;</span><br><span class="line">            &lt;/el-table&gt;</span><br><span class="line">            &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">            &lt;el-row type="flex" justify="center" align="middle" style="height: 60px"&gt;</span><br><span class="line">              &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">              &lt;el-pagination layout="prev,pager,next" /&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">          &lt;/el-tab-pane&gt;</span><br><span class="line">          &lt;el-tab-pane label="å…¬å¸ä¿¡æ¯"&gt;</span><br><span class="line">            &lt;el-alert</span><br><span class="line">              title="å¯¹å…¬å¸åç§°ã€å…¬å¸åœ°å€ã€è¥ä¸šæ‰§ç…§ã€å…¬å¸åœ°åŒºçš„æ›´æ–°ï¼Œå°†ä½¿å¾—å…¬å¸èµ„æ–™è¢«é‡æ–°å®¡æ ¸ï¼Œè¯·è°¨æ…ä¿®æ”¹"</span><br><span class="line">              type="info"</span><br><span class="line">              show-icon</span><br><span class="line">              :closable="false"</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;el-form label-width="120px" style="margin-top:50px"&gt;</span><br><span class="line">              &lt;el-form-item label="å…¬å¸åç§°"&gt;</span><br><span class="line">                &lt;el-input disabled style="width:400px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label="å…¬å¸åœ°å€"&gt;</span><br><span class="line">                &lt;el-input disabled style="width:400px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label="é‚®ç®±"&gt;</span><br><span class="line">                &lt;el-input disabled style="width:400px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label="å¤‡æ³¨"&gt;</span><br><span class="line">                &lt;el-input type="textarea" :rows="3" disabled style="width:400px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">          &lt;/el-tab-pane&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/el-tabs&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**å»ºç«‹å…¬å¸é¡µé¢çš„åŸºæœ¬ç»“æ„</p>
<h2 id="è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯"><a href="#è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯" class="headerlink" title="è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯"></a>è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯</h2><p>**<code>ç›®æ ‡</code>**ï¼š å°è£…å…¬å¸è§’è‰²è¯·æ±‚ï¼Œè¯»å–å…¬å¸è§’è‰²ä¿¡æ¯</p>
<h3 id="è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®"><a href="#è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®" class="headerlink" title="è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®"></a>è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®</h3><p>é¦–å…ˆï¼Œå°è£…è¯»å–è§’è‰²çš„ä¿¡æ¯çš„è¯·æ±‚ <strong><code>src/api/setting.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–è§’è‰²åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getRoleList</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/role'</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>paramsæ˜¯æŸ¥è¯¢å‚æ•°ï¼Œé‡Œé¢éœ€è¦æºå¸¦åˆ†é¡µä¿¡æ¯</p>
</blockquote>
<p>ç„¶åï¼Œåœ¨é¡µé¢ä¸­è°ƒç”¨æ¥å£è·å–æ•°æ®ï¼Œç»‘å®šè¡¨æ ¼æ•°æ® <strong><code>src/views/setting/index.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getRoleList } <span class="keyword">from</span> <span class="string">'@/api/setting'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">list</span>: [], <span class="comment">// æ‰¿æ¥æ•°ç»„</span></span><br><span class="line">      <span class="attr">page</span>: {</span><br><span class="line">        <span class="comment">// æ”¾ç½®é¡µç åŠç›¸å…³æ•°æ®</span></span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">pagesize</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">total</span>: <span class="number">0</span> <span class="comment">// è®°å½•æ€»æ•°</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getRoleList() <span class="comment">// è·å–è§’è‰²åˆ—è¡¨</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getRoleList</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> { total, rows } = <span class="keyword">await</span> getRoleList(<span class="built_in">this</span>.page)</span><br><span class="line">      <span class="built_in">this</span>.page.total = total</span><br><span class="line">      <span class="built_in">this</span>.list = rows</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">changePage</span>(<span class="params">newPage</span>)</span> {</span><br><span class="line">      <span class="comment">// newPageæ˜¯å½“å‰ç‚¹å‡»çš„é¡µç </span></span><br><span class="line">      <span class="built_in">this</span>.page.page = newPage <span class="comment">// å°†å½“å‰é¡µç èµ‹å€¼ç»™å½“å‰çš„æœ€æ–°é¡µç </span></span><br><span class="line">      <span class="built_in">this</span>.getRoleList()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p> <strong>ç»‘å®šè¡¨æ ¼æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-table border="" :data="list"&gt;</span><br><span class="line">            &lt;el-table-column align="center" type="index" label="åºå·" width="120" /&gt;</span><br><span class="line">            &lt;el-table-column align="center" prop="name" label="åç§°" width="240" /&gt;</span><br><span class="line">            &lt;el-table-column align="center" prop="description" label="æè¿°" /&gt;</span><br><span class="line">            &lt;el-table-column align="center" label="æ“ä½œ"&gt;</span><br><span class="line">              &lt;el-button size="small" type="success"&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button size="small" type="primary"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button size="small" type="danger"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">          &lt;/el-table&gt;</span><br><span class="line">      </span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šåˆ†é¡µæ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">        &lt;el-row type="flex" justify="center" align="middle" style="height:60px"&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">            :current-page="page.page"</span><br><span class="line">            :page-size="page.pagesize"</span><br><span class="line">            :total="page.total"</span><br><span class="line">            layout="prev, pager, next"</span><br><span class="line">            @current-change="changePage"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®"><a href="#è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®" class="headerlink" title="è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®"></a>è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®</h3><blockquote>
<p>ç¬¬äºŒä¸ªtabé¡µï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦è¯»å–æ•°æ®</p>
</blockquote>
<p>å°è£…è¯»å–å…¬å¸ä¿¡æ¯çš„api  <strong><code>src/api/setting.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å…¬å¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getCompanyInfo</span>(<span class="params">companyId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/<span class="subst">${companyId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šå…¬å¸è¡¨å•æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-form label-width="120px" style="margin-top:50px"&gt;</span><br><span class="line">           &lt;el-form-item label="å…¬å¸åç§°"&gt;</span><br><span class="line">             &lt;el-input v-model="formData.name" disabled style="width:400px" /&gt;</span><br><span class="line">           &lt;/el-form-item&gt;</span><br><span class="line">           &lt;el-form-item label="å…¬å¸åœ°å€"&gt;</span><br><span class="line">             &lt;el-input v-model="formData.companyAddress" disabled style="width:400px" /&gt;</span><br><span class="line">           &lt;/el-form-item&gt;</span><br><span class="line">           &lt;el-form-item label="é‚®ç®±"&gt;</span><br><span class="line">             &lt;el-input v-model="formData.mailbox" disabled style="width:400px" /&gt;</span><br><span class="line">           &lt;/el-form-item&gt;</span><br><span class="line">           &lt;el-form-item label="å¤‡æ³¨"&gt;</span><br><span class="line">             &lt;el-input v-model="formData.remarks" type="textarea" :rows="3" disabled style="width:400px" /&gt;</span><br><span class="line">           &lt;/el-form-item&gt;</span><br><span class="line">         &lt;/el-form&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¯·æ±‚ä¸­çš„companyIdæ¥è‡ªå“ªé‡Œï¼Ÿå®ƒæ¥è‡ªæˆ‘ä»¬ç™»å½•æˆåŠŸä¹‹åçš„ç”¨æˆ·èµ„æ–™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¯¥ç»„ä»¶ä¸­ä½¿ç”¨vuexæ•°æ®</p>
</blockquote>
<p> <strong><code>src/store/getters.js</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">companyId: state =&gt; state.user.userInfo.companyId // å»ºç«‹å¯¹äºuseræ¨¡å—çš„companyIdçš„å¿«æ·è®¿é—®</span><br><span class="line">computed: {</span><br><span class="line">  ...mapGetters(['companyId'])</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆå§‹åŒ–æ—¶è°ƒç”¨æ¥å£</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">   <span class="comment">// è·å–çš„å…¬å¸çš„ä¿¡æ¯</span></span><br><span class="line">   <span class="keyword">async</span> <span class="function"><span class="title">getCompanyInfo</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.formData = <span class="keyword">await</span> getCompanyInfo(<span class="built_in">this</span>.companyId)</span><br><span class="line">   }</span><br><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="built_in">this</span>.getRoleList() <span class="comment">// è·å–è§’è‰²åˆ—è¡¨</span></span><br><span class="line">   <span class="built_in">this</span>.getCompanyInfo()</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯</p>
<h2 id="åˆ é™¤è§’è‰²åŠŸèƒ½"><a href="#åˆ é™¤è§’è‰²åŠŸèƒ½" class="headerlink" title="åˆ é™¤è§’è‰²åŠŸèƒ½"></a>åˆ é™¤è§’è‰²åŠŸèƒ½</h2><p><strong><code>ç›®æ ‡</code></strong>  å®ç°åˆ é™¤è§’è‰²çš„åŠŸèƒ½</p>
<p><strong>å°è£…åˆ é™¤è§’è‰²çš„api</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** **</span></span><br><span class="line"><span class="comment"> *  åˆ é™¤è§’è‰²</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteRole</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">${id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'delete'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ é™¤åŠŸèƒ½å®ç°</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">deleteRole</span>(<span class="params">id</span>)</span> {</span><br><span class="line">  <span class="comment">//  æç¤º</span></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$confirm(<span class="string">'ç¡®è®¤åˆ é™¤è¯¥è§’è‰²å—'</span>)</span><br><span class="line">    <span class="comment">// åªæœ‰ç‚¹å‡»äº†ç¡®å®š æ‰èƒ½è¿›å…¥åˆ°ä¸‹æ–¹</span></span><br><span class="line">    <span class="keyword">await</span> deleteRole(id) <span class="comment">// è°ƒç”¨åˆ é™¤æ¥å£</span></span><br><span class="line">    <span class="built_in">this</span>.getRoleList() <span class="comment">// é‡æ–°åŠ è½½æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'åˆ é™¤è§’è‰²æˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (error) {</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ é™¤æŒ‰é’®æ³¨å†Œäº‹ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;</span><br><span class="line">         &lt;template slot-scope="{ row }"&gt;</span><br><span class="line">                 &lt;el-button size="small" type="success"&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br><span class="line">                 &lt;el-button size="small" type="primary"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">                 &lt;el-button size="small" type="danger" @click="deleteRole(row.id)"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">         &lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="ç¼–è¾‘è§’è‰²åŠŸèƒ½"><a href="#ç¼–è¾‘è§’è‰²åŠŸèƒ½" class="headerlink" title="ç¼–è¾‘è§’è‰²åŠŸèƒ½"></a>ç¼–è¾‘è§’è‰²åŠŸèƒ½</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°ç¼–è¾‘è§’è‰²çš„åŠŸèƒ½</p>
<h3 id="å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚"><a href="#å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚" class="headerlink" title="å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚"></a>å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚</h3><p><strong>å°è£…ç¼–è¾‘è§’è‰²çš„åŠŸèƒ½api</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹è§’è‰²</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateRole</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">${data.id}</span>`</span>,</span><br><span class="line">    data,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–è§’è‰²è¯¦æƒ…</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getRoleDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰ç¼–è¾‘å¼¹å±‚æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">showDialog: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">// ä¸“é—¨æ¥æ”¶æ–°å¢æˆ–è€…ç¼–è¾‘çš„ç¼–è¾‘çš„è¡¨å•æ•°æ®</span></span><br><span class="line"><span class="attr">roleForm</span>: {},</span><br><span class="line"><span class="attr">rules</span>: {</span><br><span class="line">  <span class="attr">name</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'è§’è‰²åç§°ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }]</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¼–è¾‘å¼¹å±‚ç»“æ„</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-dialog title="ç¼–è¾‘å¼¹å±‚" :visible="showDialog" @close="btnCancel"&gt;</span><br><span class="line">     &lt;el-form ref="roleForm" :model="roleForm" :rules="rules" label-width="120px"&gt;</span><br><span class="line">       &lt;el-form-item label="è§’è‰²åç§°" prop="name"&gt;</span><br><span class="line">         &lt;el-input v-model="roleForm.name" /&gt;</span><br><span class="line">       &lt;/el-form-item&gt;</span><br><span class="line">       &lt;el-form-item label="è§’è‰²æè¿°"&gt;</span><br><span class="line">         &lt;el-input v-model="roleForm.description" /&gt;</span><br><span class="line">       &lt;/el-form-item&gt;</span><br><span class="line">     &lt;/el-form&gt;</span><br><span class="line">     &lt;!-- åº•éƒ¨ --&gt;</span><br><span class="line">     &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">       &lt;el-col :span="6"&gt;</span><br><span class="line">         &lt;el-button size="small" @click="btnCancel"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">         &lt;el-button size="small" type="primary" @click="btnOK"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">       &lt;/el-col&gt;</span><br><span class="line">     &lt;/el-row&gt;</span><br><span class="line">   &lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£"><a href="#å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£" class="headerlink" title="å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£"></a>å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£</h3><p><strong>ç¼–è¾‘åŠŸèƒ½å®ç°ï¼ˆä¸ºæ–°å¢åŠŸèƒ½ç•™å£ï¼‰</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">editRole</span>(<span class="params">id</span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.roleForm = <span class="keyword">await</span> getRoleDetail(id)</span><br><span class="line">  <span class="built_in">this</span>.showDialog = <span class="literal">true</span> <span class="comment">// ä¸ºäº†ä¸å‡ºç°é—ªçƒçš„é—®é¢˜ å…ˆè·å–æ•°æ® å†å¼¹å‡ºå±‚</span></span><br><span class="line">},</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.roleForm.validate()</span><br><span class="line">    <span class="comment">// åªæœ‰æ ¡éªŒé€šè¿‡çš„æƒ…å†µä¸‹ æ‰ä¼šæ‰§è¡Œawaitçš„ä¸‹æ–¹å†…å®¹</span></span><br><span class="line">    <span class="comment">// roleFormè¿™ä¸ªå¯¹è±¡æœ‰idå°±æ˜¯ç¼–è¾‘ æ²¡æœ‰idå°±æ˜¯æ–°å¢</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.roleForm.id) {</span><br><span class="line">      <span class="keyword">await</span> updateRole(<span class="built_in">this</span>.roleForm)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æ–°å¢ä¸šåŠ¡</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getRoleList()</span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'æ“ä½œæˆåŠŸ'</span>)</span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">  } <span class="keyword">catch</span> (error) {</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¼–è¾‘æŒ‰é’®æ³¨å†Œäº‹ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-button size="small" type="primary" @click="editRole(row.id)"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="æ–°å¢è§’è‰²åŠŸèƒ½"><a href="#æ–°å¢è§’è‰²åŠŸèƒ½" class="headerlink" title="æ–°å¢è§’è‰²åŠŸèƒ½"></a>æ–°å¢è§’è‰²åŠŸèƒ½</h2><p>**<code>ç›®æ ‡</code>**å®ç°æ–°å¢è§’è‰²åŠŸèƒ½</p>
<p><strong>å°è£…æ–°å¢è§’è‰²åŠŸèƒ½api</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * æ–°å¢è§’è‰²</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addRole</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/role'</span>,</span><br><span class="line">    data,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–°å¢åŠŸèƒ½å®ç°å’Œç¼–è¾‘åŠŸèƒ½åˆå¹¶ï¼ˆå¤„ç†å…³é—­ï¼‰</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.roleForm.validate()</span><br><span class="line">    <span class="comment">// åªæœ‰æ ¡éªŒé€šè¿‡çš„æƒ…å†µä¸‹ æ‰ä¼šæ‰§è¡Œawaitçš„ä¸‹æ–¹å†…å®¹</span></span><br><span class="line">    <span class="comment">// roleFormè¿™ä¸ªå¯¹è±¡æœ‰idå°±æ˜¯ç¼–è¾‘ æ²¡æœ‰idå°±æ˜¯æ–°å¢</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.roleForm.id) {</span><br><span class="line">      <span class="keyword">await</span> updateRole(<span class="built_in">this</span>.roleForm)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æ–°å¢ä¸šåŠ¡</span></span><br><span class="line">      <span class="keyword">await</span> addRole(<span class="built_in">this</span>.roleForm)</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getRoleList()</span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'æ“ä½œæˆåŠŸ'</span>)</span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">false</span> <span class="comment">// å…³é—­å¼¹å±‚  =&gt;  è§¦å‘el-dialogçš„äº‹ä»¶closeäº‹ä»¶</span></span><br><span class="line">  } <span class="keyword">catch</span> (error) {</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  }</span><br><span class="line">},</span><br><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.roleForm = {</span><br><span class="line">    <span class="attr">name</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">''</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// ç§»é™¤æ ¡éªŒ</span></span><br><span class="line">  <span class="built_in">this</span>.$refs.roleForm.resetFields()</span><br><span class="line">  <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–°å¢æŒ‰é’®æ³¨å†Œäº‹ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-button type="primary" size="small" @click="showDialog = true"&gt;æ–°å¢è§’è‰²&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> æ–°å¢è§’è‰²åŠŸèƒ½</p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200831160134281.png" alt="image-20200831160134281"></p>
<p>æˆ‘ä»¬å®Œæˆäº†å…¬å¸ä¸­è§’è‰²ç®¡ç†çš„éƒ¨åˆ†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å®Œæˆåˆ†é…æƒé™çš„éƒ¨åˆ†ï¼Œè¯¥éƒ¨é—¨ä¼šåœ¨æƒé™è®¾è®¡å’Œç®¡ç†çš„éƒ¨é—¨é‡ç‚¹æåŠ</p>
<h1 id="7-å‘˜å·¥ç®¡ç†"><a href="#7-å‘˜å·¥ç®¡ç†" class="headerlink" title="7.å‘˜å·¥ç®¡ç†"></a>7.å‘˜å·¥ç®¡ç†</h1><h2 id="å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ "><a href="#å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ " class="headerlink" title="å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ "></a>å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ </h2><p>**<code>ç›®æ ‡</code>**ï¼šå°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ ä¾›å¤§å®¶ä½¿ç”¨</p>
<h3 id="é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„"><a href="#é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„" class="headerlink" title="é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„"></a>é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„</h3><blockquote>
<p>åœ¨åç»­çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°ä¸€ä¸ªç±»ä¼¼ä¸‹å›¾çš„å·¥å…·æ ï¼Œä½œä¸ºå…¬å…±ç»„ä»¶ï¼Œè¿›è¡Œä¸€ä¸‹å°è£…</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200723223704401.png" alt="image-20200723223704401"></p>
<p>ç»„ä»¶ <strong><code>src/components/PageTools/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class="page-tools"&gt;</span><br><span class="line">    &lt;el-row type="flex" justify="space-between" align="middle"&gt;</span><br><span class="line">      &lt;el-col&gt;</span><br><span class="line">        &lt;div  v-if="showBefore" class="before"&gt;</span><br><span class="line">          &lt;i class="el-icon-info" /&gt;</span><br><span class="line">          &lt;!-- å®šä¹‰å‰é¢å¾—æ’æ§½ --&gt;</span><br><span class="line">          &lt;slot name="before" /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col&gt;</span><br><span class="line">        &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">           &lt;!-- å®šä¹‰åé¢çš„æ’æ§½ --&gt;</span><br><span class="line">           &lt;slot name="after" /&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    showBefore: {</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang='scss'&gt;</span><br><span class="line"> .page-tools {</span><br><span class="line">    margin: 10px 0;</span><br><span class="line">    .before {</span><br><span class="line">      line-height: 34px;</span><br><span class="line">    i {</span><br><span class="line">      margin-right: 5px;</span><br><span class="line">      color: #409eff;</span><br><span class="line">    }</span><br><span class="line">    display: inline-block;</span><br><span class="line">    padding: 0px 10px;</span><br><span class="line">    border-radius: 3px;</span><br><span class="line">    border: 1px solid rgba(145, 213, 255, 1);</span><br><span class="line">    background: rgba(230, 247, 255, 1);</span><br><span class="line">  }</span><br><span class="line"> }</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ"><a href="#ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ" class="headerlink" title="ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ"></a>ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ</h3><blockquote>
<p>ä¸ºäº†æ–¹ä¾¿æ‰€æœ‰çš„é¡µé¢éƒ½å¯ä»¥ä¸ç”¨å¼•ç”¨è¯¥ç»„ä»¶ï¼Œå¯ä»¥è¿›è¡Œå…¨å±€æ³¨å†Œ</p>
</blockquote>
<p>æä¾›æ³¨å†Œå…¥å£ <strong><code>src/componets/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–‡ä»¶è´Ÿè´£æ‰€æœ‰çš„å…¬å…±çš„ç»„ä»¶çš„å…¨å±€æ³¨å†Œ   Vue.use</span></span><br><span class="line"><span class="keyword">import</span> PageTools <span class="keyword">from</span> <span class="string">'./PageTools'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue</span>)</span> {</span><br><span class="line">    <span class="comment">//  æ³¨å†Œå…¨å±€çš„é€šç”¨æ ç»„ä»¶å¯¹è±¡</span></span><br><span class="line">    Vue.component(<span class="string">'PageTools'</span>, PageTools)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åœ¨å…¥å£å¤„è¿›è¡Œæ³¨å†Œ <strong><code>src/main.js</code></strong></p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Component <span class="keyword">from</span> <span class="string">'@/components'</span></span><br><span class="line">Vue.use(Component) <span class="comment">// æ³¨å†Œè‡ªå·±çš„æ’ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ </p>
<h2 id="å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„"><a href="#å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„" class="headerlink" title="å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„"></a>å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„</p>
<p><strong>ç»“æ„ä»£ç </strong> <strong><code>src/employees/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;page-tools :show-before="true"&gt;</span><br><span class="line">        &lt;span slot="before"&gt;å…±166æ¡è®°å½•&lt;/span&gt;</span><br><span class="line">        &lt;template slot="after"&gt;</span><br><span class="line">          &lt;el-button size="small" type="warning"&gt;å¯¼å…¥&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size="small" type="danger"&gt;å¯¼å‡º&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size="small" type="primary"&gt;æ–°å¢å‘˜å·¥&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/page-tools&gt;</span><br><span class="line">      &lt;!-- æ”¾ç½®è¡¨æ ¼å’Œåˆ†é¡µ --&gt;</span><br><span class="line">      &lt;el-card&gt;</span><br><span class="line">        &lt;el-table border&gt;</span><br><span class="line">          &lt;el-table-column label="åºå·" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="å§“å" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="å·¥å·" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="è˜ç”¨å½¢å¼" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="éƒ¨é—¨" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="å…¥èŒæ—¶é—´" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="è´¦æˆ·çŠ¶æ€" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="æ“ä½œ" sortable="" fixed="right" width="280"&gt;</span><br><span class="line">            &lt;template&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è½¬æ­£&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è°ƒå²—&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;ç¦»èŒ&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è§’è‰²&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">        &lt;el-row type="flex" justify="center" align="middle" style="height: 60px"&gt;</span><br><span class="line">          &lt;el-pagination layout="prev, pager, next" /&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200831162222975.png" alt="image-20200831162222975"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„</p>
<h2 id="å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½"><a href="#å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½" class="headerlink" title="å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½"></a>å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½</h2><p>**<code>ç›®æ ‡</code>**å®ç°å‘˜å·¥æ•°æ®çš„åŠ è½½å’Œåˆ†é¡µè¯·æ±‚</p>
<p>é¦–å…ˆï¼Œå°è£…å‘˜å·¥çš„åŠ è½½è¯·æ±‚ <strong><code>src/api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å‘˜å·¥çš„ç»¼åˆåˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getEmployeeList</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user'</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œå®ç°åŠ è½½æ•°æ®å’Œåˆ†é¡µçš„é€»è¾‘</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getEmployeeList } <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">list</span>: [], <span class="comment">// æ¥æ•°æ®çš„</span></span><br><span class="line">      <span class="attr">page</span>: {</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>, <span class="comment">// å½“å‰é¡µç </span></span><br><span class="line">        <span class="attr">size</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">total</span>: <span class="number">0</span> <span class="comment">// æ€»æ•°</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getEmployeeList()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="function"><span class="title">changePage</span>(<span class="params">newPage</span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.page.page = newPage</span><br><span class="line">      <span class="built_in">this</span>.getEmployeeList()</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getEmployeeList</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> { total, rows } = <span class="keyword">await</span> getEmployeeList(<span class="built_in">this</span>.page)</span><br><span class="line">      <span class="built_in">this</span>.page.total = total</span><br><span class="line">      <span class="built_in">this</span>.list = rows</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šè¡¨æ ¼</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-card v-loading="loading"&gt;</span><br><span class="line">  &lt;el-table border :data="list"&gt;</span><br><span class="line">    &lt;el-table-column label="åºå·" sortable="" type="index" /&gt;</span><br><span class="line">    &lt;el-table-column label="å§“å" sortable="" prop="username" /&gt;</span><br><span class="line">    &lt;el-table-column label="å·¥å·" sortable="" prop="workNumber" /&gt;</span><br><span class="line">    &lt;el-table-column label="è˜ç”¨å½¢å¼" sortable="" prop="formOfEmployment" /&gt;</span><br><span class="line">    &lt;el-table-column label="éƒ¨é—¨" sortable="" prop="departmentName" /&gt;</span><br><span class="line">    &lt;el-table-column label="å…¥èŒæ—¶é—´" sortable="" prop="timeOfEntry" /&gt;</span><br><span class="line">    &lt;el-table-column label="è´¦æˆ·çŠ¶æ€" sortable="" prop="enableState" /&gt;</span><br><span class="line">    &lt;el-table-column label="æ“ä½œ" sortable="" fixed="right" width="280"&gt;</span><br><span class="line">      &lt;template&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;è½¬æ­£&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;è°ƒå²—&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;ç¦»èŒ&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;è§’è‰²&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line">  &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">  &lt;el-row type="flex" justify="center" align="middle" style="height: 60px"&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      layout="prev, pager, next"</span><br><span class="line">      :page-size="page.size"</span><br><span class="line">      :current-page="page.page"</span><br><span class="line">      :total="page.total"</span><br><span class="line">      @current-change="changePage"</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/el-card&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½</p>
<h2 id="å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–"><a href="#å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–" class="headerlink" title="å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–"></a>å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–</h2><p>**<code>ç›®æ ‡</code>**ï¼šå°†åˆ—è¡¨ä¸­çš„å†…å®¹è¿›è¡Œæ ¼å¼åŒ–</p>
<h3 id="åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼"><a href="#åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼" class="headerlink" title="åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼"></a>åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼</h3><p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200724001315166.png" alt="image-20200724001315166"></p>
<blockquote>
<p>ä¸Šå°èŠ‚ä¸­ï¼Œåˆ—è¡¨ä¸­çš„<strong>è˜ç”¨å½¢å¼</strong>/<strong>å…¥èŒæ—¶é—´</strong>å’Œ<strong>è´¦æˆ·çŠ¶æ€</strong>éœ€è¦è¿›è¡Œæ˜¾ç¤ºå†…å®¹çš„å¤„ç†</p>
</blockquote>
<p>é‚£ä¹ˆè˜ç”¨å½¢å¼ä¸­<strong>1</strong>ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Œè¿™å®é™…ä¸Šæ˜¯æˆ‘ä»¬éœ€è¦çš„æšä¸¾æ•°æ®ï¼Œè¯¥æ•°æ®çš„å­˜æ”¾æ–‡ä»¶ä½äºæˆ‘ä»¬æä¾›çš„**<code>èµ„æº/æšä¸¾</code><strong>ä¸­ï¼Œå¯ä»¥å°†æšä¸¾ä¸‹çš„æ–‡ä»¶å¤¹æ”¾äº</strong><code>src/api</code>**æ–‡ä»¶å¤¹ä¸‹</p>
<p>é’ˆå¯¹<strong>è˜ç”¨å½¢å¼</strong>ï¼Œå¯ä»¥ä½¿ç”¨<strong>el-table-column</strong>çš„<strong>formatter</strong>å±æ€§è¿›è¡Œè®¾ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"> <span class="keyword">import</span>    EmployeeEnum <span class="keyword">from</span> <span class="string">'@/api/constant/employees'</span></span><br><span class="line">&lt;!-- æ ¼å¼åŒ–è˜ç”¨å½¢å¼ --&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">"è˜ç”¨å½¢å¼"</span> <span class="attr">sortable</span> <span class="attr">:formatter</span>=<span class="string">"formatEmployment"</span> /&gt;</span></span></span><br><span class="line">  <span class="comment">// æ ¼å¼åŒ–è˜ç”¨å½¢å¼</span></span><br><span class="line">   <span class="function"><span class="title">formatEmployment</span>(<span class="params">row, column, cellValue, index</span>)</span> {</span><br><span class="line">     <span class="comment">// è¦å»æ‰¾ 1æ‰€å¯¹åº”çš„å€¼</span></span><br><span class="line">     <span class="keyword">const</span> obj = EmployeeEnum.hireType.find(<span class="function"><span class="params">item</span> =&gt;</span> item.id === cellValue)</span><br><span class="line">     <span class="keyword">return</span> obj ? obj.value : <span class="string">'æœªçŸ¥'</span></span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†"><a href="#è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†" class="headerlink" title="è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†"></a>è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†</h3><p>é’ˆå¯¹å…¥èŒæ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨<strong>ä½œç”¨åŸŸæ’æ§½</strong>è¿›è¡Œå¤„ç†</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-table-column label="å…¥èŒæ—¶é—´" sortable prop="timeOfEntry"&gt;</span><br><span class="line">           &lt;template slot-scope="obj"&gt;</span><br><span class="line">             {{</span><br><span class="line">               obj.row.timeOfEntry | è¿‡æ»¤å™¨</span><br><span class="line">             }}</span><br><span class="line">           &lt;/template&gt;</span><br><span class="line"> &lt;/el-table-column&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é—®é¢˜æ¥äº†ï¼Œè¿‡æ»¤å™¨ä»å“ªé‡Œå‘¢ï¼Ÿ</p>
</blockquote>
<p>åœ¨**<code>èµ„æº/è¿‡æ»¤å™¨</code><strong>ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†è‹¥å¹²å·¥å…·æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è½¬åŒ–æˆè¿‡æ»¤å™¨ï¼Œé¦–å…ˆå°†å…¶æ‹·è´åˆ°</strong><code>src</code>**</p>
<p>åœ¨**<code>main.js</code>**ä¸­å°†å·¥å…·æ–¹æ³•è½¬åŒ–æˆè¿‡æ»¤å™¨</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> filters <span class="keyword">from</span> <span class="string">'@/filters'</span> <span class="comment">// å¼•å…¥å·¥å…·ç±»</span></span><br><span class="line"><span class="comment">// æ³¨å†Œå…¨å±€çš„è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="built_in">Object</span>.keys(filters).forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// æ³¨å†Œè¿‡æ»¤å™¨</span></span><br><span class="line">  Vue.filter(key, filters[key])</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å¥½äº†ï¼Œç°åœ¨å¯ä»¥æ„‰å¿«çš„ç”¨è¿‡æ»¤å™¨çš„æ–¹å¼ä½¿ç”¨å·¥å…·ç±»çš„æ–¹æ³•äº†</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-table-column label="å…¥èŒæ—¶é—´" sortable="" align="center"&gt;</span><br><span class="line">     &lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;</span><br><span class="line">     &lt;template slot-scope="{ row }"&gt;{{ row.timeOfEntry | formatDate }}&lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åä¸€é¡¹ï¼Œè´¦æˆ·çŠ¶æ€ï¼Œå¯ä»¥ç”¨å¼€å…³ç»„ä»¶switchè¿›è¡Œæ˜¾ç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-table-column label="è´¦æˆ·çŠ¶æ€" align="center" sortable="" prop="enableState"&gt;</span><br><span class="line">           &lt;template slot-scope="{ row }"&gt;</span><br><span class="line">             &lt;!-- æ ¹æ®å½“å‰çŠ¶æ€æ¥ç¡®å®š æ˜¯å¦æ‰“å¼€å¼€å…³ --&gt;</span><br><span class="line">             &lt;el-switch :value="row.enableState === 1" /&gt;</span><br><span class="line">           &lt;/template&gt;</span><br><span class="line">   &lt;/el-table-column&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–</p>
<h2 id="åˆ é™¤å‘˜å·¥åŠŸèƒ½"><a href="#åˆ é™¤å‘˜å·¥åŠŸèƒ½" class="headerlink" title="åˆ é™¤å‘˜å·¥åŠŸèƒ½"></a>åˆ é™¤å‘˜å·¥åŠŸèƒ½</h2><p>**<code>ç›®æ ‡</code>**å®ç°åˆ é™¤å‘˜å·¥çš„åŠŸèƒ½</p>
<p>é¦–å…ˆå°è£… åˆ é™¤å‘˜å·¥çš„è¯·æ±‚</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤å‘˜å·¥æ¥å£</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">delEmployee</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">${id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'delete'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ é™¤åŠŸèƒ½</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line"> &lt;template slot-scope="{ row }"&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è½¬æ­£&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è°ƒå²—&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;ç¦»èŒ&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è§’è‰²&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small" @click="deleteEmployee(row.id)"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt; </span><br><span class="line">    // åˆ é™¤å‘˜å·¥</span><br><span class="line">    async deleteEmployee(id) {</span><br><span class="line">      try {</span><br><span class="line">        await this.$confirm('æ‚¨ç¡®å®šåˆ é™¤è¯¥å‘˜å·¥å—')</span><br><span class="line">        await delEmployee(id)</span><br><span class="line">        this.getEmployeeList()</span><br><span class="line">        this.$message.success('åˆ </span><br><span class="line">é™¤å‘˜å·¥æˆåŠŸ')</span><br><span class="line">      } catch (error) {</span><br><span class="line">        console.log(error)</span><br><span class="line">      }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š åˆ é™¤å‘˜å·¥åŠŸèƒ½</p>
<h2 id="æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨"><a href="#æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨" class="headerlink" title="æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨"></a>æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°æ–°å¢å‘˜å·¥çš„åŠŸèƒ½</p>
<h3 id="æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶"><a href="#æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶" class="headerlink" title="æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶"></a>æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶</h3><blockquote>
<p>å½“æˆ‘ä»¬ç‚¹å‡»æ–°å¢å‘˜å·¥æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»ä¼¼çš„å¼¹å±‚</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200917110516195.png" alt="image-20200917110516195"></p>
<p>ç±»ä¼¼**<code>ç»„ç»‡æ¶æ„</code>**çš„ç»„ä»¶ï¼ŒåŒæ ·æ–°å»ºä¸€ä¸ªå¼¹å±‚ç»„ä»¶ <strong><code>src/views/employees/components/add-employee.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog title="æ–°å¢å‘˜å·¥" :visible="showDialog"&gt;</span><br><span class="line">    &lt;!-- è¡¨å• --&gt;</span><br><span class="line">    &lt;el-form label-width="120px"&gt;</span><br><span class="line">      &lt;el-form-item label="å§“å"&gt;</span><br><span class="line">        &lt;el-input style="width:50%" placeholder="è¯·è¾“å…¥å§“å" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="æ‰‹æœº"&gt;</span><br><span class="line">        &lt;el-input style="width:50%" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="å…¥èŒæ—¶é—´"&gt;</span><br><span class="line">        &lt;el-date-picker style="width:50%" placeholder="è¯·é€‰æ‹©å…¥èŒæ—¶é—´" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="è˜ç”¨å½¢å¼"&gt;</span><br><span class="line">        &lt;el-select style="width:50%" placeholder="è¯·é€‰æ‹©" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="å·¥å·"&gt;</span><br><span class="line">        &lt;el-input style="width:50%" placeholder="è¯·è¾“å…¥å·¥å·" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨"&gt;</span><br><span class="line">        &lt;el-input style="width:50%" placeholder="è¯·é€‰æ‹©éƒ¨é—¨" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="è½¬æ­£æ—¶é—´"&gt;</span><br><span class="line">        &lt;el-date-picker style="width:50%" placeholder="è¯·é€‰æ‹©è½¬æ­£æ—¶é—´" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- footeræ’æ§½ --&gt;</span><br><span class="line">    &lt;template v-slot:footer&gt;</span><br><span class="line">      &lt;el-row type="flex" justify="center"&gt;</span><br><span class="line">        &lt;el-col :span="6"&gt;</span><br><span class="line">          &lt;el-button size="small"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type="primary" size="small"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    showDialog: {</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º"><a href="#å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º" class="headerlink" title="å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º"></a>å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º</h3><p>çˆ¶ç»„ä»¶ä¸­å¼•ç”¨ï¼Œå¼¹å‡ºå±‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">import AddDemployee from './components/add-employee'</span><br><span class="line">&lt;!-- æ”¾ç½®æ–°å¢ç»„ä»¶ --&gt;</span><br><span class="line"> &lt;add-employee :show-dialog.sync="showDialog" /&gt;</span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®æ–°å¢ç»„ä»¶ --&gt;</span><br><span class="line"> &lt;add-employee :show-dialog.sync="showDialog" /&gt;</span><br><span class="line"></span><br><span class="line"> &lt;el-button icon="plus" type="primary" size="small" @click="showDialog = true"&gt;æ–°å¢å‘˜å·¥&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ"><a href="#æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ" class="headerlink" title="æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ"></a>æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ</h3><p><strong>å°è£…æ–°å¢å‘˜å·¥</strong>api <strong><code>src/api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** **</span></span><br><span class="line"><span class="comment"> *  æ–°å¢å‘˜å·¥çš„æ¥å£</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addEmployee</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>é’ˆå¯¹å‘˜å·¥å±æ€§ï¼Œæ·»åŠ æ ¡éªŒè§„åˆ™</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> EmployeeEnum <span class="keyword">from</span> <span class="string">'@/api/constant/employees'</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      EmployeeEnum, <span class="comment">// åœ¨dataä¸­å®šä¹‰æ•°æ®</span></span><br><span class="line">      <span class="comment">// è¡¨å•æ•°æ®</span></span><br><span class="line">      <span class="attr">treeData</span>: [], <span class="comment">// å®šä¹‰æ•°ç»„æ¥æ”¶æ ‘å½¢æ•°æ®</span></span><br><span class="line">      <span class="attr">showTree</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ ‘å½¢çš„æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ ‘çš„æ˜¾ç¤ºæˆ–è€…éšè—è¿›åº¦æ¡</span></span><br><span class="line">      <span class="attr">formData</span>: {</span><br><span class="line">        <span class="attr">username</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">mobile</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">formOfEmployment</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">workNumber</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">departmentName</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">timeOfEntry</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">correctionTime</span>: <span class="string">''</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">rules</span>: {</span><br><span class="line">        <span class="attr">username</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'ç”¨æˆ·å§“åä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }, {</span><br><span class="line">          <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">4</span>, <span class="attr">message</span>: <span class="string">'ç”¨æˆ·å§“åä¸º1-4ä½'</span></span><br><span class="line">        }],</span><br><span class="line">        <span class="attr">mobile</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }, {</span><br><span class="line">          <span class="attr">pattern</span>: <span class="regexp">/^1[3-9]\d{9}$/</span>, message: <span class="string">'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span></span><br><span class="line">        }],</span><br><span class="line">        <span class="attr">formOfEmployment</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'è˜ç”¨å½¢å¼ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">        <span class="attr">workNumber</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å·¥å·ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">        <span class="attr">departmentName</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'change'</span> }],</span><br><span class="line">        <span class="attr">timeOfEntry</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å…¥èŒæ—¶é—´'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }]</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>ç»‘å®šæ•°æ®å’Œè§„åˆ™æ ¡éªŒ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-form :model="formData" :rules="rules" label-width="120px"&gt;</span><br><span class="line">  &lt;el-form-item label="å§“å" prop="username"&gt;</span><br><span class="line">    &lt;el-input v-model="formData.username" style="width:50%" placeholder="è¯·è¾“å…¥å§“å" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="æ‰‹æœº" prop="mobile"&gt;</span><br><span class="line">    &lt;el-input v-model="formData.mobile" style="width:50%" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="å…¥èŒæ—¶é—´" prop="timeOfEntry"&gt;</span><br><span class="line">    &lt;el-date-picker v-model="formData.timeOfEntry" style="width:50%" placeholder="è¯·é€‰æ‹©æ—¥æœŸ" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="è˜ç”¨å½¢å¼" prop="formOfEmployment"&gt;</span><br><span class="line">    &lt;el-select v-model="formData.formOfEmployment" style="width:50%" placeholder="è¯·é€‰æ‹©" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="å·¥å·" prop="workNumber"&gt;</span><br><span class="line">    &lt;el-input v-model="formData.workNumber" style="width:50%" placeholder="è¯·è¾“å…¥å·¥å·" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="éƒ¨é—¨" prop="departmentName"&gt;</span><br><span class="line">    &lt;el-input v-model="formData.departmentName" style="width:50%" placeholder="è¯·é€‰æ‹©éƒ¨é—¨" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="è½¬æ­£æ—¶é—´" prop="correctionTime"&gt;</span><br><span class="line">    &lt;el-date-picker v-model="formData.correctionTime" style="width:50%" placeholder="è¯·é€‰æ‹©æ—¥æœŸ" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢"><a href="#åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢" class="headerlink" title="åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢"></a>åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢</h3><p><strong>è˜ç”¨å½¢å¼å’Œé€‰æ‹©éƒ¨é—¨çš„å¤„ç†</strong></p>
<blockquote>
<p> å‘˜å·¥çš„éƒ¨é—¨æ˜¯ä»æ ‘å½¢éƒ¨é—¨ä¸­é€‰æ‹©ä¸€ä¸ªéƒ¨é—¨</p>
</blockquote>
<p><strong>è·å–éƒ¨é—¨æ•°æ®ï¼Œè½¬åŒ–æ ‘å½¢</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getDepartments } <span class="keyword">from</span> <span class="string">'@/api/departments'</span></span><br><span class="line"><span class="keyword">import</span> { transListToTreeData } <span class="keyword">from</span> <span class="string">'@/utils'</span></span><br><span class="line">  data () {</span><br><span class="line">      <span class="keyword">return</span> {</span><br><span class="line">             <span class="comment">// è¡¨å•æ•°æ®</span></span><br><span class="line">       <span class="attr">treeData</span>: [], <span class="comment">// å®šä¹‰æ•°ç»„æ¥æ”¶æ ‘å½¢æ•°æ®</span></span><br><span class="line">       <span class="attr">showTree</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ ‘å½¢çš„æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line">       <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ ‘çš„æ˜¾ç¤ºæˆ–è€…éšè—è¿›åº¦æ¡</span></span><br><span class="line">      }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">      <span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.showTree = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">      <span class="comment">// deptsæ˜¯æ•°ç»„ ä½†ä¸æ˜¯æ ‘å½¢</span></span><br><span class="line">      <span class="built_in">this</span>.treeData = transListToTreeData(depts, <span class="string">''</span>)</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®"><a href="#ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®" class="headerlink" title="ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®"></a>ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®</h3><p><strong>é€‰æ‹©éƒ¨é—¨ï¼Œèµ‹å€¼è¡¨å•æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-form-item label="éƒ¨é—¨" prop="departmentName"&gt;</span><br><span class="line">        &lt;el-input v-model="formData.departmentName" style="width:50%" placeholder="è¯·é€‰æ‹©éƒ¨é—¨" @focus="getDepartments" /&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®ä¸€ä¸ªtreeç»„ä»¶ --&gt;</span><br><span class="line">        &lt;el-tree</span><br><span class="line">          v-if="showTree"</span><br><span class="line">          v-loading="loading"</span><br><span class="line">          :data="treeData"</span><br><span class="line">          default-expand-all=""</span><br><span class="line">          :props="{ label: 'name' }"</span><br><span class="line">          @node-click="selectNode"</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br></pre></td></tr></tbody></table></figure>



<p><strong>ç‚¹å‡»éƒ¨é—¨æ—¶è§¦å‘</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">selectNode</span>(<span class="params">node</span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.formData.departmentName = node.name</span><br><span class="line">  <span class="built_in">this</span>.showTree = <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è˜ç”¨å½¢å¼</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-form-item label="è˜ç”¨å½¢å¼" prop="formOfEmployment"&gt;</span><br><span class="line">    &lt;el-select v-model="formData.formOfEmployment" style="width:50%" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">      &lt;!-- éå†åªèƒ½éå†ç»„ä»¶çš„æ•°æ® --&gt;</span><br><span class="line">      &lt;el-option v-for="item in EmployeeEnum.hireType" :key="item.id" :label="item.value" :value="item.id" /&gt;</span><br><span class="line">    &lt;/el-select&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ"><a href="#æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ" class="headerlink" title="æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ"></a>æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ</h2><p><strong>è°ƒç”¨æ–°å¢æ¥å£</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶ æ ¡éªŒæ•´ä¸ªè¡¨å•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.addEmployee.validate()</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£</span></span><br><span class="line">    <span class="keyword">await</span> addEmployee(<span class="built_in">this</span>.formData) <span class="comment">// æ–°å¢å‘˜å·¥</span></span><br><span class="line">    <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®</span></span><br><span class="line">    <span class="comment">// this.$parent å¯ä»¥ç›´æ¥è°ƒç”¨åˆ°çˆ¶ç»„ä»¶çš„å®ä¾‹ å®é™…ä¸Šå°±æ˜¯çˆ¶ç»„ä»¶this</span></span><br><span class="line">    <span class="comment">// this.$emit</span></span><br><span class="line">    <span class="built_in">this</span>.$parent.getEmployeeList()</span><br><span class="line">    <span class="built_in">this</span>.$parent.showDialog = <span class="literal">false</span></span><br><span class="line">  } <span class="keyword">catch</span> (error) {</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  }</span><br><span class="line">},</span><br><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="comment">// é‡ç½®åŸæ¥çš„æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.formData = {</span><br><span class="line">    <span class="attr">username</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">mobile</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">formOfEmployment</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">workNumber</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">departmentName</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">timeOfEntry</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">correctionTime</span>: <span class="string">''</span></span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">this</span>.$refs.addEmployee.resetFields() <span class="comment">// é‡ç½®æ ¡éªŒç»“æœ</span></span><br><span class="line">  <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ–°å¢å‘˜å·¥çš„åŠŸèƒ½å’Œç»„ç»‡æ¶æ„çš„åŠŸèƒ½æå…¶ç±»ä¼¼ï¼Œè¿™é‡Œä¸åšè¿‡å¤šé˜è¿°</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> æ–°å¢å‘˜å·¥åŠŸèƒ½å’Œå¼¹å±‚</p>
<h2 id="å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…"><a href="#å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…" class="headerlink" title="å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…"></a>å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…</h2><p>**<code>ç›®æ ‡</code>**ï¼šå°è£…ä¸€ä¸ªå¯¼å…¥excelæ•°æ®çš„æ–‡ä»¶</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200726005308648.png" alt="image-20200726005308648"></p>
<p>é¦–å…ˆå°è£…ä¸€ä¸ªç±»ä¼¼çš„ç»„ä»¶ï¼Œé¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç±»ä¼¼åŠŸèƒ½ï¼Œvue-element-adminå·²ç»æä¾›äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¹é€ å³å¯ <a href="https://github.com/PanJiaChen/vue-element-admin/blob/master/src/components/UploadExcel/index.vue">ä»£ç åœ°å€</a></p>
<blockquote>
<p>ç±»ä¼¼åŠŸèƒ½æ€§çš„ç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼šä½¿ç”¨å’Œå°è£…å³å¯ </p>
</blockquote>
<p>excelå¯¼å…¥åŠŸèƒ½éœ€è¦ä½¿ç”¨npmåŒ…**<code>xlsx</code><strong>ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…</strong><code>xlsx</code>**æ’ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i xlsx</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å°†vue-element-adminæä¾›çš„å¯¼å…¥åŠŸèƒ½æ–°å»ºä¸€ä¸ªç»„ä»¶ï¼Œä½ç½®ï¼š <strong><code>src/components/UploadExcel</code></strong></p>
</blockquote>
<p><strong>æ³¨å†Œå…¨å±€çš„å¯¼å…¥excelç»„ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> PageTools <span class="keyword">from</span> <span class="string">'./PageTools'</span></span><br><span class="line"><span class="keyword">import</span> UploadExcel <span class="keyword">from</span> <span class="string">'./UploadExcel'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue</span>)</span> {</span><br><span class="line">    Vue.component(<span class="string">'PageTools'</span>, PageTools) <span class="comment">// æ³¨å†Œå·¥å…·æ ç»„ä»¶</span></span><br><span class="line">    Vue.component(<span class="string">'UploadExcel'</span>, UploadExcel) <span class="comment">// æ³¨å†Œå¯¼å…¥excelç»„ä»¶</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¿®æ”¹æ ·å¼å’Œå¸ƒå±€</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;div class="upload-excel"&gt;</span><br><span class="line">    &lt;div class="btn-upload"&gt;</span><br><span class="line">      &lt;el-button :loading="loading" size="mini" type="primary" @click="handleUpload"&gt;</span><br><span class="line">        ç‚¹å‡»ä¸Šä¼ </span><br><span class="line">      &lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;input ref="excel-upload-input" class="excel-upload-input" type="file" accept=".xlsx, .xls" @change="handleClick"&gt;</span><br><span class="line">    &lt;div class="drop" @drop="handleDrop" @dragover="handleDragover" @dragenter="handleDragover"&gt;</span><br><span class="line">      &lt;i class="el-icon-upload" /&gt;</span><br><span class="line">      &lt;span&gt;å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped lang="scss"&gt;</span><br><span class="line">.upload-excel {</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">   margin-top: 100px;</span><br><span class="line">   .excel-upload-input{</span><br><span class="line">       display: none;</span><br><span class="line">        z-index: -9999;</span><br><span class="line">     }</span><br><span class="line">   .btn-upload , .drop{</span><br><span class="line">      border: 1px dashed #bbb;</span><br><span class="line">      width: 350px;</span><br><span class="line">      height: 160px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      line-height: 160px;</span><br><span class="line">   }</span><br><span class="line">   .drop{</span><br><span class="line">       line-height: 80px;</span><br><span class="line">       color: #bbb;</span><br><span class="line">      i {</span><br><span class="line">        font-size: 60px;</span><br><span class="line">        display: block;</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…</p>
<h2 id="å‘˜å·¥çš„å¯¼å…¥"><a href="#å‘˜å·¥çš„å¯¼å…¥" class="headerlink" title="å‘˜å·¥çš„å¯¼å…¥"></a>å‘˜å·¥çš„å¯¼å…¥</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°å‘˜å·¥çš„å¯¼å…¥</p>
<h3 id="å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±"><a href="#å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±" class="headerlink" title="å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±"></a>å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±</h3><p><strong>æ–°å»ºä¸€ä¸ªå…¬å…±çš„å¯¼å…¥é¡µé¢ï¼ŒæŒ‚è½½è·¯ç”±</strong> <strong><code>src/router/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/import'</span>,</span><br><span class="line">    <span class="attr">component</span>: Layout,</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span>, <span class="comment">// éšè—åœ¨å·¦ä¾§èœå•ä¸­</span></span><br><span class="line">    <span class="attr">children</span>: [{</span><br><span class="line">      <span class="attr">path</span>: <span class="string">''</span>, <span class="comment">// äºŒçº§è·¯ç”±pathä»€ä¹ˆéƒ½ä¸å†™ è¡¨ç¤ºäºŒçº§é»˜è®¤è·¯ç”±</span></span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/import'</span>)</span><br><span class="line">    }]</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ›å»ºimportè·¯ç”±ç»„ä»¶</strong> <strong><code>src/views/import/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- å…¬å…±å¯¼å…¥ç»„ä»¶ --&gt; </span><br><span class="line">  &lt;upload-excel :on-success="success" /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£"><a href="#åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£" class="headerlink" title="åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£"></a>åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£</h3><blockquote>
<p>å°è£…å¯¼å…¥å‘˜å·¥çš„apiæ¥å£  </p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  å°è£…ä¸€ä¸ªå¯¼å…¥å‘˜å·¥çš„æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">importEmployee</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user/batch'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®ç°excelå¯¼å…¥"><a href="#å®ç°excelå¯¼å…¥" class="headerlink" title="å®ç°excelå¯¼å…¥"></a>å®ç°excelå¯¼å…¥</h3><p><strong>è·å–å¯¼å…¥çš„excelæ•°æ®, å¯¼å…¥excelæ¥å£</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span>  <span class="function"><span class="title">success</span>(<span class="params">{ header, results }</span>)</span> {</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯å¯¼å…¥å‘˜å·¥</span></span><br><span class="line">    <span class="keyword">const</span> userRelations = {</span><br><span class="line">      <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">      <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">      <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">      <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">      <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">   results.forEach(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">const</span> userInfo = {}</span><br><span class="line">      <span class="built_in">Object</span>.keys(item).forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">        userInfo[userRelations[key]] = item[key]</span><br><span class="line">      })</span><br><span class="line">     arr.push(userInfo) </span><br><span class="line">    })</span><br><span class="line">    <span class="keyword">await</span> importEmployee(arr) <span class="comment">// è°ƒç”¨å¯¼å…¥æ¥å£</span></span><br><span class="line">    <span class="built_in">this</span>.$router.back()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸ºäº†è®©è¿™ä¸ªé¡µé¢å¯ä»¥æœåŠ¡æ›´å¤šçš„å¯¼å…¥åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸­ç”¨å‚æ•°æ¥åˆ¤æ–­ï¼Œæ˜¯å¦æ˜¯å¯¼å…¥å‘˜å·¥</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="keyword">return</span> {</span><br><span class="line">     <span class="attr">type</span>: <span class="built_in">this</span>.$route.query.type</span><br><span class="line">   }</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p>å½“excelä¸­æœ‰æ—¥æœŸæ ¼å¼çš„æ—¶å€™ï¼Œå®é™…è½¬åŒ–çš„å€¼ä¸ºä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•è¿›è¡Œè½¬åŒ–</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">formatDate</span>(<span class="params">numb, format</span>)</span> {</span><br><span class="line">  <span class="keyword">const</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>((numb - <span class="number">1</span>) * <span class="number">24</span> * <span class="number">3600000</span> + <span class="number">1</span>)</span><br><span class="line">  time.setYear(time.getFullYear() - <span class="number">70</span>)</span><br><span class="line">  <span class="keyword">const</span> year = time.getFullYear() + <span class="string">''</span></span><br><span class="line">  <span class="keyword">const</span> month = time.getMonth() + <span class="number">1</span> + <span class="string">''</span></span><br><span class="line">  <span class="keyword">const</span> date = time.getDate() - <span class="number">1</span> + <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span> (format &amp;&amp; format.length === <span class="number">1</span>) {</span><br><span class="line">    <span class="keyword">return</span> year + format + month + format + date</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> year + (month &lt; <span class="number">10</span> ? <span class="string">'0'</span> + month : month) + (date &lt; <span class="number">10</span> ? <span class="string">'0'</span> + date : date)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>éœ€è¦æ³¨æ„ï¼Œ**<code>å¯¼å…¥çš„æ‰‹æœºå·ä¸èƒ½å’Œä¹‹å‰çš„å­˜åœ¨çš„æ‰‹æœºå·é‡å¤</code>**</p>
</blockquote>
<p><strong>é€»è¾‘åˆ¤æ–­</strong> </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span>  <span class="function"><span class="title">success</span>(<span class="params">{ header, results }</span>)</span> {</span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">this</span>.type === <span class="string">'user'</span>) {</span><br><span class="line">       <span class="keyword">const</span> userRelations = {</span><br><span class="line">         <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">         <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">         <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">         <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">         <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span></span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">const</span> arr = []</span><br><span class="line">       <span class="comment">// éå†æ‰€æœ‰çš„æ•°ç»„</span></span><br><span class="line">       results.forEach(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">       <span class="comment">// éœ€è¦å°†æ¯ä¸€ä¸ªæ¡æ•°æ®é‡Œé¢çš„ä¸­æ–‡éƒ½æ¢æˆè‹±æ–‡</span></span><br><span class="line">         <span class="keyword">const</span> userInfo = {}</span><br><span class="line">         <span class="built_in">Object</span>.keys(item).forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">         <span class="comment">// keyæ˜¯å½“å‰çš„ä¸­æ–‡å æ‰¾åˆ°å¯¹åº”çš„è‹±æ–‡å</span></span><br><span class="line">           <span class="keyword">if</span> (userRelations[key] === <span class="string">'timeOfEntry'</span> || userRelations[key] === <span class="string">'correctionTime'</span>) {</span><br><span class="line">             userInfo[userRelations[key]] = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">this</span>.formatDate(item[key], <span class="string">'/'</span>)) <span class="comment">// åªæœ‰è¿™æ ·, æ‰èƒ½å…¥åº“</span></span><br><span class="line">             <span class="keyword">return</span></span><br><span class="line">           }</span><br><span class="line">           userInfo[userRelations[key]] = item[key]</span><br><span class="line">         })</span><br><span class="line">         <span class="comment">// æœ€ç»ˆuserInfoå˜æˆäº†å…¨æ˜¯è‹±æ–‡</span></span><br><span class="line">         arr.push(userInfo)</span><br><span class="line">       })</span><br><span class="line">       <span class="keyword">await</span> importEmployee(arr)</span><br><span class="line">       <span class="built_in">this</span>.$message.success(<span class="string">'å¯¼å…¥æˆåŠŸ'</span>)</span><br><span class="line">     }</span><br><span class="line">     <span class="built_in">this</span>.$router.back() <span class="comment">// å›åˆ°ä¸Šä¸€é¡µ</span></span><br><span class="line">   },</span><br><span class="line">   <span class="function"><span class="title">formatDate</span>(<span class="params">numb, format</span>)</span> {</span><br><span class="line">     <span class="keyword">const</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>((numb - <span class="number">1</span>) * <span class="number">24</span> * <span class="number">3600000</span> + <span class="number">1</span>)</span><br><span class="line">     time.setYear(time.getFullYear() - <span class="number">70</span>)</span><br><span class="line">     <span class="keyword">const</span> year = time.getFullYear() + <span class="string">''</span></span><br><span class="line">     <span class="keyword">const</span> month = time.getMonth() + <span class="number">1</span> + <span class="string">''</span></span><br><span class="line">     <span class="keyword">const</span> date = time.getDate() - <span class="number">1</span> + <span class="string">''</span></span><br><span class="line">     <span class="keyword">if</span> (format &amp;&amp; format.length === <span class="number">1</span>) {</span><br><span class="line">       <span class="keyword">return</span> year + format + month + format + date</span><br><span class="line">     }</span><br><span class="line">     <span class="keyword">return</span> year + (month &lt; <span class="number">10</span> ? <span class="string">'0'</span> + month : month) + (date &lt; <span class="number">10</span> ? <span class="string">'0'</span> + date : date)</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å‘˜å·¥é¡µé¢è·³è½¬</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-button type="warning" size="small" @click="$router.push('/import?type=user')"&gt;å¯¼å…¥&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>**<code>ç›®æ ‡</code>**ï¼š å®ç°å‘˜å·¥çš„å¯¼å…¥</p>
<h2 id="å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½"><a href="#å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½" class="headerlink" title="å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½"></a>å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½</h2><p><strong>ç›®æ ‡</strong>ï¼š å®ç°å°†å‘˜å·¥æ•°æ®å¯¼å‡ºåŠŸèƒ½</p>
<blockquote>
<p>æ—¥å¸¸ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°excelå¯¼å‡ºåŠŸèƒ½ï¼Œ æ€ä¹ˆä½¿ç”¨å‘¢</p>
</blockquote>
<p>Excel çš„å¯¼å…¥å¯¼å‡ºéƒ½æ˜¯ä¾èµ–äº<a href="https://github.com/SheetJS/js-xlsx">js-xlsx</a>æ¥å®ç°çš„ã€‚</p>
<p>åœ¨ <code>js-xlsx</code>çš„åŸºç¡€ä¸Šåˆå°è£…äº†<a href="https://github.com/PanJiaChen/vue-element-admin/blob/master/src/vendor/Export2Excel.js">Export2Excel.js</a>æ¥æ–¹ä¾¿å¯¼å‡ºæ•°æ®ã€‚</p>
<h3 id="å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½"><a href="#å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½" class="headerlink" title="å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½"></a>å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½</h3><p>ç”±äº <code>Export2Excel</code>ä¸ä»…ä¾èµ–<code>js-xlsx</code>è¿˜ä¾èµ–<code>file-saver</code>å’Œ<code>script-loader</code>ã€‚</p>
<p>æ‰€ä»¥ä½ å…ˆéœ€è¦å®‰è£…å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm install xlsx file-saver -S</span><br><span class="line">npm install script-loader -S -D</span><br></pre></td></tr></tbody></table></figure>

<p>ç”±äº<code>js-xlsx</code>ä½“ç§¯è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œå¯¼å‡ºåŠŸèƒ½ä¹Ÿä¸æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™å»ºè®®ä½¿ç”¨æ‡’åŠ è½½ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">'@/vendor/Export2Excel'</span>).then(<span class="function"><span class="params">excel</span> =&gt;</span> {</span><br><span class="line">  excel.export_json_to_excel({</span><br><span class="line">    <span class="attr">header</span>: tHeader, <span class="comment">//è¡¨å¤´ å¿…å¡«</span></span><br><span class="line">    data, <span class="comment">//å…·ä½“æ•°æ® å¿…å¡«</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">'excel-list'</span>, <span class="comment">//éå¿…å¡«</span></span><br><span class="line">    <span class="attr">autoWidth</span>: <span class="literal">true</span>, <span class="comment">//éå¿…å¡«</span></span><br><span class="line">    <span class="attr">bookType</span>: <span class="string">'xlsx'</span> <span class="comment">//éå¿…å¡«</span></span><br><span class="line">  })</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»"><a href="#excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»" class="headerlink" title="excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»"></a>excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»</h3><blockquote>
<p>vue-element-adminæä¾›äº†å¯¼å‡ºçš„åŠŸèƒ½æ¨¡å—ï¼Œåœ¨è¯¾ç¨‹èµ„æº/excelå¯¼å‡ºç›®å½•ä¸‹ï¼Œæ”¾ç½®åˆ°srcç›®å½•ä¸‹</p>
</blockquote>
<p><strong>å‚æ•°</strong></p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
<th>ç±»å‹</th>
<th>å¯é€‰å€¼</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>header</td>
<td>å¯¼å‡ºæ•°æ®çš„è¡¨å¤´</td>
<td>Array</td>
<td>/</td>
<td>[]</td>
</tr>
<tr>
<td>data</td>
<td>å¯¼å‡ºçš„å…·ä½“æ•°æ®</td>
<td>Array</td>
<td>/</td>
<td>[[]]</td>
</tr>
<tr>
<td>filename</td>
<td>å¯¼å‡ºæ–‡ä»¶å</td>
<td>String</td>
<td>/</td>
<td>excel-list</td>
</tr>
<tr>
<td>autoWidth</td>
<td>å•å…ƒæ ¼æ˜¯å¦è¦è‡ªé€‚åº”å®½åº¦</td>
<td>Boolean</td>
<td>true / false</td>
<td>true</td>
</tr>
<tr>
<td>bookType</td>
<td>å¯¼å‡ºæ–‡ä»¶ç±»å‹</td>
<td>String</td>
<td>xlsx, csv, txt, <a href="https://github.com/SheetJS/js-xlsx#supported-output-formats">more</a></td>
<td>xlsx</td>
</tr>
</tbody></table>
<h3 id="excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„"><a href="#excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„" class="headerlink" title="excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„"></a>excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„</h3><blockquote>
<p>æˆ‘ä»¬æœ€é‡è¦çš„ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æŠŠè¡¨å¤´å’Œæ•°æ®è¿›è¡Œç›¸åº”çš„å¯¹åº”</p>
</blockquote>
<p>å› ä¸ºæ•°æ®ä¸­çš„keyæ˜¯è‹±æ–‡ï¼Œæƒ³è¦å¯¼å‡ºçš„è¡¨å¤´æ˜¯ä¸­æ–‡çš„è¯ï¼Œéœ€è¦å°†ä¸­æ–‡å’Œè‹±æ–‡åšå¯¹åº”</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> headers = {</span><br><span class="line">     <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">     <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">     <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">     <span class="string">'è˜ç”¨å½¢å¼'</span>: <span class="string">'formOfEmployment'</span>,</span><br><span class="line">     <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">     <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span>,</span><br><span class="line">     <span class="string">'éƒ¨é—¨'</span>: <span class="string">'departmentName'</span></span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œ<strong>å®Œæˆå¯¼å‡ºä»£ç </strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºexcelæ•°æ®</span></span><br><span class="line"><span class="function"><span class="title">exportData</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="comment">//  åšæ“ä½œ</span></span><br><span class="line">  <span class="comment">// è¡¨å¤´å¯¹åº”å…³ç³»</span></span><br><span class="line">  <span class="keyword">const</span> headers = {</span><br><span class="line">    <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">    <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">    <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">    <span class="string">'è˜ç”¨å½¢å¼'</span>: <span class="string">'formOfEmployment'</span>,</span><br><span class="line">    <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">    <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span>,</span><br><span class="line">    <span class="string">'éƒ¨é—¨'</span>: <span class="string">'departmentName'</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// æ‡’åŠ è½½</span></span><br><span class="line">  <span class="keyword">import</span>(<span class="string">'@/vendor/Export2Excel'</span>).then(<span class="keyword">async</span> excel =&gt; {</span><br><span class="line">    <span class="keyword">const</span> { rows } = <span class="keyword">await</span> getEmployeeList({ <span class="attr">page</span>: <span class="number">1</span>, <span class="attr">size</span>: <span class="built_in">this</span>.page.total })</span><br><span class="line">    <span class="keyword">const</span> data = <span class="built_in">this</span>.formatJson(headers, rows)</span><br><span class="line"></span><br><span class="line">    excel.export_json_to_excel({</span><br><span class="line">      <span class="attr">header</span>: <span class="built_in">Object</span>.keys(headers),</span><br><span class="line">      data,</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">'å‘˜å·¥ä¿¡æ¯è¡¨'</span>,</span><br><span class="line">      <span class="attr">autoWidth</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">bookType</span>: <span class="string">'xlsx'</span></span><br><span class="line"></span><br><span class="line">    })</span><br><span class="line">    <span class="comment">// è·å–æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// excel.export_json_to_excel({</span></span><br><span class="line">    <span class="comment">//   header: ['å§“å', 'è–ªèµ„'],</span></span><br><span class="line">    <span class="comment">//   data: [['å¼ ä¸‰', 12000], ['æå››', 5000]],</span></span><br><span class="line">    <span class="comment">//   filename: 'å‘˜å·¥è–ªèµ„è¡¨',</span></span><br><span class="line">    <span class="comment">//   autoWidth: true,</span></span><br><span class="line">    <span class="comment">//   bookType: 'csv'</span></span><br><span class="line">    <span class="comment">// })</span></span><br><span class="line">  })</span><br><span class="line">},</span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•è´Ÿè´£å°†æ•°ç»„è½¬åŒ–æˆäºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="title">formatJson</span>(<span class="params">headers, rows</span>)</span> {</span><br><span class="line">  <span class="comment">// é¦–å…ˆéå†æ•°ç»„</span></span><br><span class="line">  <span class="comment">// [{ username: 'å¼ ä¸‰'},{},{}]  =&gt; [[â€™å¼ ä¸‰'],[],[]]</span></span><br><span class="line">  <span class="keyword">return</span> rows.map(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(headers).map(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">if</span> (headers[key] === <span class="string">'timeOfEntry'</span> || headers[key] === <span class="string">'correctionTime'</span>) {</span><br><span class="line">        <span class="keyword">return</span> formatDate(item[headers[key]]) <span class="comment">// è¿”å›æ ¼å¼åŒ–ä¹‹å‰çš„æ—¶é—´</span></span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> (headers[key] === <span class="string">'formOfEmployment'</span>) {</span><br><span class="line">        <span class="keyword">var</span> en = EmployeeEnum.hireType.find(<span class="function"><span class="params">obj</span> =&gt;</span> obj.id === item[headers[key]])</span><br><span class="line">        <span class="keyword">return</span> en ? en.value : <span class="string">'æœªçŸ¥'</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> item[headers[key]]</span><br><span class="line">    }) <span class="comment">// =&gt; ["å¼ ä¸‰", "13811"ï¼Œ"2018","1", "2018", "10002"]</span></span><br><span class="line">  })</span><br><span class="line">  <span class="comment">// return data</span></span><br><span class="line">  <span class="comment">// return rows.map(item =&gt; {</span></span><br><span class="line">  <span class="comment">//   // itemæ˜¯å¯¹è±¡  =&gt; è½¬åŒ–æˆåªæœ‰å€¼çš„æ•°ç»„ =&gt; æ•°ç»„å€¼çš„é¡ºåºä¾èµ–headers  {username: 'å¼ ä¸‰'  }</span></span><br><span class="line">  <span class="comment">//   // Object.keys(headers)  =&gt; ["å§“å", "æ‰‹æœºå·",...]</span></span><br><span class="line">  <span class="comment">//   return Object.keys(headers).map(key =&gt; {</span></span><br><span class="line">  <span class="comment">//     return item[headers[key]]</span></span><br><span class="line">  <span class="comment">//   }) // /  å¾—åˆ° ['å¼ ä¸‰'ï¼Œâ€™129â€˜ï¼Œâ€™ddâ€˜,'dd']</span></span><br><span class="line">  <span class="comment">// })</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†"><a href="#å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†" class="headerlink" title="å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†"></a>å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†</h3><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">formatJson</span>(<span class="params">headers, rows</span>)</span> {</span><br><span class="line">  <span class="keyword">return</span> rows.map(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">    <span class="comment">// itemæ˜¯ä¸€ä¸ªå¯¹è±¡  { mobile: 132111,username: 'å¼ ä¸‰'  }</span></span><br><span class="line">    <span class="comment">// ["æ‰‹æœºå·", "å§“å", "å…¥èŒæ—¥æœŸ" ã€‚ã€‚]</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(headers).map(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">      <span class="comment">// éœ€è¦åˆ¤æ–­ å­—æ®µ</span></span><br><span class="line">      <span class="keyword">if</span> (headers[key] === <span class="string">'timeOfEntry'</span> || headers[key] === <span class="string">'correctionTime'</span>) {</span><br><span class="line">        <span class="comment">// æ ¼å¼åŒ–æ—¥æœŸ</span></span><br><span class="line">        <span class="keyword">return</span> formatDate(item[headers[key]])</span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> (headers[key] === <span class="string">'formOfEmployment'</span>) {</span><br><span class="line">        <span class="keyword">const</span> obj = EmployeeEnum.hireType.find(<span class="function"><span class="params">obj</span> =&gt;</span> obj.id === item[headers[key]])</span><br><span class="line">        <span class="keyword">return</span> obj ? obj.value : <span class="string">'æœªçŸ¥'</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> item[headers[key]]</span><br><span class="line">    })</span><br><span class="line">    <span class="comment">// ["132", 'å¼ ä¸‰â€™ï¼Œ â€˜â€™ï¼Œâ€˜â€™ï¼Œâ€˜â€™d]</span></span><br><span class="line">  })</span><br><span class="line">  <span class="comment">// return rows.map(item =&gt; Object.keys(headers).map(key =&gt; item[headers[key]]))</span></span><br><span class="line">  <span class="comment">// éœ€è¦å¤„ç†æ—¶é—´æ ¼å¼é—®é¢˜</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="æ‰©å±•-å¤æ‚è¡¨å¤´çš„å¯¼å‡º"><a href="#æ‰©å±•-å¤æ‚è¡¨å¤´çš„å¯¼å‡º" class="headerlink" title="æ‰©å±•  å¤æ‚è¡¨å¤´çš„å¯¼å‡º"></a><strong><code>æ‰©å±•</code></strong>  å¤æ‚è¡¨å¤´çš„å¯¼å‡º</h3><blockquote>
<p>å½“éœ€è¦å¯¼å‡ºå¤æ‚è¡¨å¤´çš„æ—¶å€™ï¼Œvue-element-adminåŒæ ·æ”¯æŒè¯¥ç±»æ“ä½œ</p>
</blockquote>
<p><strong>vue-element-admin</strong> æä¾›çš„å¯¼å‡ºæ–¹æ³•ä¸­æœ‰ <strong>multiHeader</strong>å’Œ<strong>merges</strong> çš„å‚æ•°</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
<th>ç±»å‹</th>
<th>å¯é€‰å€¼</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>multiHeader</td>
<td>å¤æ‚è¡¨å¤´çš„éƒ¨åˆ†</td>
<td>Array</td>
<td>/</td>
<td>[[]]</td>
</tr>
<tr>
<td>merges</td>
<td>éœ€è¦åˆå¹¶çš„éƒ¨åˆ†</td>
<td>Array</td>
<td>/</td>
<td>[]</td>
</tr>
</tbody></table>
<p>multiHeaderé‡Œé¢æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œé‡Œé¢çš„ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€è¡Œè¡¨å¤´ï¼Œå‡è®¾ä½ æƒ³å¾—åˆ°ä¸€ä¸ªå¦‚å›¾çš„ç»“æ„</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201014152302636.png" alt="image-20201014152302636"></p>
<p>mutiHeaderåº”è¯¥è¿™æ ·å®šä¹‰</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> multiHeader = [[<span class="string">'å§“å'</span>, <span class="string">'ä¸»è¦ä¿¡æ¯'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">'éƒ¨é—¨'</span>]]</span><br></pre></td></tr></tbody></table></figure>

<p>multiHeaderä¸­çš„ä¸€è¡Œè¡¨å¤´ä¸­çš„å­—æ®µçš„ä¸ªæ•°éœ€è¦å’ŒçœŸæ­£çš„åˆ—æ•°ç›¸ç­‰ï¼Œå‡è®¾æƒ³è¦è·¨åˆ—ï¼Œå¤šä½™çš„ç©ºé—´éœ€è¦å®šä¹‰æˆç©ºä¸²</p>
<p>å®ƒä¸»è¦å¯¹åº”çš„æ˜¯æ ‡å‡†çš„è¡¨å¤´</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> header = [<span class="string">'å§“å'</span>, <span class="string">'æ‰‹æœºå·'</span>, <span class="string">'å…¥èŒæ—¥æœŸ'</span>, <span class="string">'è˜ç”¨å½¢å¼'</span>, <span class="string">'è½¬æ­£æ—¥æœŸ'</span>, <span class="string">'å·¥å·'</span>, <span class="string">'éƒ¨é—¨'</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœï¼Œæˆ‘ä»¬è¦å®ç°å…¶åˆå¹¶çš„æ•ˆæœï¼Œ éœ€è¦è®¾å®šmergesé€‰é¡¹</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> merges = [<span class="string">'A1:A2'</span>, <span class="string">'B1:F1'</span>, <span class="string">'G1:G2'</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>mergesçš„é¡ºåºæ˜¯æ²¡å…³ç³»çš„ï¼Œåªè¦é…ç½®è¿™ä¸¤ä¸ªå±æ€§ï¼Œå°±å¯ä»¥å¯¼å‡ºå¤æ‚è¡¨å¤´çš„exceläº†</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">exportData</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> headers = {</span><br><span class="line">      <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">      <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">      <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">      <span class="string">'è˜ç”¨å½¢å¼'</span>: <span class="string">'formOfEmployment'</span>,</span><br><span class="line">      <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">      <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span>,</span><br><span class="line">      <span class="string">'éƒ¨é—¨'</span>: <span class="string">'departmentName'</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¯¼å‡ºexcel</span></span><br><span class="line">    <span class="keyword">import</span>(<span class="string">'@/vendor/Export2Excel'</span>).then(<span class="keyword">async</span> excel =&gt; {</span><br><span class="line">      <span class="comment">//  excelæ˜¯å¼•å…¥æ–‡ä»¶çš„å¯¼å‡ºå¯¹è±¡</span></span><br><span class="line">      <span class="comment">// å¯¼å‡º  headerä»å“ªé‡Œæ¥</span></span><br><span class="line">      <span class="comment">// dataä»å“ªé‡Œæ¥</span></span><br><span class="line">      <span class="comment">// ç°åœ¨æ²¡æœ‰ä¸€ä¸ªæ¥å£è·å–æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line">      <span class="comment">// è·å–å‘˜å·¥çš„æ¥å£ é¡µç  æ¯é¡µæ¡æ•°    100   1 10000</span></span><br><span class="line">      <span class="keyword">const</span> { rows } = <span class="keyword">await</span> getEmployeeList({ <span class="attr">page</span>: <span class="number">1</span>, <span class="attr">size</span>: <span class="built_in">this</span>.page.total })</span><br><span class="line">      <span class="keyword">const</span> data = <span class="built_in">this</span>.formatJson(headers, rows) <span class="comment">// è¿”å›çš„dataå°±æ˜¯ è¦å¯¼å‡ºçš„ç»“æ„</span></span><br><span class="line">      <span class="keyword">const</span> multiHeader = [[<span class="string">'å§“å'</span>, <span class="string">'ä¸»è¦ä¿¡æ¯'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">'éƒ¨é—¨'</span>]]</span><br><span class="line">      <span class="keyword">const</span> merges = [<span class="string">'A1:A2'</span>, <span class="string">'B1:F1'</span>, <span class="string">'G1:G2'</span>]</span><br><span class="line">      excel.export_json_to_excel({</span><br><span class="line">        <span class="attr">header</span>: <span class="built_in">Object</span>.keys(headers),</span><br><span class="line">        data,</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">'å‘˜å·¥èµ„æ–™è¡¨'</span>,</span><br><span class="line">        multiHeader, <span class="comment">// å¤æ‚è¡¨å¤´</span></span><br><span class="line">        merges <span class="comment">// åˆå¹¶é€‰é¡¹</span></span><br><span class="line">      })</span><br><span class="line"></span><br><span class="line">      <span class="comment">// excel.export_json_to_excel({</span></span><br><span class="line">      <span class="comment">//   header: ['å§“å', 'å·¥èµ„'],</span></span><br><span class="line">      <span class="comment">//   data: [['å¼ ä¸‰', 3000], ['æå››', 5000]],</span></span><br><span class="line">      <span class="comment">//   filename: 'å‘˜å·¥å·¥èµ„è¡¨'</span></span><br><span class="line">      <span class="comment">// })</span></span><br><span class="line">      <span class="comment">// [{ username: 'å¼ ä¸‰',mobile: 13112345678 }]  =&gt; [[]]</span></span><br><span class="line">      <span class="comment">// è¦è½¬åŒ– æ•°æ®ç»“æ„ è¿˜è¦å’Œè¡¨å¤´çš„é¡ºåºå¯¹åº”ä¸Š</span></span><br><span class="line">      <span class="comment">// è¦æ±‚è½¬å‡ºçš„æ ‡é¢˜æ˜¯ä¸­æ–‡</span></span><br><span class="line">    })</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// å°†è¡¨å¤´æ•°æ®å’Œæ•°æ®è¿›è¡Œå¯¹åº”</span></span><br><span class="line">  <span class="comment">// [{}]  =&gt;   [[]]</span></span><br><span class="line">  <span class="function"><span class="title">formatJson</span>(<span class="params">headers, rows</span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> rows.map(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">      <span class="comment">// itemæ˜¯ä¸€ä¸ªå¯¹è±¡  { mobile: 132111,username: 'å¼ ä¸‰'  }</span></span><br><span class="line">      <span class="comment">// ["æ‰‹æœºå·", "å§“å", "å…¥èŒæ—¥æœŸ" ã€‚ã€‚]</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Object</span>.keys(headers).map(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">        <span class="comment">// éœ€è¦åˆ¤æ–­ å­—æ®µ</span></span><br><span class="line">        <span class="keyword">if</span> (headers[key] === <span class="string">'timeOfEntry'</span> || headers[key] === <span class="string">'correctionTime'</span>) {</span><br><span class="line">          <span class="comment">// æ ¼å¼åŒ–æ—¥æœŸ</span></span><br><span class="line">          <span class="keyword">return</span> formatDate(item[headers[key]])</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (headers[key] === <span class="string">'formOfEmployment'</span>) {</span><br><span class="line">          <span class="keyword">const</span> obj = EmployeeEnum.hireType.find(<span class="function"><span class="params">obj</span> =&gt;</span> obj.id === item[headers[key]])</span><br><span class="line">          <span class="keyword">return</span> obj ? obj.value : <span class="string">'æœªçŸ¥'</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> item[headers[key]]</span><br><span class="line">      })</span><br><span class="line">      <span class="comment">// ["132", 'å¼ ä¸‰â€™ï¼Œ â€˜â€™ï¼Œâ€˜â€™ï¼Œâ€˜â€™d]</span></span><br><span class="line">    })</span><br><span class="line">    <span class="comment">// return rows.map(item =&gt; Object.keys(headers).map(key =&gt; item[headers[key]]))</span></span><br><span class="line">    <span class="comment">// éœ€è¦å¤„ç†æ—¶é—´æ ¼å¼é—®é¢˜</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**å®ç°å°†å‘˜å·¥æ•°æ®å¯¼å‡ºåŠŸèƒ½</p>
<h2 id="å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€"><a href="#å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€" class="headerlink" title="å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€"></a>å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€</h2><p>**<code>ç›®æ ‡</code>**ï¼šåˆ›å»ºå‘˜å·¥è¯¦æƒ…çš„ä¸»è¦å¸ƒå±€é¡µé¢å’ŒåŸºæœ¬å¸ƒå±€</p>
<h3 id="è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±"><a href="#è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±" class="headerlink" title="è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±"></a>è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±</h3><p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200726130305221.png" alt="image-20200726130305221"></p>
<p><strong>å»ºç«‹è¯¦æƒ…é¡µè·¯ç”±</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'detail/:id'</span>, <span class="comment">// queryä¼ å‚ åŠ¨æ€è·¯ç”±ä¼ å‚</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/employees/detail'</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span>, <span class="comment">// ä¸åœ¨å·¦ä¾§èœå•æ˜¾ç¤º</span></span><br><span class="line">    <span class="attr">meta</span>: {</span><br><span class="line">      <span class="attr">title</span>: <span class="string">'å‘˜å·¥è¯¦æƒ…'</span> <span class="comment">// æ ‡è®°å½“å‰è·¯ç”±è§„åˆ™çš„ä¸­æ–‡åç§° åç»­åœ¨åšå·¦ä¾§èœå•æ—¶ ä½¿ç”¨</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å»ºç«‹åŸºæœ¬æ¶æ„</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;el-card&gt;</span><br><span class="line">        &lt;el-tabs&gt;</span><br><span class="line">          &lt;el-tab-pane label="ç™»å½•è´¦æˆ·è®¾ç½®"&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- æ”¾ç½®è¡¨å• --&gt;</span><br><span class="line">            &lt;el-form label-width="120px" style="margin-left: 120px; margin-top:30px"&gt;</span><br><span class="line">              &lt;el-form-item label="å§“å:"&gt;</span><br><span class="line">                &lt;el-input style="width:300px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label="å¯†ç :"&gt;</span><br><span class="line">                &lt;el-input style="width:300px" type="password" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-button type="primary"&gt;æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">          &lt;/el-tab-pane&gt;</span><br><span class="line">          &lt;el-tab-pane label="ä¸ªäººè¯¦æƒ…" /&gt;</span><br><span class="line">          &lt;el-tab-pane label="å²—ä½ä¿¡æ¯" /&gt;</span><br><span class="line">        &lt;/el-tabs&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ—è¡¨è·³è½¬åˆ°è¯¦æƒ…</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-button type="text" size="small" @click="$router.push(`/employees/detail/${obj.row.id}`)"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£"><a href="#è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£" class="headerlink" title="è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£"></a>è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£</h3><p><strong>åŠ è½½ä¸ªäººåŸºæœ¬ä¿¡æ¯</strong> &gt; è¯¥æ¥å£å·²ç»åœ¨ä¹‹å‰æä¾›è¿‡äº† <strong><code>src/api/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  è·å–æŸä¸ªç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserDetailById</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¿å­˜ä¸ªäººåŸºæœ¬ä¿¡æ¯</strong>  <strong><code>src/api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ä¿å­˜å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">saveUserDetailById</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">${data.id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹"><a href="#å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹" class="headerlink" title="å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹"></a>å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹</h3><p><strong><code>æ³¨æ„</code><strong>ï¼šè¿™é‡Œæœ‰ä¸ªç¼ºé™·ï¼Œæ¥å£ä¸­è¯»å–çš„æ˜¯åç«¯çš„å¯†æ–‡ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½è§£å¯†ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ²¡æœ‰ä»»ä½•ä¿®æ”¹å°±ä¿å­˜æ—¶ï¼Œä¼šæ ¡éªŒå¤±è´¥ï¼Œå› ä¸ºå¯†æ–‡è¶…è¿‡äº†è§„å®šçš„12ä½é•¿åº¦ï¼Œä¸ºäº†çœŸçš„ä¿®æ”¹å¯†ç ï¼Œæˆ‘ä»¬è®¾å®šäº†ä¸€ä¸ªä¸´æ—¶çš„å­—æ®µ <strong>password2</strong>ï¼Œç”¨å®ƒæ¥å­˜å‚¨æˆ‘ä»¬çš„ä¿®æ”¹å€¼ï¼Œæœ€åä¿å­˜çš„æ—¶å€™ï¼ŒæŠŠ</strong>password2</strong>ä¼ ç»™<strong>password</strong></p>
<p><strong>ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹</strong>  <strong><code>src/views/employees/detail.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"><span class="keyword">import</span> { saveUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">userId</span>: <span class="built_in">this</span>.$route.params.id, <span class="comment">// è¿™æ ·å¯ä»¥åé¢ç›´æ¥é€šè¿‡ this.userIdè¿›è¡Œè·å–æ•°æ®</span></span><br><span class="line">      <span class="attr">userInfo</span>: {</span><br><span class="line">        <span class="comment">//   ä¸“é—¨å­˜æ”¾åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">        <span class="attr">username</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">password2</span>: <span class="string">''</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">rules</span>: {</span><br><span class="line">        <span class="attr">username</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å§“åä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">        <span class="attr">password2</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> },</span><br><span class="line">          { <span class="attr">min</span>: <span class="number">6</span>, <span class="attr">max</span>: <span class="number">9</span>, <span class="attr">message</span>: <span class="string">'å¯†ç é•¿åº¦6-9ä½'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }]</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getUserDetailById()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getUserDetailById</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.userInfo = <span class="keyword">await</span> getUserDetailById(<span class="built_in">this</span>.userId)</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">saveUser</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// æ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">await</span> <span class="built_in">this</span>.$refs.userForm.validate()</span><br><span class="line">        <span class="keyword">await</span> saveUserDetailById({ ...this.userInfo, <span class="attr">password</span>: <span class="built_in">this</span>.userInfo.password2 }) <span class="comment">// å°†æ–°å¯†ç çš„å€¼æ›¿æ¢åŸå¯†ç çš„å€¼</span></span><br><span class="line">        <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span><br><span class="line">      } <span class="keyword">catch</span> (error) {</span><br><span class="line">        <span class="built_in">console</span>.log(error)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šè¡¨å•æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®è¡¨å• --&gt;</span><br><span class="line">           &lt;el-form ref="userForm" :model="userInfo" :rules="rules" label-width="120px" style="margin-left: 120px; margin-top:30px"&gt;</span><br><span class="line">             &lt;el-form-item label="å§“å:" prop="username"&gt;</span><br><span class="line">               &lt;el-input v-model="userInfo.username" style="width:300px" /&gt;</span><br><span class="line">             &lt;/el-form-item&gt;</span><br><span class="line">             &lt;el-form-item label="æ–°å¯†ç :" prop="password2"&gt;</span><br><span class="line">               &lt;el-input v-model="userInfo.password2" style="width:300px" type="password" /&gt;</span><br><span class="line">             &lt;/el-form-item&gt;</span><br><span class="line">             &lt;el-form-item&gt;</span><br><span class="line">               &lt;el-button type="primary" @click="saveUser"&gt;æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">             &lt;/el-form-item&gt;</span><br><span class="line">           &lt;/el-form&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…"><a href="#ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…" class="headerlink" title="ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…"></a>ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…</h2><h3 id="å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶"><a href="#å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶" class="headerlink" title="å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶"></a>å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶</h3><blockquote>
<p>æˆ‘ä»¬å°†å‘˜å·¥ä¸ªäººä¿¡æ¯åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œè´¦æˆ·ï¼Œä¸ªäººï¼Œ å²—ä½ï¼Œè¿™ä¸ªå°èŠ‚æˆ‘ä»¬å¯¹ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶è¿›è¡Œå°è£…</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901105323305.png" alt="image-20200901105323305"></p>
<p><strong>å°è£…ä¸ªäººç»„ä»¶</strong>   <strong><code>src/views/employees/components/user-info.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="user-info"&gt;</span><br><span class="line">    &lt;!-- ä¸ªäººä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;el-form label-width="220px"&gt;</span><br><span class="line">      &lt;!-- å·¥å· å…¥èŒæ—¶é—´ --&gt;</span><br><span class="line">      &lt;el-row class="inline-info"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="å·¥å·"&gt;</span><br><span class="line">            &lt;el-input v-model="userInfo.workNumber" class="inputW" /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="å…¥èŒæ—¶é—´"&gt;</span><br><span class="line">            &lt;el-date-picker</span><br><span class="line">              v-model="userInfo.timeOfEntry"</span><br><span class="line">              type="date"</span><br><span class="line">              class="inputW"</span><br><span class="line">              value-format="YYYY-MM-DD"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!-- å§“å éƒ¨é—¨ --&gt;</span><br><span class="line">      &lt;el-row class="inline-info"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="å§“å"&gt;</span><br><span class="line">            &lt;el-input v-model="userInfo.username" class="inputW" /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="éƒ¨é—¨"&gt;</span><br><span class="line">            &lt;el-input v-model="userInfo.departmentName" class="inputW" /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!--æ‰‹æœº è˜ç”¨å½¢å¼  --&gt;</span><br><span class="line">      &lt;el-row class="inline-info"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="æ‰‹æœº"&gt;</span><br><span class="line">            &lt;el-input v-model="userInfo.mobile" /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="è˜ç”¨å½¢å¼"&gt;</span><br><span class="line">            &lt;el-select v-model="userInfo.formOfEmployment" class="inputW"&gt;</span><br><span class="line">              &lt;el-option</span><br><span class="line">                v-for="item in EmployeeEnum.hireType"</span><br><span class="line">                :key="item.id"</span><br><span class="line">                :label="item.value"</span><br><span class="line">                :value="item.id"</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/el-select&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!-- å‘˜å·¥ç…§ç‰‡ --&gt;</span><br><span class="line">      &lt;el-row class="inline-info"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="å‘˜å·¥å¤´åƒ"&gt;</span><br><span class="line">            &lt;!-- æ”¾ç½®ä¸Šä¼ å›¾ç‰‡ --&gt;</span><br><span class="line">           </span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!-- ä¿å­˜ä¸ªäººä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;el-row class="inline-info" type="flex" justify="center"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-button type="primary" @click="saveUser"&gt;ä¿å­˜æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button @click="$router.back()"&gt;è¿”å›&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- åŸºç¡€ä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;el-form label-width="220px"&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;åŸºç¡€ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="æœ€é«˜å­¦å†"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.theHighestDegreeOfEducation" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.highestDegree"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- ä¸ªäººå¤´åƒ --&gt;</span><br><span class="line">        &lt;!-- å‘˜å·¥ç…§ç‰‡ --&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item label="å‘˜å·¥ç…§ç‰‡"&gt;</span><br><span class="line">          &lt;!-- æ”¾ç½®ä¸Šä¼ å›¾ç‰‡ --&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å›½å®¶/åœ°åŒº"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.nationalArea" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.isOverseas"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æŠ¤ç…§å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.passportNo" placeholder="æ­£è§„æŠ¤ç…§æ ¼å¼" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="èº«ä»½è¯å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.idNumber" placeholder="æ­£è§„èº«ä»½è¯æ ¼å¼" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç±è´¯"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.nativePlace" placeholder="ç±è´¯åœ°å€" class="inputW5" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ°‘æ—"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.nation" placeholder="è¯·è¾“å…¥æ°‘æ—" class="inputW2" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å©šå§»çŠ¶å†µ"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.maritalStatus" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.maritaStatus"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç”Ÿæ—¥"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.birthday" placeholder="ç¤ºä¾‹ 0323" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å¹´é¾„"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.age" type="number" class="inputW2" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ˜Ÿåº§"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.constellation" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.constellation"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="è¡€å‹"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.bloodType" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.bloodType"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æˆ·ç±æ‰€åœ¨åœ°"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.domicile" class="inputW5" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ”¿æ²»é¢è²Œ"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.politicalOutlook" class="inputW2" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å…¥å…šæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.timeToJoinTheParty"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            class="inputW"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å­˜æ¡£æœºæ„"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.archivingOrganization" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å­å¥³çŠ¶æ€"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.stateOfChildren" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å­å¥³æœ‰æ— å•†ä¸šé™©"&gt;</span><br><span class="line">          &lt;el-radio-group v-model="formData.doChildrenHaveCommercialInsurance"&gt;</span><br><span class="line">            &lt;el-radio label="1"&gt;æœ‰&lt;/el-radio&gt;</span><br><span class="line">            &lt;el-radio label="2"&gt;æ— &lt;/el-radio&gt;</span><br><span class="line">          &lt;/el-radio-group&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æœ‰æ— è¿æ³•è¿çºªçŠ¶æ€"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.isThereAnyViolationOfLawOrDiscipline" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æœ‰æ— é‡å¤§ç—…å²"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.areThereAnyMajorMedicalHistories" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- é€šè®¯ä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;é€šè®¯ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="QQ"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.qq" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å¾®ä¿¡"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.wechat" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç°å±…ä½åœ°"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.placeOfResidence" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="é€šè®¯åœ°å€"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.postalAddress" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="è”ç³»æ‰‹æœº"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.contactTheMobilePhone" placeholder="11ä½å­—ç¬¦" maxlength="11" class="inputW" @change.native="handlePhone(2)" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ä¸ªäººé‚®ç®±"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.personalMailbox" placeholder="è¯·è¾“å…¥" type="mail" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç´§æ€¥è”ç³»äºº"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.emergencyContact" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç´§æ€¥è”ç³»ç”µè¯"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.emergencyContactNumber" placeholder="11ä½å­—ç¬¦" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- è´¦å·ä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;è´¦å·ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="ç¤¾ä¿ç”µè„‘å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.socialSecurityComputerNumber" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å…¬ç§¯é‡‘è´¦å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.providentFundAccount" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="é“¶è¡Œå¡å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.bankCardNumber" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å¼€æˆ·è¡Œ"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.openingBank" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- æ•™è‚²ä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;æ•™è‚²ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="å­¦å†ç±»å‹"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.educationalType" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.educationType"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ¯•ä¸šå­¦æ ¡"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.graduateSchool" placeholder="è¯·è¾“å…¥" class="inputW2" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å…¥å­¦æ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker v-model="formData.enrolmentTime" type="data" placeholder="è¯·è¾“å…¥æ—¶é—´" class="inputW" value-format="yyyy-MM-dd" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ¯•ä¸šæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker v-model="formData.graduationTime" type="data" placeholder="è¯·è¾“å…¥æ—¶é—´" class="inputW" value-format="yyyy-MM-dd" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ä¸“ä¸š"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.major" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- ä»ä¸šä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;ä»ä¸šä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="ä¸Šå®¶å…¬å¸"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.homeCompany" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="èŒç§°"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.title" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æœ‰æ— ç«ä¸šé™åˆ¶"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.isThereAnyCompetitionRestriction" placeholder="è¯·è¾“å…¥" style="width:80%" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å¤‡æ³¨"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.remarks" type="textarea" placeholder="è¯·è¾“å…¥å¤‡æ³¨" style="width:80%" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- ä¿å­˜å‘˜å·¥ä¿¡æ¯ --&gt;</span><br><span class="line">        &lt;el-row class="inline-info" type="flex" justify="center"&gt;</span><br><span class="line">          &lt;el-col :span="12"&gt;</span><br><span class="line">            &lt;el-button type="primary" @click="savePersonal"&gt;ä¿å­˜æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button @click="$router.back()"&gt;è¿”å›&lt;/el-button&gt;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æœ¬ç« èŠ‚ä¸ªäººæ•°æ®è¿‡äº**<code>ç¹æ‚ï¼Œåºå¤§</code>**ï¼ŒåŒå­¦ä»¬åœ¨å¼€å‘æœŸé—´ï¼Œæ‹·è´ä»£ç å³å¯ï¼Œæˆ‘ä»¬åªå†™å…³é”®éƒ¨ä½çš„ä»£ç </p>
</blockquote>
<p><strong>å®šä¹‰user-infoçš„æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> EmployeeEnum <span class="keyword">from</span> <span class="string">'@/api/constant/employees'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">userId</span>: <span class="built_in">this</span>.$route.params.id,</span><br><span class="line">      EmployeeEnum, <span class="comment">// å‘˜å·¥æšä¸¾æ•°æ®</span></span><br><span class="line">      <span class="attr">userInfo</span>: {},</span><br><span class="line">      <span class="attr">formData</span>: {</span><br><span class="line">        <span class="attr">userId</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">username</span>: <span class="string">''</span>, <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line">        <span class="attr">sex</span>: <span class="string">''</span>, <span class="comment">// æ€§åˆ«</span></span><br><span class="line">        <span class="attr">mobile</span>: <span class="string">''</span>, <span class="comment">// æ‰‹æœº</span></span><br><span class="line">        <span class="attr">companyId</span>: <span class="string">''</span>, <span class="comment">// å…¬å¸id</span></span><br><span class="line">        <span class="attr">departmentName</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨åç§°</span></span><br><span class="line">        <span class="comment">//  onTheJobStatus: '', // åœ¨èŒçŠ¶æ€ no</span></span><br><span class="line">        <span class="attr">dateOfBirth</span>: <span class="string">''</span>, <span class="comment">// å‡ºç”Ÿæ—¥æœŸ</span></span><br><span class="line">        <span class="attr">timeOfEntry</span>: <span class="string">''</span>, <span class="comment">// å…¥èŒæ—¶é—´</span></span><br><span class="line">        <span class="attr">theHighestDegreeOfEducation</span>: <span class="string">''</span>, <span class="comment">// æœ€é«˜å­¦å†</span></span><br><span class="line">        <span class="attr">nationalArea</span>: <span class="string">''</span>, <span class="comment">// å›½å®¶</span></span><br><span class="line">        <span class="attr">passportNo</span>: <span class="string">''</span>, <span class="comment">// æŠ¤ç…§å·</span></span><br><span class="line">        <span class="attr">idNumber</span>: <span class="string">''</span>, <span class="comment">// èº«ä»½è¯å·</span></span><br><span class="line">        <span class="attr">idCardPhotoPositive</span>: <span class="string">''</span>, <span class="comment">// èº«ä»½è¯ç…§æ­£</span></span><br><span class="line">        <span class="attr">idCardPhotoBack</span>: <span class="string">''</span>, <span class="comment">// èº«ä»½è¯ç…§æ­£</span></span><br><span class="line">        <span class="attr">nativePlace</span>: <span class="string">''</span>, <span class="comment">// ç±è´¯</span></span><br><span class="line">        <span class="attr">nation</span>: <span class="string">''</span>, <span class="comment">// æ°‘æ—</span></span><br><span class="line">        <span class="attr">englishName</span>: <span class="string">''</span>, <span class="comment">// è‹±æ–‡åå­—</span></span><br><span class="line">        <span class="attr">maritalStatus</span>: <span class="string">''</span>, <span class="comment">// å©šå§»çŠ¶å†µ</span></span><br><span class="line">        <span class="attr">staffPhoto</span>: <span class="string">''</span>, <span class="comment">// å‘˜å·¥ç…§ç‰‡</span></span><br><span class="line">        <span class="attr">birthday</span>: <span class="string">''</span>, <span class="comment">// ç”Ÿæ—¥</span></span><br><span class="line">        <span class="attr">zodiac</span>: <span class="string">''</span>, <span class="comment">// å±ç›¸</span></span><br><span class="line">        <span class="attr">age</span>: <span class="string">''</span>, <span class="comment">// å¹´é¾„</span></span><br><span class="line">        <span class="attr">constellation</span>: <span class="string">''</span>, <span class="comment">// æ˜Ÿåº§</span></span><br><span class="line">        <span class="attr">bloodType</span>: <span class="string">''</span>, <span class="comment">// è¡€å‹</span></span><br><span class="line">        <span class="attr">domicile</span>: <span class="string">''</span>, <span class="comment">// æˆ·ç±æ‰€åœ¨åœ°</span></span><br><span class="line">        <span class="attr">politicalOutlook</span>: <span class="string">''</span>, <span class="comment">// æ”¿æ²»é¢è²Œ</span></span><br><span class="line">        <span class="attr">timeToJoinTheParty</span>: <span class="string">''</span>, <span class="comment">// å…¥å…šæ—¶é—´</span></span><br><span class="line">        <span class="attr">archivingOrganization</span>: <span class="string">''</span>, <span class="comment">// å­˜æ¡£æœºæ„</span></span><br><span class="line">        <span class="attr">stateOfChildren</span>: <span class="string">''</span>, <span class="comment">// å­å¥³çŠ¶æ€</span></span><br><span class="line">        <span class="attr">doChildrenHaveCommercialInsurance</span>: <span class="string">'1'</span>, <span class="comment">// ä¿é™©çŠ¶æ€</span></span><br><span class="line">        <span class="attr">isThereAnyViolationOfLawOrDiscipline</span>: <span class="string">''</span>, <span class="comment">// è¿æ³•è¿çºªçŠ¶æ€</span></span><br><span class="line">        <span class="attr">areThereAnyMajorMedicalHistories</span>: <span class="string">''</span>, <span class="comment">// é‡å¤§ç—…å²</span></span><br><span class="line">        <span class="attr">qq</span>: <span class="string">''</span>, <span class="comment">// QQ</span></span><br><span class="line">        <span class="attr">wechat</span>: <span class="string">''</span>, <span class="comment">// å¾®ä¿¡</span></span><br><span class="line">        <span class="attr">residenceCardCity</span>: <span class="string">''</span>, <span class="comment">// å±…ä½è¯åŸå¸‚</span></span><br><span class="line">        <span class="attr">dateOfResidencePermit</span>: <span class="string">''</span>, <span class="comment">// å±…ä½è¯åŠç†æ—¥æœŸ</span></span><br><span class="line">        <span class="attr">residencePermitDeadline</span>: <span class="string">''</span>, <span class="comment">// å±…ä½è¯æˆªæ­¢æ—¥æœŸ</span></span><br><span class="line">        <span class="attr">placeOfResidence</span>: <span class="string">''</span>, <span class="comment">// ç°å±…ä½åœ°</span></span><br><span class="line">        <span class="attr">postalAddress</span>: <span class="string">''</span>, <span class="comment">// é€šè®¯åœ°å€</span></span><br><span class="line">        <span class="attr">contactTheMobilePhone</span>: <span class="string">''</span>, <span class="comment">// è”ç³»æ‰‹æœº</span></span><br><span class="line">        <span class="attr">personalMailbox</span>: <span class="string">''</span>, <span class="comment">// ä¸ªäººé‚®ç®±</span></span><br><span class="line">        <span class="attr">emergencyContact</span>: <span class="string">''</span>, <span class="comment">// ç´§æ€¥è”ç³»äºº</span></span><br><span class="line">        <span class="attr">emergencyContactNumber</span>: <span class="string">''</span>, <span class="comment">// ç´§æ€¥è”ç³»ç”µè¯</span></span><br><span class="line">        <span class="attr">socialSecurityComputerNumber</span>: <span class="string">''</span>, <span class="comment">// ç¤¾ä¿ç”µè„‘å·</span></span><br><span class="line">        <span class="attr">providentFundAccount</span>: <span class="string">''</span>, <span class="comment">// å…¬ç§¯é‡‘è´¦å·</span></span><br><span class="line">        <span class="attr">bankCardNumber</span>: <span class="string">''</span>, <span class="comment">// é“¶è¡Œå¡å·</span></span><br><span class="line">        <span class="attr">openingBank</span>: <span class="string">''</span>, <span class="comment">// å¼€æˆ·è¡Œ</span></span><br><span class="line">        <span class="attr">educationalType</span>: <span class="string">''</span>, <span class="comment">// å­¦å†ç±»å‹</span></span><br><span class="line">        <span class="attr">graduateSchool</span>: <span class="string">''</span>, <span class="comment">// æ¯•ä¸šå­¦æ ¡</span></span><br><span class="line">        <span class="attr">enrolmentTime</span>: <span class="string">''</span>, <span class="comment">// å…¥å­¦æ—¶é—´</span></span><br><span class="line">        <span class="attr">graduationTime</span>: <span class="string">''</span>, <span class="comment">// æ¯•ä¸šæ—¶é—´</span></span><br><span class="line">        <span class="attr">major</span>: <span class="string">''</span>, <span class="comment">// ä¸“ä¸š</span></span><br><span class="line">        <span class="attr">graduationCertificate</span>: <span class="string">''</span>, <span class="comment">// æ¯•ä¸šè¯ä¹¦</span></span><br><span class="line">        <span class="attr">certificateOfAcademicDegree</span>: <span class="string">''</span>, <span class="comment">// å­¦ä½è¯ä¹¦</span></span><br><span class="line">        <span class="attr">homeCompany</span>: <span class="string">''</span>, <span class="comment">// ä¸Šå®¶å…¬å¸</span></span><br><span class="line">        <span class="attr">title</span>: <span class="string">''</span>, <span class="comment">// èŒç§°</span></span><br><span class="line">        <span class="attr">resume</span>: <span class="string">''</span>, <span class="comment">// ç®€å†</span></span><br><span class="line">        <span class="attr">isThereAnyCompetitionRestriction</span>: <span class="string">''</span>, <span class="comment">// æœ‰æ— ç«ä¸šé™åˆ¶</span></span><br><span class="line">        <span class="attr">proofOfDepartureOfFormerCompany</span>: <span class="string">''</span>, <span class="comment">// å‰å…¬å¸ç¦»èŒè¯æ˜</span></span><br><span class="line">        <span class="attr">remarks</span>: <span class="string">''</span> <span class="comment">// å¤‡æ³¨</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨detail.vueç»„ä»¶ä¸­ï¼Œæ³¨å†Œå¹¶ä½¿ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-tab-pane label="ä¸ªäººè¯¦æƒ…"&gt;</span><br><span class="line">           &lt;!-- æ”¾ç½®ä¸ªäººè¯¦æƒ… --&gt;</span><br><span class="line">           &lt;component :is="userComponent" /&gt;</span><br><span class="line">           &lt;!-- &lt;user-info /&gt; --&gt;</span><br><span class="line"> &lt;/el-tab-pane&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŠ¨æ€ç»„ä»¶<strong>component</strong>ï¼Œå®ƒé€šè¿‡ **<code>is</code><strong>å±æ€§æ¥ç»‘å®šéœ€è¦æ˜¾ç¤ºåœ¨è¯¥ä½ç½®çš„ç»„ä»¶ï¼Œiså±æ€§å¯ä»¥ç›´æ¥ä¸º</strong><code>æ³¨å†Œç»„ä»¶</code>**çš„ç»„ä»¶åç§°å³å¯</p>
<h3 id="å°è£…å²—ä½ç»„ä»¶"><a href="#å°è£…å²—ä½ç»„ä»¶" class="headerlink" title="å°è£…å²—ä½ç»„ä»¶"></a>å°è£…å²—ä½ç»„ä»¶</h3><p>åŒç†ï¼Œå°è£…å²—ä½ç»„ä»¶</p>
<p><strong>å°è£…å²—ä½ç»„ä»¶</strong>  <strong><code>src/views/employee/components/job-info.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class="job-info"&gt;</span><br><span class="line">    &lt;!-- åŸºç¡€ä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;el-form label-width="220px"&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;åŸºç¡€ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="å²—ä½"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.post" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- &lt;el-form-item label="è½¬æ­£æ—¥æœŸ"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.dateOfCorrection"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt; --&gt;</span><br><span class="line">        &lt;el-form-item label="è½¬æ­£çŠ¶æ€"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.stateOfCorrection" placeholder="è¯·é€‰æ‹©" disabled&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.stateOfCorrection"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="èŒçº§"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.rank" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="è½¬æ­£è¯„ä»·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.correctionEvaluation" type="textarea" placeholder="1-300ä½å­—ç¬¦" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ±‡æŠ¥å¯¹è±¡"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.reportId" filterable placeholder="è¯·é€‰æ‹©" class="inputW"&gt;</span><br><span class="line">            &lt;el-option v-for="item in depts" :key="item.id" :label="item.username" :value="item.id" /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="HRBP"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.hrbp" filterable placeholder="è¯·é€‰æ‹©" class="inputW"&gt;</span><br><span class="line">            &lt;el-option v-for="item in depts" :key="item.id" :label="item.username" :value="item.id" class="inputW" /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item class="formInfo" label="è°ƒæ•´å¸é¾„(å¤©)ï¼š"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.adjustmentAgedays" type="number" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="é¦–æ¬¡å‚åŠ å·¥ä½œæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.workingTimeForTheFirstTime"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="è°ƒæ•´å·¥é¾„"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.adjustmentOfLengthOfService" placeholder="0.00å¹´" class="inputW" disabled /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- åˆåŒä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;åˆåŒä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item class="formInfo" label="é¦–æ¬¡åˆåŒå¼€å§‹æ—¶é—´ï¼š"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.initialContractStartTime"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="é¦–æ¬¡åˆåŒç»“æŸæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.firstContractTerminationTime"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç°åˆåŒå¼€å§‹æ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.currentContractStartTime"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç°åˆåŒç»“æŸæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.closingTimeOfCurrentContract  "</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="åˆåŒæœŸé™"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.contractPeriod" class="filter-item"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.contractPeriod"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç»­ç­¾æ¬¡æ•°"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.renewalNumber" class="filter-item"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.renewalCount"</span><br><span class="line">              :key="item.id"</span><br><span class="line">              :label="item.value"</span><br><span class="line">              :value="item.id"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- æ‹›è˜ä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;æ‹›è˜ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="å…¶ä»–æ‹›è˜æ¸ é“"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.otherRecruitmentChannels" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.resumeSource"</span><br><span class="line">              :key="item.id"</span><br><span class="line">              :label="item.value"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ‹›è˜æ¸ é“"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.recruitmentChannels" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.resumeSource"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç¤¾æ‹›/æ ¡æ‹›"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.socialRecruitment" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.hireSourceType"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ¨èä¼ä¸š/äºº"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.recommenderBusinessPeople" placeholder="è¯·è¾“å…¥" class="infoPosition inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- ä»ä¸šä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button type="primary" @click="saveJob"&gt;ä¿å­˜æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button @click="$router.back()"&gt;è¿”å›&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰å²—ä½æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> EmployeeEnum <span class="keyword">from</span> <span class="string">'@/api/constant/employees'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">userId</span>: <span class="built_in">this</span>.$route.params.id,</span><br><span class="line">      <span class="attr">depts</span>: [],</span><br><span class="line">      EmployeeEnum,</span><br><span class="line">      <span class="attr">formData</span>: {</span><br><span class="line">        <span class="attr">adjustmentAgedays</span>: <span class="string">''</span>, <span class="comment">// è°ƒæ•´å¸é¾„å¤©</span></span><br><span class="line">        <span class="attr">adjustmentOfLengthOfService</span>: <span class="string">''</span>, <span class="comment">// è°ƒæ•´å·¥é¾„å¤©</span></span><br><span class="line">        <span class="attr">closingTimeOfCurrentContract</span>: <span class="string">''</span>, <span class="comment">// ç°åˆåŒç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="attr">companyId</span>: <span class="string">''</span>, <span class="comment">// å…¬å¸ID</span></span><br><span class="line">        <span class="attr">contractDocuments</span>: <span class="string">''</span>, <span class="comment">// åˆåŒæ–‡ä»¶</span></span><br><span class="line">        <span class="attr">contractPeriod</span>: <span class="string">''</span>, <span class="comment">// åˆåŒæœŸé™</span></span><br><span class="line">        <span class="attr">correctionEvaluation</span>: <span class="string">''</span>, <span class="comment">//  è½¬æ­£è¯„ä»·</span></span><br><span class="line">        <span class="attr">currentContractStartTime</span>: <span class="string">''</span>, <span class="comment">// ç°åˆåŒå¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="attr">firstContractTerminationTime</span>: <span class="string">''</span>, <span class="comment">// é¦–æ¬¡åˆåŒç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="attr">hrbp</span>: <span class="string">''</span>, <span class="comment">// HRBP</span></span><br><span class="line">        <span class="attr">initialContractStartTime</span>: <span class="string">''</span>, <span class="comment">// é¦–æ¬¡åˆåŒå¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="attr">otherRecruitmentChannels</span>: <span class="string">''</span>, <span class="comment">// å…¶ä»–æ‹›è˜æ¸ é“</span></span><br><span class="line">        <span class="attr">post</span>: <span class="string">''</span>, <span class="comment">// å²—ä½</span></span><br><span class="line">        <span class="attr">rank</span>: <span class="literal">null</span>, <span class="comment">// èŒçº§</span></span><br><span class="line">        <span class="attr">recommenderBusinessPeople</span>: <span class="string">''</span>, <span class="comment">// æ¨èä¼ä¸šäºº</span></span><br><span class="line">        <span class="attr">recruitmentChannels</span>: <span class="string">''</span>, <span class="comment">// æ‹›è˜æ¸ é“</span></span><br><span class="line">        <span class="attr">renewalNumber</span>: <span class="string">''</span>, <span class="comment">// ç»­ç­¾æ¬¡æ•°</span></span><br><span class="line">        <span class="attr">reportId</span>: <span class="string">''</span>, <span class="comment">// æ±‡æŠ¥å¯¹è±¡</span></span><br><span class="line">        <span class="attr">reportName</span>: <span class="literal">null</span>, <span class="comment">// æ±‡æŠ¥å¯¹è±¡</span></span><br><span class="line">        <span class="attr">socialRecruitment</span>: <span class="string">''</span>, <span class="comment">// ç¤¾æ‹›æ ¡æ‹›</span></span><br><span class="line">        <span class="attr">stateOfCorrection</span>: <span class="string">''</span>, <span class="comment">// è½¬æ­£çŠ¶æ€</span></span><br><span class="line">        <span class="attr">taxableCity</span>: <span class="string">''</span>, <span class="comment">// çº³ç¨åŸå¸‚</span></span><br><span class="line">        <span class="attr">userId</span>: <span class="string">''</span>, <span class="comment">// å‘˜å·¥ID</span></span><br><span class="line">        <span class="attr">workMailbox</span>: <span class="string">''</span>, <span class="comment">// å·¥ä½œé‚®ç®±</span></span><br><span class="line">        <span class="attr">workingCity</span>: <span class="string">''</span>, <span class="comment">// å·¥ä½œåŸå¸‚</span></span><br><span class="line">        <span class="attr">workingTimeForTheFirstTime</span>: <span class="string">''</span> <span class="comment">// é¦–æ¬¡å‚åŠ å·¥ä½œæ—¶é—´</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨detail.vueç»„ä»¶ä¸­ï¼Œæ³¨å†Œå¹¶ä½¿ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-tab-pane label="å²—ä½è¯¦æƒ…"&gt;</span><br><span class="line">           &lt;!-- æ”¾ç½®å²—ä½è¯¦æƒ… --&gt;</span><br><span class="line">           &lt;component :is="JobInfo" /&gt;</span><br><span class="line"> &lt;/el-tab-pane&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…</p>
<h2 id="å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜"><a href="#å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜" class="headerlink" title="å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜"></a>å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°ä¸ªäººä¿¡æ¯çš„å²—ä½ä¿¡æ¯çš„è¯»å–å’Œæ ¡éªŒï¼Œä¿å­˜</p>
<h3 id="è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯"><a href="#è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯" class="headerlink" title="è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯"></a>è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯</h3><blockquote>
<p>è¿™ä¸ªç¯èŠ‚é‡Œé¢å¤§éƒ¨åˆ†éƒ½æ˜¯ç¹æ‚çš„å±æ€§å’Œé‡å¤çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è¯¥ç¯èŠ‚ç›´æ¥å°†è¿‡ç¨‹ä»£ç æ‹·è´åˆ°é¡¹ç›®ä¸­å³å¯</p>
</blockquote>
<p>å°è£… <strong>è¯»å–ä¸ªäººä¿¡æ¯</strong> <strong>ä¿å­˜ä¸ªäººä¿¡æ¯</strong>  <strong>è¯»å–å²—ä½ä¿¡æ¯</strong> <strong>ä¿å­˜å²—ä½ä¿¡æ¯</strong>  </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  è¯»å–ç”¨æˆ·è¯¦æƒ…çš„åŸºç¡€ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getPersonalDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/employees/<span class="subst">${id}</span>/personalInfo`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  æ›´æ–°ç”¨æˆ·è¯¦æƒ…çš„åŸºç¡€ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updatePersonal</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/employees/<span class="subst">${data.userId}</span>/personalInfo`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/** **</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·çš„å²—ä½ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getJobDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/employees/<span class="subst">${id}</span>/jobs`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿å­˜å²—ä½ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateJob</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/employees/<span class="subst">${data.userId}</span>/jobs`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯»å–ï¼Œä¿å­˜ä¸ªäººä¿¡æ¯</strong>  <strong><code>user-info</code></strong>  éœ€è¦æ³¨æ„ï¼šè¿™é‡Œçš„ä¿å­˜å®é™…ä¸Šåˆ†æˆäº†ä¸¤ä¸ªæ¥å£ï¼Œè¿™æ˜¯æ¥å£çš„è®¾è®¡ï¼Œæˆ‘ä»¬åªèƒ½éµå®ˆ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getPersonalDetail, updatePersonal, saveUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line"><span class="keyword">import</span> { getUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"> <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getPersonalDetail()</span><br><span class="line">    <span class="built_in">this</span>.getUserDetailById()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getPersonalDetail</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.formData = <span class="keyword">await</span> getPersonalDetail(<span class="built_in">this</span>.userId) <span class="comment">// è·å–å‘˜å·¥æ•°æ®</span></span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">savePersonal</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">await</span> updatePersonal({ ...this.formData, <span class="attr">id</span>: <span class="built_in">this</span>.userId })</span><br><span class="line">      <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">saveUser</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">//  è°ƒç”¨çˆ¶ç»„ä»¶</span></span><br><span class="line">      <span class="keyword">await</span> saveUserDetailById(<span class="built_in">this</span>.userInfo)</span><br><span class="line">      <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getUserDetailById</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.userInfo = <span class="keyword">await</span> getUserDetailById(<span class="built_in">this</span>.userId)</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯"><a href="#è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯" class="headerlink" title="è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯"></a>è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯</h3><p><strong>è¯»å–ï¼Œä¿å­˜å²—ä½ä¿¡æ¯</strong>  <strong><code>job-info</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getEmployeeSimple, updateJob, getJobDetail } <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.getJobDetail()</span><br><span class="line">  <span class="built_in">this</span>.getEmployeeSimple()</span><br><span class="line">},</span><br><span class="line"><span class="attr">methods</span>: {</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">getJobDetail</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.formData = <span class="keyword">await</span> getJobDetail(<span class="built_in">this</span>.userId)</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// è·å–å‘˜å·¥åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">getEmployeeSimple</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.depts = <span class="keyword">await</span> getEmployeeSimple()</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// ä¿å­˜å²—ä½ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">saveJob</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">await</span> updateJob(<span class="built_in">this</span>.formData)</span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜å²—ä½ä¿¡æ¯æˆåŠŸ'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å®ç°ä¸ªäººä¿¡æ¯çš„å²—ä½ä¿¡æ¯çš„è¯»å–å’Œæ ¡éªŒï¼Œä¿å­˜</p>
<h2 id="é…ç½®è…¾è®¯äº‘Cos"><a href="#é…ç½®è…¾è®¯äº‘Cos" class="headerlink" title="é…ç½®è…¾è®¯äº‘Cos"></a>é…ç½®è…¾è®¯äº‘Cos</h2><p>**<code>ç›®æ ‡</code>**ï¼š é…ç½®ä¸€ä¸ªè…¾è®¯äº‘cos</p>
<blockquote>
<p>ç”±äºä¸Šè¯¾çš„å¼€å‘çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æŠŠæ‰€æœ‰çš„å›¾ç‰‡éƒ½ä¸Šä¼ åˆ°æˆ‘ä»¬è‡ªå·±çš„å®˜æ–¹æœåŠ¡å™¨ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€ä¸ªè…¾è®¯äº‘çš„å›¾ç‰‡æ–¹æ¡ˆ</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805200831035.png" alt="image-20200805200831035"></p>
<blockquote>
<p>ä¸Šè¾¹å›¾çš„æ„æ€å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸ªå¯ä»¥å…è´¹ä¸Šä¼ å›¾ç‰‡çš„æœåŠ¡å™¨ï¼Œå¸®æˆ‘ä»¬**<code>ä»£ç®¡å›¾ç‰‡</code><strong>ï¼Œæˆ‘ä»¬åœ¨è‡ªå·±çš„æ•°æ®åº“é‡Œåªä¿å­˜ä¸€ä¸ªåœ°å€å°±è¡Œï¼Œ è¿™å…¶å®ä¹Ÿæ˜¯å¾ˆå¤šé¡¹ç›®çš„å¤„ç†æ–¹æ¡ˆï¼Œä¼šæœ‰ä¸€ä¸ª</strong><code>å…¬å…±çš„æ–‡ä»¶æœåŠ¡å™¨</code>**</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæ‹¥æœ‰ä¸€ä¸ª<a href="https://cloud.tencent.com/login?s_url=https://console.cloud.tencent.com/">è…¾è¿…äº‘</a>çš„å¼€å‘è€…è´¦å·(<strong>å°å¿ƒè…¾è®¯äº‘çš„å¹¿å‘Šç”µè¯</strong>)</p>
<blockquote>
<p>è¯·æŒ‰ç…§è…¾è®¯äº‘çš„æ³¨å†Œæ–¹å¼ï¼Œæ³¨å†Œè‡ªå·±çš„è´¦å·</p>
</blockquote>
<p>ç¬¬äºŒæ­¥ï¼Œå®åè®¤è¯</p>
<blockquote>
<p>é€‰æ‹©ä¸ªäººè´¦æˆ·</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201013078.png" alt="image-20200805201013078"></p>
<p><strong>å¡«å†™ä¸ªäººèº«ä»½ä¿¡æ¯</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201230001.png" alt="image-20200805201230001"></p>
<p>ä¸‹ä¸€æ­¥ï¼Œæ‰«æäºŒç»´ç æˆæƒ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201318977.png" alt="image-20200805201318977"></p>
<p><strong>æ‰‹æœºç«¯æˆæƒ</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201422567.png" alt="image-20200805201422567"></p>
<p>ç‚¹å‡»<strong>é¢†å–å…è´¹äº§å“</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201513338.png" alt="image-20200805201513338"></p>
<p><strong>é€‰æ‹©å¯¹è±¡å­˜å‚¨COS</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201559233.png" alt="image-20200805201559233"></p>
<blockquote>
<p>æˆ‘ä»¬å…è´¹æ‹¥æœ‰**<code>6ä¸ªæœˆçš„50Gæµé‡</code>**çš„å¯¹è±¡å­˜å‚¨ç©ºé—´ä½¿ç”¨æƒé™ï¼Œè¶³å¤Ÿæˆ‘ä»¬ä¸Šä¼ ç”¨æˆ·å¤´åƒçš„ä½¿ç”¨äº†</p>
</blockquote>
<p><strong>ç‚¹å‡»0å…ƒè¯•ç”¨ï¼Œå¼€é€šæœåŠ¡</strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201750662.png" alt="image-20200805201750662"></p>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œè´¦å·çš„éƒ¨åˆ†å°±æ“ä½œå®Œæ¯•ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ¥åˆ›å»ºä¸€ä¸ªå­˜å‚¨å›¾ç‰‡çš„å­˜å‚¨æ¡¶</p>
<p>ç™»å½• <a href="https://console.cloud.tencent.com/cos5">å¯¹è±¡å­˜å‚¨æ§åˆ¶å°</a> ï¼Œ<a href="https://cloud.tencent.com/document/product/436/13309">åˆ›å»ºå­˜å‚¨æ¡¶</a>ã€‚è®¾ç½®å­˜å‚¨æ¡¶çš„æƒé™ä¸º <strong><code>å…¬æœ‰è¯»ï¼Œç§æœ‰å†™</code></strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200806135409338.png" alt="image-20200806135409338"></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200916231600661.png" alt="image-20200916231600661"></p>
<p>è®¾ç½®corsè§„åˆ™</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200916231949174.png" alt="image-20200916231949174"></p>
<p>AllowHeader éœ€é…æˆ<code>*</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805211749522.png" alt="image-20200805211749522"></p>
<blockquote>
<p>å› ä¸ºæˆ‘ä»¬æœ¬èº«æ²¡æœ‰åŸŸåï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®æˆ**<code>*</code>**ï¼Œä»…é™äºæµ‹è¯•ï¼Œæ­£å¼ç¯å¢ƒçš„è¯ï¼Œè¿™é‡Œéœ€è¦é…ç½®çœŸå®çš„åŸŸååœ°å€</p>
</blockquote>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„è…¾è®¯äº‘å­˜å‚¨æ¡¶å°±è®¾ç½®å¥½äº†ã€‚</p>
<h2 id="å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ"><a href="#å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ" class="headerlink" title="å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ"></a>å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ</h2><p><strong><code>ç›®æ ‡</code></strong> æ¢³ç†æ•´ä¸ªçš„ä¸Šä¼ è¿‡ç¨‹</p>
<p><strong>åˆå§‹åŒ–coså¯¹è±¡å‚æ•°</strong></p>
<table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">SecretId</td>
<td align="left">å¼€å‘è€…æ‹¥æœ‰çš„é¡¹ç›®èº«ä»½è¯†åˆ« IDï¼Œç”¨ä»¥èº«ä»½è®¤è¯ï¼Œå¯åœ¨ <a href="https://console.cloud.tencent.com/capi">API å¯†é’¥ç®¡ç†</a> é¡µé¢è·å–</td>
</tr>
<tr>
<td align="left">SecretKey</td>
<td align="left">å¼€å‘è€…æ‹¥æœ‰çš„é¡¹ç›®èº«ä»½å¯†é’¥ï¼Œå¯åœ¨ <a href="https://console.cloud.tencent.com/capi">API å¯†é’¥ç®¡ç†</a> é¡µé¢è·å–</td>
</tr>
</tbody></table>
<blockquote>
<p>æ³¨æ„ï¼Œä¸Šè¿°çš„å‚æ•°æˆ‘ä»¬åœ¨æœ¬æ¬¡å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç›´æ¥å°†å‚æ•°æ”¾ç½®åœ¨å‰ç«¯ä»£ç ä¸­å­˜å‚¨ï¼Œä½†æ˜¯è…¾è®¯äº‘æœ¬èº«æ˜¯ä¸å»ºè®®è¿™ä¹ˆåšçš„ï¼Œå› ä¸º**<code>æ•æ„Ÿä¿¡æ¯</code>**æ”¾åœ¨å‰ç«¯å¾ˆå®¹æ˜“è¢«æ•è·ï¼Œç”±äºæˆ‘ä»¬æœ¬æ¬¡æ˜¯æµ‹è¯•ç ”å‘ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å¯ä»¥å¿½ç•¥</p>
<p>æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ï¼Œé€šè¿‡ç½‘ç«™è°ƒç”¨æ¥å£æ¢å–æ•æ„Ÿä¿¡æ¯</p>
</blockquote>
<p><a href="https://cloud.tencent.com/document/product/436/11459">ç›¸å…³æ–‡æ¡£</a></p>
<p>å®ä¾‹åŒ– ä¸Šä¼ sdk</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> cos = <span class="keyword">new</span> COS({</span><br><span class="line">    <span class="attr">SecretId</span>: <span class="string">'COS_SECRETID'</span>, <span class="comment">// èº«ä»½è¯†åˆ« ID</span></span><br><span class="line">    <span class="attr">SecretKey</span>: <span class="string">'COS_SECRETKEY'</span>, <span class="comment">// èº«ä»½å¯†é’¥</span></span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸Šä¼ å›¾ç‰‡å‡†å¤‡çš„å†…å®¹å°±å·²ç»OKï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨**<code>src/componets</code>** æ–°å»ºä¸€ä¸ª**<code>ImageUpload</code>** ç»„ä»¶</p>
</blockquote>
<p>è¯¥ç»„ä»¶éœ€è¦æ»¡è¶³ä»€ä¹ˆè¦æ±‚å‘¢ï¼Ÿ</p>
<ol>
<li>å¯ä»¥æ˜¾ç¤ºä¼ å…¥çš„å›¾ç‰‡åœ°å€</li>
<li>å¯ä»¥åˆ é™¤ä¼ å…¥çš„å›¾ç‰‡åœ°å€</li>
<li>å¯ä»¥ä¸Šä¼ å›¾ç‰‡åˆ°äº‘æœåŠ¡å™¨</li>
<li>ä¸Šä¼ åˆ°è…¾è®¯äº‘ä¹‹åï¼Œå¯ä»¥è¿”å›å›¾ç‰‡åœ°å€ï¼Œæ˜¾ç¤º  </li>
<li>ä¸Šä¼ æˆåŠŸä¹‹åï¼Œå¯ä»¥å›è°ƒæˆåŠŸå‡½æ•°</li>
</ol>
<p>è¿™ä¸ªä¸Šä¼ ç»„ä»¶ç®€å•å—ï¼Ÿ</p>
<p><strong><code>no ! ! !</code></strong></p>
<p>çœ‹ä¼¼éœ€æ±‚å¾ˆæ˜ç¡®ï¼Œä½†æ˜¯å®ƒçœŸæ­£çš„å®ç°å¾ˆå¤æ‚ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå›¾æ¥çœ‹ä¸€ä¸‹</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200806174643390.png" alt="image-20200806174643390"></p>
<p>ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šæ˜¯æœ‰ä¸¤ç§åœºæ™¯çš„ï¼Œæœ¬åœ°åœºæ™¯å’Œå·²ç»ä¸Šä¼ çš„åœºæ™¯</p>
<p>ä¸‹ä¸ªç« èŠ‚ï¼Œé’ˆå¯¹è¿™ä¸ªåœºæ™¯æˆ‘ä»¬è¿›è¡Œå¼€å‘</p>
<h2 id="å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°"><a href="#å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°" class="headerlink" title="å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°"></a>å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°</h2><p>**<code>ç›®æ ‡</code>**å®ç°ä¸Šä¼ ç»„ä»¶çš„ä»£ç éƒ¨åˆ†</p>
<blockquote>
<p>JavaScript SDK éœ€æµè§ˆå™¨æ”¯æŒåŸºæœ¬çš„ HTML5 ç‰¹æ€§ï¼ˆæ”¯æŒ IE10 ä»¥ä¸Šæµè§ˆå™¨ï¼‰ï¼Œä»¥ä¾¿æ”¯æŒ ajax ä¸Šä¼ æ–‡ä»¶å’Œè®¡ç®—æ–‡ä»¶ MD5 å€¼ã€‚</p>
</blockquote>
<h3 id="æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶"><a href="#æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶" class="headerlink" title="æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶"></a>æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶</h3><p><strong>å®‰è£…JavaScript SDK</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i cos-js-sdk-v5 --save</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–°å»ºä¸Šä¼ å›¾ç‰‡ç»„ä»¶</strong> <strong><code>src/components/ImageUpload/index.vue</code></strong></p>
<blockquote>
<p>ä¸Šä¼ ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ²¿ç”¨elementçš„el-uploadç»„ä»¶,å¹¶ä¸”é‡‡ç”¨ç…§ç‰‡å¢™çš„æ¨¡å¼ <strong><code>list-type="picture-card"</code></strong></p>
</blockquote>
<p><strong>æ”¾ç½®el-uploadç»„ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-upload list-type="picture-card"&gt;</span><br><span class="line">     &lt;i class="el-icon-plus" /&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å…¨å±€æ³¨å†Œç»„ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> PageTools <span class="keyword">from</span> <span class="string">'./PageTools'</span></span><br><span class="line"><span class="keyword">import</span> UploadExcel <span class="keyword">from</span> <span class="string">'./UploadExcel'</span></span><br><span class="line"><span class="keyword">import</span> ImageUpload <span class="keyword">from</span> <span class="string">'./ImageUpload'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue</span>)</span> {</span><br><span class="line">    Vue.component(<span class="string">'PageTools'</span>, PageTools) <span class="comment">// æ³¨å†Œå·¥å…·æ ç»„ä»¶</span></span><br><span class="line">    Vue.component(<span class="string">'UploadExcel'</span>, UploadExcel) <span class="comment">// æ³¨å†Œå¯¼å…¥excelç»„ä»¶</span></span><br><span class="line">    Vue.component(<span class="string">'ImageUpload'</span>, ImageUpload) <span class="comment">// æ³¨å†Œå¯¼å…¥ä¸Šä¼ ç»„ä»¶</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ"><a href="#ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ" class="headerlink" title="ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ"></a>ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ</h3><p><strong>é™å®šä¸Šä¼ çš„å›¾ç‰‡æ•°é‡å’Œaction</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-upload list-type="picture-card" :limit="1" action="#"&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>actionä¸ºä»€ä¹ˆç»™#ï¼Œ å› ä¸ºå‰é¢æˆ‘ä»¬è®²è¿‡äº†ï¼Œæˆ‘ä»¬è¦ä¸Šä¼ åˆ°è…¾è®¯äº‘ï¼Œéœ€è¦è‡ªå®šä¹‰çš„ä¸Šä¼ æ–¹å¼,actionç»™ä¸ª#é˜²æ­¢æŠ¥é”™</p>
</blockquote>
<p><strong>é¢„è§ˆ</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">fileList</span>: [], <span class="comment">// å›¾ç‰‡åœ°å€è®¾ç½®ä¸ºæ•°ç»„ </span></span><br><span class="line">      <span class="attr">showDialog</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ˜¾ç¤ºå¼¹å±‚</span></span><br><span class="line">      <span class="attr">imgUrl</span>: <span class="string">''</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">   <span class="function"><span class="title">preview</span>(<span class="params">file</span>)</span> {</span><br><span class="line">    <span class="comment">// è¿™é‡Œåº”è¯¥å¼¹å‡ºä¸€ä¸ªå±‚ å±‚é‡Œæ˜¯ç‚¹å‡»çš„å›¾ç‰‡åœ°å€</span></span><br><span class="line">    <span class="built_in">this</span>.imgUrl = file.url</span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">},  </span><br></pre></td></tr></tbody></table></figure>

<p><strong>é¢„è§ˆå¼¹å±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-dialog title="å›¾ç‰‡" :visible.sync="showDialog"&gt;</span><br><span class="line">    &lt;img :src="imgUrl" style="width:100%" alt=""&gt;</span><br><span class="line"> &lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®"><a href="#æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®" class="headerlink" title="æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®"></a>æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®</h3><p><strong>æ§åˆ¶ä¸Šä¼ æ˜¾ç¤º</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">computed: {</span><br><span class="line">   <span class="comment">// è®¾å®šä¸€ä¸ªè®¡ç®—å±æ€§ åˆ¤æ–­æ˜¯å¦å·²ç»ä¸Šä¼ å®Œäº†ä¸€å¼ </span></span><br><span class="line">   <span class="function"><span class="title">fileComputed</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">this</span>.fileList.length === <span class="number">1</span></span><br><span class="line">   }</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight css"><table><tbody><tr><td class="code"><pre><span class="line"> &lt;el-upload</span><br><span class="line">      :on-preview=<span class="string">"preview"</span></span><br><span class="line">      :on-remove=<span class="string">"handleRemove"</span></span><br><span class="line">      :on-change=<span class="string">"changeFile"</span></span><br><span class="line">      :file-list=<span class="string">"fileList"</span></span><br><span class="line">      list-type=<span class="string">"picture-card"</span></span><br><span class="line">      action=<span class="string">"#"</span></span><br><span class="line">      :limit=<span class="string">"1"</span></span><br><span class="line">      :class=<span class="string">"{disabled: fileComputed }"</span></span><br><span class="line">    &gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.disabled .el-upload--picture-card {</span><br><span class="line">  display: none</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡"><a href="#åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡" class="headerlink" title="åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡"></a>åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡</h3><p><strong>åˆ é™¤æ–‡ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">handleRemove</span>(<span class="params">file</span>)</span> {</span><br><span class="line">   <span class="comment">// fileæ˜¯ç‚¹å‡»åˆ é™¤çš„æ–‡ä»¶</span></span><br><span class="line"> <span class="comment">//   å°†åŸæ¥çš„æ–‡ä»¶ç»™æ’é™¤æ‰äº† å‰©ä¸‹çš„å°±æ˜¯æœ€æ–°çš„æ•°ç»„äº†</span></span><br><span class="line">   <span class="built_in">this</span>.fileList = <span class="built_in">this</span>.fileList.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.uid !== file.uid)</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ·»åŠ æ–‡ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹æ–‡ä»¶æ—¶è§¦å‘</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶å¯ä»¥ç”¨fileList å› ä¸ºè¯¥æ–¹æ³•ä¼šè¿›æ¥å¾ˆå¤šé ä¸èƒ½æ¯æ¬¡éƒ½å»push</span></span><br><span class="line"><span class="comment">// fileListå› ä¸ºfileListå‚æ•°æ˜¯å½“å‰ä¼ è¿›æ¥çš„æœ€æ–°å‚æ•° æˆ‘ä»¬åªéœ€è¦å°†å…¶è½¬åŒ–æˆæ•°ç»„å³å¯ éœ€è¦è½¬åŒ–æˆä¸€ä¸ªæ–°çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">// [] =&gt; [...fileList] [] =&gt; fileList.map()</span></span><br><span class="line"><span class="comment">// ä¸Šä¼ æˆåŠŸä¹‹å è¿˜ä¼šè¿›æ¥ éœ€è¦å®ç°ä¸Šä¼ ä»£ç çš„é€»è¾‘ è¿™é‡Œæ‰ä¼šæˆåŠŸ</span></span><br><span class="line"><span class="function"><span class="title">changeFile</span>(<span class="params">file, fileList</span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.fileList = fileList.map(<span class="function"><span class="params">item</span> =&gt;</span> item)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¸Šä¼ ä¹‹å‰æ£€æŸ¥"><a href="#ä¸Šä¼ ä¹‹å‰æ£€æŸ¥" class="headerlink" title="ä¸Šä¼ ä¹‹å‰æ£€æŸ¥"></a>ä¸Šä¼ ä¹‹å‰æ£€æŸ¥</h3><blockquote>
<p>æ§åˆ¶ä¸Šä¼ å›¾ç‰‡çš„ç±»å‹å’Œä¸Šä¼ å¤§å°ï¼Œ å¦‚æœä¸æ»¡è¶³æ¡ä»¶ è¿”å›falseä¸Šä¼ å°±ä¼šåœæ­¢</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">beforeUpload</span>(<span class="params">file</span>)</span> {</span><br><span class="line">  <span class="comment">// è¦å¼€å§‹åšæ–‡ä»¶ä¸Šä¼ çš„æ£€æŸ¥äº†</span></span><br><span class="line">  <span class="comment">// æ–‡ä»¶ç±»å‹ æ–‡ä»¶å¤§å°</span></span><br><span class="line">  <span class="keyword">const</span> types = [<span class="string">'image/jpeg'</span>, <span class="string">'image/gif'</span>, <span class="string">'image/bmp'</span>, <span class="string">'image/png'</span>]</span><br><span class="line">  <span class="keyword">if</span> (!types.includes(file.type)) {</span><br><span class="line">    <span class="built_in">this</span>.$message.error(<span class="string">'ä¸Šä¼ å›¾ç‰‡åªèƒ½æ˜¯ JPGã€GIFã€BMPã€PNG æ ¼å¼!'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">//  æ£€æŸ¥å¤§å°</span></span><br><span class="line">  <span class="keyword">const</span> maxSize = <span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span></span><br><span class="line">  <span class="keyword">if</span> (maxSize &lt; file.size) {</span><br><span class="line">    <span class="built_in">this</span>.$message.error(<span class="string">'å›¾ç‰‡å¤§å°æœ€å¤§ä¸èƒ½è¶…è¿‡5M'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘"><a href="#ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘" class="headerlink" title="ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘"></a>ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘</h3><p><strong>ä¸Šä¼ åŠ¨ä½œä¸ºel-uploadçš„http-requestå±æ€§</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">:http-request=<span class="string">"upload"</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// è‡ªå®šä¹‰ä¸Šä¼ åŠ¨ä½œ æœ‰ä¸ªå‚æ•° æœ‰ä¸ªfileå¯¹è±¡ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦ä¸Šä¼ åˆ°è…¾è®¯äº‘æœåŠ¡å™¨çš„å†…å®¹</span></span><br><span class="line">   <span class="function"><span class="title">upload</span>(<span class="params">params</span>)</span> {</span><br><span class="line">     <span class="built_in">console</span>.log(params.file)</span><br><span class="line">   }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬éœ€è¦åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œè°ƒç”¨è…¾è®¯äº‘çš„ä¸Šä¼ æ–¹æ³•</p>
</blockquote>
<p><a href="https://cloud.tencent.com/document/product/436/35649#.E7.AE.80.E5.8D.95.E4.B8.8A.E4.BC.A0.E5.AF.B9.E8.B1.A1">è…¾è®¯äº‘æ–‡æ¡£åœ°å€</a></p>
<p>èº«ä»½IDå’Œå¯†é’¥å¯ä»¥é€šè¿‡è…¾è®¯äº‘å¹³å°è·å–</p>
<p>ç™»å½• <a href="https://console.cloud.tencent.com/capi">è®¿é—®ç®¡ç†æ§åˆ¶å°</a> ï¼Œè·å–æ‚¨çš„é¡¹ç›® SecretId å’Œ SecretKeyã€‚</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805211539544.png" alt="image-20200805211539544"></p>
<p>å®ç°ä»£ç </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è¿›è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="title">upload</span>(<span class="params">params</span>)</span> {</span><br><span class="line"><span class="comment">//   console.log(params.file)</span></span><br><span class="line">  <span class="keyword">if</span> (params.file) {</span><br><span class="line">    <span class="comment">// æ‰§è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line">    cos.putObject({</span><br><span class="line">      <span class="attr">Bucket</span>: <span class="string">'shuiruohanyu-106-1302806742'</span>, <span class="comment">// å­˜å‚¨æ¡¶</span></span><br><span class="line">      <span class="attr">Region</span>: <span class="string">'ap-beijing'</span>, <span class="comment">// åœ°åŸŸ</span></span><br><span class="line">      <span class="attr">Key</span>: params.file.name, <span class="comment">// æ–‡ä»¶å</span></span><br><span class="line">      <span class="attr">Body</span>: params.file, <span class="comment">// è¦ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">      <span class="attr">StorageClass</span>: <span class="string">'STANDARD'</span> <span class="comment">// ä¸Šä¼ çš„æ¨¡å¼ç±»å‹ ç›´æ¥é»˜è®¤ æ ‡å‡†æ¨¡å¼å³å¯</span></span><br><span class="line">      <span class="comment">// ä¸Šä¼ åˆ°è…¾è®¯äº‘ =ã€‹ å“ªä¸ªå­˜å‚¨æ¡¶ å“ªä¸ªåœ°åŸŸçš„å­˜å‚¨æ¡¶ æ–‡ä»¶  æ ¼å¼  åç§° å›è°ƒ</span></span><br><span class="line">    }, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">      <span class="comment">// dataè¿”å›æ•°æ®ä¹‹å åº”è¯¥å¦‚ä½•å¤„ç†</span></span><br><span class="line">      <span class="built_in">console</span>.log(err || data)</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®"><a href="#ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®" class="headerlink" title="ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®"></a>ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®</h3><blockquote>
<p>å¦‚ä½•å¤„ç†è¿”å›æˆåŠŸçš„è¿”å›æ•°æ®</p>
</blockquote>
<p>ç¡®å®šè¦ä¸Šä¼ è®°å½•id</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">beforeUpload</span>(<span class="params">file</span>)</span> {</span><br><span class="line">    <span class="comment">//   å…ˆæ£€æŸ¥æ–‡ä»¶ç±»å‹</span></span><br><span class="line">    <span class="keyword">const</span> types = [<span class="string">'image/jpeg'</span>, <span class="string">'image/gif'</span>, <span class="string">'image/bmp'</span>, <span class="string">'image/png'</span>]</span><br><span class="line">    <span class="keyword">if</span> (!types.some(<span class="function"><span class="params">item</span> =&gt;</span> item === file.type)) {</span><br><span class="line">      <span class="comment">//   å¦‚æœä¸å­˜åœ¨</span></span><br><span class="line">      <span class="built_in">this</span>.$message.error(<span class="string">'ä¸Šä¼ å›¾ç‰‡åªèƒ½æ˜¯ JPGã€GIFã€BMPã€PNG æ ¼å¼!'</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// ä¸Šä¼ ç»ˆæ­¢</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ–‡ä»¶å¤§å°  5M 1M = 1024KB 1KB = 1024B</span></span><br><span class="line">    <span class="keyword">const</span> maxSize = <span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span></span><br><span class="line">    <span class="keyword">if</span> (file.size &gt; maxSize) {</span><br><span class="line">      <span class="comment">//   è¶…è¿‡äº†é™åˆ¶çš„æ–‡ä»¶å¤§å°</span></span><br><span class="line">      <span class="built_in">this</span>.$message.error(<span class="string">'ä¸Šä¼ çš„å›¾ç‰‡å¤§å°ä¸èƒ½å¤§äº5M'</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//   å·²ç»ç¡®å®šå½“å‰ä¸Šä¼ çš„å°±æ˜¯å½“å‰çš„è¿™ä¸ªfileäº†</span></span><br><span class="line">    <span class="built_in">this</span>.currentFileUid = file.uid</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// æœ€åä¸€å®šè¦return  true</span></span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å¤„ç†è¿”å›æ•°æ®</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è¿›è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="title">upload</span>(<span class="params">params</span>)</span> {</span><br><span class="line"><span class="comment">//   console.log(params.file)</span></span><br><span class="line">  <span class="keyword">if</span> (params.file) {</span><br><span class="line">    <span class="comment">// æ‰§è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line">    cos.putObject({</span><br><span class="line">      <span class="attr">Bucket</span>: <span class="string">'shuiruohanyu-106-1302806742'</span>, <span class="comment">// å­˜å‚¨æ¡¶</span></span><br><span class="line">      <span class="attr">Region</span>: <span class="string">'ap-beijing'</span>, <span class="comment">// åœ°åŸŸ</span></span><br><span class="line">      <span class="attr">Key</span>: params.file.name, <span class="comment">// æ–‡ä»¶å</span></span><br><span class="line">      <span class="attr">Body</span>: params.file, <span class="comment">// è¦ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">      <span class="attr">StorageClass</span>: <span class="string">'STANDARD'</span> <span class="comment">// ä¸Šä¼ çš„æ¨¡å¼ç±»å‹ ç›´æ¥é»˜è®¤ æ ‡å‡†æ¨¡å¼å³å¯</span></span><br><span class="line">      <span class="comment">// ä¸Šä¼ åˆ°è…¾è®¯äº‘ =ã€‹ å“ªä¸ªå­˜å‚¨æ¡¶ å“ªä¸ªåœ°åŸŸçš„å­˜å‚¨æ¡¶ æ–‡ä»¶  æ ¼å¼  åç§° å›è°ƒ</span></span><br><span class="line">    }, <span class="function">(<span class="params">err, data</span>) =&gt;</span> {</span><br><span class="line">      <span class="comment">// dataè¿”å›æ•°æ®ä¹‹å åº”è¯¥å¦‚ä½•å¤„ç†</span></span><br><span class="line">      <span class="built_in">console</span>.log(err || data)</span><br><span class="line">      <span class="comment">// dataä¸­æœ‰ä¸€ä¸ªstatusCode === 200 çš„æ—¶å€™è¯´æ˜ä¸Šä¼ æˆåŠŸ</span></span><br><span class="line">      <span class="keyword">if</span> (!err &amp;&amp; data.statusCode === <span class="number">200</span>) {</span><br><span class="line">        <span class="comment">//   æ­¤æ—¶è¯´æ˜æ–‡ä»¶ä¸Šä¼ æˆåŠŸ  è¦è·å–æˆåŠŸçš„è¿”å›åœ°å€</span></span><br><span class="line">        <span class="comment">// fileListæ‰èƒ½æ˜¾ç¤ºåˆ°ä¸Šä¼ ç»„ä»¶ä¸Š æ­¤æ—¶æˆ‘ä»¬è¦å°†fileListä¸­çš„æ•°æ®çš„urlåœ°å€å˜æˆ ç°åœ¨ä¸Šä¼ æˆåŠŸçš„åœ°å€</span></span><br><span class="line">        <span class="comment">// ç›®å‰è™½ç„¶æ˜¯ä¸€å¼ å›¾ç‰‡ ä½†æ˜¯è¯·æ³¨æ„ æˆ‘ä»¬çš„fileListæ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">        <span class="comment">// éœ€è¦çŸ¥é“å½“å‰ä¸Šä¼ æˆåŠŸçš„æ˜¯å“ªä¸€å¼ å›¾ç‰‡</span></span><br><span class="line">        <span class="built_in">this</span>.fileList = <span class="built_in">this</span>.fileList.map(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">          <span class="comment">// å»æ‰¾è°çš„uidç­‰äºåˆšåˆšè®°å½•ä¸‹æ¥çš„id</span></span><br><span class="line">          <span class="keyword">if</span> (item.uid === <span class="built_in">this</span>.currentFileUid) {</span><br><span class="line">            <span class="comment">// å°†æˆåŠŸçš„åœ°å€èµ‹å€¼ç»™åŸæ¥çš„urlå±æ€§</span></span><br><span class="line">            <span class="keyword">return</span> { <span class="attr">url</span>: <span class="string">'http://'</span> + data.Location, <span class="attr">upload</span>: <span class="literal">true</span> }</span><br><span class="line">            <span class="comment">// upload ä¸ºtrue è¡¨ç¤ºè¿™å¼ å›¾ç‰‡å·²ç»ä¸Šä¼ å®Œæ¯• è¿™ä¸ªå±æ€§è¦ä¸ºæˆ‘ä»¬åæœŸåº”ç”¨çš„æ—¶å€™åšæ ‡è®°</span></span><br><span class="line">            <span class="comment">// ä¿å­˜  =&gt; å›¾ç‰‡æœ‰å¤§æœ‰å° =&gt; ä¸Šä¼ é€Ÿåº¦æœ‰å¿«åˆæ…¢ =&gt;è¦æ ¹æ®æœ‰æ²¡æœ‰uploadè¿™ä¸ªæ ‡è®°æ¥å†³å®šæ˜¯å¦å»ä¿å­˜</span></span><br><span class="line">          }</span><br><span class="line">          <span class="keyword">return</span> item</span><br><span class="line">        })</span><br><span class="line">        <span class="comment">// å°†ä¸Šä¼ æˆåŠŸçš„åœ°å€ å›å†™åˆ°äº†fileListä¸­ fileListå˜åŒ–  =ã€‹ uploadç»„ä»¶ å°±ä¼šæ ¹æ®fileListçš„å˜åŒ–è€Œå»æ¸²æŸ“è§†å›¾</span></span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬åœ¨fileListä¸­è®¾ç½®äº†å±æ€§ä¸ºuploadä¸ºtrueçš„å±æ€§ï¼Œè¡¨ç¤ºè¯¥å›¾ç‰‡å·²ç»ä¸Šä¼ æˆåŠŸäº†ï¼Œå¦‚æœfileListè¿˜æœ‰uploadä¸ä¸ºtrueçš„æ•°æ®ï¼Œé‚£å°±è¡¨ç¤ºè¯¥å›¾ç‰‡è¿˜æ²¡æœ‰ä¸Šä¼ å®Œæ¯•</p>
</blockquote>
<h3 id="ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º"><a href="#ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º" class="headerlink" title="ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º"></a>ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º</h3><blockquote>
<p>ä¸ºäº†å†ä¸Šä¼ å›¾ç‰‡è¿‡ç¨‹ä¸­æ˜¾ç¤ºè¿›åº¦æ¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨element-uiçš„è¿›åº¦æ¡æ˜¾ç¤ºå½“å‰çš„ä¸Šä¼ è¿›åº¦</p>
</blockquote>
<p><strong>æ”¾ç½®è¿›åº¦æ¡</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-progress v-if="showPercent" style="width: 180px" :percentage="percent" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>é€šè¿‡è…¾è®¯äº‘sdkç›‘å¬ä¸Šä¼ è¿›åº¦</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">cos.putObject({</span><br><span class="line">         <span class="comment">// é…ç½®</span></span><br><span class="line">         <span class="attr">Bucket</span>: <span class="string">'laogao-1302806742'</span>, <span class="comment">// å­˜å‚¨æ¡¶åç§°</span></span><br><span class="line">         <span class="attr">Region</span>: <span class="string">'ap-guangzhou'</span>, <span class="comment">// å­˜å‚¨æ¡¶åœ°åŸŸ</span></span><br><span class="line">         <span class="attr">Key</span>: params.file.name, <span class="comment">// æ–‡ä»¶åä½œä¸ºkey</span></span><br><span class="line">         <span class="attr">StorageClass</span>: <span class="string">'STANDARD'</span>, <span class="comment">// æ­¤ç±»å†™æ­»</span></span><br><span class="line">         <span class="attr">Body</span>: params.file, <span class="comment">// å°†æœ¬åœ°çš„æ–‡ä»¶èµ‹å€¼ç»™è…¾è®¯äº‘é…ç½®</span></span><br><span class="line">         <span class="comment">// è¿›åº¦æ¡</span></span><br><span class="line">         <span class="attr">onProgress</span>: <span class="function">(<span class="params">params</span>) =&gt;</span> {</span><br><span class="line">           <span class="built_in">this</span>.percent = params.percent * <span class="number">100</span></span><br><span class="line">         }</span><br><span class="line">       }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®Œæ•´ä»£ç </strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- æ”¾ç½®ä¸€ä¸ªä¸Šä¼ ç»„ä»¶ --&gt;</span><br><span class="line">    &lt;!-- actionè¿™é‡Œä¸å†™ä¸Šä¼ åœ°å€ å› ä¸ºæˆ‘ä»¬æ˜¯è°ƒç”¨è…¾è®¯äº‘cos ä¸æ˜¯ä¸€ä¸ªåœ°å€å¯ä»¥æå®šçš„ è¦ç”¨è‡ªå®šä¹‰çš„ä¸Šä¼  --&gt;</span><br><span class="line">    &lt;el-upload</span><br><span class="line">      :on-preview="preview"</span><br><span class="line">      :on-remove="handleRemove"</span><br><span class="line">      :on-change="changeFile"</span><br><span class="line">      :before-upload="beforeUpload"</span><br><span class="line">      :file-list="fileList"</span><br><span class="line">      :http-request="upload"</span><br><span class="line">      list-type="picture-card"</span><br><span class="line">      action="#"</span><br><span class="line">      :limit="1"</span><br><span class="line">      :class="{disabled: fileComputed }"</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;i class="el-icon-plus" /&gt;</span><br><span class="line">    &lt;/el-upload&gt;</span><br><span class="line">    &lt;!-- è¿›åº¦æ¡ --&gt;</span><br><span class="line">    &lt;el-progress v-if="showPercent" style="width: 180px" :percentage="percent" /&gt;</span><br><span class="line">    &lt;!-- æ”¾ç½®ä¸€ä¸ªå¼¹å±‚ --&gt;</span><br><span class="line">    &lt;!-- syncä¿®é¥°ç¬¦è‡ªåŠ¨å°†å¼¹å±‚å…³é—­äº† --&gt;</span><br><span class="line">    &lt;el-dialog title="å›¾ç‰‡" :visible.sync="showDialog"&gt;</span><br><span class="line">      &lt;img :src="imgUrl" style="width:100%" alt=""&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import COS from 'cos-js-sdk-v5' // å¼•å…¥è…¾è®¯äº‘çš„åŒ…</span><br><span class="line">// éœ€è¦å®ä¾‹åŒ–</span><br><span class="line">const cos = new COS({</span><br><span class="line">  SecretId: 'AKID0mqfEWqlUzIbeSkGRL6c7ML6c0B93To9',</span><br><span class="line">  SecretKey: 'JFwNZdeRF2iOp03FFsGNDm44vWFitmNF'</span><br><span class="line">}) // å®ä¾‹åŒ–çš„åŒ… å·²ç»å…·æœ‰äº†ä¸Šä¼ çš„èƒ½åŠ› å¯ä»¥ä¸Šä¼ åˆ°è¯¥è´¦å·é‡Œé¢çš„å­˜å‚¨æ¡¶äº†</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      fileList: [],</span><br><span class="line">      showDialog: false, // æ§åˆ¶å›¾ç‰‡çš„æ˜¾ç¤ºæˆ–è€…éšè—</span><br><span class="line">      imgUrl: '', // å­˜å‚¨ç‚¹å‡»çš„å›¾ç‰‡åœ°å€</span><br><span class="line">      currentFileUid: '', // ç”¨ä¸€ä¸ªå˜é‡ è®°ä½å½“å‰ä¸Šä¼ çš„å›¾ç‰‡id</span><br><span class="line">      percent: 0,</span><br><span class="line">      showPercent: false // é»˜è®¤ä¸æ˜¾ç¤ºè¿›åº¦æ¡</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    // è®¾å®šä¸€ä¸ªè®¡ç®—å±æ€§ åˆ¤æ–­æ˜¯å¦å·²ç»ä¸Šä¼ å®Œäº†ä¸€å¼ </span><br><span class="line">    fileComputed() {</span><br><span class="line">      return this.fileList.length === 1</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    preview(file) {</span><br><span class="line">      // è¿™é‡Œåº”è¯¥å¼¹å‡ºä¸€ä¸ªå±‚ å±‚é‡Œæ˜¯ç‚¹å‡»çš„å›¾ç‰‡åœ°å€</span><br><span class="line">      this.imgUrl = file.url</span><br><span class="line">      this.showDialog = true</span><br><span class="line">    },</span><br><span class="line">    handleRemove(file) {</span><br><span class="line">      // fileæ˜¯ç‚¹å‡»åˆ é™¤çš„æ–‡ä»¶</span><br><span class="line">    //   å°†åŸæ¥çš„æ–‡ä»¶ç»™æ’é™¤æ‰äº† å‰©ä¸‹çš„å°±æ˜¯æœ€æ–°çš„æ•°ç»„äº†</span><br><span class="line">      this.fileList = this.fileList.filter(item =&gt; item.uid !== file.uid)</span><br><span class="line">    },</span><br><span class="line">    // ä¿®æ”¹æ–‡ä»¶æ—¶è§¦å‘</span><br><span class="line">    // æ­¤æ—¶å¯ä»¥ç”¨fileList å› ä¸ºè¯¥æ–¹æ³•ä¼šè¿›æ¥å¾ˆå¤šé ä¸èƒ½æ¯æ¬¡éƒ½å»push</span><br><span class="line">    // fileListå› ä¸ºfileListå‚æ•°æ˜¯å½“å‰ä¼ è¿›æ¥çš„æœ€æ–°å‚æ•° æˆ‘ä»¬åªéœ€è¦å°†å…¶è½¬åŒ–æˆæ•°ç»„å³å¯ éœ€è¦è½¬åŒ–æˆä¸€ä¸ªæ–°çš„æ•°ç»„</span><br><span class="line">    // [] =&gt; [...fileList] [] =&gt; fileList.map()</span><br><span class="line">    // ä¸Šä¼ æˆåŠŸä¹‹å è¿˜ä¼šè¿›æ¥ éœ€è¦å®ç°ä¸Šä¼ ä»£ç çš„é€»è¾‘ è¿™é‡Œæ‰ä¼šæˆåŠŸ</span><br><span class="line">    changeFile(file, fileList) {</span><br><span class="line">      this.fileList = fileList.map(item =&gt; item)</span><br><span class="line">    },</span><br><span class="line">    beforeUpload(file) {</span><br><span class="line">      // è¦å¼€å§‹åšæ–‡ä»¶ä¸Šä¼ çš„æ£€æŸ¥äº†</span><br><span class="line">      // æ–‡ä»¶ç±»å‹ æ–‡ä»¶å¤§å°</span><br><span class="line">      const types = ['image/jpeg', 'image/gif', 'image/bmp', 'image/png']</span><br><span class="line">      if (!types.includes(file.type)) {</span><br><span class="line">        this.$message.error('ä¸Šä¼ å›¾ç‰‡åªèƒ½æ˜¯ JPGã€GIFã€BMPã€PNG æ ¼å¼!')</span><br><span class="line">        return false</span><br><span class="line">      }</span><br><span class="line">      //  æ£€æŸ¥å¤§å°</span><br><span class="line">      const maxSize = 5 * 1024 * 1024</span><br><span class="line">      if (maxSize &lt; file.size) {</span><br><span class="line">        this.$message.error('å›¾ç‰‡å¤§å°æœ€å¤§ä¸èƒ½è¶…è¿‡5M')</span><br><span class="line">        return false</span><br><span class="line">      }</span><br><span class="line">      // file.uid</span><br><span class="line">      this.currentFileUid = file.uid // è®°ä½å½“å‰çš„uid</span><br><span class="line">      this.showPercent = true</span><br><span class="line">      return true</span><br><span class="line">    },</span><br><span class="line">    // è‡ªå®šä¹‰ä¸Šä¼ åŠ¨ä½œ æœ‰ä¸ªå‚æ•° æœ‰ä¸ªfileå¯¹è±¡ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦ä¸Šä¼ åˆ°è…¾è®¯äº‘æœåŠ¡å™¨çš„å†…å®¹</span><br><span class="line">    upload(params) {</span><br><span class="line">      if (params.file) {</span><br><span class="line">        //  ä¸Šä¼ æ–‡ä»¶åˆ°è…¾è®¯äº‘</span><br><span class="line">        cos.putObject({</span><br><span class="line">          // é…ç½®</span><br><span class="line">          Bucket: 'laogao-1302806742', // å­˜å‚¨æ¡¶åç§°</span><br><span class="line">          Region: 'ap-guangzhou', // å­˜å‚¨æ¡¶åœ°åŸŸ</span><br><span class="line">          Key: params.file.name, // æ–‡ä»¶åä½œä¸ºkey</span><br><span class="line">          StorageClass: 'STANDARD', // æ­¤ç±»å†™æ­»</span><br><span class="line">          Body: params.file, // å°†æœ¬åœ°çš„æ–‡ä»¶èµ‹å€¼ç»™è…¾è®¯äº‘é…ç½®</span><br><span class="line">          // è¿›åº¦æ¡</span><br><span class="line">          onProgress: (params) =&gt; {</span><br><span class="line">            this.percent = params.percent * 100</span><br><span class="line">          }</span><br><span class="line">        }, (err, data) =&gt; {</span><br><span class="line">          // éœ€è¦åˆ¤æ–­é”™è¯¯ä¸æˆåŠŸ</span><br><span class="line">          if (!err &amp;&amp; data.statusCode === 200) {</span><br><span class="line">            // å¦‚æœæ²¡æœ‰å¤±è´¥è¡¨ç¤ºæˆåŠŸäº†</span><br><span class="line">            // æ­¤æ—¶è®¤ä¸ºä¸Šä¼ æˆåŠŸäº†</span><br><span class="line">            // this.currentFileUid</span><br><span class="line">            // ä»ç„¶æœ‰ä¸ªå°é—®é¢˜ï¼Œ æ¯”å¦‚æ­¤æ—¶æˆ‘ä»¬æ­£åœ¨ä¸Šä¼ ï¼Œä½†æ˜¯è°ƒç”¨äº†ä¿å­˜ï¼Œä¿å­˜åœ¨ä¸Šä¼ è¿‡ç¨‹ä¸­è¿›è¡Œï¼Œ</span><br><span class="line">            // æ­¤æ—¶ä¸Šä¼ è¿˜æ²¡æœ‰å®Œæˆ  æ­¤æ—¶å¯ä»¥è¿™æ ·åš ï¼š ç»™æ‰€æœ‰ä¸Šä¼ æˆåŠŸçš„å›¾ç‰‡ åŠ ä¸€ä¸ªå±æ€§ upload: true</span><br><span class="line">            this.fileList = this.fileList.map(item =&gt; {</span><br><span class="line">              if (item.uid === this.currentFileUid) {</span><br><span class="line">                //   uploadä¸ºtrueè¡¨ç¤º è¯¥å›¾ç‰‡å·²ç»æˆåŠŸä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œåœ°å€å·²ç»æ˜¯è…¾è®¯äº‘çš„åœ°å€äº†  å°±ä¸å¯ä»¥æ‰§è¡Œä¿å­˜äº†</span><br><span class="line">                return { url: 'http://' + data.Location, upload: true } // å°†æœ¬åœ°çš„åœ°å€æ¢æˆè…¾è®¯äº‘åœ°å€</span><br><span class="line">              }</span><br><span class="line">              return item</span><br><span class="line">            })</span><br><span class="line">            setTimeout(() =&gt; {</span><br><span class="line">              this.showPercent = false // éšè—è¿›åº¦æ¡</span><br><span class="line">              this.percent = 0 // è¿›åº¦å½’0</span><br><span class="line">            }, 2000)</span><br><span class="line"></span><br><span class="line">            // å°†è…¾è®¯äº‘åœ°å€å†™å…¥åˆ°fileListä¸Š ï¼Œä¿å­˜çš„æ—¶å€™ å°±å¯ä»¥ä»fileListä¸­ç›´æ¥è·å–å›¾ç‰‡åœ°å€</span><br><span class="line"></span><br><span class="line">            // æ­¤æ—¶æ³¨æ„ï¼Œæˆ‘ä»¬åº”è¯¥è®°ä½ å½“å‰ä¸Šä¼ çš„æ˜¯å“ªä¸ªå›¾ç‰‡  ä¸Šä¼ æˆåŠŸä¹‹åï¼Œå°†å›¾ç‰‡çš„åœ°å€èµ‹å€¼å›å»</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.disabled .el-upload--picture-card {</span><br><span class="line">  display: none</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šä¼ åŠ¨ä½œä¸­ï¼Œç”¨åˆ°äº†ä¸Šä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ³¨å†Œçš„è…¾è®¯äº‘cosçš„**<code>å­˜å‚¨æ¡¶åç§°</code><strong>å’Œ</strong><code>åœ°åŸŸåç§°</code>**</p>
</blockquote>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬æŠŠä¸Šä¼ ä¹‹åçš„å›¾ç‰‡ä¿¡æ¯éƒ½ç»™äº†**<code>fileListæ•°æ®</code><strong>ï¼Œé‚£ä¹ˆåœ¨åº”ç”¨æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥è·å–è¯¥å®ä¾‹çš„</strong><code>fileListæ•°æ®å³å¯</code>**</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å®Œæˆä¸Šä¼ ç»„ä»¶çš„å°è£…</p>
<h2 id="åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶"><a href="#åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶" class="headerlink" title="åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶"></a>åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶</h2><p>**<code>ç›®æ ‡</code>**ï¼šåº”ç”¨å°è£…å¥½çš„ä¸Šä¼ ç»„ä»¶</p>
<h3 id="å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶"><a href="#å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶" class="headerlink" title="å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶"></a>å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶</h3><p>åœ¨**<code>user-info.vue</code>**ä¸­æ”¾ç½®ä¸Šä¼ ç»„ä»¶</p>
<p><strong>å‘˜å·¥å¤´åƒ</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- å‘˜å·¥ç…§ç‰‡ --&gt;</span><br><span class="line">    &lt;el-row class="inline-info"&gt;</span><br><span class="line">      &lt;el-col :span="12"&gt;</span><br><span class="line">        &lt;el-form-item label="å‘˜å·¥å¤´åƒ"&gt;</span><br><span class="line">          &lt;!-- æ”¾ç½®ä¸Šä¼ å›¾ç‰‡ --&gt;</span><br><span class="line">          &lt;image-upload ref="staffPhoto" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯»å–æ—¶èµ‹å€¼å¤´åƒ</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»å–ä¸ŠåŠéƒ¨åˆ†çš„å†…å®¹</span></span><br><span class="line">   <span class="keyword">async</span> <span class="function"><span class="title">getUserDetailById</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.userInfo = <span class="keyword">await</span> getUserDetailById(<span class="built_in">this</span>.userId)</span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">this</span>.userInfo.staffPhoto) {</span><br><span class="line">       <span class="comment">// è¿™é‡Œæˆ‘ä»¬èµ‹å€¼ï¼ŒåŒæ—¶éœ€è¦ç»™èµ‹å€¼çš„åœ°å€ä¸€ä¸ªæ ‡è®° upload: true</span></span><br><span class="line">       <span class="built_in">this</span>.$refs.staffPhoto.fileList = [{ <span class="attr">url</span>: <span class="built_in">this</span>.userInfo.staffPhoto, <span class="attr">upload</span>: <span class="literal">true</span> }]</span><br><span class="line">     }</span><br><span class="line">   },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å‘˜å·¥è¯ä»¶ç…§</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-form-item label="å‘˜å·¥ç…§ç‰‡"&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®ä¸Šä¼ å›¾ç‰‡ --&gt;</span><br><span class="line">        &lt;!-- refä¸è¦é‡å --&gt;</span><br><span class="line">        &lt;image-upload ref="myStaffPhoto" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯»å–æ—¶èµ‹å€¼ç…§ç‰‡</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»å–ä¸‹åŠéƒ¨åˆ†å†…å®¹</span></span><br><span class="line">   <span class="keyword">async</span>  <span class="function"><span class="title">getPersonalDetail</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.formData = <span class="keyword">await</span> getPersonalDetail(<span class="built_in">this</span>.userId)</span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">this</span>.formData.staffPhoto) {</span><br><span class="line">       <span class="built_in">this</span>.$refs.myStaffPhoto.fileList = [{ <span class="attr">url</span>: <span class="built_in">this</span>.formData.staffPhoto, <span class="attr">upload</span>: <span class="literal">true</span> }]</span><br><span class="line">     }</span><br><span class="line">   },</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜"><a href="#ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜" class="headerlink" title="ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜"></a>ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜</h3><p><strong>å½“ç‚¹å‡»ä¿å­˜æ›´æ–°æ—¶ï¼Œè·å–å›¾ç‰‡çš„å†…å®¹</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span>  <span class="function"><span class="title">saveUser</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">// å»è¯»å– å‘˜å·¥ä¸Šä¼ çš„å¤´åƒ</span></span><br><span class="line">    <span class="keyword">const</span> fileList = <span class="built_in">this</span>.$refs.staffPhoto.fileList <span class="comment">// è¯»å–ä¸Šä¼ ç»„ä»¶çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (fileList.some(<span class="function"><span class="params">item</span> =&gt;</span> !item.upload)) {</span><br><span class="line">      <span class="comment">//  å¦‚æœæ­¤æ—¶å»æ‰¾ uploadä¸ºfalseçš„å›¾ç‰‡ æ‰¾åˆ°äº†è¯´æ˜ æœ‰å›¾ç‰‡è¿˜æ²¡æœ‰ä¸Šä¼ å®Œæˆ</span></span><br><span class="line">      <span class="built_in">this</span>.$message.warning(<span class="string">'æ‚¨å½“å‰è¿˜æœ‰å›¾ç‰‡æ²¡æœ‰ä¸Šä¼ å®Œæˆï¼'</span>)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// é€šè¿‡åˆå¹¶ å¾—åˆ°ä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">await</span> saveUserDetailById({ ...this.userInfo, <span class="attr">staffPhoto</span>: fileList &amp;&amp; fileList.length ? fileList[<span class="number">0</span>].url : <span class="string">''</span> })</span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜åŸºæœ¬ä¿¡æ¯æˆåŠŸ'</span>)</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œuploadå¦‚æœä¸ºtrueï¼Œè¡¨ç¤ºè¯¥å›¾ç‰‡å·²ç»å®Œæˆä¸Šä¼ ï¼Œä»¥æ­¤æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦å·²ç»ä¸Šä¼ å®Œæˆ</p>
</blockquote>
<p><strong>ä¿å­˜æ—¶è¯»å–å¤´åƒ</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">savePersonal</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="keyword">const</span> fileList = <span class="built_in">this</span>.$refs.myStaffPhoto.fileList</span><br><span class="line">   <span class="keyword">if</span> (fileList.some(<span class="function"><span class="params">item</span> =&gt;</span> !item.upload)) {</span><br><span class="line">     <span class="comment">//  å¦‚æœæ­¤æ—¶å»æ‰¾ uploadä¸ºfalseçš„å›¾ç‰‡ æ‰¾åˆ°äº†è¯´æ˜ æœ‰å›¾ç‰‡è¿˜æ²¡æœ‰ä¸Šä¼ å®Œæˆ</span></span><br><span class="line">     <span class="built_in">this</span>.$message.warning(<span class="string">'æ‚¨å½“å‰è¿˜æœ‰å›¾ç‰‡æ²¡æœ‰ä¸Šä¼ å®Œæˆï¼'</span>)</span><br><span class="line">     <span class="keyword">return</span></span><br><span class="line">   }</span><br><span class="line">   <span class="keyword">await</span> updatePersonal({ ...this.formData, <span class="attr">staffPhoto</span>: fileList &amp;&amp; fileList.length ? fileList[<span class="number">0</span>].url : <span class="string">''</span> })</span><br><span class="line">   <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜åŸºç¡€ä¿¡æ¯æˆåŠŸ'</span>)</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> ï¼š åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶</p>
<h2 id="å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡"><a href="#å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡" class="headerlink" title="å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡"></a>å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡</h2><p>**<code>ç›®æ ‡</code>**ï¼šåœ¨å‘˜å·¥åˆ—è¡¨ä¸­å¿ƒæ˜¾ç¤ºå›¾ç‰‡</p>
<blockquote>
<p>å‘˜å·¥çš„å¤´åƒå¯ä»¥åœ¨åˆ—è¡¨é¡¹ä¸­æ·»åŠ ä¸€åˆ—æ¥è¿›è¡Œæ˜¾ç¤º</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-table-column label="å¤´åƒ" align="center"&gt;</span><br><span class="line">            &lt;template slot-scope="{row}"&gt;</span><br><span class="line">              &lt;img</span><br><span class="line">                slot="reference"</span><br><span class="line">                v-imageerror="require('@/assets/common/bigUserHeader.png')"</span><br><span class="line">                :src="row.staffPhoto "</span><br><span class="line">                style="border-radius: 50%; width: 100px; height: 100px; padding: 10px"</span><br><span class="line">                alt=""</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬å°è¯•ç”¨ä¹‹å‰çš„æŒ‡ä»¤æ¥å¤„ç†å›¾ç‰‡çš„å¼‚å¸¸é—®é¢˜ï¼Œä½†æ˜¯å‘ç°åªæœ‰ä¸¤ä¸‰å¼ å›¾ç‰‡èƒ½æ˜¾ç¤º</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201028172654637.png" alt="image-20201028172654637"></p>
<blockquote>
<p>è¿™æ˜¯å› ä¸ºæœ‰çš„å‘˜å·¥çš„å¤´åƒçš„åœ°å€ä¸ºç©ºï¼Œç»™imgèµ‹å€¼ç©ºçš„srcä¸èƒ½è§¦å‘é”™è¯¯äº‹ä»¶ï¼Œé’ˆå¯¹è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æŒ‡ä»¤è¿›è¡Œå‡çº§</p>
</blockquote>
<p>æ’å…¥èŠ‚ç‚¹çš„é’©å­é‡Œé¢åˆ¤æ–­ç©ºï¼Œ ç„¶ååœ¨ç»„ä»¶æ›´æ–°ä¹‹åçš„é’©å­ä¸­åŒæ ·åˆ¤æ–­ç©º</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> imageerror = {</span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">dom, options</span>)</span> {</span><br><span class="line">    <span class="comment">//   å›¾ç‰‡å¼‚å¸¸çš„é€»è¾‘</span></span><br><span class="line">    <span class="comment">//  ç›‘å¬imgæ ‡ç­¾çš„é”™è¯¯äº‹ä»¶  å› ä¸ºå›¾ç‰‡åŠ è½½å¤±è´¥ ä¼šè§¦å‘  onerroräº‹ä»¶</span></span><br><span class="line">    dom.src = dom.src || options.value</span><br><span class="line"></span><br><span class="line">    dom.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">      <span class="comment">// å›¾ç‰‡å¤±è´¥  èµ‹å€¼ä¸€ä¸ªé»˜è®¤çš„å›¾ç‰‡</span></span><br><span class="line">      dom.src = options.value</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">componentUpdated</span>(<span class="params">dom, options</span>)</span> {</span><br><span class="line">    dom.src = dom.src || options.value</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>è¿™æ ·æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªç”¨æˆ·çš„å¤´åƒäº†ï¼Œå¦‚æœæ²¡æœ‰å¤´åƒåˆ™æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201028173333103.png" alt="image-20201028173333103"></p>
<p>**<code>ä»»åŠ¡</code>**ï¼šå‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡</p>
<h2 id="å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç "><a href="#å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç " class="headerlink" title="å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç "></a>å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç </h2><p><strong><code>ç›®æ ‡</code></strong> å°†å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç æ˜¾ç¤º</p>
<blockquote>
<p>æˆ‘ä»¬æƒ³å®Œæˆè¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œå½“æˆ‘ä»¬æ‹¥æœ‰å¤´åƒåœ°å€æ—¶ï¼Œå°†å¤´åƒåœ°å€ç”Ÿæˆä¸€ä¸ªäºŒç»´ç ï¼Œç”¨æ‰‹æœºæ‰«ç æ¥è®¿é—®</p>
</blockquote>
<p>é¦–å…ˆï¼Œéœ€è¦å®‰è£…ç”ŸæˆäºŒç»´ç çš„æ’ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i qrcode</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>qrcodeçš„ç”¨æ³•æ˜¯</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">QrCode.toCanvas(dom, info)</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>domä¸ºä¸€ä¸ªcanvasçš„domå¯¹è±¡ï¼Œ infoä¸ºè½¬åŒ–äºŒç»´ç çš„ä¿¡æ¯</p>
</blockquote>
<p>æˆ‘ä»¬å°è¯•å°†canvasæ ‡ç­¾æ”¾åˆ°dialogçš„å¼¹å±‚ä¸­</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-dialog title="äºŒç»´ç " :visible.sync="showCodeDialog" @opened="showQrCode" @close="imgUrl=''"&gt;</span><br><span class="line">  &lt;el-row type="flex" justify="center"&gt;</span><br><span class="line">    &lt;canvas ref="myCanvas" /&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ç‚¹å‡»å‘˜å·¥çš„å›¾ç‰‡æ—¶ï¼Œæ˜¾ç¤ºå¼¹å±‚ï¼Œå¹¶å°†å›¾ç‰‡åœ°å€è½¬åŒ–æˆäºŒç»´ç </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">showQrCode</span>(<span class="params">url</span>)</span> {</span><br><span class="line">  <span class="comment">// urlå­˜åœ¨çš„æƒ…å†µä¸‹ æ‰å¼¹å‡ºå±‚</span></span><br><span class="line">  <span class="keyword">if</span> (url) {</span><br><span class="line">    <span class="built_in">this</span>.showCodeDialog = <span class="literal">true</span> <span class="comment">// æ•°æ®æ›´æ–°äº† ä½†æ˜¯æˆ‘çš„å¼¹å±‚ä¼šç«‹åˆ»å‡ºç°å— ï¼Ÿé¡µé¢çš„æ¸²æŸ“æ˜¯å¼‚æ­¥çš„ï¼ï¼ï¼ï¼</span></span><br><span class="line">    <span class="comment">// æœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥åœ¨ä¸Šä¸€æ¬¡æ•°æ®æ›´æ–°å®Œæ¯•ï¼Œé¡µé¢æ¸²æŸ“å®Œæ¯•ä¹‹å</span></span><br><span class="line">    <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> {</span><br><span class="line">      <span class="comment">// æ­¤æ—¶å¯ä»¥ç¡®è®¤å·²ç»æœ‰refå¯¹è±¡äº†</span></span><br><span class="line">      QrCode.toCanvas(<span class="built_in">this</span>.$refs.myCanvas, url) <span class="comment">// å°†åœ°å€è½¬åŒ–æˆäºŒç»´ç </span></span><br><span class="line">      <span class="comment">// å¦‚æœè½¬åŒ–çš„äºŒç»´ç åé¢ä¿¡æ¯ æ˜¯ä¸€ä¸ªåœ°å€çš„è¯ å°±ä¼šè·³è½¬åˆ°è¯¥åœ°å€ å¦‚æœä¸æ˜¯åœ°å€å°±ä¼šæ˜¾ç¤ºå†…å®¹</span></span><br><span class="line">    })</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="built_in">this</span>.$message.warning(<span class="string">'è¯¥ç”¨æˆ·è¿˜æœªä¸Šä¼ å¤´åƒ'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201028180651472.png" alt="image-20201028180651472"></p>
<h2 id="æ‰“å°å‘˜å·¥ä¿¡æ¯"><a href="#æ‰“å°å‘˜å·¥ä¿¡æ¯" class="headerlink" title="æ‰“å°å‘˜å·¥ä¿¡æ¯"></a>æ‰“å°å‘˜å·¥ä¿¡æ¯</h2><p><strong><code>ç›®æ ‡</code></strong> å®Œæˆä¸ªäººä¿¡æ¯å’Œå·¥ä½œä¿¡æ¯çš„æ‰“å°åŠŸèƒ½</p>
<h3 id="æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±"><a href="#æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±" class="headerlink" title="æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±"></a>æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±</h3><p><strong>åˆ›å»ºé¡µé¢ç»„ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container" id="myPrint"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;el-card&gt;</span><br><span class="line">        &lt;el-breadcrumb separator="/" class="titInfo "&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to="{ path: '/' }"&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;</span><br><span class="line">            &lt;router-link :to="{'path':'/employees'}"&gt;å‘˜å·¥ç®¡ç†&lt;/router-link&gt;</span><br><span class="line">          &lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;æ‰“å°&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;div v-if="type === 'personal'"&gt;</span><br><span class="line">          &lt;h2 class="centInfo"&gt;å‘˜å·¥ä¿¡æ¯è¡¨&lt;/h2&gt;</span><br><span class="line">          &lt;table cellspacing="0" width="100%" class="tableList"&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;åŸºæœ¬ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;å§“å&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6" style="width:80%"&gt;{{ formData.username }}&lt;/td&gt;</span><br><span class="line">              &lt;td rowspan="5" style="width:10%"&gt;&lt;img style="width:155px;height:218px" :src="formData.staffPhoto"&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æ€§åˆ«&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6"&gt;{{ formData.sex }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æ‰‹æœº&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6"&gt;{{ formData.mobile }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å‡ºç”Ÿæ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6"&gt;{{ formData.dateOfBirth | formatDate }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æœ€é«˜å­¦å†&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6"&gt;{{ formData.theHighestDegreeOfEducation }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;æ˜¯å¦å¯ç¼–è¾‘&lt;/th&gt;</span><br><span class="line">              &lt;td style="width:35%"&gt;{{ formData.isItEditable }}&lt;/td&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;æ˜¯å¦éšè—å·ç &lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5" style="width:45%"&gt;{{ formData.doYouHideNumbers }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å›½å®¶åœ°åŒº&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.nationalArea }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æŠ¤ç…§å·&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.passportNo }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;èº«ä»½è¯å·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.idNumber }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;èº«ä»½è¯ç…§ç‰‡&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.iDCardPhoto }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç±è´¯&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.nativePlace }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ°‘æ—&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.nation }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;è‹±æ–‡å&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.englishName }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å©šå§»çŠ¶å†µ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.maritalStatus }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å‘˜å·¥ç…§ç‰‡&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.staffPhoto }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;ç”Ÿæ—¥&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.birthday }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å±ç›¸&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.zodiac }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.age }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æ˜Ÿåº§&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.constellation }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è¡€å‹&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.bloodType }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æˆ·ç±æ‰€åœ¨åœ°&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.domicile }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ”¿æ²»é¢è²Œ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.politicalOutlook }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å…¥å…šæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.timeToJoinTheParty }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å­˜æ¡£æœºæ„&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.archivingOrganization }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å­å¥³çŠ¶æ€&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.stateOfChildren }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å­å¥³æœ‰æ— å•†ä¸šä¿é™©&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.doChildrenHaveCommercialInsurance }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æœ‰æ— è¿æ³•è¿çºªè¡Œä¸º&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.isThereAnyViolationOfLawOrDiscipline }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æœ‰æ— é‡å¤§ç—…å²&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.areThereAnyMajorMedicalHistories }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;é€šè®¯ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;QQ&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.qQ }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å¾®ä¿¡&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.weChat }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å±…ä½è¯åŸå¸‚&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.residenceCardCity }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å±…ä½è¯åŠç†æ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.dateOfResidencePermit }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å±…ä½è¯æˆªæ­¢æ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.residencePermitDeadline }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;ç°å±…ä½åœ°&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.placeOfResidence }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;é€šè®¯åœ°å€&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.postalAddress }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è”ç³»æ‰‹æœº&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.contactTheMobilePhone }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ä¸ªäººé‚®ç®±&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.personalMailbox }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;ç´§æ€¥è”ç³»äºº&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.emergencyContact }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç´§æ€¥è”ç³»ç”µè¯&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="7"&gt;{{ formData.emergencyContactNumber }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;è´¦å·ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç¤¾ä¿ç”µè„‘å·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.socialSecurityComputerNumber }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å…¬ç§¯é‡‘è´¦å·&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.providentFundAccount }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;é“¶è¡Œå¡å·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.bankCardNumber }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å¼€æˆ·è¡Œ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.openingBank }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;æ•™è‚²ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å­¦å†ç±»å‹&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.educationalType }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ¯•ä¸šå­¦æ ¡&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.graduateSchool }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å…¥å­¦æ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.enrolmentTime }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ¯•ä¸šæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.graduationTime }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ä¸“ä¸š&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.major }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ¯•ä¸šè¯ä¹¦&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.graduationCertificate }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å­¦ä½è¯ä¹¦&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="7"&gt;{{ formData.certificateOfAcademicDegree }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;ä»ä¸šä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ä¸Šå®¶å…¬å¸&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.homeCompany }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;èŒç§°&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.title }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç®€å†&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.resume }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æœ‰æ— ç«ä¸šé™åˆ¶&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.isThereAnyCompetitionRestriction }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å‰å…¬å¸ç¦»èŒè¯æ˜&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.proofOfDepartureOfFormerCompany }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å¤‡æ³¨&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.remarks }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/table&gt;</span><br><span class="line">          &lt;div class="foot"&gt;ç­¾å­—ï¼š___________æ—¥æœŸ:___________&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div v-else&gt;</span><br><span class="line">          &lt;h2 class="centInfo"&gt;å²—ä½ä¿¡æ¯è¡¨&lt;/h2&gt;</span><br><span class="line">          &lt;table cellspacing="0" width="100%" class="tableList"&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="4" class="centInfo"&gt;åŸºæœ¬ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;å§“å&lt;/th&gt;</span><br><span class="line">              &lt;td style="width:40%"&gt;{{ formData.username }}&lt;/td&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;å…¥èŒæ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td style="width:40%"&gt;{{ formData.dateOfEntry }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;éƒ¨é—¨&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.departmentName }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å²—ä½&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.post }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å·¥ä½œé‚®ç®±&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.workMailbox }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å·¥å·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.workNumber }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;è½¬æ­£æ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.dateOfCorrection }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è½¬æ­£çŠ¶æ€&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.stateOfCorrection }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;èŒçº§&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.rank }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ±‡æŠ¥å¯¹è±¡&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.reportName }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;HRBP&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.hRBP }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è˜ç”¨å½¢å¼&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.formOfEmployment }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç®¡ç†å½¢å¼&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.formOfManagement }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è°ƒæ•´å¸é¾„&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.adjustmentAgedays }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å¸é¾„&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.ageOfDivision }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;é¦–æ¬¡å‚åŠ å·¥ä½œæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.workingTimeForTheFirstTime }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;è°ƒæ•´å·¥é¾„å¤©&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.adjustmentOfLengthOfService }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å·¥é¾„&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.workingYears }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;çº³ç¨åŸå¸‚&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.taxableCity }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è½¬æ­£è¯„ä»·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.correctionEvaluation }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="4" class="centInfo"&gt;åˆåŒä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;é¦–æ¬¡åˆåŒå¼€å§‹æ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.initialContractStartTime }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;é¦–æ¬¡åˆåŒç»“æŸæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.firstContractTerminationTime }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç°åˆåŒå¼€å§‹æ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.currentContractStartTime }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;ç°åˆåŒç»“æŸæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.closingTimeOfCurrentContract }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;åˆåŒæœŸé™&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.contractPeriod }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;åˆåŒæ–‡ä»¶&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.contractDocuments }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç»­ç­¾æ¬¡æ•°&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="3"&gt;{{ formData.renewalNumber }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="4" class="centInfo"&gt;æ‹›è˜ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å…¶ä»–æ‹›è˜æ¸ é“&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.otherRecruitmentChannels }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ‹›è˜æ¸ é“&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.recruitmentChannels }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç¤¾æ‹›æ ¡æ‹›&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.socialRecruitment }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ¨èä¼ä¸šäºº&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.recommenderBusinessPeople }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/table&gt;</span><br><span class="line">          &lt;div class="foot"&gt;ç­¾å­—ï¼š___________æ—¥æœŸ:___________&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { getPersonalDetail, getJobDetail } from '@/api/employees'</span><br><span class="line">import { getUserDetailById } from '@/api/user'</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      formData: {},</span><br><span class="line">      userId: this.$route.params.id,</span><br><span class="line">      type: this.$route.query.type // æ‰“å°ç±»å‹</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // åˆ›å»ºå®Œæ¯•çŠ¶æ€</span><br><span class="line">  created() {</span><br><span class="line">    this.type === 'personal' ? this.getPersonalDetail() : this.getJobDetail()</span><br><span class="line">  },</span><br><span class="line">  // ç»„ä»¶æ›´æ–°</span><br><span class="line">  methods: {</span><br><span class="line">    async getPersonalDetail() {</span><br><span class="line">      this.formData = await getPersonalDetail(this.userId) // è·å–ä¸ªäººåŸºæœ¬ä¿¡æ¯</span><br><span class="line">    },</span><br><span class="line">    async getJobDetail() {</span><br><span class="line">      const userInfo = await getUserDetailById(this.userId)</span><br><span class="line">      const jobInfo = await getJobDetail(this.userId) // è·å–ä¸ªäººåŸºæœ¬ä¿¡æ¯</span><br><span class="line">      this.formData = { ...userInfo, ...jobInfo }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="scss"&gt;</span><br><span class="line">.foot {</span><br><span class="line">  padding: 30px 0;</span><br><span class="line">  text-align: right;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¯¥é¡µé¢å†…å®¹å®é™…ä¸Šå°±æ˜¯è¯»å–ä¸ªäººå’Œè¯¦æƒ…çš„æ¥å£æ•°æ®ï¼Œæ ¹æ®ä¼ å…¥çš„typeç±»å‹å†³å®šæ˜¾ç¤ºä¸ªäººè¿˜æ˜¯å²—ä½</p>
</blockquote>
<p>typeä¸º**<code>personal</code><strong>æ—¶æ˜¾ç¤ºä¸ªäººï¼Œä¸º</strong><code>job</code>**æ—¶æ˜¾ç¤ºå²—ä½</p>
<p><strong>æ–°å»ºæ‰“å°é¡µé¢è·¯ç”±</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'print/:id'</span>, <span class="comment">// äºŒçº§é»˜è®¤è·¯ç”±</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/employees/print'</span>), <span class="comment">// æŒ‰éœ€åŠ è½½</span></span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">meta</span>: {</span><br><span class="line">      <span class="attr">title</span>: <span class="string">'æ‰“å°'</span>, <span class="comment">// æ ‡è®°å½“å‰è·¯ç”±è§„åˆ™çš„ä¸­æ–‡åç§° åç»­åœ¨åšå·¦ä¾§èœå•æ—¶ ä½¿ç”¨</span></span><br><span class="line">      <span class="attr">icon</span>: <span class="string">'people'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>å®Œæˆè¯¦æƒ…åˆ°æ‰“å°çš„è·³è½¬</p>
<p><strong>ä¸ªäºº</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">           &lt;el-tooltip content="æ‰“å°ä¸ªäººåŸºæœ¬ä¿¡æ¯"&gt;</span><br><span class="line">               &lt;router-link :to="`/employees/print/${userId}?type=personal`"&gt;</span><br><span class="line">                 &lt;i class="el-icon-printer" /&gt;</span><br><span class="line">               &lt;/router-link&gt;</span><br><span class="line">            &lt;/el-tooltip&gt;</span><br><span class="line"> &lt;/el-row&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å²—ä½</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">            &lt;el-tooltip content="æ‰“å°å²—ä½ä¿¡æ¯"&gt;</span><br><span class="line">              &lt;router-link :to="`/employees/print/${userId}?type=job`"&gt;</span><br><span class="line">                &lt;i class="el-icon-printer"  /&gt;</span><br><span class="line">              &lt;/router-link&gt;</span><br><span class="line">            &lt;/el-tooltip&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°"><a href="#åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°" class="headerlink" title="åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°"></a>åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°</h3><p>é¦–å…ˆï¼Œæ‰“å°åŠŸèƒ½æˆ‘ä»¬å€ŸåŠ©ä¸€ä¸ªæ¯”è¾ƒæµè¡Œçš„æ’ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i vue-print-nb</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å®ƒçš„ç”¨æ³•æ˜¯ </p>
</blockquote>
<p>é¦–å…ˆæ³¨å†Œè¯¥æ’ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Print <span class="keyword">from</span> <span class="string">'vue-print-nb'</span></span><br><span class="line">Vue.use(Print);</span><br></pre></td></tr></tbody></table></figure>

<p>ä½¿ç”¨v-printæŒ‡ä»¤çš„æ–¹å¼è¿›è¡Œæ‰“å°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">        &lt;el-button v-print="printObj" size="small" type="primary"&gt;æ‰“å°&lt;/el-button&gt;</span><br><span class="line"> &lt;/el-row&gt;</span><br><span class="line"> printObj: {</span><br><span class="line">      id: 'myPrint'</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ•ˆæœ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200728013006535.png" alt="image-20200728013006535"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<h1 id="8-æƒé™è®¾è®¡å’Œç®¡ç†"><a href="#8-æƒé™è®¾è®¡å’Œç®¡ç†" class="headerlink" title="8.æƒé™è®¾è®¡å’Œç®¡ç†"></a>8.æƒé™è®¾è®¡å’Œç®¡ç†</h1><h2 id="æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³"><a href="#æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³" class="headerlink" title="æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³"></a>æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³</h2><blockquote>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹ä»€ä¹ˆæ˜¯ä¼ ç»Ÿçš„æƒé™è®¾è®¡</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901150655343.png" alt="image-20200901150655343"></p>
<p>ä»ä¸Šé¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä¼ ç»Ÿçš„æƒé™è®¾è®¡æ˜¯å¯¹æ¯ä¸ªäººè¿›è¡Œå•ç‹¬çš„æƒé™è®¾ç½®ï¼Œä½†è¿™ç§æ–¹å¼å·²ç»ä¸é€‚åˆç›®å‰ä¼ä¸šçš„é«˜æ•ˆç®¡æ§æƒé™çš„å‘å±•éœ€æ±‚ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½è¦å•ç‹¬å»è®¾ç½®æƒé™</p>
<blockquote>
<p>  åŸºäºæ­¤ï¼ŒRBACçš„æƒé™æ¨¡å‹å°±åº”è¿è€Œç”Ÿäº†ï¼ŒRBAC(Role-Based Access control) ï¼Œä¹Ÿå°±æ˜¯åŸºäºè§’è‰²çš„æƒé™åˆ†é…è§£å†³æ–¹æ¡ˆï¼Œç›¸å¯¹äºä¼ ç»Ÿæ–¹æ¡ˆï¼ŒRBACæä¾›äº†ä¸­é—´å±‚Roleï¼ˆè§’è‰²ï¼‰ï¼Œå…¶æƒé™æ¨¡å¼å¦‚ä¸‹</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901151025021.png" alt="image-20200901151025021"></p>
<p>RBACå®ç°äº†ç”¨æˆ·å’Œæƒé™ç‚¹çš„åˆ†ç¦»ï¼Œæƒ³å¯¹æŸä¸ªç”¨æˆ·è®¾ç½®æƒé™ï¼Œåªéœ€è¦å¯¹è¯¥ç”¨æˆ·è®¾ç½®ç›¸åº”çš„è§’è‰²å³å¯ï¼Œè€Œè¯¥è§’è‰²å°±æ‹¥æœ‰äº†å¯¹åº”çš„æƒé™ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæƒé™çš„åˆ†é…å’Œè®¾è®¡å°±åšåˆ°äº†æç®€ï¼Œé«˜æ•ˆï¼Œå½“æƒ³å¯¹ç”¨æˆ·æ”¶å›æƒé™æ—¶ï¼Œåªéœ€è¦æ”¶å›è§’è‰²å³å¯ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åœ¨è¯¥é¡¹ç›®ä¸­å®æ–½è¿™ä¸€è®¾æƒ³</p>
<h2 id="ç»™åˆ†é…å‘˜å·¥è§’è‰²"><a href="#ç»™åˆ†é…å‘˜å·¥è§’è‰²" class="headerlink" title="ç»™åˆ†é…å‘˜å·¥è§’è‰²"></a>ç»™åˆ†é…å‘˜å·¥è§’è‰²</h2><p>**<code>ç›®æ ‡</code>**åœ¨å‘˜å·¥ç®¡ç†é¡µé¢ï¼Œåˆ†é…è§’è‰²</p>
<h3 id="æ–°å»ºåˆ†é…è§’è‰²çª—ä½“"><a href="#æ–°å»ºåˆ†é…è§’è‰²çª—ä½“" class="headerlink" title="æ–°å»ºåˆ†é…è§’è‰²çª—ä½“"></a>æ–°å»ºåˆ†é…è§’è‰²çª—ä½“</h3><blockquote>
<p>åœ¨ä¸Šä¸€èŠ‚ç« èŠ‚ä¸­ï¼Œå‘˜å·¥ç®¡ç†çš„è§’è‰²åŠŸèƒ½ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å®ç°ï¼Œæ­¤ç« èŠ‚æˆ‘ä»¬å®ç°ç»™å‘˜å·¥åˆ†é…è§’è‰²</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901151151286.png" alt="image-20200901151151286"></p>
<p>ä»ä¸Šå›¾ä¸­ï¼Œå¯ä»¥çœ‹å‡ºï¼Œç”¨æˆ·å’Œè§’è‰²æ˜¯**<code>1å¯¹å¤š</code>**çš„å…³ç³»ï¼Œå³ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰å¤šä¸ªè§’è‰²ï¼Œæ¯”å¦‚å…¬å¸çš„è‘£äº‹é•¿å¯ä»¥æ‹¥æœ‰æ€»ç»ç†å’Œç³»ç»Ÿç®¡ç†å‘˜ä¸€æ ·çš„è§’è‰²</p>
<p>é¦–å…ˆï¼Œæ–°å»ºåˆ†é…è§’è‰²çª—ä½“ <strong><code>assign-role.vue</code></strong>   </p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200728172853451.png" alt="image-20200728172853451"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog title="åˆ†é…è§’è‰²" :visible="showRoleDialog"&gt;</span><br><span class="line">    &lt;!-- el-checkbox-groupé€‰ä¸­çš„æ˜¯ å½“å‰ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è§’è‰²  éœ€è¦ç»‘å®š å½“å‰ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²--&gt;</span><br><span class="line">    &lt;el-checkbox-group&gt;</span><br><span class="line">      &lt;!-- é€‰é¡¹ --&gt;</span><br><span class="line">    &lt;/el-checkbox-group&gt;</span><br><span class="line">    &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">      &lt;el-col :span="6"&gt;</span><br><span class="line">        &lt;el-button type="primary" size="small"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size="small"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    showRoleDialog: {</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    },</span><br><span class="line">    // ç”¨æˆ·çš„id ç”¨æ¥æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è§’è‰²ä¿¡æ¯</span><br><span class="line">    userId: {</span><br><span class="line">      type: String,</span><br><span class="line">      default: null</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²"><a href="#è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²" class="headerlink" title="è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²"></a>è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²</h3><p><strong>è·å–æ‰€æœ‰è§’è‰²åˆ—è¡¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- åˆ†é…è§’è‰² --&gt;</span><br><span class="line">  &lt;el-checkbox-group v-model="roleIds"&gt;</span><br><span class="line">    &lt;el-checkbox v-for="item in list" :key="item.id" :label="item.id"&gt;</span><br><span class="line">      {{</span><br><span class="line">        item.name</span><br><span class="line">      }}</span><br><span class="line">    &lt;/el-checkbox&gt;</span><br><span class="line">  &lt;/el-checkbox-group&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è·å–è§’è‰²åˆ—è¡¨</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getRoleList } <span class="keyword">from</span> <span class="string">'@/api/setting'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">props</span>: {</span><br><span class="line">    <span class="attr">showRoleDialog</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">userId</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">null</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">list</span>: [], <span class="comment">// è§’è‰²åˆ—è¡¨</span></span><br><span class="line">      <span class="attr">roleIds</span>: []</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getRoleList()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="comment">//  è·å–æ‰€æœ‰è§’è‰²</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getRoleList</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> { rows } = <span class="keyword">await</span> getRoleList()</span><br><span class="line">      <span class="built_in">this</span>.list = rows</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è·å–ç”¨æˆ·çš„å½“å‰è§’è‰²</strong>  </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { getUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">async</span> <span class="function"><span class="title">getUserDetailById</span>(<span class="params">id</span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> { roleIds } = <span class="keyword">await</span> getUserDetailById(id)</span><br><span class="line">      <span class="built_in">this</span>.roleIds = roleIds <span class="comment">// èµ‹å€¼æœ¬ç”¨æˆ·çš„è§’è‰²</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç‚¹å‡»è§’è‰²å¼¹å‡ºå±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">// ç¼–è¾‘è§’è‰²</span><br><span class="line"> async  editRole(id) {</span><br><span class="line">      this.userId = id // propsä¼ å€¼ æ˜¯å¼‚æ­¥çš„</span><br><span class="line">      await this.$refs.assignRole.getUserDetailById(id) // çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•</span><br><span class="line">      this.showRoleDialog = true</span><br><span class="line">    },</span><br><span class="line">  &lt;!-- æ”¾ç½®è§’è‰²åˆ†é…ç»„ä»¶ --&gt;</span><br><span class="line"> &lt;assign-role ref="assignRole" :show-role-dialog.sync="showRoleDialog" :user-id="userId" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç»™å‘˜å·¥åˆ†é…è§’è‰²"><a href="#ç»™å‘˜å·¥åˆ†é…è§’è‰²" class="headerlink" title="ç»™å‘˜å·¥åˆ†é…è§’è‰²"></a>ç»™å‘˜å·¥åˆ†é…è§’è‰²</h3><p><strong>åˆ†é…è§’è‰²æ¥å£</strong>  <strong><code>api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * ç»™ç”¨æˆ·åˆ†é…è§’è‰²</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">assignRoles</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user/assignRoles'</span>,</span><br><span class="line">    data,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¡®å®šä¿å­˜</strong>  <strong><code>assign-role</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">await</span> assignRoles({ <span class="attr">id</span>: <span class="built_in">this</span>.userId, <span class="attr">roleIds</span>: <span class="built_in">this</span>.roleIds })</span><br><span class="line">      <span class="comment">//   å…³é—­çª—ä½“</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'update:showRoleDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">    },</span><br></pre></td></tr></tbody></table></figure>

<p>**å–æ¶ˆæˆ–è€…å…³é—­ **  <strong><code>assign-role</code></strong> </p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.roleIds = [] <span class="comment">// æ¸…ç©ºåŸæ¥çš„æ•°ç»„</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'update:showRoleDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> åˆ†é…å‘˜å·¥æƒé™</p>
<h2 id="æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘"><a href="#æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘" class="headerlink" title="æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘"></a>æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®Œæˆæƒé™ç‚¹é¡µé¢çš„å¼€å‘å’Œç®¡ç†</p>
<h3 id="æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢"><a href="#æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢" class="headerlink" title="æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢"></a>æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢</h3><blockquote>
<p>äººå·²ç»æœ‰äº†è§’è‰²ï¼Œ é‚£ä¹ˆæƒé™æ˜¯ä»€ä¹ˆ</p>
</blockquote>
<p>åœ¨ä¼ä¸šæœåŠ¡ä¸­ï¼Œæƒé™ä¸€èˆ¬åˆ†å‰²ä¸º <strong>é¡µé¢è®¿é—®æƒé™</strong>ï¼Œ<strong>æŒ‰é’®æ“ä½œæƒé™</strong>ï¼Œ<strong>APIè®¿é—®æƒé™</strong></p>
<blockquote>
<p>APIæƒé™å¤šè§äºåœ¨åç«¯è¿›è¡Œæ‹¦æˆªï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ä¸€ç‰ˆæœ¬åªåš**<code>é¡µé¢è®¿é—®</code><strong>å’Œ</strong><code>æŒ‰é’®æ“ä½œæˆæƒ</code>/**</p>
</blockquote>
<p>ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾è®¡æƒé™ç®¡ç†é¡µé¢</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901160508382.png" alt="image-20200901160508382"></p>
<p><strong>å®Œæˆæƒé™é¡µé¢ç»“æ„</strong> <strong><code>src/views/permission/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;!-- é å³çš„æŒ‰é’® --&gt;</span><br><span class="line">      &lt;page-tools&gt;</span><br><span class="line">        &lt;template v-slot:after&gt;</span><br><span class="line">          &lt;el-button type="primary" size="small"&gt;æ·»åŠ æƒé™&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/page-tools&gt;</span><br><span class="line">      &lt;!-- è¡¨æ ¼ --&gt;</span><br><span class="line">      &lt;el-table border&gt;</span><br><span class="line">        &lt;el-table-column align="center" label="åç§°" /&gt;</span><br><span class="line">        &lt;el-table-column align="center" label="æ ‡è¯†" /&gt;</span><br><span class="line">        &lt;el-table-column align="center" label="æè¿°" /&gt;</span><br><span class="line">        &lt;el-table-column align="center" label="æ“ä½œ"&gt;</span><br><span class="line">          &lt;template&gt;</span><br><span class="line">            &lt;el-button type="text"&gt;æ·»åŠ &lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type="text"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type="text"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å°è£…æƒé™ç®¡ç†çš„å¢åˆ æ”¹æŸ¥è¯·æ±‚</strong>  <strong><code>src/api/permisson.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getPermissionList</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/permission'</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"><span class="comment">// æ–°å¢æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addPermission</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/permission'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updatePermission</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">${data.id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">delPermission</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">${id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'delete'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"><span class="comment">// è·å–æƒé™è¯¦æƒ…</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getPermissionDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢"><a href="#è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢" class="headerlink" title="è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢"></a>è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢</h3><p>è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡æ ‘å½¢æ“ä½œæ–¹æ³•ï¼Œå°†åˆ—è¡¨è½¬åŒ–æˆå±‚çº§æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import { getPermissionList } from '@/api/permission'</span><br><span class="line">import { transListToTreeData } from '@/utils'</span><br><span class="line">export default {</span><br><span class="line">data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [],</span><br><span class="line">      formData: {</span><br><span class="line">        name: '', // åç§°</span><br><span class="line">        code: '', // æ ‡è¯†</span><br><span class="line">        description: '', // æè¿°</span><br><span class="line">        type: '', // ç±»å‹ è¯¥ç±»å‹ ä¸éœ€è¦æ˜¾ç¤º å› ä¸ºç‚¹å‡»æ·»åŠ çš„æ—¶å€™å·²ç»çŸ¥é“ç±»å‹äº†</span><br><span class="line">        pid: '', // å› ä¸ºåšçš„æ˜¯æ ‘ éœ€è¦çŸ¥é“æ·»åŠ åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸‹äº†</span><br><span class="line">        enVisible: '0' // å¼€å¯</span><br><span class="line">      },</span><br><span class="line">      rules: {</span><br><span class="line">        name: [{ required: true, message: 'æƒé™åç§°ä¸èƒ½ä¸ºç©º', trigger: 'blur' }],</span><br><span class="line">        code: [{ required: true, message: 'æƒé™æ ‡è¯†ä¸èƒ½ä¸ºç©º', trigger: 'blur' }]</span><br><span class="line">      },</span><br><span class="line">      showDialog: false</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  created() {</span><br><span class="line">    this.getPermissionList()</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    showText() {</span><br><span class="line">      return this.formData.id ? 'ç¼–è¾‘' : 'æ–°å¢'</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    async  getPermissionList() {</span><br><span class="line">      this.list = transListToTreeData(await getPermissionList(), '0')</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šè¡¨æ ¼æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-table :data="list" border="" row-key="id"&gt;</span><br><span class="line">        &lt;el-table-column label="åç§°" prop="name" /&gt;</span><br><span class="line">        &lt;el-table-column label="æ ‡è¯†" prop="code" /&gt;</span><br><span class="line">        &lt;el-table-column label="æè¿°" prop="description" /&gt;</span><br><span class="line">        &lt;el-table-column label="æ“ä½œ"&gt;</span><br><span class="line">          &lt;template slot-scope="{ row }"&gt;</span><br><span class="line">            &lt;el-button v-if="row.type === 1" type="text" @click="addPermission(row.id, 2)"&gt;æ·»åŠ &lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type="text" @click="editPermission(row.id)"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type="text" @click="delPermission(row.id)"&gt; åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ å¦‚æœéœ€è¦æ ‘è¡¨ï¼Œ éœ€è¦ç»™<strong>el-table</strong>é…ç½®<strong>row-key</strong>å±æ€§  id</p>
<blockquote>
<p>å½“typeä¸º1æ—¶ä¸ºè®¿é—®æƒé™ï¼Œtypeä¸º2æ—¶ä¸ºåŠŸèƒ½æƒé™</p>
</blockquote>
<blockquote>
<p>å’Œå‰é¢å†…å®¹ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆ æ–°å¢æƒé™ / åˆ é™¤æƒé™ / ç¼–è¾‘æƒé™</p>
</blockquote>
<h3 id="æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚"><a href="#æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚" class="headerlink" title="æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚"></a>æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚</h3><p><strong>æ–°å¢æƒé™/ç¼–è¾‘æƒé™å¼¹å±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®ä¸€ä¸ªå¼¹å±‚ ç”¨æ¥ç¼–è¾‘æ–°å¢èŠ‚ç‚¹ --&gt;</span><br><span class="line"> &lt;el-dialog :title="`${showText}æƒé™ç‚¹`" :visible="showDialog" @close="btnCancel"&gt;</span><br><span class="line">    &lt;!-- è¡¨å• --&gt;</span><br><span class="line">    &lt;el-form ref="perForm" :model="formData" :rules="rules" label-width="120px"&gt;</span><br><span class="line">      &lt;el-form-item label="æƒé™åç§°" prop="name"&gt;</span><br><span class="line">        &lt;el-input v-model="formData.name" style="width:90%" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="æƒé™æ ‡è¯†" prop="code"&gt;</span><br><span class="line">        &lt;el-input v-model="formData.code" style="width:90%" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="æƒé™æè¿°"&gt;</span><br><span class="line">        &lt;el-input v-model="formData.description" style="width:90%" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="å¼€å¯"&gt;</span><br><span class="line">        &lt;el-switch</span><br><span class="line">          v-model="formData.enVisible"</span><br><span class="line">          active-value="1"</span><br><span class="line">          inactive-value="0"</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">      &lt;el-col :span="6"&gt;</span><br><span class="line">        &lt;el-button size="small" type="primary" @click="btnOK"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size="small" @click="btnCancel"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹"><a href="#æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹" class="headerlink" title="æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹"></a>æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹</h3><p><strong>æ–°å¢/åˆ é™¤/ç¼–è¾‘é€»è¾‘</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { updatePermission, addPermission, getPermissionDetail, delPermission, getPermissionList } <span class="keyword">from</span> <span class="string">'@/api/permission'</span></span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">     <span class="comment">// åˆ é™¤æ“ä½œ</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">delPermission</span>(<span class="params">id</span>)</span> {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">await</span> <span class="built_in">this</span>.$confirm(<span class="string">'ç¡®å®šè¦åˆ é™¤è¯¥æ•°æ®å—'</span>)</span><br><span class="line">        <span class="keyword">await</span> delPermission(id)</span><br><span class="line">        <span class="built_in">this</span>.getPermissionList()</span><br><span class="line">        <span class="built_in">this</span>.$message.success(<span class="string">'åˆ é™¤æˆåŠŸ'</span>)</span><br><span class="line">      } <span class="keyword">catch</span> (error) {</span><br><span class="line">        <span class="built_in">console</span>.log(error)</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.$refs.perForm.validate().then(<span class="function">() =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) {</span><br><span class="line">          <span class="keyword">return</span> updatePermission(<span class="built_in">this</span>.formData)</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> addPermission(<span class="built_in">this</span>.formData)</span><br><span class="line">      }).then(<span class="function">() =&gt;</span> {</span><br><span class="line">        <span class="comment">//  æç¤ºæ¶ˆæ¯</span></span><br><span class="line">        <span class="built_in">this</span>.$message.success(<span class="string">'æ–°å¢æˆåŠŸ'</span>)</span><br><span class="line">        <span class="built_in">this</span>.getPermissionList()</span><br><span class="line">        <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.formData = {</span><br><span class="line">        <span class="attr">name</span>: <span class="string">''</span>, <span class="comment">// åç§°</span></span><br><span class="line">        <span class="attr">code</span>: <span class="string">''</span>, <span class="comment">// æ ‡è¯†</span></span><br><span class="line">        <span class="attr">description</span>: <span class="string">''</span>, <span class="comment">// æè¿°</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">''</span>, <span class="comment">// ç±»å‹ è¯¥ç±»å‹ ä¸éœ€è¦æ˜¾ç¤º å› ä¸ºç‚¹å‡»æ·»åŠ çš„æ—¶å€™å·²ç»çŸ¥é“ç±»å‹äº†</span></span><br><span class="line">        <span class="attr">pid</span>: <span class="string">''</span>, <span class="comment">// å› ä¸ºåšçš„æ˜¯æ ‘ éœ€è¦çŸ¥é“æ·»åŠ åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸‹äº†</span></span><br><span class="line">        <span class="attr">enVisible</span>: <span class="string">'0'</span> <span class="comment">// å¼€å¯</span></span><br><span class="line">      }</span><br><span class="line">      <span class="built_in">this</span>.$refs.perForm.resetFields()</span><br><span class="line">      <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">addPermission</span>(<span class="params">pid, type</span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.formData.pid = pid</span><br><span class="line">      <span class="built_in">this</span>.formData.type = type</span><br><span class="line">      <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">editPermission</span>(<span class="params">id</span>)</span> {</span><br><span class="line">      <span class="comment">// æ ¹æ®è·å–idè·å–è¯¦æƒ…</span></span><br><span class="line">      <span class="built_in">this</span>.formData = <span class="keyword">await</span> getPermissionDetail(id)</span><br><span class="line">      <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong>: æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘</p>
<h2 id="ç»™è§’è‰²åˆ†é…æƒé™"><a href="#ç»™è§’è‰²åˆ†é…æƒé™" class="headerlink" title="ç»™è§’è‰²åˆ†é…æƒé™"></a>ç»™è§’è‰²åˆ†é…æƒé™</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®Œæˆç»™è§’è‰²åˆ†é…æƒé™çš„ä¸šåŠ¡</p>
<h3 id="æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚"><a href="#æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚" class="headerlink" title="æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚"></a>æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚</h3><blockquote>
<p>åœ¨å…¬å¸è®¾ç½®çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰å®ç°åˆ†é…æƒé™çš„åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹</p>
</blockquote>
<p><strong>å°è£…åˆ†é…æƒé™çš„api</strong>  <strong><code>src/api/setting.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç»™è§’è‰²åˆ†é…æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">assignPerm</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/role/assignPrem'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><strong>ç»™è§’è‰²åˆ†é…æƒé™å¼¹å‡ºå±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-dialog title="åˆ†é…æƒé™" :visible="showPermDialog" @close="btnPermCancel"&gt;</span><br><span class="line">      &lt;!-- æƒé™æ˜¯ä¸€é¢—æ ‘ --&gt;</span><br><span class="line">      &lt;!-- å°†æ•°æ®ç»‘å®šåˆ°ç»„ä»¶ä¸Š --&gt;</span><br><span class="line">      &lt;!-- check-strictly å¦‚æœä¸ºtrue é‚£è¡¨ç¤ºçˆ¶å­å‹¾é€‰æ—¶  ä¸äº’ç›¸å…³è” å¦‚æœä¸ºfalseå°±äº’ç›¸å…³è” --&gt;</span><br><span class="line">      &lt;!-- idä½œä¸ºå”¯ä¸€æ ‡è¯† --&gt;</span><br><span class="line">      &lt;el-tree</span><br><span class="line">        ref="permTree"</span><br><span class="line">        :data="permData"</span><br><span class="line">        :props="defaultProps"</span><br><span class="line">        :show-checkbox="true"</span><br><span class="line">        :check-strictly="true"</span><br><span class="line">        :default-expand-all="true"</span><br><span class="line">        :default-checked-keys="selectCheck"</span><br><span class="line">        node-key="id"</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;!-- ç¡®å®š å–æ¶ˆ --&gt;</span><br><span class="line">      &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">        &lt;el-col :span="6"&gt;</span><br><span class="line">          &lt;el-button type="primary" size="small" @click="btnPermOK"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size="small" @click="btnPermCancel"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">showPermDialog: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶åˆ†é…æƒé™å¼¹å±‚çš„æ˜¾ç¤ºåè€…éšè—</span></span><br><span class="line"><span class="attr">defaultProps</span>: {</span><br><span class="line">  <span class="attr">label</span>: <span class="string">'name'</span></span><br><span class="line">},</span><br><span class="line"> <span class="attr">permData</span>: [], <span class="comment">// ä¸“é—¨ç”¨æ¥æ¥æ”¶æƒé™æ•°æ® æ ‘å½¢æ•°æ®</span></span><br><span class="line"><span class="attr">selectCheck</span>: [], <span class="comment">// å®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥æ¥æ”¶ å·²ç»é€‰ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">roleId</span>: <span class="literal">null</span> <span class="comment">// ç”¨æ¥è®°å½•åˆ†é…è§’è‰²çš„id</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç‚¹å‡»åˆ†é…æƒé™</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-button size="small" type="success" @click="assignPerm(row.id)"&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç»™è§’è‰²åˆ†é…æƒé™-1"><a href="#ç»™è§’è‰²åˆ†é…æƒé™-1" class="headerlink" title="ç»™è§’è‰²åˆ†é…æƒé™"></a>ç»™è§’è‰²åˆ†é…æƒé™</h3><p><strong>åˆ†é…æƒé™</strong>/<strong>æ ‘å½¢æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"> <span class="keyword">import</span> { transListToTreeData } <span class="keyword">from</span> <span class="string">'@/utils'</span></span><br><span class="line"><span class="keyword">import</span> { getPermissionList } <span class="keyword">from</span> <span class="string">'@/api/permission'</span></span><br><span class="line"><span class="attr">methods</span>: {</span><br><span class="line">    <span class="comment">// ç‚¹å‡»åˆ†é…æƒé™</span></span><br><span class="line">  <span class="comment">// è·å–æƒé™ç‚¹æ•°æ® åœ¨ç‚¹å‡»çš„æ—¶å€™è°ƒç”¨ è·å–æƒé™ç‚¹æ•°æ®</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">assignPerm</span>(<span class="params">id</span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.permData = tranListToTreeData(<span class="keyword">await</span> getPermissionList(), <span class="string">'0'</span>) <span class="comment">// è½¬åŒ–liståˆ°æ ‘å½¢æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.roleId = id</span><br><span class="line">      <span class="comment">// åº”è¯¥å»è·å– è¿™ä¸ªidçš„ æƒé™ç‚¹</span></span><br><span class="line">      <span class="comment">// æœ‰id å°±å¯ä»¥ idåº”è¯¥å…ˆè®°å½•ä¸‹æ¥</span></span><br><span class="line">      <span class="keyword">const</span> { permIds } = <span class="keyword">await</span> getRoleDetail(id) <span class="comment">// permIdsæ˜¯å½“å‰è§’è‰²æ‰€æ‹¥æœ‰çš„æƒé™ç‚¹æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.selectCheck = permIds <span class="comment">// å°†å½“å‰è§’è‰²æ‰€æ‹¥æœ‰çš„æƒé™idèµ‹å€¼</span></span><br><span class="line">      <span class="built_in">this</span>.showPermDialog = <span class="literal">true</span></span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span>  <span class="function"><span class="title">btnPermOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="comment">// è°ƒç”¨el-treeçš„æ–¹æ³•</span></span><br><span class="line">      <span class="comment">// console.log(this.$refs.permTree.getCheckedKeys())</span></span><br><span class="line">      <span class="keyword">await</span> assignPerm({ <span class="attr">permIds</span>: <span class="built_in">this</span>.$refs.permTree.getCheckedKeys(), <span class="attr">id</span>: <span class="built_in">this</span>.roleId })</span><br><span class="line">      <span class="built_in">this</span>.$message.success(<span class="string">'åˆ†é…æƒé™æˆåŠŸ'</span>)</span><br><span class="line">      <span class="built_in">this</span>.showPermDialog = <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">btnPermCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.selectCheck = [] <span class="comment">// é‡ç½®æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.showPermDialog = <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> ç»™è§’è‰²åˆ†é…æƒé™</p>
<h2 id="å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•"><a href="#å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•" class="headerlink" title="å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•"></a>å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•</h2><p>**<code>ç›®æ ‡</code>**ï¼š åœ¨å½“å‰é¡¹ç›®åº”ç”¨ç”¨æˆ·çš„é¡µé¢è®¿é—®æƒé™</p>
<h3 id="æƒé™å—æ§çš„ä¸»ä½“æ€è·¯"><a href="#æƒé™å—æ§çš„ä¸»ä½“æ€è·¯" class="headerlink" title="æƒé™å—æ§çš„ä¸»ä½“æ€è·¯"></a>æƒé™å—æ§çš„ä¸»ä½“æ€è·¯</h3><blockquote>
<p>åˆ°äº†æœ€å…³é”®çš„ç¯èŠ‚ï¼Œæˆ‘ä»¬è®¾ç½®çš„æƒé™å¦‚ä½•åº”ç”¨ï¼Ÿ</p>
</blockquote>
<p>åœ¨ä¸Šé¢çš„å‡ ä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»æŠŠç»™ç”¨æˆ·åˆ†é…äº†è§’è‰²ï¼Œ ç»™è§’è‰²åˆ†é…äº†æƒé™ï¼Œé‚£ä¹ˆåœ¨ç”¨æˆ·ç™»å½•è·å–èµ„æ–™çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æŸ¥å‡ºè¯¥ç”¨æˆ·æ‹¥æœ‰å“ªäº›æƒé™ï¼Œè¿™ä¸ªæƒé™éœ€è¦å’Œæˆ‘ä»¬çš„èœå•è¿˜æœ‰è·¯ç”±æœ‰æ•ˆç»“åˆèµ·æ¥</p>
<blockquote>
<p>æˆ‘ä»¬åœ¨è·¯ç”±å’Œé¡µé¢ç« èŠ‚ä¸­ï¼Œå·²ç»ä»‹ç»è¿‡ï¼ŒåŠ¨æ€æƒé™å…¶å®å°±æ˜¯æ ¹æ®ç”¨æˆ·çš„å®é™…æƒé™æ¥è®¿é—®çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ“ä½œä¸€ä¸‹</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200730002842243.png" alt="image-20200730002842243"></p>
<p>åœ¨æƒé™ç®¡ç†é¡µé¢ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ª<strong>æ ‡è¯†</strong>ï¼Œ è¿™ä¸ªæ ‡è¯†å¯ä»¥å’Œæˆ‘ä»¬çš„è·¯ç”±æ¨¡å—è¿›è¡Œå…³è”ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç”¨æˆ·æ‹¥æœ‰è¿™ä¸ªæ ‡è¯†ï¼Œé‚£ä¹ˆç”¨æˆ·å°±å¯ä»¥<strong>æ‹¥æœ‰è¿™ä¸ªè·¯ç”±æ¨¡å—</strong>ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ ‡è¯†ï¼Œå°±ä¸èƒ½<strong>è®¿é—®è·¯ç”±æ¨¡å—</strong></p>
<blockquote>
<p>ç”¨ä»€ä¹ˆæ¥å®ç°ï¼Ÿ</p>
</blockquote>
<p>vue-routeræä¾›äº†ä¸€ä¸ªå«åš<a href="https://router.vuejs.org/zh/api/#router-addroutes">addRoutes</a>çš„APIæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„å«ä¹‰æ˜¯<strong>åŠ¨æ€æ·»åŠ è·¯ç”±è§„åˆ™</strong></p>
<p>æ€è·¯å¦‚ä¸‹</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901164312005.png" alt="image-20200901164312005"></p>
<h3 id="æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—"><a href="#æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—" class="headerlink" title="æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—"></a>æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—</h3><blockquote>
<p> åœ¨<strong>ä¸»é¡µæ¨¡å—</strong>ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç”¨æˆ·çš„èµ„æ–™è®¾ç½®åˆ°vuexä¸­ï¼Œå…¶ä¸­ä¾¿æœ‰æƒé™æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å°±æ­¤è¿›è¡Œæ“ä½œ</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åœ¨vuexä¸­æ–°å¢ä¸€ä¸ªpermissionæ¨¡å—</p>
<p><strong><code>src/store/modules/permission.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// vuexçš„æƒé™æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> { constantRoutes } <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"><span class="comment">// vuexä¸­çš„permissionæ¨¡å—ç”¨æ¥å­˜æ”¾å½“å‰çš„ é™æ€è·¯ç”± + å½“å‰ç”¨æˆ·çš„ æƒé™è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> state = {</span><br><span class="line">  <span class="attr">routes</span>: constantRoutes <span class="comment">// æ‰€æœ‰äººé»˜è®¤æ‹¥æœ‰é™æ€è·¯ç”±</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">const</span> mutations = {</span><br><span class="line">  <span class="comment">// newRouteså¯ä»¥è®¤ä¸ºæ˜¯ ç”¨æˆ·ç™»å½• é€šè¿‡æƒé™æ‰€å¾—åˆ°çš„åŠ¨æ€è·¯ç”±çš„éƒ¨åˆ†</span></span><br><span class="line">  <span class="function"><span class="title">setRoutes</span>(<span class="params">state, newRoutes</span>)</span> {</span><br><span class="line">    <span class="comment">// ä¸‹é¢è¿™ä¹ˆå†™ä¸å¯¹ ä¸æ˜¯è¯­æ³•ä¸å¯¹ æ˜¯ä¸šåŠ¡ä¸å¯¹</span></span><br><span class="line">    <span class="comment">// state.routes = [...state.routes, ...newRoutes]</span></span><br><span class="line">    <span class="comment">// æœ‰ä¸€ç§æƒ…å†µ  å¼ ä¸‰ ç™»å½• è·å–äº†åŠ¨æ€è·¯ç”± è¿½åŠ åˆ°è·¯ç”±ä¸Š  æå››ç™»å½• 4ä¸ªåŠ¨æ€è·¯ç”±</span></span><br><span class="line">    <span class="comment">// åº”è¯¥æ˜¯æ¯æ¬¡æ›´æ–° éƒ½åº”è¯¥åœ¨é™æ€è·¯ç”±çš„åŸºç¡€ä¸Šè¿›è¡Œè¿½åŠ </span></span><br><span class="line">    state.routes = [...constantRoutes, ...newRoutes]</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">const</span> actions = {}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨Vuexç®¡ç†æ¨¡å—ä¸­å¼•å…¥permissonæ¨¡å—</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> permission <span class="keyword">from</span> <span class="string">'./modules/permission'</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">    <span class="comment">// å­æ¨¡å—   $store.state.app.</span></span><br><span class="line">    <span class="comment">// mapGetters([])</span></span><br><span class="line">    app,</span><br><span class="line">    settings,</span><br><span class="line">    user,</span><br><span class="line">    permission</span><br><span class="line">  },</span><br><span class="line">  getters</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Vuexç­›é€‰æƒé™è·¯ç”±"><a href="#Vuexç­›é€‰æƒé™è·¯ç”±" class="headerlink" title="Vuexç­›é€‰æƒé™è·¯ç”±"></a>Vuexç­›é€‰æƒé™è·¯ç”±</h3><blockquote>
<p> OKï¼Œ é‚£ä¹ˆæˆ‘ä»¬åœ¨å“ªå°†ç”¨æˆ·çš„æ ‡è¯†å’Œæƒé™è¿›è¡Œå…³è”å‘¢ ï¼Ÿ</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200815184203715.png" alt="image-20200815184203715"></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨è¿™å¼ å›¾ä¸­ï¼Œè¿›ä¸€æ­¥çš„è¿›è¡Œæ“ä½œ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200815184407204.png" alt="image-20200815184407204"></p>
<p>è®¿é—®æƒé™çš„æ•°æ®åœ¨ç”¨æˆ·å±æ€§**<code>menus</code><strong>ä¸­ï¼Œ</strong><code>menus</code>**ä¸­çš„æ ‡è¯†è¯¥æ€ä¹ˆå’Œè·¯ç”±å¯¹åº”å‘¢ï¼Ÿ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200815185230597.png" alt="image-20200815185230597"></p>
<blockquote>
<p>  å¯ä»¥å°†è·¯ç”±æ¨¡å—çš„æ ¹èŠ‚ç‚¹**<code>name</code>**å±æ€§å‘½åå’Œæƒé™æ ‡è¯†ä¸€è‡´ï¼Œè¿™æ ·åªè¦æ ‡è¯†èƒ½å¯¹ä¸Šï¼Œå°±è¯´æ˜ç”¨æˆ·æ‹¥æœ‰äº†è¯¥æƒé™</p>
</blockquote>
<p>è¿™ä¸€æ­¥ï¼Œåœ¨æˆ‘ä»¬å‘½åè·¯ç”±çš„æ—¶å€™å·²ç»æ“ä½œè¿‡äº†</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200730011629326.png" alt="image-20200730011629326"></p>
<p>æ¥ä¸‹æ¥ï¼Œ vuexçš„permissionä¸­æä¾›ä¸€ä¸ªactionï¼Œè¿›è¡Œå…³è”</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { asyncRoutes, constantRoutes } <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = {</span><br><span class="line">  <span class="comment">// ç­›é€‰æƒé™è·¯ç”±</span></span><br><span class="line">  <span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ä¸ºå½“å‰ç”¨æˆ·çš„æ‰€æ‹¥æœ‰çš„èœå•æƒé™</span></span><br><span class="line">  <span class="comment">// menus: ["settings","permissions"]</span></span><br><span class="line">  <span class="comment">// asyncRoutesæ˜¯æ‰€æœ‰çš„åŠ¨æ€è·¯ç”±</span></span><br><span class="line">  <span class="comment">// asyncRoutes  [{path: 'setting',name: 'setting'},{}]</span></span><br><span class="line">  <span class="function"><span class="title">filterRoutes</span>(<span class="params">context, menus</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> routes = []</span><br><span class="line">    <span class="comment">//   ç­›é€‰å‡º åŠ¨æ€è·¯ç”±ä¸­å’Œmenusä¸­èƒ½å¤Ÿå¯¹ä¸Šçš„è·¯ç”±</span></span><br><span class="line">    menus.forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">      <span class="comment">// keyå°±æ˜¯æ ‡è¯†</span></span><br><span class="line">      <span class="comment">// asyncRoutes æ‰¾ æœ‰æ²¡æœ‰å¯¹è±¡ä¸­çš„nameå±æ€§ç­‰äº keyçš„ å¦‚æœæ‰¾ä¸åˆ°å°±æ²¡æƒé™ å¦‚æœæ‰¾åˆ°äº† è¦ç­›é€‰å‡ºæ¥</span></span><br><span class="line">      routes.push(...asyncRoutes.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.name === key)) <span class="comment">// å¾—åˆ°ä¸€ä¸ªæ•°ç»„ æœ‰å¯èƒ½ æœ‰å…ƒç´  ä¹Ÿæœ‰å¯èƒ½æ˜¯ç©ºæ•°ç»„</span></span><br><span class="line">    })</span><br><span class="line">    <span class="comment">// å¾—åˆ°çš„routesæ˜¯æ‰€æœ‰æ¨¡å—ä¸­æ»¡è¶³æƒé™è¦æ±‚çš„è·¯ç”±æ•°ç»„</span></span><br><span class="line">    <span class="comment">// routeså°±æ˜¯å½“å‰ç”¨æˆ·æ‰€æ‹¥æœ‰çš„ åŠ¨æ€è·¯ç”±çš„æƒé™</span></span><br><span class="line">    context.commit(<span class="string">'setRoutes'</span>, routes) <span class="comment">// å°†åŠ¨æ€è·¯ç”±æäº¤ç»™mutations</span></span><br><span class="line">    <span class="keyword">return</span> routes <span class="comment">// è¿™é‡Œä¸ºä»€ä¹ˆè¿˜è¦return  stateæ•°æ® æ˜¯ç”¨æ¥ æ˜¾ç¤ºå·¦ä¾§èœå•ç”¨çš„  return  æ˜¯ç»™è·¯ç”±addRoutesç”¨çš„</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action"><a href="#æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action" class="headerlink" title="æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action"></a>æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action</h3><p>åœ¨æ‹¦æˆªçš„ä½ç½®ï¼Œè°ƒç”¨å…³è”actionï¼Œ è·å–æ–°å¢routesï¼Œå¹¶ä¸”<strong>addRoutes</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æƒé™æ‹¦æˆªåœ¨è·¯ç”±è·³è½¬  å¯¼èˆªå®ˆå«</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span> <span class="comment">// å¼•å…¥storeå®ä¾‹ å’Œç»„ä»¶ä¸­çš„this.$storeæ˜¯ä¸€å›äº‹</span></span><br><span class="line"><span class="keyword">import</span> nprogress <span class="keyword">from</span> <span class="string">'nprogress'</span> <span class="comment">// å¼•å…¥è¿›åº¦æ¡</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'nprogress/nprogress.css'</span> <span class="comment">// å¼•å…¥è¿›åº¦æ¡æ ·å¼</span></span><br><span class="line"><span class="comment">// ä¸éœ€è¦å¯¼å‡º  å› ä¸ºåªéœ€è¦è®©ä»£ç æ‰§è¡Œå³å¯</span></span><br><span class="line"><span class="comment">// å‰ç½®å®ˆå«</span></span><br><span class="line"><span class="comment">// nextæ˜¯å‰ç½®å®ˆå«å¿…é¡»å¿…é¡»å¿…é¡»æ‰§è¡Œçš„é’©å­  nextå¿…é¡»æ‰§è¡Œ å¦‚æœä¸æ‰§è¡Œ é¡µé¢å°±æ­»äº†</span></span><br><span class="line"><span class="comment">// next()  æ”¾è¿‡</span></span><br><span class="line"><span class="comment">// next(false) è·³è½¬ç»ˆæ­¢</span></span><br><span class="line"><span class="comment">// next(åœ°å€) è·³è½¬åˆ°æŸä¸ªåœ°å€</span></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">'/login'</span>, <span class="string">'/404'</span>] <span class="comment">// å®šä¹‰ç™½åå•</span></span><br><span class="line">router.beforeEach(<span class="keyword">async</span>(to, <span class="keyword">from</span>, next) =&gt; {</span><br><span class="line">  nprogress.start() <span class="comment">// å¼€å¯è¿›åº¦æ¡çš„æ„æ€</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">    <span class="comment">// åªæœ‰æœ‰tokençš„æƒ…å†µä¸‹ æ‰èƒ½è·å–èµ„æ–™</span></span><br><span class="line">    <span class="comment">//   å¦‚æœæœ‰token</span></span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">'/login'</span>) {</span><br><span class="line">      <span class="comment">// å¦‚æœè¦è®¿é—®çš„æ˜¯ ç™»å½•é¡µ</span></span><br><span class="line">      next(<span class="string">'/'</span>) <span class="comment">// è·³åˆ°ä¸»é¡µ  // æœ‰token ç”¨å¤„ç†å—ï¼Ÿä¸ç”¨</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// åªæœ‰æ”¾è¿‡çš„æ—¶å€™æ‰å»è·å–ç”¨æˆ·èµ„æ–™</span></span><br><span class="line">      <span class="comment">// æ˜¯æ¯æ¬¡éƒ½è·å–å—</span></span><br><span class="line">      <span class="comment">// å¦‚æœå½“å‰vuexä¸­æœ‰ç”¨æˆ·çš„èµ„æ–™çš„id è¡¨ç¤º å·²ç»æœ‰èµ„æ–™äº† ä¸éœ€è¦è·å–äº† å¦‚æœæ²¡æœ‰idæ‰éœ€è¦è·å–</span></span><br><span class="line">      <span class="keyword">if</span> (!store.getters.userId) {</span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰idæ‰è¡¨ç¤ºå½“å‰ç”¨æˆ·èµ„æ–™æ²¡æœ‰è·å–è¿‡</span></span><br><span class="line">        <span class="comment">// async å‡½æ•°æ‰€returnçš„å†…å®¹ ç”¨ awaitå°±å¯ä»¥æ¥æ”¶åˆ°</span></span><br><span class="line">        <span class="keyword">const</span> { roles } = <span class="keyword">await</span> store.dispatch(<span class="string">'user/getUserInfo'</span>)</span><br><span class="line">        <span class="comment">// å¦‚æœè¯´åç»­ éœ€è¦æ ¹æ®ç”¨æˆ·èµ„æ–™è·å–æ•°æ®çš„è¯ è¿™é‡Œå¿…é¡»æ”¹æˆ åŒæ­¥</span></span><br><span class="line">        <span class="comment">// ç­›é€‰ç”¨æˆ·çš„å¯ç”¨è·¯ç”±</span></span><br><span class="line">        <span class="comment">// actionsä¸­å‡½æ•° é»˜è®¤æ˜¯Promiseå¯¹è±¡ è°ƒç”¨è¿™ä¸ªå¯¹è±¡ æƒ³è¦è·å–è¿”å›çš„å€¼è¯ å¿…é¡» åŠ  awaitæˆ–è€…æ˜¯then</span></span><br><span class="line">        <span class="comment">// actionsæ˜¯åšå¼‚æ­¥æ“ä½œçš„</span></span><br><span class="line">        <span class="keyword">const</span> routes = <span class="keyword">await</span> store.dispatch(<span class="string">'permission/filterRoutes'</span>, roles.menus)</span><br><span class="line">        <span class="comment">// routeså°±æ˜¯ç­›é€‰å¾—åˆ°çš„åŠ¨æ€è·¯ç”±</span></span><br><span class="line">        <span class="comment">// åŠ¨æ€è·¯ç”± æ·»åŠ åˆ° è·¯ç”±è¡¨ä¸­ é»˜è®¤çš„è·¯ç”±è¡¨ åªæœ‰é™æ€è·¯ç”± æ²¡æœ‰åŠ¨æ€è·¯ç”±</span></span><br><span class="line">        <span class="comment">// addRoutes  å¿…é¡» ç”¨ next(åœ°å€) ä¸èƒ½ç”¨next()</span></span><br><span class="line">        router.addRoutes(routes) <span class="comment">// æ·»åŠ åŠ¨æ€è·¯ç”±åˆ°è·¯ç”±è¡¨  é“ºè·¯</span></span><br><span class="line">        <span class="comment">// æ·»åŠ å®ŒåŠ¨æ€è·¯ç”±ä¹‹å</span></span><br><span class="line">        next(to.path) <span class="comment">// ç›¸å½“äºè·³åˆ°å¯¹åº”çš„åœ°å€  ç›¸å½“äºå¤šåšä¸€æ¬¡è·³è½¬ ä¸ºä»€ä¹ˆè¦å¤šåšä¸€æ¬¡è·³è½¬</span></span><br><span class="line">        <span class="comment">// è¿›é—¨äº†ï¼Œä½†æ˜¯è¿›é—¨ä¹‹åæˆ‘è¦å»çš„åœ°æ–¹çš„è·¯è¿˜æ²¡æœ‰é“ºå¥½ï¼Œç›´æ¥èµ°ï¼Œæ‰å‘é‡Œï¼Œå¤šåšä¸€æ¬¡è·³è½¬ï¼Œå†ä»é—¨å¤–å¾€é‡Œè¿›ä¸€æ¬¡ï¼Œè·³è½¬ä¹‹å‰ æŠŠè·¯é“ºå¥½ï¼Œå†æ¬¡è¿›æ¥çš„æ—¶å€™ï¼Œè·¯å°±é“ºå¥½äº†</span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        next()</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">//   æ²¡æœ‰tokençš„æƒ…å†µä¸‹</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.indexOf(to.path) &gt; -<span class="number">1</span>) {</span><br><span class="line">      <span class="comment">//  è¡¨ç¤ºè¦å»çš„åœ°å€åœ¨ç™½åå•</span></span><br><span class="line">      next()</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      next(<span class="string">'/login'</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  nprogress.done() <span class="comment">// è§£å†³æ‰‹åŠ¨åˆ‡æ¢åœ°å€æ—¶ è¿›åº¦æ¡ä¸å…³é—­çš„é—®é¢˜</span></span><br><span class="line">})</span><br><span class="line"><span class="comment">// åç½®å®ˆå«</span></span><br><span class="line">router.afterEach(<span class="function">() =&gt;</span> {</span><br><span class="line">  nprogress.done() <span class="comment">// å…³é—­è¿›åº¦æ¡</span></span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶"><a href="#é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶" class="headerlink" title="é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶"></a>é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶</h3><p><strong>æ³¨æ„</strong>ï¼š è¿™é‡Œæœ‰ä¸ªéå¸¸å®¹æ˜“å‡ºé—®é¢˜çš„ä½ç½®ï¼Œå½“æˆ‘ä»¬åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»æ·»åŠ è·¯ç”±çš„å‰åï¼Œä¸èƒ½éƒ½æ˜¯ç”¨**next()**ï¼Œ</p>
<p>åœ¨æ·»åŠ è·¯ç”±ä¹‹ååº”è¯¥ä½¿ç”¨ <strong>next(to.path)<strong>ï¼Œ å¦åˆ™ä¼šä½¿åˆ·æ–°é¡µé¢ä¹‹å æƒé™æ¶ˆå¤±ï¼Œè¿™å±äºä¸€ä¸ªvue-routerçš„</strong>å·²çŸ¥ç¼ºé™·</strong></p>
<p>åŒæ—¶ï¼Œä¸è¦å¿˜è®°ï¼Œæˆ‘ä»¬å°†åŸæ¥çš„é™æ€è·¯ç”± + åŠ¨æ€è·¯ç”±åˆä½“çš„æ¨¡å¼ æ”¹æˆ åªæœ‰é™æ€è·¯ç”±  <strong><code>src/router/index.js</code></strong></p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200730012805239.png" alt="image-20200730012805239"></p>
<blockquote>
<p>  æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æƒé™è®¾ç½®çš„ä¸€åŠï¼Œ æ­¤æ—¶æˆ‘ä»¬å‘ç°å·¦ä¾§èœå•å¤±å»äº†å†…å®¹ï¼Œè¿™æ˜¯å› ä¸ºå·¦ä¾§èœå•è¯»å–çš„æ˜¯å›ºå®šçš„è·¯ç”±ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒæ¢æˆå®æ—¶çš„æœ€æ–°è·¯ç”±</p>
</blockquote>
<p>åœ¨**<code>src/store/getters.js</code>**é…ç½®å¯¼å‡ºroutes</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = {</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.sidebar,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.device,</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.token,</span><br><span class="line">  <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.username, <span class="comment">// å»ºç«‹ç”¨æˆ·åç§°çš„æ˜ å°„</span></span><br><span class="line">  <span class="attr">userId</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.userId, <span class="comment">// å»ºç«‹ç”¨æˆ·idçš„æ˜ å°„</span></span><br><span class="line">  <span class="attr">companyId</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.companyId, <span class="comment">// å»ºç«‹ç”¨æˆ·çš„å…¬å¸Idæ˜ å°„</span></span><br><span class="line">  <span class="attr">routes</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.permission.routes <span class="comment">// å¯¼å‡ºå½“å‰çš„è·¯ç”±</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨å·¦ä¾§èœå•ç»„ä»¶ä¸­ï¼Œ å¼•å…¥routes</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">computed: {</span><br><span class="line">  ...mapGetters([</span><br><span class="line">    <span class="string">'sidebar'</span>, <span class="string">'routes'</span></span><br><span class="line">  ]),</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p> OKï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å®ç°ä¸åŒç”¨æˆ·ç™»å½•çš„æ—¶å€™ï¼Œèœå•æ˜¯åŠ¨æ€çš„äº†</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•</p>
<h2 id="ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ-404é—®é¢˜"><a href="#ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ-404é—®é¢˜" class="headerlink" title="ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ 404é—®é¢˜"></a>ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ 404é—®é¢˜</h2><p><strong>ç›®æ ‡</strong>ï¼š å¤„ç†å½“ç™»å‡ºé¡µé¢æ—¶ï¼Œè·¯ç”±ä¸æ­£ç¡®çš„é—®é¢˜</p>
<blockquote>
<p> ä¸Šä¸€å°èŠ‚ï¼Œæˆ‘ä»¬çœ‹ä¼¼å®Œæˆäº†è®¿é—®æƒé™çš„åŠŸèƒ½ï¼Œå®åˆ™ä¸ç„¶ï¼Œå› ä¸ºå½“æˆ‘ä»¬ç™»å‡ºæ“ä½œä¹‹åï¼Œè™½ç„¶çœ‹ä¸åˆ°èœå•ï¼Œä½†æ˜¯ç”¨æˆ·å®é™…ä¸Šå¯ä»¥è®¿é—®é¡µé¢ï¼Œç›´æ¥åœ¨åœ°å€æ è¾“å…¥åœ°å€å°±èƒ½è®¿é—®</p>
</blockquote>
<p>è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p>
<blockquote>
<p> è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å‰é¢åœ¨<strong>addRoutes</strong>çš„æ—¶å€™ï¼Œä¸€ç›´éƒ½æ˜¯åœ¨<strong>åŠ </strong>ï¼Œç™»å‡ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åˆ ï¼Œä¹Ÿæ²¡æœ‰é‡ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¹‹å‰åŠ çš„è·¯ç”±åœ¨ç™»å‡ºä¹‹åä¸€ç›´åœ¨ï¼Œè¿™æ€ä¹ˆå¤„ç†ï¼Ÿ</p>
</blockquote>
<p>å¤§å®¶ç•™æ„æˆ‘ä»¬çš„<strong>router/index.js</strong>æ–‡ä»¶ï¼Œå‘ç°ä¸€ä¸ªé‡ç½®è·¯ç”±æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// é‡ç½®è·¯ç”±</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">resetRouter</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">const</span> newRouter = createRouter()</span><br><span class="line">  router.matcher = newRouter.matcher <span class="comment">// é‡æ–°è®¾ç½®è·¯ç”±çš„å¯åŒ¹é…è·¯å¾„</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ²¡é”™ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯å°†è·¯ç”±é‡æ–°å®ä¾‹åŒ–ï¼Œç›¸å½“äºæ¢äº†ä¸€ä¸ªæ–°çš„è·¯ç”±ï¼Œä¹‹å‰**<code>åŠ çš„è·¯ç”±</code>**è‡ªç„¶ä¸å­˜åœ¨äº†ï¼Œåªéœ€è¦åœ¨ç™»å‡ºçš„æ—¶å€™ï¼Œ å¤„ç†ä¸€ä¸‹å³å¯</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// ç™»å‡ºçš„action</span></span><br><span class="line"><span class="function"><span class="title">lgout</span>(<span class="params">context</span>)</span> {</span><br><span class="line">  <span class="comment">// åˆ é™¤token</span></span><br><span class="line">  context.commit(<span class="string">'removeToken'</span>) <span class="comment">// ä¸ä»…ä»…åˆ é™¤äº†vuexä¸­çš„ è¿˜åˆ é™¤äº†ç¼“å­˜ä¸­çš„</span></span><br><span class="line">  <span class="comment">// åˆ é™¤ç”¨æˆ·èµ„æ–™</span></span><br><span class="line">  context.commit(<span class="string">'removeUserInfo'</span>) <span class="comment">// åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// é‡ç½®è·¯ç”±</span></span><br><span class="line">  resetRouter()</span><br><span class="line">  <span class="comment">// è¿˜æœ‰ä¸€æ­¥  vuexä¸­çš„æ•°æ®æ˜¯ä¸æ˜¯è¿˜åœ¨</span></span><br><span class="line">  <span class="comment">// è¦æ¸…ç©ºpermissionæ¨¡å—ä¸‹çš„stateæ•°æ®</span></span><br><span class="line">  <span class="comment">// vuexä¸­ userå­æ¨¡å—  permissionå­æ¨¡å—</span></span><br><span class="line">  <span class="comment">// å­æ¨¡å—è°ƒç”¨å­æ¨¡å—çš„action  é»˜è®¤æƒ…å†µä¸‹ å­æ¨¡å—çš„contextæ˜¯å­æ¨¡å—çš„</span></span><br><span class="line">  <span class="comment">// çˆ¶æ¨¡å— è°ƒç”¨ å­æ¨¡å—çš„action</span></span><br><span class="line">  context.commit(<span class="string">'permission/setRoutes'</span>, [], { <span class="attr">root</span>: <span class="literal">true</span> })</span><br><span class="line">  <span class="comment">// å­æ¨¡å—è°ƒç”¨å­æ¨¡å—çš„action å¯ä»¥ å°† commitçš„ç¬¬ä¸‰ä¸ªå‚æ•° è®¾ç½®æˆ  { root: true } å°±è¡¨ç¤ºå½“å‰çš„contextä¸æ˜¯å­æ¨¡å—äº† è€Œæ˜¯çˆ¶æ¨¡å—</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å‘ç°åœ¨é¡µé¢åˆ·æ–°çš„æ—¶å€™ï¼Œæœ¬æ¥åº”è¯¥æ‹¥æœ‰æƒé™çš„é¡µé¢å‡ºç°äº†404ï¼Œè¿™æ˜¯å› ä¸º404çš„åŒ¹é…æƒé™æ”¾åœ¨äº†é™æ€è·¯ç”±ï¼Œè€ŒåŠ¨æ€è·¯ç”±åœ¨æ²¡æœ‰addRoutesä¹‹å‰ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„åœ°å€ï¼Œå°±ä¼šæ˜¾ç¤º404ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†404æ”¾ç½®åˆ°åŠ¨æ€è·¯ç”±çš„æœ€å</p>
<p><strong><code>src/permission.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">router.addRoutes([...routes, { <span class="attr">path</span>: <span class="string">'*'</span>, <span class="attr">redirect</span>: <span class="string">'/404'</span>, <span class="attr">hidden</span>: <span class="literal">true</span> }]) <span class="comment">// æ·»åŠ åˆ°è·¯ç”±è¡¨</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="åŠŸèƒ½æƒé™åº”ç”¨"><a href="#åŠŸèƒ½æƒé™åº”ç”¨" class="headerlink" title="åŠŸèƒ½æƒé™åº”ç”¨"></a>åŠŸèƒ½æƒé™åº”ç”¨</h2><p><strong>ç›®æ ‡</strong>ï¼š å®ç°åŠŸèƒ½æƒé™çš„åº”ç”¨</p>
<h3 id="åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯"><a href="#åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯" class="headerlink" title="åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯"></a>åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯</h3><blockquote>
<p> ä¸Šå°èŠ‚ä¸­ï¼Œå½“æˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªé¡µé¢çš„è®¿é—®æƒé™ä¹‹åï¼Œé¡µé¢ä¸­çš„æŸäº›åŠŸèƒ½ï¼Œç”¨æˆ·å¯èƒ½æœ‰ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ï¼Œè¿™å°±æ˜¯åŠŸèƒ½æƒé™</p>
</blockquote>
<p>è¿™å°±æ˜¯ä¸Šå°èŠ‚ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ä¸­çš„**<code>points</code>**</p>
<blockquote>
<p> æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³å¯¹å‘˜å·¥ç®¡ç†çš„åˆ é™¤åŠŸèƒ½åšä¸ªæƒé™æ€ä¹ˆåšï¼Ÿ</p>
</blockquote>
<p>é¦–å…ˆéœ€è¦åœ¨å‘˜å·¥ç®¡ç†çš„æƒé™ç‚¹ä¸‹ï¼Œ æ–°å¢ä¸€ä¸ªåˆ é™¤æƒé™ç‚¹ï¼Œå¯ç”¨</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200730020732919.png" alt="image-20200730020732919"></p>
<blockquote>
<p>  æˆ‘ä»¬è¦åšçš„å°±æ˜¯çœ‹çœ‹ç”¨æˆ·ï¼Œæ˜¯å¦æ‹¥æœ‰<strong>point-user-delete</strong>è¿™ä¸ªpointï¼Œæœ‰å°±å¯ä»¥è®©åˆ é™¤èƒ½ç”¨ï¼Œæ²¡æœ‰å°±éšè—æˆ–è€…ç¦ç”¨</p>
</blockquote>
<h3 id="ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥"><a href="#ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥" class="headerlink" title="ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥"></a>ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥</h3><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€ä¸ªæ–°çš„æŠ€æœ¯ <a href="https://cn.vuejs.org/v2/guide/mixins.html">mixin(æ··å…¥)</a>æ¥è®©æ‰€æœ‰çš„ç»„ä»¶å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªå…¬å…±çš„æ–¹æ³•</p>
<p><strong><code>src/mixin/checkPermission.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="function"><span class="title">checkPermission</span>(<span class="params">key</span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> { userInfo } = store.state.user</span><br><span class="line">      <span class="keyword">if</span> (userInfo.roles.points &amp;&amp; userInfo.roles.points.length) {</span><br><span class="line">        <span class="keyword">return</span> userInfo.roles.points.some(<span class="function"><span class="params">item</span> =&gt;</span> item === key)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p><strong>åœ¨å‘˜å·¥ç»„ä»¶ä¸­æ£€æŸ¥æƒé™ç‚¹</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-button :disabled="!checkPermission('POINT-USER-UPDATE')" type="text" size="small" @click="$router.push(`/employees/detail/${obj.row.id}`)"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡é…ç½®æƒé™çš„æ–¹å¼ï¼Œæ£€æŸ¥æƒé™çš„å¯ç”¨æ€§äº†</p>
<p><strong>æäº¤ä»£ç </strong></p>
<h1 id="9-å…¶ä»–æ¨¡å—é›†æˆ"><a href="#9-å…¶ä»–æ¨¡å—é›†æˆ" class="headerlink" title="9.å…¶ä»–æ¨¡å—é›†æˆ"></a>9.å…¶ä»–æ¨¡å—é›†æˆ</h1><h2 id="å…¨æ¨¡å—é›†æˆ"><a href="#å…¨æ¨¡å—é›†æˆ" class="headerlink" title="å…¨æ¨¡å—é›†æˆ"></a>å…¨æ¨¡å—é›†æˆ</h2><p><strong>ç›®æ ‡</strong>ï¼š å°†å…¶ä»–ä¸šåŠ¡æ¨¡å—ä»£ç é›†æˆåˆ°è¯¥é¡¹ç›®ä¸­</p>
<blockquote>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªåŸºæœ¬é¡¹ç›®æ¡†æ¶ + ç»„ç»‡æ¶æ„ + å…¬å¸ + å‘˜å·¥  +  æƒé™çš„ ä¸šåŠ¡è”è°ƒï¼Œ æ—¶é—´å…³ç³»ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å°†æ‰€æœ‰çš„ä¸šåŠ¡éƒ½å»ç¼–å†™ä¸€éï¼Œè¿™é‡Œæä¾›å¤§å®¶ å…¶ä½™æ¨¡å—çš„é›†æˆä»£ç ï¼Œæœ€ç»ˆçš„ç›®çš„æ˜¯è®©å¤§å®¶å¾—åˆ°ä¸€ä¸ªå®Œæˆçš„ä¸šåŠ¡æ¨¡å—</p>
</blockquote>
<p>è¦é›†æˆçš„æ¨¡å—ä¸šåŠ¡ï¼ŒåŒ…æ‹¬å·¥èµ„æ¨¡å—ï¼Œç¤¾ä¿æ¨¡å—ï¼Œè€ƒå‹¤æ¨¡å—ï¼Œå®¡æ‰¹æ¨¡å—</p>
<blockquote>
<p>åœ¨æˆ‘ä»¬æä¾›çš„èµ„æºé›†æˆæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†å››ä¸ªæ¨¡å—çš„**<code>è·¯ç”±</code><strong>/</strong><code>é¡µé¢</code><strong>/</strong><code>api</code>*, æŒ‰ç…§ä¸‹é¢çš„è·¯å¾„æ‹·è´å³å¯</p>
</blockquote>
<p>è·¯ç”± =&gt;  <strong><code>src/router/modules</code></strong></p>
<p>é¡µé¢ =&gt;  <strong><code>src/views</code></strong></p>
<p>api  =&gt;  <strong><code>src/api</code></strong></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬éœ€è¦å°† <strong><code>router/modules/user.js </code></strong> å¯¼å…¥åˆ°é™æ€è·¯ç”±ä¸­ï¼Œå› ä¸ºè¿™ä¸ªæ¨¡å—æ˜¯æ‰€æœ‰æ¨¡å—éƒ½å¯ä»¥è®¿é—®çš„</p>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„ç³»ç»Ÿä¸šåŠ¡ã€‚</p>
<h1 id="10-ä¸»é¡µå®¡æ‰¹"><a href="#10-ä¸»é¡µå®¡æ‰¹" class="headerlink" title="10.ä¸»é¡µå®¡æ‰¹"></a>10.ä¸»é¡µå®¡æ‰¹</h1><h2 id="é¦–é¡µçš„é¡µé¢ç»“æ„"><a href="#é¦–é¡µçš„é¡µé¢ç»“æ„" class="headerlink" title="é¦–é¡µçš„é¡µé¢ç»“æ„"></a>é¦–é¡µçš„é¡µé¢ç»“æ„</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°ç³»ç»Ÿé¦–é¡µçš„é¡µé¢ç»“æ„</p>
<blockquote>
<p>ç›®å‰ï¼Œæˆ‘ä»¬çš„é¡µé¢è¿˜å‰©ä¸‹é¦–é¡µï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§å¦‚å›¾å®ç°ä¸€ä¸‹çš„ç»“æ„</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200802002002229.png" alt="image-20200802002002229"></p>
<p>é¦–é¡µé¡µé¢ç»“æ„ï¼Œ<strong>src/views/dashboard/index.vue</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;!-- å¤´éƒ¨å†…å®¹ --&gt;</span><br><span class="line">    &lt;el-card class="header-card"&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div class="fl headL"&gt;</span><br><span class="line">          &lt;div class="headImg"&gt;</span><br><span class="line">            &lt;img src="@/assets/common/head.jpg"&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="headInfoTip"&gt;</span><br><span class="line">            &lt;p class="firstChild"&gt;æ—©å®‰ï¼Œç®¡ç†å‘˜ï¼Œç¥ä½ å¼€å¿ƒæ¯ä¸€å¤©ï¼&lt;/p&gt;</span><br><span class="line">            &lt;p class="lastChild"&gt;æ—©å®‰ï¼Œç®¡ç†å‘˜ï¼Œç¥ä½ å¼€å¿ƒæ¯ä¸€å¤©ï¼&lt;/p&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class="fr" /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">    &lt;!-- ä¸»è¦å†…å®¹ --&gt;</span><br><span class="line">    &lt;el-row type="flex" justify="space-between"&gt;</span><br><span class="line">      &lt;!-- å·¦ä¾§å†…å®¹ --&gt;</span><br><span class="line">      &lt;el-col :span="13" style="padding-right:26px"&gt;</span><br><span class="line">        &lt;!-- å·¥ä½œæ—¥å† --&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div slot="header" class="header"&gt;</span><br><span class="line">            &lt;span&gt;å·¥ä½œæ—¥å†&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®æ—¥å†ç»„ä»¶ --&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">        &lt;!-- å…¬å‘Š --&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div class="advContent"&gt;</span><br><span class="line">            &lt;div class="title"&gt; å…¬å‘Š&lt;/div&gt;</span><br><span class="line">            &lt;div class="contentItem"&gt;</span><br><span class="line">              &lt;ul class="noticeList"&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;div class="item"&gt;</span><br><span class="line">                    &lt;img src="@/assets/common/img.jpeg" alt=""&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                      &lt;p&gt;&lt;span class="col"&gt;æœ±ç»§æŸ³&lt;/span&gt; å‘å¸ƒäº† ç¬¬1æœŸâ€œä¼ æ™ºå¤§è®²å ‚â€äº’åŠ¨è®¨è®ºè·å¥–åå•å…¬å¸ƒ&lt;/p&gt;</span><br><span class="line">                      &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;div class="item"&gt;</span><br><span class="line">                    &lt;img src="@/assets/common/img.jpeg" alt=""&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                      &lt;p&gt;&lt;span class="col"&gt;æœ±ç»§æŸ³&lt;/span&gt; å‘å¸ƒäº† ç¬¬2æœŸâ€œä¼ æ™ºå¤§è®²å ‚â€äº’åŠ¨è®¨è®ºè·å¥–åå•å…¬å¸ƒ&lt;/p&gt;</span><br><span class="line">                      &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;div class="item"&gt;</span><br><span class="line">                    &lt;img src="@/assets/common/img.jpeg" alt=""&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                      &lt;p&gt;&lt;span class="col"&gt;æœ±ç»§æŸ³&lt;/span&gt; å‘å¸ƒäº† ç¬¬3æœŸâ€œä¼ æ™ºå¤§è®²å ‚â€äº’åŠ¨è®¨è®ºè·å¥–åå•å…¬å¸ƒ&lt;/p&gt;</span><br><span class="line">                      &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;!-- å³ä¾§å†…å®¹ --&gt;</span><br><span class="line">      &lt;el-col :span="11"&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div class="header headTit"&gt;</span><br><span class="line">            &lt;span&gt;æµç¨‹ç”³è¯·&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="sideNav"&gt;</span><br><span class="line">            &lt;el-button class="sideBtn"&gt;åŠ ç­ç¦»èŒ&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button class="sideBtn"&gt;è¯·å‡è°ƒä¼‘&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button class="sideBtn"&gt;å®¡æ‰¹åˆ—è¡¨&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button class="sideBtn"&gt;æˆ‘çš„ä¿¡æ¯&lt;/el-button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- ç»©æ•ˆæŒ‡æ•° --&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div slot="header" class="header"&gt;</span><br><span class="line">            &lt;span&gt;ç»©æ•ˆæŒ‡æ•°&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®é›·è¾¾å›¾ --&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">        &lt;!-- å¸®åŠ©è¿æ¥ --&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div class="header headTit"&gt;</span><br><span class="line">            &lt;span&gt;å¸®åŠ©é“¾æ¥&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="sideLink"&gt;</span><br><span class="line">            &lt;el-row&gt;</span><br><span class="line">              &lt;el-col :span="8"&gt;</span><br><span class="line">                &lt;a href="#"&gt;</span><br><span class="line">                  &lt;span class="icon iconGuide" /&gt;</span><br><span class="line">                  &lt;p&gt;å…¥é—¨æŒ‡å—&lt;/p&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/el-col&gt;</span><br><span class="line">              &lt;el-col :span="8"&gt;</span><br><span class="line">                &lt;a href="#"&gt;</span><br><span class="line">                  &lt;span class="icon iconHelp" /&gt;</span><br><span class="line">                  &lt;p&gt;åœ¨çº¿å¸®åŠ©æ‰‹å†Œ&lt;/p&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/el-col&gt;</span><br><span class="line">              &lt;el-col :span="8"&gt;</span><br><span class="line">                &lt;a href="#"&gt;</span><br><span class="line">                  &lt;span class="icon iconTechnology" /&gt;</span><br><span class="line">                  &lt;p&gt;è”ç³»æŠ€æœ¯æ”¯æŒ&lt;/p&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { mapGetters } from 'vuex'</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  name: 'Dashboard',</span><br><span class="line">  computed: {</span><br><span class="line">    ...mapGetters([</span><br><span class="line">      'name'</span><br><span class="line">    ])</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="scss" scoped&gt;</span><br><span class="line">.dashboard-container {</span><br><span class="line">  margin: 10px;</span><br><span class="line">  li {</span><br><span class="line">    list-style: none;</span><br><span class="line">  }</span><br><span class="line">  .headImg {</span><br><span class="line">    float: left;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    background: #999;</span><br><span class="line">          img {</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100%;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  .headInfoTip {</span><br><span class="line">    padding: 25px 0 0;</span><br><span class="line">    margin-left: 120px;</span><br><span class="line">    p {</span><br><span class="line">      padding: 0 0 15px;</span><br><span class="line">      margin: 0;</span><br><span class="line">      &amp;.firstChild {</span><br><span class="line">        font-size: 24px;</span><br><span class="line">      }</span><br><span class="line">      &amp;.lastChild {</span><br><span class="line">        font-size: 20px;</span><br><span class="line">        color: #7f8c8d;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.box-card {</span><br><span class="line">  padding: 5px 10px;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  .header {</span><br><span class="line">    span {</span><br><span class="line">      color: #2c3e50;</span><br><span class="line">      font-size: 24px;</span><br><span class="line">    }</span><br><span class="line">    .item {</span><br><span class="line">      color: #97a8be;</span><br><span class="line">      float: right;</span><br><span class="line">      padding: 3px 0;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  .headTit {</span><br><span class="line">    span {</span><br><span class="line">      border-bottom: 4px solid #8a97f8;</span><br><span class="line">      padding-bottom: 10px;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">.header-card{</span><br><span class="line">  position: relative;</span><br><span class="line">  .header {</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 20px;</span><br><span class="line">    top: 15px;</span><br><span class="line">    z-index: 1;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.advContent {</span><br><span class="line">  background: #fff;</span><br><span class="line">  border-radius: 5px 5px 0px 0px;</span><br><span class="line">  .title {</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    border-bottom: solid 1px #ccc;</span><br><span class="line">  }</span><br><span class="line">  .contentItem {</span><br><span class="line">    padding: 0 30px;</span><br><span class="line">    min-height: 350px;</span><br><span class="line">    .item {</span><br><span class="line">      display: flex;</span><br><span class="line">      padding:18px 0 10px;</span><br><span class="line">      border-bottom: solid 1px #ccc;</span><br><span class="line">      .col {</span><br><span class="line">        color: #8a97f8;</span><br><span class="line">      }</span><br><span class="line">      img {</span><br><span class="line">        width: 56px;</span><br><span class="line">        height: 56px;</span><br><span class="line">        border-radius: 50%;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">      }</span><br><span class="line">      p{</span><br><span class="line">        padding: 0 0 8px;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">.noticeList {</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0;</span><br><span class="line">}</span><br><span class="line">.sideNav,</span><br><span class="line">.sideLink {</span><br><span class="line">  padding: 30px 0 12px;</span><br><span class="line">  .sideBtn {</span><br><span class="line">    padding: 16px 26px;</span><br><span class="line">    font-size:16px;</span><br><span class="line">    margin: 10px 5px;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">.sideLink {</span><br><span class="line">  text-align: center;</span><br><span class="line">  .icon {</span><br><span class="line">    display: inline-block;</span><br><span class="line">    width: 76px;</span><br><span class="line">    height: 76px;</span><br><span class="line">    background: url('./../../assets/common/icon.png') no-repeat;</span><br><span class="line">  }</span><br><span class="line">  .iconGuide {</span><br><span class="line">    background-position: 0 0;</span><br><span class="line">  }</span><br><span class="line">  .iconHelp {</span><br><span class="line">    background-position: -224px 0;</span><br><span class="line">  }</span><br><span class="line">  .iconTechnology {</span><br><span class="line">    background-position: -460px 0;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹çš„é¡µé¢</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200802015023168.png" alt="image-20200802015023168"></p>
<p>å¤§å®¶å‘ç°ï¼Œæˆ‘ä»¬é¢„ç•™äº†**<code>å·¥ä½œæ—¥å†</code><strong>å’Œ</strong><code>ç»©æ•ˆæŒ‡æ•°</code>**ä¸¤ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬ä¼šåœ¨åç»­çš„ç»„ä»¶ä¸­è¿›è¡Œå¼€å‘</p>
<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º"><a href="#é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º" class="headerlink" title="é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º"></a>é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º</h2><p>â€‹ **<code>ç›®æ ‡</code>**ï¼šå°†é¦–é¡µçš„ä¿¡æ¯æ¢æˆçœŸå®çš„ç”¨æˆ·èµ„æ–™</p>
<blockquote>
<p>ç›´æ¥è·å–Vuexçš„ç”¨æˆ·èµ„æ–™å³å¯</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import { createNamespacedHelpers } from 'vuex'</span><br><span class="line">const { mapState } = createNamespacedHelpers('user')</span><br><span class="line">export default {</span><br><span class="line">  name: 'Dashboard',</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      defaultImg: require('@/assets/common/head.jpg'),</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    ...mapState(['userInfo'])</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ vueè§†å›¾ä¸­ç»‘å®š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;div class="fl headL"&gt;</span><br><span class="line">          &lt;div class="headImg"&gt;</span><br><span class="line">            &lt;img :src="userInfo.staffPhoto"&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="headInfoTip"&gt;</span><br><span class="line">            &lt;p class="firstChild"&gt;æ—©å®‰ï¼Œ{{ userInfo.username }}ï¼Œç¥ä½ å¼€å¿ƒæ¯ä¸€å¤©ï¼&lt;/p&gt;</span><br><span class="line">            &lt;p class="lastChild"&gt;{{ userInfo.username }}   |  {{ userInfo.companyName }}-{{ userInfo.departmentName }}&lt;/p&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå½“æˆ‘ä»¬åŠ è½½å›¾ç‰‡å¤±è´¥çš„æ—¶å€™ï¼Œå›¾ç‰‡åœ°å€å­˜åœ¨ï¼Œä½†æ˜¯å´ä¸èƒ½æ˜¾ç¤ºï¼Œä¹‹å‰æˆ‘ä»¬å°è£…çš„å›¾ç‰‡é”™è¯¯æŒ‡ä»¤å¯ä»¥åº”ç”¨</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;img  :src="userInfo.staffPhoto" v-imageerror="defaultImg"&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å·¥ä½œæ—¥å†ç»„ä»¶å°è£…"><a href="#å·¥ä½œæ—¥å†ç»„ä»¶å°è£…" class="headerlink" title="å·¥ä½œæ—¥å†ç»„ä»¶å°è£…"></a>å·¥ä½œæ—¥å†ç»„ä»¶å°è£…</h2><p>**<code>ç›®æ ‡</code>**å°è£…ä¸€ä¸ªå·¥ä½œæ—¥å†ç»„ä»¶åœ¨é¦–é¡µä¸­å±•ç¤º</p>
<h3 id="æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„"><a href="#æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„" class="headerlink" title="æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„"></a>æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„</h3><blockquote>
<p> å·¥ä½œæ—¥å†çš„è¦æ±‚å¾ˆç®€å•ï¼Œæ˜¾ç¤ºæ¯ä¸ªæœˆçš„æ—¥æœŸï¼Œå¯ä»¥è®¾å®šæ—¥æœŸçš„èŒƒå›´</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åŸºäºElementç»„ä»¶<a href="https://element.eleme.cn/#/zh-CN/component/calendar">el-calendar</a>è¿›è¡Œå°è£…</p>
<p>ä»£ç å¦‚ä¸‹  <strong><code>src/views/dashboard/components/work-calendar.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">      &lt;el-select v-model="currentYear" size="small" style="width: 120px" @change="dateChange"&gt;</span><br><span class="line">        &lt;el-option v-for="item in yearList" :key="item" :label="item" :value="item"&gt;{{ item }}&lt;/el-option&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">      &lt;el-select v-model="currentMonth" size="small" style="width: 120px;margin-left:10px" @change="dateChange"&gt;</span><br><span class="line">        &lt;el-option v-for="item in 12" :key="item" :label="item" :value="item"&gt;{{ item }}&lt;/el-option&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;el-calendar v-model="currentDate"&gt;</span><br><span class="line">      &lt;template v-slot:dateCell="{ date, data }" class="content"&gt;</span><br><span class="line">        &lt;div class="date-content"&gt;</span><br><span class="line">          &lt;span class="text"&gt; {{ data.day | getDay }}&lt;/span&gt;</span><br><span class="line">          &lt;span v-if="isWeek(date)" class="rest"&gt;ä¼‘&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt; </span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-calendar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    startDate: {</span><br><span class="line">      type: Date,</span><br><span class="line">      default: () =&gt; new Date()</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      currentMonth: null, // å½“å‰æœˆä»½</span><br><span class="line">      currentYear: null, // å½“å‰å¹´ä»½</span><br><span class="line">      currentDate: null,</span><br><span class="line">      yearList: []</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style  scoped&gt;</span><br><span class="line"> /deep/ .el-calendar-day {</span><br><span class="line">  height:  auto;</span><br><span class="line"> }</span><br><span class="line"> /deep/ .el-calendar-table__row td,/deep/ .el-calendar-table tr td:first-child,  /deep/ .el-calendar-table__row td.prev{</span><br><span class="line">  border:none;</span><br><span class="line"> }</span><br><span class="line">.date-content {</span><br><span class="line">  height: 40px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">}</span><br><span class="line">.date-content .rest {</span><br><span class="line">  color: #fff;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  background: rgb(250, 124, 77);</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">}</span><br><span class="line">.date-content .text{</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line"> display: inline-block;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"> /deep/ .el-calendar-table td.is-selected .text{</span><br><span class="line">   background: #409eff;</span><br><span class="line">   color: #fff;</span><br><span class="line">   border-radius: 50%;</span><br><span class="line"> }</span><br><span class="line"> /deep/ .el-calendar__header {</span><br><span class="line">   display: none</span><br><span class="line"> }</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®ç°å·¥ä½œæ—¥å†é€»è¾‘"><a href="#å®ç°å·¥ä½œæ—¥å†é€»è¾‘" class="headerlink" title="å®ç°å·¥ä½œæ—¥å†é€»è¾‘"></a>å®ç°å·¥ä½œæ—¥å†é€»è¾‘</h3><figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">filters</span>: {</span><br><span class="line">    <span class="function"><span class="title">getDay</span>(<span class="params">value</span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> day = value.split(<span class="string">'-'</span>)[<span class="number">2</span>]</span><br><span class="line">      <span class="keyword">return</span> day.startsWith(<span class="string">'0'</span>) ? day.substr(<span class="number">1</span>) : day</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">props</span>: {</span><br><span class="line">    <span class="attr">startDate</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Date</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">currentMonth</span>: <span class="literal">null</span>, <span class="comment">// å½“å‰æœˆä»½</span></span><br><span class="line">      <span class="attr">currentYear</span>: <span class="literal">null</span>, <span class="comment">// å½“å‰å¹´ä»½</span></span><br><span class="line">      <span class="attr">currentDate</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">yearList</span>: []</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">//   åˆå§‹åŒ–äº‹ä»¶</span></span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">//    å¤„ç†èµ·å§‹æ—¶é—´</span></span><br><span class="line">    <span class="comment">// ç»„ä»¶è¦æ±‚èµ·å§‹æ—¶é—´å¿…é¡»æ˜¯ å‘¨ä¸€å¼€å§‹ ä»¥ä¸€ä¸ªæœˆä¸ºå¼€å§‹</span></span><br><span class="line">    <span class="built_in">this</span>.currentMonth = <span class="built_in">this</span>.startDate.getMonth() + <span class="number">1</span></span><br><span class="line">    <span class="built_in">this</span>.currentYear = <span class="built_in">this</span>.startDate.getFullYear()</span><br><span class="line">    <span class="comment">// æ ¹æ®å½“å‰çš„å¹´ ç”Ÿæˆå¯é€‰å¹´ä»½ å‰åå„åŠ 5å¹´</span></span><br><span class="line">    <span class="built_in">this</span>.yearList = <span class="built_in">Array</span>.from(<span class="built_in">Array</span>(<span class="number">11</span>), <span class="function">(<span class="params">value, index</span>) =&gt;</span>  <span class="built_in">this</span>.currentYear + index - <span class="number">5</span> )</span><br><span class="line">    <span class="comment">// è®¡ç®— å½“å¹´å½“æœˆçš„ç¬¬ä¸€ä¸ªå‘¨ä¸€ å†åŠ ä¸Š å››å‘¨ä¹‹åçš„ä¸€ä¸ªæœˆæœˆä»½</span></span><br><span class="line">    <span class="built_in">this</span>.dateChange()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="comment">// æ˜¯å¦æ˜¯ä¼‘æ¯æ—¥</span></span><br><span class="line">    <span class="function"><span class="title">isWeek</span>(<span class="params">value</span>)</span> {</span><br><span class="line">      <span class="keyword">return</span> value.getDay() === <span class="number">6</span> || value.getDay() === <span class="number">0</span></span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// å¹´æœˆä»½æ”¹å˜ä¹‹å</span></span><br><span class="line">    <span class="function"><span class="title">dateChange</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> year = <span class="built_in">this</span>.currentYear</span><br><span class="line">      <span class="keyword">const</span> month = <span class="built_in">this</span>.currentMonth</span><br><span class="line">      <span class="built_in">this</span>.currentDate = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">`<span class="subst">${year}</span>-<span class="subst">${month}</span>-1`</span>) <span class="comment">// ä»¥å½“å‰æœˆçš„1å·ä¸ºèµ·å§‹</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨ä¸»é¡µä¸­åº”ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®æ—¥å†ç»„ä»¶ --&gt;</span><br><span class="line">&lt;work-calendar /&gt;</span><br></pre></td></tr></tbody></table></figure>



<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ"><a href="#å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ" class="headerlink" title="å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ"></a>å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ</h2><p>**<code>ç›®æ ‡</code>**ï¼šå°è£…ä¸€ä¸ªechartsä¸­çš„é›·è¾¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µçš„ç»©æ•ˆæŒ‡æ•°çš„ä½ç½®</p>
<h3 id="äº†è§£é›·è¾¾å›¾"><a href="#äº†è§£é›·è¾¾å›¾" class="headerlink" title="äº†è§£é›·è¾¾å›¾"></a>äº†è§£é›·è¾¾å›¾</h3><h3 id="å°è£…é›·è¾¾å›¾æ’ä»¶"><a href="#å°è£…é›·è¾¾å›¾æ’ä»¶" class="headerlink" title="å°è£…é›·è¾¾å›¾æ’ä»¶"></a>å°è£…é›·è¾¾å›¾æ’ä»¶</h3><blockquote>
<p>é¦–é¡µä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªç»©æ•ˆæŒ‡æ•°çš„ä½ç½®éœ€è¦æ”¾ç½®ä¸€ä¸ªé›·è¾¾å›¾çš„å›¾è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ç™¾åº¦çš„echartsè¿›è¡Œå°è£…</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œ å®‰è£…echartså›¾è¡¨</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i echarts</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>echartsæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„åŒ…ï¼Œé‡Œé¢åŒ…å«äº†ä¼—å¤šå›¾å½¢ï¼Œå‡è®¾æˆ‘ä»¬åªä½¿ç”¨é›·è¾¾å›¾ï¼Œå¯ä»¥åšæŒ‰éœ€åŠ è½½</p>
</blockquote>
<p>ç¬¬äºŒæ­¥ï¼Œ æ–°å»ºé›·è¾¾å›¾ç»„ä»¶ï¼Œ**<code>src/views/dashboard/components/radar.vue</code>**</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- é›·è¾¾å›¾  å›¾è¡¨å¿…é¡»ç»™é«˜å’Œå®½åº¦--&gt;</span><br><span class="line">  &lt;div ref="myDiv" class="radar-echart" /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// å®ŒæˆåŠ è½½è¿‡ç¨‹</span><br><span class="line">// var echarts = require('echarts')</span><br><span class="line">var echarts = require('echarts/lib/echarts') // å¼•å…¥echartsä¸»æ¨¡å—</span><br><span class="line">require('echarts/lib/chart/radar') // å¼•å…¥é›·è¾¾å›¾</span><br><span class="line">// å¼•å…¥æç¤ºæ¡†å’Œæ ‡é¢˜ç»„ä»¶</span><br><span class="line">require('echarts/lib/component/tooltip')</span><br><span class="line">require('echarts/lib/component/title')</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  // é¡µé¢æ¸²æŸ“å®Œæ¯•äº‹ä»¶</span><br><span class="line">  mounted() {</span><br><span class="line">    const myChart = echarts.init(this.$refs.myDiv) // å¾—åˆ°å›¾è¡¨å®ä¾‹</span><br><span class="line">    myChart.setOption({</span><br><span class="line">      title: {</span><br><span class="line">        text: 'åŸºç¡€é›·è¾¾å›¾'</span><br><span class="line">      },</span><br><span class="line">      tooltip: {},</span><br><span class="line">      legend: {</span><br><span class="line">        data: ['é¢„ç®—åˆ†é…ï¼ˆAllocated Budgetï¼‰', 'å®é™…å¼€é”€ï¼ˆActual Spendingï¼‰']</span><br><span class="line">      },</span><br><span class="line">      radar: {</span><br><span class="line">        // shape: 'circle',</span><br><span class="line">        name: {</span><br><span class="line">          textStyle: {</span><br><span class="line">            color: '#fff',</span><br><span class="line">            backgroundColor: '#999',</span><br><span class="line">            borderRadius: 3,</span><br><span class="line">            padding: [3, 5]</span><br><span class="line">          }</span><br><span class="line">        },</span><br><span class="line">        // æ¯ä¸ªåŒºåŸŸçš„æœ€é«˜å€¼</span><br><span class="line">        indicator: [</span><br><span class="line">          { name: 'å·¥ä½œæ•ˆç‡', max: 100 },</span><br><span class="line">          { name: 'è€ƒå‹¤', max: 100 },</span><br><span class="line">          { name: 'ç§¯ææ€§', max: 100 },</span><br><span class="line">          { name: 'å¸®åŠ©åŒäº‹', max: 100 },</span><br><span class="line">          { name: 'è‡ªä¸»å­¦ä¹ ', max: 100 },</span><br><span class="line">          { name: 'æ­£ç¡®ç‡', max: 100 }</span><br><span class="line">        ]</span><br><span class="line">      },</span><br><span class="line">      series: [{</span><br><span class="line">        name: 'é¢„ç®— vs å¼€é”€ï¼ˆBudget vs spendingï¼‰',</span><br><span class="line">        type: 'radar',</span><br><span class="line">        // areaStyle: {normal: {}},</span><br><span class="line">        data: [</span><br><span class="line">          {</span><br><span class="line">            value: [10, 1, 100, 5, 100, 0],</span><br><span class="line">            name: 'å¼ ä¸‰'</span><br><span class="line">          },</span><br><span class="line">          {</span><br><span class="line">            value: [50, 50, 50, 50, 50, 10],</span><br><span class="line">            name: 'æå››'</span><br><span class="line">          }</span><br><span class="line">        ]</span><br><span class="line">      }]</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.radar-echart {</span><br><span class="line">    width: 600px;</span><br><span class="line">    height: 400px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªé›·è¾¾å›¾ï¼Œå¯¹ç»©æ•ˆæŒ‡æ•°è¿›è¡Œç»Ÿè®¡</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200924111334856.png" alt="image-20200924111334856"></p>
<p>**<code>æ³¨æ„</code>**ï¼šç›¸å…³æ•°æ®çš„ç¼ºå¤±ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¿›è¡Œçš„æ˜¯æ¨¡æ‹Ÿæ•°æ®</p>
<p><strong>åœ¨ä¸»é¡µä¸­å¼•å…¥ä½¿ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">import Radar from './components/radar'</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»"><a href="#å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»" class="headerlink" title="å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»"></a>å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»</h2><blockquote>
<p>ä»€ä¹ˆæ˜¯å®¡æ‰¹æµç¨‹</p>
</blockquote>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201102215131402.png" alt="image-20201102215131402"></p>
<h2 id="æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹"><a href="#æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹" class="headerlink" title="æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹"></a>æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹</h2><p>**<code>ç›®æ ‡</code>**ï¼š æäº¤ä¸€ä¸ªç¦»èŒçš„å®¡æ‰¹ï¼Œå¹¶å®Œæˆä¸šåŠ¡æµè½¬</p>
<p><strong>ç¦»èŒå¼¹å±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- å¼¹å‡ºå±‚ --&gt;</span><br><span class="line">&lt;el-dialog :visible="showDialog" title="ç¦»èŒç”³è¯·" @close="btnCancel"&gt;</span><br><span class="line">  &lt;el-form</span><br><span class="line">    ref="ruleForm"</span><br><span class="line">    :model="ruleForm"</span><br><span class="line">    status-icon</span><br><span class="line">    label-width="110px"</span><br><span class="line">    :rules="rules"</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;!--ç¦»èŒè¡¨å•--&gt;</span><br><span class="line">    &lt;el-form-item label="ç¦»èŒæ—¶é—´" prop="end_time"&gt;</span><br><span class="line">      &lt;el-date-picker</span><br><span class="line">        v-model="ruleForm.exceptTime"</span><br><span class="line">        type="datetime"</span><br><span class="line">        value-format="yyyy-MM-dd HH:mm:ss"</span><br><span class="line">        placeholder="é€‰æ‹©æ—¥æœŸæ—¶é—´"</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label="ç¦»èŒåŸå› " prop="reason"&gt;</span><br><span class="line">      &lt;el-input</span><br><span class="line">        v-model="ruleForm.reason"</span><br><span class="line">        type="textarea"</span><br><span class="line">        :autosize="{ minRows: 3, maxRows: 8}"</span><br><span class="line">        style="width: 70%;"</span><br><span class="line">        placeholder="è¯·è¾“å…¥å†…å®¹"</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">  &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">    &lt;el-col :span="6"&gt;</span><br><span class="line">      &lt;el-button size="small" type="primary" @click="btnOK"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">      &lt;el-button size="small" @click="btnCancel"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ˜¾ç¤ºå¼¹å±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-button class="sideBtn" @click="showDialog = true"&gt;åŠ ç­ç¦»èŒ&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åŠ ç­æ•°æ®åŠæ ¡éªŒ</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">showDialog: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">ruleForm</span>: {</span><br><span class="line">  <span class="attr">exceptTime</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="attr">reason</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="attr">processKey</span>: <span class="string">'process_dimission'</span>, <span class="comment">// ç‰¹å®šçš„å®¡æ‰¹</span></span><br><span class="line">  <span class="attr">processName</span>: <span class="string">'ç¦»èŒ'</span></span><br><span class="line">},</span><br><span class="line"><span class="attr">rules</span>: {</span><br><span class="line">  <span class="attr">exceptTime</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'ç¦»èŒæ—¶é—´ä¸èƒ½ä¸ºç©º'</span> }],</span><br><span class="line">  <span class="attr">reason</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'ç¦»èŒåŸå› ä¸èƒ½ä¸ºç©º'</span> }]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤å®¡æ‰¹é€»è¾‘</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> { startProcess } <span class="keyword">from</span> <span class="string">'@/api/approvals'</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">methods</span>: {</span><br><span class="line">    <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.$refs.ruleForm.validate(<span class="keyword">async</span> validate =&gt; {</span><br><span class="line">        <span class="keyword">if</span> (validate) {</span><br><span class="line">          <span class="keyword">const</span> data = { ...this.ruleForm, <span class="attr">userId</span>: <span class="built_in">this</span>.userInfo.userId }</span><br><span class="line">          <span class="keyword">await</span> startProcess(data)</span><br><span class="line">          <span class="built_in">this</span>.$message.success(<span class="string">'æäº¤æµç¨‹æˆåŠŸ'</span>)</span><br><span class="line">          <span class="built_in">this</span>.btnCancel()</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">      <span class="built_in">this</span>.$refs.ruleForm.resetFields()</span><br><span class="line">      <span class="built_in">this</span>.ruleForm = {</span><br><span class="line">        <span class="attr">exceptTime</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">reason</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">processKey</span>: <span class="string">'process_dimission'</span>, <span class="comment">// ç‰¹å®šçš„å®¡æ‰¹</span></span><br><span class="line">        <span class="attr">processName</span>: <span class="string">'ç¦»èŒ'</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>é…ç½®å®¡æ‰¹åˆ—è¡¨çš„å¯¼èˆª</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;el-button class="sideBtn" @click="$router.push('/users/approvals')"&gt;å®¡æ‰¹åˆ—è¡¨&lt;/el-button&gt;</span><br><span class="line">&lt;el-button class="sideBtn" @click="$router.push('/users/info')"&gt;æˆ‘çš„ä¿¡æ¯&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®Œæˆè¯¥æµç¨‹çš„å®¡æ‰¹å’Œæµè½¬</strong></p>
<p>æ³¨æ„ï¼š å®¡æ‰¹æ¥å£ä¸­çš„åŒæ„æ¥å£å­˜åœ¨ä¸€å®šé—®é¢˜ï¼Œå¯ä»¥æµ‹è¯•   æäº¤ /æ’¤é”€ é©³å›ç­‰æ“ä½œ</p>
<p><strong><code>æäº¤ä»£ç </code></strong></p>
<h1 id="11-å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜"><a href="#11-å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜" class="headerlink" title="11.å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜"></a>11.å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜</h1><h2 id="å…¨å±æ’ä»¶çš„å¼•ç”¨"><a href="#å…¨å±æ’ä»¶çš„å¼•ç”¨" class="headerlink" title="å…¨å±æ’ä»¶çš„å¼•ç”¨"></a>å…¨å±æ’ä»¶çš„å¼•ç”¨</h2><p><strong>ç›®æ ‡</strong>ï¼šå®ç°é¡µé¢çš„å…¨å±åŠŸèƒ½</p>
<blockquote>
<p>å…¨å±åŠŸèƒ½å¯ä»¥å€ŸåŠ©ä¸€ä¸ªæ’ä»¶æ¥å®ç°</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œå®‰è£…å…¨å±€æ’ä»¶<strong>screenfull</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i screenfull</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬äºŒæ­¥ï¼Œå°è£…å…¨å±æ˜¾ç¤ºçš„æ’ä»¶Â·Â· <strong><code>src/components/ScreenFull/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- æ”¾ç½®ä¸€ä¸ªå›¾æ ‡ --&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- æ”¾ç½®ä¸€ä¸ªsvgçš„å›¾æ ‡ --&gt;</span><br><span class="line">    &lt;svg-icon icon-class="fullscreen" style="color:#fff; width: 20px; height: 20px" @click="changeScreen" /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import ScreenFull from 'screenfull'</span><br><span class="line">export default {</span><br><span class="line">  methods: {</span><br><span class="line">    //   æ”¹å˜å…¨å±</span><br><span class="line">    changeScreen() {</span><br><span class="line">      if (!ScreenFull.isEnabled) {</span><br><span class="line">        // æ­¤æ—¶å…¨å±ä¸å¯ç”¨</span><br><span class="line">        this.$message.warning('æ­¤æ—¶å…¨å±ç»„ä»¶ä¸å¯ç”¨')</span><br><span class="line">        return</span><br><span class="line">      }</span><br><span class="line">      // document.documentElement.requestFullscreen()  åŸç”Ÿjsè°ƒç”¨</span><br><span class="line">      //   å¦‚æœå¯ç”¨ å°±å¯ä»¥å…¨å±</span><br><span class="line">      ScreenFull.toggle()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼Œå…¨å±€æ³¨å†Œè¯¥ç»„ä»¶  <strong><code>src/components/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> ScreenFull <span class="keyword">from</span> <span class="string">'./ScreenFull'</span></span><br><span class="line">Vue.component(<span class="string">'ScreenFull'</span>, ScreenFull) <span class="comment">// æ³¨å†Œå…¨å±ç»„ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬å››æ­¥ï¼Œæ”¾ç½®äº**<code>layout/navbar.vue</code>**ä¸­</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;screen-full class="right-menu-item" /&gt;</span><br><span class="line">.right-menu-item {</span><br><span class="line">   vertical-align: middle;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®ç°é¡µé¢çš„å…¨å±åŠŸèƒ½</p>
<h2 id="åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®"><a href="#åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®" class="headerlink" title="åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®"></a>åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®</p>
<blockquote>
<p>æˆ‘ä»¬æƒ³è¦å®ç°åœ¨é¡µé¢ä¸­å®æ—¶çš„åˆ‡æ¢é¢œè‰²ï¼Œæ­¤æ—¶é¡µé¢çš„ä¸»é¢˜å¯ä»¥è·Ÿç€è®¾ç½®çš„é¢œè‰²è¿›è¡Œå˜åŒ–</p>
</blockquote>
<p><strong>ç®€å•è¯´æ˜ä¸€ä¸‹å®ƒçš„åŸç†ï¼š</strong> element-ui 2.0 ç‰ˆæœ¬ä¹‹åæ‰€æœ‰çš„æ ·å¼éƒ½æ˜¯åŸºäº SCSS ç¼–å†™çš„ï¼Œæ‰€æœ‰çš„é¢œè‰²éƒ½æ˜¯åŸºäºå‡ ä¸ªåŸºç¡€é¢œè‰²<a href="https://github.com/PanJiaChen/custom-element-theme/blob/master/element-variables.scss">å˜é‡</a>æ¥è®¾ç½®çš„ï¼Œæ‰€ä»¥å°±ä¸éš¾å®ç°åŠ¨æ€æ¢è‚¤äº†ï¼Œåªè¦æ‰¾åˆ°é‚£å‡ ä¸ªé¢œè‰²å˜é‡ä¿®æ”¹å®ƒå°±å¯ä»¥äº†ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‹¿åˆ°é€šè¿‡ <code>package.json</code> æ‹¿åˆ° element-ui çš„ç‰ˆæœ¬å·ï¼Œæ ¹æ®è¯¥ç‰ˆæœ¬å·å»è¯·æ±‚ç›¸åº”çš„æ ·å¼ã€‚æ‹¿åˆ°æ ·å¼ä¹‹åå°†æ ·è‰²ï¼Œé€šè¿‡æ­£åˆ™åŒ¹é…å’Œæ›¿æ¢ï¼Œå°†é¢œè‰²å˜é‡æ›¿æ¢æˆä½ éœ€è¦çš„ï¼Œä¹‹ååŠ¨æ€æ·»åŠ  <code>style</code> æ ‡ç­¾æ¥è¦†ç›–åŸæœ‰çš„ css æ ·å¼ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼Œ å°è£…é¢œè‰²é€‰æ‹©ç»„ä»¶ <strong><code>ThemePicker</code></strong> ä»£ç åœ°å€ï¼š<a href="https://github.com/PanJiaChen/vue-element-admin/blob/master/src/components/ThemePicker/index.vue">@/components/ThemePicker</a>ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæœ¬ç« èŠ‚é‡ç‚¹åœ¨äºé›†æˆï¼Œå†…éƒ¨çš„æ›´æ¢ä¸»é¢˜å¯ä»¥å…ˆä¸ç”¨å…³å¿ƒã€‚</p>
</blockquote>
<p><strong>å®ç°ä»£ç </strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-color-picker</span><br><span class="line">    v-model="theme"</span><br><span class="line">    :predefine="['#409EFF', '#1890ff', '#304156','#212121','#11a983', '#13c2c2', '#6959CD', '#f5222d', ]"</span><br><span class="line">    class="theme-picker"</span><br><span class="line">    popper-class="theme-picker-dropdown"</span><br><span class="line">  /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">const version = require('element-ui/package.json').version // element-ui version from node_modules</span><br><span class="line">const ORIGINAL_THEME = '#409EFF' // default color</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      chalk: '', // content of theme-chalk css</span><br><span class="line">      theme: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    defaultTheme() {</span><br><span class="line">      return this.$store.state.settings.theme</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  watch: {</span><br><span class="line">    defaultTheme: {</span><br><span class="line">      handler: function(val, oldVal) {</span><br><span class="line">        this.theme = val</span><br><span class="line">      },</span><br><span class="line">      immediate: true</span><br><span class="line">    },</span><br><span class="line">    async theme(val) {</span><br><span class="line">      const oldVal = this.chalk ? this.theme : ORIGINAL_THEME</span><br><span class="line">      if (typeof val !== 'string') return</span><br><span class="line">      const themeCluster = this.getThemeCluster(val.replace('#', ''))</span><br><span class="line">      const originalCluster = this.getThemeCluster(oldVal.replace('#', ''))</span><br><span class="line">      console.log(themeCluster, originalCluster)</span><br><span class="line">      const $message = this.$message({</span><br><span class="line">        message: '  Compiling the theme',</span><br><span class="line">        customClass: 'theme-message',</span><br><span class="line">        type: 'success',</span><br><span class="line">        duration: 0,</span><br><span class="line">        iconClass: 'el-icon-loading'</span><br><span class="line">      })</span><br><span class="line">      const getHandler = (variable, id) =&gt; {</span><br><span class="line">        return () =&gt; {</span><br><span class="line">          const originalCluster = this.getThemeCluster(ORIGINAL_THEME.replace('#', ''))</span><br><span class="line">          const newStyle = this.updateStyle(this[variable], originalCluster, themeCluster)</span><br><span class="line">          let styleTag = document.getElementById(id)</span><br><span class="line">          if (!styleTag) {</span><br><span class="line">            styleTag = document.createElement('style')</span><br><span class="line">            styleTag.setAttribute('id', id)</span><br><span class="line">            document.head.appendChild(styleTag)</span><br><span class="line">          }</span><br><span class="line">          styleTag.innerText = newStyle</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      if (!this.chalk) {</span><br><span class="line">        const url = `https://unpkg.com/element-ui@${version}/lib/theme-chalk/index.css`</span><br><span class="line">        await this.getCSSString(url, 'chalk')</span><br><span class="line">      }</span><br><span class="line">      const chalkHandler = getHandler('chalk', 'chalk-style')</span><br><span class="line">      chalkHandler()</span><br><span class="line">      const styles = [].slice.call(document.querySelectorAll('style'))</span><br><span class="line">        .filter(style =&gt; {</span><br><span class="line">          const text = style.innerText</span><br><span class="line">          return new RegExp(oldVal, 'i').test(text) &amp;&amp; !/Chalk Variables/.test(text)</span><br><span class="line">        })</span><br><span class="line">      styles.forEach(style =&gt; {</span><br><span class="line">        const { innerText } = style</span><br><span class="line">        if (typeof innerText !== 'string') return</span><br><span class="line">        style.innerText = this.updateStyle(innerText, originalCluster, themeCluster)</span><br><span class="line">      })</span><br><span class="line">      this.$emit('change', val)</span><br><span class="line">      $message.close()</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    updateStyle(style, oldCluster, newCluster) {</span><br><span class="line">      let newStyle = style</span><br><span class="line">      oldCluster.forEach((color, index) =&gt; {</span><br><span class="line">        newStyle = newStyle.replace(new RegExp(color, 'ig'), newCluster[index])</span><br><span class="line">      })</span><br><span class="line">      return newStyle</span><br><span class="line">    },</span><br><span class="line">    getCSSString(url, variable) {</span><br><span class="line">      return new Promise(resolve =&gt; {</span><br><span class="line">        const xhr = new XMLHttpRequest()</span><br><span class="line">        xhr.onreadystatechange = () =&gt; {</span><br><span class="line">          if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) {</span><br><span class="line">            this[variable] = xhr.responseText.replace(/@font-face{[^}]+}/, '')</span><br><span class="line">            resolve()</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">        xhr.open('GET', url)</span><br><span class="line">        xhr.send()</span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    getThemeCluster(theme) {</span><br><span class="line">      const tintColor = (color, tint) =&gt; {</span><br><span class="line">        let red = parseInt(color.slice(0, 2), 16)</span><br><span class="line">        let green = parseInt(color.slice(2, 4), 16)</span><br><span class="line">        let blue = parseInt(color.slice(4, 6), 16)</span><br><span class="line">        if (tint === 0) { // when primary color is in its rgb space</span><br><span class="line">          return [red, green, blue].join(',')</span><br><span class="line">        } else {</span><br><span class="line">          red += Math.round(tint * (255 - red))</span><br><span class="line">          green += Math.round(tint * (255 - green))</span><br><span class="line">          blue += Math.round(tint * (255 - blue))</span><br><span class="line">          red = red.toString(16)</span><br><span class="line">          green = green.toString(16)</span><br><span class="line">          blue = blue.toString(16)</span><br><span class="line">          return `#${red}${green}${blue}`</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      const shadeColor = (color, shade) =&gt; {</span><br><span class="line">        let red = parseInt(color.slice(0, 2), 16)</span><br><span class="line">        let green = parseInt(color.slice(2, 4), 16)</span><br><span class="line">        let blue = parseInt(color.slice(4, 6), 16)</span><br><span class="line">        red = Math.round((1 - shade) * red)</span><br><span class="line">        green = Math.round((1 - shade) * green)</span><br><span class="line">        blue = Math.round((1 - shade) * blue)</span><br><span class="line">        red = red.toString(16)</span><br><span class="line">        green = green.toString(16)</span><br><span class="line">        blue = blue.toString(16)</span><br><span class="line">        return `#${red}${green}${blue}`</span><br><span class="line">      }</span><br><span class="line">      const clusters = [theme]</span><br><span class="line">      for (let i = 0; i &lt;= 9; i++) {</span><br><span class="line">        clusters.push(tintColor(theme, Number((i / 10).toFixed(2))))</span><br><span class="line">      }</span><br><span class="line">      clusters.push(shadeColor(theme, 0.1))</span><br><span class="line">      return clusters</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.theme-message,</span><br><span class="line">.theme-picker-dropdown {</span><br><span class="line">  z-index: 99999 !important;</span><br><span class="line">}</span><br><span class="line">.theme-picker .el-color-picker__trigger {</span><br><span class="line">  height: 26px !important;</span><br><span class="line">  width: 26px !important;</span><br><span class="line">  padding: 2px;</span><br><span class="line">}</span><br><span class="line">.theme-picker-dropdown .el-color-dropdown__link-btn {</span><br><span class="line">  display: none;</span><br><span class="line">}</span><br><span class="line">.el-color-picker {</span><br><span class="line">  height: auto !important;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ³¨å†Œä»£ç </strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> ThemePicker <span class="keyword">from</span> <span class="string">'./ThemePicker'</span></span><br><span class="line">Vue.component(<span class="string">'ThemePicker'</span>, ThemePicker)</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬äºŒæ­¥ï¼Œ  æ”¾ç½®äº**<code>layout/navbar.vue</code>**ä¸­</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®å…¨å±æ’ä»¶ --&gt;</span><br><span class="line"> &lt;theme-picker class="right-menu-item" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="å¤šè¯­è¨€å®ç°"><a href="#å¤šè¯­è¨€å®ç°" class="headerlink" title="å¤šè¯­è¨€å®ç°"></a>å¤šè¯­è¨€å®ç°</h2><p>**<code>ç›®æ ‡</code>**å®ç°å›½é™…åŒ–è¯­è¨€åˆ‡æ¢</p>
<h3 id="åˆå§‹åŒ–å¤šè¯­è¨€åŒ…"><a href="#åˆå§‹åŒ–å¤šè¯­è¨€åŒ…" class="headerlink" title="åˆå§‹åŒ–å¤šè¯­è¨€åŒ…"></a>åˆå§‹åŒ–å¤šè¯­è¨€åŒ…</h3><p>æœ¬é¡¹ç›®ä½¿ç”¨å›½é™…åŒ– i18n æ–¹æ¡ˆã€‚é€šè¿‡ <a href="https://github.com/kazupon/vue-i18n">vue-i18n</a>è€Œå®ç°ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆå›½é™…åŒ–çš„åŒ…</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i vue-i18n</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¬¬äºŒæ­¥ï¼Œéœ€è¦å•ç‹¬ä¸€ä¸ªå¤šè¯­è¨€çš„å®ä¾‹åŒ–æ–‡ä»¶ <code>src/lang/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span> <span class="comment">// å¼•å…¥Vue</span></span><br><span class="line"><span class="keyword">import</span> VueI18n <span class="keyword">from</span> <span class="string">'vue-i18n'</span> <span class="comment">// å¼•å…¥å›½é™…åŒ–çš„åŒ…</span></span><br><span class="line"><span class="keyword">import</span> Cookie <span class="keyword">from</span> <span class="string">'js-cookie'</span> <span class="comment">// å¼•å…¥cookieåŒ…</span></span><br><span class="line"><span class="keyword">import</span> elementEN <span class="keyword">from</span> <span class="string">'element-ui/lib/locale/lang/en'</span> <span class="comment">// å¼•å…¥é¥¿äº†ä¹ˆçš„è‹±æ–‡åŒ…</span></span><br><span class="line"><span class="keyword">import</span> elementZH <span class="keyword">from</span> <span class="string">'element-ui/lib/locale/lang/zh-CN'</span> <span class="comment">// å¼•å…¥é¥¿äº†ä¹ˆçš„ä¸­æ–‡åŒ…</span></span><br><span class="line">Vue.use(VueI18n) <span class="comment">// å…¨å±€æ³¨å†Œå›½é™…åŒ–åŒ…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueI18n({</span><br><span class="line">  <span class="attr">locale</span>: Cookie.get(<span class="string">'language'</span>) || <span class="string">'zh'</span>, <span class="comment">// ä»cookieä¸­è·å–è¯­è¨€ç±»å‹ è·å–ä¸åˆ°å°±æ˜¯ä¸­æ–‡</span></span><br><span class="line">  <span class="attr">messages</span>: {</span><br><span class="line">    <span class="attr">en</span>: {</span><br><span class="line">      ...elementEN <span class="comment">// å°†é¥¿äº†ä¹ˆçš„è‹±æ–‡è¯­è¨€åŒ…å¼•å…¥</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">zh</span>: {</span><br><span class="line">      ...elementZH <span class="comment">// å°†é¥¿äº†ä¹ˆçš„ä¸­æ–‡è¯­è¨€åŒ…å¼•å…¥</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä»£ç çš„ä½œç”¨æ˜¯å°†Elementçš„ä¸¤ç§è¯­è¨€å¯¼å…¥äº†</p>
</blockquote>
<p><strong>ç¬¬ä¸‰æ­¥ï¼Œåœ¨main.jsä¸­å¯¹æŒ‚è½½ i18nçš„æ’ä»¶ï¼Œå¹¶è®¾ç½®elementä¸ºå½“å‰çš„è¯­è¨€</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®elementä¸ºå½“å‰çš„è¯­è¨€</span></span><br><span class="line">Vue.use(ElementUI, {</span><br><span class="line">  <span class="attr">i18n</span>: <span class="function">(<span class="params">key, value</span>) =&gt;</span> i18n.t(key, value)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  i18n,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…"><a href="#å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…" class="headerlink" title="å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…"></a>å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…</h3><blockquote>
<p>æ­¤æ—¶ï¼Œelementå·²ç»å˜æˆäº†zhï¼Œä¹Ÿå°±æ˜¯ä¸­æ–‡ï¼Œä½†æ˜¯æˆ‘ä»¬å¸¸è§„çš„å†…å®¹æ€ä¹ˆæ ¹æ®å½“å‰è¯­è¨€ç±»å‹æ˜¾ç¤ºï¼Ÿ</p>
</blockquote>
<p>è¿™é‡Œï¼Œé’ˆå¯¹è‹±æ–‡å’Œä¸­æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ä¸¤ä¸ªä¸åŒçš„è¯­è¨€åŒ… <strong><code>src/lang/zh.js , src/lang/en.js</code></strong></p>
<blockquote>
<p>è¯¥è¯­è¨€åŒ…ï¼Œæˆ‘ä»¬å·²ç»åœ¨èµ„æºä¸­æä¾›</p>
</blockquote>
<p><strong>ç¬¬å››æ­¥ï¼Œåœ¨index.jsä¸­åŒæ ·å¼•å…¥è¯¥è¯­è¨€åŒ…</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> customZH <span class="keyword">from</span> <span class="string">'./zh'</span> <span class="comment">// å¼•å…¥è‡ªå®šä¹‰ä¸­æ–‡åŒ…</span></span><br><span class="line"><span class="keyword">import</span> customEN <span class="keyword">from</span> <span class="string">'./en'</span> <span class="comment">// å¼•å…¥è‡ªå®šä¹‰è‹±æ–‡åŒ…</span></span><br><span class="line">Vue.use(VueI18n) <span class="comment">// å…¨å±€æ³¨å†Œå›½é™…åŒ–åŒ…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueI18n({</span><br><span class="line">  <span class="attr">locale</span>: Cookie.get(<span class="string">'language'</span>) || <span class="string">'zh'</span>, <span class="comment">// ä»cookieä¸­è·å–è¯­è¨€ç±»å‹ è·å–ä¸åˆ°å°±æ˜¯ä¸­æ–‡</span></span><br><span class="line">  <span class="attr">messages</span>: {</span><br><span class="line">    <span class="attr">en</span>: {</span><br><span class="line">      ...elementEN, <span class="comment">// å°†é¥¿äº†ä¹ˆçš„è‹±æ–‡è¯­è¨€åŒ…å¼•å…¥</span></span><br><span class="line">      ...customEN</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">zh</span>: {</span><br><span class="line">      ...elementZH, <span class="comment">// å°†é¥¿äº†ä¹ˆçš„ä¸­æ–‡è¯­è¨€åŒ…å¼•å…¥</span></span><br><span class="line">      ...customZH</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…"><a href="#åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…" class="headerlink" title="åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…"></a>åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…</h3><blockquote>
<p> è‡ªå®šä¹‰è¯­è¨€åŒ…çš„å†…å®¹æ€ä¹ˆä½¿ç”¨?</p>
</blockquote>
<p><strong>ç¬¬äº”æ­¥ï¼Œåœ¨å·¦ä¾§èœå•åº”ç”¨</strong></p>
<p>å½“æˆ‘ä»¬å…¨å±€æ³¨å†Œi18nçš„æ—¶å€™ï¼Œæ¯ä¸ªç»„ä»¶éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ª**<code>$t</code>**çš„æ–¹æ³•ï¼Œå®ƒä¼šæ ¹æ®ä¼ å…¥çš„keyï¼Œè‡ªåŠ¨çš„å»å¯»æ‰¾å½“å‰è¯­è¨€çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å°†å·¦ä¾§èœå•å˜æˆå¤šè¯­è¨€å±•ç¤ºæ–‡æœ¬</p>
<p><strong><code>layout/components/SidebarItem.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;item :icon="onlyOneChild.meta.icon||(item.meta&amp;&amp;item.meta.icon)" :title="$t('route.'+onlyOneChild.name)" /&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ³¨æ„ï¼šå½“æ–‡æœ¬çš„å€¼ä¸ºåµŒå¥—æ—¶ï¼Œå¯ä»¥é€šè¿‡**<code>$t(key1.key2.key3...)</code>**çš„æ–¹å¼è·å–</p>
<blockquote>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å¤šè¯­è¨€çš„æ¥å…¥ï¼Œç°åœ¨å°è£…åˆ‡æ¢å¤šè¯­è¨€çš„ç»„ä»¶</p>
</blockquote>
<h3 id="å°è£…å¤šè¯­è¨€æ’ä»¶"><a href="#å°è£…å¤šè¯­è¨€æ’ä»¶" class="headerlink" title="å°è£…å¤šè¯­è¨€æ’ä»¶"></a>å°è£…å¤šè¯­è¨€æ’ä»¶</h3><p><strong>ç¬¬å…­æ­¥ï¼Œå°è£…å¤šè¯­è¨€ç»„ä»¶</strong>  <strong><code>src/components/lang/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dropdown trigger="click" @command="changeLanguage"&gt;</span><br><span class="line">    &lt;!-- è¿™é‡Œå¿…é¡»åŠ ä¸€ä¸ªdiv --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;svg-icon style="color:#fff;font-size:20px" icon-class="language" /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">      &lt;el-dropdown-item command="zh" :disabled="'zh'=== $i18n.locale "&gt;ä¸­æ–‡&lt;/el-dropdown-item&gt;</span><br><span class="line">      &lt;el-dropdown-item command="en" :disabled="'en'=== $i18n.locale "&gt;en&lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;/el-dropdown-menu&gt;</span><br><span class="line">  &lt;/el-dropdown&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Cookie from 'js-cookie'</span><br><span class="line">export default {</span><br><span class="line">  methods: {</span><br><span class="line">    changeLanguage(lang) {</span><br><span class="line">      Cookie.set('language', lang) // åˆ‡æ¢å¤šè¯­è¨€</span><br><span class="line">      this.$i18n.locale = lang // è®¾ç½®ç»™æœ¬åœ°çš„i18næ’ä»¶</span><br><span class="line">      this.$message.success('åˆ‡æ¢å¤šè¯­è¨€æˆåŠŸ')</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¬¬ä¸ƒæ­¥ï¼Œåœ¨Navbarç»„ä»¶ä¸­å¼•å…¥</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®åˆ‡æ¢å¤šè¯­è¨€ --&gt;</span><br><span class="line">     &lt;lang class="right-menu-item" /&gt;</span><br><span class="line">     &lt;!-- æ”¾ç½®ä¸»é¢˜ --&gt;</span><br><span class="line">     &lt;theme-picker class="right-menu-item" /&gt;</span><br><span class="line">     &lt;!-- æ”¾ç½®å…¨å±æ’ä»¶ --&gt;</span><br><span class="line">     &lt;screen-full class="right-menu-item" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ•ˆæœ</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200804001654730.png" alt="image-20200804001654730"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="tabé¡µçš„è§†å›¾å¼•å…¥"><a href="#tabé¡µçš„è§†å›¾å¼•å…¥" class="headerlink" title="tabé¡µçš„è§†å›¾å¼•å…¥"></a>tabé¡µçš„è§†å›¾å¼•å…¥</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°tabé¡µæ‰“å¼€è·¯ç”±çš„åŠŸèƒ½</p>
<blockquote>
<p>å½“å‰æˆ‘ä»¬å®ç°çš„æ‰“å¼€é¡µé¢ï¼Œçœ‹åˆ°ä¸€ä¸ªé¡µé¢ä¹‹åï¼Œå¦ä¸€ä¸ªé¡µé¢å°±ä¼šå…³é—­ï¼Œä¸ºäº†æ˜¾ç¤ºæ›´åŠ æœ‰æ•ˆç‡ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥å¤šé¡µç­¾ç»„ä»¶</p>
</blockquote>
<p>å¤šé¡µç­¾çš„ç»„ä»¶çš„ä»£ç è¿‡äºç¹æ‚ï¼Œå¼€å‘å®é™…éœ€è¦çš„æ˜¯é›†æˆå’Œè°ƒç”¨èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬åªæ˜¯å°†å¼€å‘å¥½çš„ç»„ä»¶é›†æˆåˆ°å½“å‰çš„åŠŸèƒ½é¡¹ä¸­å³å¯ã€‚</p>
<blockquote>
<p> åœ¨èµ„æºç›®å½•ä¸­ï¼Œ**<code>å¤šé¡µç­¾</code>**ç›®å½•ä¸‹æ”¾ç½®çš„æ˜¯ ç»„ä»¶å’Œvuexæ¨¡å—</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œå°†ç»„ä»¶TagsViewç›®å½•æ”¾ç½®åˆ°**<code>src/components</code>** , å¹¶å…¨å±€æ³¨å†Œ</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> TagsView <span class="keyword">from</span> <span class="string">'./TagsView'</span></span><br><span class="line">Vue.component(<span class="string">'TagsView'</span>, TagsView)</span><br></pre></td></tr></tbody></table></figure>



<p>ç¬¬äºŒæ­¥ï¼Œå°†Vuexæ¨¡å—**<code>tagsView.js</code>**æ”¾ç½®åˆ° <strong><code>src/store/modules</code></strong></p>
<p>å¹¶åœ¨storeä¸­å¼•å…¥è¯¥æ¨¡å—</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tagsView <span class="keyword">from</span> <span class="string">'./modules/tagsView'</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">    app,</span><br><span class="line">    settings,</span><br><span class="line">    user,</span><br><span class="line">    permission,</span><br><span class="line">    tagsView</span><br><span class="line">  },</span><br><span class="line">  getters</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨**<code>src/layout/Index.vue</code>**ä¸­å¼•å…¥è¯¥ç»„ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class="classObj" class="app-wrapper"&gt;</span><br><span class="line">    &lt;div v-if="device==='mobile'&amp;&amp;sidebar.opened" class="drawer-bg" @click="handleClickOutside" /&gt;</span><br><span class="line">    &lt;sidebar class="sidebar-container" /&gt;</span><br><span class="line">    &lt;div class="main-container"&gt;</span><br><span class="line">      &lt;div :class="{'fixed-header':fixedHeader}"&gt;</span><br><span class="line">        &lt;navbar /&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®tabsview --&gt;</span><br><span class="line">        &lt;tags-view /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;app-main /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200804012117287.png" alt="image-20200804012117287"></p>
<p><strong><code>æäº¤ä»£ç </code></strong><br>#12.æ‰“åŒ…ä¸Šçº¿</p>
<h2 id="æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼"><a href="#æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼" class="headerlink" title="æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼"></a><strong>æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼</strong></h2><p>**<code>ç›®æ ‡</code>**é…ç½®æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼</p>
<blockquote>
<p>åœ¨SPAå•é¡µåº”ç”¨ä¸­ï¼Œæœ‰ä¸¤ç§è·¯ç”±æ¨¡å¼</p>
</blockquote>
<p><strong>hashæ¨¡å¼</strong> ï¼š #åé¢æ˜¯è·¯ç”±è·¯å¾„ï¼Œç‰¹ç‚¹æ˜¯å‰ç«¯è®¿é—®ï¼Œ#åé¢çš„å˜åŒ–ä¸ä¼šç»è¿‡æœåŠ¡å™¨</p>
<p><strong>historyæ¨¡å¼</strong>ï¼šæ­£å¸¸çš„/è®¿é—®æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯åç«¯è®¿é—®ï¼Œä»»æ„åœ°å€çš„å˜åŒ–éƒ½ä¼šè®¿é—®æœåŠ¡å™¨</p>
<blockquote>
<p>å¼€å‘åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åœ¨ç”¨hashæ¨¡å¼ï¼Œæ‰“åŒ…æˆ‘ä»¬å°è¯•ç”¨historyæ¨¡å¼</p>
</blockquote>
<p>æ”¹æˆhistoryæ¨¡å¼éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†è·¯ç”±çš„modeç±»å‹æ”¹æˆhistoryå³å¯</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> createRouter = <span class="function">() =&gt;</span> <span class="keyword">new</span> Router({</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">'history'</span>, <span class="comment">// require service support</span></span><br><span class="line">  <span class="attr">scrollBehavior</span>: <span class="function">() =&gt;</span> ({ <span class="attr">y</span>: <span class="number">0</span> }), <span class="comment">// ç®¡ç†æ»šåŠ¨è¡Œä¸º å¦‚æœå‡ºç°æ»šåŠ¨ åˆ‡æ¢å°±è®© è®©é¡µé¢å›åˆ°é¡¶éƒ¨</span></span><br><span class="line">  <span class="attr">routes</span>: [...constantRoutes] <span class="comment">// æ”¹æˆåªæœ‰é™æ€è·¯ç”±</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å‡è®¾æˆ‘ä»¬çš„åœ°å€æ˜¯è¿™æ ·çš„  <strong><code>www.xxxx/com/hr</code></strong>/a <strong><code>www.xxxx/com/hr</code></strong>/b</p>
</blockquote>
<p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œå…¶å®åŸŸåæ˜¯**<code>www.xxxx/com</code>**ï¼Œhræ˜¯ç‰¹å®šçš„å‰ç¼€åœ°å€ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªbaseå±æ€§ï¼Œé…ç½®ä¸ºhr</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> createRouter = <span class="function">() =&gt;</span> <span class="keyword">new</span> Router({</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">'history'</span>, <span class="comment">// require service support</span></span><br><span class="line">  <span class="attr">base</span>: <span class="string">'/hr/'</span>, <span class="comment">// é…ç½®é¡¹ç›®çš„åŸºç¡€åœ°å€</span></span><br><span class="line">  <span class="attr">scrollBehavior</span>: <span class="function">() =&gt;</span> ({ <span class="attr">y</span>: <span class="number">0</span> }), <span class="comment">// ç®¡ç†æ»šåŠ¨è¡Œä¸º å¦‚æœå‡ºç°æ»šåŠ¨ åˆ‡æ¢å°±è®© è®©é¡µé¢å›åˆ°é¡¶éƒ¨</span></span><br><span class="line">  <span class="attr">routes</span>: [...constantRoutes] <span class="comment">// æ”¹æˆåªæœ‰é™æ€è·¯ç”±</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°åœ°å€å·²ç»å˜æˆæˆ‘ä»¬æƒ³è¦çš„æ ·å­äº†</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200804014626686.png" alt="image-20200804014626686"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨"><a href="#æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨" class="headerlink" title="æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨"></a>æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨</h2><p>**<code>ç›®æ ‡</code>**ï¼š å¯¹å¼€å‘çš„åº”ç”¨è¿›è¡Œæ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨</p>
<h3 id="æ€§èƒ½åˆ†æ"><a href="#æ€§èƒ½åˆ†æ" class="headerlink" title="æ€§èƒ½åˆ†æ"></a>æ€§èƒ½åˆ†æ</h3><blockquote>
<p>æˆ‘ä»¬é›†æˆäº† åŠŸèƒ½ï¼Œå†™äº†å¾ˆå¤šç»„ä»¶ï¼Œæœ€ç»ˆéƒ½ä¼šæ‰“åŒ…æˆä¸€å †æ–‡ä»¶ï¼Œé‚£ä¹ˆçœŸå®è¿è¡Œçš„æ€§èƒ½å¦‚ä½•å‘¢ï¼Ÿ</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨vue-cliæœ¬èº«æä¾›çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå¯¹æˆ‘ä»¬å¼€å‘çš„æ‰€æœ‰åŠŸèƒ½è¿›è¡Œæ‰“åŒ…åˆ†æ</p>
<p>å®ƒçš„åº”ç”¨éå¸¸ç®€å•</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm run preview -- --report</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™ä¸ªå‘½ä»¤ä¼šä»æˆ‘ä»¬çš„**<code>å…¥å£main.js</code>**è¿›è¡Œä¾èµ–åˆ†æï¼Œåˆ†æå‡ºæœ€å¤§çš„åŒ…ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œè§‚å¯Ÿå’Œä¼˜åŒ–</p>
<p>æ‰§è¡Œå®Œè¿™ä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹çš„é¡µé¢</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200804015849396.png" alt="image-20200804015849396"></p>
<p>å¦‚å›¾æ‰€ä»¥ï¼Œæ–¹å—è¶Šå¤§ï¼Œè¯´æ˜è¯¥æ–‡ä»¶å ç”¨çš„æ–‡ä»¶è¶Šå¤§ï¼Œæ–‡ä»¶è¶Šå¤§ï¼Œå¯¹äºç½‘ç»œå¸¦å®½å’Œè®¿é—®é€Ÿåº¦çš„è¦æ±‚å°±è¶Šé«˜ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼˜åŒ–çš„æ–¹å‘</p>
<blockquote>
<p>åƒè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æ€ä¹ˆä¼˜åŒ–ä¸€ä¸‹å‘¢</p>
</blockquote>
<h3 id="webpackæ’é™¤æ‰“åŒ…"><a href="#webpackæ’é™¤æ‰“åŒ…" class="headerlink" title="webpackæ’é™¤æ‰“åŒ…"></a>webpackæ’é™¤æ‰“åŒ…</h3><p>CDNæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼</p>
<blockquote>
<p>æ–‡ä»¶ä¸æ˜¯å¤§å—ï¼Ÿæˆ‘ä»¬å°±ä¸è¦æŠŠè¿™äº›å¤§çš„æ–‡ä»¶å’Œé‚£äº›å°çš„æ–‡ä»¶æ‰“åŒ…åˆ°ä¸€èµ·äº†ï¼Œåƒè¿™ç§xlsx,elementè¿™ç§åŠŸèƒ½æ€§å¾ˆå…¨çš„æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾åˆ°CDNæœåŠ¡å™¨ä¸Šï¼Œä¸€æ¥ï¼Œå‡è½»æ•´ä½“åŒ…çš„å¤§å°ï¼ŒäºŒæ¥CDNçš„åŠ é€ŸæœåŠ¡å¯ä»¥åŠ å¿«æˆ‘ä»¬å¯¹äºæ’ä»¶çš„è®¿é—®é€Ÿåº¦</p>
</blockquote>
<p><strong>ä½¿ç”¨æ–¹å¼</strong></p>
<p>å…ˆæ‰¾åˆ° <code>vue.config.js</code>ï¼Œ æ·»åŠ  <code>externals</code> è®© <code>webpack</code> ä¸æ‰“åŒ… <code>xlsx</code> å’Œ <code>element</code>   </p>
<p><strong><code>vue.config.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">// æ’é™¤ elementUI xlsx  å’Œ vue </span></span><br><span class="line"> <span class="attr">externals</span>:</span><br><span class="line">     {</span><br><span class="line">       <span class="string">'vue'</span>: <span class="string">'Vue'</span>,</span><br><span class="line">       <span class="string">'element-ui'</span>: <span class="string">'ELEMENT'</span>,</span><br><span class="line">       <span class="string">'xlsx'</span>: <span class="string">'XLSX'</span></span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p>å†æ¬¡è¿è¡Œï¼Œæˆ‘ä»¬ä¼šå‘ç°åŒ…çš„å¤§å°å·²ç»å¤§å¹…å‡å°</p>
<h3 id="CDNæ–‡ä»¶é…ç½®"><a href="#CDNæ–‡ä»¶é…ç½®" class="headerlink" title="CDNæ–‡ä»¶é…ç½®"></a>CDNæ–‡ä»¶é…ç½®</h3><blockquote>
<p>ä½†æ˜¯ï¼Œæ²¡æœ‰è¢«æ‰“åŒ…çš„å‡ ä¸ªæ¨¡å—æ€ä¹ˆå¤„ç†ï¼Ÿ</p>
</blockquote>
<p>å¯ä»¥é‡‡ç”¨CDNçš„æ–¹å¼ï¼Œåœ¨é¡µé¢æ¨¡æ¿ä¸­é¢„å…ˆå¼•å…¥</p>
<p><strong><code>vue.config.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> cdn = {</span><br><span class="line">  <span class="attr">css</span>: [</span><br><span class="line">    <span class="comment">// element-ui css</span></span><br><span class="line">    <span class="string">'https://unpkg.com/element-ui/lib/theme-chalk/index.css'</span> <span class="comment">// æ ·å¼è¡¨</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">js</span>: [</span><br><span class="line">    <span class="comment">// vue must at first!</span></span><br><span class="line">    <span class="string">'https://unpkg.com/vue/dist/vue.js'</span>, <span class="comment">// vuejs</span></span><br><span class="line">    <span class="comment">// element-ui js</span></span><br><span class="line">    <span class="string">'https://unpkg.com/element-ui/lib/index.js'</span>, <span class="comment">// elementUI</span></span><br><span class="line">      <span class="string">'https://cdn.jsdelivr.net/npm/xlsx@0.16.6/dist/jszip.min.js'</span>,</span><br><span class="line">    <span class="string">'https://cdn.jsdelivr.net/npm/xlsx@0.16.6/dist/xlsx.full.min.js'</span></span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä½†æ˜¯è¯·æ³¨æ„ï¼Œè¿™æ—¶çš„é…ç½®å®é™…ä¸Šæ˜¯å¯¹å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒéƒ½ç”Ÿæ•ˆçš„ï¼Œåœ¨å¼€å‘ç¯å¢ƒæ—¶ï¼Œæ²¡æœ‰å¿…è¦ä½¿ç”¨CDNï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥è¿›è¡ŒåŒºåˆ†</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> cdn = { <span class="attr">css</span>: [], <span class="attr">js</span>: [] }</span><br><span class="line"><span class="comment">// é€šè¿‡ç¯å¢ƒå˜é‡ æ¥åŒºåˆ†æ˜¯å¦ä½¿ç”¨cdn</span></span><br><span class="line"><span class="keyword">const</span> isProd = process.env.NODE_ENV === <span class="string">'production'</span> <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">let</span> externals = {}</span><br><span class="line"><span class="keyword">if</span> (isProd) {</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒ å°±æ’é™¤æ‰“åŒ… å¦åˆ™ä¸æ’é™¤</span></span><br><span class="line">  externals = {</span><br><span class="line">    <span class="comment">// key(åŒ…å) / value(è¿™ä¸ªå€¼ æ˜¯ éœ€è¦åœ¨CDNä¸­è·å–js, ç›¸å½“äº è·å–çš„jsä¸­ çš„è¯¥åŒ…çš„å…¨å±€çš„å¯¹è±¡çš„åå­—)</span></span><br><span class="line">    <span class="string">'vue'</span>: <span class="string">'Vue'</span>, <span class="comment">// åé¢çš„åå­—ä¸èƒ½éšä¾¿èµ· åº”è¯¥æ˜¯ jsä¸­çš„å…¨å±€å¯¹è±¡å</span></span><br><span class="line">    <span class="string">'element-ui'</span>: <span class="string">'ELEMENT'</span>, <span class="comment">// éƒ½æ˜¯jsä¸­å…¨å±€å®šä¹‰çš„</span></span><br><span class="line">    <span class="string">'xlsx'</span>: <span class="string">'XLSX'</span> <span class="comment">// éƒ½æ˜¯jsä¸­å…¨å±€å®šä¹‰çš„</span></span><br><span class="line">  }</span><br><span class="line">  cdn = {</span><br><span class="line">    <span class="attr">css</span>: [</span><br><span class="line">      <span class="string">'https://unpkg.com/element-ui/lib/theme-chalk/index.css'</span> <span class="comment">// æå‰å¼•å…¥elementUIæ ·å¼</span></span><br><span class="line">    ], <span class="comment">// æ”¾ç½®cssæ–‡ä»¶ç›®å½•</span></span><br><span class="line">    <span class="attr">js</span>: [</span><br><span class="line">      <span class="string">'https://unpkg.com/vue/dist/vue.js'</span>, <span class="comment">// vuejs</span></span><br><span class="line">      <span class="string">'https://unpkg.com/element-ui/lib/index.js'</span>, <span class="comment">// element</span></span><br><span class="line">      <span class="string">'https://cdn.jsdelivr.net/npm/xlsx@0.16.6/dist/xlsx.full.min.js'</span>, <span class="comment">// xlsx ç›¸å…³</span></span><br><span class="line">      <span class="string">'https://cdn.jsdelivr.net/npm/xlsx@0.16.6/dist/jszip.min.js'</span> <span class="comment">// xlsx ç›¸å…³</span></span><br><span class="line">    ] <span class="comment">// æ”¾ç½®jsæ–‡ä»¶ç›®å½•</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿"><a href="#æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿" class="headerlink" title="æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿"></a>æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿</h3><p>ä¹‹åé€šè¿‡ <code>html-webpack-plugin</code>æ³¨å…¥åˆ° <code>index.html</code>ä¹‹ä¸­:</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line">config.plugin(<span class="string">'html'</span>).tap(<span class="function"><span class="params">args</span> =&gt;</span> {</span><br><span class="line">  args[<span class="number">0</span>].cdn = cdn</span><br><span class="line">  <span class="keyword">return</span> args</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰¾åˆ° <code>public/index.html</code>ã€‚é€šè¿‡ä½ é…ç½®çš„<code>CDN Config</code> ä¾æ¬¡æ³¨å…¥ css å’Œ jsã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;!-- å¼•å…¥æ ·å¼ --&gt;</span><br><span class="line">  &lt;% for(var css of htmlWebpackPlugin.options.cdn.css) { %&gt;</span><br><span class="line">    &lt;link rel="stylesheet" href="&lt;%=css%&gt;"&gt;</span><br><span class="line">  &lt;% } %&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¼•å…¥JS --&gt;</span><br><span class="line">&lt;% for(var js of htmlWebpackPlugin.options.cdn.js) { %&gt;</span><br><span class="line">  &lt;script src="&lt;%=js%&gt;"&gt;&lt;/script&gt;</span><br><span class="line">&lt;% } %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åï¼Œè¿›è¡Œæ‰“åŒ… </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm run build:prod</span><br></pre></td></tr></tbody></table></figure>

<h2 id="åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ"><a href="#åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ" class="headerlink" title="åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ"></a>åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ</h2><p>**<code>ç›®æ ‡</code>**å°†æ‰“åŒ…å¥½çš„ä»£ç æ‰“åŒ…ä¸Šçº¿ï¼Œå¹¶åœ¨nodejsä¸­ä»£ç†è·¨åŸŸ</p>
<h3 id="ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®"><a href="#ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®" class="headerlink" title="ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®"></a>ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®</h3><blockquote>
<p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆçš„å¼€å‘æµç¨‹ï¼ŒæŒ‰ç…§å¸¸è§„çš„åšæ³•ï¼Œæ­¤æ—¶ï¼Œè¿ç»´ä¼šå°†æˆ‘ä»¬çš„ä»£ç éƒ¨ç½²åˆ°é˜¿é‡Œäº‘çš„ngixæœåŠ¡ä¸Šï¼Œå¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶éƒ¨ç½²åˆ°æœ¬æœºçš„nodejsç¯å¢ƒä¸­</p>
</blockquote>
<p>éƒ¨ç½² è‡ªåŠ¨åŒ–éƒ¨ç½² /æ‰‹åŠ¨éƒ¨ç½²</p>
<p>ç¬¬ä¸€æ­¥ï¼Œå»ºç«‹webæœåŠ¡æ–‡ä»¶å¤¹  <strong><code>hrServer</code></strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ mkdir hrServer <span class="comment">#å»ºç«‹hrServeræ–‡ä»¶å¤¹ </span></span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬äºŒæ­¥ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆå§‹åŒ–npm</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm init -y</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼Œå®‰è£…æœåŠ¡ç«¯æ¡†æ¶koa(ä¹Ÿå¯ä»¥é‡‡ç”¨expressæˆ–è€…egg)</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i koa koa-static</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬å››æ­¥ï¼Œæ‹·è´ä¸Šå°èŠ‚æ‰“åŒ…çš„distç›®å½•åˆ°**<code>hrServer/public</code>**ä¸‹</p>
<p>ç¬¬äº”æ­¥ï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºapp.jsï¼Œä»£ç å¦‚ä¸‹</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa  = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">'koa-static'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line">app.use(serve(__dirname + <span class="string">"/public"</span>)); <span class="comment">//å°†publicä¸‹çš„ä»£ç é™æ€åŒ–</span></span><br><span class="line">app.listen(<span class="number">3333</span>, <span class="function">() =&gt;</span> {</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'äººèµ„é¡¹ç›®å¯åŠ¨'</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ï¼Œ<a href="http://localhost:3333/">http://localhost:3333</a></p>
</blockquote>
<p>é¡µé¢å‡ºæ¥äº†</p>
<p><img src="/2021/07/02/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805012430884.png" alt="image-20200805012430884"></p>
<h3 id="è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜"><a href="#è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜" class="headerlink" title="è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜"></a>è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜</h3><p>ä½†æ˜¯ï¼Œæ­¤æ—¶å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œ</p>
<ol>
<li><strong>å½“æˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œå‘ç°404</strong></li>
</ol>
<blockquote>
<p>  è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é‡‡ç”¨äº†historyçš„æ¨¡å¼ï¼Œåœ°å€çš„å˜åŒ–ä¼šå¼•èµ·æœåŠ¡å™¨çš„åˆ·æ–°ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨app.jså¯¹æ‰€æœ‰çš„åœ°å€è¿›è¡Œä¸€ä¸‹å¤„ç†å³å¯</p>
</blockquote>
<p>å®‰è£… koaä¸­é—´ä»¶ </p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i koa2-connect-history-api-fallback <span class="comment">#ä¸“é—¨å¤„ç†historyæ¨¡å¼çš„ä¸­é—´ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ³¨å†Œä¸­é—´ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa  = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">'koa-static'</span>);</span><br><span class="line"><span class="keyword">const</span>  { historyApiFallback } = <span class="built_in">require</span>(<span class="string">'koa2-connect-history-api-fallback'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="comment">// è¿™å¥è¯ çš„æ„æ€æ˜¯é™¤æ¥å£ä¹‹å¤–æ‰€æœ‰çš„è¯·æ±‚éƒ½å‘é€ç»™äº† index.html</span></span><br><span class="line">app.use(historyApiFallback({ </span><br><span class="line">     <span class="attr">whiteList</span>: [<span class="string">'/prod-api'</span>]</span><br><span class="line"> }));  <span class="comment">// è¿™é‡Œçš„whiteListæ˜¯ ç™½åå•çš„æ„æ€</span></span><br><span class="line">app.use(serve(__dirname + <span class="string">"/public"</span>)); <span class="comment">//å°†publicä¸‹çš„ä»£ç é™æ€åŒ–</span></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3333</span>, <span class="function">() =&gt;</span> {</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'äººèµ„é¡¹ç›®å¯åŠ¨'</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜"><a href="#è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜" class="headerlink" title="è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜"></a>è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜</h3><ol>
<li>å½“ç‚¹å‡»ç™»å½•æ—¶ï¼Œå‘ç°æ¥å£404</li>
</ol>
<blockquote>
<p>  å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œvue-cliçš„ä»£ç†åªå­˜åœ¨äºå¼€å‘æœŸï¼Œå½“æˆ‘ä»¬ä¸Šçº¿åˆ°nodeç¯å¢ƒæˆ–è€…ngixç¯å¢ƒæ—¶ï¼Œéœ€è¦æˆ‘ä»¬å†æ¬¡åœ¨ç¯å¢ƒä¸­ä»£ç†</p>
</blockquote>
<p>åœ¨nodejsä¸­ä»£ç†</p>
<p>å®‰è£…è·¨åŸŸä»£ç†ä¸­é—´ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">$ npm i koa2-proxy-middleware</span><br></pre></td></tr></tbody></table></figure>

<p>é…ç½®è·¨è¶Šä»£ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'koa2-proxy-middleware'</span>)</span><br><span class="line"></span><br><span class="line">app.use(proxy({</span><br><span class="line">  <span class="attr">targets</span>: {</span><br><span class="line">    <span class="comment">// (.*) means anything</span></span><br><span class="line">    <span class="string">'/prod-api/(.*)'</span>: {</span><br><span class="line">        <span class="attr">target</span>: <span class="string">'http://ihrm-java.itheima.net/api'</span>, <span class="comment">//åç«¯æœåŠ¡å™¨åœ°å€</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: {  </span><br><span class="line">            <span class="string">'/prod-api'</span>: <span class="string">""</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}))</span><br></pre></td></tr></tbody></table></figure>

<p>æ³¨æ„ï¼šè¿™é‡Œä¹‹æ‰€ä»¥ç”¨äº†<strong>pathRewrite</strong>ï¼Œæ˜¯å› ä¸ºç”Ÿäº§ç¯å¢ƒçš„è¯·æ±‚åŸºç¡€åœ°å€æ˜¯ <strong>/prod-api</strong>ï¼Œéœ€è¦å°†è¯¥åœ°å€å»æ‰</p>
<p>æ­¤æ—¶ï¼Œé¡¹ç›®å°±å¯ä»¥è·¨åŸŸè®¿é—®äº†ï¼</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vueåº”ç”¨</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
</search>

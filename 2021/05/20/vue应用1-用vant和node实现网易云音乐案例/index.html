<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>vue应用1—用vant和node实现网易云音乐案例 | Abigail Cui的小站</title><meta name="author" content="Abigail Cui"><meta name="copyright" content="Abigail Cui"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本地接口项目部署 下载网易云音乐node接口项目, 在本地启动, 为我们vue项目提供数据支持 项目地址 备用地址 下载后, 安装所有依赖, 在本地启动起来, 测试访问此地址是否有数据   总结: 前端请求本地的node项目, node服务器伪装请求去拿网易云音乐服务器数据转发回给自己前端  今日学习目标 能够掌握vant组件库的使用 能够掌握vant组件自定义样式能力 能够掌握组件库使用和文档">
<meta property="og:type" content="article">
<meta property="og:title" content="vue应用1—用vant和node实现网易云音乐案例">
<meta property="og:url" content="http://abigailcui.github.io/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/index.html">
<meta property="og:site_name" content="Abigail Cui的小站">
<meta property="og:description" content="本地接口项目部署 下载网易云音乐node接口项目, 在本地启动, 为我们vue项目提供数据支持 项目地址 备用地址 下载后, 安装所有依赖, 在本地启动起来, 测试访问此地址是否有数据   总结: 前端请求本地的node项目, node服务器伪装请求去拿网易云音乐服务器数据转发回给自己前端  今日学习目标 能够掌握vant组件库的使用 能够掌握vant组件自定义样式能力 能够掌握组件库使用和文档">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://abigailcui.github.io/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/1_%E9%A6%96%E9%A1%B5.png">
<meta property="article:published_time" content="2021-05-20T07:04:15.000Z">
<meta property="article:modified_time" content="2021-08-23T13:47:57.888Z">
<meta property="article:author" content="Abigail Cui">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://abigailcui.github.io/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/1_%E9%A6%96%E9%A1%B5.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://abigailcui.github.io/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'vue应用1—用vant和node实现网易云音乐案例',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-08-23 21:47:57'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/te/"><i class="fa-fw fas fa-music"></i><span> ToDo-List</span></a></li><li><a class="site-page child" href="/todo-List/index.html#/myday"><i class="fa-fw fas fa-image"></i><span> Galleries</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/1_%E9%A6%96%E9%A1%B5.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Abigail Cui的小站</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/te/"><i class="fa-fw fas fa-music"></i><span> ToDo-List</span></a></li><li><a class="site-page child" href="/todo-List/index.html#/myday"><i class="fa-fw fas fa-image"></i><span> Galleries</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">vue应用1—用vant和node实现网易云音乐案例</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-05-20T07:04:15.000Z" title="发表于 2021-05-20 15:04:15">2021-05-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-23T13:47:57.888Z" title="更新于 2021-08-23 21:47:57">2021-08-23</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="vue应用1—用vant和node实现网易云音乐案例"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<h2 id="本地接口项目部署"><a href="#本地接口项目部署" class="headerlink" title="本地接口项目部署"></a>本地接口项目部署</h2></blockquote>
<p>下载网易云音乐node接口项目, 在本地启动, 为我们vue项目提供数据支持</p>
<p><a target="_blank" rel="noopener" href="https://binaryify.github.io/NeteaseCloudMusicApi/#/?id=%e5%ae%89%e8%a3%85">项目地址</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Binaryify/NeteaseCloudMusicApi/tree/master/docs">备用地址</a></p>
<p>下载后, 安装所有依赖, 在本地启动起来, 测试访问此地址是否有数据</p>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210328231901220.png" alt="image-20210328231901220"></p>
<blockquote>
<p>总结: 前端请求本地的node项目, node服务器伪装请求去拿网易云音乐服务器数据转发回给自己前端</p>
</blockquote>
<h2 id="今日学习目标"><a href="#今日学习目标" class="headerlink" title="今日学习目标"></a>今日学习目标</h2><ol>
<li>能够掌握vant组件库的使用</li>
<li>能够掌握vant组件自定义样式能力</li>
<li>能够掌握组件库使用和文档使用能力</li>
<li>能够完成网易云音乐案例</li>
</ol>
<h2 id="1-案例-网易云音乐"><a href="#1-案例-网易云音乐" class="headerlink" title="1. 案例-网易云音乐"></a>1. 案例-网易云音乐</h2><h3 id="1-0-网易云音乐-本地接口"><a href="#1-0-网易云音乐-本地接口" class="headerlink" title="1.0 网易云音乐-本地接口"></a>1.0 网易云音乐-本地接口</h3><blockquote>
<p>目的: 请求网易云音乐服务器API接口-获取数据</p>
</blockquote>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210512135848114.png" alt="image-20210512135848114"></p>
<blockquote>
<p>总结: 反向代理就是用本地开启cors的服务器去转发请求拿到数据</p>
</blockquote>
<h3 id="1-1-网易云音乐-本地接口启动"><a href="#1-1-网易云音乐-本地接口启动" class="headerlink" title="1.1 网易云音乐-本地接口启动"></a>1.1 网易云音乐-本地接口启动</h3><blockquote>
<p>目的: 启动本地网易云音乐API服务</p>
</blockquote>
<p>在今天的笔记铺垫中, 大家自学下载了一个项目启动即可</p>
<h3 id="1-2-网易云音乐-前端项目初始化"><a href="#1-2-网易云音乐-前端项目初始化" class="headerlink" title="1.2 网易云音乐-前端项目初始化"></a>1.2 网易云音乐-前端项目初始化</h3><blockquote>
<p>目标: 初始化项目, 下载必备包, 引入初始文件, 配置按需自动引入vant, 创建页面组件</p>
</blockquote>
<ol>
<li><p>初始化工程</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create music-demo</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>下载需要的所有第三方依赖包</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add axios vant vue-router </span><br></pre></td></tr></tbody></table></figure></li>
<li><p>引入笔记代码里准备好的reset.css和flexible.js - 实现样式初始化和适配问题 - 引入到main.js</p>
</li>
<li><p>本次vant使用<strong>自动按需引入</strong>的方式</p>
<p>文档: <a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart">https://vant-contrib.gitee.io/vant/#/zh-CN/quickstart</a></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-plugin-import  -D</span><br></pre></td></tr></tbody></table></figure>

<p>在babel.config.js - 添加插件配置</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">       [<span class="string">'import'</span>, {</span><br><span class="line">           <span class="attr">libraryName</span>: <span class="string">'vant'</span>,</span><br><span class="line">           <span class="attr">libraryDirectory</span>: <span class="string">'es'</span>,</span><br><span class="line">           <span class="attr">style</span>: <span class="literal">true</span></span><br><span class="line">       }, <span class="string">'vant'</span>]</span><br><span class="line">   ]</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-3-网易云音乐-需求分析"><a href="#1-3-网易云音乐-需求分析" class="headerlink" title="1.3 网易云音乐-需求分析"></a>1.3 网易云音乐-需求分析</h3><p>根据需求, 创建路由所需要的5个页面的组件</p>
<p>Layout(布局, 顶部导航和底部导航) &gt; 二级路由 Home 和 Search</p>
<p>Play</p>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210426212251154.png" alt="image-20210426212251154"></p>
<p>创建需要的views下的页面组件4个</p>
<p>views/Layout/index.vue  - 负责布局(上下导航 - 中间二级路由切换首页和搜索页面)</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 中间内容区域 - 容器样式(留好上下导航所占位置) */</span></span><br><span class="line"><span class="selector-class">.main</span> {</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">46px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>views/Home/index.vue - 标题和歌名样式</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 标题 */</span></span><br><span class="line"><span class="selector-class">.title</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.266667rem</span> <span class="number">0.24rem</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0.24rem</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/* 推荐歌单 - 歌名 */</span></span><br><span class="line"><span class="selector-class">.song_name</span> {</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.346667rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0.08rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.266667rem</span>;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">  <span class="attribute">display</span>: -webkit-box; <span class="comment">/** 对象作为伸缩盒子模型显示 **/</span></span><br><span class="line">  -webkit-box-orient: vertical; <span class="comment">/** 设置或检索伸缩盒对象的子元素的排列方式 **/</span></span><br><span class="line">  -webkit-line-clamp: <span class="number">2</span>; <span class="comment">/** 显示的行数 **/</span></span><br><span class="line">  <span class="attribute">overflow</span>: hidden; <span class="comment">/** 隐藏超出的内容 **/</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>views/Search/index.vue</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 搜索容器的样式 */</span></span><br><span class="line"><span class="selector-class">.search_wrap</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.266667rem</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*热门搜索文字标题样式 */</span></span><br><span class="line"><span class="selector-class">.hot_title</span> {</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.32rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#666</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 热搜词_容器 */</span></span><br><span class="line"><span class="selector-class">.hot_name_wrap</span> {</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0.266667rem</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 热搜词_样式 */</span></span><br><span class="line"><span class="selector-class">.hot_item</span> {</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0.853333rem</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0.213333rem</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">0.213333rem</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">0.373333rem</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.373333rem</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">0.853333rem</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">border-color</span>: <span class="number">#d3d4da</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0.853333rem</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d3d4da</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>views/Play/index.vue - 直接从预习资料里复制(节省时间) - 可自己扩展阅读代码</p>
<h3 id="1-4-网易云音乐-路由准备"><a href="#1-4-网易云音乐-路由准备" class="headerlink" title="1.4 网易云音乐-路由准备"></a>1.4 网易云音乐-路由准备</h3><blockquote>
<p>目标: 准备路由配置, 显示不同路由页面</p>
</blockquote>
<p>router/index.js - 准备路由 - 以及默认显示Layout, 然后Layout默认显示二级路由的首页</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由-相关模块</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'@/views/Layout'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'@/views/Home'</span></span><br><span class="line"><span class="keyword">import</span> Search <span class="keyword">from</span> <span class="string">'@/views/Search'</span></span><br><span class="line"><span class="keyword">import</span> Play <span class="keyword">from</span> <span class="string">'@/views/Play'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">'/layout'</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/layout'</span>,</span><br><span class="line">        <span class="attr">component</span>: Layout,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">'/layout/home'</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'home'</span>,</span><br><span class="line">                <span class="attr">component</span>: Home,</span><br><span class="line">                <span class="attr">meta</span>: { <span class="comment">// meta保存路由对象额外信息的</span></span><br><span class="line">                    <span class="attr">title</span>: <span class="string">"首页"</span></span><br><span class="line">                }</span><br><span class="line">            },</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'search'</span>,</span><br><span class="line">                <span class="attr">component</span>: Search,</span><br><span class="line">                <span class="attr">meta</span>: {</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">"搜索"</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/play'</span>,</span><br><span class="line">        <span class="attr">component</span>: Play</span><br><span class="line">    }</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter({</span><br><span class="line">    routes</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></tbody></table></figure>

<p>main.js - 引入路由对象, 注册到new Vue中</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  router</span><br><span class="line">}).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>App.vue中留好router-view显示路由页面</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>总结: 把项目的框搭好, 逐个攻破</p>
</blockquote>
<h3 id="1-5-网易云音乐-Tabbar组件"><a href="#1-5-网易云音乐-Tabbar组件" class="headerlink" title="1.5 网易云音乐-Tabbar组件"></a>1.5 网易云音乐-Tabbar组件</h3><blockquote>
<p>目标: 点击底部导航, 切换路由页面显示</p>
</blockquote>
<p>文档: <a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant/#/zh-CN/tabbar">https://vant-contrib.gitee.io/vant/#/zh-CN/tabbar</a></p>
<ol>
<li><p>注册Tabbar组件, 在main.js中</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { Tabbar, TabbarItem  } <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line">Vue.use(Tabbar);</span><br><span class="line">Vue.use(TabbarItem);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>在Layout.vue中使用</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div class="main"&gt;</span><br><span class="line">      &lt;!-- 二级路由-挂载点 --&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;van-tabbar route&gt;</span><br><span class="line">      &lt;van-tabbar-item replace to="/layout/home" icon="home-o"</span><br><span class="line">        &gt;首页&lt;/van-tabbar-item</span><br><span class="line">      &gt;</span><br><span class="line">      &lt;van-tabbar-item replace to="/layout/search" icon="search"</span><br><span class="line">        &gt;搜索&lt;/van-tabbar-item</span><br><span class="line">      &gt;</span><br><span class="line">    &lt;/van-tabbar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* 中间内容区域 - 容器样式(留好上下导航所占位置) */</span><br><span class="line">.main {</span><br><span class="line">  padding-top: 46px;</span><br><span class="line">  padding-bottom: 50px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>开启路由模式 route属性, 和to属性指向要切换的路由路径</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;van-tabbar route&gt;</span><br><span class="line">    &lt;van-tabbar-item icon="home-o" to="/layout/home"</span><br><span class="line">                     &gt;首页&lt;/van-tabbar-item</span><br><span class="line">        &gt;</span><br><span class="line">    &lt;van-tabbar-item icon="search" to="/layout/search"</span><br><span class="line">                     &gt;搜索&lt;/van-tabbar-item</span><br><span class="line">        &gt;</span><br><span class="line">&lt;/van-tabbar&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p>总结: van-tabbar开启route</p>
</blockquote>
<h3 id="1-6-网易云音乐-NavBar导航组件"><a href="#1-6-网易云音乐-NavBar导航组件" class="headerlink" title="1.6 网易云音乐-NavBar导航组件"></a>1.6 网易云音乐-NavBar导航组件</h3><blockquote>
<p>目标: 实现顶部标题展示</p>
</blockquote>
<p>文档: <a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant/#/zh-CN/nav-bar">https://vant-contrib.gitee.io/vant/#/zh-CN/nav-bar</a></p>
<ol>
<li><p>main.js - 注册NavBar组件</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { NavBar } <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line">Vue.use(NavBar);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>复制文档里的, 然后删删只留标题</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;van-nav-bar :title="activeTitle" fixed /&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default {</span><br><span class="line">        activeTitle: "首页"</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-7-网易云音乐-NavBar标题切换"><a href="#1-7-网易云音乐-NavBar标题切换" class="headerlink" title="1.7 网易云音乐-NavBar标题切换"></a>1.7 网易云音乐-NavBar标题切换</h3><blockquote>
<p>目标: 实现点击底部导航/刷新非第一页面页面, 导航标题正确显示</p>
</blockquote>
<ul>
<li><p>在router/index.js - 给$route里需要导航标题的添加meta元信息属性</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">        <span class="attr">path</span>: <span class="string">'/layout'</span>,</span><br><span class="line">        <span class="attr">component</span>: Layout,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">'/layout/home'</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'home'</span>,</span><br><span class="line">                <span class="attr">component</span>: Home,</span><br><span class="line">                <span class="attr">meta</span>: { <span class="comment">// meta保存路由对象额外信息的</span></span><br><span class="line">                    <span class="attr">title</span>: <span class="string">"首页"</span></span><br><span class="line">                }</span><br><span class="line">            },</span><br><span class="line">            {</span><br><span class="line">                <span class="attr">path</span>: <span class="string">'search'</span>,</span><br><span class="line">                <span class="attr">component</span>: Search,</span><br><span class="line">                <span class="attr">meta</span>: {</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">"搜索"</span></span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        ]</span><br><span class="line">    },</span><br></pre></td></tr></tbody></table></figure>

<p>Layout.vue中监听$route改变:</p>
<p>给导航active的值设置$route里的元信息的标题</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">activeTitle</span>: <span class="built_in">this</span>.$route.meta.title, <span class="comment">// "默认"顶部导航要显示的标题 (默认获取当前路由对象里的meta中title值)</span></span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// 路由切换 - 侦听$route对象改变</span></span><br><span class="line">  <span class="attr">watch</span>: {</span><br><span class="line">    $route() {</span><br><span class="line">      <span class="built_in">this</span>.activeTitle = <span class="built_in">this</span>.$route.meta.title; <span class="comment">// 提取切换后路由信息对象里的title显示</span></span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure></li>
</ul>
<blockquote>
<p>总结: 点击底部导航和刷新当前网页, 都能保证导航标题的正确显示</p>
</blockquote>
<h3 id="1-8-网易云音乐-网络请求封装"><a href="#1-8-网易云音乐-网络请求封装" class="headerlink" title="1.8 网易云音乐-网络请求封装"></a>1.8 网易云音乐-网络请求封装</h3><blockquote>
<p>目标: 不想把网络请求散落在各个逻辑页面里, 不然以后找起来改起来很麻烦</p>
</blockquote>
<ol>
<li><p>封装utils/request.js - 基于axios进行二次封装 - 设置基础地址</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 网络请求 - 二次封装</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line">axios.defaults.baseURL = <span class="string">"http://localhost:3000"</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>封装src/api/Home.js</p>
<p>统一封装网络请求方法</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件名-尽量和模块页面文件名统一(方便查找)</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 首页 - 推荐歌单</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> recommendMusic = <span class="function"><span class="params">params</span> =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/personalized'</span>,</span><br><span class="line">    params</span><br><span class="line">    <span class="comment">// 将来外面可能传入params的值 {limit: 20}</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>在src/api/index.js - 统一导出接口供外部使用</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// api文件夹下 各个请求模块js, 都统一来到index.js再向外导出</span></span><br><span class="line"><span class="keyword">import</span> {recommendMusic} <span class="keyword">from</span> <span class="string">'./Home'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> recommendMusicAPI = recommendMusic <span class="comment">// 请求推荐歌单的方法导出</span></span><br></pre></td></tr></tbody></table></figure></li>
<li><p>在main.js - 测试使用一下.</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { recommendMusicAPI } <span class="keyword">from</span> <span class="string">'@/api/index'</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">myFn</span>(<span class="params"></span>)</span>{</span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> recommendMusicAPI({<span class="attr">limit</span>: <span class="number">6</span>});</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">}</span><br><span class="line">myFn();</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<blockquote>
<p> 总结: 封装网络请求方法目的, 方便我们统一管理</p>
</blockquote>
<h3 id="1-9-网易云音乐-首页-推荐歌单"><a href="#1-9-网易云音乐-首页-推荐歌单" class="headerlink" title="1.9 网易云音乐-首页-推荐歌单"></a>1.9 网易云音乐-首页-推荐歌单</h3><p>接口地址: /personalized</p>
<ol>
<li><p>布局采用van-row和van-col </p>
<p>布局文档<a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant/#/zh-CN/col">https://vant-contrib.gitee.io/vant/#/zh-CN/col</a></p>
</li>
<li><p>使用vant内置的图片组件来显示图片</p>
</li>
<li><p>在main.js注册使用的组件</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { Col, Row, Image <span class="keyword">as</span> VanImage } <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Col);</span><br><span class="line">Vue.use(Row);</span><br><span class="line">Vue.use(VanImage);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>在api/index.js下定义推荐歌单的接口方法</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 首页 - 推荐歌单</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> recommendMusic = <span class="function"><span class="params">params</span> =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/personalized'</span>,</span><br><span class="line">    params</span><br><span class="line">    <span class="comment">// 将来外面可能传入params的值 {limit: 20}</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>把数据请求回来, 用van-image和p标签展示推荐歌单和歌单名字</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">   &lt;p class="title"&gt;推荐歌单&lt;/p&gt;</span><br><span class="line">    &lt;van-row gutter="6"&gt;</span><br><span class="line">      &lt;van-col span="8" v-for="obj in reList" :key="obj.id"&gt;</span><br><span class="line">        &lt;van-image width="100%" height="3rem" fit="cover" :src="obj.picUrl" /&gt;</span><br><span class="line">        &lt;p class="song_name"&gt;{{ obj.name }}&lt;/p&gt;</span><br><span class="line">      &lt;/van-col&gt;</span><br><span class="line">    &lt;/van-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { recommendMusicAPI } from "@/api";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">       reList: [], // 推荐歌单数据</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  async created() {</span><br><span class="line">    const res = await recommendMusicAPI({</span><br><span class="line">      limit: 6,</span><br><span class="line">    });</span><br><span class="line">    console.log(res);</span><br><span class="line">    this.reList = res.data.result;</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-10-网易云音乐-首页-最新音乐"><a href="#1-10-网易云音乐-首页-最新音乐" class="headerlink" title="1.10 网易云音乐- 首页-最新音乐"></a>1.10 网易云音乐- 首页-最新音乐</h3><blockquote>
<p>目标: van-cell单元格使用</p>
</blockquote>
<p>请求地址: /personalized/newsong</p>
<ol>
<li><p>引入van-cell使用 - 注册组件main.js中</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {Cell} <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line">Vue.use(Cell);</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>定义接口请求方法 - api/index.js</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 首页 - 推荐最新音乐</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> newMusic = <span class="function"><span class="params">params</span> =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/personalized/newsong"</span>,</span><br><span class="line">    params</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure></li>
<li><p>列表数据铺设 - 插入自定义标签</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p class="title"&gt;推荐歌单&lt;/p&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;van-row gutter="5"&gt;</span><br><span class="line">        &lt;van-col span="8" v-for="obj in recommendList" :key="obj.id"&gt;</span><br><span class="line">          &lt;van-image fit="cover" :src="obj.picUrl" /&gt;</span><br><span class="line">          &lt;p class="song_name"&gt;{{ obj.name }}&lt;/p&gt;</span><br><span class="line">        &lt;/van-col&gt;</span><br><span class="line">      &lt;/van-row&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;p class="title"&gt;最新音乐&lt;/p&gt;</span><br><span class="line">    &lt;van-cell center v-for="obj in songList" :key="obj.id" :title="obj.name" :label="obj.song.artists[0].name + ' - ' + obj.name"&gt;</span><br><span class="line">        &lt;template #right-icon&gt;</span><br><span class="line">          &lt;van-icon name="play-circle-o" size="0.6rem"/&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/van-cell&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { recommendMusicAPI, newMusicAPI } from "@/api";</span><br><span class="line">export default {</span><br><span class="line">   data() {</span><br><span class="line">    return {</span><br><span class="line">      reList: [], // 推荐歌单数据</span><br><span class="line">      songList: [], // 最新音乐数据</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  async created() {</span><br><span class="line">    const res = await recommendMusicAPI({</span><br><span class="line">      limit: 6,</span><br><span class="line">    });</span><br><span class="line">    console.log(res);</span><br><span class="line">    this.reList = res.data.result;</span><br><span class="line"></span><br><span class="line">    const res2 = await newMusicAPI({</span><br><span class="line">      limit: 20</span><br><span class="line">    })</span><br><span class="line">    console.log(res2);</span><br><span class="line">    this.songList = res2.data.result</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<h3 id="1-11-网易云音乐-搜索-热搜关键字"><a href="#1-11-网易云音乐-搜索-热搜关键字" class="headerlink" title="1.11 网易云音乐-搜索-热搜关键字"></a>1.11 网易云音乐-搜索-热搜关键字</h3><blockquote>
<p>目标: 完成热搜关键字铺设</p>
</blockquote>
<p>搜索框 – van-search组件</p>
<p>api/Search.js – 热搜关键字 - 接口方法</p>
<p>Search/index.vue引入-获取热搜关键字 - 铺设页面</p>
<p>点击文字填充到输入框</p>
<ol>
<li>准备搜索界面标签</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-search</span><br><span class="line">      shape="round"</span><br><span class="line">      placeholder="请输入搜索关键词"</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;!-- 搜索下容器 --&gt;</span><br><span class="line">    &lt;div class="search_wrap"&gt;</span><br><span class="line">      &lt;!-- 标题 --&gt;</span><br><span class="line">      &lt;p class="hot_title"&gt;热门搜索&lt;/p&gt;</span><br><span class="line">      &lt;!-- 热搜关键词容器 --&gt;</span><br><span class="line">      &lt;div class="hot_name_wrap"&gt;</span><br><span class="line">        &lt;!-- 每个搜索关键词 --&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          class="hot_item"</span><br><span class="line">          &gt;热搜关键字&lt;/span</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* 搜索容器的样式 */</span><br><span class="line">.search_wrap {</span><br><span class="line">  padding: 0.266667rem;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/*热门搜索文字标题样式 */</span><br><span class="line">.hot_title {</span><br><span class="line">  font-size: 0.32rem;</span><br><span class="line">  color: #666;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/* 热搜词_容器 */</span><br><span class="line">.hot_name_wrap {</span><br><span class="line">  margin: 0.266667rem 0;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/* 热搜词_样式 */</span><br><span class="line">.hot_item {</span><br><span class="line">  display: inline-block;</span><br><span class="line">  height: 0.853333rem;</span><br><span class="line">  margin-right: 0.213333rem;</span><br><span class="line">  margin-bottom: 0.213333rem;</span><br><span class="line">  padding: 0 0.373333rem;</span><br><span class="line">  font-size: 0.373333rem;</span><br><span class="line">  line-height: 0.853333rem;</span><br><span class="line">  color: #333;</span><br><span class="line">  border-color: #d3d4da;</span><br><span class="line">  border-radius: 0.853333rem;</span><br><span class="line">  border: 1px solid #d3d4da;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">/* 给单元格设置底部边框 */</span><br><span class="line">.van-cell {</span><br><span class="line">  border-bottom: 1px solid lightgray;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>api/Search.js - 定义热门搜索接口方法和搜索结果方法</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 热搜关键字</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hotSearch = <span class="function">() =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/search/hot'</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// 搜索结果列表</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> searchResult = <span class="function"><span class="params">params</span> =&gt;</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/cloudsearch'</span>,</span><br><span class="line">    params</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>api/index.js - 导入使用并统一导出</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 统一出口</span></span><br><span class="line"><span class="comment">// 你也可以在逻辑页面里.vue中直接引入@/api/Home下的网络请求工具方法</span></span><br><span class="line"><span class="comment">// 为什么: 我们可以把api所有的方法都统一到一处. </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> {recommendMusic, hotMusic} <span class="keyword">from</span> <span class="string">'@/api/Home'</span></span><br><span class="line"><span class="keyword">import</span> {hotSearch, searchResult} <span class="keyword">from</span> <span class="string">'@/api/Search'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> recommendMusicAPI = recommendMusic <span class="comment">// 把网络请求方法拿过来 导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hotMusicAPI = hotMusic <span class="comment">// 把获取最新音乐的, 网络请求方法导出</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> hotSearchAPI = hotSearch <span class="comment">// 热搜</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> searchResultAPI = searchResult <span class="comment">// 搜索结果</span></span><br></pre></td></tr></tbody></table></figure>

<ol start="4">
<li>created中请求接口-拿到热搜关键词列表</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;!-- 每个搜索关键词 --&gt;</span><br><span class="line">&lt;span</span><br><span class="line">      class="hot_item"</span><br><span class="line">      v-for="(obj, index) in hotArr"</span><br><span class="line">      :key="index"</span><br><span class="line">      &gt;{{ obj.first }}&lt;/span&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    // 目标: 铺设热搜关键字</span><br><span class="line">    // 1. 搜索框van-search组件, 关键词标签和样式</span><br><span class="line">    // 2. 找接口, api/Search.js里定义获取搜索关键词的请求方法</span><br><span class="line">    // 3. 引入到当前页面, 调用接口拿到数据循环铺设页面</span><br><span class="line">    // 4. 点击关键词把值赋予给van-search的v-model变量</span><br><span class="line">    import { hotSearchAPI } from "@/api";</span><br><span class="line">    export default {</span><br><span class="line">        data(){</span><br><span class="line">            return {</span><br><span class="line">                hotArr: [], // 热搜关键字</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        async created() {</span><br><span class="line">            const res = await hotSearchAPI();</span><br><span class="line">            console.log(res);</span><br><span class="line">            this.hotArr = res.data.result.hots;</span><br><span class="line">        },</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="5">
<li>点击热词填充到输入框</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;van-search</span><br><span class="line">            shape="round"</span><br><span class="line">            v-model="value"</span><br><span class="line">            placeholder="请输入搜索关键词"</span><br><span class="line">            /&gt;</span><br><span class="line">&lt;!-- 每个搜索关键词 --&gt;</span><br><span class="line">&lt;span</span><br><span class="line">      class="hot_item"</span><br><span class="line">      v-for="(obj, index) in hotArr"</span><br><span class="line">      :key="index"</span><br><span class="line">      @click="fn(obj.first)"</span><br><span class="line">      &gt;{{ obj.first }}&lt;/span</span><br><span class="line">    &gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default {</span><br><span class="line">        data(){</span><br><span class="line">            return {</span><br><span class="line">                value: "",</span><br><span class="line">                hotArr: [], // 热搜关键字</span><br><span class="line">            }</span><br><span class="line">        },</span><br><span class="line">        // ...省略了created</span><br><span class="line">        methods: {</span><br><span class="line">            async fn(val) {</span><br><span class="line">                // 点击热搜关键词</span><br><span class="line">                this.value = val; // 选中的关键词显示到搜索框</span><br><span class="line">            },</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>总结: 写好标签和样式, 拿到数据循环铺设, 点击关键词填入到van-search中</p>
</blockquote>
<h3 id="1-12-网易云音乐-搜索-点击热词-搜索结果"><a href="#1-12-网易云音乐-搜索-点击热词-搜索结果" class="headerlink" title="1.12 网易云音乐-搜索-点击热词-搜索结果"></a>1.12 网易云音乐-搜索-点击热词-搜索结果</h3><blockquote>
<p>目标: 点击热词填充到输入框-出搜索结果</p>
</blockquote>
<p>api/Search.js - 搜索结果, 接口方法</p>
<p>Search/index.vue引入-获取搜索结果 - 铺设页面</p>
<p>和热搜关键字容器 – 互斥显示</p>
<p>点击文字填充到输入框, 请求搜索结果铺设</p>
<ol>
<li>搜索结果显示区域标签+样式(直接复制/vant文档找)</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 搜索结果 --&gt;</span><br><span class="line">    &lt;div class="search_wrap"&gt;</span><br><span class="line">      &lt;!-- 标题 --&gt;</span><br><span class="line">      &lt;p class="hot_title"&gt;最佳匹配&lt;/p&gt;</span><br><span class="line">      &lt;van-cell</span><br><span class="line">        center</span><br><span class="line">        title='结果名字'</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template #right-icon&gt;</span><br><span class="line">          &lt;van-icon name="play-circle-o" size="0.6rem"/&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>点击 - 获取搜索结果 - 循环铺设页面</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;van-search shape="round" v-model="value" placeholder="请输入搜索关键词" /&gt;</span><br><span class="line">    &lt;!-- 搜索下容器 --&gt;</span><br><span class="line">    &lt;div class="search_wrap"&gt;</span><br><span class="line">      &lt;!-- 标题 --&gt;</span><br><span class="line">      &lt;p class="hot_title"&gt;热门搜索&lt;/p&gt;</span><br><span class="line">      &lt;!-- 热搜关键词容器 --&gt;</span><br><span class="line">      &lt;div class="hot_name_wrap"&gt;</span><br><span class="line">        &lt;!-- 每个搜索关键词 --&gt;</span><br><span class="line">        &lt;span</span><br><span class="line">          class="hot_item"</span><br><span class="line">          v-for="(obj, index) in hotArr"</span><br><span class="line">          :key="index"</span><br><span class="line">          @click="fn(obj.first)"</span><br><span class="line">          &gt;{{ obj.first }}&lt;/span</span><br><span class="line">        &gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 搜索结果 --&gt;</span><br><span class="line">    &lt;div class="search_wrap"&gt;</span><br><span class="line">      &lt;!-- 标题 --&gt;</span><br><span class="line">      &lt;p class="hot_title"&gt;最佳匹配&lt;/p&gt;</span><br><span class="line">      &lt;van-cell</span><br><span class="line">        center</span><br><span class="line">        v-for="obj in resultList"</span><br><span class="line">        :key="obj.id"</span><br><span class="line">        :title="obj.name"</span><br><span class="line">        :label="obj.ar[0].name + ' - ' + obj.name"</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;template #right-icon&gt;</span><br><span class="line">          &lt;van-icon name="play-circle-o" size="0.6rem"/&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/van-cell&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标: 铺设热搜关键字</span><br><span class="line">// 1. 搜索框van-search组件, 关键词标签和样式</span><br><span class="line">// 2. 找接口, api/Search.js里定义获取搜索关键词的请求方法</span><br><span class="line">// 3. 引入到当前页面, 调用接口拿到数据循环铺设页面</span><br><span class="line">// 4. 点击关键词把值赋予给van-search的v-model变量</span><br><span class="line"></span><br><span class="line">// 目标: 铺设搜索结果</span><br><span class="line">// 1. 找到搜索结果的接口 - api/Search.js定义请求方法</span><br><span class="line">// 2. 再定义methods里getListFn方法(获取数据)</span><br><span class="line">// 3. 在点击事件方法里调用getListFn方法拿到搜索结果数据</span><br><span class="line">// 4. 铺设页面(首页van-cell标签复制过来)</span><br><span class="line">// 5. 把数据保存到data后, 循环van-cell使用即可(切换歌手字段)</span><br><span class="line">// 6. 互斥显示搜索结果和热搜关键词</span><br><span class="line">import { hotSearchAPI, searchResultListAPI } from "@/api";</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      value: "",</span><br><span class="line">      hotArr: [], // 热搜关键字</span><br><span class="line">      resultList: [], // 搜索结果</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  async created() {</span><br><span class="line">    const res = await hotSearchAPI();</span><br><span class="line">    console.log(res);</span><br><span class="line">    this.hotArr = res.data.result.hots;</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    async getListFn() {</span><br><span class="line">      return await searchResultListAPI({</span><br><span class="line">        keywords: this.value,</span><br><span class="line">        limit: 20,</span><br><span class="line">      }); // 把搜索结果return出去</span><br><span class="line">      // (难点):</span><br><span class="line">      // async修饰的函数 -&gt; 默认返回一个全新Promise对象</span><br><span class="line">      // 这个Promise对象的结果就是async函数内return的值</span><br><span class="line">      // 拿到getListFn的返回值用await提取结果</span><br><span class="line">    },</span><br><span class="line">    async fn(val) {</span><br><span class="line">      // 点击热搜关键词</span><br><span class="line">      this.value = val; // 选中的关键词显示到搜索框</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.resultList = res.data.result.songs;</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="3">
<li>互斥显示, 热搜关键词和搜索结果列表</li>
</ol>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210512142504929.png" alt="image-20210512142504929"></p>
<blockquote>
<p>总结: 点击热词后, 调用接口传入关键词, 返回数据铺设</p>
</blockquote>
<h3 id="1-13-网易云音乐-输入框-搜索结果"><a href="#1-13-网易云音乐-输入框-搜索结果" class="headerlink" title="1.13 网易云音乐-输入框-搜索结果"></a>1.13 网易云音乐-输入框-搜索结果</h3><blockquote>
<p>目标: 监测输入框改变-拿到搜索结果</p>
</blockquote>
<p>观察van-search组件是否支持和实现input事件</p>
<p>绑定@input事件和方法</p>
<p>在事件处理方法中获取对应的值使用</p>
<p>如果搜索不存在的数据-要注意接口返回字段不同</p>
<ol>
<li>绑定@input事件在van-search上</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;van-search shape="round" v-model="value" placeholder="请输入搜索关键词" @input="inputFn"/&gt;</span><br></pre></td></tr></tbody></table></figure>

<ol start="2">
<li>实现输入框改变 - 获取搜索结果铺设</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">inputFn</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">// 输入框值改变</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.value.length === <span class="number">0</span>) {</span><br><span class="line">        <span class="comment">// 搜索关键词如果没有, 就把搜索结果清空阻止网络请求发送(提前return)</span></span><br><span class="line">        <span class="built_in">this</span>.resultList = [];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="built_in">this</span>.getListFn();</span><br><span class="line">    <span class="built_in">console</span>.log(res);</span><br><span class="line">    <span class="comment">// 如果搜索结果响应数据没有songs字段-无数据</span></span><br><span class="line">    <span class="keyword">if</span> (res.data.result.songs === <span class="literal">undefined</span>) {</span><br><span class="line">        <span class="built_in">this</span>.resultList = [];</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">this</span>.resultList = res.data.result.songs;</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>总结: 监测输入框改变-保存新的关键词去请求结果回来铺设</p>
</blockquote>
<h3 id="1-14-网易云音乐-搜索结果-加载更多"><a href="#1-14-网易云音乐-搜索结果-加载更多" class="headerlink" title="1.14 网易云音乐-搜索结果-加载更多"></a>1.14 网易云音乐-搜索结果-加载更多</h3><blockquote>
<p>目标: 触底后, 加载下一页数据</p>
</blockquote>
<p>观察接口文档: 发现需要传入offset和分页公式</p>
<p>van-list组件监测触底执行onload事件</p>
<p>配合后台接口, 传递下一页的标识</p>
<p>拿到下一页数据后追加到当前数组末尾即可</p>
<ol>
<li>设置van-list组件实现相应的属性和方法, 让page++去请求下页数据</li>
</ol>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      &lt;van-list</span><br><span class="line">        v-model="loading"</span><br><span class="line">        :finished="finished"</span><br><span class="line">        finished-text="没有更多了"</span><br><span class="line">        @load="onLoad"</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;van-cell</span><br><span class="line">          center</span><br><span class="line">          v-for="obj in resultList"</span><br><span class="line">          :key="obj.id"</span><br><span class="line">          :title="obj.name"</span><br><span class="line">          :label="obj.ar[0].name + ' - ' + obj.name"</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;template #right-icon&gt;</span><br><span class="line">            &lt;van-icon name="play-circle-o" size="0.6rem" /&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/van-cell&gt;</span><br><span class="line">      &lt;/van-list&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 目标: 加载更多</span><br><span class="line">// 1. 集成list组件-定义相关的变量(搞懂变量的作用) -监测触底事件</span><br><span class="line">// 2. 一旦触底, 自动执行onload方法</span><br><span class="line">// 3. 对page++, 给后台传递offset偏移量参数-请求下一页的数据</span><br><span class="line">// 4. 把当前数据和下一页新来的数据拼接起来用在当前 页面的数组里</span><br><span class="line">// (切记) - 加载更多数据后,一定要把loading改成false, 保证下一次还能触发onload方法</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      value: "",</span><br><span class="line">      hotArr: [], // 热搜关键字</span><br><span class="line">      resultList: [], // 搜索结果</span><br><span class="line">      loading: false, // 加载中 (状态) - 只有为false, 才能触底后自动触发onload方法</span><br><span class="line">      finished: false, // 未加载全部 (如果设置为true, 底部就不会再次执行onload, 代表全部加载完成)</span><br><span class="line">      page: 1, // 当前搜索结果的页码</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line">  // ...省略其他</span><br><span class="line">  methods: {</span><br><span class="line">    async getListFn() {</span><br><span class="line">      return await searchResultListAPI({</span><br><span class="line">        keywords: this.value,</span><br><span class="line">        limit: 20,</span><br><span class="line">        offset: (this.page - 1) * 20, // 固定公式</span><br><span class="line">      }); // 把搜索结果return出去</span><br><span class="line">      // (难点):</span><br><span class="line">      // async修饰的函数 -&gt; 默认返回一个全新Promise对象</span><br><span class="line">      // 这个Promise对象的结果就是async函数内return的值</span><br><span class="line">      // 拿到getListFn的返回值用await提取结果</span><br><span class="line">    },</span><br><span class="line">    async onLoad() {</span><br><span class="line">      // 触底事件(要加载下一页的数据咯), 内部会自动把loading改为true</span><br><span class="line">      this.page++;</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      this.resultList = [...this.resultList, ...res.data.result.songs];</span><br><span class="line">      this.loading = false; // 数据加载完毕-保证下一次还能触发onload</span><br><span class="line">    },</span><br><span class="line">  },</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>总结: list组件负责UI层监测触底, 执行onload函数, page++, 请求下页数据, 和现在数据合并显示更多, 设置loading为false, 确保下次触底还能执行onLoad</p>
</blockquote>
<h3 id="1-15-网易云音乐-加载更多-bug修复"><a href="#1-15-网易云音乐-加载更多-bug修复" class="headerlink" title="1.15 网易云音乐-加载更多-bug修复"></a>1.15 网易云音乐-加载更多-bug修复</h3><blockquote>
<p>目标: 如果只有一页数据/无数据判断</p>
</blockquote>
<p>无数据/只有一页数据, finished为true</p>
<p>防止list组件触底再加载更多</p>
<p>还要测试-按钮点击/输入框有数据情况的加载更多</p>
<p>正确代码</p>
<figure class="highlight diff"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"> async fn(val) {</span><br><span class="line">      // 点击热搜关键词</span><br><span class="line"><span class="addition">+        this.finished = false; // 点击新关键词-可能有新的数据</span></span><br><span class="line">      this.value = val; // 选中的关键词显示到搜索框</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.resultList = res.data.result.songs;</span><br><span class="line"><span class="addition">+        this.loading = false; // 本次数据加载完毕-才能让list加载更多</span></span><br><span class="line">    },</span><br><span class="line">    async inputFn() {</span><br><span class="line"><span class="addition">+       this.finished = false // 输入框关键字改变-可能有新数据(不一定加载完成了)</span></span><br><span class="line">      // 输入框值改变</span><br><span class="line">      if (this.value.length <span class="comment">=== 0) {</span></span><br><span class="line">        // 搜索关键词如果没有, 就把搜索结果清空阻止网络请求发送(提前return)</span><br><span class="line">        this.resultList = [];</span><br><span class="line">        return;</span><br><span class="line">      }</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      console.log(res);</span><br><span class="line">      </span><br><span class="line"><span class="addition">+      // 如果搜索结果响应数据没有songs字段-无数据</span></span><br><span class="line"><span class="addition">+      if (res.data.result.songs === undefined) {</span></span><br><span class="line"><span class="addition">+        this.resultList = [];</span></span><br><span class="line"><span class="addition">+        return;</span></span><br><span class="line"><span class="addition">+      }</span></span><br><span class="line">      this.resultList = res.data.result.songs;</span><br><span class="line"><span class="addition">+        this.loading = false;</span></span><br><span class="line">    },</span><br><span class="line">    async onLoad() {</span><br><span class="line">      // 触底事件(要加载下一页的数据咯), 内部会自动把loading改为true</span><br><span class="line">      this.page++;</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line"><span class="addition">+        if (res.data.result.songs === undefined) { // 没有更多数据了</span></span><br><span class="line"><span class="addition">+          this.finished = true; // 全部加载完成(list不会在触发onload方法)</span></span><br><span class="line"><span class="addition">+          this.loading = false; // 本次加载完成</span></span><br><span class="line"><span class="addition">+          return;</span></span><br><span class="line"><span class="addition">+        }</span></span><br><span class="line">      this.resultList = [...this.resultList, ...res.data.result.songs];</span><br><span class="line"><span class="addition">+      this.loading = false; // 数据加载完毕-保证下一次还能触发onload</span></span><br><span class="line">    },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>总结: 在3个函数 上和下, 设置finished还未完成, 最后要把loading改成false, 判断songs字段, 对这里的值要非常熟悉才可以</p>
</blockquote>
<h3 id="1-16-网易云音乐-输入框-防抖"><a href="#1-16-网易云音乐-输入框-防抖" class="headerlink" title="1.16 网易云音乐-输入框-防抖"></a>1.16 网易云音乐-输入框-防抖</h3><blockquote>
<p>目标: 输入框触发频率过高</p>
</blockquote>
<p>输入框输入”asdfghjkl”</p>
<p>​    接着快速的删除</p>
<p>​    每次改变-马上发送网络请求</p>
<p>​    网络请求异步耗时 – 数据回来后还是铺设到页面上</p>
<p>解决:</p>
<p>​    引入防抖功能</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">inputFn</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">// 目标: 输入框改变-逻辑代码-慢点执行</span></span><br><span class="line">    <span class="comment">// 解决: 防抖</span></span><br><span class="line">    <span class="comment">// 概念: 计时n秒, 最后执行一次, 如果再次触发, 重新计时</span></span><br><span class="line">    <span class="comment">// 效果: 用户在n秒内不触发这个事件了, 才会开始执行逻辑代码</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.timer) <span class="built_in">clearTimeout</span>(<span class="built_in">this</span>.timer);</span><br><span class="line">    <span class="built_in">this</span>.timer = <span class="built_in">setTimeout</span>(<span class="keyword">async</span> () =&gt; {</span><br><span class="line">        <span class="built_in">this</span>.finished = <span class="literal">false</span>; <span class="comment">// 输入框关键字改变-可能有新数据(不一定加载完成了)</span></span><br><span class="line">        <span class="comment">// 输入框值改变</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.value.length === <span class="number">0</span>) {</span><br><span class="line">            <span class="comment">// 搜索关键词如果没有, 就把搜索结果清空阻止网络请求发送(提前return)</span></span><br><span class="line">            <span class="built_in">this</span>.resultList = [];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="built_in">this</span>.getListFn();</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">        <span class="comment">// 如果搜索结果响应数据没有songs字段-无数据</span></span><br><span class="line">        <span class="keyword">if</span> (res.data.result.songs === <span class="literal">undefined</span>) {</span><br><span class="line">            <span class="built_in">this</span>.resultList = [];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">this</span>.resultList = res.data.result.songs;</span><br><span class="line">        <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span><br><span class="line">    }, <span class="number">900</span>);</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>总结: 降低函数执行频率</p>
</blockquote>
<h3 id="1-17-网易云音乐-页码bug修复"><a href="#1-17-网易云音乐-页码bug修复" class="headerlink" title="1.17 网易云音乐-页码bug修复"></a>1.17 网易云音乐-页码bug修复</h3><blockquote>
<p>目标: 第一个关键词page已经+到了10, 再第二个关键词应该从1开始</p>
</blockquote>
<p>加载更多时, page已经往后计数了</p>
<p>重新获取时, page不是从第一页获取的</p>
<p>点击搜索/输入框搜索时, 把page改回1</p>
<p>代码如下:</p>
<figure class="highlight diff"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"> async fn(val) {</span><br><span class="line">      // 点击热搜关键词</span><br><span class="line"><span class="addition">+      this.page = 1; // 点击重新获取第一页数据</span></span><br><span class="line">      this.finished = false; // 点击新关键词-可能有新的数据</span><br><span class="line">      this.value = val; // 选中的关键词显示到搜索框</span><br><span class="line">      const res = await this.getListFn();</span><br><span class="line">      console.log(res);</span><br><span class="line">      this.resultList = res.data.result.songs;</span><br><span class="line">      this.loading = false; // 本次数据加载完毕-才能让list加载更多</span><br><span class="line"> },</span><br><span class="line"> async inputFn() {</span><br><span class="line">      // 目标: 输入框改变-逻辑代码-慢点执行</span><br><span class="line">      // 解决: 防抖</span><br><span class="line">      // 概念: 计时n秒, 最后执行一次, 如果再次触发, 重新计时</span><br><span class="line">      // 效果: 用户在n秒内不触发这个事件了, 才会开始执行逻辑代码</span><br><span class="line">      if (this.timer) clearTimeout(this.timer);</span><br><span class="line">      this.timer = setTimeout(async () =&gt; {</span><br><span class="line"><span class="addition">+        this.page = 1; // 点击重新获取第一页数据</span></span><br><span class="line">        this.finished = false; // 输入框关键字改变-可能有新数据(不一定加载完成了)</span><br><span class="line">        // 输入框值改变</span><br><span class="line">        if (this.value.length <span class="comment">=== 0) {</span></span><br><span class="line">          // 搜索关键词如果没有, 就把搜索结果清空阻止网络请求发送(提前return)</span><br><span class="line">          this.resultList = [];</span><br><span class="line">          return;</span><br><span class="line">        }</span><br><span class="line">        const res = await this.getListFn();</span><br><span class="line">        console.log(res);</span><br><span class="line">        // 如果搜索结果响应数据没有songs字段-无数据</span><br><span class="line">        if (res.data.result.songs <span class="comment">=== undefined) {</span></span><br><span class="line">          this.resultList = [];</span><br><span class="line">          return;</span><br><span class="line">        }</span><br><span class="line">        this.resultList = res.data.result.songs;</span><br><span class="line">        this.loading = false;</span><br><span class="line">      }, 900);</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>总结: 切换时, 让page页面回到1</p>
</blockquote>
<h3 id="1-18-网易云音乐-Layout边距优化"><a href="#1-18-网易云音乐-Layout边距优化" class="headerlink" title="1.18 网易云音乐-Layout边距优化"></a>1.18 网易云音乐-Layout边距优化</h3><blockquote>
<p>目标: 上下导航会盖住中间内容</p>
</blockquote>
<p>我们的头部导航和底部导航挡住了中间内容</p>
<p>给中间路由页面设置上下内边距即可</p>
<p>在Layout/index.vue中</p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 中间内容区域 - 容器样式(留好上下导航所占位置) */</span></span><br><span class="line"><span class="selector-class">.main</span> {</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">46px</span>;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="1-19-网易云音乐-SongItem封装"><a href="#1-19-网易云音乐-SongItem封装" class="headerlink" title="1.19 网易云音乐-SongItem封装"></a>1.19 网易云音乐-SongItem封装</h3><blockquote>
<p>目标: 把首页和搜索结果的歌曲cell封装起来</p>
</blockquote>
<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210512144538038.png" alt="image-20210512144538038"></p>
<p>创建src/components/SongItem.vue</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;van-cell center :title="name" :label="author + ' - ' + name"&gt;</span><br><span class="line">    &lt;template #right-icon&gt;</span><br><span class="line">      &lt;van-icon name="play-circle-o" size="0.6rem"/&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/van-cell&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    name: String, // 歌名</span><br><span class="line">    author: String, // 歌手</span><br><span class="line">    id: Number, // 歌曲id (标记这首歌曲-为将来跳转播放页做准备)</span><br><span class="line">  }</span><br><span class="line">};</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">/* 给单元格设置底部边框 */</span><br><span class="line">.van-cell {</span><br><span class="line">  border-bottom: 1px solid lightgray;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>Home/index.vue - 重构</p>
<p>==注意: author字段不同==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;SongItem v-for="obj in songList"</span><br><span class="line">    :key="obj.id"</span><br><span class="line">    :name="obj.name"</span><br><span class="line">    :author="obj.song.artists[0].name"</span><br><span class="line">    :id="obj.id"</span><br><span class="line">&gt;&lt;/SongItem&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>Search/index.vue - 重构</p>
<p>==注意: author字段不同==</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;SongItem</span><br><span class="line">          v-for="obj in resultList"</span><br><span class="line">          :key="obj.id"</span><br><span class="line">          :name="obj.name"</span><br><span class="line">          :author="obj.ar[0].name"</span><br><span class="line">          :id="obj.id"</span><br><span class="line">&gt;&lt;/SongItem&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>总结: 遇到重复标签要封装</p>
</blockquote>
<h3 id="1-20-网易云音乐-播放音乐"><a href="#1-20-网易云音乐-播放音乐" class="headerlink" title="1.20 网易云音乐-播放音乐"></a>1.20 网易云音乐-播放音乐</h3><blockquote>
<p>目标: 从预习资料拿到播放的api和页面, 配置好路由规则</p>
</blockquote>
<p>==时间关系,这个页面不用写, 直接用, 注释在备课代码里写好了==</p>
<p>组件SongItem里 – 点击事件</p>
<p>api/Play.js – 提前准备好 – 接口方法</p>
<p>跳转到Play页面 – 把歌曲id带过进去</p>
<p>在SongItem.vue - 点击播放字体图标</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">methods: {</span><br><span class="line">    <span class="function"><span class="title">playFn</span>(<span class="params"></span>)</span>{</span><br><span class="line">        <span class="built_in">this</span>.$router.push({</span><br><span class="line">            <span class="attr">path</span>: <span class="string">'/play'</span>,</span><br><span class="line">            <span class="attr">query</span>: {</span><br><span class="line">                <span class="attr">id</span>: <span class="built_in">this</span>.id <span class="comment">// 歌曲id, 通过路由跳转传递过去</span></span><br><span class="line">            }</span><br><span class="line">        })</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/image-20210512144906051.png" alt="image-20210512144906051"></p>
<blockquote>
<p>总结: 准备好播放页, 点击播放传歌曲id过去, 到播放页-再请求响应数据和歌曲地址用audio标签播放</p>
</blockquote>
<h3 id="1-21-网易云音乐-vant适配"><a href="#1-21-网易云音乐-vant适配" class="headerlink" title="1.21 网易云音乐-vant适配"></a>1.21 网易云音乐-vant适配</h3><blockquote>
<p>目标: 切换不同机型, ==刷新后==看看标签大小适配吗</p>
</blockquote>
<ul>
<li>postcss – 配合webpack翻译css代码</li>
<li>postcss-pxtorem – 配合webpack, 自动把px转成rem</li>
<li>新建postcss.config.js – 设置相关配置</li>
<li>重启服务器, 再次观察Vant组件是否适配</li>
</ul>
<ol>
<li><p>下载postcss和==<a href="mailto:postcss-pxtorem@5.1.1">postcss-pxtorem@5.1.1</a>==</p>
<p>postcss作用: 是对css代码做降级处理</p>
<p>postcss-pxtorem: 自动把所有代码里的css样式的px, 自动转rem</p>
</li>
<li><p>src/新建postcss.config.js</p>
</li>
</ol>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'postcss-pxtorem'</span>: {</span><br><span class="line">      <span class="comment">// 能够把所有元素的px单位转成Rem</span></span><br><span class="line">      <span class="comment">// rootValue: 转换px的基准值。</span></span><br><span class="line">      <span class="comment">// 例如一个元素宽是75px，则换成rem之后就是2rem。</span></span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">37.5</span>,</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">'*'</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>==以iphone6为基准, 37.5px为基准值换算rem==</p>
<h2 id="今日总结"><a href="#今日总结" class="headerlink" title="今日总结"></a>今日总结</h2><ul>
<li><input disabled="" type="checkbox"> 掌握vant组件库的使用 - 找组件, 引组件, 用组件</li>
<li><input disabled="" type="checkbox"> 能够对vant组件自带样式进行覆盖自定义</li>
<li><input disabled="" type="checkbox"> 遇到重复的标签, 自己也封装了一个复用的组件</li>
<li><input disabled="" type="checkbox"> 掌握查询文档和使用每个属性的方式</li>
</ul>
<h2 id="今日作业"><a href="#今日作业" class="headerlink" title="今日作业"></a>今日作业</h2><p>把课上的案例-从0再来一遍, 为下阶段移动端项目铺垫</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Abigail Cui</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://abigailcui.github.io/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/">http://abigailcui.github.io/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://AbigailCui.github.io" target="_blank">Abigail Cui的小站</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/1_%E9%A6%96%E9%A1%B5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/"><img class="prev-cover" src="/2021/06/20/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/%E9%A6%96%E9%A1%B5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">vue应用2-vue移动端-仿头条demo</div></div></a></div><div class="next-post pull-right"><a href="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/"><img class="next-cover" src="/2021/05/14/vue%E5%9F%BA%E7%A1%806-%E8%B7%AF%E7%94%B1_vant%E7%BB%84%E4%BB%B6%E5%BA%93%E4%BD%BF%E7%94%A8/ArcGIS.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">vue基础6-路由_vant组件库使用</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E6%8E%A5%E5%8F%A3%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2"><span class="toc-text">本地接口项目部署</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="toc-text">今日学习目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%A1%88%E4%BE%8B-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90"><span class="toc-text">1. 案例-网易云音乐</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-0-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E6%9C%AC%E5%9C%B0%E6%8E%A5%E5%8F%A3"><span class="toc-text">1.0 网易云音乐-本地接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E6%9C%AC%E5%9C%B0%E6%8E%A5%E5%8F%A3%E5%90%AF%E5%8A%A8"><span class="toc-text">1.1 网易云音乐-本地接口启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-text">1.2 网易云音乐-前端项目初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-text">1.3 网易云音乐-需求分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E8%B7%AF%E7%94%B1%E5%87%86%E5%A4%87"><span class="toc-text">1.4 网易云音乐-路由准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-Tabbar%E7%BB%84%E4%BB%B6"><span class="toc-text">1.5 网易云音乐-Tabbar组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-NavBar%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6"><span class="toc-text">1.6 网易云音乐-NavBar导航组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-NavBar%E6%A0%87%E9%A2%98%E5%88%87%E6%8D%A2"><span class="toc-text">1.7 网易云音乐-NavBar标题切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-8-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85"><span class="toc-text">1.8 网易云音乐-网络请求封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E9%A6%96%E9%A1%B5-%E6%8E%A8%E8%8D%90%E6%AD%8C%E5%8D%95"><span class="toc-text">1.9 网易云音乐-首页-推荐歌单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-10-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E9%A6%96%E9%A1%B5-%E6%9C%80%E6%96%B0%E9%9F%B3%E4%B9%90"><span class="toc-text">1.10 网易云音乐- 首页-最新音乐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-11-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E6%90%9C%E7%B4%A2-%E7%83%AD%E6%90%9C%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">1.11 网易云音乐-搜索-热搜关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-12-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E6%90%9C%E7%B4%A2-%E7%82%B9%E5%87%BB%E7%83%AD%E8%AF%8D-%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C"><span class="toc-text">1.12 网易云音乐-搜索-点击热词-搜索结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-13-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E8%BE%93%E5%85%A5%E6%A1%86-%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C"><span class="toc-text">1.13 网易云音乐-输入框-搜索结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-14-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A"><span class="toc-text">1.14 网易云音乐-搜索结果-加载更多</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-15-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A-bug%E4%BF%AE%E5%A4%8D"><span class="toc-text">1.15 网易云音乐-加载更多-bug修复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-16-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E8%BE%93%E5%85%A5%E6%A1%86-%E9%98%B2%E6%8A%96"><span class="toc-text">1.16 网易云音乐-输入框-防抖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-17-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E9%A1%B5%E7%A0%81bug%E4%BF%AE%E5%A4%8D"><span class="toc-text">1.17 网易云音乐-页码bug修复</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-18-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-Layout%E8%BE%B9%E8%B7%9D%E4%BC%98%E5%8C%96"><span class="toc-text">1.18 网易云音乐-Layout边距优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-19-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-SongItem%E5%B0%81%E8%A3%85"><span class="toc-text">1.19 网易云音乐-SongItem封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-20-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-%E6%92%AD%E6%94%BE%E9%9F%B3%E4%B9%90"><span class="toc-text">1.20 网易云音乐-播放音乐</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-21-%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90-vant%E9%80%82%E9%85%8D"><span class="toc-text">1.21 网易云音乐-vant适配</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E6%80%BB%E7%BB%93"><span class="toc-text">今日总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%8A%E6%97%A5%E4%BD%9C%E4%B8%9A"><span class="toc-text">今日作业</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('/2021/05/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/1_%E9%A6%96%E9%A1%B5.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Abigail Cui</div><div class="footer_custom_text">plain living and high thinking</div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><div class="aplayer no-destroy" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="true" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/SerokSSR/cdn/meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>那年今日</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('已挂载history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body></html>
<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>vueåº”ç”¨3â€”HR-saasä¸­å°ç³»ç»Ÿ | Abigail Cuiçš„å°ç«™</title><meta name="author" content="è·¯å°é›¨"><meta name="copyright" content="è·¯å°é›¨"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1.é¡¹ç›®è®¾è®¡ 1.äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»ºvue-element-adminçš„äº†è§£å’Œä»‹ç»ç›®æ ‡: å­¦ä¹ å’Œäº†è§£é€šç”¨çš„vueåå°é›†æˆæ–¹æ¡ˆ**vue-element-admin** vue-element-admin æ˜¯ä¸€ä¸ªåå°å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒåŸºäº vue å’Œ element-uiå®ç°ã€‚å®ƒä½¿ç”¨äº†æœ€æ–°çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œå†…ç½®äº† i18 å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼ŒåŠ¨æ€è·¯ç”±ï¼Œæƒé™éªŒè¯ï¼Œæç‚¼äº†å…¸å‹çš„ä¸šåŠ¡æ¨¡å‹ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ç»„ä»¶ï¼Œå®ƒå¯">
<meta property="og:type" content="article">
<meta property="og:title" content="vueåº”ç”¨3â€”HR-saasä¸­å°ç³»ç»Ÿ">
<meta property="og:url" content="https://www.abigailcui.com/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="Abigail Cuiçš„å°ç«™">
<meta property="og:description" content="1.é¡¹ç›®è®¾è®¡ 1.äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»ºvue-element-adminçš„äº†è§£å’Œä»‹ç»ç›®æ ‡: å­¦ä¹ å’Œäº†è§£é€šç”¨çš„vueåå°é›†æˆæ–¹æ¡ˆ**vue-element-admin** vue-element-admin æ˜¯ä¸€ä¸ªåå°å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒåŸºäº vue å’Œ element-uiå®ç°ã€‚å®ƒä½¿ç”¨äº†æœ€æ–°çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œå†…ç½®äº† i18 å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼ŒåŠ¨æ€è·¯ç”±ï¼Œæƒé™éªŒè¯ï¼Œæç‚¼äº†å…¸å‹çš„ä¸šåŠ¡æ¨¡å‹ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ç»„ä»¶ï¼Œå®ƒå¯">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg">
<meta property="article:published_time" content="2021-02-22T07:04:15.000Z">
<meta property="article:modified_time" content="2021-09-24T11:25:39.915Z">
<meta property="article:author" content="è·¯å°é›¨">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.abigailcui.com/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'vueåº”ç”¨3â€”HR-saasä¸­å°ç³»ç»Ÿ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-09-24 19:25:39'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><link rel="stylesheet" href="/css/custom.css"><style type="text/css">#universe{display: block;position: fixed;margin: 0;padding: 0;border: 0;outline: 0;left: 0;top: 0;width: 100%;height: 100%;pointer-events: none;z-index: -1;}</style><style type="text/css">#toggle-sidebar {bottom: 80px}</style><style type="text/css">#toggle-sidebar {left:100px}</style><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><!-- hexo injector head_end end --><style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loaderé¡µé¢æ¶ˆå¤±é‡‡ç”¨æ¸éšçš„æ–¹å¼*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }
    
    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }
    
   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}
    
    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}
    
   
    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logoå‡ºç°åŠ¨ç”» */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//ä½¿ç”¨æ¸éšçš„æ–¹æ³•æ·¡å‡ºloading page
            // document.getElementById("body-wrap").style.display="flex";
            document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//å¼ºåˆ¶æ˜¾ç¤ºloading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
 <div id="loading-container">
     <p class="loading-text"> å…¨å‘˜åŠ é€Ÿä¸­ . . . </p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">25</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/todo-List/index.html#/myday"><i class="fa-fw fas fa-clock"></i><span> ToDo-List</span></a></li><li><a class="site-page child" href="/te/"><i class="fa-fw fas fa-envelope"></i><span> ç–«æƒ…åœ°å›¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-gamepad"></i><span> å°æ¸¸æˆ</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/catch-cat-master/index.html"><i class="fa-fw fas fa-certificate"></i><span> å µä½é»‘çŒ«!</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://daxigua.guole.fun/"><i class="fa-fw fas fa-asterisk"></i><span> åˆæˆå¤§ğŸ‰</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog-game.vercel.app/znm/"><i class="fa-fw fas fa-podcast"></i><span> è§£å‹å…­è¾¹å½¢</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Abigail Cuiçš„å°ç«™</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/todo-List/index.html#/myday"><i class="fa-fw fas fa-clock"></i><span> ToDo-List</span></a></li><li><a class="site-page child" href="/te/"><i class="fa-fw fas fa-envelope"></i><span> ç–«æƒ…åœ°å›¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-gamepad"></i><span> å°æ¸¸æˆ</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/catch-cat-master/index.html"><i class="fa-fw fas fa-certificate"></i><span> å µä½é»‘çŒ«!</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://daxigua.guole.fun/"><i class="fa-fw fas fa-asterisk"></i><span> åˆæˆå¤§ğŸ‰</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog-game.vercel.app/znm/"><i class="fa-fw fas fa-podcast"></i><span> è§£å‹å…­è¾¹å½¢</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">vueåº”ç”¨3â€”HR-saasä¸­å°ç³»ç»Ÿ</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2021-02-22T07:04:15.000Z" title="å‘è¡¨äº 2021-02-22 15:04:15">2021-02-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-09-24T11:25:39.915Z" title="æ›´æ–°äº 2021-09-24 19:25:39">2021-09-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">56.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>234åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="vueåº”ç”¨3â€”HR-saasä¸­å°ç³»ç»Ÿ"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-é¡¹ç›®è®¾è®¡"><a href="#1-é¡¹ç›®è®¾è®¡" class="headerlink" title="1.é¡¹ç›®è®¾è®¡"></a>1.é¡¹ç›®è®¾è®¡</h1><p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200810012833240.png" alt="image-20200810012833240"></p>
<h1 id="1-äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º"><a href="#1-äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º" class="headerlink" title="1.äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º"></a>1.äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º</h1><h2 id="vue-element-adminçš„äº†è§£å’Œä»‹ç»"><a href="#vue-element-adminçš„äº†è§£å’Œä»‹ç»" class="headerlink" title="vue-element-adminçš„äº†è§£å’Œä»‹ç»"></a>vue-element-adminçš„äº†è§£å’Œä»‹ç»</h2><p><strong><code>ç›®æ ‡</code></strong>: å­¦ä¹ å’Œäº†è§£é€šç”¨çš„vueåå°é›†æˆæ–¹æ¡ˆ**<code>vue-element-admin</code>**</p>
<p><a target="_blank" rel="noopener" href="https://panjiachen.gitee.io/vue-element-admin-site/zh/">vue-element-admin</a> æ˜¯ä¸€ä¸ªåå°å‰ç«¯è§£å†³æ–¹æ¡ˆï¼Œå®ƒåŸºäº <a target="_blank" rel="noopener" href="https://github.com/vuejs/vue">vue</a> å’Œ <a target="_blank" rel="noopener" href="https://github.com/ElemeFE/element">element-ui</a>å®ç°ã€‚å®ƒä½¿ç”¨äº†æœ€æ–°çš„å‰ç«¯æŠ€æœ¯æ ˆï¼Œå†…ç½®äº† i18 å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼ŒåŠ¨æ€è·¯ç”±ï¼Œæƒé™éªŒè¯ï¼Œæç‚¼äº†å…¸å‹çš„ä¸šåŠ¡æ¨¡å‹ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ç»„ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ å¿«é€Ÿæ­å»ºä¼ä¸šçº§ä¸­åå°äº§å“åŸå‹ã€‚</p>
<p><a target="_blank" rel="noopener" href="http://panjiachen.github.io/vue-element-admin">vue-element-admin</a> æ˜¯ä¸€ä¸ªåå°é›†æˆæ–¹æ¡ˆ, é›†æˆäº†PCé¡¹ç›®ä¸­å¾ˆå¤šçš„ä¸šåŠ¡åœºæ™¯å’ŒåŠŸèƒ½, å°¤å…¶åœ¨å½“ä¸‹SPAçš„è¶‹åŠ¿ä¸‹,æˆ‘ä»¬å¯ä»¥ä»ä¸­è·å¾—å¾ˆå¤šæˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://panjiachen.github.io/vue-element-admin">vue-element-admin</a> æœ‰ä¸€ä¸ªæˆç†Ÿçš„<a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/vue-element-admin">é›†æˆæ–¹æ¡ˆ</a>ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„ä¸šåŠ¡åŠŸèƒ½å’Œåœºæ™¯,å¹¶ä¸é€‚åˆç›´æ¥æ‹¿æ¥è¿›è¡ŒäºŒæ¬¡å¼€å‘, ä½†æ˜¯å¯ä»¥é€šè¿‡è¯¥é¡¹ç›®ä¸­çš„ä¸€ä¸ªæ¡ˆä¾‹æ¥è¿›è¡Œå­¦ä¹ å’Œä½¿ç”¨.</p>
</blockquote>
<p>è¿™é‡Œæ˜¯<a target="_blank" rel="noopener" href="https://panjiachen.gitee.io/vue-element-admin-site/zh/">å®˜ç½‘åœ°å€</a></p>
<p>è¿™é‡Œæ˜¯<a target="_blank" rel="noopener" href="https://panjiachen.github.io/vue-element-admin/#/dashboard">çº¿ä¸Šdemoåœ°å€</a></p>
<blockquote>
<p>å¦‚æœä½ æƒ³æŸ¥çœ‹è¯¥é¡¹ç›®çš„å…·ä½“åŠŸèƒ½å’Œæ•ˆæœï¼Œå¯ä»¥æ‹‰å–ä»£ç ï¼Œå¯åŠ¨è¿›è¡Œé¢„è§ˆï¿¥ </p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/PanJiaChen/vue-element-admin.git  <span class="comment">#æ‹‰å–ä»£ç </span></span><br><span class="line">$ <span class="built_in">cd</span> vue-element-admin <span class="comment">#åˆ‡æ¢åˆ°å…·ä½“ç›®å½•ä¸‹</span></span><br><span class="line">$ npm run dev  <span class="comment">#å¯åŠ¨å¼€å‘è°ƒè¯•æ¨¡å¼  æŸ¥çœ‹package.jsonæ–‡ä»¶çš„scriptså¯çŸ¥æ™“å¯åŠ¨å‘½ä»¤</span></span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æ³¨æ„</code>**ï¼šå½“å‰é¡¹ç›®ä¸‹è½½é€Ÿåº¦å¦‚æœè¿‡æ…¢ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ä»£ç çš„å‹ç¼©åŒ…è¿è¡Œ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200703173319390.png" alt="image-20200703173319390"></p>
<blockquote>
<p>é›†æˆæ–¹æ¡ˆå¹¶ä¸é€‚åˆæˆ‘ä»¬ç›´æ¥æ‹¿æ¥è¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/vue-admin-template">åŸºç¡€æ¨¡æ¿</a>åˆ™æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©</p>
</blockquote>
<p>åŸºç¡€æ¨¡æ¿, åŒ…å«äº†åŸºæœ¬çš„ <strong>ç™»å½• / é‰´æƒ / ä¸»é¡µå¸ƒå±€</strong> çš„ä¸€äº›åŸºç¡€åŠŸèƒ½æ¨¡æ¿, æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¯¥æ¨¡æ¿ä¸Šè¿›è¡ŒåŠŸèƒ½çš„æ‰©å±•å’Œé¡¹ç›®çš„äºŒæ¬¡å¼€å‘</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š æµè§ˆvue-element-adminçš„æ–‡æ¡£ï¼Œäº†è§£è¿™ä¸ªé›†æˆæ–¹æ¡ˆ</p>
<h2 id="æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡"><a href="#æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡" class="headerlink" title="æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡"></a>æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡</h2><p><strong><code>ç›®æ ‡</code></strong>: ä»‹ç»æ­å»ºä¸€ä¸ªvueä¸­å°é¡¹ç›®,éœ€è¦ç¯å¢ƒå’Œå·¥å…·</p>
<blockquote>
<p>æ¥ä¸‹æ¥è¦åšçš„æ˜¯ä¸€ä¸ªå¤§å‹çš„é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦æ›´å¥½çš„ç¯å¢ƒå‡†å¤‡å’Œèµ„æºå‰ç½®ï¼Œæ‰€ä»¥æå‰æ£€æŸ¥æˆ‘ä»¬çš„ç¯å¢ƒå’Œèµ„æº</p>
</blockquote>
<p><strong>nodejsç¯å¢ƒ</strong></p>
<blockquote>
<p>nodejsæ˜¯å½“ä¸‹å‰ç«¯å·¥ç¨‹åŒ–å¼€å‘å¿…ä¸å¯å°‘çš„ç¯å¢ƒ, ä½¿ç”¨ nodejsçš„**<code>npm</code>**åŠŸèƒ½æ¥ç®¡ç†ä¾èµ–åŒ…</p>
</blockquote>
<p>æŸ¥çœ‹node å’Œ npmçš„ç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ node -v <span class="comment">#æŸ¥çœ‹nodeç‰ˆæœ¬</span></span><br><span class="line">$ npm  -v <span class="comment">#æŸ¥çœ‹npmç‰ˆæœ¬</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200706130603160.png" alt="image-20200706130603160"></p>
<p><strong>gitç‰ˆæœ¬æ§åˆ¶</strong></p>
<blockquote>
<p>gitç‰ˆæœ¬æ§åˆ¶å·¥å…·æ˜¯ç›®å‰æœ€ä¸ºæµè¡Œçš„åˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†å·¥å…·,ä»£ç çš„**<code>æäº¤, æ£€å‡º, æ—¥å¿—</code>**, éƒ½éœ€è¦é€šè¿‡gitå®Œæˆ</p>
</blockquote>
<p>æŸ¥çœ‹gitå®‰è£…ç‰ˆæœ¬</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git --version <span class="comment">#æŸ¥çœ‹gitå®‰è£…ç‰ˆæœ¬</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200706131337563.png" alt="image-20200706131337563"></p>
<p><strong>npmæ·˜å®é•œåƒ</strong></p>
<blockquote>
<p>npmæ˜¯éå¸¸é‡è¦çš„npmç®¡ç†å·¥å…·,ç”±äºnpmçš„æœåŠ¡å™¨ä½äºå›½å¤–, æ‰€ä»¥ä¸€èˆ¬å»ºè®® å°† npmè®¾ç½®æˆå›½å†…çš„æ·˜å®é•œåƒ</p>
</blockquote>
<p>è®¾ç½®æ·˜å®é•œåƒ</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm config <span class="built_in">set</span> registry  https://registry.npm.taobao.org/  <span class="comment">#è®¾ç½®æ·˜å®é•œåƒåœ°å€</span></span><br><span class="line">$ npm config get registry  <span class="comment">#æŸ¥çœ‹é•œåƒåœ°å€</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>vscodeç¼–è¾‘å™¨</strong></p>
<blockquote>
<p>vscodeç¼–è¾‘å™¨æ˜¯ç›®å‰å‰ç«¯å¼€å‘çš„ç¼–ç åˆ©å™¨ï¼Œ ä»¥åŠä¸°å¯Œçš„æ’ä»¶ç³»ç»Ÿï¼Œéå¸¸é€‚åˆå¼€å‘å‰ç«¯é¡¹ç›® </p>
</blockquote>
<p>vscodeç¼–è¾‘å™¨æ’ä»¶ + <strong><code>vetur</code></strong> + <strong><code>eslint</code></strong></p>
<blockquote>
<p>veturæ˜¯åŸºäº å•æ–‡ä»¶ç»„ä»¶å¼€å‘çš„æ”¯æŒæ’ä»¶, eslintæ˜¯ åŸºäºä»£ç æ ¡éªŒçš„æ’ä»¶å·¥å…·</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200706134607517.png" alt="image-20200706134607517"></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200706134614330.png" alt="image-20200706134614330"></p>
<p>é™¤æ­¤ä¹‹å¤–, eslintéœ€è¦åœ¨vscodeä¸­è¿›è¡Œä¸€äº›å‚æ•°çš„é…ç½®</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">{ </span><br><span class="line">    <span class="attr">"eslint.enable"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"eslint.run"</span>: <span class="string">"onType"</span>,</span><br><span class="line">    <span class="attr">"eslint.options"</span>: {</span><br><span class="line">        <span class="attr">"extensions"</span>: [</span><br><span class="line">            <span class="string">".js"</span>,</span><br><span class="line">            <span class="string">".vue"</span>,</span><br><span class="line">            <span class="string">".jsx"</span>,</span><br><span class="line">            <span class="string">".tsx"</span></span><br><span class="line">        ]</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">"editor.codeActionsOnSave"</span>: {</span><br><span class="line">        <span class="attr">"source.fixAll.eslint"</span>: <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æœ¬é¡¹ç›®çš„æŠ€æœ¯æ ˆ æœ¬é¡¹ç›®æŠ€æœ¯æ ˆåŸºäº <a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/">ES2015+</a>ã€<a target="_blank" rel="noopener" href="https://cn.vuejs.org/index.html">vue</a>ã€<a target="_blank" rel="noopener" href="https://vuex.vuejs.org/zh-cn/">vuex</a>ã€<a target="_blank" rel="noopener" href="https://router.vuejs.org/zh-cn/">vue-router</a> ã€<a target="_blank" rel="noopener" href="https://github.com/vuejs/vue-cli">vue-cli</a> ã€<a target="_blank" rel="noopener" href="https://github.com/axios/axios">axios</a> å’Œ <a target="_blank" rel="noopener" href="https://github.com/ElemeFE/element">element-ui</a></p>
</blockquote>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å¤§å®¶æ£€æŸ¥å„è‡ªçš„å¼€å‘ç¯å¢ƒå’Œèµ„æºï¼Œå°¤å…¶æ˜¯npmçš„æ·˜å®é•œåƒé¢å¤–éœ€è¦æ³¨æ„</p>
<h2 id="é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»"><a href="#é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»" class="headerlink" title="é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»"></a>é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»</h2><p><strong><code>ç›®æ ‡</code></strong>: æ‹‰å–é¡¹ç›®çš„åŸºç¡€æ¨¡æ¿,å¹¶å¯¹ç›®å½•è¿›è¡Œä»‹ç»</p>
<blockquote>
<p>vue-element-adminçš„åŸºç¡€ æ¨¡æ¿å’Œæˆ‘ä»¬ä¹‹å‰å¼€å‘çš„é¡¹ç›®ä¸€æ ·å— ï¼Ÿæœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å¯¹è¯¥é¡¹ç›®ç›®å½•è¿›è¡Œä¸€ä¸‹ä»‹ç»</p>
</blockquote>
<p><strong>gitæ‹‰å–åŸºç¡€é¡¹ç›®æ¨¡æ¿</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span>  https://github.com/PanJiaChen/vue-admin-template.git  hrsaas <span class="comment">#æ‹‰å–åŸºç¡€æ¨¡æ¿åˆ°hrsaasç›®å½•</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®‰è£…é¡¹ç›®ä¾èµ–</strong>ï¼ˆå®šä½åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼‰</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install  <span class="comment">#å®‰è£…ä¾èµ–</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¯åŠ¨é¡¹ç›®</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run dev <span class="comment">#å¯åŠ¨å¼€å‘æ¨¡å¼çš„æœåŠ¡</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200708010741325.png" alt="image-20200708010741325"></p>
<p>é¡¹ç›®è¿è¡Œå®Œæ¯•ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€åŸºç¡€æ¨¡æ¿çš„ç™»å½•é¡µï¼Œå¦‚ä¸Šå›¾</p>
<p><strong>ç›®å½•ç»“æ„</strong></p>
<p>æœ¬é¡¹ç›®å·²ç»ä¸ºä½ ç”Ÿæˆäº†ä¸€ä¸ªåŸºæœ¬çš„å¼€å‘æ¡†æ¶ï¼Œæä¾›äº†æ¶µç›–ä¸­åå°å¼€å‘çš„å„ç±»åŠŸèƒ½å’Œå‘ä½ï¼Œä¸‹é¢æ˜¯æ•´ä¸ªé¡¹ç›®çš„ç›®å½•ç»“æ„ã€‚</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ build                      <span class="comment"># æ„å»ºç›¸å…³</span></span><br><span class="line">â”œâ”€â”€ mock                       <span class="comment"># é¡¹ç›®mock æ¨¡æ‹Ÿæ•°æ®</span></span><br><span class="line">â”œâ”€â”€ public                     <span class="comment"># é™æ€èµ„æº</span></span><br><span class="line">â”‚   â”‚â”€â”€ favicon.ico            <span class="comment"># faviconå›¾æ ‡</span></span><br><span class="line">â”‚   â””â”€â”€ index.html             <span class="comment"># htmlæ¨¡æ¿</span></span><br><span class="line">â”œâ”€â”€ src                        <span class="comment"># æºä»£ç </span></span><br><span class="line">â”‚   â”œâ”€â”€ api                    <span class="comment"># æ‰€æœ‰è¯·æ±‚</span></span><br><span class="line">â”‚   â”œâ”€â”€ assets                 <span class="comment"># ä¸»é¢˜ å­—ä½“ç­‰é™æ€èµ„æº</span></span><br><span class="line">â”‚   â”œâ”€â”€ components             <span class="comment"># å…¨å±€å…¬ç”¨ç»„ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ icons                  <span class="comment"># é¡¹ç›®æ‰€æœ‰ svg icons</span></span><br><span class="line">â”‚   â”œâ”€â”€ layout                 <span class="comment"># å…¨å±€ layout</span></span><br><span class="line">â”‚   â”œâ”€â”€ router                 <span class="comment"># è·¯ç”±</span></span><br><span class="line">â”‚   â”œâ”€â”€ store                  <span class="comment"># å…¨å±€ storeç®¡ç†</span></span><br><span class="line">â”‚   â”œâ”€â”€ styles                 <span class="comment"># å…¨å±€æ ·å¼</span></span><br><span class="line">â”‚   â”œâ”€â”€ utils                  <span class="comment"># å…¨å±€å…¬ç”¨æ–¹æ³•</span></span><br><span class="line">â”‚   â”œâ”€â”€ vendor                 <span class="comment"># å…¬ç”¨vendor</span></span><br><span class="line">â”‚   â”œâ”€â”€ views                  <span class="comment"># views æ‰€æœ‰é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ App.vue                <span class="comment"># å…¥å£é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.js                <span class="comment"># å…¥å£æ–‡ä»¶ åŠ è½½ç»„ä»¶ åˆå§‹åŒ–ç­‰</span></span><br><span class="line">â”‚   â””â”€â”€ permission.js          <span class="comment"># æƒé™ç®¡ç†</span></span><br><span class="line">â”‚   â””â”€â”€ settings.js          <span class="comment"># é…ç½®æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ tests                      <span class="comment"># æµ‹è¯•</span></span><br><span class="line">â”œâ”€â”€ .env.xxx                   <span class="comment"># ç¯å¢ƒå˜é‡é…ç½®</span></span><br><span class="line">â”œâ”€â”€ .eslintrc.js               <span class="comment"># eslint é…ç½®é¡¹</span></span><br><span class="line">â”œâ”€â”€ .babelrc                   <span class="comment"># babel-loader é…ç½®</span></span><br><span class="line">â”œâ”€â”€ .travis.yml                <span class="comment"># è‡ªåŠ¨åŒ–CIé…ç½®</span></span><br><span class="line">â”œâ”€â”€ vue.config.js              <span class="comment"># vue-cli é…ç½®</span></span><br><span class="line">â”œâ”€â”€ postcss.config.js          <span class="comment"># postcss é…ç½®</span></span><br><span class="line">â””â”€â”€ package.json               <span class="comment"># package.json</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶,ä½ å¯èƒ½ä¼š<strong>çœ¼èŠ±ç¼­ä¹±</strong>, å› ä¸ºç”Ÿæˆçš„ç›®å½•é‡Œé¢æœ‰å¤ªå¤šçš„æ–‡ä»¶ æˆ‘ä»¬åœ¨åšé¡¹ç›®æ—¶ å…¶ä¸­æœ€å…³æ³¨çš„å°±æ˜¯**<code>src</code>**ç›®å½•, é‡Œé¢æ˜¯æ‰€æœ‰çš„æºä»£ç å’Œèµ„æº, è‡³äºå…¶ä»–ç›®å½•, éƒ½æ˜¯å¯¹é¡¹ç›®çš„ç¯å¢ƒå’Œå·¥å…·çš„é…ç½®</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š æŒ‰ç…§æ“ä½œå’Œè®²è§£æ­¥éª¤ï¼Œè¿›è¡Œæ‹‰å–ä»£ç ï¼Œå®‰è£…ä¾èµ–ï¼Œè¿è¡Œé¡¹ç›®ï¼Œé˜…è¯»ç›®å½•å’Œæ–‡ä»¶çš„æ“ä½œ</p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code></strong> éœ€è¦æ³¨æ„è‡ªå·±çš„npmæ˜¯å¦å·²ç»è®¾ç½®äº†æ·˜å®é•œåƒ</p>
<h2 id="é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š"><a href="#é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š" class="headerlink" title="é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š"></a>é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š</h2><p><strong><code>ç›®æ ‡</code></strong>: äº†è§£å½“å‰æ¨¡æ¿çš„åŸºæœ¬è¿è¡Œæœºåˆ¶å’ŒåŸºç¡€æ¶æ„</p>
<blockquote>
<p>çœ¼èŠ±ç¼­ä¹±çš„ç›®å½•å’Œæ–‡ä»¶åˆ°åº•æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ æˆ‘ä»¬è¿›è¡Œä¸€ä¸‹æœ€åŸºæœ¬çš„è®²è§£ï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½çš„å»ç†è§£å’Œå¼€å‘</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ src                        <span class="comment"># æºä»£ç </span></span><br><span class="line">â”‚   â”œâ”€â”€ api                    <span class="comment"># æ‰€æœ‰è¯·æ±‚</span></span><br><span class="line">â”‚   â”œâ”€â”€ assets                 <span class="comment"># ä¸»é¢˜ å­—ä½“ç­‰é™æ€èµ„æº</span></span><br><span class="line">â”‚   â”œâ”€â”€ components             <span class="comment"># å…¨å±€å…¬ç”¨ç»„ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ icons                  <span class="comment"># é¡¹ç›®æ‰€æœ‰ svg icons</span></span><br><span class="line">â”‚   â”œâ”€â”€ layout                 <span class="comment"># å…¨å±€ layout</span></span><br><span class="line">â”‚   â”œâ”€â”€ router                 <span class="comment"># è·¯ç”±</span></span><br><span class="line">â”‚   â”œâ”€â”€ store                  <span class="comment"># å…¨å±€ storeç®¡ç†</span></span><br><span class="line">â”‚   â”œâ”€â”€ styles                 <span class="comment"># å…¨å±€æ ·å¼</span></span><br><span class="line">â”‚   â”œâ”€â”€ utils                  <span class="comment"># å…¨å±€å…¬ç”¨æ–¹æ³•</span></span><br><span class="line">â”‚   â”œâ”€â”€ vendor                 <span class="comment"># å…¬ç”¨vendor</span></span><br><span class="line">â”‚   â”œâ”€â”€ views                  <span class="comment"># views æ‰€æœ‰é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ App.vue                <span class="comment"># å…¥å£é¡µé¢</span></span><br><span class="line">â”‚   â”œâ”€â”€ main.js                <span class="comment"># å…¥å£æ–‡ä»¶ åŠ è½½ç»„ä»¶ åˆå§‹åŒ–ç­‰</span></span><br><span class="line">â”‚   â””â”€â”€ permission.js          <span class="comment"># æƒé™ç®¡ç†</span></span><br><span class="line">â”‚   â””â”€â”€ settings.js            <span class="comment"># é…ç½®æ–‡ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a><strong>main.js</strong></h3><p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824153141764.png" alt="image-20200824153141764"></p>
<p>è¯·æ³¨é‡Šæ‰**<code>mockæ•°æ®</code><strong>çš„éƒ¨åˆ†ï¼Œåˆ é™¤srcä¸‹çš„</strong><code>mock</code>**æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¼€å‘çš„æ—¶å€™ç”¨ä¸åˆ°æ¨¡æ‹Ÿæ•°æ®ï¼Œå¦‚å›¾</p>
<p>åŒæ—¶ï¼Œè¯·æ³¨é‡Šæ‰**<code>vue.config.js</code>**ä¸­çš„  <strong>before: require(â€˜./mock/mock-server.jsâ€™)</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200811013813693.png" alt="image-20200811013813693"></p>
<h3 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a><strong>App.vue</strong></h3><p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824155103340.png" alt="image-20200824155103340"></p>
<h3 id="permission-js"><a href="#permission-js" class="headerlink" title="permission.js"></a><strong>permission.js</strong></h3><blockquote>
<p>srcä¸‹ï¼Œé™¤äº†main.jsè¿˜æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œ**<code>permission.js</code>** å’Œ**<code>settings.js</code>**</p>
</blockquote>
<p><strong><code>permission.js</code></strong> æ˜¯æ§åˆ¶é¡µé¢ç™»å½•æƒé™çš„æ–‡ä»¶ï¼Œ æ­¤å¤„çš„ä»£ç æ²¡æœ‰ç»å†æ„å»ºè¿‡ç¨‹ä¼šå¾ˆéš¾ç†è§£ï¼Œ æ‰€ä»¥å…ˆå°†æ­¤å¤„çš„ä»£ç è¿›è¡Œæ³¨é‡Šï¼Œç­‰æˆ‘ä»¬æ„å»ºæƒé™åŠŸèƒ½æ—¶ï¼Œå†ä»0åˆ°1è¿›è¡Œæ„å»ºã€‚</p>
<p><strong>æ³¨é‡Šä»£ç </strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200708014558617.png" alt="image-20200708014558617"></p>
<blockquote>
<p>**<code>settings.js</code><strong>åˆ™æ˜¯å¯¹äºä¸€äº›é¡¹ç›®ä¿¡æ¯çš„é…ç½®ï¼Œé‡Œé¢æœ‰ä¸‰ä¸ªå±æ€§ <strong><code>title</code></strong>(é¡¹ç›®åç§°)ï¼Œ</strong><code>fixedHeader</code><strong>ï¼ˆå›ºå®šå¤´éƒ¨ï¼‰ï¼Œ</strong><code>sidebarLogo</code>**ï¼ˆæ˜¾ç¤ºå·¦ä¾§èœå•logoï¼‰</p>
</blockquote>
<p>**<code>settings.js</code>**ä¸­çš„æ–‡ä»¶åœ¨å…¶ä»–çš„ä½ç½®ä¼šå¼•ç”¨åˆ°ï¼Œæ‰€ä»¥è¿™é‡Œæš‚æ—¶ä¸å»å¯¹è¯¥æ–‡ä»¶è¿›è¡Œå˜åŠ¨</p>
<h3 id="Vuexç»“æ„"><a href="#Vuexç»“æ„" class="headerlink" title="Vuexç»“æ„"></a><strong>Vuexç»“æ„</strong></h3><blockquote>
<p>å½“å‰çš„Vuexç»“æ„é‡‡ç”¨äº†æ¨¡å—å½¢å¼è¿›è¡Œç®¡ç†å…±äº«çŠ¶æ€ï¼Œå…¶æ¶æ„å¦‚ä¸‹</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824165153331.png" alt="image-20200824165153331"></p>
<blockquote>
<p>å…¶ä¸­app.jsæ¨¡å—å’Œsettings.jsæ¨¡å—ï¼ŒåŠŸèƒ½å·²ç»å®Œå¤‡ï¼Œä¸éœ€è¦å†è¿›è¡Œä¿®æ”¹ã€‚ user.jsæ¨¡å—æ˜¯æˆ‘ä»¬åæœŸéœ€è¦é‡ç‚¹å¼€å‘çš„å†…å®¹ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬å°†user.jsé‡Œé¢çš„å†…å®¹åˆ é™¤ï¼Œå¹¶ä¸”å¯¼å‡ºä¸€ä¸ªé»˜è®¤é…ç½®</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  {</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: {},</span><br><span class="line">  <span class="attr">mutations</span>: {},</span><br><span class="line">  <span class="attr">actions</span>: {}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>åŒæ—¶ï¼Œç”±äºgettersä¸­å¼•ç”¨äº†userä¸­çš„çŠ¶æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†gettersä¸­çš„çŠ¶æ€æ”¹ä¸º</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = {</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.sidebar,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.device</span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="scss"><a href="#scss" class="headerlink" title="scss"></a><strong>scss</strong></h3><blockquote>
<p>è¯¥é¡¹ç›®è¿˜ä½¿ç”¨äº†<a target="_blank" rel="noopener" href="https://www.sass.hk/">scss</a>ä½œä¸ºcssçš„æ‰©å±•è¯­è¨€ï¼Œåœ¨**<code>styles</code>**ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°scssçš„ç›¸å…³æ–‡ä»¶ï¼Œç›¸å…³ç”¨æ³• æˆ‘ä»¬<a href="">ä¸‹ä¸€å°èŠ‚</a> è¿›è¡Œè®²è§£<img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824171327384.png" alt="image-20200824171327384"></p>
</blockquote>
<h3 id="icons"><a href="#icons" class="headerlink" title="icons"></a><strong>icons</strong></h3><blockquote>
<p>iconsçš„ç»“æ„å¦‚ä¸‹</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200824173239955.png" alt="image-20200824173239955"></p>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯vue-element-adminçš„åŸºç¡€å’Œä»‹ç»,å¸Œæœ›å¤§å®¶åœ¨è¿™è¿‡ç¨‹ä¸­ä½“ä¼š ä¸€ä¸ªåŸºç¡€çš„æ¨¡æ¿è¿è¡Œæœºåˆ¶</p>
</blockquote>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å¤§å®¶æ ¹æ®ç›®å½•ç»“æ„å’Œè®¾è®¡å›¾ï¼Œå¯¹ä»¥ä¸Šçš„å†…å®¹è¿›è¡Œäº†è§£</p>
<h2 id="SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨"><a href="#SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨" class="headerlink" title="SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨"></a>SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨</h2><p><strong><code>ç›®æ ‡</code></strong>: äº†è§£å’Œå­¦ä¹ Scsså¤„ç†å™¨çš„è§„èŒƒå’Œç”¨æ³•</p>
<p><a target="_blank" rel="noopener" href="https://www.sass.hk/">å®˜æ–¹æ–‡æ¡£</a></p>
<blockquote>
<p>é¦–å…ˆæ³¨æ„,è¿™é‡Œçš„sasså’Œæˆ‘ä»¬çš„scssæ˜¯ä»€ä¹ˆå…³ç³»</p>
</blockquote>
<p>sasså’Œscsså…¶å®æ˜¯**<code>ä¸€æ ·çš„</code>**cssé¢„å¤„ç†è¯­è¨€ï¼ŒSCSS æ˜¯ Sass 3 å¼•å…¥æ–°çš„è¯­æ³•ï¼Œå…¶åç¼€åæ˜¯åˆ†åˆ«ä¸º .sasså’Œ.scssä¸¤ç§ã€‚<br>SASSç‰ˆæœ¬3.0ä¹‹å‰çš„åç¼€åä¸º.sassï¼Œè€Œç‰ˆæœ¬3.0ä¹‹åçš„åç¼€å.scssã€‚<br>ä¸¤è€…æ˜¯æœ‰ä¸åŒçš„ï¼Œç»§sassä¹‹åscssçš„ç¼–å†™è§„èŒƒåŸºæœ¬å’Œcssä¸€è‡´ï¼Œsassæ—¶ä»£æ˜¯æœ‰ä¸¥æ ¼çš„ç¼©è¿›è§„èŒƒå¹¶ä¸”æ²¡æœ‰â€˜{}â€™å’Œâ€˜ï¼›â€™ã€‚<br>è€Œscssåˆ™å’Œcssçš„è§„èŒƒæ˜¯ä¸€è‡´çš„ã€‚</p>
<h3 id="æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ"><a href="#æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ"></a>æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ</h3><blockquote>
<p>ä¸ºäº†æ–¹ä¾¿åº”ç”¨scssï¼Œæˆ‘ä»¬å¯ä»¥åœ¨vscodeä¸­å®‰è£…ä¸€ä¸ªåä¸º**<code>easy sass</code>** çš„æ’ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬åªåœ¨è¯¥é¡¹ç›®ä¸­å·¥ä½œåŒºä¸­åº”ç”¨è¯¥æ’ä»¶ï¼Œå› ä¸ºåœ¨é¡¹ç›®ä¸­ï¼Œä¸éœ€è¦è¯¥æ’ä»¶çš„è¾…åŠ©</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200825143713888.png" alt="image-20200825143713888"></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200825143800666.png" alt="image-20200825143800666"></p>
<blockquote>
<p>é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹testï¼Œç„¶åæˆ‘ä»¬åœ¨testä¸‹æ–°å»ºä¸€ä¸ªindex.htmlï¼Œå¹¶æ–°å»ºä¸€ä¸ªtest.scss</p>
</blockquote>
<p>é¡µé¢ç»“æ„å¦‚ä¸‹</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"./test.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span>&gt;</span> Scssæ ·å¼ <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        Hello World</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">article</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>æ–‡ç« æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–‡ç« å†…å®¹ <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">""</span>&gt;</span>ç™¾åº¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aside</span>&gt;</span></span><br><span class="line">            ä¾§è¾¹æ </span><br><span class="line">        <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬ä½¿ç”¨çš„**<code>easy sass</code><strong>æ’ä»¶ä¼šè‡ªåŠ¨çš„å¸®åŠ©æˆ‘ä»¬æŠŠ</strong><code>test.scss  =&gt;  test.css</code>**</p>
<h3 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a>å˜é‡</h3><p><code>sass</code>ä½¿ç”¨<code>$</code>ç¬¦å·æ¥æ ‡è¯†å˜é‡ </p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$highlight</span>-color: <span class="comment">#f90     </span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª åä¸º**<code>$highlight-color</code>**çš„å˜é‡, æˆ‘ä»¬å¯ä»¥æŠŠè¯¥å˜é‡ç”¨åœ¨ä»»ä½•ä½ç½®</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#app {</span></span><br><span class="line">    background-color:  <span class="variable">$highlight</span>-color;</span><br><span class="line">}     </span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ç©ºæ ¼åˆ†å‰²çš„å¤šå±æ€§å€¼ä¹Ÿå¯ä»¥æ ‡è¯†å˜é‡</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$basic</span>-border: 1px solid black;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#app {</span></span><br><span class="line">    background-color:  <span class="variable">$highlight</span>-color;</span><br><span class="line">    border: <span class="variable">$basic</span>-border</span><br><span class="line">}     </span><br></pre></td></tr></tbody></table></figure>

<p><strong>å˜é‡èŒƒå›´</strong></p>
<p>ä¸<code>CSS</code>å±æ€§ä¸åŒï¼Œå˜é‡å¯ä»¥åœ¨<code>css</code>è§„åˆ™å—å®šä¹‰ä¹‹å¤–å­˜åœ¨ã€‚å½“å˜é‡å®šä¹‰åœ¨<code>css</code>è§„åˆ™å—å†…ï¼Œé‚£ä¹ˆè¯¥å˜é‡åªèƒ½åœ¨æ­¤è§„åˆ™å—å†…ä½¿ç”¨ã€‚å¦‚æœå®ƒä»¬å‡ºç°åœ¨ä»»ä½•å½¢å¼çš„<code>{...}</code>å—ä¸­ï¼ˆå¦‚<code>@media</code>æˆ–è€…<code>@font-face</code>å—ï¼‰ï¼Œæƒ…å†µä¹Ÿæ˜¯å¦‚æ­¤ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$nav</span>-color: <span class="comment">#F90;</span></span><br><span class="line">nav {</span><br><span class="line">  <span class="variable">$width</span>: 100px;</span><br><span class="line">  width: <span class="variable">$width</span>;</span><br><span class="line">  color: <span class="variable">$nav</span>-color;</span><br><span class="line">  background-color: black</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼–è¯‘å </span></span><br><span class="line"></span><br><span class="line">nav {</span><br><span class="line">  width: 100px;</span><br><span class="line">  color: <span class="comment">#F90;</span></span><br><span class="line">  background-color: black;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ<code>$nav-color</code>è¿™ä¸ªå˜é‡å®šä¹‰åœ¨äº†è§„åˆ™å—å¤–è¾¹ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæ ·å¼è¡¨ä¸­éƒ½å¯ä»¥åƒ <code>nav</code>è§„åˆ™å—é‚£æ ·å¼•ç”¨å®ƒã€‚<code>$width</code>è¿™ä¸ªå˜é‡å®šä¹‰åœ¨äº†<code>nav</code>çš„<code>{ }</code>è§„åˆ™å—å†…ï¼Œæ‰€ä»¥å®ƒåªèƒ½åœ¨<code>nav</code>è§„åˆ™å— å†…ä½¿ç”¨ã€‚è¿™æ„å‘³ç€æ˜¯ä½ å¯ä»¥åœ¨æ ·å¼è¡¨çš„å…¶ä»–åœ°æ–¹å®šä¹‰å’Œä½¿ç”¨<code>$width</code>å˜é‡ï¼Œä¸ä¼šå¯¹è¿™é‡Œé€ æˆå½±å“ã€‚</p>
<p><strong>åµŒå¥—è¯­æ³•</strong></p>
<p>å’Œlessä¸€æ ·,scssåŒæ ·æ”¯æŒ**<code>åµŒå¥—å‹</code>**çš„è¯­æ³•</p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#content</span> {</span><br><span class="line">    <span class="selector-tag">article</span> {</span><br><span class="line">      <span class="selector-tag">h1</span> { <span class="attribute">color</span>: <span class="number">#1dc08a</span> }</span><br><span class="line">      p {  font-style: italic; }</span><br><span class="line">    }</span><br><span class="line">    <span class="selector-tag">aside</span> { <span class="attribute">background-color</span>: <span class="number">#f90</span> }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>è½¬åŒ–å</p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">article</span> <span class="selector-tag">h1</span> {</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#1dc08a</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">article</span> <span class="selector-tag">p</span> {</span><br><span class="line">  <span class="attribute">font-style</span>: italic;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#content</span> <span class="selector-tag">aside</span> {</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f90</span>;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>&amp;çˆ¶é€‰æ‹©å™¨</strong></p>
<p>å‡å¦‚ä½ æƒ³é’ˆå¯¹æŸä¸ªç‰¹å®šå­å…ƒç´  è¿›è¡Œè®¾ç½®</p>
<p>æ¯”å¦‚</p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#content</span> {</span><br><span class="line">  <span class="selector-tag">article</span> {</span><br><span class="line">    <span class="selector-tag">h1</span> { <span class="attribute">color</span>: <span class="number">#1dc08a</span> }</span><br><span class="line">    p {  font-style: italic; }</span><br><span class="line">    <span class="selector-tag">a</span> {</span><br><span class="line">      <span class="attribute">color</span>: blue;</span><br><span class="line">      &amp;<span class="selector-pseudo">:hover</span> { <span class="attribute">color</span>: red }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  aside { background-color: <span class="number">#f90</span> }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å­¦åˆ°è¿™é‡Œ,æˆ‘ä»¬ä¼šå‘ç°scsså’Œlessæœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„,æœ€å¤§çš„åŒºåˆ«å°±åœ¨äºå£°æ˜å˜é‡çš„æ–¹å¼,lessé‡‡ç”¨çš„æ˜¯**<code>@å˜é‡å</code><strong>, è€Œscssé‡‡ç”¨çš„</strong><code>$å˜é‡å</code>**</p>
</blockquote>
<p>æ­¤æ—¶,æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æ¨¡æ¿ä¸­çš„ <strong><code>styles/variables.scss</code></strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201017230542301.png" alt="image-20201017230542301"></p>
<p>ä¸Šè¿°æ–‡ä»¶,å®é™…ä¸Šå®šä¹‰äº†æˆ‘ä»¬çš„ä¸€äº›åŸºç¡€æ•°å€¼,æ–¹ä¾¿å¤§å®¶åœ¨æŸä¸ªæ–‡ä»¶ç»Ÿä¸€çš„å¤„ç†.</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå¯¹scssè¿›è¡Œäº†è§£å’ŒæŒæ¡</p>
<h2 id="å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤"><a href="#å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤" class="headerlink" title="å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤"></a>å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤</h2><p><strong><code>ç›®æ ‡</code></strong> åœ¨<a target="_blank" rel="noopener" href="https://gitee.com/">ç äº‘</a>æˆ–è€…<a target="_blank" rel="noopener" href="https://github.com/">github</a>ä¸Šå»ºç«‹ç›¸åº”çš„è¿œç¨‹ä»“åº“,å¹¶å°†ä»£ç åˆ†æ”¯æäº¤</p>
<p><strong>å»ºç«‹è¿œç¨‹ä»“åº“</strong></p>
<blockquote>
<p>è¿œç¨‹ä»“åº“å»ºç«‹åªéœ€è¦åœ¨ç½‘ç«™ä¸Šç›´æ¥æ“ä½œå³å¯</p>
</blockquote>
<p><strong>æœ¬åœ°é¡¹ç›®æäº¤</strong></p>
<p><strong><code>æ³¨æ„</code></strong>: ç”±äºæˆ‘ä»¬ä¹‹å‰çš„é¡¹ç›®æ˜¯ç›´æ¥ä» vue-element-admin **<code>å…‹éš†</code><strong>è€Œæ¥,é‡Œé¢æ‹¥æœ‰åŸæ¥çš„æäº¤è®°å½•,ä¸ºäº†é¿å…å†²çª, å…ˆå°†åŸæ¥çš„</strong><code>.git</code>**æ–‡ä»¶å¤¹åˆ é™¤æ‰</p>
<p>å¹¶ä¸”å¯¹é¡¹ç›®è¿›è¡Œgitåˆå§‹åŒ–</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init  <span class="comment">#åˆå§‹åŒ–é¡¹ç›®</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$  git add . <span class="comment">#å°†ä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜</span></span><br><span class="line">$  git commit -m <span class="string">'äººèµ„é¡¹ç›®åˆå§‹åŒ–'</span> <span class="comment">#å°†æš‚å­˜æåˆ°æœ¬åœ°ä»“åº“</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> <span class="comment">#æŸ¥çœ‹ç‰ˆæœ¬æ—¥å¿—</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ¨é€åˆ°è¿œç¨‹ä»“åº“</strong></p>
<p>æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸€èˆ¬å…ˆå°†**<code>è¿œç¨‹ä»“åº“åœ°å€</code>**ç”¨æœ¬åœ°ä»“åº“åˆ«åä»£æ›¿</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin &lt;è¿œç¨‹ä»“åº“åœ°å€&gt;  <span class="comment">#æ·»åŠ è¿œç¨‹ä»“åº“åœ°å€</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å½“æˆ‘ä»¬ä¸æ¸…æ¥šè‡ªå·±çš„ä»“åº“å¯¹åº”çš„originåœ°å€æ—¶, æˆ‘ä»¬å¯ä»¥é€šè¿‡å‘½ä»¤æŸ¥çœ‹å½“å‰çš„è¿œç¨‹ä»“åº“åœ°å€</p>
</blockquote>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote -v <span class="comment">#æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„è¿œç¨‹ä»“åº“åœ°å€æ˜ å°„</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ¨é€masteråˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master <span class="comment">#å°†masteråˆ†æ”¯æ¨é€åˆ°originæ‰€ä»£è¡¨çš„è¿œç¨‹ä»“åº“åœ°å€</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong>: åŒå­¦ä»¬ æ ¹æ®ä»¥ä¸Šæ“ä½œ,å°†æ‹‰å–ä¸‹çš„é¡¹ç›®æäº¤åˆ°è‡ªå·±çš„ä»“åº“é‡Œé¢</p>
<h2 id="APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»"><a href="#APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»" class="headerlink" title="APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»"></a>APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»</h2><p><strong><code>ç›®æ ‡</code></strong> ä»‹ç»APIæ¨¡å—çš„å•ç‹¬è¯·æ±‚å’Œ requestæ¨¡å—çš„å°è£…</p>
<h3 id="Axiosçš„æ‹¦æˆªå™¨ä»‹ç»"><a href="#Axiosçš„æ‹¦æˆªå™¨ä»‹ç»" class="headerlink" title="Axiosçš„æ‹¦æˆªå™¨ä»‹ç»"></a>Axiosçš„æ‹¦æˆªå™¨ä»‹ç»</h3><blockquote>
<p>è¯¥é¡¹ç›®é‡‡ç”¨äº†APIçš„å•ç‹¬æ¨¡å—å°è£…å’Œaxiosæ‹¦æˆªå™¨çš„æ–¹å¼è¿›è¡Œå¼€å‘</p>
</blockquote>
<p>axiosçš„æ‹¦æˆªå™¨åŸç†å¦‚ä¸‹</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200811012945409.png" alt="image-20200811012945409"></p>
<p><strong>axiosæ‹¦æˆªå™¨</strong></p>
<p>axiosä½œä¸ºç½‘ç»œè¯·æ±‚çš„ç¬¬ä¸‰æ–¹å·¥å…·, å¯ä»¥è¿›è¡Œè¯·æ±‚å’Œå“åº”çš„æ‹¦æˆª</p>
<p><strong>é€šè¿‡createåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„axioså®ä¾‹</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„axioså®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: process.env.VUE_APP_BASE_API, <span class="comment">// url = base url + request url</span></span><br><span class="line">  <span class="comment">// withCredentials: true, // send cookies when cross-domain requests</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span> <span class="comment">// è¶…æ—¶æ—¶é—´</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯·æ±‚æ‹¦æˆªå™¨</strong></p>
<p>è¯·æ±‚æ‹¦æˆªå™¨ä¸»è¦å¤„ç† tokençš„**<code>ç»Ÿä¸€æ³¨å…¥é—®é¢˜</code>**</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// axiosçš„è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="params">config</span> =&gt;</span> {</span><br><span class="line">    <span class="comment">// do something before request is sent</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">      <span class="comment">// let each request carry token</span></span><br><span class="line">      <span class="comment">// ['X-Token'] is a custom headers key</span></span><br><span class="line">      <span class="comment">// please modify it according to the actual situation</span></span><br><span class="line">      config.headers[<span class="string">'X-Token'</span>] = getToken()</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">    <span class="comment">// do something with request error</span></span><br><span class="line">    <span class="built_in">console</span>.log(error) <span class="comment">// for debug</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  }</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å“åº”æ‹¦æˆªå™¨</strong></p>
<p>å“åº”æ‹¦æˆªå™¨ä¸»è¦å¤„ç† è¿”å›çš„**<code>æ•°æ®å¼‚å¸¸</code>** å’Œ**<code>æ•°æ®ç»“æ„</code>**é—®é¢˜</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">const</span> res = response.data</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if the custom code is not 20000, it is judged as an error.</span></span><br><span class="line">    <span class="keyword">if</span> (res.code !== <span class="number">20000</span>) {</span><br><span class="line">      Message({</span><br><span class="line">        <span class="attr">message</span>: res.message || <span class="string">'Error'</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">'error'</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">      })</span><br><span class="line">      <span class="keyword">if</span> (res.code === <span class="number">50008</span> || res.code === <span class="number">50012</span> || res.code === <span class="number">50014</span>) {</span><br><span class="line">        <span class="comment">// to re-login</span></span><br><span class="line">        MessageBox.confirm(<span class="string">'You have been logged out, you can cancel to stay on this page, or log in again'</span>, <span class="string">'Confirm logout'</span>, {</span><br><span class="line">          <span class="attr">confirmButtonText</span>: <span class="string">'Re-Login'</span>,</span><br><span class="line">          <span class="attr">cancelButtonText</span>: <span class="string">'Cancel'</span>,</span><br><span class="line">          <span class="attr">type</span>: <span class="string">'warning'</span></span><br><span class="line">        }).then(<span class="function">() =&gt;</span> {</span><br><span class="line">          store.dispatch(<span class="string">'user/resetToken'</span>).then(<span class="function">() =&gt;</span> {</span><br><span class="line">            location.reload()</span><br><span class="line">          })</span><br><span class="line">        })</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(res.message || <span class="string">'Error'</span>))</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'err'</span> + error) <span class="comment">// for debug</span></span><br><span class="line">    Message({</span><br><span class="line">      <span class="attr">message</span>: error.message,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">'error'</span>,</span><br><span class="line">      <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">    })</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  }</span><br><span class="line">)</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¿™é‡Œä¸ºäº†åç»­æ›´æ¸…æ¥šçš„ä¹¦å†™ä»£ç ,æˆ‘ä»¬å°†åŸæœ‰ä»£ç æ³¨é‡Šæ‰,æ¢æˆå¦‚ä¸‹ä»£ç </p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºä¸€ä¸ªaxiosçš„å®ä¾‹  è€Œä¸”è¿™ä¸ªå®ä¾‹è¦æœ‰è¯·æ±‚æ‹¦æˆªå™¨ å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create() <span class="comment">// åˆ›å»ºä¸€ä¸ªaxiosçš„å®ä¾‹</span></span><br><span class="line">service.interceptors.request.use() <span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use() <span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service <span class="comment">// å¯¼å‡ºaxioså®ä¾‹</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="apiæ¨¡å—çš„å•ç‹¬å°è£…"><a href="#apiæ¨¡å—çš„å•ç‹¬å°è£…" class="headerlink" title="apiæ¨¡å—çš„å•ç‹¬å°è£…"></a><strong>apiæ¨¡å—çš„å•ç‹¬å°è£…</strong></h3><p>æˆ‘ä»¬ä¹ æƒ¯æ€§çš„å°†æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ æ”¾ç½®åœ¨apiç›®å½•ä¸‹ç»Ÿä¸€ç®¡ç†,æŒ‰ç…§æ¨¡å—è¿›è¡Œåˆ’åˆ†</p>
<p><strong>å•ç‹¬å°è£…ä»£ç </strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/vue-admin-template/user/login'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">token</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/vue-admin-template/user/info'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'get'</span>,</span><br><span class="line">    <span class="attr">params</span>: { token }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logout</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/vue-admin-template/user/logout'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­,ä½¿ç”¨äº†å°è£…çš„requestå·¥å…·,æ¯ä¸ªæ¥å£çš„è¯·æ±‚éƒ½å•ç‹¬**<code>å¯¼å‡º</code>**äº†ä¸€ä¸ªæ–¹æ³•,è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯,ä»»ä½•ä½ç½®éœ€è¦è¯·æ±‚çš„è¯,å¯ä»¥ç›´æ¥å¼•ç”¨æˆ‘ä»¬å¯¼å‡ºçš„è¯·æ±‚æ–¹æ³•</p>
<p>ä¸ºäº†åç»­æ›´å¥½çš„å¼€å‘ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°†<strong>user.js</strong>ä»£ç çš„æ–¹æ³•è®¾ç½®ä¸ºç©ºï¼Œåç»­åœ¨è¿›è¡Œæ›´æ­£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import request from '@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>) </span>{</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">token</span>) </span>{</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">logout</span>(<span class="params"></span>) </span>{</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å°†requestå’Œç”¨æˆ·æ¨¡å—çš„ä»£ç è¿›è¡Œæ¸…ç†ï¼Œç†è§£requestå’Œæ¨¡å—å°è£…</p>
<h2 id="å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼"><a href="#å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼" class="headerlink" title="å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼"></a>å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼</h2><p><strong><code>ç›®æ ‡</code></strong> å°†ä¸€äº›å…¬å…±çš„å›¾ç‰‡å’Œæ ·å¼èµ„æºæ”¾å…¥åˆ° è§„å®šç›®å½•ä¸­</p>
<blockquote>
<p>æˆ‘ä»¬å·²ç»å°†æ•´ä½“çš„åŸºç¡€æ¨¡å—è¿›è¡Œäº†ç®€å•çš„ä»‹ç»ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯¥é¡¹ç›®æ‰€ç”¨åˆ°çš„å›¾ç‰‡å’Œæ ·å¼è¿›è¡Œç»Ÿä¸€çš„å¤„ç†</p>
</blockquote>
<p> <strong>å›¾ç‰‡èµ„æº</strong></p>
<blockquote>
<p>å›¾ç‰‡èµ„æºåœ¨è¯¾ç¨‹èµ„æ–™çš„å›¾ç‰‡æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å°†**<code>common</code>**æ–‡ä»¶å¤¹æ‹·è´æ”¾ç½®åˆ° **<code>assets</code>**ç›®å½•å³å¯</p>
</blockquote>
<p><strong>æ ·å¼</strong></p>
<blockquote>
<p>æ ·å¼èµ„æºåœ¨  èµ„æº/æ ·å¼ç›®å½•ä¸‹</p>
</blockquote>
<p>ä¿®æ”¹**<code>variables.scss</code>**</p>
<p>æ–°å¢**<code>common.scss</code>**</p>
<p>æˆ‘ä»¬åœ¨**<code>variables.scss</code>**æ·»åŠ äº†ä¸€äº›åŸºç¡€çš„å˜é‡å€¼</p>
<p>æˆ‘ä»¬æä¾›äº† ä¸€ä»½å…¬å…±çš„**<code>common.scss</code>**æ ·å¼,é‡Œé¢å†…ç½®äº†ä¸€éƒ¨åˆ†å†…å®¹çš„æ ·å¼,åœ¨å¼€å‘æœŸé—´å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿçš„å®ç°é¡µé¢æ ·å¼å’Œå¸ƒå±€</p>
<p>å°†ä¸¤ä¸ªæ–‡ä»¶æ”¾ç½®åˆ°<strong>styles</strong>ç›®å½•ä¸‹ï¼Œç„¶ååœ¨**<code>index.scss</code>**ä¸­å¼•å…¥è¯¥æ ·å¼</p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">'./common.scss'</span>; <span class="comment">//å¼•å…¥common.scssæ ·å¼è¡¨ </span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šæ³¨æ„åœ¨scssæ–‡ä»¶ä¸­ï¼Œé€šè¿‡</strong>@import</strong> å¼•å…¥å…¶ä»–æ ·å¼æ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„æœ€ååŠ åˆ†å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™</p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å°†å…¬å…±èµ„æºçš„å›¾ç‰‡å’Œæ ·å¼æ”¾ç½®åˆ°è§„å®šä½ç½®</p>
<h1 id="2-ç™»å½•æ¨¡å—"><a href="#2-ç™»å½•æ¨¡å—" class="headerlink" title="2.ç™»å½•æ¨¡å—"></a>2.ç™»å½•æ¨¡å—</h1><p><a target="_blank" rel="noopener" href="http://ihrm-java.itheima.net/#/login">çº¿ä¸Šåœ°å€</a></p>
<p>æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å°†åœ¨ç°æœ‰æ¨¡æ¿çš„åŸºç¡€ä¸Šï¼Œå®Œæˆå¦‚å›¾çš„ç™»å½•æ¨¡å—çš„åŠŸèƒ½</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200811014205189.png" alt="image-20200811014205189"></p>
<h2 id="è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°"><a href="#è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°" class="headerlink" title="è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°"></a>è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°</h2><p><strong><code>ç›®æ ‡</code></strong>: è®¾ç½®ç»Ÿä¸€çš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™title</p>
<p>åœ¨æ­£å¼å¼€å‘ä¸šåŠ¡ä¹‹å‰ï¼Œå…ˆå°†é¡¹ç›®çš„<strong>æœ¬åœ°ç«¯å£</strong>å’Œ<strong>ç½‘ç«™åç§°</strong>è¿›è¡Œä¸€ä¸‹è°ƒæ•´</p>
<p><strong>æœ¬åœ°æœåŠ¡ç«¯å£</strong>:  åœ¨**<code>vue.config.js</code>**ä¸­è¿›è¡Œè®¾ç½®</p>
<p><strong><code>vue.config.js</code></strong> å°±æ˜¯vueé¡¹ç›®ç›¸å…³çš„ç¼–è¯‘ï¼Œé…ç½®ï¼Œæ‰“åŒ…ï¼Œå¯åŠ¨æœåŠ¡ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œå®ƒçš„æ ¸å¿ƒåœ¨äº<strong>webpack</strong>ï¼Œä½†æ˜¯åˆä¸åŒäºwebpackï¼Œç›¸å½“äºæ”¹è‰¯ç‰ˆçš„webpackï¼Œ <a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/">æ–‡æ¡£åœ°å€</a></p>
<blockquote>
<p>å¦‚å›¾ï¼Œæ˜¯å¼€å‘ç¯å¢ƒæœåŠ¡ç«¯å£çš„ä½ç½®</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200710162221402.png" alt="image-20200710162221402"></p>
<p>æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„ **<code>process.env.port</code>**å®é™…ä¸Šæ˜¯ä¸€ä¸ªnodejsæœåŠ¡ä¸‹çš„ç¯å¢ƒå˜é‡ï¼Œè¯¥å˜é‡åœ¨å“ªé‡Œè®¾ç½®å‘¢ï¼Ÿ</p>
<p>åœ¨é¡¹ç›®ä¸‹, æˆ‘ä»¬å‘ç°äº†**<code>.env.development</code><strong>å’Œ</strong><code>.env.production</code>**ä¸¤ä¸ªæ–‡ä»¶</p>
<p>development =&gt; å¼€å‘ç¯å¢ƒ</p>
<p>production =&gt; ç”Ÿäº§ç¯å¢ƒ</p>
<p>å½“æˆ‘ä»¬è¿è¡Œ<strong>npm run dev</strong>è¿›è¡Œå¼€å‘è°ƒè¯•çš„æ—¶å€™,æ­¤æ—¶ä¼šåŠ è½½æ‰§è¡Œ**<code>.env.development</code>**æ–‡ä»¶å†…å®¹</p>
<p>å½“æˆ‘ä»¬è¿è¡Œ<strong>npm run build:prod</strong>è¿›è¡Œç”Ÿäº§ç¯å¢ƒæ‰“åŒ…çš„æ—¶å€™,ä¼šåŠ è½½æ‰§è¡Œ**<code>.env.production</code>**æ–‡ä»¶å†…å®¹</p>
<p>æ‰€ä»¥,å¦‚æœæƒ³è¦è®¾ç½®å¼€å‘ç¯å¢ƒçš„æ¥å£,ç›´æ¥åœ¨**<code>.env.development</code>**ä¸­å†™å…¥å¯¹äºportå˜é‡çš„èµ‹å€¼å³å¯</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®ç«¯å£å·</span></span><br><span class="line">port = 8888</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚æ³¨æ„</code></strong>:ä¿®æ”¹æœåŠ¡çš„é…ç½®æ–‡ä»¶,æƒ³è¦ç”Ÿæ•ˆçš„è¯,å¿…é¡»è¦é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå€¼â€˜8888â€™åé¢ä¸èƒ½ç•™æœ‰ç©ºæ ¼</p>
<p><strong>ç½‘ç«™åç§°</strong></p>
<p>ç½‘ç«™åç§°å®é™…åœ¨<strong>configureWebpack</strong>é€‰é¡¹ä¸­çš„<strong>name</strong>é€‰é¡¹,é€šè¿‡é˜…è¯»ä»£ç ,æˆ‘ä»¬ä¼šå‘ç°nameå®é™…ä¸Šæ¥æºäºsrcç›®å½•ä¸‹</p>
<p>**<code>settings.js</code>**æ–‡ä»¶</p>
<p>æ‰€ä»¥,æˆ‘ä»¬å¯ä»¥å°†ç½‘ç«™åç§°æ”¹æˆâ€<strong><code>äººåŠ›èµ„æºç®¡ç†å¹³å°</code></strong>â€œ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200710164040042.png" alt="image-20200710164040042"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code></strong>:ä¿®æ”¹æœåŠ¡çš„é…ç½®æ–‡ä»¶,æƒ³è¦ç”Ÿæ•ˆçš„è¯,å¿…é¡»è¦é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå€¼â€˜8888â€™åé¢ä¸èƒ½ç•™æœ‰ç©ºæ ¼</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆç½‘ç«™çš„å¼€å‘æœåŠ¡ç«¯å£è®¾ç½®å’Œç½‘ç«™åç§°è®¾ç½®</p>
<h2 id="ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€"><a href="#ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€" class="headerlink" title="ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€"></a>ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€</h2><p>**<code>ç›®æ ‡</code>**å®Œæˆç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€</p>
<p><strong>é¡µé¢æ•ˆæœ</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200710164517167.png" alt="image-20200710164517167"></p>
<p>é¦–å…ˆè¦å®ç°ä»¥ä¸Šçš„é¡µé¢æ•ˆæœ, æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å½“å‰çš„ç™»å½•é¡µé¢è¿›è¡Œç›¸åº”çš„æ”¹é€ </p>
<p><strong>è®¾ç½®å¤´éƒ¨èƒŒæ™¯</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®æ ‡é¢˜å›¾ç‰‡ @æ˜¯è®¾ç½®çš„åˆ«å--&gt;</span><br><span class="line">&lt;div class="title-container"&gt;</span><br><span class="line">        &lt;h3 class="title"&gt;</span><br><span class="line">          &lt;img src="@/assets/common/login-logo.png" alt=""&gt;</span><br><span class="line">        &lt;/h3&gt;</span><br><span class="line"> &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼š <code>@</code>æ˜¯æˆ‘ä»¬åœ¨vue.config.jsä¸­è®¾ç½®çš„ä¸€ä¸ªè·¯å¾„åˆ«åï¼ŒæŒ‡å®šsrcæ ¹ç›®å½•ï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯»æ‰¾æ–‡ä»¶</p>
<p><strong>è®¾ç½®èƒŒæ™¯å›¾ç‰‡</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* reset element-ui css */</span></span><br><span class="line"><span class="selector-class">.login-container</span> {</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">'~@/assets/common/login.jpg'</span>); // è®¾ç½®èƒŒæ™¯å›¾ç‰‡</span><br><span class="line">  <span class="attribute">background-position</span>: center; // å°†å›¾ç‰‡ä½ç½®è®¾ç½®ä¸ºå……æ»¡æ•´ä¸ªå±å¹•</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼š å¦‚éœ€è¦åœ¨æ ·å¼è¡¨ä¸­ä½¿ç”¨</strong><code>@</code><strong>åˆ«åçš„æ—¶å€™ï¼Œéœ€è¦åœ¨@å‰é¢åŠ ä¸Šä¸€ä¸ª</strong><code>~</code>**ç¬¦å·ï¼Œå¦åˆ™ä¸è¯†åˆ«</p>
<p><strong>è®¾ç½®æ‰‹æœºå·å’Œå¯†ç çš„å­—ä½“é¢œè‰²</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$light_gray: <span class="number">#68b0fe</span>;  // å°†è¾“å…¥æ¡†é¢œè‰²æ”¹æˆè“è‰²</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®è¾“å…¥è¡¨å•æ•´ä½“èƒŒæ™¯è‰²</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.el-form-item</span> {</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.7</span>); // è¾“å…¥ç™»å½•è¡¨å•çš„èƒŒæ™¯è‰²</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#454545</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®é”™è¯¯ä¿¡æ¯çš„é¢œè‰²</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.el-form-item__error</span> {</span><br><span class="line">   <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®ç™»å½•æŒ‰é’®çš„æ ·å¼</strong></p>
<blockquote>
<p>éœ€è¦ç»™el-button å¢åŠ ä¸€ä¸ªloginBtnçš„classæ ·å¼</p>
</blockquote>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.loginBtn</span> {</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#407ffe</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">64px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">32px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¿®æ”¹æ˜¾ç¤ºçš„æç¤ºæ–‡æœ¬å’Œç™»å½•æ–‡æœ¬</strong></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tips"</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"margin-right:20px;"</span>&gt;</span>è´¦å·: 13800000002<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span>&gt;</span> å¯†ç : 123456<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç»è¿‡ä»¥ä¸Šçš„æ”¹åŠ¨, æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„ç™»å½•é¡µé¢</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200711002545085.png" alt="image-20200711002545085"></p>
<blockquote>
<p>è§£é‡Š:æˆ‘ä»¬è¯¥é¡¹ç›®çš„ä¾§é‡ç‚¹åœ¨äºæ›´å¤šçš„ä»‹ç»Vueä¸­å°é¡¹ç›®æ‰€åº”ç”¨çš„æŠ€æœ¯,æ‰€ä»¥å¯¹äºä¸€äº›è¿‡äºç»†èŠ‚çš„æ ·å¼æˆ–è€…å¸ƒå±€,æˆ‘ä»¬é‡‡ç”¨ç›´æ¥ç²˜è´´æˆ–è€…æ‹·è´æˆå‹ä»£ç çš„æ–¹å¼,åŒå­¦ä»¬å¯ä»¥é€šè¿‡è¯¾ä¸‹å¤šå¤šç»ƒä¹ </p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼š <code>@</code>æ˜¯æˆ‘ä»¬åœ¨vue.config.jsä¸­è®¾ç½®çš„ä¸€ä¸ªè·¯å¾„åˆ«åï¼ŒæŒ‡å®šsrcæ ¹ç›®å½•ï¼Œè¿™æ ·å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯»æ‰¾æ–‡ä»¶</p>
<p>**<code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼š å¦‚éœ€è¦åœ¨æ ·å¼è¡¨ä¸­ä½¿ç”¨</strong><code>@</code><strong>åˆ«åçš„æ—¶å€™ï¼Œéœ€è¦åœ¨@å‰é¢åŠ ä¸Šä¸€ä¸ª</strong><code>~</code>**ç¬¦å·ï¼Œå¦åˆ™ä¸è¯†åˆ«</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®Œæˆç™»å½•é¦–é¡µçš„åŸºæœ¬å¸ƒå±€</p>
<h2 id="ç™»å½•è¡¨å•çš„æ ¡éªŒ"><a href="#ç™»å½•è¡¨å•çš„æ ¡éªŒ" class="headerlink" title="ç™»å½•è¡¨å•çš„æ ¡éªŒ"></a>ç™»å½•è¡¨å•çš„æ ¡éªŒ</h2><p>**<code>ç›®æ ‡</code>**å¯¹ç™»å½•è¡¨å•è¿›è¡Œè§„åˆ™æ ¡éªŒ</p>
<blockquote>
<p>åŸºç¡€æ¨¡æ¿å·²ç»æœ‰äº†åŸºç¡€æ ¡éªŒçš„ä»£ç ,æ‰€ä»¥æˆ‘ä»¬è¿™ä¸€ç« èŠ‚æ›´å¤šçš„æ˜¯ä¿®æ­£å’Œå®Œå–„</p>
</blockquote>
<h3 id="el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶"><a href="#el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶" class="headerlink" title="el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶"></a><strong>el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶</strong></h3><p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200830212537835.png" alt="image-20200830212537835"></p>
<h3 id="æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ"><a href="#æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ" class="headerlink" title="æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ"></a>æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ</h3><p><strong>å­—æ®µåå¯¹åº”</strong></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦å¯¹åº”? å› ä¸ºåŸºç¡€æ¨¡æ¿é‡‡ç”¨çš„æ˜¯**<code>username</code><strong>çš„å­—æ®µ,ä½†æ˜¯å®é™…æ¥å£ä¸­é‡‡ç”¨çš„æ˜¯</strong><code>mobile</code><strong>çš„å­—æ®µ,ä¸ºäº†æ›´æ–¹ä¾¿çš„å†™ä»£ç ,æ‰€ä»¥æˆ‘ä»¬å°†</strong><code>username</code><strong>æ”¹æˆ</strong><code>mobile</code>**</p>
</blockquote>
<p>è¿™é‡Œé™¤äº†å­—æ®µåï¼Œè¿˜æœ‰æˆ‘ä»¬çš„è§„åˆ™æ ¡éªŒåç§°ï¼Œä»¥åŠpropåç§°ã€‚</p>
<p><strong>è‹±æ–‡æç¤ºå˜æˆä¸­æ–‡</strong></p>
<p>åŸºç¡€æ¨¡æ¿ä¸­éƒ½æ˜¯<strong>placeHolder</strong>å ä½ç¬¦æ˜¯è‹±æ–‡,è¦å˜æˆä¸­æ–‡</p>
<p>ç™»å½•æŒ‰é’®æ–‡å­—åŒæ ·éœ€è¦æ¢æˆä¸­æ–‡</p>
<p><strong>æ ¡éªŒæ‰‹æœºå·å’Œæ ¡éªŒå¯†ç </strong></p>
<p>åŸºç¡€æ¨¡æ¿ä¸­,å·²ç»åšäº†æ ¡éªŒ,æˆ‘ä»¬é’ˆå¯¹ä»£ç è¿›è¡Œä¸€äº›ä¼˜åŒ–</p>
<p>æ–°è§„åˆ™ï¼šæ‰‹æœºå·å¿…å¡«ï¼Œå¹¶ä¸”è¿›è¡Œæ ¼å¼æ ¡éªŒï¼Œå¯†ç å¿…å¡«ï¼Œé•¿åº¦6-16ä½ä¹‹é—´</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="comment">// è‡ªå®šä¹‰æ ¡éªŒå‡½æ•°</span></span><br><span class="line">   <span class="keyword">const</span> validateMobile = <span class="function"><span class="keyword">function</span>(<span class="params">rule, value, callback</span>) </span>{</span><br><span class="line">     <span class="comment">// æ ¡éªŒvalue</span></span><br><span class="line">     <span class="comment">// if (validMobile(value)) {</span></span><br><span class="line">     <span class="comment">//   // å¦‚æœé€šè¿‡ ç›´æ¥æ‰§è¡Œcallback</span></span><br><span class="line">     <span class="comment">//   callback()</span></span><br><span class="line">     <span class="comment">// } else {</span></span><br><span class="line">     <span class="comment">//   callback(new Error('æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'))</span></span><br><span class="line">     <span class="comment">// }</span></span><br><span class="line">     validMobile(value) ? callback() : callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'</span>))</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> {</span><br><span class="line">     <span class="attr">loginForm</span>: {</span><br><span class="line">       <span class="attr">mobile</span>: <span class="string">'13800000002'</span>,</span><br><span class="line">       <span class="attr">password</span>: <span class="string">'123456'</span></span><br><span class="line">     },</span><br><span class="line">     <span class="attr">loginRules</span>: {</span><br><span class="line">       <span class="attr">mobile</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span>, <span class="attr">message</span>: <span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span> }, {</span><br><span class="line">         <span class="attr">validator</span>: validateMobile, <span class="attr">trigger</span>: <span class="string">'blur'</span></span><br><span class="line">       }],</span><br><span class="line">       <span class="attr">password</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span>, <span class="attr">message</span>: <span class="string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span> }, {</span><br><span class="line">         <span class="attr">min</span>: <span class="number">6</span>, <span class="attr">max</span>: <span class="number">16</span>, <span class="attr">message</span>: <span class="string">'å¯†ç çš„é•¿åº¦åœ¨6-16ä½ä¹‹é—´ '</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span></span><br><span class="line">       }]</span><br><span class="line">     },</span><br><span class="line">     <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">     <span class="attr">passwordType</span>: <span class="string">'password'</span>,</span><br><span class="line">     <span class="attr">redirect</span>: <span class="literal">undefined</span></span><br><span class="line">   }</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬åœ¨**<code>utils/validate.js</code>**æ–¹æ³•ä¸­å¢åŠ äº†ä¸€ä¸ªæ ¡éªŒæ‰‹æœºå·çš„æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¡éªŒæ‰‹æœºå·</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">validMobile</span>(<span class="params">str</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/^1[3-9]\d{9}$/</span>.test(str) <span class="comment">// æ ¡éªŒæ‰‹æœºå·</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>utils/validate.js</code>**æ˜¯ä¸€ä¸ªä¸“é—¨å­˜æ”¾æ ¡éªŒå·¥å…·æ–¹æ³•çš„æ–‡ä»¶</p>
<h3 id="å…³äºä¿®é¥°ç¬¦"><a href="#å…³äºä¿®é¥°ç¬¦" class="headerlink" title="å…³äºä¿®é¥°ç¬¦"></a>å…³äºä¿®é¥°ç¬¦</h3><p><strong>å…³äºä¿®é¥°ç¬¦</strong></p>
<blockquote>
<p>åœ¨è¯¥é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†äº‹ä»¶çš„å‡ ä¸ªä¿®é¥°ç¬¦ <strong><code>@keyup.enter.native</code></strong>  <strong><code>@click.native.prevent</code></strong></p>
</blockquote>
<p>@keyup.**<code>enter</code>**å±äºæŒ‰é”®ä¿®é¥°ç¬¦ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ç›‘å¬åœ¨æŒ‰å›è½¦é”®çš„æ—¶å€™è§¦å‘ï¼Œå¯ä»¥å¦‚ä¸‹ç¼–å†™</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- åªæœ‰åœ¨ `key` æ˜¯ `Enter` æ—¶è°ƒç”¨ `vm.submit()` --&gt;</span><br><span class="line">&lt;input v-on:keyup.enter="submit"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>@keyup.enter.<strong><code>native</code></strong> è¡¨ç¤ºç›‘å¬ç»„ä»¶çš„åŸç”Ÿäº‹ä»¶ï¼Œæ¯”å¦‚ keyupå°±æ˜¯äºinputçš„åŸç”Ÿäº‹ä»¶ï¼Œè¿™é‡Œå†™nativeè¡¨ç¤ºkeyupæ˜¯ä¸€ä¸ªåŸç”Ÿäº‹ä»¶</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®ç°ç™»å½•ç”¨æˆ·çš„æ‰‹æœºå·å’Œå¯†ç æ ¡éªŒ</p>
<h2 id="Vue-Clié…ç½®è·¨åŸŸä»£ç†"><a href="#Vue-Clié…ç½®è·¨åŸŸä»£ç†" class="headerlink" title="Vue-Clié…ç½®è·¨åŸŸä»£ç†"></a>Vue-Clié…ç½®è·¨åŸŸä»£ç†</h2><p><strong><code>ç›®æ ‡</code></strong>: é€šè¿‡é…ç½®vue-cliçš„ä»£ç†è§£å†³è·¨åŸŸè®¿é—®çš„é—®é¢˜</p>
<h3 id="ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ"></a>ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ</h3><p>å½“ä¸‹,æœ€æµè¡Œçš„å°±æ˜¯**<code>å‰ååˆ†ç¦»</code><strong>é¡¹ç›®,ä¹Ÿå°±æ˜¯</strong><code>å‰ç«¯é¡¹ç›®</code><strong>å’Œ</strong><code>åç«¯æ¥å£</code><strong>å¹¶ä¸åœ¨ä¸€ä¸ªåŸŸåä¹‹ä¸‹ï¼Œé‚£ä¹ˆå‰ç«¯é¡¹ç›®è®¿é—®åç«¯æ¥å£å¿…ç„¶å­˜åœ¨</strong><code>è·¨åŸŸ</code>**çš„è¡Œä¸º.</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200826110754199.png" alt="image-20200826110754199"></p>
<blockquote>
<p>æ€ä¹ˆè§£å†³è¿™ç§è·¨åŸŸ ï¼Ÿ</p>
</blockquote>
<p><strong><code>è¯·æ³¨æ„</code><strong>ï¼Œæˆ‘ä»¬æ‰€é‡åˆ°çš„è¿™ç§è·¨åŸŸæ˜¯ä½äº</strong>å¼€å‘ç¯å¢ƒ</strong>çš„ï¼ŒçœŸæ­£éƒ¨ç½²ä¸Šçº¿æ—¶çš„è·¨åŸŸæ˜¯<strong>ç”Ÿäº§ç¯å¢ƒ</strong>çš„</p>
<h3 id="è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜"><a href="#è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜" class="headerlink" title="è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜"></a>è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜</h3><p><strong>å¼€å‘ç¯å¢ƒçš„è·¨åŸŸ</strong></p>
<p>å¼€å‘ç¯å¢ƒçš„è·¨åŸŸï¼Œä¹Ÿå°±æ˜¯åœ¨**<code>vue-cliè„šæ‰‹æ¶ç¯å¢ƒ</code><strong>ä¸‹å¼€å‘å¯åŠ¨æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬è®¿é—®æ¥å£æ‰€é‡åˆ°çš„è·¨åŸŸé—®é¢˜ï¼Œvue-cliä¸ºæˆ‘ä»¬åœ¨æœ¬åœ°</strong><code>å¼€å¯äº†ä¸€ä¸ªæœåŠ¡</code><strong>,å¯ä»¥é€šè¿‡è¿™ä¸ªæœåŠ¡å¸®æˆ‘ä»¬</strong><code>ä»£ç†è¯·æ±‚</code>**,è§£å†³è·¨åŸŸé—®é¢˜</p>
<p>è¿™å°±æ˜¯vue-clié…ç½®<strong>webpackçš„åå‘ä»£ç†</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200811022013103.png" alt="image-20200811022013103"></p>
<blockquote>
<p>é‡‡ç”¨vue-cliçš„ä»£ç†é…ç½®</p>
</blockquote>
<p>vue-cliçš„é…ç½®æ–‡ä»¶å³**<code>vue.config.js</code>**,è¿™é‡Œæœ‰æˆ‘ä»¬éœ€è¦çš„ <a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/config/#devserver-proxy">ä»£ç†é€‰é¡¹</a></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">devServer</span>: {</span><br><span class="line">   <span class="comment">// ä»£ç†é…ç½®</span></span><br><span class="line">    <span class="attr">proxy</span>: {</span><br><span class="line">        <span class="comment">// è¿™é‡Œçš„api è¡¨ç¤ºå¦‚æœæˆ‘ä»¬çš„è¯·æ±‚åœ°å€æœ‰/apiçš„æ—¶å€™,å°±å‡ºè§¦å‘ä»£ç†æœºåˆ¶</span></span><br><span class="line">        <span class="comment">// localhost:8888/api/abc  =&gt; ä»£ç†ç»™å¦ä¸€ä¸ªæœåŠ¡å™¨</span></span><br><span class="line">        <span class="comment">// æœ¬åœ°çš„å‰ç«¯  =ã€‹ æœ¬åœ°çš„åç«¯  =ã€‹ ä»£ç†æˆ‘ä»¬å‘å¦ä¸€ä¸ªæœåŠ¡å™¨å‘è¯·æ±‚ ï¼ˆè¡Œå¾—é€šï¼‰</span></span><br><span class="line">        <span class="comment">// æœ¬åœ°çš„å‰ç«¯  =ã€‹ å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨å‘è¯·æ±‚ ï¼ˆè·¨åŸŸ è¡Œä¸é€šï¼‰</span></span><br><span class="line">        <span class="string">'/api'</span>: {</span><br><span class="line">        <span class="attr">target</span>: <span class="string">'www.baidu.com'</span>, <span class="comment">// æˆ‘ä»¬è¦ä»£ç†çš„åœ°å€</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è·¨åŸŸ éœ€è¦è®¾ç½®æ­¤å€¼ä¸ºtrue æ‰å¯ä»¥è®©æœ¬åœ°æœåŠ¡ä»£ç†æˆ‘ä»¬å‘å‡ºè¯·æ±‚</span></span><br><span class="line">         <span class="comment">// è·¯å¾„é‡å†™</span></span><br><span class="line">        <span class="attr">pathRewrite</span>: {</span><br><span class="line">            <span class="comment">// é‡æ–°è·¯ç”±  localhost:8888/api/login  =&gt; www.baidu.com/api/login</span></span><br><span class="line">            <span class="string">'^/api'</span>: <span class="string">''</span> <span class="comment">// å‡è®¾æˆ‘ä»¬æƒ³æŠŠ localhost:8888/api/login å˜æˆwww.baidu.com/login å°±éœ€è¦è¿™ä¹ˆåš </span></span><br><span class="line">        }</span><br><span class="line">      },</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šå°±æ˜¯æˆ‘ä»¬åœ¨vue-clié¡¹ç›®ä¸­é…ç½®çš„ä»£ç†è®¾ç½®</p>
<blockquote>
<p>æ¥ä¸‹æ¥,æˆ‘ä»¬åœ¨ä»£ç ä¸­å°†è¦ä»£ç†çš„åç«¯åœ°å€å˜æˆ <a target="_blank" rel="noopener" href="http://ihrm-java.itheima.net/">åç«¯æ¥å£åœ°å€</a></p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»£ç†è·¨åŸŸçš„é…ç½®</span></span><br><span class="line">   <span class="attr">proxy</span>: {</span><br><span class="line">     <span class="comment">// å½“æˆ‘ä»¬çš„æœ¬åœ°çš„è¯·æ±‚ æœ‰/apiçš„æ—¶å€™ï¼Œå°±ä¼šä»£ç†æˆ‘ä»¬çš„è¯·æ±‚åœ°å€å‘å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨å‘å‡ºè¯·æ±‚</span></span><br><span class="line">     <span class="string">'/api'</span>: {</span><br><span class="line">       <span class="attr">target</span>: <span class="string">'http://ihrm-java.itheima.net/'</span>, <span class="comment">// è·¨åŸŸè¯·æ±‚çš„åœ°å€</span></span><br><span class="line">       <span class="attr">changeOrigin</span>: <span class="literal">true</span> <span class="comment">// åªæœ‰è¿™ä¸ªå€¼ä¸ºtrueçš„æƒ…å†µä¸‹ æ‰è¡¨ç¤ºå¼€å¯è·¨åŸŸ</span></span><br><span class="line">     }</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰è¿›è¡Œ</strong><code>pathRewrite</code></strong>,å› ä¸ºåç«¯æ¥å£å°±æ˜¯**<code>ihrm-java.itheima.net/api</code>**è¿™ç§æ ¼å¼,æ‰€ä»¥ä¸éœ€è¦é‡å†™</p>
<p>**<code>vue.config.js</code>**çš„æ”¹åŠ¨å¦‚æœè¦ç”Ÿæ•ˆ,éœ€è¦è¿›è¡Œé‡å¯æœåŠ¡</p>
<p>åŒæ—¶ï¼Œè¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åŒæ—¶éœ€è¦æ³¨é‡Šæ‰ mockçš„åŠ è½½ï¼Œå› ä¸ºmock-serverä¼šå¯¼è‡´ä»£ç†æœåŠ¡çš„å¼‚å¸¸</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// before: require('./mock/mock-server.js'),  // æ³¨é‡Šmock-serveråŠ è½½</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç”Ÿäº§ç¯å¢ƒçš„è·¨åŸŸ</strong></p>
<p>ç”Ÿäº§ç¯å¢ƒè¡¨ç¤ºæˆ‘ä»¬å·²ç»å¼€å‘å®Œæˆé¡¹ç›®ï¼Œå°†é¡¹ç›®éƒ¨ç½²åˆ°äº†æœåŠ¡å™¨ä¸Š,è¿™æ—¶å·²ç»æ²¡æœ‰äº†vue-cliè„šæ‰‹æ¶çš„**<code>è¾…åŠ©</code><strong>äº†ï¼Œæˆ‘ä»¬åªæ˜¯æŠŠæ‰“åŒ…å¥½çš„</strong><code>html+js+css</code><strong>äº¤ä»˜è¿ç»´äººå‘˜ï¼Œæ”¾åˆ°</strong><code>Nginx</code><strong>æœåŠ¡å™¨è€Œå·²,æ‰€ä»¥æ­¤æ—¶éœ€è¦å€ŸåŠ©</strong><code>Nginx</code>**çš„åå‘ä»£ç†æ¥è¿›è¡Œ</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server{</span><br><span class="line">    <span class="comment"># ç›‘å¬9099ç«¯å£</span></span><br><span class="line">    listen 9099;</span><br><span class="line">    <span class="comment"># æœ¬åœ°çš„åŸŸåæ˜¯localhost</span></span><br><span class="line">    server_name localhost;</span><br><span class="line">    <span class="comment">#å‡¡æ˜¯localhost:9099/apiè¿™ä¸ªæ ·å­çš„ï¼Œéƒ½è½¬å‘åˆ°çœŸæ­£çš„æœåŠ¡ç«¯åœ°å€http://baidu.com</span></span><br><span class="line">    location ^~ /api {</span><br><span class="line">        proxy_pass http://baidu.com;</span><br><span class="line">    }    </span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æ³¨æ„</code></strong>:è¿™é‡Œçš„æ“ä½œä¸€èˆ¬ç”±è¿ç»´äººå‘˜å®Œæˆ,éœ€è¦å‰ç«¯è¿›è¡Œæ“ä½œ,è¿™é‡Œæˆ‘ä»¬è¿›è¡Œä¸€ä¸‹ç®€å•äº†è§£</p>
<p>æ›´å¤šæ­£å‘ä»£ç†å’Œåå‘ä»£ç†çŸ¥è¯†,è¯·é˜…è¯»è¿™ç¯‡æ–‡ç« <a target="_blank" rel="noopener" href="https://www.cnblogs.com/ysocean/p/9392908.html">Nginxåå‘ä»£ç†</a></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šæˆ‘ä»¬å¹¶æ²¡æœ‰è¿›è¡Œ</strong><code>pathRewrite</code></strong>,å› ä¸ºåç«¯æ¥å£å°±æ˜¯**<code>ihrm-java.itheima.net/api</code>**è¿™ç§æ ¼å¼,æ‰€ä»¥ä¸éœ€è¦é‡å†™</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š é…ç½®vue-cliçš„åå‘ä»£ç†ï¼Œå®ç°åç«¯æ¥å£çš„è·¨åŸŸè®¿é—®</p>
<h2 id="å°è£…å•ç‹¬çš„ç™»å½•æ¥å£"><a href="#å°è£…å•ç‹¬çš„ç™»å½•æ¥å£" class="headerlink" title="å°è£…å•ç‹¬çš„ç™»å½•æ¥å£"></a>å°è£…å•ç‹¬çš„ç™»å½•æ¥å£</h2><p><strong><code>ç›®æ ‡</code></strong> åœ¨å•ç‹¬è¯·æ±‚æ¨¡å—ä¸­,å•ç‹¬å°è£…ç™»å½•æ¥å£</p>
<blockquote>
<p>å®Œæˆç™»å½•æ¨¡å—ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç™»å½•æ¥å£è¿›è¡Œå°è£…</p>
</blockquote>
<p>é¦–å…ˆï¼ŒæŸ¥é˜…æ¥å£æ–‡æ¡£ä¸­çš„ç™»å½•æ¥å£</p>
<blockquote>
<p>åŸºç¡€æ¨¡æ¿å·²ç»æœ‰äº†åŸæ¥çš„ç™»å½•ä»£ç ,æˆ‘ä»¬åªéœ€è¦è¿›è¡Œç®€å•çš„æ”¹é€ å³å¯</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="comment">// è¿”å›ä¸€ä¸ªaxioså¯¹è±¡ =&gt; promise  // è¿”å›äº†ä¸€ä¸ªpromiseå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/login'</span>, <span class="comment">// å› ä¸ºæ‰€æœ‰çš„æ¥å£éƒ½è¦è·¨åŸŸ è¡¨ç¤ºæ‰€æœ‰çš„æ¥å£è¦å¸¦ /api</span></span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚å›¾</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812002834804.png" alt="image-20200812002834804"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå°è£…å•ç‹¬çš„ç™»å½•æ¥å£</p>
<h2 id="å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token"><a href="#å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token" class="headerlink" title="å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token"></a>å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token</h2><p>**<code>ç›®æ ‡</code>**åœ¨vuexä¸­å°è£…ç™»å½•çš„action,å¹¶å¤„ç†token</p>
<blockquote>
<p>åœ¨è¿™ä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨vuexä¸­åŠ å…¥å¯¹äºç”¨æˆ·çš„ç™»å½•çš„å¤„ç†</p>
</blockquote>
<h3 id="åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†"><a href="#åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†" class="headerlink" title="åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†"></a>åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†</h3><p>åœ¨ä¼ ç»Ÿæ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ç™»å½•çš„é€»è¾‘å¾ˆç®€å•ï¼Œå¦‚å›¾</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812003821680.png" alt="image-20200812003821680"></p>
<blockquote>
<p>ä¸Šå›¾ä¸­ï¼Œç»„ä»¶ç›´æ¥å’Œæ¥å£æ‰“äº¤é“ï¼Œè¿™å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¯¹äºç”¨æˆ·tokenè¿™ä¸€é«˜é¢‘ä½¿ç”¨çš„**<code>é’¥åŒ™</code>**ï¼Œæˆ‘ä»¬éœ€è¦è®©vuexæ¥ä»‹å…¥ï¼Œå°†ç”¨æˆ·çš„tokençŠ¶æ€å…±äº«ï¼Œæ›´æ–¹ä¾¿çš„è¯»å–ï¼Œå¦‚å›¾</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812011826021.png" alt="image-20200812011826021"></p>
<p><strong>å®ç°store/modules/user.jsåŸºæœ¬é…ç½®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> state = {}</span><br><span class="line"><span class="comment">// ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> mutations = {}</span><br><span class="line"><span class="comment">// æ‰§è¡Œå¼‚æ­¥</span></span><br><span class="line"><span class="keyword">const</span> actions = {}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®tokençš„å…±äº«çŠ¶æ€</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = {</span><br><span class="line">  <span class="attr">token</span>: <span class="literal">null</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬éœ€è¦çŸ¥é“,**<code>é’¥åŒ™</code>**ä¸èƒ½æ¯æ¬¡éƒ½é€šè¿‡ç™»å½•è·å–,æˆ‘ä»¬å¯ä»¥å°†tokenæ”¾ç½®åˆ°æœ¬åœ°çš„ç¼“å­˜ä¸­</p>
</blockquote>
<p>åœ¨**<code>utils/auth.js</code><strong>ä¸­,åŸºç¡€æ¨¡æ¿å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†</strong><code>è·å–token</code><strong>,</strong><code>è®¾ç½®token</code><strong>,</strong><code>åˆ é™¤token</code>**çš„æ–¹æ³•,å¯ä»¥ç›´æ¥ä½¿ç”¨</p>
<p>åªéœ€è¦å°†å­˜å‚¨çš„keyæ”¾ç½®æˆç‰¹å®šå€¼å³å¯</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Cookies <span class="keyword">from</span> <span class="string">'js-cookie'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> TokenKey = <span class="string">'hrsaas-ihrm-token'</span> <span class="comment">// è®¾å®šä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„key</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getToken</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> Cookies.get(TokenKey)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setToken</span>(<span class="params">token</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> Cookies.set(TokenKey, token)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">removeToken</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> Cookies.remove(TokenKey)</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆå§‹åŒ–tokençŠ¶æ€</strong> - <strong><code>store/modules/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getToken, setToken, removeToken } <span class="keyword">from</span> <span class="string">'@/utils/auth'</span></span><br><span class="line"><span class="comment">// çŠ¶æ€</span></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–çš„æ—¶å€™ä»ç¼“å­˜ä¸­è¯»å–çŠ¶æ€ å¹¶èµ‹å€¼åˆ°åˆå§‹åŒ–çš„çŠ¶æ€ä¸Š</span></span><br><span class="line"><span class="comment">// Vuexçš„æŒä¹…åŒ– å¦‚ä½•å®ç° ï¼Ÿ Vuexå’Œå‰ç«¯ç¼“å­˜ç›¸ç»“åˆ</span></span><br><span class="line"><span class="keyword">const</span> state = {</span><br><span class="line">  <span class="attr">token</span>: getToken() <span class="comment">// è®¾ç½®tokenåˆå§‹çŠ¶æ€   tokenæŒä¹…åŒ– =&gt; æ”¾åˆ°ç¼“å­˜ä¸­</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æä¾›ä¿®æ”¹tokençš„mutations</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹çŠ¶æ€</span></span><br><span class="line"><span class="keyword">const</span> mutations = {</span><br><span class="line">  <span class="comment">// è®¾ç½®token</span></span><br><span class="line">  <span class="function"><span class="title">setToken</span>(<span class="params">state, token</span>)</span> {</span><br><span class="line">    state.token = token <span class="comment">// è®¾ç½®token  åªæ˜¯ä¿®æ”¹stateçš„æ•°æ®  123 =ã€‹ 1234</span></span><br><span class="line">    <span class="comment">// vuexå˜åŒ– =&gt; ç¼“å­˜æ•°æ®</span></span><br><span class="line">    setToken(token) <span class="comment">// vuexå’Œ ç¼“å­˜æ•°æ®çš„åŒæ­¥</span></span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// åˆ é™¤ç¼“å­˜</span></span><br><span class="line">  <span class="function"><span class="title">removeToken</span>(<span class="params">state</span>)</span> {</span><br><span class="line">    state.token = <span class="literal">null</span> <span class="comment">// åˆ é™¤vuexçš„token</span></span><br><span class="line">    removeToken() <span class="comment">// å…ˆæ¸…é™¤ vuex  å†æ¸…é™¤ç¼“å­˜ vuexå’Œ ç¼“å­˜æ•°æ®çš„åŒæ­¥</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å°è£…ç™»å½•çš„Action"><a href="#å°è£…ç™»å½•çš„Action" class="headerlink" title="å°è£…ç™»å½•çš„Action"></a>å°è£…ç™»å½•çš„Action</h3><p><strong>å°è£…ç™»å½•çš„action</strong></p>
<blockquote>
<p>ç™»å½•actionè¦åšçš„äº‹æƒ…,<strong><code>è°ƒç”¨ç™»å½•æ¥å£</code></strong>,<strong><code>æˆåŠŸåè®¾ç½®tokenåˆ°vuex</code></strong>,<strong><code>å¤±è´¥åˆ™è¿”å›å¤±è´¥</code></strong></p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‰§è¡Œå¼‚æ­¥</span></span><br><span class="line"><span class="keyword">const</span> actions = {</span><br><span class="line">  <span class="comment">// å®šä¹‰login action  ä¹Ÿéœ€è¦å‚æ•° è°ƒç”¨actionæ—¶ ä¼ é€’è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">login</span>(<span class="params">context, data</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> login(data) <span class="comment">// å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªpromise  resultå°±æ˜¯æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">    <span class="comment">// axiosé»˜è®¤ç»™æ•°æ®åŠ äº†ä¸€å±‚data</span></span><br><span class="line">    <span class="keyword">if</span> (result.data.success) {</span><br><span class="line">      <span class="comment">// è¡¨ç¤ºç™»å½•æ¥å£è°ƒç”¨æˆåŠŸ ä¹Ÿå°±æ˜¯æ„å‘³ç€ä½ çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">      <span class="comment">// ç°åœ¨æœ‰ç”¨æˆ·token</span></span><br><span class="line">      <span class="comment">// actions ä¿®æ”¹state å¿…é¡»é€šè¿‡mutations</span></span><br><span class="line">      context.commit(<span class="string">'setToken'</span>, result.data.data)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šè¿°ä»£ç ä¸­,æˆ‘ä»¬ä½¿ç”¨äº†**<code>async/await</code><strong>è¯­æ³•,å¦‚æœç”¨</strong><code>then</code>**è¯­æ³•ä¹Ÿæ˜¯å¯ä»¥çš„</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// ä¸ºä»€ä¹ˆasync/await ä¸ç”¨è¿”å›new Promise,å› ä¸º asyncå‡½æ•°æœ¬èº«å°±æ˜¯ Promise,promiseçš„å€¼è¿”å›çš„å€¼  </span></span><br><span class="line"><span class="function"><span class="title">login</span>(<span class="params">context, data</span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>) </span>{</span><br><span class="line">      login(data).then(<span class="function"><span class="params">result</span> =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (result.data.success) {</span><br><span class="line">          context.commit(<span class="string">'setToken'</span>,  result.data.data) <span class="comment">// æäº¤mutationsè®¾ç½®token</span></span><br><span class="line">          resolve()  <span class="comment">// è¡¨ç¤ºæ‰§è¡ŒæˆåŠŸäº†</span></span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    })</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä»¥ä¸Šä¸¤ç§å†™æ³•éƒ½æ˜¯OKçš„,æˆ‘ä»¬åœ¨é¡¹ç›®ç ”å‘è¿‡ç¨‹ä¸­,å°½å¯èƒ½çš„é‡‡ç”¨å‰ä¸€ç§</p>
</blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œä¸ºäº†æ›´å¥½çš„è®©å…¶ä»–æ¨¡å—å’Œç»„ä»¶æ›´å¥½çš„è·å–tokenæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨**<code>store/getters.js</code>**ä¸­å°†tokenå€¼ä½œä¸ºå…¬å…±çš„è®¿é—®å±æ€§æ”¾å‡º</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = {</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.sidebar,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.device,</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.token <span class="comment">// åœ¨æ ¹çº§çš„gettersä¸Š å¼€å‘å­æ¨¡å—çš„å±æ€§ç»™åˆ«äººçœ‹ ç»™åˆ«äººç”¨</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<blockquote>
<p>é€šè¿‡æœ¬èŠ‚å†…å®¹ï¼Œæˆ‘ä»¬è¦æŒæ¡åœ¨Vuexä¸­å¦‚ä½•æ¥ç®¡ç†å…±äº«çŠ¶æ€</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200826145500269.png" alt="image-20200826145500269"></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token</p>
<h2 id="requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†"><a href="#requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†" class="headerlink" title="requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†"></a>requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†</h2><p>**<code>ç›®æ ‡</code>**è®¾ç½®requestç¯å¢ƒå˜é‡å’Œå¼‚å¸¸å¤„ç†</p>
<h3 id="åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€"><a href="#åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€" class="headerlink" title="åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€"></a>åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€</h3><blockquote>
<p>ä¸ºä»€ä¹ˆä¼šæœ‰ç¯å¢ƒå˜é‡ä¹‹åˆ†? å¦‚å›¾</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200826150136697.png" alt="image-20200826150136697"></p>
<blockquote>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œå¼€å‘ç¯å¢ƒå®é™…ä¸Šå°±æ˜¯åœ¨è‡ªå·±çš„æœ¬åœ°å¼€å‘æˆ–è€…è¦æ±‚ä¸é‚£ä¹ˆé«˜çš„ç¯å¢ƒï¼Œä½†æ˜¯ä¸€æ—¦è¿›å…¥ç”Ÿäº§ï¼Œå°±æ˜¯**<code>çœŸå®çš„æ•°æ®</code>**ã€‚ æ‹¿é“¶è¡Œä½œæ¯”å–»ï¼Œå¦‚æœä½ åœ¨å¼€å‘ç¯å¢ƒæ‹¿ç”Ÿäº§ç¯å¢ƒçš„æ¥å£åšæµ‹è¯•ï¼Œé“¶è¡Œç³»ç»Ÿå°±ä¼šå‘ç”Ÿå¾ˆå¤§çš„é£é™©ã€‚</p>
</blockquote>
<p>å‰ç«¯ä¸»è¦åŒºåˆ†ä¸¤ä¸ªç¯å¢ƒ,<strong><code>å¼€å‘ç¯å¢ƒ</code></strong>,<strong><code>ç”Ÿäº§ç¯å¢ƒ</code></strong></p>
<blockquote>
<p> ä¹Ÿå°±æ˜¯ä¸¤ä¸ªç¯å¢ƒå‘å‡ºçš„è¯·æ±‚åœ°å€æ˜¯ä¸åŒçš„ï¼Œç”¨ä»€ä¹ˆåŒºåˆ†å‘¢?</p>
</blockquote>
<p><strong>ç¯å¢ƒå˜é‡</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ process.env.NODE_ENV <span class="comment"># å½“ä¸ºproductionæ—¶ä¸ºç”Ÿäº§ç¯å¢ƒ ä¸ºdevelopmentæ—¶ä¸ºå¼€å‘ç¯å¢ƒ</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¯å¢ƒæ–‡ä»¶</strong></p>
<p> æˆ‘ä»¬å¯ä»¥åœ¨**<code>.env.development</code><strong>å’Œ</strong><code>.env.production</code>**å®šä¹‰å˜é‡ï¼Œå˜é‡è‡ªåŠ¨å°±ä¸ºå½“å‰ç¯å¢ƒçš„å€¼</p>
<p>åŸºç¡€æ¨¡æ¿åœ¨ä»¥ä¸Šæ–‡ä»¶å®šä¹‰äº†å˜é‡**<code>VUE_APP_BASE_API</code><strong>ï¼Œè¯¥å˜é‡å¯ä»¥ä½œä¸ºaxiosè¯·æ±‚çš„</strong><code>baseURL</code>**</p>
<p>æˆ‘ä»¬ä¼šå‘ç°,åœ¨æ¨¡æ¿ä¸­,ä¸¤ä¸ªå€¼åˆ†åˆ«ä¸º**<code>/dev-api</code><strong>å’Œ</strong><code>/prod-api</code>**</p>
<p>ä½†æ˜¯æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒä»£ç†æ˜¯**<code>/api</code>**ï¼Œæ‰€ä»¥å¯ä»¥ç»Ÿä¸€ä¸‹</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å‘ç¯å¢ƒçš„åŸºç¡€åœ°å€å’Œä»£ç†å¯¹åº”</span></span><br><span class="line">VUE_APP_BASE_API = <span class="string">'/api'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™é‡Œé…ç½®äº†/api,æ„å‘³ç€éœ€è¦åœ¨NginxæœåŠ¡å™¨ä¸Šä¸ºè¯¥æœåŠ¡é…ç½® nginxçš„åå‘ä»£ç†å¯¹åº”/prod-apiçš„åœ°å€ </span></span><br><span class="line">VUE_APP_BASE_API = <span class="string">'/prod-api'</span>  </span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼šæˆ‘ä»¬è¿™é‡Œç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒè®¾ç½®äº†ä¸åŒçš„å€¼ï¼Œåç»­æˆ‘ä»¬è¿˜ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²çš„æ—¶å€™ï¼Œå»é…ç½®è¯¥å€¼æ‰€å¯¹åº”çš„åå‘ä»£ç†ï¼Œåå‘ä»£ç†æŒ‡å‘å“ªä¸ªåœ°å€ï¼Œå®Œå…¨ç”±æˆ‘ä»¬è‡ªå·±å†³å®šï¼Œä¸ä¼šå’Œå¼€å‘ç¯å¢ƒå†²çª</p>
<p><strong>åœ¨requestä¸­è®¾ç½®baseUrl</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> service = axios.create({</span><br><span class="line">  <span class="comment">// å¦‚æœæ‰§è¡Œ npm run dev  å€¼ä¸º /api æ­£ç¡®  /api è¿™ä¸ªä»£ç†åªæ˜¯ç»™å¼€å‘ç¯å¢ƒé…ç½®çš„ä»£ç†</span></span><br><span class="line">  <span class="comment">// å¦‚æœæ‰§è¡Œ npm run build å€¼ä¸º /prod-api  æ²¡å…³ç³»  è¿ç»´åº”è¯¥åœ¨ä¸Šçº¿çš„æ—¶å€™ ç»™ä½ é…ç½®ä¸Š /prod-apiçš„ä»£ç†</span></span><br><span class="line">  <span class="attr">baseURL</span>: process.env.VUE_APP_BASE_API, <span class="comment">// è®¾ç½®axiosè¯·æ±‚çš„åŸºç¡€çš„åŸºç¡€åœ°å€</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span> <span class="comment">// å®šä¹‰5ç§’è¶…æ—¶</span></span><br><span class="line">}) <span class="comment">// åˆ›å»ºä¸€ä¸ªaxiosçš„å®ä¾‹</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨"><a href="#å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨" class="headerlink" title="å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨"></a>å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨</h3><blockquote>
<p>OKï¼Œé™¤æ­¤ä¹‹å¤–,axiosè¿”å›çš„æ•°æ®ä¸­é»˜è®¤å¢åŠ äº†ä¸€å±‚**<code>dataçš„åŒ…è£¹</code>**,æˆ‘ä»¬éœ€è¦åœ¨è¿™é‡Œå¤„ç†ä¸‹</p>
</blockquote>
<blockquote>
<p>å¹¶ä¸”,äººèµ„é¡¹ç›®çš„æ¥å£,å¦‚æœæ‰§è¡Œå¤±è´¥,åªæ˜¯è®¾ç½®äº†**<code>success</code><strong>ä¸º</strong><code>false</code>**ï¼Œå¹¶æ²¡æœ‰rejectï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¹¶å¤„ç†ä¸‹</p>
</blockquote>
<p>å¤„ç†é€»è¾‘å¦‚å›¾</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812020656210.png" alt="image-20200812020656210"></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use(<span class="function"><span class="params">response</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// axiosé»˜è®¤åŠ äº†ä¸€å±‚data</span></span><br><span class="line">  <span class="keyword">const</span> { success, message, data } = response.data</span><br><span class="line">  <span class="comment">//   è¦æ ¹æ®successçš„æˆåŠŸä¸å¦å†³å®šä¸‹é¢çš„æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (success) {</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å·²ç»é”™è¯¯äº† è¿˜èƒ½è¿›then ? ä¸èƒ½ ï¼ åº”è¯¥è¿›catch</span></span><br><span class="line">    Message.error(message) <span class="comment">// æç¤ºé”™è¯¯æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(message))</span><br><span class="line">  }</span><br><span class="line">}, <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  Message.error(error.message) <span class="comment">// æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error) <span class="comment">// è¿”å›æ‰§è¡Œé”™è¯¯ è®©å½“å‰çš„æ‰§è¡Œé“¾è·³å‡ºæˆåŠŸ ç›´æ¥è¿›å…¥ catch</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ—¢ç„¶åœ¨requestä¸­å·²ç»é»˜è®¤å»é™¤äº†ä¸€å±‚dataçš„å¤–è¡£ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå°†ä¸ŠèŠ‚loginçš„actionè¿›è¡Œä¸€ä¸‹æ”¹åŠ¨</p>
</blockquote>
<p><strong>å¤„ç†ç™»å½•çš„è¿”å›ç»“æ„é—®é¢˜</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">login</span>(<span class="params">context, data</span>)</span> {</span><br><span class="line">  <span class="comment">// ç»è¿‡å“åº”æ‹¦æˆªå™¨çš„å¤„ç†ä¹‹å è¿™é‡Œçš„resultå®é™…ä¸Šå°±æ˜¯ token</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> login(data) <span class="comment">// å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªpromise  resultå°±æ˜¯æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">  <span class="comment">// axiosé»˜è®¤ç»™æ•°æ®åŠ äº†ä¸€å±‚data</span></span><br><span class="line">  <span class="comment">// è¡¨ç¤ºç™»å½•æ¥å£è°ƒç”¨æˆåŠŸ ä¹Ÿå°±æ˜¯æ„å‘³ç€ä½ çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">  <span class="comment">// ç°åœ¨æœ‰ç”¨æˆ·token</span></span><br><span class="line">  <span class="comment">// actions ä¿®æ”¹state å¿…é¡»é€šè¿‡mutations</span></span><br><span class="line">  context.commit(<span class="string">'setToken'</span>, result)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®Œæˆrequestç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†</p>
<h2 id="ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action-å¤„ç†å¼‚å¸¸"><a href="#ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action-å¤„ç†å¼‚å¸¸" class="headerlink" title="ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action,å¤„ç†å¼‚å¸¸"></a>ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action,å¤„ç†å¼‚å¸¸</h2><p><strong><code>ç›®æ ‡</code></strong> è°ƒç”¨vuexä¸­çš„ç™»å½•action,å¹¶è·³è½¬åˆ°ä¸»é¡µ</p>
<blockquote>
<p>æŒ‰ç…§å¦‚å›¾çš„ä¸šåŠ¡é€»è¾‘ï¼ŒæŠŠå‰©ä¸‹çš„å†…å®¹åœ¨ç™»å½•é¡µé¢å¼•å…¥</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812011826021.png" alt="image-20200812011826021"></p>
<p><strong>å¼•å…¥actionsè¾…åŠ©å‡½æ•°</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapActions } <span class="keyword">from</span> <span class="string">'vuex'</span>  <span class="comment">// å¼•å…¥vuexçš„è¾…åŠ©å‡½æ•°</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¼•å…¥actionæ–¹æ³•</strong></p>
<blockquote>
<p>æ­¤å¤„ï¼Œæˆ‘ä»¬é‡‡ç”¨ç›´æ¥å¼•å…¥æ¨¡å—actionçš„æ–¹å¼ï¼Œåé¢æˆ‘ä»¬é‡‡ç”¨åˆ†æ¨¡å—çš„å¼•ç”¨æ–¹å¼</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">methods: {</span><br><span class="line">    ...mapActions([<span class="string">'user/login'</span>])</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è°ƒç”¨ç™»å½•</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$refs.loginForm.validate(<span class="keyword">async</span> isOK =&gt; {</span><br><span class="line">      <span class="keyword">if</span> (isOK) {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">          <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">          <span class="comment">// åªæœ‰æ ¡éªŒé€šè¿‡äº† æˆ‘ä»¬æ‰å»è°ƒç”¨action</span></span><br><span class="line">          <span class="keyword">await</span> <span class="built_in">this</span>[<span class="string">'user/login'</span>](<span class="built_in">this</span>.loginForm)</span><br><span class="line">          <span class="comment">// åº”è¯¥ç™»å½•æˆåŠŸä¹‹å</span></span><br><span class="line">          <span class="comment">// asyncæ ‡è®°çš„å‡½æ•°å®é™…ä¸Šä¸€ä¸ªpromiseå¯¹è±¡</span></span><br><span class="line">          <span class="comment">// awaitä¸‹é¢çš„ä»£ç  éƒ½æ˜¯æˆåŠŸæ‰§è¡Œçš„ä»£ç </span></span><br><span class="line">          <span class="built_in">this</span>.$router.push(<span class="string">'/'</span>)</span><br><span class="line">        } <span class="keyword">catch</span> (error) {</span><br><span class="line">          <span class="built_in">console</span>.log(error)</span><br><span class="line">        } <span class="keyword">finally</span> {</span><br><span class="line">          <span class="comment">//  ä¸è®ºæ‰§è¡Œtry è¿˜æ˜¯catch  éƒ½å»å…³é—­è½¬åœˆ</span></span><br><span class="line">          <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    })</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šæˆ‘ä»¬è°ƒç”¨çš„æ˜¯Vuexä¸­å­æ¨¡å—çš„actionï¼Œè¯¥æ¨¡å—æˆ‘ä»¬è¿›è¡Œäº†namespaced: trueï¼Œæ‰€ä»¥å¼•ç”¨acitonæ—¶éœ€è¦å¸¦ä¸Š</strong><code>user/</code></strong>, å¹¶ä¸”åœ¨ä½¿ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œç›´æ¥ä½¿ç”¨ <strong><code>this['user/login']</code></strong>, ä½¿ç”¨this.user/login è¯­æ³•æ˜¯é”™è¯¯çš„</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šç™»å½•é¡µé¢è°ƒç”¨ç™»å½•actionï¼Œå¤„ç†å¼‚å¸¸</p>
<h2 id="ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†"><a href="#ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†" class="headerlink" title="ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†"></a>ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†</h2><p>**<code>ç›®æ ‡</code>**ï¼šæ ¹æ®tokenå¤„ç†ä¸»é¡µçš„è®¿é—®æƒé™é—®é¢˜</p>
<h3 id="æƒé™æ‹¦æˆªçš„æµç¨‹å›¾"><a href="#æƒé™æ‹¦æˆªçš„æµç¨‹å›¾" class="headerlink" title="æƒé™æ‹¦æˆªçš„æµç¨‹å›¾"></a>æƒé™æ‹¦æˆªçš„æµç¨‹å›¾</h3><blockquote>
<p>æˆ‘ä»¬å·²ç»å®Œæˆäº†ç™»å½•çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”å­˜å‚¨äº†tokenï¼Œä½†æ˜¯æ­¤æ—¶ä¸»é¡µå¹¶æ²¡æœ‰å› ä¸ºtokençš„æœ‰æ— è€Œè¢«æ§åˆ¶è®¿é—®æƒé™</p>
</blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®ç°ä»¥ä¸‹å¦‚ä¸‹çš„æµç¨‹å›¾</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200714093601730.png" alt="image-20200714093601730"></p>
<blockquote>
<p>åœ¨åŸºç¡€æ¡†æ¶é˜¶æ®µï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“**<code>src/permission.js</code>**æ˜¯ä¸“é—¨å¤„ç†è·¯ç”±æƒé™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™é‡Œå¤„ç†</p>
</blockquote>
<h3 id="æµç¨‹å›¾è½¬åŒ–ä»£ç "><a href="#æµç¨‹å›¾è½¬åŒ–ä»£ç " class="headerlink" title="æµç¨‹å›¾è½¬åŒ–ä»£ç "></a>æµç¨‹å›¾è½¬åŒ–ä»£ç </h3><p><strong>æµç¨‹å›¾è½¬åŒ–çš„ä»£ç </strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æƒé™æ‹¦æˆª å¯¼èˆªå®ˆå« è·¯ç”±å®ˆå«  router</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router'</span> <span class="comment">// å¼•å…¥è·¯ç”±å®ä¾‹</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span> <span class="comment">// å¼•å…¥vuex storeå®ä¾‹</span></span><br><span class="line"><span class="keyword">import</span> NProgress <span class="keyword">from</span> <span class="string">'nprogress'</span> <span class="comment">// å¼•å…¥ä¸€ä»½è¿›åº¦æ¡æ’ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'nprogress/nprogress.css'</span> <span class="comment">// å¼•å…¥è¿›åº¦æ¡æ ·å¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">'/login'</span>, <span class="string">'/404'</span>] <span class="comment">// å®šä¹‰ç™½åå•  æ‰€æœ‰ä¸å—æƒé™æ§åˆ¶çš„é¡µé¢</span></span><br><span class="line"><span class="comment">// è·¯ç”±çš„å‰ç½®å®ˆå«</span></span><br><span class="line">router.beforeEach(<span class="function"><span class="keyword">function</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) </span>{</span><br><span class="line">  NProgress.start() <span class="comment">// å¼€å¯è¿›åº¦æ¡</span></span><br><span class="line">  <span class="comment">//  é¦–å…ˆåˆ¤æ–­æœ‰æ— token</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">    <span class="comment">//   å¦‚æœæœ‰token ç»§ç»­åˆ¤æ–­æ˜¯ä¸æ˜¯å»ç™»å½•é¡µ</span></span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">'/login'</span>) {</span><br><span class="line">      <span class="comment">//  è¡¨ç¤ºå»çš„æ˜¯ç™»å½•é¡µ</span></span><br><span class="line">      next(<span class="string">'/'</span>) <span class="comment">// è·³åˆ°ä¸»é¡µ</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      next() <span class="comment">// ç›´æ¥æ”¾è¡Œ</span></span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰token</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.indexOf(to.path) &gt; -<span class="number">1</span>) {</span><br><span class="line">      <span class="comment">// å¦‚æœæ‰¾åˆ°äº† è¡¨ç¤ºåœ¨åœ¨åå•é‡Œé¢</span></span><br><span class="line">      next()</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      next(<span class="string">'/login'</span>) <span class="comment">// è·³åˆ°ç™»å½•é¡µ</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  NProgress.done() <span class="comment">// æ‰‹åŠ¨å¼ºåˆ¶å…³é—­ä¸€æ¬¡  ä¸ºäº†è§£å†³ æ‰‹åŠ¨åˆ‡æ¢åœ°å€æ—¶  è¿›åº¦æ¡çš„ä¸å…³é—­çš„é—®é¢˜</span></span><br><span class="line">})</span><br><span class="line"><span class="comment">// åç½®å®ˆå«</span></span><br><span class="line">router.afterEach(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">  NProgress.done() <span class="comment">// å…³é—­è¿›åº¦æ¡</span></span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åœ¨å¯¼èˆªå®ˆå«çš„ä½ç½®ï¼Œæˆ‘ä»¬æ·»åŠ äº†NProgressçš„æ’ä»¶ï¼Œå¯ä»¥å®Œæˆè¿›å…¥æ—¶çš„è¿›åº¦æ¡æ•ˆæœ</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆä¸»é¡µä¸­æ ¹æ®æœ‰æ— tokenï¼Œè¿›è¡Œé¡µé¢è®¿é—®çš„å¤„ç†</p>
<h2 id="ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼"><a href="#ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼" class="headerlink" title="ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼"></a>ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼</h2><p>**<code>ç›®æ ‡</code>**è®¾ç½®å·¦ä¾§çš„å¯¼èˆªæ ·å¼</p>
<blockquote>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†å·¦ä¾§å¯¼èˆªè®¾ç½®æˆå¦‚å›¾æ ·å¼</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200714142517337.png" alt="image-20200714142517337"></p>
<blockquote>
<p>ä¸»é¡µçš„å¸ƒå±€ç»„ä»¶ä½ç½®**<code>src/layout</code>**</p>
</blockquote>
<p><strong>ä¸»é¡µå¸ƒå±€æ¶æ„</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200812023354631.png" alt="image-20200812023354631"></p>
<p><strong>å·¦ä¾§å¯¼èˆªç»„ä»¶çš„æ ·å¼æ–‡ä»¶</strong><code>styles/siderbar.scss</code></p>
<p><strong>è®¾ç½®èƒŒæ™¯æ¸å˜è‰²</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar-container</span> {</span><br><span class="line">      <span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(bottom, <span class="number">#3d6df8</span>, <span class="number">#5b8cff</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®å·¦ä¾§å¯¼èˆªèƒŒæ™¯å›¾ç‰‡</strong></p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.scrollbar-wrapper</span> { </span><br><span class="line">    <span class="attribute">background</span>: url(<span class="string">'~@/assets/common/leftnavBg.png'</span>) no-repeat <span class="number">0</span> <span class="number">100%</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æ³¨æ„</code><strong>ï¼šåœ¨scssä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨</strong><code>@</code><strong>åˆ«åï¼Œéœ€è¦åœ¨å‰é¢åŠ ä¸Šä¸€ä¸ª</strong><code>~</code>**æ‰å¯ä»¥</p>
<p><strong>è®¾ç½®èœå•é€‰ä¸­é¢œè‰²</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">.el-menu {</span><br><span class="line">  border: none;</span><br><span class="line">  height: 100%;</span><br><span class="line">  width: 100% !important;</span><br><span class="line">  a{</span><br><span class="line">    li{</span><br><span class="line">      .svg-icon{</span><br><span class="line">        color: <span class="comment">#fff;</span></span><br><span class="line">        font-size: 18px;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">        .icon{</span><br><span class="line">          color:<span class="comment">#fff;</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      span{</span><br><span class="line">        color: <span class="comment">#fff;</span></span><br><span class="line">      }</span><br><span class="line">      &amp;:hover{</span><br><span class="line">        .svg-icon{</span><br><span class="line">          color: <span class="comment">#43a7fe</span></span><br><span class="line">        }</span><br><span class="line">        span{</span><br><span class="line">          color: <span class="comment">#43a7fe;</span></span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æ³¨æ„</code>**ï¼šå› ä¸ºæˆ‘ä»¬åæœŸæ²¡æœ‰äºŒçº§èœå•ï¼Œæ‰€ä»¥è¿™é‡Œæš‚æ—¶ä¸ç”¨å¯¹äºŒçº§èœå•çš„æ ·å¼è¿›è¡Œæ§åˆ¶</p>
<p><strong>æ˜¾ç¤ºå·¦ä¾§logoå›¾ç‰‡</strong> <strong><code>src/setttings.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line"></span><br><span class="line">  <span class="attr">title</span>: <span class="string">'äººåŠ›èµ„æºç®¡ç†å¹³å°'</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type <span class="type">{boolean}</span> </span>true | false</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description </span>Whether fix the header</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">fixedHeader</span>: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type <span class="type">{boolean}</span> </span>true | false</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description </span>Whether show the logo in sidebar</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">sidebarLogo</span>: <span class="literal">true</span> <span class="comment">// æ˜¾ç¤ºlogo</span></span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®å¤´éƒ¨å›¾ç‰‡ç»“æ„</strong> <strong><code>src/layout/components/Sidebar/Logo.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class="sidebar-logo-container" :class="{'collapse':collapse}"&gt;</span><br><span class="line">    &lt;transition name="sidebarLogoFade"&gt;</span><br><span class="line">      &lt;router-link key="collapse" class="sidebar-logo-link" to="/"&gt;</span><br><span class="line">        &lt;img src="@/assets/common/logo.png" class="sidebar-logo  "&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è®¾ç½®å¤§å›¾å’Œå°å›¾çš„æ ·å¼</strong></p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  &amp;<span class="selector-class">.collapse</span> {</span><br><span class="line">    <span class="selector-class">.sidebar-logo</span> {</span><br><span class="line">      <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">32px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">32px</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"><span class="comment">// å°å›¾æ ·å¼</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.sidebar-logo</span> {</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">140px</span>;</span><br><span class="line">      <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">      <span class="attribute">margin-right</span>: <span class="number">12px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">// å¤§å›¾æ ·å¼</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å»é™¤logoçš„èƒŒæ™¯è‰²</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827104724769.png" alt="image-20200827104724769"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®Œæˆä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼</p>
<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼šæˆ‘ä»¬è¯¥é¡¹ç›®ä¸­æ²¡æœ‰äºŒçº§æ˜¾ç¤ºèœå•ï¼Œæ‰€ä»¥äºŒçº§èœå•çš„æ ·å¼å¹¶æ²¡æœ‰åšè¿‡å¤šå¤„ç†ï¼ŒåŒå­¦ä»¬ä¸å¿…åœ¨æ„</p>
<h2 id="è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼"><a href="#è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼" class="headerlink" title="è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼"></a>è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼</h2><p>**<code>ç›®æ ‡</code>**è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼</p>
<blockquote>
<p>æˆ‘ä»¬éœ€è¦æŠŠé¡µé¢è®¾ç½®æˆå¦‚å›¾æ ·å¼</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200714172602305.png" alt="image-20200714172602305"></p>
<p><strong>å¤´éƒ¨ç»„ä»¶ä½ç½®</strong> <strong><code>layout/components/Navbar.vue</code></strong></p>
<p><strong>æ·»åŠ å…¬å¸åç§°</strong>ï¼Œ<strong>æ³¨é‡Šé¢åŒ…å±‘</strong></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app-breadcrumb"</span>&gt;</span></span><br><span class="line">     æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸</span><br><span class="line">     <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"breadBtn"</span>&gt;</span>ä½“éªŒç‰ˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;breadcrumb class="breadcrumb-container" /&gt; --&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>å…¬å¸æ ·å¼</strong></p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app-breadcrumb</span> {</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: text;</span><br><span class="line">  <span class="selector-class">.breadBtn</span> {</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#84a9fe</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">15px</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¤´éƒ¨èƒŒæ™¯æ¸å˜è‰²</strong></p>
<figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.navbar</span> {</span><br><span class="line">    <span class="attribute">background-image</span>: -webkit-linear-gradient(left, <span class="number">#3d6df8</span>, <span class="number">#5b8cff</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ±‰å ¡ç»„ä»¶å›¾æ ‡é¢œè‰²</strong>  <strong><code>src/components/Hamburger/index.vue</code></strong></p>
<p><strong><code>æ³¨æ„</code><strong>è¿™é‡Œçš„å›¾æ ‡æˆ‘ä»¬ä½¿ç”¨äº†</strong><code>svg</code><strong>ï¼Œè®¾ç½®é¢œè‰²éœ€è¦ä½¿ç”¨svgæ ‡ç­¾çš„</strong><code>fillå±æ€§</code></strong></p>
<blockquote>
<p>è®¾ç½®svgå›¾æ ‡ä¸ºç™½è‰²</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;svg</span><br><span class="line">      :class="{'is-active':isActive}"</span><br><span class="line">      class="hamburger"</span><br><span class="line">      viewBox="0 0 1024 1024"</span><br><span class="line">      xmlns="http://www.w3.org/2000/svg"</span><br><span class="line">      width="64"</span><br><span class="line">      height="64"</span><br><span class="line">      fill="#fff" </span><br><span class="line">    &gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å³ä¾§ä¸‹æ‹‰èœå•è®¾ç½®</strong></p>
<blockquote>
<p>å°†ä¸‹æ‹‰èœå•è°ƒèŠ‚æˆ**<code>é¦–é¡µ/é¡¹ç›®åœ°å€/é€€å‡ºç™»å½•</code>**</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class="right-menu"&gt;</span><br><span class="line">  &lt;el-dropdown class="avatar-container" trigger="click"&gt;</span><br><span class="line">    &lt;div class="avatar-wrapper"&gt;</span><br><span class="line">      &lt;img src="@/assets/common/bigUserHeader.png" class="user-avatar"&gt;</span><br><span class="line">      &lt;span class="name"&gt;ç®¡ç†å‘˜&lt;/span&gt;</span><br><span class="line">      &lt;i class="el-icon-caret-bottom" style="color:#fff" /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-dropdown-menu slot="dropdown" class="user-dropdown"&gt;</span><br><span class="line">      &lt;router-link to="/"&gt;</span><br><span class="line">        &lt;el-dropdown-item&gt;</span><br><span class="line">          é¦–é¡µ</span><br><span class="line">        &lt;/el-dropdown-item&gt;</span><br><span class="line">      &lt;/router-link&gt;</span><br><span class="line">      &lt;a target="_blank" href="https://gitee.com/shuiruohanyu/hrsaas53"&gt;</span><br><span class="line">        &lt;el-dropdown-item&gt;é¡¹ç›®åœ°å€&lt;/el-dropdown-item&gt;</span><br><span class="line">      &lt;/a&gt;</span><br><span class="line">      &lt;el-dropdown-item divided @click.native="logout"&gt;</span><br><span class="line">        &lt;span style="display:block;"&gt;é€€å‡ºç™»å½•&lt;/span&gt;</span><br><span class="line">      &lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;/el-dropdown-menu&gt;</span><br><span class="line">  &lt;/el-dropdown&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¤´åƒå’Œä¸‹æ‹‰èœå•æ ·å¼</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.user-avatar</span> {</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">15px</span>;</span><br><span class="line">        <span class="attribute">vertical-align</span>: middle;</span><br><span class="line"></span><br><span class="line"> }</span><br><span class="line"> <span class="selector-class">.name</span> {</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">        <span class="attribute">margin-left</span>:<span class="number">5px</span>;</span><br><span class="line"> }</span><br><span class="line"> <span class="selector-class">.user-dropdown</span> {</span><br><span class="line">         <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>ç”¨æˆ·åå’Œå¤´åƒæˆ‘ä»¬å…ˆç”¨äº†å‡æ•°æ®è¿›è¡Œï¼Œä¸‹å°ç« èŠ‚ï¼Œä¼šè¿›è¡Œè¿™ä»½æ•°æ®çš„è·å–</p>
<p><strong>æœ€ç»ˆæ•ˆæœ</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716015113164.png"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<h1 id="3-ä¸»é¡µæ¨¡å—"><a href="#3-ä¸»é¡µæ¨¡å—" class="headerlink" title="3.ä¸»é¡µæ¨¡å—"></a>3.ä¸»é¡µæ¨¡å—</h1><h2 id="è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥"><a href="#è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥" class="headerlink" title="è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥"></a>è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥</h2><p><strong><code>ç›®æ ‡</code></strong> å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„èµ„æ–™ä¿¡æ¯</p>
<blockquote>
<p>ä¸Šå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†å¤´éƒ¨èœå•çš„åŸºæœ¬å¸ƒå±€ï¼Œä½†æ˜¯ç”¨æˆ·çš„å¤´åƒå’Œåç§°å¹¶æ²¡æœ‰ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ¥å£è°ƒç”¨çš„æ–¹å¼è·å–å½“å‰ç”¨æˆ·çš„èµ„æ–™ä¿¡æ¯</p>
</blockquote>
<p><strong>è·å–ç”¨æˆ·èµ„æ–™æ¥å£</strong></p>
<p>åœ¨**<code>src/api/user.js</code>**ä¸­å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  è·å–ç”¨æˆ·çš„åŸºæœ¬èµ„æ–™</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserInfo</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/profile'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬å¿½ç•¥äº†ä¸€ä¸ªé—®é¢˜ï¼æˆ‘ä»¬çš„headerså‚æ•°å¹¶æ²¡æœ‰åœ¨è¿™é‡Œä¼ å…¥ï¼Œä¸ºä»€ä¹ˆå‘¢</p>
</blockquote>
<p>headersä¸­çš„<strong>Authorization</strong>ç›¸å½“äºæˆ‘ä»¬<strong>å¼€é—¨</strong>ï¼ˆ<strong>è°ƒç”¨æ¥å£</strong>ï¼‰æ—¶**<code>é’¥åŒ™(token)</code><strong>ï¼Œæˆ‘ä»¬åœ¨æ‰“å¼€ä»»ä½•å¸¦å®‰å…¨æƒé™çš„é—¨çš„æ—¶å€™éƒ½éœ€è¦</strong><code>é’¥åŒ™(token)</code>** å¦‚å›¾</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200715233339927.png" alt="image-20200715233339927"></p>
<p>æ¯æ¬¡åœ¨æ¥å£ä¸­æºå¸¦**<code>é’¥åŒ™ï¼ˆtokenï¼‰</code>**å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨axiosæ‹¦æˆªå™¨ä¸­ç»Ÿä¸€æ³¨å…¥token </p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716000203862.png" alt="image-20200716000203862"></p>
<p><strong>ç»Ÿä¸€æ³¨å…¥token</strong> <strong><code>src/utils/request.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">service.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// åœ¨è¿™ä¸ªä½ç½®éœ€è¦ç»Ÿä¸€çš„å»æ³¨å…¥token</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">    <span class="comment">// å¦‚æœtokenå­˜åœ¨ æ³¨å…¥token</span></span><br><span class="line">    config.headers[<span class="string">'Authorization'</span>] = <span class="string">`Bearer <span class="subst">${store.getters.token}</span>`</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config <span class="comment">// å¿…é¡»è¿”å›é…ç½®</span></span><br><span class="line">}, <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">}) </span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®Œæˆè·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥</p>
<h2 id="å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€"><a href="#å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€" class="headerlink" title="å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€"></a>å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€</h2><p>**<code>ç›®æ ‡</code>**ï¼š åœ¨ç”¨æˆ·çš„vuexæ¨¡å—ä¸­å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionï¼Œå¹¶è®¾ç½®ç›¸å…³çŠ¶æ€</p>
<blockquote>
<p>ç”¨æˆ·çŠ¶æ€ä¼šåœ¨åç»­çš„å¼€å‘ä¸­ï¼Œé¢‘ç¹ç”¨åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ç”¨æˆ·çŠ¶æ€åŒæ ·çš„å°è£…åˆ°actionä¸­</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827111324564.png" alt="image-20200827111324564"></p>
<p><strong>å°è£…è·å–ç”¨æˆ·èµ„æ–™action</strong>   <strong><code>action</code></strong>  <strong><code>src/store/modules/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { login, getUserInfo } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è·å–ç”¨æˆ·èµ„æ–™action</span></span><br><span class="line">  <span class="keyword">async</span> getUserInfo (context) {</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> getUserInfo()  <span class="comment">// è·å–è¿”å›å€¼</span></span><br><span class="line">    context.commit(<span class="string">'setUserInfo'</span>, result) <span class="comment">// å°†æ•´ä¸ªçš„ä¸ªäººä¿¡æ¯è®¾ç½®åˆ°ç”¨æˆ·çš„vuexæ•°æ®ä¸­</span></span><br><span class="line">    <span class="keyword">return</span> result <span class="comment">// è¿™é‡Œä¸ºä»€ä¹ˆè¦è¿”å› ä¸ºåé¢åŸ‹ä¸‹ä¼ç¬”</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åŒæ—¶ï¼Œé…å¥—çš„æˆ‘ä»¬è¿˜è¿›è¡Œäº†å…³äºç”¨æˆ·çŠ¶æ€çš„mutationsæ–¹æ³•çš„è®¾è®¡</p>
</blockquote>
<p><strong>åˆå§‹åŒ–state</strong>  <strong><code>state</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> state = {</span><br><span class="line">  <span class="attr">token</span>: getToken(), <span class="comment">// è®¾ç½®tokenåˆå§‹çŠ¶æ€   tokenæŒä¹…åŒ– =&gt; æ”¾åˆ°ç¼“å­˜ä¸­</span></span><br><span class="line">  <span class="attr">userInfo</span>: {} <span class="comment">// å®šä¹‰ä¸€ä¸ªç©ºçš„å¯¹è±¡ ä¸æ˜¯null å› ä¸ºåè¾¹æˆ‘è¦å¼€å‘userInfoçš„å±æ€§ç»™åˆ«äººç”¨  userInfo.name</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>userInfoä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸è®¾ç½®ä¸ºnullï¼Œè€Œæ˜¯è®¾ç½®ä¸º {} </p>
</blockquote>
<p>å› ä¸ºæˆ‘ä»¬ä¼šåœ¨**<code>getters</code>**ä¸­å¼•ç”¨userinfoçš„å˜é‡ï¼Œå¦‚æœè®¾ç½®ä¸ºnullï¼Œåˆ™ä¼šå¼•èµ·å¼‚å¸¸å’ŒæŠ¥é”™</p>
<p><strong>è®¾ç½®å’Œåˆ é™¤ç”¨æˆ·èµ„æ–™</strong>   <strong><code>mutations</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"> <span class="function"><span class="title">setUserInfo</span>(<span class="params">state, userInfo</span>)</span> {</span><br><span class="line">   state.userInfo = { ...userInfo } <span class="comment">// ç”¨ æµ…æ‹·è´çš„æ–¹å¼å»èµ‹å€¼å¯¹è±¡ å› ä¸ºè¿™æ ·æ•°æ®æ›´æ–°ä¹‹åï¼Œæ‰ä¼šè§¦å‘ç»„ä»¶çš„æ›´æ–°</span></span><br><span class="line"> },</span><br><span class="line"> <span class="comment">// åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"> <span class="function"><span class="title">reomveUserInfo</span>(<span class="params">state</span>)</span> {</span><br><span class="line">   state.userInfo = {}</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åŒå­¦ä»¬ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰çš„èµ„æ–™è®¾ç½®åˆ°äº†<strong>userInfo</strong>è¿™ä¸ªå¯¹è±¡ä¸­ï¼Œå¦‚æœæƒ³è¦å–å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨gettersä¸­å»ºç«‹ç›¸åº”çš„æ˜ å°„</p>
</blockquote>
<p>å› ä¸ºæˆ‘ä»¬è¦åšæ˜ å°„ï¼Œå¦‚æœåˆå§‹å€¼ä¸ºnullï¼Œä¸€æ—¦å¼•ç”¨äº†gettersï¼Œå°±ä¼šæŠ¥é”™</p>
<p><strong>å»ºç«‹ç”¨æˆ·åçš„æ˜ å°„</strong>  <strong><code>src/store/getters.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = {</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.sidebar,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.device,</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.token,</span><br><span class="line">  <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.username <span class="comment">// å»ºç«‹ç”¨æˆ·åç§°çš„æ˜ å°„</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°†ç”¨æˆ·èµ„æ–™çš„<strong>action =&gt;  mutation =&gt; state =&gt;  getters</strong> éƒ½è®¾ç½®å¥½äº†ï¼Œ é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥åœ¨ä»€ä¹ˆä½ç½®æ¥è°ƒç”¨è¿™ä¸ªactionå‘¢ ï¼Ÿ</p>
<blockquote>
<p>åˆ«ç€æ€¥ï¼Œå…ˆæäº¤ä»£ç ï¼Œä¸‹ä¸ªå°èŠ‚ï¼Œæˆ‘ä»¬æ¥æ­æ™“ç­”æ¡ˆ</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€</p>
<h2 id="æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action"><a href="#æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action" class="headerlink" title="æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action"></a>æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action</h2><p>**<code>ç›®æ ‡</code>**åœ¨æƒé™æ‹¦æˆªå¤„è°ƒç”¨aciton</p>
<h3 id="æƒé™æ‹¦æˆªå™¨è°ƒç”¨action"><a href="#æƒé™æ‹¦æˆªå™¨è°ƒç”¨action" class="headerlink" title="æƒé™æ‹¦æˆªå™¨è°ƒç”¨action"></a>æƒé™æ‹¦æˆªå™¨è°ƒç”¨action</h3><blockquote>
<p>åœ¨ä¸Šå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†ç”¨æˆ·èµ„æ–™çš„æ•´ä¸ªæµç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸ªactionåœ¨å“ªé‡Œè°ƒç”¨å‘¢ï¼Ÿ</p>
</blockquote>
<p>ç”¨æˆ·èµ„æ–™æœ‰ä¸ªç¡¬æ€§è¦æ±‚ï¼Œ**<code>å¿…é¡»æœ‰token</code>**æ‰å¯ä»¥è·å–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨ç¡®å®šæœ‰tokençš„ä½ç½®å»è·å–ç”¨æˆ·èµ„æ–™</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716004526838.png" alt="image-20200716004526838"></p>
<blockquote>
<p>ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œä¸€æ—¦ç¡®å®šæˆ‘ä»¬è¿›è¡Œäº†æ”¾è¡Œï¼Œå°±å¯ä»¥è·å–ç”¨æˆ·èµ„æ–™</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200813013009294.png" alt="image-20200813013009294"></p>
<p><strong>è°ƒç”¨action</strong> <strong><code>src/permission.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!store.state.user.userInfo.userId) {</span><br><span class="line">      <span class="keyword">await</span> store.dispatch(<span class="string">'user/getUserInfo'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœæˆ‘ä»¬è§‰å¾—è·å–ç”¨æˆ·idçš„æ–¹å¼å†™äº†å¤ªå¤šå±‚çº§ï¼Œå¯ä»¥åœ¨vuexä¸­çš„gettersä¸­è®¾ç½®ä¸€ä¸ªæ˜ å°„ <strong><code>src/store/getters.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userId: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.userId <span class="comment">// å»ºç«‹ç”¨æˆ·idçš„æ˜ å°„</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä»£ç å°±å˜æˆäº†</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!store.getters.userId) {</span><br><span class="line">       <span class="comment">// å¦‚æœæ²¡æœ‰idè¿™ä¸ªå€¼ æ‰ä¼šè°ƒç”¨ vuexçš„è·å–èµ„æ–™çš„action</span></span><br><span class="line">       <span class="keyword">await</span> store.dispatch(<span class="string">'user/getUserInfo'</span>)</span><br><span class="line">       <span class="comment">// ä¸ºä»€ä¹ˆè¦å†™await å› ä¸ºæˆ‘ä»¬æƒ³è·å–å®Œèµ„æ–™å†å»æ”¾è¡Œ</span></span><br><span class="line">     }</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡dev-toolså·¥å…·åœ¨æ§åˆ¶å°æ¸…æ¥šçš„çœ‹åˆ°æ•°æ®å·²ç»è·å–</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716012120619.png" alt="image-20200716012120619"></p>
<blockquote>
<p>æœ€åä¸€æ­¥ï¼Œåªéœ€è¦å°†å¤´éƒ¨èœå•ä¸­çš„åç§°æ¢æˆçœŸå®çš„ç”¨æˆ·åå³å¯</p>
</blockquote>
<h3 id="è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®"><a href="#è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®" class="headerlink" title="è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®"></a>è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®</h3><p><strong>å¤´åƒæ€ä¹ˆåŠï¼Ÿ</strong></p>
<blockquote>
<p>æˆ‘ä»¬å‘ç°å¤´åƒå¹¶ä¸åœ¨æ¥å£çš„è¿”å›ä½“ä¸­ï¼ˆæ¥å£åŸå› ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦ä¸€ä¸ªæ¥å£æ¥è·å–å¤´åƒï¼Œå¹¶æŠŠå¤´åƒåˆå¹¶åˆ°å½“å‰çš„èµ„æ–™ä¸­</p>
</blockquote>
<p><strong>å°è£…è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£</strong>  <strong><code>src/api/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯  ç°åœ¨å†™å®ƒ å®Œå…¨æ˜¯ä¸ºäº†æ˜¾ç¤ºå¤´åƒ</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserDetailById</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¿™ä¸ªæ¥å£éœ€è¦ç”¨æˆ·çš„userIdï¼Œåœ¨å‰ä¸€ä¸ªæ¥å£å¤„ï¼Œæˆ‘ä»¬å·²ç»è·å–åˆ°äº†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åœ¨åé¢çš„å†…å®¹å»è¡”æ¥</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { login, getUserInfo, getUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// è·å–ç”¨æˆ·èµ„æ–™action</span></span><br><span class="line"> <span class="keyword">async</span> <span class="function"><span class="title">getUserInfo</span>(<span class="params">context</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> getUserInfo() <span class="comment">// resultå°±æ˜¯ç”¨æˆ·çš„åŸºæœ¬èµ„æ–™</span></span><br><span class="line">    <span class="keyword">const</span> baseInfo = <span class="keyword">await</span> getUserDetailById(result.userId) <span class="comment">// ä¸ºäº†è·å–å¤´åƒ</span></span><br><span class="line">    <span class="keyword">const</span> baseResult = { ...result, ...baseInfo } <span class="comment">// å°†ä¸¤ä¸ªæ¥å£ç»“æœåˆå¹¶</span></span><br><span class="line">    <span class="comment">// æ­¤æ—¶å·²ç»è·å–åˆ°äº†ç”¨æˆ·çš„åŸºæœ¬èµ„æ–™ è¿«ä¸å¾—å·² ä¸ºäº†å¤´åƒå†æ¬¡è°ƒç”¨ä¸€ä¸ªæ¥å£</span></span><br><span class="line">    context.commit(<span class="string">'setUserInfo'</span>, baseResult) <span class="comment">// æäº¤mutations</span></span><br><span class="line">    <span class="comment">// åŠ ä¸€ä¸ªç‚¹ç›ä¹‹ç¬”  è¿™é‡Œè¿™ä¸€æ­¥ï¼Œæš‚æ—¶ç”¨ä¸åˆ°ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œè¿™ç»™æˆ‘ä»¬åè¾¹ä¼šç•™ä¸‹ä¼ç¬”</span></span><br><span class="line">    <span class="keyword">return</span> baseResult</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸ºäº†æ›´å¥½åœ°è·å–å¤´åƒï¼ŒåŒæ ·å¯ä»¥æŠŠå¤´åƒæ”¾äºgettersä¸­</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">staffPhoto: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.staffPhoto <span class="comment">// å»ºç«‹ç”¨æˆ·å¤´åƒçš„æ˜ å°„</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„å¤´åƒå’Œåç§°å·²ç»è·å–åˆ°äº†ï¼Œå¯ä»¥ç›´æ¥å°†ä¹‹å‰çš„å‡æ•°æ®æ¢æˆçœŸæ­£çš„å¤´åƒå’Œåç§°</p>
<p><strong>ç”¨æˆ·å</strong>  <strong><code>layout/components/Navbar.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...mapGetters([</span><br><span class="line">     <span class="string">'sidebar'</span>,</span><br><span class="line">     <span class="string">'name'</span>,</span><br><span class="line">     <span class="string">'staffPhoto'</span></span><br><span class="line">   ])</span><br><span class="line">    &lt;img :src=<span class="string">"staffPhoto"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"user-avatar"</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"name"</span>&gt;</span>{{ name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡è®¾ç½®ï¼Œç”¨æˆ·åå·²ç»æ˜¾ç¤ºï¼Œå¤´åƒä¾ç„¶æ²¡æœ‰æ˜¾ç¤ºï¼Œè¿™æ˜¯å› ä¸ºè™½ç„¶æœ‰åœ°å€ï¼Œä½†æ˜¯åœ°å€æ¥æºæ˜¯ç§æœ‰äº‘ï¼Œç›®å‰å·²ç»å¤±æ•ˆï¼Œæ‰€ä»¥éœ€è¦é¢å¤–å¤„ç†ä¸‹å›¾ç‰‡çš„å¼‚å¸¸</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827140451144.png" alt="image-20200827140451144"></p>
<p>è‡³äºå¤„ç†å›¾ç‰‡çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œå¯é‡‡ç”¨è‡ªå®šä¹‰æŒ‡ä»¤çš„å½¢å¼æ¥è¿›è¡Œå¤„ç†</p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®ç°æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action</p>
<h2 id="è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ"></a>è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ</h2><p>**<code>ç›®æ ‡</code>**ï¼š é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤çš„å½¢å¼è§£å†³å¼‚å¸¸å›¾ç‰‡çš„å¤„ç†</p>
<h3 id="è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="è‡ªå®šä¹‰æŒ‡ä»¤"></a>è‡ªå®šä¹‰æŒ‡ä»¤</h3><p>æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive(<span class="string">'æŒ‡ä»¤åç§°'</span>, {</span><br><span class="line">    <span class="comment">// ä¼šåœ¨å½“å‰æŒ‡ä»¤ä½œç”¨çš„domå…ƒç´  æ’å…¥ä¹‹åæ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// options é‡Œé¢æ˜¯æŒ‡ä»¤çš„è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="attr">inserted</span>: <span class="function"><span class="keyword">function</span> (<span class="params">dom,options</span>) </span>{</span><br><span class="line">        </span><br><span class="line">    }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è‡ªå®šä¹‰æŒ‡ä»¤å¯ä»¥é‡‡ç”¨ç»Ÿä¸€çš„æ–‡ä»¶æ¥ç®¡ç†  <strong><code>src/directives/index.js</code></strong>,è¿™ä¸ªæ–‡ä»¶è´Ÿè´£ç®¡ç†æ‰€æœ‰çš„è‡ªå®šä¹‰æŒ‡ä»¤</p>
</blockquote>
<p>é¦–å…ˆå®šä¹‰ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤  <strong><code>v-imagerror</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> imagerror = {</span><br><span class="line">  <span class="comment">// æŒ‡ä»¤å¯¹è±¡ ä¼šåœ¨å½“å‰çš„domå…ƒç´ æ’å…¥åˆ°èŠ‚ç‚¹ä¹‹åæ‰§è¡Œ</span></span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">dom, options</span>)</span> {</span><br><span class="line">    <span class="comment">// optionsæ˜¯ æŒ‡ä»¤ä¸­çš„å˜é‡çš„è§£é‡Š  å…¶ä¸­æœ‰ä¸€ä¸ªå±æ€§å«åš value</span></span><br><span class="line">    <span class="comment">// dom è¡¨ç¤ºå½“å‰æŒ‡ä»¤ä½œç”¨çš„domå¯¹è±¡</span></span><br><span class="line">    <span class="comment">// domè®¤ä¸ºæ­¤æ—¶å°±æ˜¯å›¾ç‰‡</span></span><br><span class="line">    <span class="comment">// å½“å›¾ç‰‡æœ‰åœ°å€ ä½†æ˜¯åœ°å€æ²¡æœ‰åŠ è½½æˆåŠŸçš„æ—¶å€™ ä¼šæŠ¥é”™ ä¼šè§¦å‘å›¾ç‰‡çš„ä¸€ä¸ªäº‹ä»¶ =&gt; onerror</span></span><br><span class="line">    dom.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">      <span class="comment">// å½“å›¾ç‰‡å‡ºç°å¼‚å¸¸çš„æ—¶å€™ ä¼šå°†æŒ‡ä»¤é…ç½®çš„é»˜è®¤å›¾ç‰‡è®¾ç½®ä¸ºè¯¥å›¾ç‰‡çš„å†…å®¹</span></span><br><span class="line">      <span class="comment">// domå¯ä»¥æ³¨å†Œerroräº‹ä»¶</span></span><br><span class="line">      dom.src = options.value <span class="comment">// è¿™é‡Œä¸èƒ½å†™æ­»</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åœ¨main-jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ"><a href="#åœ¨main-jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ" class="headerlink" title="åœ¨main.jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ"></a>åœ¨main.jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ</h3><p>ç„¶åï¼Œåœ¨**<code>main.js</code>**ä¸­å®Œæˆå¯¹äºè¯¥æ–‡ä»¶ä¸­æ‰€æœ‰æŒ‡ä»¤çš„å…¨å±€æ³¨å†Œ </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> directives <span class="keyword">from</span> <span class="string">'@/directives'</span></span><br><span class="line"><span class="comment">// æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</span></span><br><span class="line"><span class="comment">// éå†æ‰€æœ‰çš„å¯¼å‡ºçš„æŒ‡ä»¤å¯¹è±¡ å®Œæˆè‡ªå®šä¹‰å…¨å±€æ³¨å†Œ</span></span><br><span class="line"><span class="built_in">Object</span>.keys(directives).forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</span></span><br><span class="line">  Vue.directive(key, directives[key])</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>é’ˆå¯¹ä¸Šé¢çš„å¼•å…¥è¯­æ³•  <strong><code>import *  as  å˜é‡</code></strong>  å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå¯¹è±¡**<code>{ å˜é‡1ï¼šå¯¹è±¡1ï¼Œå˜é‡2ï¼š å¯¹è±¡2 ...   }</code>**, æ‰€ä»¥å¯ä»¥é‡‡ç”¨å¯¹è±¡éå†çš„æ–¹æ³•è¿›è¡Œå¤„ç†</p>
<p>æŒ‡ä»¤æ³¨å†ŒæˆåŠŸï¼Œå¯ä»¥åœ¨**<code>navbar.vue</code>**ä¸­ç›´æ¥ä½¿ç”¨äº†</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img v-imageerror="defaultImg" :src="staffPhoto" class="user-avatar"&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="keyword">return</span> {</span><br><span class="line">     <span class="attr">defaultImg</span>: <span class="built_in">require</span>(<span class="string">'@/assets/common/head.jpg'</span>)</span><br><span class="line">   }</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®ç°ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼Œè§£å†³å›¾ç‰‡åŠ è½½å¼‚å¸¸çš„é—®é¢˜</p>
<h2 id="å®ç°ç™»å‡ºåŠŸèƒ½"><a href="#å®ç°ç™»å‡ºåŠŸèƒ½" class="headerlink" title="å®ç°ç™»å‡ºåŠŸèƒ½"></a>å®ç°ç™»å‡ºåŠŸèƒ½</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°ç”¨æˆ·çš„ç™»å‡ºæ“ä½œ</p>
<blockquote>
<p>ç™»å‡ºä»…ä»…æ˜¯è·³åˆ°ç™»å½•é¡µå—ï¼Ÿ</p>
</blockquote>
<p>ä¸ï¼Œå½“ç„¶ä¸æ˜¯ï¼Œæˆ‘ä»¬è¦å¤„ç†å¦‚ä¸‹</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827143847893.png" alt="image-20200827143847893"></p>
<p>åŒæ ·çš„ï¼Œç™»å‡ºåŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨vuexä¸­çš„ç”¨æˆ·æ¨¡å—ä¸­å®ç°å¯¹åº”çš„<strong>action</strong></p>
<p><strong>ç™»å‡ºaction</strong>  <strong><code>src/store/modules/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™»å‡ºçš„action</span></span><br><span class="line">  <span class="function"><span class="title">logout</span>(<span class="params">context</span>)</span> {</span><br><span class="line">    <span class="comment">// åˆ é™¤token</span></span><br><span class="line">    context.commit(<span class="string">'removeToken'</span>) <span class="comment">// ä¸ä»…ä»…åˆ é™¤äº†vuexä¸­çš„ è¿˜åˆ é™¤äº†ç¼“å­˜ä¸­çš„</span></span><br><span class="line">    <span class="comment">// åˆ é™¤ç”¨æˆ·èµ„æ–™</span></span><br><span class="line">    context.commit(<span class="string">'removeUserInfo'</span>) <span class="comment">// åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å¤´éƒ¨èœå•è°ƒç”¨action</strong>  <strong><code>src/layout/components/Navbar.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">logout</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$store.dispatch(<span class="string">'user/logout'</span>) <span class="comment">// è¿™é‡Œä¸è®ºå†™ä¸å†™ await ç™»å‡ºæ–¹æ³•éƒ½æ˜¯åŒæ­¥çš„</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(<span class="string">`/login`</span>) <span class="comment">// è·³åˆ°ç™»å½•</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æ³¨æ„</code>**æˆ‘ä»¬è¿™é‡Œä¹Ÿå¯ä»¥é‡‡ç”¨vuexä¸­çš„æ¨¡å—åŒ–å¼•å…¥è¾…åŠ©å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { mapGetters, createNamespacedHelpers  } <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">const</span> {  mapActions } = createNamespacedHelpers(<span class="string">'user'</span>) <span class="comment">// è¿™æ˜¯çš„mapActionç›´æ¥å¯¹åº”æ¨¡å—ä¸‹çš„actionè¾…åŠ©å‡½æ•°</span></span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    ...mapActions([<span class="string">'lgout'</span>]),</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>ä»¥ä¸Šä»£ç ï¼Œå®é™…ä¸Šç›´æ¥å¯¹useræ¨¡å—ä¸‹çš„actionè¿›è¡Œäº†å¼•ç”¨ï¼Œ</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®ç°ç™»å‡ºåŠŸèƒ½</p>
<h2 id="Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥"><a href="#Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥" class="headerlink" title="Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥"></a>Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥</h2><p>**<code>ç›®æ ‡</code>**ï¼š å¤„ç†å½“tokenå¤±æ•ˆæ—¶ä¸šåŠ¡</p>
<h3 id="ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘"><a href="#ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘" class="headerlink" title="ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘"></a>ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘</h3><blockquote>
<p>å¼€é—¨çš„é’¥åŒ™ä¸æ˜¯ä¸€ç›´æœ‰æ•ˆçš„ï¼Œå¦‚æœä¸€ç›´æœ‰æ•ˆï¼Œä¼šæœ‰å®‰å…¨é£é™©ï¼Œæ‰€ä»¥æˆ‘ä»¬å°è¯•åœ¨å®¢æˆ·ç«¯è¿›è¡Œä¸€ä¸‹tokençš„æ—¶é—´æ£€æŸ¥</p>
</blockquote>
<p>å…·ä½“ä¸šåŠ¡å›¾å¦‚ä¸‹</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716231205153.png" alt="image-20200716231205153"></p>
<h3 id="æµç¨‹å›¾è½¬åŒ–ä»£ç -1"><a href="#æµç¨‹å›¾è½¬åŒ–ä»£ç -1" class="headerlink" title="æµç¨‹å›¾è½¬åŒ–ä»£ç "></a>æµç¨‹å›¾è½¬åŒ–ä»£ç </h3><p><strong>æµç¨‹å›¾è½¬åŒ–ä»£ç </strong> <strong><code>src/utils/auth.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> timeKey = <span class="string">'hrsaas-timestamp-key'</span> <span class="comment">// è®¾ç½®ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„key</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getTimeStamp</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> Cookies.get(timeKey)</span><br><span class="line">}</span><br><span class="line"><span class="comment">// è®¾ç½®æ—¶é—´æˆ³</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">setTimeStamp</span>(<span class="params"></span>) </span>{</span><br><span class="line">  Cookies.set(timeKey, <span class="built_in">Date</span>.now())</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>src/utils/request.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"><span class="keyword">import</span> { Message } <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line"><span class="keyword">import</span> { getTimeStamp } <span class="keyword">from</span> <span class="string">'@/utils/auth'</span></span><br><span class="line"><span class="keyword">const</span> TimeOut = <span class="number">3600</span> <span class="comment">// å®šä¹‰è¶…æ—¶æ—¶é—´</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.create({</span><br><span class="line"><span class="comment">// å½“æ‰§è¡Œ npm run dev  =&gt; .evn.development =&gt; /api =&gt; è·¨åŸŸä»£ç†</span></span><br><span class="line">  <span class="attr">baseURL</span>: process.env.VUE_APP_BASE_API, <span class="comment">// npm  run dev  =&gt; /api npm run build =&gt;  /prod-api</span></span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">5000</span> <span class="comment">// è®¾ç½®è¶…æ—¶æ—¶é—´</span></span><br><span class="line">})</span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// config æ˜¯è¯·æ±‚çš„é…ç½®ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// æ³¨å…¥token</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">    <span class="comment">// åªæœ‰åœ¨æœ‰tokençš„æƒ…å†µä¸‹ æ‰æœ‰å¿…è¦å»æ£€æŸ¥æ—¶é—´æˆ³æ˜¯å¦è¶…æ—¶</span></span><br><span class="line">    <span class="keyword">if</span> (IsCheckTimeOut()) {</span><br><span class="line">      <span class="comment">// å¦‚æœå®ƒä¸ºtrueè¡¨ç¤º è¿‡æœŸäº†</span></span><br><span class="line">      <span class="comment">// tokenæ²¡ç”¨äº† å› ä¸ºè¶…æ—¶äº†</span></span><br><span class="line">      store.dispatch(<span class="string">'user/logout'</span>) <span class="comment">// ç™»å‡ºæ“ä½œ</span></span><br><span class="line">      <span class="comment">// è·³è½¬åˆ°ç™»å½•é¡µ</span></span><br><span class="line">      router.push(<span class="string">'/login'</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'tokenè¶…æ—¶äº†'</span>))</span><br><span class="line">    }</span><br><span class="line">    config.headers[<span class="string">'Authorization'</span>] = <span class="string">`Bearer <span class="subst">${store.getters.token}</span>`</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config <span class="comment">// å¿…é¡»è¦è¿”å›çš„</span></span><br><span class="line">}, <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">})</span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use(<span class="function"><span class="params">response</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// axiosé»˜è®¤åŠ äº†ä¸€å±‚data</span></span><br><span class="line">  <span class="keyword">const</span> { success, message, data } = response.data</span><br><span class="line">  <span class="comment">//   è¦æ ¹æ®successçš„æˆåŠŸä¸å¦å†³å®šä¸‹é¢çš„æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (success) {</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡å·²ç»é”™è¯¯äº† è¿˜èƒ½è¿›then ? ä¸èƒ½ ï¼ åº”è¯¥è¿›catch</span></span><br><span class="line">    Message.error(message) <span class="comment">// æç¤ºé”™è¯¯æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(message))</span><br><span class="line">  }</span><br><span class="line">}, <span class="function"><span class="params">error</span> =&gt;</span> {</span><br><span class="line">  Message.error(error.message) <span class="comment">// æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error) <span class="comment">// è¿”å›æ‰§è¡Œé”™è¯¯ è®©å½“å‰çš„æ‰§è¡Œé“¾è·³å‡ºæˆåŠŸ ç›´æ¥è¿›å…¥ catch</span></span><br><span class="line">})</span><br><span class="line"><span class="comment">// æ˜¯å¦è¶…æ—¶</span></span><br><span class="line"><span class="comment">// è¶…æ—¶é€»è¾‘  (å½“å‰æ—¶é—´  - ç¼“å­˜ä¸­çš„æ—¶é—´) æ˜¯å¦å¤§äº æ—¶é—´å·®</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IsCheckTimeOut</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> currentTime = <span class="built_in">Date</span>.now() <span class="comment">// å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="keyword">var</span> timeStamp = getTimeStamp() <span class="comment">// ç¼“å­˜æ—¶é—´æˆ³</span></span><br><span class="line">  <span class="keyword">return</span> (currentTime - timeStamp) / <span class="number">1000</span> &gt; TimeOut</span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code>**ï¼šæˆ‘ä»¬åœ¨è°ƒç”¨ç™»å½•æ¥å£çš„æ—¶å€™ ä¸€å®šæ˜¯æ²¡æœ‰tokençš„ï¼Œæ‰€ä»¥tokenæ£€æŸ¥ä¸ä¼šå½±å“ç™»å½•æ¥å£çš„è°ƒç”¨</p>
<blockquote>
<p>åŒç†ï¼Œåœ¨ç™»å½•çš„æ—¶å€™ï¼Œå¦‚æœç™»å½•æˆåŠŸï¼Œæˆ‘ä»¬åº”è¯¥è®¾ç½®æ—¶é—´æˆ³</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰login action  ä¹Ÿéœ€è¦å‚æ•° è°ƒç”¨actionæ—¶ ä¼ é€’è¿‡æ¥çš„å‚æ•°</span></span><br><span class="line"><span class="comment">// async æ ‡è®°çš„å‡½æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•° -&gt; æœ¬è´¨æ˜¯è¿˜æ˜¯ ä¸€ä¸ªpromise</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">login</span>(<span class="params">context, data</span>)</span> {</span><br><span class="line">  <span class="comment">// ç»è¿‡å“åº”æ‹¦æˆªå™¨çš„å¤„ç†ä¹‹å è¿™é‡Œçš„resultå®é™…ä¸Šå°±æ˜¯ token</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="keyword">await</span> login(data) <span class="comment">// å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªpromise  resultå°±æ˜¯æ‰§è¡Œçš„ç»“æœ</span></span><br><span class="line">  <span class="comment">// axiosé»˜è®¤ç»™æ•°æ®åŠ äº†ä¸€å±‚data</span></span><br><span class="line">  <span class="comment">// è¡¨ç¤ºç™»å½•æ¥å£è°ƒç”¨æˆåŠŸ ä¹Ÿå°±æ˜¯æ„å‘³ç€ä½ çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯æ­£ç¡®çš„</span></span><br><span class="line">  <span class="comment">// ç°åœ¨æœ‰ç”¨æˆ·token</span></span><br><span class="line">  <span class="comment">// actions ä¿®æ”¹state å¿…é¡»é€šè¿‡mutations</span></span><br><span class="line">  context.commit(<span class="string">'setToken'</span>, result)</span><br><span class="line">  <span class="comment">// å†™å…¥æ—¶é—´æˆ³</span></span><br><span class="line">  setTimeStamp() <span class="comment">// å°†å½“å‰çš„æœ€æ–°æ—¶é—´å†™å…¥ç¼“å­˜</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<blockquote>
<p>æœ‰ä¸»åŠ¨å¤„ç†å°±æœ‰è¢«åŠ¨å¤„ç†ï¼Œä¹Ÿå°±æ˜¯åç«¯å‘Šè¯‰æˆ‘ä»¬è¶…æ—¶äº†ï¼Œæˆ‘ä»¬è¢«è¿«åšå‡ºååº”ï¼Œå¦‚æœåç«¯æ¥å£æ²¡æœ‰åšå¤„ç†ï¼Œä¸»åŠ¨ä»‹å…¥å°±æ˜¯ä¸€ç§ç®€å•çš„æ–¹å¼</p>
</blockquote>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆtokenè¶…æ—¶çš„ä¸»åŠ¨ä»‹å…¥</p>
<h2 id="Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†"><a href="#Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†" class="headerlink" title="Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†"></a>Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†</p>
<blockquote>
<p>é™¤äº†tokençš„ä¸»åŠ¨ä»‹å…¥ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹tokenè¿›è¡Œè¢«åŠ¨çš„å¤„ç†ï¼Œå¦‚å›¾</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200818155842864.png" alt="image-20200818155842864"></p>
<p>tokenè¶…æ—¶çš„é”™è¯¯ç æ˜¯**<code>10002</code>**</p>
<p><strong>ä»£ç å®ç°</strong>  <strong><code>src/utils/request.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">error =&gt; {</span><br><span class="line">  <span class="comment">// error ä¿¡æ¯ é‡Œé¢ responseçš„å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">if</span> (error.response &amp;&amp; error.response.data &amp;&amp; error.response.data.code === <span class="number">10002</span>) {</span><br><span class="line">    <span class="comment">// å½“ç­‰äº10002çš„æ—¶å€™ è¡¨ç¤º åç«¯å‘Šè¯‰æˆ‘tokenè¶…æ—¶äº†</span></span><br><span class="line">    store.dispatch(<span class="string">'user/logout'</span>) <span class="comment">// ç™»å‡ºaction åˆ é™¤token</span></span><br><span class="line">    router.push(<span class="string">'/login'</span>)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    Message.error(error.message) <span class="comment">// æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ— è®ºæ˜¯ä¸»åŠ¨ä»‹å…¥è¿˜æ˜¯è¢«åŠ¨å¤„ç†ï¼Œè¿™äº›æ“ä½œéƒ½æ˜¯ä¸ºäº†æ›´å¥½åœ°å¤„ç†tokenï¼Œå‡å°‘é”™è¯¯å¼‚å¸¸çš„å¯èƒ½æ€§</p>
</blockquote>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong>  Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« èŠ‚æˆ‘ä¸€æ­¥æ­¥å®ç°äº†å¦‚ä¸‹çš„æ•ˆæœ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716015113164.png" alt="image-20200716015113164"></p>
<p>å®é™…çš„ä¸šåŠ¡èµ°å‘</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827152601712.png" alt="image-20200827152601712"></p>
<p>å®é™…ä¸Šï¼Œæˆ‘ä»¬çš„ä¸»é¡µåŠŸèƒ½æœ‰ä¸€ä¸ªé‡è¦çš„**<code>è§’è‰²æƒé™</code>**åŠŸèƒ½è¿˜æ²¡æœ‰å®Œæˆï¼Œæ­¤åŠŸèƒ½ç­‰åˆ°æˆ‘ä»¬å®ŒæˆåŸºæœ¬ä¸šåŠ¡ä¹‹åå†è¿›è¡Œå±•å¼€</p>
<p>ä¸­å°å¤§å‹åç«¯å¹³å°çš„æ·±å…¥æ˜¯ä¸€ä¸ª**<code>æŠ½ä¸å‰¥èŒ§</code>**çš„è¿‡ç¨‹ï¼Œå¾ªåºæ¸è¿›çš„æ˜ç™½æ¯ä¸€æ­¥çš„æ“ä½œæ˜¯éå¸¸å…³é”®çš„ã€‚</p>
<h1 id="4-è·¯ç”±å’Œé¡µé¢"><a href="#4-è·¯ç”±å’Œé¡µé¢" class="headerlink" title="4.è·¯ç”±å’Œé¡µé¢"></a>4.è·¯ç”±å’Œé¡µé¢</h1><h2 id="è·¯ç”±é¡µé¢æ•´ç†"><a href="#è·¯ç”±é¡µé¢æ•´ç†" class="headerlink" title="è·¯ç”±é¡µé¢æ•´ç†"></a>è·¯ç”±é¡µé¢æ•´ç†</h2><p><strong><code>ç›®æ ‡</code></strong> åˆ é™¤åŸºç¡€æ¨¡æ¿ä¸­é™„å¸¦çš„å¤šä½™é¡µé¢</p>
<blockquote>
<p>åŸºç¡€æ¨¡æ¿å¸®æˆ‘ä»¬æå‰å†…ç½®äº†ä¸€äº›é¡µé¢ï¼Œæœ¬ç« èŠ‚æˆ‘ä»¬è¿›è¡Œä¸€ä¸‹æ•´ç†</p>
</blockquote>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç±»ä¼¼è¿™ç§å¤§å‹ä¸­å°é¡¹ç›®çš„é¡µé¢è·¯ç”±æ˜¯å¦‚ä½•è®¾ç½®çš„ã€‚</p>
<p><strong>ç®€å•é¡¹ç›®</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827153753307.png" alt="image-20200827153753307"></p>
<p><strong>å½“å‰é¡¹ç›®ç»“æ„</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827155342126.png" alt="image-20200827155342126"></p>
<blockquote>
<p>ä¸ºä»€ä¹ˆè¦æ‹†æˆè‹¥å¹²ä¸ªè·¯ç”±æ¨¡å—å‘¢ï¼Ÿ </p>
</blockquote>
<p>å› ä¸ºå¤æ‚ä¸­å°é¡¹ç›®çš„é¡µé¢ä¼—å¤šï¼Œä¸å¯èƒ½æŠŠæ‰€æœ‰çš„ä¸šåŠ¡éƒ½é›†ä¸­åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸Šè¿›è¡Œç®¡ç†å’Œç»´æŠ¤ï¼Œå¹¶ä¸”è¿˜æœ‰æœ€é‡è¦çš„ï¼Œå‰ç«¯çš„é¡µé¢ä¸­ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯æ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®çš„ï¼Œ ä¸€éƒ¨åˆ†æ˜¯åªæœ‰æœ‰æƒé™çš„äººæ‰å¯ä»¥è®¿é—®çš„ï¼Œæ‹†åˆ†å¤šä¸ªæ¨¡å—ä¾¿äºæ›´å¥½çš„æ§åˆ¶</p>
<p><strong>é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716150421791.png" alt="image-20200716150421791"></p>
<p>**<code>æ³¨æ„</code>**è¿™é‡Œçš„åŠ¨æ€è·¯ç”±å¹¶ä¸æ˜¯ <strong>è·¯ç”±ä¼ å‚</strong>çš„åŠ¨æ€è·¯ç”±</p>
<p>äº†è§£å®Œæˆè·¯ç”±è®¾è®¡ä¹‹åï¼Œæˆ‘ä»¬å¯¹å½“å‰çš„è·¯ç”±è¿›è¡Œä¸€ä¸‹æ•´ç†</p>
<p><strong>åˆ é™¤å¤šä½™çš„é™æ€è·¯ç”±è¡¨</strong>   <strong><code>src/router/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * constantRoutes</span></span><br><span class="line"><span class="comment"> * a base page that does not have permission requirements</span></span><br><span class="line"><span class="comment"> * all roles can be accessed</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> constantRoutes = [</span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/login/index'</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/404'</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/404'</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span></span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  {</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">    <span class="attr">component</span>: Layout,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">'/dashboard'</span>,</span><br><span class="line">    <span class="attr">children</span>: [{</span><br><span class="line">      <span class="attr">path</span>: <span class="string">'dashboard'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'Dashboard'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/dashboard/index'</span>),</span><br><span class="line">      <span class="attr">meta</span>: { <span class="attr">title</span>: <span class="string">'Dashboard'</span>, <span class="attr">icon</span>: <span class="string">'dashboard'</span> }</span><br><span class="line">    }]</span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 404 page must be placed at the end !!!</span></span><br><span class="line">  { <span class="attr">path</span>: <span class="string">'*'</span>, <span class="attr">redirect</span>: <span class="string">'/404'</span>, <span class="attr">hidden</span>: <span class="literal">true</span> }</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢ä»£ç ï¼Œæˆ‘ä»¬åªå¯¹ç™»å½•é¡µ/404/ä¸»é¡µè¿›è¡Œäº†ä¿ç•™</p>
</blockquote>
<p>å¹¶ä¸”æˆ‘ä»¬å‘ç°ï¼Œåˆ é™¤äº†å…¶ä»–é¡µé¢ä¹‹åï¼Œå·¦ä¾§å¯¼èˆªèœå•çš„æ•°æ®ä¹Ÿåªå‰©ä¸‹äº†é¦–é¡µ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716153900077.png" alt="image-20200716153900077"></p>
<p><strong>è¿™æ˜¯å› ä¸ºå·¦ä¾§å¯¼èˆªèœå•çš„æ•°æ®æ¥æºäºè·¯ç”±ä¿¡æ¯</strong></p>
<p><strong>åˆ é™¤å¤šä½™çš„è·¯ç”±ç»„ä»¶</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716154315430.png" alt="image-20200716154315430"></p>
<blockquote>
<p>åªä¿ç•™ä»¥ä¸Šä¸‰ä¸ªè·¯ç”±ç»„ä»¶çš„å†…å®¹ï¼Œåç»­æ…¢æ…¢å¢åŠ </p>
</blockquote>
<p>åŒæ ·çš„åœ¨apiç›®å½•ä¸‹ï¼Œå­˜åœ¨å¤šä½™çš„api-table.js ä¸€å¹¶åˆ é™¤</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆä¸šåŠ¡è·¯ç”±é¡µé¢çš„æ•´ç†</p>
<h2 id="ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º"><a href="#ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º" class="headerlink" title="ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º"></a>ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º</h2><p>**<code>ç›®æ ‡</code>**ï¼š å¿«é€Ÿæ­å»ºäººèµ„é¡¹ç›®çš„å¸¸è§„ä¸šåŠ¡æ¨¡å—</p>
<h3 id="æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶"><a href="#æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶" class="headerlink" title="æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶"></a>æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶</h3><blockquote>
<p>æˆªæ­¢åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªä¸­å°ç³»ç»Ÿçš„åŸºæœ¬è½®å»“ï¼Œå¦‚å›¾</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200716224038544.png" alt="image-20200716224038544"></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†äººåŠ›èµ„æºéœ€è¦åšçš„æ¨¡å—å¿«é€Ÿæ­å»ºç›¸åº”çš„é¡µé¢å’Œè·¯ç”±</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ dashboard           <span class="comment"># é¦–é¡µ</span></span><br><span class="line">â”œâ”€â”€ login               <span class="comment"># ç™»å½•</span></span><br><span class="line">â”œâ”€â”€ 404                 <span class="comment"># 404</span></span><br><span class="line">â”œâ”€â”€ departments         <span class="comment"># ç»„ç»‡æ¶æ„</span></span><br><span class="line">â”œâ”€â”€ employees           <span class="comment"># å‘˜å·¥</span></span><br><span class="line">â”œâ”€â”€ setting             <span class="comment"># å…¬å¸è®¾ç½®</span></span><br><span class="line">â”œâ”€â”€ salarys             <span class="comment"># å·¥èµ„</span></span><br><span class="line">â”œâ”€â”€ social              <span class="comment"># ç¤¾ä¿</span></span><br><span class="line">â”œâ”€â”€ attendances         <span class="comment"># è€ƒå‹¤</span></span><br><span class="line">â”œâ”€â”€ approvals           <span class="comment"># å®¡æ‰¹</span></span><br><span class="line">â”œâ”€â”€ permission          <span class="comment"># æƒé™ç®¡ç†</span></span><br></pre></td></tr></tbody></table></figure>

<p>æ ¹æ®ä¸Šå›¾ä¸­çš„ç»“æ„ï¼Œåœ¨viewsç›®å½•ä¸‹ï¼Œå»ºç«‹å¯¹åº”çš„ç›®å½•ï¼Œç»™æ¯ä¸ªæ¨¡å—æ–°å»ºä¸€ä¸ª**<code>index.vue</code>**ï¼Œä½œä¸ºæ¯ä¸ªæ¨¡å—çš„ä¸»é¡µ</p>
<p><strong>å¿«é€Ÿæ–°å»ºæ–‡ä»¶å¤¹</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir departments employees setting salarys social attendances approvals permission</span><br></pre></td></tr></tbody></table></figure>

<p>æ¯ä¸ªæ¨¡å—çš„å†…å®¹ï¼Œå¯ä»¥å…ˆæŒ‰ç…§æ ‡å‡†çš„æ¨¡æ¿å»ºç«‹ï¼Œå¦‚</p>
<p><strong>å‘˜å·¥</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;h2&gt;</span><br><span class="line">        å‘˜å·¥</span><br><span class="line">      &lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ ¹æ®ä»¥ä¸Šçš„æ ‡å‡†å»ºç«‹å¥½å¯¹åº”é¡µé¢ä¹‹åï¼Œæ¥ä¸‹æ¥å»ºç«‹æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™</p>
</blockquote>
<p>è·¯ç”±æ¨¡å—ç›®å½•ç»“æ„</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ router               <span class="comment"># è·¯ç”±ç›®å½•</span></span><br><span class="line"> â”œâ”€â”€ index.js            <span class="comment"># è·¯ç”±ä¸»æ–‡ä»¶</span></span><br><span class="line"> â”œâ”€â”€ modules             <span class="comment"># æ¨¡å—ç›®å½•</span></span><br><span class="line">  â”œâ”€â”€ departments.js     <span class="comment"># ç»„ç»‡æ¶æ„</span></span><br><span class="line">  â”œâ”€â”€ employees.js       <span class="comment"># å‘˜å·¥ </span></span><br><span class="line">  â”œâ”€â”€ setting.js         <span class="comment"># å…¬å¸è®¾ç½®</span></span><br><span class="line">  â”œâ”€â”€ salarys.js         <span class="comment"># å·¥èµ„</span></span><br><span class="line">  â”œâ”€â”€ social.js          <span class="comment"># ç¤¾ä¿</span></span><br><span class="line">  â”œâ”€â”€ attendances.js     <span class="comment"># è€ƒå‹¤</span></span><br><span class="line">  â”œâ”€â”€ approvals.js       <span class="comment"># å®¡æ‰¹</span></span><br><span class="line">  â”œâ”€â”€ permission.js      <span class="comment"># æƒé™ç®¡ç†</span></span><br></pre></td></tr></tbody></table></figure>

<p>å¿«é€Ÿåˆ›å»ºå‘½ä»¤</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ touch departments.js employees.js setting.js salarys.js salarys.js social.js attendances.js approvals.js permission.js</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™"><a href="#è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™" class="headerlink" title="è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™"></a>è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™</h3><blockquote>
<p>æ¯ä¸ªæ¨¡å—å¯¼å‡ºçš„å†…å®¹è¡¨ç¤ºè¯¥æ¨¡å—ä¸‹çš„è·¯ç”±è§„åˆ™</p>
</blockquote>
<p>å¦‚å‘˜å·¥ <strong>employees.js</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºå±äºå‘˜å·¥çš„è·¯ç”±è§„åˆ™</span></span><br><span class="line"><span class="keyword">import</span> Layout <span class="keyword">from</span> <span class="string">'@/layout'</span></span><br><span class="line"><span class="comment">//  {  path: '', component: '' }</span></span><br><span class="line"><span class="comment">// æ¯ä¸ªå­æ¨¡å— å…¶å® éƒ½æ˜¯å¤–å±‚æ˜¯layout  ç»„ä»¶ä½äºlayoutçš„äºŒçº§è·¯ç”±é‡Œé¢</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/employees'</span>, <span class="comment">// è·¯å¾„</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">'employees'</span>, <span class="comment">// ç»™è·¯ç”±è§„åˆ™åŠ ä¸€ä¸ªname</span></span><br><span class="line">  <span class="attr">component</span>: Layout, <span class="comment">// ç»„ä»¶</span></span><br><span class="line">  <span class="comment">// é…ç½®äºŒçº§è·¯çš„è·¯ç”±è¡¨</span></span><br><span class="line">  <span class="attr">children</span>: [{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">''</span>, <span class="comment">// è¿™é‡Œå½“äºŒçº§è·¯ç”±çš„pathä»€ä¹ˆéƒ½ä¸å†™çš„æ—¶å€™ è¡¨ç¤ºè¯¥è·¯ç”±ä¸ºå½“å‰äºŒçº§è·¯ç”±çš„é»˜è®¤è·¯ç”±</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/employees'</span>),</span><br><span class="line">    <span class="comment">// è·¯ç”±å…ƒä¿¡æ¯  å…¶å®å°±æ˜¯å­˜å‚¨æ•°æ®çš„å¯¹è±¡ æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ”¾ç½®ä¸€äº›ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">meta</span>: {</span><br><span class="line">      <span class="attr">title</span>: <span class="string">'å‘˜å·¥ç®¡ç†'</span> <span class="comment">// metaå±æ€§çš„é‡Œé¢çš„å±æ€§ éšæ„å®šä¹‰ ä½†æ˜¯è¿™é‡Œä¸ºä»€ä¹ˆè¦ç”¨titleå‘¢ï¼Œ å› ä¸ºå·¦ä¾§å¯¼èˆªä¼šè¯»å–æˆ‘ä»¬çš„è·¯ç”±é‡Œçš„metaé‡Œé¢çš„titleä½œä¸ºæ˜¾ç¤ºèœå•åç§°</span></span><br><span class="line">    }</span><br><span class="line">  }]</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“ä½ çš„è®¿é—®åœ°å€ æ˜¯ /employeesçš„æ—¶å€™ layoutç»„ä»¶ä¼šæ˜¾ç¤º æ­¤æ—¶ ä½ çš„äºŒçº§è·¯ç”±çš„é»˜è®¤ç»„ä»¶  ä¹Ÿä¼šæ˜¾ç¤º</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†metaå±æ€§ï¼Œè¯¥å±æ€§ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢å¯æ”¾ç½®è‡ªå®šä¹‰å±æ€§ï¼Œä¸»è¦ç”¨äºè¯»å–ä¸€äº›é…ç½®å’Œå‚æ•°ï¼Œå¹¶ä¸”å€¼å¾—**<code>æ³¨æ„</code><strong>çš„æ˜¯ï¼šæˆ‘ä»¬çš„metaå†™äº†äºŒçº§é»˜è®¤è·¯ç”±ä¸Šé¢ï¼Œè€Œä¸æ˜¯ä¸€çº§è·¯ç”±ï¼Œå› ä¸ºå½“å­˜åœ¨äºŒçº§è·¯ç”±çš„æ—¶å€™ï¼Œè®¿é—®å½“å‰è·¯ç”±ä¿¡æ¯è®¿é—®çš„å°±æ˜¯</strong><code>äºŒçº§é»˜è®¤è·¯ç”±</code>**</p>
</blockquote>
<p>å¤§å®¶é’ˆå¯¹ä¸Šè¿°çš„è®¾è®¡ï¼Œå¯¹ä¸Šé¢çš„æ¨¡å—è¿›è¡Œå¿«é€Ÿçš„æ­å»º</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆå…¶ä»–æ¨¡å—çš„é¡µé¢å’Œè·¯ç”±çš„å¿«é€Ÿæ­å»º</p>
<h2 id="é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•"><a href="#é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•" class="headerlink" title="é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•"></a>é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•</h2><p>**<code>ç›®æ ‡</code>**ï¼š å°†é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±çš„è·¯ç”±è¡¨è¿›è¡Œä¸´æ—¶åˆå¹¶</p>
<blockquote>
<p>ä»€ä¹ˆå«ä¸´æ—¶åˆå¹¶ï¼Ÿ</p>
</blockquote>
<p>åœ¨ç¬¬ä¸€ä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬è®²è¿‡äº†ï¼ŒåŠ¨æ€è·¯ç”±æ˜¯éœ€è¦æƒé™è¿›è¡Œè®¿é—®çš„ï¼Œä½†æ˜¯æƒé™çš„åŠ¨æ€è·¯ç”±è®¿é—®æ˜¯å¾ˆå¤æ‚çš„ï¼Œæˆ‘ä»¬ç¨ååœ¨è¿›è¡Œè®²è§£ï¼Œæ‰€ä»¥ä¸ºäº†æ›´å¥½åœ°çœ‹åˆ°æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°† é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±è¿›è¡Œåˆå¹¶</p>
<p><strong>è·¯ç”±ä¸»æ–‡ä»¶</strong>  <strong><code>src/router/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥å¤šä¸ªæ¨¡å—çš„è§„åˆ™</span></span><br><span class="line"><span class="keyword">import</span> approvalsRouter <span class="keyword">from</span> <span class="string">'./modules/approvals'</span></span><br><span class="line"><span class="keyword">import</span> departmentsRouter <span class="keyword">from</span> <span class="string">'./modules/departments'</span></span><br><span class="line"><span class="keyword">import</span> employeesRouter <span class="keyword">from</span> <span class="string">'./modules/employees'</span></span><br><span class="line"><span class="keyword">import</span> permissionRouter <span class="keyword">from</span> <span class="string">'./modules/permission'</span></span><br><span class="line"><span class="keyword">import</span> attendancesRouter <span class="keyword">from</span> <span class="string">'./modules/attendances'</span></span><br><span class="line"><span class="keyword">import</span> salarysRouter <span class="keyword">from</span> <span class="string">'./modules/salarys'</span></span><br><span class="line"><span class="keyword">import</span> settingRouter <span class="keyword">from</span> <span class="string">'./modules/setting'</span></span><br><span class="line"><span class="keyword">import</span> socialRouter <span class="keyword">from</span> <span class="string">'./modules/social'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ¨æ€è·¯ç”±</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> asyncRoutes = [</span><br><span class="line">  approvalsRouter,</span><br><span class="line">  departmentsRouter,</span><br><span class="line">  employeesRouter,</span><br><span class="line">  permissionRouter,</span><br><span class="line">  attendancesRouter,</span><br><span class="line">  salarysRouter,</span><br><span class="line">  settingRouter,</span><br><span class="line">  socialRouter</span><br><span class="line">]</span><br><span class="line"><span class="keyword">const</span> createRouter = <span class="function">() =&gt;</span> <span class="keyword">new</span> Router({</span><br><span class="line">  <span class="comment">// mode: 'history', // require service support</span></span><br><span class="line">  <span class="attr">scrollBehavior</span>: <span class="function">() =&gt;</span> ({ <span class="attr">y</span>: <span class="number">0</span> }), <span class="comment">// ç®¡ç†æ»šåŠ¨è¡Œä¸º å¦‚æœå‡ºç°æ»šåŠ¨ åˆ‡æ¢å°±è®© è®©é¡µé¢å›åˆ°é¡¶éƒ¨</span></span><br><span class="line">  <span class="attr">routes</span>: [...constantRoutes, ...asyncRoutes] <span class="comment">// ä¸´æ—¶åˆå¹¶æ‰€æœ‰çš„è·¯ç”±</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡ä¸Šé¢çš„æ“ä½œï¼Œæˆ‘ä»¬å°†é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±è¿›è¡Œäº†åˆå¹¶</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200827170403463.png" alt="image-20200827170403463"></p>
<p>å½“æˆ‘ä»¬åˆå¹¶æƒé™å®Œæˆï¼Œæˆ‘ä»¬æƒŠå¥‡çš„å‘ç°é¡µé¢æ•ˆæœå·²ç»å·¦ä¾§çš„å¯¼èˆªèœå• =ã€‹ è·¯ç”±é¡µé¢</p>
<p>è¿™æ˜¯ä¹‹å‰åŸºç¡€æ¨¡æ¿ä¸­å¯¹äºå·¦ä¾§å¯¼èˆªèœå•çš„å°è£…</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720003233026.png" alt="image-20200720003233026"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å°†é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå• </p>
<h2 id="å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡"><a href="#å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡" class="headerlink" title="å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡"></a>å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡</h2><p><strong><code>ç›®æ ‡</code></strong>  è§£æå·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œ  è®¾ç½®å·¦ä¾§å¯¼èˆªèœå•çš„å›¾æ ‡å†…å®¹</p>
<blockquote>
<p>ä¸Šå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬é›†æˆäº†è·¯ç”±ï¼Œèœå•å°±æ˜¾ç¤ºå†…å®¹äº†ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆ ï¼Ÿ</p>
</blockquote>
<p><strong>é˜…è¯»å·¦ä¾§èœå•ä»£ç </strong></p>
<blockquote>
<p>æˆ‘ä»¬å‘ç°å¦‚å›¾çš„é€»è¾‘</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200828103109646.png" alt="image-20200828103109646"></p>
<p>ç”±äºï¼Œè¯¥é¡¹ç›®ä¸éœ€è¦äºŒçº§èœå•çš„æ˜¾ç¤ºï¼Œæ‰€ä»¥å¯¹ä»£ç è¿›è¡Œä¸€ä¸‹å¤„ç†ï¼Œåªä¿ç•™ä¸€çº§èœå•è·¯ç”±</p>
<p><strong><code>src/layout/components/Sidebar/SidebarItem.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-if="!item.hidden"&gt;</span><br><span class="line">    &lt;template v-if="hasOneShowingChild(item.children,item) &amp;&amp; (!onlyOneChild.children||onlyOneChild.noShowingChildren)&amp;&amp;!item.alwaysShow"&gt;</span><br><span class="line">      &lt;app-link v-if="onlyOneChild.meta" :to="resolvePath(onlyOneChild.path)"&gt;</span><br><span class="line">        &lt;el-menu-item :index="resolvePath(onlyOneChild.path)" :class="{'submenu-title-noDropdown':!isNest}"&gt;</span><br><span class="line">          &lt;item :icon="onlyOneChild.meta.icon||(item.meta&amp;&amp;item.meta.icon)" :title="onlyOneChild.meta.title" /&gt;</span><br><span class="line">        &lt;/el-menu-item&gt;</span><br><span class="line">      &lt;/app-link&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- &lt;el-submenu v-else ref="subMenu" :index="resolvePath(item.path)" popper-append-to-body&gt;</span><br><span class="line">      &lt;template slot="title"&gt;</span><br><span class="line">        &lt;item v-if="item.meta" :icon="item.meta &amp;&amp; item.meta.icon" :title="item.meta.title" /&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;sidebar-item</span><br><span class="line">        v-for="child in item.children"</span><br><span class="line">        :key="child.path"</span><br><span class="line">        :is-nest="true"</span><br><span class="line">        :item="child"</span><br><span class="line">        :base-path="resolvePath(child.path)"</span><br><span class="line">        class="nest-menu"</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/el-submenu&gt; --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šé€šè¿‡ä»£ç å‘ç°ï¼Œå½“è·¯ç”±ä¸­çš„å±æ€§</strong><code>hidden</code>**ä¸ºtrueæ—¶ï¼Œè¡¨ç¤ºè¯¥è·¯ç”±ä¸æ˜¾ç¤ºåœ¨å·¦ä¾§èœå•ä¸­</p>
<blockquote>
<p>ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬å‘ç°å·¦ä¾§èœå•å¹¶ä¸åè°ƒï¼Œæ˜¯å› ä¸ºç¼ºå°‘å›¾æ ‡ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬çš„å›¾æ ‡é‡‡ç”¨äº†SVGçš„ç»„ä»¶</p>
</blockquote>
<p>å·¦ä¾§èœå•çš„å›¾æ ‡å®é™…ä¸Šè¯»å–çš„æ˜¯metaå±æ€§çš„iconï¼Œè¿™ä¸ªiconéœ€è¦æˆ‘ä»¬æå‰æ”¾ç½®åœ¨**<code>src/icons/svg</code>**ç›®å½•ä¸‹</p>
<blockquote>
<p>è¯¥èµ„æºå·²ç»åœ¨èœå•svgç›®å½•ä¸­æä¾›ï¼Œè¯·å°†è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰svgæ”¾åˆ°**<code>src/icons/svg</code>**ç›®å½•ä¸‹</p>
</blockquote>
<p> å…·ä½“çš„iconåç§°å¯å‚è€ƒ<a target="_blank" rel="noopener" href="https://panjiachen.github.io/vue-element-admin/#/icon/index">çº¿ä¸Šåœ°å€</a></p>
<p>functionalä¸ºtrueï¼Œè¡¨ç¤ºè¯¥ç»„ä»¶ä¸ºä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶</p>
<p>å‡½æ•°å¼ç»„ä»¶ï¼š æ²¡æœ‰dataçŠ¶æ€ï¼Œæ²¡æœ‰å“åº”å¼æ•°æ®ï¼Œåªä¼šæ¥æ”¶propså±æ€§ï¼Œ æ²¡æœ‰thisï¼Œ ä»–å°±æ˜¯ä¸€ä¸ªå‡½æ•°</p>
<p><strong>æ¨¡å—å¯¹åº”icon</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ dashboard           <span class="comment"># dashboard</span></span><br><span class="line">â”œâ”€â”€ departments         <span class="comment"># tree</span></span><br><span class="line">â”œâ”€â”€ employees           <span class="comment"># people</span></span><br><span class="line">â”œâ”€â”€ setting             <span class="comment"># setting</span></span><br><span class="line">â”œâ”€â”€ salarys             <span class="comment"># money</span></span><br><span class="line">â”œâ”€â”€ social              <span class="comment"># table</span></span><br><span class="line">â”œâ”€â”€ attendances         <span class="comment"># skill</span></span><br><span class="line">â”œâ”€â”€ approvals           <span class="comment"># tree-table</span></span><br><span class="line">â”œâ”€â”€ permission          <span class="comment"># lock</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720010016813.png" alt="image-20200720010016813"></p>
<p>æŒ‰ç…§å¯¹åº”çš„iconè®¾ç½®å›¾æ ‡</p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡ï¼š</code></strong> ç†è§£å·¦ä¾§èœå•çš„ç”Ÿæˆé€»è¾‘ï¼Œå¹¶è®¾ç½®å·¦ä¾§èœå•çš„å›¾æ ‡</p>
<h1 id="5-ç»„ç»‡ç»“æ„"><a href="#5-ç»„ç»‡ç»“æ„" class="headerlink" title="5.ç»„ç»‡ç»“æ„"></a>5.ç»„ç»‡ç»“æ„</h1><h2 id="ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€"><a href="#ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€" class="headerlink" title="ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€"></a>ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€</h2><p>**<code>ç›®æ ‡</code>**ï¼šä½¿ç”¨element-UIç»„ä»¶å¸ƒå±€ç»„ç»‡æ¶æ„çš„åŸºæœ¬å¸ƒå±€</p>
<h3 id="è®¤è¯†ç»„ç»‡æ¶æ„"><a href="#è®¤è¯†ç»„ç»‡æ¶æ„" class="headerlink" title="è®¤è¯†ç»„ç»‡æ¶æ„"></a>è®¤è¯†ç»„ç»‡æ¶æ„</h3><p><a href="%5Bhttp://czpm.itcast.cn/ihrm/#g=1&amp;p=%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%5D(http://czpm.itcast.cn/ihrm/#g=1&amp;p=%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84)">ç»„ç»‡æ¶æ„äº§å“prd</a></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200828105046683.png" alt="image-20200828105046683"></p>
<blockquote>
<p>ä¸€ä¸ªä¼ä¸šçš„ç»„ç»‡æ¶æ„æ˜¯è¯¥ä¼ä¸šçš„çµé­‚ï¼Œç»„ç»‡æ¶æ„å¤šå¸¸é‡‡ç”¨æ ‘å½¢é‡‘å­—å¡”å¼ç»“æ„ï¼Œæœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å¸ƒå±€å‡ºé¡µé¢çš„åŸºæœ¬ç»“æ„</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720010954202.png" alt="image-20200720010954202"> </p>
<h3 id="å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹"><a href="#å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹" class="headerlink" title="å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹"></a>å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹</h3><p>é¦–å…ˆå®ç°å¤´éƒ¨çš„ç»“æ„ï¼Œé‡‡ç”¨elementçš„<strong>è¡Œåˆ—å¸ƒå±€</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-card class="tree-card"&gt;</span><br><span class="line">     &lt;!-- ç”¨äº†ä¸€ä¸ªè¡Œåˆ—å¸ƒå±€ --&gt;</span><br><span class="line">     &lt;el-row type="flex" justify="space-between" align="middle" style="height: 40px"&gt;</span><br><span class="line">       &lt;el-col&gt;</span><br><span class="line">         &lt;span&gt;æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸&lt;/span&gt;</span><br><span class="line">       &lt;/el-col&gt;</span><br><span class="line">       &lt;el-col :span="4"&gt;</span><br><span class="line">         &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">           &lt;!-- ä¸¤ä¸ªå†…å®¹ --&gt;</span><br><span class="line">           &lt;el-col&gt;è´Ÿè´£äºº&lt;/el-col&gt;</span><br><span class="line">           &lt;el-col&gt;</span><br><span class="line">             &lt;!-- ä¸‹æ‹‰èœå• element --&gt;</span><br><span class="line">             &lt;el-dropdown&gt;</span><br><span class="line">               &lt;span&gt;</span><br><span class="line">                 æ“ä½œ&lt;i class="el-icon-arrow-down" /&gt;</span><br><span class="line">               &lt;/span&gt;</span><br><span class="line">               &lt;!-- ä¸‹æ‹‰èœå• --&gt;</span><br><span class="line">               &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">                 &lt;el-dropdown-item&gt;æ·»åŠ å­éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">               &lt;/el-dropdown-menu&gt;</span><br><span class="line">             &lt;/el-dropdown&gt;</span><br><span class="line">           &lt;/el-col&gt;</span><br><span class="line">         &lt;/el-row&gt;</span><br><span class="line">       &lt;/el-col&gt;</span><br><span class="line">     &lt;/el-row&gt;</span><br><span class="line">   &lt;/el-card&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ ·å¼</strong></p>
<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line"><span class="selector-class">.tree-card</span> {</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">30px</span>  <span class="number">140px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">14px</span>;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720180221662.png" alt="image-20200720180221662"></p>
<h3 id="æ ‘å½¢ç»„ä»¶è®¤è¯†"><a href="#æ ‘å½¢ç»„ä»¶è®¤è¯†" class="headerlink" title="æ ‘å½¢ç»„ä»¶è®¤è¯†"></a>æ ‘å½¢ç»„ä»¶è®¤è¯†</h3><p>æ¥ä¸‹æ¥ï¼Œå®ç°æ ‘å½¢çš„ç»“æ„ï¼Œé‡‡ç”¨elementçš„**<a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/tree">treeç»„ä»¶</a>**ï¼Œ å¦‚å›¾æ•ˆæœ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200828105634138.png" alt="image-20200828105634138"></p>
<blockquote>
<p>æ ‘å½¢ç»„ä»¶å±æ€§</p>
</blockquote>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
<th align="left">ç±»å‹</th>
<th align="left">å¯é€‰å€¼</th>
<th align="left">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">default-expand-all</td>
<td align="left">æ˜¯å¦é»˜è®¤å±•å¼€æ‰€æœ‰èŠ‚ç‚¹</td>
<td align="left">boolean</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">data</td>
<td align="left">å±•ç¤ºæ•°æ®</td>
<td align="left">array</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">node-key</td>
<td align="left">æ¯ä¸ªæ ‘èŠ‚ç‚¹ç”¨æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„å±æ€§ï¼Œæ•´æ£µæ ‘åº”è¯¥æ˜¯å”¯ä¸€çš„</td>
<td align="left">String</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">props</td>
<td align="left">é…ç½®é€‰é¡¹ï¼Œå…·ä½“çœ‹ä¸‹è¡¨</td>
<td align="left">object</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
</tbody></table>
<p><strong>propså±æ€§</strong></p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
<th align="left">ç±»å‹</th>
<th align="left">å¯é€‰å€¼</th>
<th align="left">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">label</td>
<td align="left">æŒ‡å®šèŠ‚ç‚¹æ ‡ç­¾ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">string, function(data, node)</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">children</td>
<td align="left">æŒ‡å®šå­æ ‘ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">string</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">disabled</td>
<td align="left">æŒ‡å®šèŠ‚ç‚¹é€‰æ‹©æ¡†æ˜¯å¦ç¦ç”¨ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">boolean, function(data, node)</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">isLeaf</td>
<td align="left">æŒ‡å®šèŠ‚ç‚¹æ˜¯å¦ä¸ºå¶å­èŠ‚ç‚¹ï¼Œä»…åœ¨æŒ‡å®šäº† lazy å±æ€§çš„æƒ…å†µä¸‹ç”Ÿæ•ˆ</td>
<td align="left">boolean, function(data, node)</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
</tbody></table>
<p><strong>data</strong>æ˜¯ç»„æˆæ ‘å½¢æ•°æ®çš„å…³é”®ï¼Œå¦‚ä¸‹çš„æ•°æ®ä¾¿èƒ½æ„å»ºæ ‘å½¢æ•°æ®</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[{</span><br><span class="line">         label: 'ä¸€çº§ <span class="number">1</span>',</span><br><span class="line">         children: [{</span><br><span class="line">           label: 'äºŒçº§ <span class="number">1</span><span class="number">-1</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">1</span><span class="number">-1</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }]</span><br><span class="line">       }, {</span><br><span class="line">         label: 'ä¸€çº§ <span class="number">2</span>',</span><br><span class="line">         children: [{</span><br><span class="line">           label: 'äºŒçº§ <span class="number">2</span><span class="number">-1</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">2</span><span class="number">-1</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }, {</span><br><span class="line">           label: 'äºŒçº§ <span class="number">2</span><span class="number">-2</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">2</span><span class="number">-2</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }]</span><br><span class="line">       }, {</span><br><span class="line">         label: 'ä¸€çº§ <span class="number">3</span>',</span><br><span class="line">         children: [{</span><br><span class="line">           label: 'äºŒçº§ <span class="number">3</span><span class="number">-1</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">3</span><span class="number">-1</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }, {</span><br><span class="line">           label: 'äºŒçº§ <span class="number">3</span><span class="number">-2</span>',</span><br><span class="line">           children: [{</span><br><span class="line">             label: 'ä¸‰çº§ <span class="number">3</span><span class="number">-2</span><span class="number">-1</span>'</span><br><span class="line">           }]</span><br><span class="line">         }]</span><br><span class="line">       }]</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200720232914114.png" alt="image-20200720232914114"></p>
<h3 id="å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„"><a href="#å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„" class="headerlink" title="å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„"></a>å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„</h3><p>ç”±æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆå®ç°é™æ€æ•°æ®çš„ç»„ç»‡æ¶æ„</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> &lt;!--æ”¾ç½®ä¸€ä¸ªå±æ€§   è¿™é‡Œçš„propså’Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„çˆ¶ä¼ å­ çš„propsæ²¡å…³ç³»--&gt;</span><br><span class="line"> &lt;el-tree :data="departs" :props="defaultProps" /&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      defaultProps: {</span><br><span class="line">        label: 'name'</span><br><span class="line">      },</span><br><span class="line">      departs: [{ name: 'æ€»è£åŠ', children: [{ name: 'è‘£äº‹ä¼š' }] },</span><br><span class="line">        { name: 'è¡Œæ”¿éƒ¨' }, { name: 'äººäº‹éƒ¨' }]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ¥ä¸‹æ¥ï¼Œå¯¹æ¯ä¸ªå±‚çº§èŠ‚ç‚¹å¢åŠ æ˜¾ç¤ºå†…å®¹ï¼Œæ­¤æ—¶éœ€è¦ç”¨åˆ°treeçš„æ’æ§½</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"> &lt;el-tree :data="departs" :props="defaultProps" :default-expand-all="true"&gt;</span><br><span class="line">          &lt;!-- ä¼ å…¥å†…å®¹ æ’æ§½å†…å®¹ ä¼šå¾ªç¯å¤šæ¬¡ æœ‰å¤šå°‘èŠ‚ç‚¹ å°±å¾ªç¯å¤šå°‘æ¬¡ --&gt;</span><br><span class="line">          &lt;!-- ä½œç”¨åŸŸæ’æ§½ slot-scope="obj" æ¥æ”¶ä¼ é€’ç»™æ’æ§½çš„æ•°æ®   data æ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®å¯¹è±¡--&gt;</span><br><span class="line">          &lt;el-row slot-scope="{ data }" type="flex" justify="space-between" align="middle" style="height: 40px; width: 100%"&gt;</span><br><span class="line">            &lt;el-col&gt;</span><br><span class="line">              &lt;!-- å·¦ä¾§å†…å®¹ --&gt;</span><br><span class="line">              &lt;span&gt;{{ data.name }}&lt;/span&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">            &lt;el-col :span="4"&gt;</span><br><span class="line">              &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">                &lt;el-col&gt;{{ data.manager }}&lt;/el-col&gt;</span><br><span class="line">                &lt;el-col&gt;</span><br><span class="line">                  &lt;!-- æ”¾ç½®ä¸‹æ‹‰èœå• --&gt;</span><br><span class="line">                  &lt;el-dropdown&gt;</span><br><span class="line">                    &lt;!-- å†…å®¹ --&gt;</span><br><span class="line">                    &lt;span&gt;æ“ä½œ</span><br><span class="line">                      &lt;i class="el-icon-arrow-down" /&gt;</span><br><span class="line">                    &lt;/span&gt;</span><br><span class="line">                    &lt;!-- å…·åæ’æ§½ --&gt;</span><br><span class="line">                    &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">                      &lt;!-- ä¸‹æ‹‰é€‰é¡¹ --&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;æ·»åŠ å­éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;ç¼–è¾‘éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;åˆ é™¤éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;/el-dropdown-menu&gt;</span><br><span class="line">                  &lt;/el-dropdown&gt;</span><br><span class="line">                &lt;/el-col&gt;</span><br><span class="line">              &lt;/el-row&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- å³ä¾§å†…å®¹ --&gt;</span><br><span class="line">            &lt;/el-col&gt;</span><br><span class="line">          &lt;/el-row&gt;        &lt;/el-tree&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      departs: [{ name: 'æ€»è£åŠ', manager: 'æ›¹æ“', children: [{ name: 'è‘£äº‹ä¼š', manager: 'æ›¹ä¸•' }] },</span><br><span class="line">        { name: 'è¡Œæ”¿éƒ¨', manager: 'åˆ˜å¤‡' },</span><br><span class="line">        { name: 'äººäº‹éƒ¨', manager: 'å­™æƒ' }],</span><br><span class="line">      defaultProps: {</span><br><span class="line">        label: 'name' // è¡¨ç¤º ä»è¿™ä¸ªå±æ€§æ˜¾ç¤ºå†…å®¹</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆå½¢æˆé™æ€ç»“æ„æ•ˆæœ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200912150032528.png" alt="image-20200912150032528"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆæ ‘å½¢ç»“æ„çš„æ˜¾ç¤º</p>
<h2 id="å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶"><a href="#å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶" class="headerlink" title="å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶"></a>å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶</h2><p>**<code>ç›®æ ‡</code>**ï¼š å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶</p>
<h3 id="å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶"><a href="#å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶" class="headerlink" title="å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶"></a>å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶</h3><blockquote>
<p>é€šè¿‡ç¬¬ä¸€ä¸ªç« èŠ‚ï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ ‘å½¢çš„é¡¶çº§å†…å®¹å®é™…å’Œå­èŠ‚ç‚¹çš„å†…å®¹æ˜¯ä¸€è‡´çš„ï¼Œæ­¤æ—¶å¯ä»¥å°†è¯¥éƒ¨åˆ†æŠ½ææˆä¸€ä¸ªç»„ä»¶ï¼ŒèŠ‚çœä»£ç </p>
</blockquote>
<p>ç»„ä»¶ <strong><code>src/views/departments/components/tree-tools.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-row type="flex" justify="space-between" align="middle" style="height: 40px;width: 100%"&gt;</span><br><span class="line">    &lt;el-col&gt;</span><br><span class="line">      &lt;!-- åç§°åº”è¯¥å˜æˆ å¯¹åº”çš„èŠ‚ç‚¹ä¸­çš„name --&gt;</span><br><span class="line">      &lt;span&gt;{{ treeNode.name }}&lt;/span&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">    &lt;el-col :span="4"&gt;</span><br><span class="line">      &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">        &lt;!-- ä¸¤ä¸ªå†…å®¹ --&gt;</span><br><span class="line">        &lt;el-col&gt;{{ treeNode.manager }}&lt;/el-col&gt;</span><br><span class="line">        &lt;el-col&gt;</span><br><span class="line">          &lt;!-- ä¸‹æ‹‰èœå• element --&gt;</span><br><span class="line">          &lt;el-dropdown&gt;</span><br><span class="line">            &lt;span&gt;</span><br><span class="line">              æ“ä½œ&lt;i class="el-icon-arrow-down" /&gt;</span><br><span class="line">            &lt;/span&gt;</span><br><span class="line">            &lt;!-- ä¸‹æ‹‰èœå• --&gt;</span><br><span class="line">            &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;æ·»åŠ å­éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;ç¼–è¾‘éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">              &lt;el-dropdown-item&gt;åˆ é™¤éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/el-dropdown-menu&gt;</span><br><span class="line">          &lt;/el-dropdown&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// è¯¥ç»„ä»¶éœ€è¦å¯¹å¤–å¼€æ”¾å±æ€§ å¤–éƒ¨éœ€è¦æä¾›ä¸€ä¸ªå¯¹è±¡ å¯¹è±¡é‡Œéœ€è¦æœ‰name  manager</span><br><span class="line">export default {</span><br><span class="line">  // propså¯ä»¥ç”¨æ•°ç»„æ¥æ¥æ”¶æ•°æ® ä¹Ÿå¯ä»¥ç”¨å¯¹è±¡æ¥æ¥æ”¶</span><br><span class="line">  // props: {   propså±æ€§: {  é…ç½®é€‰é¡¹ }  }</span><br><span class="line">  props: {</span><br><span class="line">    //   å®šä¹‰ä¸€ä¸ªpropså±æ€§</span><br><span class="line">    treeNode: {</span><br><span class="line">      type: Object, // å¯¹è±¡ç±»å‹</span><br><span class="line">      required: true // è¦æ±‚å¯¹æ–¹ä½¿ç”¨æ‚¨çš„ç»„ä»¶çš„æ—¶å€™ å¿…é¡»ä¼ treeNodeå±æ€§ å¦‚æœä¸ä¼  å°±ä¼šæŠ¥é”™</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶"><a href="#åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶" class="headerlink" title="åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶"></a>åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶</h3><p>æ¥ä¸‹æ¥ï¼Œåœ¨**<code>src/views/departments/index.vue</code>**è¿›è¡Œä»£ç çš„ç®€åŒ–</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;!-- å®ç°é¡µé¢çš„åŸºæœ¬å¸ƒå±€ --&gt;</span><br><span class="line">      &lt;el-card class="tree-card"&gt;</span><br><span class="line">        &lt;!-- ç”¨äº†ä¸€ä¸ªè¡Œåˆ—å¸ƒå±€ --&gt;</span><br><span class="line">        &lt;!-- ç¼ºå°‘treeNode --&gt;</span><br><span class="line">        &lt;tree-tools :tree-node="company" /&gt;</span><br><span class="line">        &lt;!--æ”¾ç½®ä¸€ä¸ªå±æ€§   è¿™é‡Œçš„propså’Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„çˆ¶ä¼ å­ çš„propsæ²¡å…³ç³»--&gt;</span><br><span class="line">        &lt;el-tree :data="departs" :props="defaultProps" default-expand-all&gt;</span><br><span class="line">          &lt;!-- è¯´æ˜el-treeé‡Œé¢çš„è¿™ä¸ªå†…å®¹ å°±æ˜¯æ’æ§½å†…å®¹ =&gt; å¡«å‘å†…å®¹  =&gt; æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹å¾ªç¯å¤šå°‘æ¬¡ --&gt;</span><br><span class="line">          &lt;!-- scope-scope æ˜¯ treeç»„ä»¶ä¼ ç»™æ¯ä¸ªèŠ‚ç‚¹çš„æ’æ§½çš„å†…å®¹çš„æ•°æ® --&gt;</span><br><span class="line">          &lt;!-- é¡ºåºä¸€å®šæ˜¯ æ‰§è¡Œslot-scopeçš„èµ‹å€¼ æ‰å»æ‰§è¡Œ propsçš„ä¼ å€¼ --&gt;</span><br><span class="line">          &lt;tree-tools slot-scope="{ data }" :tree-node="data" /&gt;</span><br><span class="line">        &lt;/el-tree&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œcompanyå˜é‡éœ€è¦åœ¨dataä¸­å®šä¹‰</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">company: { <span class="attr">name</span>: <span class="string">'æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸'</span>, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span> },</span><br></pre></td></tr></tbody></table></figure>

<p>åŒæ—¶ï¼Œç”±äºåœ¨ä¸¤ä¸ªä½ç½®éƒ½ä½¿ç”¨äº†è¯¥ç»„ä»¶ï¼Œä½†æ˜¯æ”¾ç½®åœ¨æœ€ä¸Šå±‚çš„ç»„ä»¶æ˜¯ä¸éœ€è¦æ˜¾ç¤º **<code>åˆ é™¤éƒ¨é—¨</code><strong>å’Œ</strong><code>ç¼–è¾‘éƒ¨é—¨</code>**çš„</p>
<p>æ‰€ä»¥ï¼Œå¢åŠ ä¸€ä¸ªæ–°çš„å±æ€§ **<code>isRootï¼ˆæ˜¯å¦æ ¹èŠ‚ç‚¹ï¼‰</code>**è¿›è¡Œæ§åˆ¶</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">props: {</span><br><span class="line">   <span class="attr">treeNode</span>: {</span><br><span class="line">     <span class="attr">required</span>: <span class="literal">true</span>, <span class="comment">// è®¾ç½®å½“å‰æ•°æ®ä¸ºå¿…å¡«</span></span><br><span class="line">     <span class="attr">type</span>: <span class="built_in">Object</span> <span class="comment">// ç±»å‹æ˜¯Object</span></span><br><span class="line">   },</span><br><span class="line">   <span class="attr">isRoot</span>: {</span><br><span class="line">     <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">     <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">   }</span><br><span class="line"> }</span><br><span class="line">&lt;tree-tools :tree-node=<span class="string">"company"</span> :is-root=<span class="string">"true"</span> /&gt;</span><br><span class="line">    </span><br></pre></td></tr></tbody></table></figure>

<p>ç»„ä»¶ä¸­ï¼Œ æ ¹æ®isRootåˆ¤æ–­æ˜¾ç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ç¼–è¾‘éƒ¨é—¨å’Œåˆ é™¤éƒ¨é—¨åªä¼šåœ¨å­èŠ‚ç‚¹ä¸Šæ˜¾ç¤º --&gt;</span><br><span class="line">     &lt;el-dropdown-item v-if="!isRoot"&gt;ç¼–è¾‘éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;el-dropdown-item v-if="!isRoot"&gt;åˆ é™¤éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡å°è£…ï¼Œä»£ç çœ‹ä¸Šå»æ›´åŠ ç´§å‡‘ï¼Œç®€æ´ï¼Œè¿™å°±æ˜¯å°è£…çš„é­…åŠ›</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå°†æ ‘å½¢å†…å®¹å•ç‹¬æŠ½æç»„ä»¶</p>
<h2 id="è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†"><a href="#è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†" class="headerlink" title="è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†"></a>è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†</h2><p>**<code>ç›®æ ‡</code>**è·å–çœŸå®çš„ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶å°†å…¶è½¬åŒ–æˆæ ‘å½¢æ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</p>
<h3 id="å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®"><a href="#å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®" class="headerlink" title="å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®"></a>å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®</h3><blockquote>
<p>ç°åœ¨åŸºæœ¬çš„é™æ€ç»“æ„å·²ç»å½¢æˆï¼Œæ¥ä¸‹æ¥éœ€è¦è·å–çœŸå®çš„æ•°æ®</p>
</blockquote>
<p>é¦–å…ˆï¼Œ<strong>å°è£…è·å–ç»„ç»‡æ¶æ„çš„è¯·æ±‚</strong> <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * è·å–ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDepartments</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/company/department'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨é’©å­å‡½æ•°ä¸­è°ƒç”¨æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> TreeTools <span class="keyword">from</span> <span class="string">'./components/tree-tools'</span></span><br><span class="line"><span class="keyword">import</span> { getDepartments } <span class="keyword">from</span> <span class="string">'@/api/departments'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">components</span>: {</span><br><span class="line">    TreeTools</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">company</span>: { }, <span class="comment">// å°±æ˜¯å¤´éƒ¨çš„æ•°æ®ç»“æ„</span></span><br><span class="line">      <span class="attr">departs</span>: [],</span><br><span class="line">      <span class="attr">defaultProps</span>: {</span><br><span class="line">        <span class="attr">label</span>: <span class="string">'name'</span> <span class="comment">// è¡¨ç¤º ä»è¿™ä¸ªå±æ€§æ˜¾ç¤ºå†…å®¹</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getDepartments() <span class="comment">// è°ƒç”¨è‡ªèº«çš„æ–¹æ³•</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> getDepartments()</span><br><span class="line">      <span class="built_in">this</span>.company = { <span class="attr">name</span>: result.companyName, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span> }</span><br><span class="line">      <span class="built_in">this</span>.departs = result.depts <span class="comment">// éœ€è¦å°†å…¶è½¬åŒ–æˆæ ‘å½¢ç»“æ„</span></span><br><span class="line">      <span class="built_in">console</span>.log(result)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„"><a href="#å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„" class="headerlink" title="å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„"></a>å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„</h3><p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å°†åˆ—è¡¨å‹çš„æ•°æ®ï¼Œè½¬åŒ–æˆæ ‘å½¢æ•°æ®ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°<strong>é€’å½’ç®—æ³•</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200721010931214.png" alt="image-20200721010931214"></p>
<p>å°è£…ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œ**<code>src/utils/index.js</code>**</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  å°†åˆ—è¡¨å‹çš„æ•°æ®è½¬åŒ–æˆæ ‘å½¢æ•°æ® =&gt; é€’å½’ç®—æ³• =&gt; è‡ªèº«è°ƒç”¨è‡ªèº« =&gt; ä¸€å®šæ¡ä»¶ä¸èƒ½ä¸€æ ·ï¼Œ å¦åˆ™å°±ä¼šæ­»å¾ªç¯</span></span><br><span class="line"><span class="comment"> *  éå†æ ‘å½¢ æœ‰ä¸€ä¸ªé‡ç‚¹ è¦å…ˆæ‰¾ä¸€ä¸ªå¤´å„¿</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">tranListToTreeData</span>(<span class="params">list, rootValue</span>) </span>{</span><br><span class="line">  <span class="keyword">var</span> arr = []</span><br><span class="line">  list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (item.pid === rootValue) {</span><br><span class="line">      <span class="comment">// æ‰¾åˆ°ä¹‹å å°±è¦å»æ‰¾ item ä¸‹é¢æœ‰æ²¡æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">      <span class="keyword">const</span> children = tranListToTreeData(list, item.id)</span><br><span class="line">      <span class="keyword">if</span> (children.length) {</span><br><span class="line">        <span class="comment">// å¦‚æœchildrençš„é•¿åº¦å¤§äº0 è¯´æ˜æ‰¾åˆ°äº†å­èŠ‚ç‚¹</span></span><br><span class="line">        item.children = children</span><br><span class="line">      }</span><br><span class="line">      arr.push(item) <span class="comment">// å°†å†…å®¹åŠ å…¥åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>è°ƒç”¨è½¬åŒ–æ–¹æ³•ï¼Œè½¬åŒ–æ ‘å½¢ç»“æ„</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.company = { <span class="attr">name</span>: result.companyName, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span> } <span class="comment">// è¿™é‡Œå®šä¹‰ä¸€ä¸ªç©ºä¸²  å› ä¸º å®ƒæ˜¯æ ¹ æ‰€æœ‰çš„å­èŠ‚ç‚¹çš„æ•°æ®pid éƒ½æ˜¯ ""</span></span><br><span class="line"> <span class="built_in">this</span>.departs = transListToTreeData(result.depts, <span class="string">''</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™æ ·ä¸€æ¥ï¼Œæ ‘å½¢æ•°æ®å°±æœ‰äº†ï¼Œä¸‹ä¸€ç« èŠ‚ï¼Œå°±å¯ä»¥é’ˆå¯¹éƒ¨é—¨è¿›è¡Œæ“ä½œ</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†</p>
<h2 id="åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°"><a href="#åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°" class="headerlink" title="åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°"></a>åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°</h2><p>**<code>ç›®æ ‡</code>**å®ç°æ“ä½œåŠŸèƒ½çš„åˆ é™¤åŠŸèƒ½</p>
<h3 id="å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶"><a href="#å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶" class="headerlink" title="å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶"></a>å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶</h3><p>é¦–å…ˆï¼Œå°è£…åˆ é™¤åŠŸèƒ½æ¨¡å— <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  æ ¹æ®idæ ¹æ®éƒ¨é—¨  æ¥å£æ˜¯æ ¹æ®restfulçš„è§„åˆ™è®¾è®¡çš„   åˆ é™¤ delete  æ–°å¢ post  ä¿®æ”¹put è·å– get</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">delDepartments</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">${id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'delete'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œåœ¨tree-toolsç»„ä»¶ä¸­ï¼Œç›‘å¬ä¸‹æ‹‰èœå•çš„ç‚¹å‡»äº‹ä»¶  <strong><code>src/views/departments/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dropdown @command="operateDepts"&gt;</span><br><span class="line">  &lt;span&gt;</span><br><span class="line">    æ“ä½œ&lt;i class="el-icon-arrow-down" /&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">  &lt;!-- ä¸‹æ‹‰èœå• --&gt;</span><br><span class="line">  &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">    &lt;el-dropdown-item command="add"&gt;æ·»åŠ å­éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;!-- ç¼–è¾‘éƒ¨é—¨å’Œåˆ é™¤éƒ¨é—¨åªä¼šåœ¨å­èŠ‚ç‚¹ä¸Šæ˜¾ç¤º --&gt;</span><br><span class="line">    &lt;el-dropdown-item v-if="!isRoot" command="edit"&gt;ç¼–è¾‘éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;el-dropdown-item v-if="!isRoot" command="del"&gt;åˆ é™¤éƒ¨é—¨&lt;/el-dropdown-item&gt;</span><br><span class="line">  &lt;/el-dropdown-menu&gt;</span><br><span class="line">&lt;/el-dropdown&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>dropdownä¸‹æ‹‰èœå•çš„ç›‘å¬äº‹ä»¶command</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ“ä½œèŠ‚ç‚¹è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">operateDepts</span>(<span class="params">type</span>)</span> {</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">'add'</span>) {</span><br><span class="line">    <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">  } <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'edit'</span>) {</span><br><span class="line">    <span class="comment">//  ç¼–è¾‘éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">//  åˆ é™¤æ“ä½œ</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®"><a href="#è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®" class="headerlink" title="è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®"></a>è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®</h3><blockquote>
<p>åˆ é™¤ä¹‹å‰ï¼Œæç¤ºç”¨æˆ·æ˜¯å¦åˆ é™¤ï¼Œç„¶åè°ƒç”¨åˆ é™¤æ¥å£</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ“ä½œèŠ‚ç‚¹è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">operateDepts</span>(<span class="params">type</span>)</span> {</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">'add'</span>) {</span><br><span class="line">    <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">  } <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'edit'</span>) {</span><br><span class="line">    <span class="comment">//  ç¼–è¾‘éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">//  åˆ é™¤æ“ä½œ</span></span><br><span class="line">    <span class="built_in">this</span>.$confirm(<span class="string">'ç¡®å®šè¦åˆ é™¤è¯¥éƒ¨é—¨å—'</span>).then(<span class="function">() =&gt;</span> {</span><br><span class="line">      <span class="comment">// å¦‚æœç‚¹å‡»äº†ç¡®å®šå°±ä¼šè¿›å…¥then</span></span><br><span class="line">      <span class="keyword">return</span> delDepartments(<span class="built_in">this</span>.treeNode.id) <span class="comment">// è¿”å›promiseå¯¹è±¡</span></span><br><span class="line">    }).then(<span class="function">() =&gt;</span> {</span><br><span class="line">      <span class="comment">//  å¦‚æœåˆ é™¤æˆåŠŸäº†  å°±ä¼šè¿›å…¥è¿™é‡Œ</span></span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåˆ é™¤äº†å‘˜å·¥æ•°æ®ï¼Œä½†æ˜¯æ€ä¹ˆé€šçŸ¥çˆ¶ç»„ä»¶è¿›è¡Œæ›´æ–°å‘¢</p>
</blockquote>
<p>åœ¨å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¹ è¿‡å¯ä»¥é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶**<code>this.$emit</code>**çš„æ–¹å¼æ¥è¿›è¡Œ</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  å¦‚æœåˆ é™¤æˆåŠŸäº†  å°±ä¼šè¿›å…¥è¿™é‡Œ</span></span><br><span class="line">        <span class="built_in">this</span>.$emit(<span class="string">'delDepts'</span>) <span class="comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="line">        <span class="built_in">this</span>.$message.success(<span class="string">'åˆ é™¤éƒ¨é—¨æˆåŠŸ'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>çˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶ <strong><code>src/views/department/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;tree-tools slot-scope="obj" :tree-node="obj.data" @delDepts="getDepartments" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šåˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°</p>
<h2 id="æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶"><a href="#æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶" class="headerlink" title="æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶"></a>æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°æ–°å¢éƒ¨é—¨åŠŸèƒ½çš„ç»„ä»¶å»ºç«‹</p>
<h3 id="å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„"><a href="#å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„" class="headerlink" title="å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„"></a>å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„</h3><p>é¦–å…ˆï¼Œ å°è£…æ–°å¢éƒ¨é—¨çš„apiæ¨¡å—  <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  æ–°å¢éƒ¨é—¨æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addDepartments</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/company/department'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªæ–°å¢éƒ¨é—¨çš„çª—ä½“ç»„ä»¶ <strong><code>src/views/department/components/add-dept.vue</code></strong></p>
<p>å…¶ä¸­çš„äº¤äº’è®¾è®¡å¦‚ä¸‹</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200828162901390.png" alt="image-20200828162901390"></p>
<p><a href="%5Bhttp://czpm.itcast.cn/ihrm/#g=1&amp;p=%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%5D(http://czpm.itcast.cn/ihrm/#g=1&amp;p=%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84)">è®¾è®¡è¦æ±‚</a></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- æ–°å¢éƒ¨é—¨çš„å¼¹å±‚ --&gt;</span><br><span class="line">  &lt;el-dialog title="æ–°å¢éƒ¨é—¨"&gt;</span><br><span class="line">    &lt;!-- è¡¨å•ç»„ä»¶  el-form   label-widthè®¾ç½®labelçš„å®½åº¦   --&gt;</span><br><span class="line">    &lt;!-- åŒ¿åæ’æ§½ --&gt;</span><br><span class="line">    &lt;el-form label-width="120px"&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨åç§°"&gt;</span><br><span class="line">        &lt;el-input style="width:80%" placeholder="1-50ä¸ªå­—ç¬¦" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨ç¼–ç "&gt;</span><br><span class="line">        &lt;el-input style="width:80%" placeholder="1-50ä¸ªå­—ç¬¦" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨è´Ÿè´£äºº"&gt;</span><br><span class="line">        &lt;el-select style="width:80%" placeholder="è¯·é€‰æ‹©" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨ä»‹ç»"&gt;</span><br><span class="line">        &lt;el-input style="width:80%" placeholder="1-300ä¸ªå­—ç¬¦" type="textarea" :rows="3" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- el-dialogæœ‰ä¸“é—¨æ”¾ç½®åº•éƒ¨æ“ä½œæ çš„ æ’æ§½  å…·åæ’æ§½ --&gt;</span><br><span class="line">    &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">      &lt;!-- åˆ—è¢«åˆ†ä¸º24 --&gt;</span><br><span class="line">      &lt;el-col :span="6"&gt;</span><br><span class="line">        &lt;el-button type="primary" size="small"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size="small"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶"><a href="#ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶" class="headerlink" title="ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶"></a>ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶</h3><p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ç”¨å±æ€§æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºæˆ–è€…éšè—</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦ä¼ å…¥ä¸€ä¸ªpropså˜é‡æ¥æ§åˆ¶ æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line"><span class="attr">props</span>: {</span><br><span class="line">  <span class="attr">showDialog</span>: {</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">    <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title="æ–°å¢éƒ¨é—¨" :visible="showDialog"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨**<code>departments/index.vue</code>** ä¸­å¼•å…¥è¯¥ç»„ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AddDept <span class="keyword">from</span> <span class="string">'./components/add-dept'</span> <span class="comment">// å¼•å…¥æ–°å¢éƒ¨é—¨ç»„ä»¶</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">components</span>: { AddDept }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å®šä¹‰æ§åˆ¶çª—ä½“æ˜¾ç¤ºçš„å˜é‡**<code>showDialog</code>**</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="keyword">return</span> {</span><br><span class="line">     <span class="attr">showDialog</span>: <span class="literal">false</span> <span class="comment">// æ˜¾ç¤ºçª—ä½“</span></span><br><span class="line">   }</span><br><span class="line"> },</span><br><span class="line">   &lt;!-- æ”¾ç½®æ–°å¢å¼¹å±‚ç»„ä»¶  --&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog</span>=<span class="string">"showDialog"</span> /&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>å½“ç‚¹å‡»æ–°å¢éƒ¨é—¨æ—¶ï¼Œå¼¹å‡ºç»„ä»¶</p>
<blockquote>
<p> æ³¨æ„ï¼Œç‚¹å‡»æ–°å¢æ—¶tree-toolsç»„ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œï¼Œæˆ‘ä»¬ä¾ç„¶éœ€è¦å­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶</p>
</blockquote>
<p><strong>å­ç»„ä»¶è§¦å‘æ–°å¢äº‹ä»¶</strong>Â· <strong><code>src/views/departments/tree-tools.vue</code></strong> </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (type === <span class="string">'add'</span>) {</span><br><span class="line">      <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">      <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶ æ˜¾ç¤ºå¼¹å±‚</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'addDepts'</span>, <span class="built_in">this</span>.treeNode) <span class="comment">// ä¸ºä½•ä¼ å‡ºtreeNode å› ä¸ºæ˜¯æ·»åŠ å­éƒ¨é—¨ éœ€è¦å½“å‰éƒ¨é—¨çš„æ•°æ®</span></span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>çˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶</strong>   </p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;tree-tools slot-scope="obj" :tree-node="obj.data" @delDepts="getDepartments" @addDepts="addDepts"  /&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–¹æ³•ä¸­å¼¹å‡ºå±‚,è®°å½•åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸‹æ·»åŠ å­éƒ¨é—¨</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">addDepts</span>(<span class="params">node</span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.showDialog = <span class="literal">true</span> <span class="comment">// æ˜¾ç¤ºå¼¹å±‚</span></span><br><span class="line">     <span class="comment">// å› ä¸ºnodeæ˜¯å½“å‰çš„ç‚¹å‡»çš„éƒ¨é—¨ï¼Œ æ­¤æ—¶è¿™ä¸ªéƒ¨é—¨åº”è¯¥è®°å½•ä¸‹æ¥,</span></span><br><span class="line">     <span class="built_in">this</span>.node = node</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200722084707863.png" alt="image-20200722084707863"></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šæ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶</p>
<h2 id="å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ"><a href="#å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ" class="headerlink" title="å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ"></a>å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ</h2><p><strong><code>ç›®æ ‡</code></strong> å®Œæˆæ–°å¢éƒ¨é—¨åŠŸèƒ½çš„è§„åˆ™æ ¡éªŒå’Œæ•°æ®æäº¤éƒ¨åˆ†</p>
<h3 id="å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶"><a href="#å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶" class="headerlink" title="å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶"></a>å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶</h3><p>éƒ¨é—¨åç§°ï¼ˆnameï¼‰ï¼šå¿…å¡« 1-50ä¸ªå­—ç¬¦  / åŒçº§éƒ¨é—¨ä¸­ç¦æ­¢å‡ºç°é‡å¤éƒ¨é—¨</p>
<p>éƒ¨é—¨ç¼–ç ï¼ˆcodeï¼‰ï¼šå¿…å¡« 1-50ä¸ªå­—ç¬¦  / éƒ¨é—¨ç¼–ç åœ¨æ•´ä¸ªæ¨¡å—ä¸­éƒ½ä¸å…è®¸é‡å¤</p>
<p>éƒ¨é—¨è´Ÿè´£äººï¼ˆmanagerï¼‰ï¼šå¿…å¡«</p>
<p>éƒ¨é—¨ä»‹ç» ( introduce)ï¼šå¿…å¡« 1-300ä¸ªå­—ç¬¦</p>
<blockquote>
<p>å®šä¹‰æ•°æ®ç»“æ„</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">formData: {</span><br><span class="line">      <span class="attr">name</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨åç§°</span></span><br><span class="line">      <span class="attr">code</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨ç¼–ç </span></span><br><span class="line">      <span class="attr">manager</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨ç®¡ç†è€…</span></span><br><span class="line">      <span class="attr">introduce</span>: <span class="string">''</span> <span class="comment">// éƒ¨é—¨ä»‹ç»</span></span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å®Œæˆè¡¨å•æ ¡éªŒéœ€è¦çš„å‰ç½®æ¡ä»¶</p>
</blockquote>
<ul>
<li>el-formé…ç½®modelå’Œruleså±æ€§</li>
<li>el-form-itemé…ç½®propå±æ€§</li>
<li>è¡¨å•è¿›è¡Œv-modelåŒå‘ç»‘å®š</li>
</ul>
<h3 id="é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™"><a href="#é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™" class="headerlink" title="é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™"></a>é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™</h3><blockquote>
<p>æ ¹æ®è¿™äº›è¦æ±‚ï¼Œæ ¡éªŒè§„åˆ™</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    <span class="comment">// å®šä¹‰è¡¨å•æ•°æ®</span></span><br><span class="line">    <span class="attr">formData</span>: {</span><br><span class="line">      <span class="attr">name</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨åç§°</span></span><br><span class="line">      <span class="attr">code</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨ç¼–ç </span></span><br><span class="line">      <span class="attr">manager</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨ç®¡ç†è€…</span></span><br><span class="line">      <span class="attr">introduce</span>: <span class="string">''</span> <span class="comment">// éƒ¨é—¨ä»‹ç»</span></span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// å®šä¹‰æ ¡éªŒè§„åˆ™</span></span><br><span class="line">    <span class="attr">rules</span>: {</span><br><span class="line">      <span class="attr">name</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> },</span><br><span class="line">        { <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">50</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨åç§°è¦æ±‚1-50ä¸ªå­—ç¬¦'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">      <span class="attr">code</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ç¼–ç ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> },</span><br><span class="line">        { <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">50</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ç¼–ç è¦æ±‚1-50ä¸ªå­—ç¬¦'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">      <span class="attr">manager</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨è´Ÿè´£äººä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">      <span class="attr">introduce</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ä»‹ç»ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> },</span><br><span class="line">        { <span class="attr">trigger</span>: <span class="string">'blur'</span>, <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">300</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ä»‹ç»è¦æ±‚1-50ä¸ªå­—ç¬¦'</span> }]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ"><a href="#éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ" class="headerlink" title="éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ"></a>éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ</h3><p>**<code>æ³¨æ„</code><strong>ï¼šéƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è§„åˆ™ æœ‰ä¸¤æ¡æˆ‘ä»¬éœ€è¦é€šè¿‡</strong><code>è‡ªå®šä¹‰æ ¡éªŒå‡½æ•°validator</code>**æ¥å®ç°</p>
<blockquote>
<p>é¦–å…ˆï¼Œåœ¨æ ¡éªŒåç§°å’Œç¼–ç æ—¶ï¼Œè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬è¿™é‡Œtriggeré‡‡ç”¨blurçš„åŸå› ï¼Œå› ä¸ºchangeå¯¹äºè®¿é—®çš„é¢‘ç‡è¿‡é«˜ï¼Œæˆ‘ä»¬éœ€è¦æ§åˆ¶è®¿é—®é¢‘ç‡</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆè·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>éƒ¨é—¨åç§°ä¸èƒ½å’Œ**<code>åŒçº§åˆ«</code>**çš„é‡å¤ï¼Œè¿™é‡Œæ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°æ‰€æœ‰åŒçº§åˆ«çš„æ•°æ®ï¼Œè¿›è¡Œæ ¡éªŒï¼Œæ‰€ä»¥è¿˜éœ€è¦å¦ä¸€ä¸ªå‚æ•°pid</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">props: {</span><br><span class="line">    <span class="comment">//   ç”¨æ¥æ§åˆ¶çª—ä½“æ˜¯å¦æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line">    <span class="attr">showDialog</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// å½“å‰æ“ä½œçš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="attr">treeNode</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">null</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog</span>=<span class="string">"showDialog"</span> <span class="attr">:tree-node</span>=<span class="string">"node"</span> /&gt;</span></span></span><br></pre></td></tr></tbody></table></figure>

<p>æ ¹æ®å½“å‰éƒ¨é—¨idï¼Œæ‰¾åˆ°æ‰€æœ‰å­éƒ¨é—¨ç›¸å…³çš„æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦é‡å¤</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç°åœ¨å®šä¹‰ä¸€ä¸ªå‡½æ•° è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯ å»æ‰¾ åŒçº§éƒ¨é—¨ä¸‹ æ˜¯å¦æœ‰é‡å¤çš„éƒ¨é—¨åç§°</span></span><br><span class="line">   <span class="keyword">const</span> checkNameRepeat = <span class="keyword">async</span>(rule, value, callback) =&gt; {</span><br><span class="line">     <span class="comment">// å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">     <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">     <span class="comment">// deptsæ˜¯æ‰€æœ‰çš„éƒ¨é—¨æ•°æ®</span></span><br><span class="line">     <span class="comment">// å¦‚ä½•å»æ‰¾æŠ€æœ¯éƒ¨æ‰€æœ‰çš„å­èŠ‚ç‚¹</span></span><br><span class="line">     <span class="keyword">const</span> isRepeat = depts.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.pid === <span class="built_in">this</span>.treeNode.id).some(<span class="function"><span class="params">item</span> =&gt;</span> item.name === value)</span><br><span class="line">     isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`åŒçº§éƒ¨é—¨ä¸‹å·²ç»æœ‰<span class="subst">${value}</span>çš„éƒ¨é—¨äº†`</span>)) : callback()</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p>æ£€æŸ¥éƒ¨é—¨ç¼–ç çš„è¿‡ç¨‹åŒç†</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ£€æŸ¥ç¼–ç é‡å¤</span></span><br><span class="line">   <span class="keyword">const</span> checkCodeRepeat = <span class="keyword">async</span>(rule, value, callback) =&gt; {</span><br><span class="line">     <span class="comment">// å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">     <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">     <span class="keyword">const</span> isRepeat = depts.some(<span class="function"><span class="params">item</span> =&gt;</span> item.code === value &amp;&amp; value) <span class="comment">// è¿™é‡ŒåŠ ä¸€ä¸ª valueä¸ä¸ºç©º å› ä¸ºæˆ‘ä»¬çš„éƒ¨é—¨æœ‰å¯èƒ½æ²¡æœ‰code</span></span><br><span class="line">     isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`ç»„ç»‡æ¶æ„ä¸­å·²ç»æœ‰éƒ¨é—¨ä½¿ç”¨<span class="subst">${value}</span>ç¼–ç `</span>)) : callback()</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨è§„åˆ™ä¸­å®šä¹‰</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰æ ¡éªŒè§„åˆ™</span></span><br><span class="line"> rules: {</span><br><span class="line">   name: [{ required: <span class="literal">true</span>, message: 'éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º', trigger: 'blur' },</span><br><span class="line">     { min: <span class="number">1</span>, max: <span class="number">50</span>, message: 'éƒ¨é—¨åç§°è¦æ±‚<span class="number">1</span><span class="number">-50</span>ä¸ªå­—ç¬¦', trigger: 'blur' }, {</span><br><span class="line">       trigger: 'blur',</span><br><span class="line">       validator: checkNameRepeat <span class="comment">// è‡ªå®šä¹‰å‡½æ•°çš„å½¢å¼æ ¡éªŒ</span></span><br><span class="line">     }],</span><br><span class="line">   code: [{ required: <span class="literal">true</span>, message: 'éƒ¨é—¨ç¼–ç ä¸èƒ½ä¸ºç©º', trigger: 'blur' },</span><br><span class="line">     { min: <span class="number">1</span>, max: <span class="number">50</span>, message: 'éƒ¨é—¨ç¼–ç è¦æ±‚<span class="number">1</span><span class="number">-50</span>ä¸ªå­—ç¬¦', trigger: 'blur' }, {</span><br><span class="line">       trigger: 'blur',</span><br><span class="line">       validator: checkCodeRepeat</span><br><span class="line">     }],</span><br><span class="line">   manager: [{ required: <span class="literal">true</span>, message: 'éƒ¨é—¨è´Ÿè´£äººä¸èƒ½ä¸ºç©º', trigger: 'blur' }],</span><br><span class="line">   introduce: [{ required: <span class="literal">true</span>, message: 'éƒ¨é—¨ä»‹ç»ä¸èƒ½ä¸ºç©º', trigger: 'blur' },</span><br><span class="line">     { trigger: 'blur', min: <span class="number">1</span>, max: <span class="number">300</span>, message: 'éƒ¨é—¨ä»‹ç»è¦æ±‚<span class="number">1</span><span class="number">-50</span>ä¸ªå­—ç¬¦' }]</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®"><a href="#å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®" class="headerlink" title="å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®"></a>å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®</h3><p>**<code>éœ€è¦æ³¨æ„</code><strong>ï¼šåœ¨æœ€æ ¹çº§çš„</strong><code>tree-tools</code>**ç»„ä»¶ä¸­ï¼Œç”±äºtreenodeå±æ€§ä¸­æ²¡æœ‰idï¼Œidä¾¿æ˜¯undefinedï¼Œä½†æ˜¯é€šè¿‡undefinedè¿›è¡Œç­‰å€¼åˆ¤æ–­æ˜¯å¯»æ‰¾ä¸åˆ°å¯¹åº”çš„æ ¹èŠ‚ç‚¹çš„ï¼Œ æ‰€ä»¥åœ¨ä¼ å€¼æ—¶ï¼Œæˆ‘ä»¬å°†idå±æ€§è®¾ç½®ä¸º <strong><code>â€œâ€</code></strong></p>
<p><strong><code>src/views/departments/index.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="keyword">const</span> result = <span class="keyword">await</span> getDepartments()</span><br><span class="line">     <span class="built_in">this</span>.departs = transListToTreeData(result.depts, <span class="string">''</span>)</span><br><span class="line">     <span class="built_in">this</span>.company = { <span class="attr">name</span>: result.companyName, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span>, <span class="attr">id</span>: <span class="string">''</span> }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ</p>
<h2 id="æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®"><a href="#æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®" class="headerlink" title="æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®"></a>æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®</h2><p>**<code>ç›®æ ‡</code>**ï¼šè·å–æ–°å¢è¡¨å•ä¸­çš„éƒ¨é—¨è´Ÿè´£äººä¸‹æ‹‰æ•°æ®</p>
<blockquote>
<p>åœ¨ä¸ŠèŠ‚çš„è¡¨å•ä¸­ï¼Œéƒ¨é—¨è´Ÿè´£äººæ˜¯ä¸‹æ‹‰æ•°æ®ï¼Œæˆ‘ä»¬åº”è¯¥ä»**<code>å‘˜å·¥æ¥å£</code>**ä¸­è·å–è¯¥æ•°æ®</p>
</blockquote>
<p>é¦–å…ˆï¼Œå°è£…è·å–ç®€å•å‘˜å·¥åˆ—è¡¨çš„æ¨¡å— <strong><code>src/api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  è·å–å‘˜å·¥çš„ç®€å•åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getEmployeeSimple</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user/simple'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œåœ¨**<code>add-dept.vue</code><strong>ä¸­çš„selectèšç„¦äº‹ä»¶</strong><code>focus</code>**ä¸­è°ƒç”¨è¯¥æ¥å£ï¼Œå› ä¸ºæˆ‘ä»¬è¦è·å–å®æ—¶çš„æœ€æ–°æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-select v-model="formData.manager" style="width:80%" placeholder="è¯·é€‰æ‹©" @focus="getEmployeeSimple"&gt;</span><br><span class="line">       &lt;!-- éœ€è¦å¾ªç¯ç”Ÿæˆé€‰é¡¹   è¿™é‡Œåšä¸€ä¸‹ç®€å•çš„å¤„ç† æ˜¾ç¤ºçš„æ˜¯ç”¨æˆ·å å­˜çš„ä¹Ÿæ˜¯ç”¨æˆ·å--&gt;</span><br><span class="line">       &lt;el-option v-for="item in peoples" :key="item.id" :label="item.username" :value="item.username" /&gt;</span><br><span class="line">     &lt;/el-select&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>è·å–å‘˜å·¥åˆ—è¡¨</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>  { getEmployeeSimple }   <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="comment">// è·å–å‘˜å·¥ç®€å•åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="keyword">async</span>  <span class="function"><span class="title">getEmployeeSimple</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.peoples = <span class="keyword">await</span> getEmployeeSimple()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  <span class="attr">peoples</span>: [] <span class="comment">// æ¥æ”¶è·å–çš„å‘˜å·¥ç®€å•åˆ—è¡¨çš„æ•°æ®</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šæ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®</p>
<h2 id="æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­"><a href="#æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­" class="headerlink" title="æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­"></a>æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®Œæˆæ–°å¢æ¨¡å—çš„æäº¤-å–æ¶ˆ-å…³é—­ç­‰åŠŸèƒ½</p>
<h3 id="æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£"><a href="#æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£" class="headerlink" title="æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£"></a>æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£</h3><blockquote>
<p>å½“ç‚¹å‡»æ–°å¢é¡µé¢çš„ç¡®å®šæŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆå¯¹è¡¨å•çš„æ•´ä½“æ ¡éªŒï¼Œå¦‚æœæ ¡éªŒæˆåŠŸï¼Œè¿›è¡Œæäº¤</p>
</blockquote>
<p>é¦–å…ˆï¼Œåœ¨ç‚¹å‡»ç¡®å®šæ—¶ï¼Œæ ¡éªŒè¡¨å•</p>
<p><strong>ç»™el-formå®šä¹‰ä¸€ä¸ªrefå±æ€§</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form ref="deptForm" :model="formData" :rules="rules" label-width="120px"&gt;</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.$refs.deptForm.validate(<span class="function"><span class="params">isOK</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">if</span> (isOK) {</span><br><span class="line">      <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œåœ¨æ ¡éªŒé€šè¿‡æ—¶ï¼Œè°ƒç”¨æ–°å¢æ¥å£</p>
<blockquote>
<p>å› ä¸ºæ˜¯æ·»åŠ å­éƒ¨é—¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†æ–°å¢çš„éƒ¨é—¨pidè®¾ç½®æˆå½“å‰éƒ¨é—¨çš„idï¼Œæ–°å¢çš„éƒ¨é—¨å°±æˆäº†è‡ªå·±çš„å­éƒ¨é—¨</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; {</span><br><span class="line">    <span class="keyword">if</span> (isOK) {</span><br><span class="line">      <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">      <span class="keyword">await</span> addDepartments({ ...this.formData, <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id }) <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£ æ·»åŠ çˆ¶éƒ¨é—¨çš„id</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>åŒæ ·ï¼Œåœ¨æ–°å¢æˆåŠŸä¹‹åï¼Œè°ƒç”¨å‘Šè¯‰çˆ¶ç»„ä»¶ï¼Œé‡æ–°æ‹‰å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$emit(<span class="string">'addDepts'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;add-dept :show-dialog="showDialog" :tree-node="node" @addDepts="getDepartments" /&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚æ³¨æ„</code><strong>ï¼šåŒå­¦ä»¬å¯èƒ½ä¼šç–‘æƒ‘ï¼Œæˆ‘ä»¬</strong><code>tree-tools.vue</code></strong> å’Œ**<code>add-dept.vue</code>**ä¸¤ä¸ªç»„ä»¶éƒ½è§¦å‘äº†addDeptsäº‹ä»¶ï¼Œä¸å†²çªå—ï¼Ÿ</p>
<p>è¿™é‡Œï¼Œæˆ‘ä»¬è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶éƒ½æ˜¯ç»„ä»¶è‡ªèº«çš„ï¼Œä»–ä»¬ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªæ˜¯åå­—ç›¸åŒè€Œå·²ï¼Œå¤§å®¶ä¸è¦æ··æ·†</p>
<h3 id="åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚"><a href="#åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚" class="headerlink" title="åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚"></a>åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚</h3><blockquote>
<p>è¿™é‡Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸ªæ–°çš„æŠ€å·§ï¼Œ**<code>syncä¿®é¥°ç¬¦</code>**</p>
</blockquote>
<p> æŒ‰ç…§å¸¸è§„ï¼Œæƒ³è¦è®©çˆ¶ç»„ä»¶æ›´æ–°**<code>showDialog</code>**çš„è¯ï¼Œéœ€è¦è¿™æ ·åš </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">'changedialog'</span>, <span class="literal">false</span>) <span class="comment">//è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line">&lt;child @changedialog=<span class="string">"method"</span> :showDialog=<span class="string">"showDialog"</span> /&gt;</span><br><span class="line"> <span class="function"><span class="title">method</span>(<span class="params">value</span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.showDialog = value</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä½†æ˜¯ï¼Œvuejsä¸ºæˆ‘ä»¬æä¾›äº†**<code>syncä¿®é¥°ç¬¦</code>**ï¼Œå®ƒæä¾›äº†ä¸€ç§ç®€å†™æ¨¡å¼ ä¹Ÿå°±æ˜¯</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶ update:å›ºå®šå†™æ³• (update:propsåç§°, å€¼)</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>) <span class="comment">//è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ syncä¿®é¥°ç¬¦</span></span><br><span class="line">&lt;child  :showDialog.sync=<span class="string">"showDialog"</span> /&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åªè¦ç”¨syncä¿®é¥°ï¼Œå°±å¯ä»¥çœç•¥çˆ¶ç»„ä»¶çš„ç›‘å¬å’Œæ–¹æ³•ï¼Œç›´æ¥å°†å€¼èµ‹å€¼ç»™showDialog</p>
<p><strong>å–æ¶ˆæŒ‰é’®å’Œå…³é—­</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line">    <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; {</span><br><span class="line">        <span class="keyword">if</span> (isOK) {</span><br><span class="line">          <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">          <span class="keyword">await</span> addDepartments({ ...this.formData, <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id }) <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£ æ·»åŠ çˆ¶éƒ¨é—¨çš„id</span></span><br><span class="line">          <span class="built_in">this</span>.$emit(<span class="string">'addDepts'</span>) <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶ æ–°å¢æ•°æ®æˆåŠŸ é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">          <span class="comment">// update:propsåç§°</span></span><br><span class="line">          <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ"><a href="#å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ" class="headerlink" title="å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ"></a>å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.$refs.deptForm.resetFields() <span class="comment">// é‡ç½®æ ¡éªŒå­—æ®µ</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>) <span class="comment">// å…³é—­</span></span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p>éœ€è¦åœ¨el-dialogä¸­ç›‘å¬å…¶closeäº‹ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title="æ–°å¢éƒ¨é—¨" :visible="showDialog" @close="btnCancel"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­</p>
<h2 id="ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™"><a href="#ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™" class="headerlink" title="ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™"></a>ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°ç¼–è¾‘éƒ¨é—¨çš„åŠŸèƒ½</p>
<h3 id="ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹"><a href="#ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹" class="headerlink" title="ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹"></a>ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹</h3><blockquote>
<p>ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®é™…ä¸Šå’Œæ–°å¢çª—ä½“é‡‡ç”¨çš„æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œåªä¸è¿‡æˆ‘ä»¬éœ€è¦å°†æ–°å¢åœºæ™¯å˜æˆç¼–è¾‘åœºæ™¯</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200831112149246.png" alt="image-20200831112149246"></p>
<p>é¦–å…ˆç‚¹å‡»ç¼–è¾‘éƒ¨é—¨æ—¶ï¼Œ è°ƒç”¨<strong>çˆ¶ç»„ä»¶ç¼–è¾‘æ–¹æ³•</strong> <strong><code>tree-tools.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.$emit(<span class="string">'editDepts'</span>, <span class="built_in">this</span>.treeNode)</span><br></pre></td></tr></tbody></table></figure>

<p><strong>çˆ¶ç»„ä»¶å¼¹å±‚ï¼Œèµ‹å€¼å½“å‰ç¼–è¾‘èŠ‚ç‚¹</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">         &lt;tree-tools slot-scope="obj" :tree-node="obj.data" @delDepts="getDepartments" @editDepts="editDepts" /&gt;</span><br><span class="line"></span><br><span class="line">// ç¼–è¾‘éƒ¨é—¨èŠ‚ç‚¹</span><br><span class="line">    editDepts(node) {</span><br><span class="line">      // é¦–å…ˆæ‰“å¼€å¼¹å±‚</span><br><span class="line">      this.showDialog = true</span><br><span class="line">      this.node = node // èµ‹å€¼æ“ä½œçš„èŠ‚ç‚¹</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•"><a href="#çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•" class="headerlink" title="çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•"></a>çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•</h3><blockquote>
<p>ç¼–è¾‘æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è·å–ç‚¹å‡»éƒ¨é—¨çš„ä¿¡æ¯</p>
</blockquote>
<p><strong>å°è£…è·å–éƒ¨é—¨ä¿¡æ¯çš„æ¨¡å—</strong> <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * è·å–éƒ¨é—¨è¯¦æƒ…</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDepartDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åœ¨ä»€ä¹ˆæ—¶å€™è·å–éƒ¨é—¨è¯¦æƒ…?</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨<strong>ç¼–è¾‘æ–¹æ³•</strong> **<code>editDepts</code><strong>ä¸­é€šè¿‡</strong><code>ref</code><strong>è°ƒç”¨</strong><code>add-dept.vue</code>**çš„å®ä¾‹æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–éƒ¨é—¨è¯¦æƒ…</span></span><br><span class="line">   <span class="keyword">async</span>  <span class="function"><span class="title">getDepartDetail</span>(<span class="params">id</span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.formData = <span class="keyword">await</span> getDepartDetail(id)</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¼–è¾‘è§¦å‘çš„çˆ¶ç»„ä»¶çš„æ–¹æ³•</span></span><br><span class="line"> <span class="function"><span class="title">editDepts</span>(<span class="params">node</span>)</span> {</span><br><span class="line">   <span class="built_in">this</span>.showDialog = <span class="literal">true</span> <span class="comment">// æ˜¾ç¤ºæ–°å¢ç»„ä»¶å¼¹å±‚</span></span><br><span class="line">   <span class="built_in">this</span>.node = node <span class="comment">// å­˜å‚¨ä¼ é€’è¿‡æ¥çš„nodeæ•°æ®</span></span><br><span class="line">   <span class="comment">// æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸ªä½ç½® è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•</span></span><br><span class="line">   <span class="comment">// çˆ¶ç»„ä»¶ è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•</span></span><br><span class="line">   <span class="built_in">this</span>.$refs.addDept.getDepartDetail(node.id) <span class="comment">// ç›´æ¥è°ƒç”¨å­ç»„ä»¶ä¸­çš„æ–¹æ³• ä¼ å…¥ä¸€ä¸ªid</span></span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜"><a href="#æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜" class="headerlink" title="æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜"></a>æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜</h3><blockquote>
<p>éœ€è¦æ ¹æ®å½“å‰çš„åœºæ™¯åŒºåˆ†æ˜¾ç¤ºçš„æ ‡é¢˜</p>
</blockquote>
<p>è®¡ç®—å±æ€§</p>
<blockquote>
<p>å¦‚ä½•åˆ¤æ–­æ–°å¢è¿˜æ˜¯ç¼–è¾‘</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: {</span><br><span class="line">    <span class="function"><span class="title">showTitle</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.formData.id ? <span class="string">'ç¼–è¾‘éƒ¨é—¨'</span> : <span class="string">'æ–°å¢å­éƒ¨é—¨'</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<p>åŒæ—¶å‘ç°ï¼Œel-formä¸­çš„resetFieldsä¸èƒ½é‡ç½®éè¡¨å•ä¸­çš„æ•°æ®ï¼Œæ‰€ä»¥åœ¨å–æ¶ˆçš„ä½ç½®éœ€è¦å¼ºåˆ¶åŠ ä¸Š é‡ç½®æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="comment">// é‡ç½®æ•°æ®  å› ä¸ºresetFields åªèƒ½é‡ç½® è¡¨å•ä¸Šçš„æ•°æ® éè¡¨å•ä¸Šçš„ æ¯”å¦‚ ç¼–è¾‘ä¸­id ä¸èƒ½é‡ç½®</span></span><br><span class="line">  <span class="built_in">this</span>.formData = {</span><br><span class="line">    <span class="attr">name</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">code</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">manager</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">introduce</span>: <span class="string">''</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// å…³é—­å¼¹å±‚</span></span><br><span class="line">  <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">  <span class="comment">// æ¸…é™¤ä¹‹å‰çš„æ ¡éªŒ  å¯ä»¥é‡ç½®æ•°æ® åªèƒ½é‡ç½® å®šä¹‰åœ¨dataä¸­çš„æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.$refs.deptForm.resetFields()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯"><a href="#åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯" class="headerlink" title="åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯"></a>åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯</h2><h3 id="å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯"><a href="#å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯" class="headerlink" title="å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯"></a>å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯</h3><blockquote>
<p>æ¥ä¸‹æ¥ï¼Œéœ€è¦åœ¨ç‚¹å‡»ç¡®å®šæ—¶ï¼ŒåŒæ—¶æ”¯æŒæ–°å¢éƒ¨é—¨å’Œç¼–è¾‘éƒ¨é—¨ä¸¤ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®formDataæ˜¯å¦æœ‰idè¿›è¡ŒåŒºåˆ†</p>
</blockquote>
<p><strong>å°è£…ç¼–è¾‘éƒ¨é—¨æ¥å£</strong>   <strong><code>src/api/departments.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç¼–è¾‘éƒ¨é—¨</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateDepartments</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">${data.id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ç‚¹å‡»ç¡®å®šæ—¶ï¼Œè¿›è¡Œåœºæ™¯åŒºåˆ†</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line"> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; {</span><br><span class="line">     <span class="keyword">if</span> (isOK) {</span><br><span class="line">       <span class="comment">// è¦åˆ†æ¸…æ¥šç°åœ¨æ˜¯ç¼–è¾‘è¿˜æ˜¯æ–°å¢</span></span><br><span class="line">       <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) {</span><br><span class="line">         <span class="comment">// ç¼–è¾‘æ¨¡å¼  è°ƒç”¨ç¼–è¾‘æ¥å£</span></span><br><span class="line">         <span class="keyword">await</span> updateDepartments(<span class="built_in">this</span>.formData)</span><br><span class="line">       } <span class="keyword">else</span> {</span><br><span class="line">         <span class="comment">// æ–°å¢æ¨¡å¼</span></span><br><span class="line">         <span class="keyword">await</span> addDepartments({ ...this.formData, <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id }) <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£ æ·»åŠ çˆ¶éƒ¨é—¨çš„id</span></span><br><span class="line">       }</span><br><span class="line">       <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">       <span class="built_in">this</span>.$emit(<span class="string">'addDepts'</span>) <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶ æ–°å¢æ•°æ®æˆåŠŸ é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">       <span class="comment">// update:propsåç§°</span></span><br><span class="line">       <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">     }</span><br><span class="line">   })</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ"><a href="#æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ" class="headerlink" title="æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ"></a>æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ</h3><blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å‘ç°åŸæ¥çš„æ ¡éªŒè§„åˆ™å®é™…å’Œç¼–è¾‘éƒ¨é—¨æœ‰äº›å†²çªï¼Œæ‰€ä»¥éœ€è¦è¿›ä¸€æ­¥å¤„ç†</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç°åœ¨å®šä¹‰ä¸€ä¸ªå‡½æ•° è¿™ä¸ªå‡½æ•°çš„ç›®çš„æ˜¯ å»æ‰¾ åŒçº§éƒ¨é—¨ä¸‹ æ˜¯å¦æœ‰é‡å¤çš„éƒ¨é—¨åç§°</span></span><br><span class="line"> <span class="keyword">const</span> checkNameRepeat = <span class="keyword">async</span>(rule, value, callback) =&gt; {</span><br><span class="line">   <span class="comment">// å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">   <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">   <span class="comment">//  æ£€æŸ¥é‡å¤è§„åˆ™ éœ€è¦æ”¯æŒä¸¤ç§ æ–°å¢æ¨¡å¼ / ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">   <span class="comment">// deptsæ˜¯æ‰€æœ‰çš„éƒ¨é—¨æ•°æ®</span></span><br><span class="line">   <span class="comment">// å¦‚ä½•å»æ‰¾æŠ€æœ¯éƒ¨æ‰€æœ‰çš„å­èŠ‚ç‚¹</span></span><br><span class="line">   <span class="keyword">let</span> isRepeat = <span class="literal">false</span></span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) {</span><br><span class="line">     <span class="comment">// æœ‰idå°±æ˜¯ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">     <span class="comment">// ç¼–è¾‘ å¼ ä¸‰ =&gt; æ ¡éªŒè§„åˆ™ é™¤äº†æˆ‘ä¹‹å¤– åŒçº§éƒ¨é—¨ä¸‹ ä¸èƒ½æœ‰å«å¼ ä¸‰çš„</span></span><br><span class="line">     isRepeat = depts.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.id !== <span class="built_in">this</span>.formData.id &amp;&amp; item.pid === <span class="built_in">this</span>.treeNode.pid).some(<span class="function"><span class="params">item</span> =&gt;</span> item.name === value)</span><br><span class="line">   } <span class="keyword">else</span> {</span><br><span class="line">     <span class="comment">// æ²¡idå°±æ˜¯æ–°å¢æ¨¡å¼</span></span><br><span class="line">     isRepeat = depts.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.pid === <span class="built_in">this</span>.treeNode.id).some(<span class="function"><span class="params">item</span> =&gt;</span> item.name === value)</span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`åŒçº§éƒ¨é—¨ä¸‹å·²ç»æœ‰<span class="subst">${value}</span>çš„éƒ¨é—¨äº†`</span>)) : callback()</span><br><span class="line"> }</span><br><span class="line"> <span class="comment">// æ£€æŸ¥ç¼–ç é‡å¤</span></span><br><span class="line"> <span class="keyword">const</span> checkCodeRepeat = <span class="keyword">async</span>(rule, value, callback) =&gt; {</span><br><span class="line">   <span class="comment">// å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">   <span class="comment">//  æ£€æŸ¥é‡å¤è§„åˆ™ éœ€è¦æ”¯æŒä¸¤ç§ æ–°å¢æ¨¡å¼ / ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">   <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">   <span class="keyword">let</span> isRepeat = <span class="literal">false</span></span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) {</span><br><span class="line">     <span class="comment">// ç¼–è¾‘æ¨¡å¼  å› ä¸ºç¼–è¾‘æ¨¡å¼ä¸‹ ä¸èƒ½ç®—è‡ªå·±</span></span><br><span class="line">     isRepeat = depts.some(<span class="function"><span class="params">item</span> =&gt;</span> item.id !== <span class="built_in">this</span>.formData.id &amp;&amp; item.code === value &amp;&amp; value)</span><br><span class="line">   } <span class="keyword">else</span> {</span><br><span class="line">     <span class="comment">// æ–°å¢æ¨¡å¼</span></span><br><span class="line">     isRepeat = depts.some(<span class="function"><span class="params">item</span> =&gt;</span> item.code === value &amp;&amp; value) <span class="comment">// è¿™é‡ŒåŠ ä¸€ä¸ª valueä¸ä¸ºç©º å› ä¸ºæˆ‘ä»¬çš„éƒ¨é—¨æœ‰å¯èƒ½æ²¡æœ‰code</span></span><br><span class="line">   }</span><br><span class="line"></span><br><span class="line">   isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`ç»„ç»‡æ¶æ„ä¸­å·²ç»æœ‰éƒ¨é—¨ä½¿ç”¨<span class="subst">${value}</span>ç¼–ç `</span>)) : callback()</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è‡³æ­¤ï¼Œæ•´ä¸ªç»„ç»‡æ¶æ„ï¼Œ æˆ‘ä»¬å®Œæˆäº†ï¼Œç»„ç»‡æ¶æ„è¯»å– /  æ–°å¢éƒ¨é—¨ / åˆ é™¤éƒ¨é—¨  / ç¼–è¾‘éƒ¨é—¨</p>
</blockquote>
<p>å¦‚å›¾</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200722134415195.png" alt="image-20200722134415195"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°</p>
<h2 id="ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡"><a href="#ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡" class="headerlink" title="ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡"></a>ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡</h2><p><strong><code>ç›®æ ‡</code></strong>  ç»™å½“å‰ç»„ç»‡æ¶æ„æ·»åŠ åŠ è½½è¿›åº¦æ¡</p>
<p>ç”±äºè·å–æ•°æ®çš„å»¶è¿Ÿæ€§ï¼Œä¸ºäº†æ›´å¥½çš„ä½“éªŒï¼Œå¯ä»¥ç»™é¡µé¢å¢åŠ ä¸€ä¸ªLoadingè¿›åº¦æ¡ï¼Œé‡‡ç”¨elementçš„æŒ‡ä»¤è§£å†³æ–¹æ¡ˆå³å¯</p>
<p><strong>å®šä¹‰loadingå˜é‡</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">loading: <span class="literal">false</span> <span class="comment">// ç”¨æ¥æ§åˆ¶è¿›åº¦å¼¹å±‚çš„æ˜¾ç¤ºå’Œéšè—</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>èµ‹å€¼å˜é‡ç»™æŒ‡ä»¤</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-loading="loading" class="dashboard-container"&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è·å–æ–¹æ³•å‰åè®¾ç½®å˜é‡</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> getDepartments()</span><br><span class="line">      <span class="built_in">this</span>.departs = transListToTreeData(result.depts, <span class="string">''</span>)</span><br><span class="line">      <span class="built_in">this</span>.company = { <span class="attr">name</span>: result.companyName, <span class="attr">manager</span>: <span class="string">'è´Ÿè´£äºº'</span>, <span class="attr">id</span>: <span class="string">''</span> }</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="6-å…¬å¸å’Œè§’è‰²"><a href="#6-å…¬å¸å’Œè§’è‰²" class="headerlink" title="6.å…¬å¸å’Œè§’è‰²"></a>6.å…¬å¸å’Œè§’è‰²</h1><h2 id="å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„"><a href="#å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„" class="headerlink" title="å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„"></a>å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„</h2><p>**<code>ç›®æ ‡</code>**å»ºç«‹å…¬å¸é¡µé¢çš„åŸºæœ¬ç»“æ„</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200722221903217.png" alt="image-20200722221903217"></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200722221910776.png" alt="image-20200722221910776"></p>
<p>æ ¹æ®ä»¥ä¸Šçš„ç»“æ„ï¼Œæˆ‘ä»¬é‡‡ç”¨element-uiçš„ç»„ä»¶å®ç°</p>
<p><strong><code>src/views/setting/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;el-card&gt;</span><br><span class="line">        &lt;el-tabs&gt;</span><br><span class="line">          &lt;!-- æ”¾ç½®é¡µç­¾ --&gt;</span><br><span class="line">          &lt;el-tab-pane label="è§’è‰²ç®¡ç†"&gt;</span><br><span class="line">            &lt;!-- æ–°å¢è§’è‰²æŒ‰é’® --&gt;</span><br><span class="line">            &lt;el-row style="height:60px"&gt;</span><br><span class="line">              &lt;el-button</span><br><span class="line">                icon="el-icon-plus"</span><br><span class="line">                size="small"</span><br><span class="line">                type="primary"</span><br><span class="line">              &gt;æ–°å¢è§’è‰²&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">            &lt;!-- è¡¨æ ¼ --&gt;</span><br><span class="line">            &lt;el-table border=""&gt;</span><br><span class="line">              &lt;el-table-column label="åºå·" width="120" /&gt;</span><br><span class="line">              &lt;el-table-column label="è§’è‰²åç§°" width="240" /&gt;</span><br><span class="line">              &lt;el-table-column label="æè¿°" /&gt;</span><br><span class="line">              &lt;el-table-column label="æ“ä½œ"&gt;</span><br><span class="line">                &lt;el-button size="small" type="success"&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button size="small" type="primary"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">                &lt;el-button size="small" type="danger"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">              &lt;/el-table-column&gt;</span><br><span class="line">            &lt;/el-table&gt;</span><br><span class="line">            &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">            &lt;el-row type="flex" justify="center" align="middle" style="height: 60px"&gt;</span><br><span class="line">              &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">              &lt;el-pagination layout="prev,pager,next" /&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">          &lt;/el-tab-pane&gt;</span><br><span class="line">          &lt;el-tab-pane label="å…¬å¸ä¿¡æ¯"&gt;</span><br><span class="line">            &lt;el-alert</span><br><span class="line">              title="å¯¹å…¬å¸åç§°ã€å…¬å¸åœ°å€ã€è¥ä¸šæ‰§ç…§ã€å…¬å¸åœ°åŒºçš„æ›´æ–°ï¼Œå°†ä½¿å¾—å…¬å¸èµ„æ–™è¢«é‡æ–°å®¡æ ¸ï¼Œè¯·è°¨æ…ä¿®æ”¹"</span><br><span class="line">              type="info"</span><br><span class="line">              show-icon</span><br><span class="line">              :closable="false"</span><br><span class="line">            /&gt;</span><br><span class="line">            &lt;el-form label-width="120px" style="margin-top:50px"&gt;</span><br><span class="line">              &lt;el-form-item label="å…¬å¸åç§°"&gt;</span><br><span class="line">                &lt;el-input disabled style="width:400px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label="å…¬å¸åœ°å€"&gt;</span><br><span class="line">                &lt;el-input disabled style="width:400px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label="é‚®ç®±"&gt;</span><br><span class="line">                &lt;el-input disabled style="width:400px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label="å¤‡æ³¨"&gt;</span><br><span class="line">                &lt;el-input type="textarea" :rows="3" disabled style="width:400px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">          &lt;/el-tab-pane&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/el-tabs&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**å»ºç«‹å…¬å¸é¡µé¢çš„åŸºæœ¬ç»“æ„</p>
<h2 id="è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯"><a href="#è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯" class="headerlink" title="è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯"></a>è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯</h2><p>**<code>ç›®æ ‡</code>**ï¼š å°è£…å…¬å¸è§’è‰²è¯·æ±‚ï¼Œè¯»å–å…¬å¸è§’è‰²ä¿¡æ¯</p>
<h3 id="è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®"><a href="#è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®" class="headerlink" title="è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®"></a>è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®</h3><p>é¦–å…ˆï¼Œå°è£…è¯»å–è§’è‰²çš„ä¿¡æ¯çš„è¯·æ±‚ <strong><code>src/api/setting.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–è§’è‰²åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getRoleList</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/role'</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>paramsæ˜¯æŸ¥è¯¢å‚æ•°ï¼Œé‡Œé¢éœ€è¦æºå¸¦åˆ†é¡µä¿¡æ¯</p>
</blockquote>
<p>ç„¶åï¼Œåœ¨é¡µé¢ä¸­è°ƒç”¨æ¥å£è·å–æ•°æ®ï¼Œç»‘å®šè¡¨æ ¼æ•°æ® <strong><code>src/views/setting/index.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getRoleList } <span class="keyword">from</span> <span class="string">'@/api/setting'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">list</span>: [], <span class="comment">// æ‰¿æ¥æ•°ç»„</span></span><br><span class="line">      <span class="attr">page</span>: {</span><br><span class="line">        <span class="comment">// æ”¾ç½®é¡µç åŠç›¸å…³æ•°æ®</span></span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">pagesize</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">total</span>: <span class="number">0</span> <span class="comment">// è®°å½•æ€»æ•°</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getRoleList() <span class="comment">// è·å–è§’è‰²åˆ—è¡¨</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getRoleList</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> { total, rows } = <span class="keyword">await</span> getRoleList(<span class="built_in">this</span>.page)</span><br><span class="line">      <span class="built_in">this</span>.page.total = total</span><br><span class="line">      <span class="built_in">this</span>.list = rows</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">changePage</span>(<span class="params">newPage</span>)</span> {</span><br><span class="line">      <span class="comment">// newPageæ˜¯å½“å‰ç‚¹å‡»çš„é¡µç </span></span><br><span class="line">      <span class="built_in">this</span>.page.page = newPage <span class="comment">// å°†å½“å‰é¡µç èµ‹å€¼ç»™å½“å‰çš„æœ€æ–°é¡µç </span></span><br><span class="line">      <span class="built_in">this</span>.getRoleList()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p> <strong>ç»‘å®šè¡¨æ ¼æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table border="" :data="list"&gt;</span><br><span class="line">            &lt;el-table-column align="center" type="index" label="åºå·" width="120" /&gt;</span><br><span class="line">            &lt;el-table-column align="center" prop="name" label="åç§°" width="240" /&gt;</span><br><span class="line">            &lt;el-table-column align="center" prop="description" label="æè¿°" /&gt;</span><br><span class="line">            &lt;el-table-column align="center" label="æ“ä½œ"&gt;</span><br><span class="line">              &lt;el-button size="small" type="success"&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button size="small" type="primary"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button size="small" type="danger"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">          &lt;/el-table&gt;</span><br><span class="line">      </span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šåˆ†é¡µæ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">        &lt;el-row type="flex" justify="center" align="middle" style="height:60px"&gt;</span><br><span class="line">          &lt;el-pagination</span><br><span class="line">            :current-page="page.page"</span><br><span class="line">            :page-size="page.pagesize"</span><br><span class="line">            :total="page.total"</span><br><span class="line">            layout="prev, pager, next"</span><br><span class="line">            @current-change="changePage"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®"><a href="#è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®" class="headerlink" title="è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®"></a>è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®</h3><blockquote>
<p>ç¬¬äºŒä¸ªtabé¡µï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦è¯»å–æ•°æ®</p>
</blockquote>
<p>å°è£…è¯»å–å…¬å¸ä¿¡æ¯çš„api  <strong><code>src/api/setting.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å…¬å¸ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getCompanyInfo</span>(<span class="params">companyId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/company/<span class="subst">${companyId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šå…¬å¸è¡¨å•æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form label-width="120px" style="margin-top:50px"&gt;</span><br><span class="line">           &lt;el-form-item label="å…¬å¸åç§°"&gt;</span><br><span class="line">             &lt;el-input v-model="formData.name" disabled style="width:400px" /&gt;</span><br><span class="line">           &lt;/el-form-item&gt;</span><br><span class="line">           &lt;el-form-item label="å…¬å¸åœ°å€"&gt;</span><br><span class="line">             &lt;el-input v-model="formData.companyAddress" disabled style="width:400px" /&gt;</span><br><span class="line">           &lt;/el-form-item&gt;</span><br><span class="line">           &lt;el-form-item label="é‚®ç®±"&gt;</span><br><span class="line">             &lt;el-input v-model="formData.mailbox" disabled style="width:400px" /&gt;</span><br><span class="line">           &lt;/el-form-item&gt;</span><br><span class="line">           &lt;el-form-item label="å¤‡æ³¨"&gt;</span><br><span class="line">             &lt;el-input v-model="formData.remarks" type="textarea" :rows="3" disabled style="width:400px" /&gt;</span><br><span class="line">           &lt;/el-form-item&gt;</span><br><span class="line">         &lt;/el-form&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¯·æ±‚ä¸­çš„companyIdæ¥è‡ªå“ªé‡Œï¼Ÿå®ƒæ¥è‡ªæˆ‘ä»¬ç™»å½•æˆåŠŸä¹‹åçš„ç”¨æˆ·èµ„æ–™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨è¯¥ç»„ä»¶ä¸­ä½¿ç”¨vuexæ•°æ®</p>
</blockquote>
<p> <strong><code>src/store/getters.js</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">companyId: state =&gt; state.user.userInfo.companyId // å»ºç«‹å¯¹äºuseræ¨¡å—çš„companyIdçš„å¿«æ·è®¿é—®</span><br><span class="line">computed: {</span><br><span class="line">  ...mapGetters(['companyId'])</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆå§‹åŒ–æ—¶è°ƒç”¨æ¥å£</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// è·å–çš„å…¬å¸çš„ä¿¡æ¯</span></span><br><span class="line">   <span class="keyword">async</span> <span class="function"><span class="title">getCompanyInfo</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.formData = <span class="keyword">await</span> getCompanyInfo(<span class="built_in">this</span>.companyId)</span><br><span class="line">   }</span><br><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="built_in">this</span>.getRoleList() <span class="comment">// è·å–è§’è‰²åˆ—è¡¨</span></span><br><span class="line">   <span class="built_in">this</span>.getCompanyInfo()</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯</p>
<h2 id="åˆ é™¤è§’è‰²åŠŸèƒ½"><a href="#åˆ é™¤è§’è‰²åŠŸèƒ½" class="headerlink" title="åˆ é™¤è§’è‰²åŠŸèƒ½"></a>åˆ é™¤è§’è‰²åŠŸèƒ½</h2><p><strong><code>ç›®æ ‡</code></strong>  å®ç°åˆ é™¤è§’è‰²çš„åŠŸèƒ½</p>
<p><strong>å°è£…åˆ é™¤è§’è‰²çš„api</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** **</span></span><br><span class="line"><span class="comment"> *  åˆ é™¤è§’è‰²</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteRole</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">${id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'delete'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ é™¤åŠŸèƒ½å®ç°</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">deleteRole</span>(<span class="params">id</span>)</span> {</span><br><span class="line">  <span class="comment">//  æç¤º</span></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$confirm(<span class="string">'ç¡®è®¤åˆ é™¤è¯¥è§’è‰²å—'</span>)</span><br><span class="line">    <span class="comment">// åªæœ‰ç‚¹å‡»äº†ç¡®å®š æ‰èƒ½è¿›å…¥åˆ°ä¸‹æ–¹</span></span><br><span class="line">    <span class="keyword">await</span> deleteRole(id) <span class="comment">// è°ƒç”¨åˆ é™¤æ¥å£</span></span><br><span class="line">    <span class="built_in">this</span>.getRoleList() <span class="comment">// é‡æ–°åŠ è½½æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'åˆ é™¤è§’è‰²æˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (error) {</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ é™¤æŒ‰é’®æ³¨å†Œäº‹ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;</span><br><span class="line">         &lt;template slot-scope="{ row }"&gt;</span><br><span class="line">                 &lt;el-button size="small" type="success"&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br><span class="line">                 &lt;el-button size="small" type="primary"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">                 &lt;el-button size="small" type="danger" @click="deleteRole(row.id)"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">         &lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="ç¼–è¾‘è§’è‰²åŠŸèƒ½"><a href="#ç¼–è¾‘è§’è‰²åŠŸèƒ½" class="headerlink" title="ç¼–è¾‘è§’è‰²åŠŸèƒ½"></a>ç¼–è¾‘è§’è‰²åŠŸèƒ½</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°ç¼–è¾‘è§’è‰²çš„åŠŸèƒ½</p>
<h3 id="å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚"><a href="#å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚" class="headerlink" title="å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚"></a>å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚</h3><p><strong>å°è£…ç¼–è¾‘è§’è‰²çš„åŠŸèƒ½api</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹è§’è‰²</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateRole</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">${data.id}</span>`</span>,</span><br><span class="line">    data,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–è§’è‰²è¯¦æƒ…</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getRoleDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/role/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰ç¼–è¾‘å¼¹å±‚æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">showDialog: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">// ä¸“é—¨æ¥æ”¶æ–°å¢æˆ–è€…ç¼–è¾‘çš„ç¼–è¾‘çš„è¡¨å•æ•°æ®</span></span><br><span class="line"><span class="attr">roleForm</span>: {},</span><br><span class="line"><span class="attr">rules</span>: {</span><br><span class="line">  <span class="attr">name</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'è§’è‰²åç§°ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }]</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¼–è¾‘å¼¹å±‚ç»“æ„</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title="ç¼–è¾‘å¼¹å±‚" :visible="showDialog" @close="btnCancel"&gt;</span><br><span class="line">     &lt;el-form ref="roleForm" :model="roleForm" :rules="rules" label-width="120px"&gt;</span><br><span class="line">       &lt;el-form-item label="è§’è‰²åç§°" prop="name"&gt;</span><br><span class="line">         &lt;el-input v-model="roleForm.name" /&gt;</span><br><span class="line">       &lt;/el-form-item&gt;</span><br><span class="line">       &lt;el-form-item label="è§’è‰²æè¿°"&gt;</span><br><span class="line">         &lt;el-input v-model="roleForm.description" /&gt;</span><br><span class="line">       &lt;/el-form-item&gt;</span><br><span class="line">     &lt;/el-form&gt;</span><br><span class="line">     &lt;!-- åº•éƒ¨ --&gt;</span><br><span class="line">     &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">       &lt;el-col :span="6"&gt;</span><br><span class="line">         &lt;el-button size="small" @click="btnCancel"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">         &lt;el-button size="small" type="primary" @click="btnOK"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">       &lt;/el-col&gt;</span><br><span class="line">     &lt;/el-row&gt;</span><br><span class="line">   &lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£"><a href="#å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£" class="headerlink" title="å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£"></a>å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£</h3><p><strong>ç¼–è¾‘åŠŸèƒ½å®ç°ï¼ˆä¸ºæ–°å¢åŠŸèƒ½ç•™å£ï¼‰</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">editRole</span>(<span class="params">id</span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.roleForm = <span class="keyword">await</span> getRoleDetail(id)</span><br><span class="line">  <span class="built_in">this</span>.showDialog = <span class="literal">true</span> <span class="comment">// ä¸ºäº†ä¸å‡ºç°é—ªçƒçš„é—®é¢˜ å…ˆè·å–æ•°æ® å†å¼¹å‡ºå±‚</span></span><br><span class="line">},</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.roleForm.validate()</span><br><span class="line">    <span class="comment">// åªæœ‰æ ¡éªŒé€šè¿‡çš„æƒ…å†µä¸‹ æ‰ä¼šæ‰§è¡Œawaitçš„ä¸‹æ–¹å†…å®¹</span></span><br><span class="line">    <span class="comment">// roleFormè¿™ä¸ªå¯¹è±¡æœ‰idå°±æ˜¯ç¼–è¾‘ æ²¡æœ‰idå°±æ˜¯æ–°å¢</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.roleForm.id) {</span><br><span class="line">      <span class="keyword">await</span> updateRole(<span class="built_in">this</span>.roleForm)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æ–°å¢ä¸šåŠ¡</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getRoleList()</span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'æ“ä½œæˆåŠŸ'</span>)</span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">  } <span class="keyword">catch</span> (error) {</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¼–è¾‘æŒ‰é’®æ³¨å†Œäº‹ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button size="small" type="primary" @click="editRole(row.id)"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="æ–°å¢è§’è‰²åŠŸèƒ½"><a href="#æ–°å¢è§’è‰²åŠŸèƒ½" class="headerlink" title="æ–°å¢è§’è‰²åŠŸèƒ½"></a>æ–°å¢è§’è‰²åŠŸèƒ½</h2><p>**<code>ç›®æ ‡</code>**å®ç°æ–°å¢è§’è‰²åŠŸèƒ½</p>
<p><strong>å°è£…æ–°å¢è§’è‰²åŠŸèƒ½api</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * æ–°å¢è§’è‰²</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addRole</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/role'</span>,</span><br><span class="line">    data,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–°å¢åŠŸèƒ½å®ç°å’Œç¼–è¾‘åŠŸèƒ½åˆå¹¶ï¼ˆå¤„ç†å…³é—­ï¼‰</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.roleForm.validate()</span><br><span class="line">    <span class="comment">// åªæœ‰æ ¡éªŒé€šè¿‡çš„æƒ…å†µä¸‹ æ‰ä¼šæ‰§è¡Œawaitçš„ä¸‹æ–¹å†…å®¹</span></span><br><span class="line">    <span class="comment">// roleFormè¿™ä¸ªå¯¹è±¡æœ‰idå°±æ˜¯ç¼–è¾‘ æ²¡æœ‰idå°±æ˜¯æ–°å¢</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.roleForm.id) {</span><br><span class="line">      <span class="keyword">await</span> updateRole(<span class="built_in">this</span>.roleForm)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æ–°å¢ä¸šåŠ¡</span></span><br><span class="line">      <span class="keyword">await</span> addRole(<span class="built_in">this</span>.roleForm)</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getRoleList()</span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'æ“ä½œæˆåŠŸ'</span>)</span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">false</span> <span class="comment">// å…³é—­å¼¹å±‚  =&gt;  è§¦å‘el-dialogçš„äº‹ä»¶closeäº‹ä»¶</span></span><br><span class="line">  } <span class="keyword">catch</span> (error) {</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  }</span><br><span class="line">},</span><br><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.roleForm = {</span><br><span class="line">    <span class="attr">name</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">description</span>: <span class="string">''</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// ç§»é™¤æ ¡éªŒ</span></span><br><span class="line">  <span class="built_in">this</span>.$refs.roleForm.resetFields()</span><br><span class="line">  <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–°å¢æŒ‰é’®æ³¨å†Œäº‹ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type="primary" size="small" @click="showDialog = true"&gt;æ–°å¢è§’è‰²&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> æ–°å¢è§’è‰²åŠŸèƒ½</p>
<h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200831160134281.png" alt="image-20200831160134281"></p>
<p>æˆ‘ä»¬å®Œæˆäº†å…¬å¸ä¸­è§’è‰²ç®¡ç†çš„éƒ¨åˆ†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å®Œæˆåˆ†é…æƒé™çš„éƒ¨åˆ†ï¼Œè¯¥éƒ¨é—¨ä¼šåœ¨æƒé™è®¾è®¡å’Œç®¡ç†çš„éƒ¨é—¨é‡ç‚¹æåŠ</p>
<h1 id="7-å‘˜å·¥ç®¡ç†"><a href="#7-å‘˜å·¥ç®¡ç†" class="headerlink" title="7.å‘˜å·¥ç®¡ç†"></a>7.å‘˜å·¥ç®¡ç†</h1><h2 id="å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ "><a href="#å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ " class="headerlink" title="å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ "></a>å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ </h2><p>**<code>ç›®æ ‡</code>**ï¼šå°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ ä¾›å¤§å®¶ä½¿ç”¨</p>
<h3 id="é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„"><a href="#é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„" class="headerlink" title="é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„"></a>é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„</h3><blockquote>
<p>åœ¨åç»­çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šç”¨åˆ°ä¸€ä¸ªç±»ä¼¼ä¸‹å›¾çš„å·¥å…·æ ï¼Œä½œä¸ºå…¬å…±ç»„ä»¶ï¼Œè¿›è¡Œä¸€ä¸‹å°è£…</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200723223704401.png" alt="image-20200723223704401"></p>
<p>ç»„ä»¶ <strong><code>src/components/PageTools/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-card class="page-tools"&gt;</span><br><span class="line">    &lt;el-row type="flex" justify="space-between" align="middle"&gt;</span><br><span class="line">      &lt;el-col&gt;</span><br><span class="line">        &lt;div  v-if="showBefore" class="before"&gt;</span><br><span class="line">          &lt;i class="el-icon-info" /&gt;</span><br><span class="line">          &lt;!-- å®šä¹‰å‰é¢å¾—æ’æ§½ --&gt;</span><br><span class="line">          &lt;slot name="before" /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col&gt;</span><br><span class="line">        &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">           &lt;!-- å®šä¹‰åé¢çš„æ’æ§½ --&gt;</span><br><span class="line">           &lt;slot name="after" /&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-card&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    showBefore: {</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang='scss'&gt;</span><br><span class="line"> .page-tools {</span><br><span class="line">    margin: 10px 0;</span><br><span class="line">    .before {</span><br><span class="line">      line-height: 34px;</span><br><span class="line">    i {</span><br><span class="line">      margin-right: 5px;</span><br><span class="line">      color: #409eff;</span><br><span class="line">    }</span><br><span class="line">    display: inline-block;</span><br><span class="line">    padding: 0px 10px;</span><br><span class="line">    border-radius: 3px;</span><br><span class="line">    border: 1px solid rgba(145, 213, 255, 1);</span><br><span class="line">    background: rgba(230, 247, 255, 1);</span><br><span class="line">  }</span><br><span class="line"> }</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ"><a href="#ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ" class="headerlink" title="ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ"></a>ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ</h3><blockquote>
<p>ä¸ºäº†æ–¹ä¾¿æ‰€æœ‰çš„é¡µé¢éƒ½å¯ä»¥ä¸ç”¨å¼•ç”¨è¯¥ç»„ä»¶ï¼Œå¯ä»¥è¿›è¡Œå…¨å±€æ³¨å†Œ</p>
</blockquote>
<p>æä¾›æ³¨å†Œå…¥å£ <strong><code>src/componets/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯¥æ–‡ä»¶è´Ÿè´£æ‰€æœ‰çš„å…¬å…±çš„ç»„ä»¶çš„å…¨å±€æ³¨å†Œ   Vue.use</span></span><br><span class="line"><span class="keyword">import</span> PageTools <span class="keyword">from</span> <span class="string">'./PageTools'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue</span>)</span> {</span><br><span class="line">    <span class="comment">//  æ³¨å†Œå…¨å±€çš„é€šç”¨æ ç»„ä»¶å¯¹è±¡</span></span><br><span class="line">    Vue.component(<span class="string">'PageTools'</span>, PageTools)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åœ¨å…¥å£å¤„è¿›è¡Œæ³¨å†Œ <strong><code>src/main.js</code></strong></p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Component <span class="keyword">from</span> <span class="string">'@/components'</span></span><br><span class="line">Vue.use(Component) <span class="comment">// æ³¨å†Œè‡ªå·±çš„æ’ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ </p>
<h2 id="å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„"><a href="#å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„" class="headerlink" title="å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„"></a>å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„</p>
<p><strong>ç»“æ„ä»£ç </strong> <strong><code>src/employees/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;page-tools :show-before="true"&gt;</span><br><span class="line">        &lt;span slot="before"&gt;å…±166æ¡è®°å½•&lt;/span&gt;</span><br><span class="line">        &lt;template slot="after"&gt;</span><br><span class="line">          &lt;el-button size="small" type="warning"&gt;å¯¼å…¥&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size="small" type="danger"&gt;å¯¼å‡º&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size="small" type="primary"&gt;æ–°å¢å‘˜å·¥&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/page-tools&gt;</span><br><span class="line">      &lt;!-- æ”¾ç½®è¡¨æ ¼å’Œåˆ†é¡µ --&gt;</span><br><span class="line">      &lt;el-card&gt;</span><br><span class="line">        &lt;el-table border&gt;</span><br><span class="line">          &lt;el-table-column label="åºå·" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="å§“å" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="å·¥å·" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="è˜ç”¨å½¢å¼" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="éƒ¨é—¨" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="å…¥èŒæ—¶é—´" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="è´¦æˆ·çŠ¶æ€" sortable="" /&gt;</span><br><span class="line">          &lt;el-table-column label="æ“ä½œ" sortable="" fixed="right" width="280"&gt;</span><br><span class="line">            &lt;template&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è½¬æ­£&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è°ƒå²—&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;ç¦»èŒ&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è§’è‰²&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">          &lt;/el-table-column&gt;</span><br><span class="line">        &lt;/el-table&gt;</span><br><span class="line">        &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">        &lt;el-row type="flex" justify="center" align="middle" style="height: 60px"&gt;</span><br><span class="line">          &lt;el-pagination layout="prev, pager, next" /&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200831162222975.png" alt="image-20200831162222975"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„</p>
<h2 id="å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½"><a href="#å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½" class="headerlink" title="å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½"></a>å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½</h2><p>**<code>ç›®æ ‡</code>**å®ç°å‘˜å·¥æ•°æ®çš„åŠ è½½å’Œåˆ†é¡µè¯·æ±‚</p>
<p>é¦–å…ˆï¼Œå°è£…å‘˜å·¥çš„åŠ è½½è¯·æ±‚ <strong><code>src/api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–å‘˜å·¥çš„ç»¼åˆåˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getEmployeeList</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user'</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œå®ç°åŠ è½½æ•°æ®å’Œåˆ†é¡µçš„é€»è¾‘</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getEmployeeList } <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">list</span>: [], <span class="comment">// æ¥æ•°æ®çš„</span></span><br><span class="line">      <span class="attr">page</span>: {</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>, <span class="comment">// å½“å‰é¡µç </span></span><br><span class="line">        <span class="attr">size</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">total</span>: <span class="number">0</span> <span class="comment">// æ€»æ•°</span></span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getEmployeeList()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="function"><span class="title">changePage</span>(<span class="params">newPage</span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.page.page = newPage</span><br><span class="line">      <span class="built_in">this</span>.getEmployeeList()</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getEmployeeList</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> { total, rows } = <span class="keyword">await</span> getEmployeeList(<span class="built_in">this</span>.page)</span><br><span class="line">      <span class="built_in">this</span>.page.total = total</span><br><span class="line">      <span class="built_in">this</span>.list = rows</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šè¡¨æ ¼</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-card v-loading="loading"&gt;</span><br><span class="line">  &lt;el-table border :data="list"&gt;</span><br><span class="line">    &lt;el-table-column label="åºå·" sortable="" type="index" /&gt;</span><br><span class="line">    &lt;el-table-column label="å§“å" sortable="" prop="username" /&gt;</span><br><span class="line">    &lt;el-table-column label="å·¥å·" sortable="" prop="workNumber" /&gt;</span><br><span class="line">    &lt;el-table-column label="è˜ç”¨å½¢å¼" sortable="" prop="formOfEmployment" /&gt;</span><br><span class="line">    &lt;el-table-column label="éƒ¨é—¨" sortable="" prop="departmentName" /&gt;</span><br><span class="line">    &lt;el-table-column label="å…¥èŒæ—¶é—´" sortable="" prop="timeOfEntry" /&gt;</span><br><span class="line">    &lt;el-table-column label="è´¦æˆ·çŠ¶æ€" sortable="" prop="enableState" /&gt;</span><br><span class="line">    &lt;el-table-column label="æ“ä½œ" sortable="" fixed="right" width="280"&gt;</span><br><span class="line">      &lt;template&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;è½¬æ­£&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;è°ƒå²—&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;ç¦»èŒ&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;è§’è‰²&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button type="text" size="small"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line">  &lt;!-- åˆ†é¡µç»„ä»¶ --&gt;</span><br><span class="line">  &lt;el-row type="flex" justify="center" align="middle" style="height: 60px"&gt;</span><br><span class="line">    &lt;el-pagination</span><br><span class="line">      layout="prev, pager, next"</span><br><span class="line">      :page-size="page.size"</span><br><span class="line">      :current-page="page.page"</span><br><span class="line">      :total="page.total"</span><br><span class="line">      @current-change="changePage"</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/el-card&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½</p>
<h2 id="å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–"><a href="#å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–" class="headerlink" title="å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–"></a>å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–</h2><p>**<code>ç›®æ ‡</code>**ï¼šå°†åˆ—è¡¨ä¸­çš„å†…å®¹è¿›è¡Œæ ¼å¼åŒ–</p>
<h3 id="åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼"><a href="#åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼" class="headerlink" title="åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼"></a>åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼</h3><p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200724001315166.png" alt="image-20200724001315166"></p>
<blockquote>
<p>ä¸Šå°èŠ‚ä¸­ï¼Œåˆ—è¡¨ä¸­çš„<strong>è˜ç”¨å½¢å¼</strong>/<strong>å…¥èŒæ—¶é—´</strong>å’Œ<strong>è´¦æˆ·çŠ¶æ€</strong>éœ€è¦è¿›è¡Œæ˜¾ç¤ºå†…å®¹çš„å¤„ç†</p>
</blockquote>
<p>é‚£ä¹ˆè˜ç”¨å½¢å¼ä¸­<strong>1</strong>ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Œè¿™å®é™…ä¸Šæ˜¯æˆ‘ä»¬éœ€è¦çš„æšä¸¾æ•°æ®ï¼Œè¯¥æ•°æ®çš„å­˜æ”¾æ–‡ä»¶ä½äºæˆ‘ä»¬æä¾›çš„**<code>èµ„æº/æšä¸¾</code><strong>ä¸­ï¼Œå¯ä»¥å°†æšä¸¾ä¸‹çš„æ–‡ä»¶å¤¹æ”¾äº</strong><code>src/api</code>**æ–‡ä»¶å¤¹ä¸‹</p>
<p>é’ˆå¯¹<strong>è˜ç”¨å½¢å¼</strong>ï¼Œå¯ä»¥ä½¿ç”¨<strong>el-table-column</strong>çš„<strong>formatter</strong>å±æ€§è¿›è¡Œè®¾ç½®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span>    EmployeeEnum <span class="keyword">from</span> <span class="string">'@/api/constant/employees'</span></span><br><span class="line">&lt;!-- æ ¼å¼åŒ–è˜ç”¨å½¢å¼ --&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">label</span>=<span class="string">"è˜ç”¨å½¢å¼"</span> <span class="attr">sortable</span> <span class="attr">:formatter</span>=<span class="string">"formatEmployment"</span> /&gt;</span></span></span><br><span class="line">  <span class="comment">// æ ¼å¼åŒ–è˜ç”¨å½¢å¼</span></span><br><span class="line">   <span class="function"><span class="title">formatEmployment</span>(<span class="params">row, column, cellValue, index</span>)</span> {</span><br><span class="line">     <span class="comment">// è¦å»æ‰¾ 1æ‰€å¯¹åº”çš„å€¼</span></span><br><span class="line">     <span class="keyword">const</span> obj = EmployeeEnum.hireType.find(<span class="function"><span class="params">item</span> =&gt;</span> item.id === cellValue)</span><br><span class="line">     <span class="keyword">return</span> obj ? obj.value : <span class="string">'æœªçŸ¥'</span></span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†"><a href="#è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†" class="headerlink" title="è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†"></a>è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†</h3><p>é’ˆå¯¹å…¥èŒæ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨<strong>ä½œç”¨åŸŸæ’æ§½</strong>è¿›è¡Œå¤„ç†</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label="å…¥èŒæ—¶é—´" sortable prop="timeOfEntry"&gt;</span><br><span class="line">           &lt;template slot-scope="obj"&gt;</span><br><span class="line">             {{</span><br><span class="line">               obj.row.timeOfEntry | è¿‡æ»¤å™¨</span><br><span class="line">             }}</span><br><span class="line">           &lt;/template&gt;</span><br><span class="line"> &lt;/el-table-column&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é—®é¢˜æ¥äº†ï¼Œè¿‡æ»¤å™¨ä»å“ªé‡Œå‘¢ï¼Ÿ</p>
</blockquote>
<p>åœ¨**<code>èµ„æº/è¿‡æ»¤å™¨</code><strong>ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†è‹¥å¹²å·¥å…·æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶è½¬åŒ–æˆè¿‡æ»¤å™¨ï¼Œé¦–å…ˆå°†å…¶æ‹·è´åˆ°</strong><code>src</code>**</p>
<p>åœ¨**<code>main.js</code>**ä¸­å°†å·¥å…·æ–¹æ³•è½¬åŒ–æˆè¿‡æ»¤å™¨</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> filters <span class="keyword">from</span> <span class="string">'@/filters'</span> <span class="comment">// å¼•å…¥å·¥å…·ç±»</span></span><br><span class="line"><span class="comment">// æ³¨å†Œå…¨å±€çš„è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="built_in">Object</span>.keys(filters).forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">  <span class="comment">// æ³¨å†Œè¿‡æ»¤å™¨</span></span><br><span class="line">  Vue.filter(key, filters[key])</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å¥½äº†ï¼Œç°åœ¨å¯ä»¥æ„‰å¿«çš„ç”¨è¿‡æ»¤å™¨çš„æ–¹å¼ä½¿ç”¨å·¥å…·ç±»çš„æ–¹æ³•äº†</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label="å…¥èŒæ—¶é—´" sortable="" align="center"&gt;</span><br><span class="line">     &lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;</span><br><span class="line">     &lt;template slot-scope="{ row }"&gt;{{ row.timeOfEntry | formatDate }}&lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åä¸€é¡¹ï¼Œè´¦æˆ·çŠ¶æ€ï¼Œå¯ä»¥ç”¨å¼€å…³ç»„ä»¶switchè¿›è¡Œæ˜¾ç¤º</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label="è´¦æˆ·çŠ¶æ€" align="center" sortable="" prop="enableState"&gt;</span><br><span class="line">           &lt;template slot-scope="{ row }"&gt;</span><br><span class="line">             &lt;!-- æ ¹æ®å½“å‰çŠ¶æ€æ¥ç¡®å®š æ˜¯å¦æ‰“å¼€å¼€å…³ --&gt;</span><br><span class="line">             &lt;el-switch :value="row.enableState === 1" /&gt;</span><br><span class="line">           &lt;/template&gt;</span><br><span class="line">   &lt;/el-table-column&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–</p>
<h2 id="åˆ é™¤å‘˜å·¥åŠŸèƒ½"><a href="#åˆ é™¤å‘˜å·¥åŠŸèƒ½" class="headerlink" title="åˆ é™¤å‘˜å·¥åŠŸèƒ½"></a>åˆ é™¤å‘˜å·¥åŠŸèƒ½</h2><p>**<code>ç›®æ ‡</code>**å®ç°åˆ é™¤å‘˜å·¥çš„åŠŸèƒ½</p>
<p>é¦–å…ˆå°è£… åˆ é™¤å‘˜å·¥çš„è¯·æ±‚</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤å‘˜å·¥æ¥å£</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">delEmployee</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">${id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'delete'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ é™¤åŠŸèƒ½</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"> &lt;template slot-scope="{ row }"&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è½¬æ­£&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è°ƒå²—&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;ç¦»èŒ&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small"&gt;è§’è‰²&lt;/el-button&gt;</span><br><span class="line">              &lt;el-button type="text" size="small" @click="deleteEmployee(row.id)"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">            &lt;/template&gt; </span><br><span class="line">    // åˆ é™¤å‘˜å·¥</span><br><span class="line">    async deleteEmployee(id) {</span><br><span class="line">      try {</span><br><span class="line">        await this.$confirm('æ‚¨ç¡®å®šåˆ é™¤è¯¥å‘˜å·¥å—')</span><br><span class="line">        await delEmployee(id)</span><br><span class="line">        this.getEmployeeList()</span><br><span class="line">        this.$message.success('åˆ </span><br><span class="line">é™¤å‘˜å·¥æˆåŠŸ')</span><br><span class="line">      } catch (error) {</span><br><span class="line">        console.log(error)</span><br><span class="line">      }</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š åˆ é™¤å‘˜å·¥åŠŸèƒ½</p>
<h2 id="æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨"><a href="#æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨" class="headerlink" title="æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨"></a>æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°æ–°å¢å‘˜å·¥çš„åŠŸèƒ½</p>
<h3 id="æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶"><a href="#æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶" class="headerlink" title="æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶"></a>æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶</h3><blockquote>
<p>å½“æˆ‘ä»¬ç‚¹å‡»æ–°å¢å‘˜å·¥æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç±»ä¼¼çš„å¼¹å±‚</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200917110516195.png" alt="image-20200917110516195"></p>
<p>ç±»ä¼¼**<code>ç»„ç»‡æ¶æ„</code>**çš„ç»„ä»¶ï¼ŒåŒæ ·æ–°å»ºä¸€ä¸ªå¼¹å±‚ç»„ä»¶ <strong><code>src/views/employees/components/add-employee.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog title="æ–°å¢å‘˜å·¥" :visible="showDialog"&gt;</span><br><span class="line">    &lt;!-- è¡¨å• --&gt;</span><br><span class="line">    &lt;el-form label-width="120px"&gt;</span><br><span class="line">      &lt;el-form-item label="å§“å"&gt;</span><br><span class="line">        &lt;el-input style="width:50%" placeholder="è¯·è¾“å…¥å§“å" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="æ‰‹æœº"&gt;</span><br><span class="line">        &lt;el-input style="width:50%" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="å…¥èŒæ—¶é—´"&gt;</span><br><span class="line">        &lt;el-date-picker style="width:50%" placeholder="è¯·é€‰æ‹©å…¥èŒæ—¶é—´" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="è˜ç”¨å½¢å¼"&gt;</span><br><span class="line">        &lt;el-select style="width:50%" placeholder="è¯·é€‰æ‹©" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="å·¥å·"&gt;</span><br><span class="line">        &lt;el-input style="width:50%" placeholder="è¯·è¾“å…¥å·¥å·" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="éƒ¨é—¨"&gt;</span><br><span class="line">        &lt;el-input style="width:50%" placeholder="è¯·é€‰æ‹©éƒ¨é—¨" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="è½¬æ­£æ—¶é—´"&gt;</span><br><span class="line">        &lt;el-date-picker style="width:50%" placeholder="è¯·é€‰æ‹©è½¬æ­£æ—¶é—´" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- footeræ’æ§½ --&gt;</span><br><span class="line">    &lt;template v-slot:footer&gt;</span><br><span class="line">      &lt;el-row type="flex" justify="center"&gt;</span><br><span class="line">        &lt;el-col :span="6"&gt;</span><br><span class="line">          &lt;el-button size="small"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button type="primary" size="small"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    showDialog: {</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º"><a href="#å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º" class="headerlink" title="å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º"></a>å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º</h3><p>çˆ¶ç»„ä»¶ä¸­å¼•ç”¨ï¼Œå¼¹å‡ºå±‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import AddDemployee from './components/add-employee'</span><br><span class="line">&lt;!-- æ”¾ç½®æ–°å¢ç»„ä»¶ --&gt;</span><br><span class="line"> &lt;add-employee :show-dialog.sync="showDialog" /&gt;</span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®æ–°å¢ç»„ä»¶ --&gt;</span><br><span class="line"> &lt;add-employee :show-dialog.sync="showDialog" /&gt;</span><br><span class="line"></span><br><span class="line"> &lt;el-button icon="plus" type="primary" size="small" @click="showDialog = true"&gt;æ–°å¢å‘˜å·¥&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ"><a href="#æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ" class="headerlink" title="æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ"></a>æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ</h3><p><strong>å°è£…æ–°å¢å‘˜å·¥</strong>api <strong><code>src/api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** **</span></span><br><span class="line"><span class="comment"> *  æ–°å¢å‘˜å·¥çš„æ¥å£</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addEmployee</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>é’ˆå¯¹å‘˜å·¥å±æ€§ï¼Œæ·»åŠ æ ¡éªŒè§„åˆ™</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> EmployeeEnum <span class="keyword">from</span> <span class="string">'@/api/constant/employees'</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      EmployeeEnum, <span class="comment">// åœ¨dataä¸­å®šä¹‰æ•°æ®</span></span><br><span class="line">      <span class="comment">// è¡¨å•æ•°æ®</span></span><br><span class="line">      <span class="attr">treeData</span>: [], <span class="comment">// å®šä¹‰æ•°ç»„æ¥æ”¶æ ‘å½¢æ•°æ®</span></span><br><span class="line">      <span class="attr">showTree</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ ‘å½¢çš„æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ ‘çš„æ˜¾ç¤ºæˆ–è€…éšè—è¿›åº¦æ¡</span></span><br><span class="line">      <span class="attr">formData</span>: {</span><br><span class="line">        <span class="attr">username</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">mobile</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">formOfEmployment</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">workNumber</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">departmentName</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">timeOfEntry</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">correctionTime</span>: <span class="string">''</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">rules</span>: {</span><br><span class="line">        <span class="attr">username</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'ç”¨æˆ·å§“åä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }, {</span><br><span class="line">          <span class="attr">min</span>: <span class="number">1</span>, <span class="attr">max</span>: <span class="number">4</span>, <span class="attr">message</span>: <span class="string">'ç”¨æˆ·å§“åä¸º1-4ä½'</span></span><br><span class="line">        }],</span><br><span class="line">        <span class="attr">mobile</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }, {</span><br><span class="line">          <span class="attr">pattern</span>: <span class="regexp">/^1[3-9]\d{9}$/</span>, message: <span class="string">'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span></span><br><span class="line">        }],</span><br><span class="line">        <span class="attr">formOfEmployment</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'è˜ç”¨å½¢å¼ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">        <span class="attr">workNumber</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å·¥å·ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">        <span class="attr">departmentName</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'éƒ¨é—¨ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'change'</span> }],</span><br><span class="line">        <span class="attr">timeOfEntry</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å…¥èŒæ—¶é—´'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }]</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>ç»‘å®šæ•°æ®å’Œè§„åˆ™æ ¡éªŒ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form :model="formData" :rules="rules" label-width="120px"&gt;</span><br><span class="line">  &lt;el-form-item label="å§“å" prop="username"&gt;</span><br><span class="line">    &lt;el-input v-model="formData.username" style="width:50%" placeholder="è¯·è¾“å…¥å§“å" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="æ‰‹æœº" prop="mobile"&gt;</span><br><span class="line">    &lt;el-input v-model="formData.mobile" style="width:50%" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="å…¥èŒæ—¶é—´" prop="timeOfEntry"&gt;</span><br><span class="line">    &lt;el-date-picker v-model="formData.timeOfEntry" style="width:50%" placeholder="è¯·é€‰æ‹©æ—¥æœŸ" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="è˜ç”¨å½¢å¼" prop="formOfEmployment"&gt;</span><br><span class="line">    &lt;el-select v-model="formData.formOfEmployment" style="width:50%" placeholder="è¯·é€‰æ‹©" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="å·¥å·" prop="workNumber"&gt;</span><br><span class="line">    &lt;el-input v-model="formData.workNumber" style="width:50%" placeholder="è¯·è¾“å…¥å·¥å·" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="éƒ¨é—¨" prop="departmentName"&gt;</span><br><span class="line">    &lt;el-input v-model="formData.departmentName" style="width:50%" placeholder="è¯·é€‰æ‹©éƒ¨é—¨" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">  &lt;el-form-item label="è½¬æ­£æ—¶é—´" prop="correctionTime"&gt;</span><br><span class="line">    &lt;el-date-picker v-model="formData.correctionTime" style="width:50%" placeholder="è¯·é€‰æ‹©æ—¥æœŸ" /&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢"><a href="#åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢" class="headerlink" title="åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢"></a>åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢</h3><p><strong>è˜ç”¨å½¢å¼å’Œé€‰æ‹©éƒ¨é—¨çš„å¤„ç†</strong></p>
<blockquote>
<p> å‘˜å·¥çš„éƒ¨é—¨æ˜¯ä»æ ‘å½¢éƒ¨é—¨ä¸­é€‰æ‹©ä¸€ä¸ªéƒ¨é—¨</p>
</blockquote>
<p><strong>è·å–éƒ¨é—¨æ•°æ®ï¼Œè½¬åŒ–æ ‘å½¢</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getDepartments } <span class="keyword">from</span> <span class="string">'@/api/departments'</span></span><br><span class="line"><span class="keyword">import</span> { transListToTreeData } <span class="keyword">from</span> <span class="string">'@/utils'</span></span><br><span class="line">  data () {</span><br><span class="line">      <span class="keyword">return</span> {</span><br><span class="line">             <span class="comment">// è¡¨å•æ•°æ®</span></span><br><span class="line">       <span class="attr">treeData</span>: [], <span class="comment">// å®šä¹‰æ•°ç»„æ¥æ”¶æ ‘å½¢æ•°æ®</span></span><br><span class="line">       <span class="attr">showTree</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ ‘å½¢çš„æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line">       <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ ‘çš„æ˜¾ç¤ºæˆ–è€…éšè—è¿›åº¦æ¡</span></span><br><span class="line">      }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">      <span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.showTree = <span class="literal">true</span></span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">const</span> { depts } = <span class="keyword">await</span> getDepartments()</span><br><span class="line">      <span class="comment">// deptsæ˜¯æ•°ç»„ ä½†ä¸æ˜¯æ ‘å½¢</span></span><br><span class="line">      <span class="built_in">this</span>.treeData = transListToTreeData(depts, <span class="string">''</span>)</span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®"><a href="#ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®" class="headerlink" title="ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®"></a>ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®</h3><p><strong>é€‰æ‹©éƒ¨é—¨ï¼Œèµ‹å€¼è¡¨å•æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item label="éƒ¨é—¨" prop="departmentName"&gt;</span><br><span class="line">        &lt;el-input v-model="formData.departmentName" style="width:50%" placeholder="è¯·é€‰æ‹©éƒ¨é—¨" @focus="getDepartments" /&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®ä¸€ä¸ªtreeç»„ä»¶ --&gt;</span><br><span class="line">        &lt;el-tree</span><br><span class="line">          v-if="showTree"</span><br><span class="line">          v-loading="loading"</span><br><span class="line">          :data="treeData"</span><br><span class="line">          default-expand-all=""</span><br><span class="line">          :props="{ label: 'name' }"</span><br><span class="line">          @node-click="selectNode"</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br></pre></td></tr></tbody></table></figure>



<p><strong>ç‚¹å‡»éƒ¨é—¨æ—¶è§¦å‘</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">selectNode</span>(<span class="params">node</span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.formData.departmentName = node.name</span><br><span class="line">  <span class="built_in">this</span>.showTree = <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è˜ç”¨å½¢å¼</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item label="è˜ç”¨å½¢å¼" prop="formOfEmployment"&gt;</span><br><span class="line">    &lt;el-select v-model="formData.formOfEmployment" style="width:50%" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">      &lt;!-- éå†åªèƒ½éå†ç»„ä»¶çš„æ•°æ® --&gt;</span><br><span class="line">      &lt;el-option v-for="item in EmployeeEnum.hireType" :key="item.id" :label="item.value" :value="item.id" /&gt;</span><br><span class="line">    &lt;/el-select&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ"><a href="#æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ" class="headerlink" title="æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ"></a>æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ</h2><p><strong>è°ƒç”¨æ–°å¢æ¥å£</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶ æ ¡éªŒæ•´ä¸ªè¡¨å•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.addEmployee.validate()</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£</span></span><br><span class="line">    <span class="keyword">await</span> addEmployee(<span class="built_in">this</span>.formData) <span class="comment">// æ–°å¢å‘˜å·¥</span></span><br><span class="line">    <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®</span></span><br><span class="line">    <span class="comment">// this.$parent å¯ä»¥ç›´æ¥è°ƒç”¨åˆ°çˆ¶ç»„ä»¶çš„å®ä¾‹ å®é™…ä¸Šå°±æ˜¯çˆ¶ç»„ä»¶this</span></span><br><span class="line">    <span class="comment">// this.$emit</span></span><br><span class="line">    <span class="built_in">this</span>.$parent.getEmployeeList()</span><br><span class="line">    <span class="built_in">this</span>.$parent.showDialog = <span class="literal">false</span></span><br><span class="line">  } <span class="keyword">catch</span> (error) {</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">  }</span><br><span class="line">},</span><br><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="comment">// é‡ç½®åŸæ¥çš„æ•°æ®</span></span><br><span class="line">  <span class="built_in">this</span>.formData = {</span><br><span class="line">    <span class="attr">username</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">mobile</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">formOfEmployment</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">workNumber</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">departmentName</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">timeOfEntry</span>: <span class="string">''</span>,</span><br><span class="line">    <span class="attr">correctionTime</span>: <span class="string">''</span></span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">this</span>.$refs.addEmployee.resetFields() <span class="comment">// é‡ç½®æ ¡éªŒç»“æœ</span></span><br><span class="line">  <span class="built_in">this</span>.$emit(<span class="string">'update:showDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ–°å¢å‘˜å·¥çš„åŠŸèƒ½å’Œç»„ç»‡æ¶æ„çš„åŠŸèƒ½æå…¶ç±»ä¼¼ï¼Œè¿™é‡Œä¸åšè¿‡å¤šé˜è¿°</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> æ–°å¢å‘˜å·¥åŠŸèƒ½å’Œå¼¹å±‚</p>
<h2 id="å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…"><a href="#å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…" class="headerlink" title="å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…"></a>å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…</h2><p>**<code>ç›®æ ‡</code>**ï¼šå°è£…ä¸€ä¸ªå¯¼å…¥excelæ•°æ®çš„æ–‡ä»¶</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200726005308648.png" alt="image-20200726005308648"></p>
<p>é¦–å…ˆå°è£…ä¸€ä¸ªç±»ä¼¼çš„ç»„ä»¶ï¼Œé¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç±»ä¼¼åŠŸèƒ½ï¼Œvue-element-adminå·²ç»æä¾›äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¹é€ å³å¯ <a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/vue-element-admin/blob/master/src/components/UploadExcel/index.vue">ä»£ç åœ°å€</a></p>
<blockquote>
<p>ç±»ä¼¼åŠŸèƒ½æ€§çš„ç»„ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦ä¼šä½¿ç”¨å’Œå°è£…å³å¯ </p>
</blockquote>
<p>excelå¯¼å…¥åŠŸèƒ½éœ€è¦ä½¿ç”¨npmåŒ…**<code>xlsx</code><strong>ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…</strong><code>xlsx</code>**æ’ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i xlsx</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å°†vue-element-adminæä¾›çš„å¯¼å…¥åŠŸèƒ½æ–°å»ºä¸€ä¸ªç»„ä»¶ï¼Œä½ç½®ï¼š <strong><code>src/components/UploadExcel</code></strong></p>
</blockquote>
<p><strong>æ³¨å†Œå…¨å±€çš„å¯¼å…¥excelç»„ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PageTools <span class="keyword">from</span> <span class="string">'./PageTools'</span></span><br><span class="line"><span class="keyword">import</span> UploadExcel <span class="keyword">from</span> <span class="string">'./UploadExcel'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue</span>)</span> {</span><br><span class="line">    Vue.component(<span class="string">'PageTools'</span>, PageTools) <span class="comment">// æ³¨å†Œå·¥å…·æ ç»„ä»¶</span></span><br><span class="line">    Vue.component(<span class="string">'UploadExcel'</span>, UploadExcel) <span class="comment">// æ³¨å†Œå¯¼å…¥excelç»„ä»¶</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¿®æ”¹æ ·å¼å’Œå¸ƒå±€</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;div class="upload-excel"&gt;</span><br><span class="line">    &lt;div class="btn-upload"&gt;</span><br><span class="line">      &lt;el-button :loading="loading" size="mini" type="primary" @click="handleUpload"&gt;</span><br><span class="line">        ç‚¹å‡»ä¸Šä¼ </span><br><span class="line">      &lt;/el-button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;input ref="excel-upload-input" class="excel-upload-input" type="file" accept=".xlsx, .xls" @change="handleClick"&gt;</span><br><span class="line">    &lt;div class="drop" @drop="handleDrop" @dragover="handleDragover" @dragenter="handleDragover"&gt;</span><br><span class="line">      &lt;i class="el-icon-upload" /&gt;</span><br><span class="line">      &lt;span&gt;å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped lang="scss"&gt;</span><br><span class="line">.upload-excel {</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: center;</span><br><span class="line">   margin-top: 100px;</span><br><span class="line">   .excel-upload-input{</span><br><span class="line">       display: none;</span><br><span class="line">        z-index: -9999;</span><br><span class="line">     }</span><br><span class="line">   .btn-upload , .drop{</span><br><span class="line">      border: 1px dashed #bbb;</span><br><span class="line">      width: 350px;</span><br><span class="line">      height: 160px;</span><br><span class="line">      text-align: center;</span><br><span class="line">      line-height: 160px;</span><br><span class="line">   }</span><br><span class="line">   .drop{</span><br><span class="line">       line-height: 80px;</span><br><span class="line">       color: #bbb;</span><br><span class="line">      i {</span><br><span class="line">        font-size: 60px;</span><br><span class="line">        display: block;</span><br><span class="line">      }</span><br><span class="line">   }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…</p>
<h2 id="å‘˜å·¥çš„å¯¼å…¥"><a href="#å‘˜å·¥çš„å¯¼å…¥" class="headerlink" title="å‘˜å·¥çš„å¯¼å…¥"></a>å‘˜å·¥çš„å¯¼å…¥</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°å‘˜å·¥çš„å¯¼å…¥</p>
<h3 id="å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±"><a href="#å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±" class="headerlink" title="å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±"></a>å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±</h3><p><strong>æ–°å»ºä¸€ä¸ªå…¬å…±çš„å¯¼å…¥é¡µé¢ï¼ŒæŒ‚è½½è·¯ç”±</strong> <strong><code>src/router/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'/import'</span>,</span><br><span class="line">    <span class="attr">component</span>: Layout,</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span>, <span class="comment">// éšè—åœ¨å·¦ä¾§èœå•ä¸­</span></span><br><span class="line">    <span class="attr">children</span>: [{</span><br><span class="line">      <span class="attr">path</span>: <span class="string">''</span>, <span class="comment">// äºŒçº§è·¯ç”±pathä»€ä¹ˆéƒ½ä¸å†™ è¡¨ç¤ºäºŒçº§é»˜è®¤è·¯ç”±</span></span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/import'</span>)</span><br><span class="line">    }]</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ›å»ºimportè·¯ç”±ç»„ä»¶</strong> <strong><code>src/views/import/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- å…¬å…±å¯¼å…¥ç»„ä»¶ --&gt; </span><br><span class="line">  &lt;upload-excel :on-success="success" /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£"><a href="#åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£" class="headerlink" title="åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£"></a>åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£</h3><blockquote>
<p>å°è£…å¯¼å…¥å‘˜å·¥çš„apiæ¥å£  </p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  å°è£…ä¸€ä¸ªå¯¼å…¥å‘˜å·¥çš„æ¥å£</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">importEmployee</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user/batch'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®ç°excelå¯¼å…¥"><a href="#å®ç°excelå¯¼å…¥" class="headerlink" title="å®ç°excelå¯¼å…¥"></a>å®ç°excelå¯¼å…¥</h3><p><strong>è·å–å¯¼å…¥çš„excelæ•°æ®, å¯¼å…¥excelæ¥å£</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>  <span class="function"><span class="title">success</span>(<span class="params">{ header, results }</span>)</span> {</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯å¯¼å…¥å‘˜å·¥</span></span><br><span class="line">    <span class="keyword">const</span> userRelations = {</span><br><span class="line">      <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">      <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">      <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">      <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">      <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">   results.forEach(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">const</span> userInfo = {}</span><br><span class="line">      <span class="built_in">Object</span>.keys(item).forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">        userInfo[userRelations[key]] = item[key]</span><br><span class="line">      })</span><br><span class="line">     arr.push(userInfo) </span><br><span class="line">    })</span><br><span class="line">    <span class="keyword">await</span> importEmployee(arr) <span class="comment">// è°ƒç”¨å¯¼å…¥æ¥å£</span></span><br><span class="line">    <span class="built_in">this</span>.$router.back()</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸ºäº†è®©è¿™ä¸ªé¡µé¢å¯ä»¥æœåŠ¡æ›´å¤šçš„å¯¼å…¥åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸­ç”¨å‚æ•°æ¥åˆ¤æ–­ï¼Œæ˜¯å¦æ˜¯å¯¼å…¥å‘˜å·¥</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="keyword">return</span> {</span><br><span class="line">     <span class="attr">type</span>: <span class="built_in">this</span>.$route.query.type</span><br><span class="line">   }</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p>å½“excelä¸­æœ‰æ—¥æœŸæ ¼å¼çš„æ—¶å€™ï¼Œå®é™…è½¬åŒ–çš„å€¼ä¸ºä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•è¿›è¡Œè½¬åŒ–</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">formatDate</span>(<span class="params">numb, format</span>)</span> {</span><br><span class="line">  <span class="keyword">const</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>((numb - <span class="number">1</span>) * <span class="number">24</span> * <span class="number">3600000</span> + <span class="number">1</span>)</span><br><span class="line">  time.setYear(time.getFullYear() - <span class="number">70</span>)</span><br><span class="line">  <span class="keyword">const</span> year = time.getFullYear() + <span class="string">''</span></span><br><span class="line">  <span class="keyword">const</span> month = time.getMonth() + <span class="number">1</span> + <span class="string">''</span></span><br><span class="line">  <span class="keyword">const</span> date = time.getDate() - <span class="number">1</span> + <span class="string">''</span></span><br><span class="line">  <span class="keyword">if</span> (format &amp;&amp; format.length === <span class="number">1</span>) {</span><br><span class="line">    <span class="keyword">return</span> year + format + month + format + date</span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> year + (month &lt; <span class="number">10</span> ? <span class="string">'0'</span> + month : month) + (date &lt; <span class="number">10</span> ? <span class="string">'0'</span> + date : date)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>éœ€è¦æ³¨æ„ï¼Œ**<code>å¯¼å…¥çš„æ‰‹æœºå·ä¸èƒ½å’Œä¹‹å‰çš„å­˜åœ¨çš„æ‰‹æœºå·é‡å¤</code>**</p>
</blockquote>
<p><strong>é€»è¾‘åˆ¤æ–­</strong> </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>  <span class="function"><span class="title">success</span>(<span class="params">{ header, results }</span>)</span> {</span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">this</span>.type === <span class="string">'user'</span>) {</span><br><span class="line">       <span class="keyword">const</span> userRelations = {</span><br><span class="line">         <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">         <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">         <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">         <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">         <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span></span><br><span class="line">       }</span><br><span class="line">       <span class="keyword">const</span> arr = []</span><br><span class="line">       <span class="comment">// éå†æ‰€æœ‰çš„æ•°ç»„</span></span><br><span class="line">       results.forEach(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">       <span class="comment">// éœ€è¦å°†æ¯ä¸€ä¸ªæ¡æ•°æ®é‡Œé¢çš„ä¸­æ–‡éƒ½æ¢æˆè‹±æ–‡</span></span><br><span class="line">         <span class="keyword">const</span> userInfo = {}</span><br><span class="line">         <span class="built_in">Object</span>.keys(item).forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">         <span class="comment">// keyæ˜¯å½“å‰çš„ä¸­æ–‡å æ‰¾åˆ°å¯¹åº”çš„è‹±æ–‡å</span></span><br><span class="line">           <span class="keyword">if</span> (userRelations[key] === <span class="string">'timeOfEntry'</span> || userRelations[key] === <span class="string">'correctionTime'</span>) {</span><br><span class="line">             userInfo[userRelations[key]] = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">this</span>.formatDate(item[key], <span class="string">'/'</span>)) <span class="comment">// åªæœ‰è¿™æ ·, æ‰èƒ½å…¥åº“</span></span><br><span class="line">             <span class="keyword">return</span></span><br><span class="line">           }</span><br><span class="line">           userInfo[userRelations[key]] = item[key]</span><br><span class="line">         })</span><br><span class="line">         <span class="comment">// æœ€ç»ˆuserInfoå˜æˆäº†å…¨æ˜¯è‹±æ–‡</span></span><br><span class="line">         arr.push(userInfo)</span><br><span class="line">       })</span><br><span class="line">       <span class="keyword">await</span> importEmployee(arr)</span><br><span class="line">       <span class="built_in">this</span>.$message.success(<span class="string">'å¯¼å…¥æˆåŠŸ'</span>)</span><br><span class="line">     }</span><br><span class="line">     <span class="built_in">this</span>.$router.back() <span class="comment">// å›åˆ°ä¸Šä¸€é¡µ</span></span><br><span class="line">   },</span><br><span class="line">   <span class="function"><span class="title">formatDate</span>(<span class="params">numb, format</span>)</span> {</span><br><span class="line">     <span class="keyword">const</span> time = <span class="keyword">new</span> <span class="built_in">Date</span>((numb - <span class="number">1</span>) * <span class="number">24</span> * <span class="number">3600000</span> + <span class="number">1</span>)</span><br><span class="line">     time.setYear(time.getFullYear() - <span class="number">70</span>)</span><br><span class="line">     <span class="keyword">const</span> year = time.getFullYear() + <span class="string">''</span></span><br><span class="line">     <span class="keyword">const</span> month = time.getMonth() + <span class="number">1</span> + <span class="string">''</span></span><br><span class="line">     <span class="keyword">const</span> date = time.getDate() - <span class="number">1</span> + <span class="string">''</span></span><br><span class="line">     <span class="keyword">if</span> (format &amp;&amp; format.length === <span class="number">1</span>) {</span><br><span class="line">       <span class="keyword">return</span> year + format + month + format + date</span><br><span class="line">     }</span><br><span class="line">     <span class="keyword">return</span> year + (month &lt; <span class="number">10</span> ? <span class="string">'0'</span> + month : month) + (date &lt; <span class="number">10</span> ? <span class="string">'0'</span> + date : date)</span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å‘˜å·¥é¡µé¢è·³è½¬</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type="warning" size="small" @click="$router.push('/import?type=user')"&gt;å¯¼å…¥&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>**<code>ç›®æ ‡</code>**ï¼š å®ç°å‘˜å·¥çš„å¯¼å…¥</p>
<h2 id="å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½"><a href="#å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½" class="headerlink" title="å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½"></a>å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½</h2><p><strong>ç›®æ ‡</strong>ï¼š å®ç°å°†å‘˜å·¥æ•°æ®å¯¼å‡ºåŠŸèƒ½</p>
<blockquote>
<p>æ—¥å¸¸ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°excelå¯¼å‡ºåŠŸèƒ½ï¼Œ æ€ä¹ˆä½¿ç”¨å‘¢</p>
</blockquote>
<p>Excel çš„å¯¼å…¥å¯¼å‡ºéƒ½æ˜¯ä¾èµ–äº<a target="_blank" rel="noopener" href="https://github.com/SheetJS/js-xlsx">js-xlsx</a>æ¥å®ç°çš„ã€‚</p>
<p>åœ¨ <code>js-xlsx</code>çš„åŸºç¡€ä¸Šåˆå°è£…äº†<a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/vue-element-admin/blob/master/src/vendor/Export2Excel.js">Export2Excel.js</a>æ¥æ–¹ä¾¿å¯¼å‡ºæ•°æ®ã€‚</p>
<h3 id="å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½"><a href="#å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½" class="headerlink" title="å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½"></a>å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½</h3><p>ç”±äº <code>Export2Excel</code>ä¸ä»…ä¾èµ–<code>js-xlsx</code>è¿˜ä¾èµ–<code>file-saver</code>å’Œ<code>script-loader</code>ã€‚</p>
<p>æ‰€ä»¥ä½ å…ˆéœ€è¦å®‰è£…å¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install xlsx file-saver -S</span><br><span class="line">npm install script-loader -S -D</span><br></pre></td></tr></tbody></table></figure>

<p>ç”±äº<code>js-xlsx</code>ä½“ç§¯è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œå¯¼å‡ºåŠŸèƒ½ä¹Ÿä¸æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™å»ºè®®ä½¿ç”¨æ‡’åŠ è½½ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">'@/vendor/Export2Excel'</span>).then(<span class="function"><span class="params">excel</span> =&gt;</span> {</span><br><span class="line">  excel.export_json_to_excel({</span><br><span class="line">    <span class="attr">header</span>: tHeader, <span class="comment">//è¡¨å¤´ å¿…å¡«</span></span><br><span class="line">    data, <span class="comment">//å…·ä½“æ•°æ® å¿…å¡«</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">'excel-list'</span>, <span class="comment">//éå¿…å¡«</span></span><br><span class="line">    <span class="attr">autoWidth</span>: <span class="literal">true</span>, <span class="comment">//éå¿…å¡«</span></span><br><span class="line">    <span class="attr">bookType</span>: <span class="string">'xlsx'</span> <span class="comment">//éå¿…å¡«</span></span><br><span class="line">  })</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»"><a href="#excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»" class="headerlink" title="excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»"></a>excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»</h3><blockquote>
<p>vue-element-adminæä¾›äº†å¯¼å‡ºçš„åŠŸèƒ½æ¨¡å—ï¼Œåœ¨è¯¾ç¨‹èµ„æº/excelå¯¼å‡ºç›®å½•ä¸‹ï¼Œæ”¾ç½®åˆ°srcç›®å½•ä¸‹</p>
</blockquote>
<p><strong>å‚æ•°</strong></p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
<th>ç±»å‹</th>
<th>å¯é€‰å€¼</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>header</td>
<td>å¯¼å‡ºæ•°æ®çš„è¡¨å¤´</td>
<td>Array</td>
<td>/</td>
<td>[]</td>
</tr>
<tr>
<td>data</td>
<td>å¯¼å‡ºçš„å…·ä½“æ•°æ®</td>
<td>Array</td>
<td>/</td>
<td>[[]]</td>
</tr>
<tr>
<td>filename</td>
<td>å¯¼å‡ºæ–‡ä»¶å</td>
<td>String</td>
<td>/</td>
<td>excel-list</td>
</tr>
<tr>
<td>autoWidth</td>
<td>å•å…ƒæ ¼æ˜¯å¦è¦è‡ªé€‚åº”å®½åº¦</td>
<td>Boolean</td>
<td>true / false</td>
<td>true</td>
</tr>
<tr>
<td>bookType</td>
<td>å¯¼å‡ºæ–‡ä»¶ç±»å‹</td>
<td>String</td>
<td>xlsx, csv, txt, <a target="_blank" rel="noopener" href="https://github.com/SheetJS/js-xlsx#supported-output-formats">more</a></td>
<td>xlsx</td>
</tr>
</tbody></table>
<h3 id="excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„"><a href="#excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„" class="headerlink" title="excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„"></a>excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„</h3><blockquote>
<p>æˆ‘ä»¬æœ€é‡è¦çš„ä¸€ä»¶äº‹ï¼Œå°±æ˜¯æŠŠè¡¨å¤´å’Œæ•°æ®è¿›è¡Œç›¸åº”çš„å¯¹åº”</p>
</blockquote>
<p>å› ä¸ºæ•°æ®ä¸­çš„keyæ˜¯è‹±æ–‡ï¼Œæƒ³è¦å¯¼å‡ºçš„è¡¨å¤´æ˜¯ä¸­æ–‡çš„è¯ï¼Œéœ€è¦å°†ä¸­æ–‡å’Œè‹±æ–‡åšå¯¹åº”</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> headers = {</span><br><span class="line">     <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">     <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">     <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">     <span class="string">'è˜ç”¨å½¢å¼'</span>: <span class="string">'formOfEmployment'</span>,</span><br><span class="line">     <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">     <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span>,</span><br><span class="line">     <span class="string">'éƒ¨é—¨'</span>: <span class="string">'departmentName'</span></span><br><span class="line">   }</span><br></pre></td></tr></tbody></table></figure>

<p>ç„¶åï¼Œ<strong>å®Œæˆå¯¼å‡ºä»£ç </strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºexcelæ•°æ®</span></span><br><span class="line"><span class="function"><span class="title">exportData</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="comment">//  åšæ“ä½œ</span></span><br><span class="line">  <span class="comment">// è¡¨å¤´å¯¹åº”å…³ç³»</span></span><br><span class="line">  <span class="keyword">const</span> headers = {</span><br><span class="line">    <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">    <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">    <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">    <span class="string">'è˜ç”¨å½¢å¼'</span>: <span class="string">'formOfEmployment'</span>,</span><br><span class="line">    <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">    <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span>,</span><br><span class="line">    <span class="string">'éƒ¨é—¨'</span>: <span class="string">'departmentName'</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">// æ‡’åŠ è½½</span></span><br><span class="line">  <span class="keyword">import</span>(<span class="string">'@/vendor/Export2Excel'</span>).then(<span class="keyword">async</span> excel =&gt; {</span><br><span class="line">    <span class="keyword">const</span> { rows } = <span class="keyword">await</span> getEmployeeList({ <span class="attr">page</span>: <span class="number">1</span>, <span class="attr">size</span>: <span class="built_in">this</span>.page.total })</span><br><span class="line">    <span class="keyword">const</span> data = <span class="built_in">this</span>.formatJson(headers, rows)</span><br><span class="line"></span><br><span class="line">    excel.export_json_to_excel({</span><br><span class="line">      <span class="attr">header</span>: <span class="built_in">Object</span>.keys(headers),</span><br><span class="line">      data,</span><br><span class="line">      <span class="attr">filename</span>: <span class="string">'å‘˜å·¥ä¿¡æ¯è¡¨'</span>,</span><br><span class="line">      <span class="attr">autoWidth</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">bookType</span>: <span class="string">'xlsx'</span></span><br><span class="line"></span><br><span class="line">    })</span><br><span class="line">    <span class="comment">// è·å–æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// excel.export_json_to_excel({</span></span><br><span class="line">    <span class="comment">//   header: ['å§“å', 'è–ªèµ„'],</span></span><br><span class="line">    <span class="comment">//   data: [['å¼ ä¸‰', 12000], ['æå››', 5000]],</span></span><br><span class="line">    <span class="comment">//   filename: 'å‘˜å·¥è–ªèµ„è¡¨',</span></span><br><span class="line">    <span class="comment">//   autoWidth: true,</span></span><br><span class="line">    <span class="comment">//   bookType: 'csv'</span></span><br><span class="line">    <span class="comment">// })</span></span><br><span class="line">  })</span><br><span class="line">},</span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•è´Ÿè´£å°†æ•°ç»„è½¬åŒ–æˆäºŒç»´æ•°ç»„</span></span><br><span class="line"><span class="function"><span class="title">formatJson</span>(<span class="params">headers, rows</span>)</span> {</span><br><span class="line">  <span class="comment">// é¦–å…ˆéå†æ•°ç»„</span></span><br><span class="line">  <span class="comment">// [{ username: 'å¼ ä¸‰'},{},{}]  =&gt; [[â€™å¼ ä¸‰'],[],[]]</span></span><br><span class="line">  <span class="keyword">return</span> rows.map(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(headers).map(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">      <span class="keyword">if</span> (headers[key] === <span class="string">'timeOfEntry'</span> || headers[key] === <span class="string">'correctionTime'</span>) {</span><br><span class="line">        <span class="keyword">return</span> formatDate(item[headers[key]]) <span class="comment">// è¿”å›æ ¼å¼åŒ–ä¹‹å‰çš„æ—¶é—´</span></span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> (headers[key] === <span class="string">'formOfEmployment'</span>) {</span><br><span class="line">        <span class="keyword">var</span> en = EmployeeEnum.hireType.find(<span class="function"><span class="params">obj</span> =&gt;</span> obj.id === item[headers[key]])</span><br><span class="line">        <span class="keyword">return</span> en ? en.value : <span class="string">'æœªçŸ¥'</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> item[headers[key]]</span><br><span class="line">    }) <span class="comment">// =&gt; ["å¼ ä¸‰", "13811"ï¼Œ"2018","1", "2018", "10002"]</span></span><br><span class="line">  })</span><br><span class="line">  <span class="comment">// return data</span></span><br><span class="line">  <span class="comment">// return rows.map(item =&gt; {</span></span><br><span class="line">  <span class="comment">//   // itemæ˜¯å¯¹è±¡  =&gt; è½¬åŒ–æˆåªæœ‰å€¼çš„æ•°ç»„ =&gt; æ•°ç»„å€¼çš„é¡ºåºä¾èµ–headers  {username: 'å¼ ä¸‰'  }</span></span><br><span class="line">  <span class="comment">//   // Object.keys(headers)  =&gt; ["å§“å", "æ‰‹æœºå·",...]</span></span><br><span class="line">  <span class="comment">//   return Object.keys(headers).map(key =&gt; {</span></span><br><span class="line">  <span class="comment">//     return item[headers[key]]</span></span><br><span class="line">  <span class="comment">//   }) // /  å¾—åˆ° ['å¼ ä¸‰'ï¼Œâ€™129â€˜ï¼Œâ€™ddâ€˜,'dd']</span></span><br><span class="line">  <span class="comment">// })</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†"><a href="#å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†" class="headerlink" title="å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†"></a>å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">formatJson</span>(<span class="params">headers, rows</span>)</span> {</span><br><span class="line">  <span class="keyword">return</span> rows.map(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">    <span class="comment">// itemæ˜¯ä¸€ä¸ªå¯¹è±¡  { mobile: 132111,username: 'å¼ ä¸‰'  }</span></span><br><span class="line">    <span class="comment">// ["æ‰‹æœºå·", "å§“å", "å…¥èŒæ—¥æœŸ" ã€‚ã€‚]</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(headers).map(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">      <span class="comment">// éœ€è¦åˆ¤æ–­ å­—æ®µ</span></span><br><span class="line">      <span class="keyword">if</span> (headers[key] === <span class="string">'timeOfEntry'</span> || headers[key] === <span class="string">'correctionTime'</span>) {</span><br><span class="line">        <span class="comment">// æ ¼å¼åŒ–æ—¥æœŸ</span></span><br><span class="line">        <span class="keyword">return</span> formatDate(item[headers[key]])</span><br><span class="line">      } <span class="keyword">else</span> <span class="keyword">if</span> (headers[key] === <span class="string">'formOfEmployment'</span>) {</span><br><span class="line">        <span class="keyword">const</span> obj = EmployeeEnum.hireType.find(<span class="function"><span class="params">obj</span> =&gt;</span> obj.id === item[headers[key]])</span><br><span class="line">        <span class="keyword">return</span> obj ? obj.value : <span class="string">'æœªçŸ¥'</span></span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> item[headers[key]]</span><br><span class="line">    })</span><br><span class="line">    <span class="comment">// ["132", 'å¼ ä¸‰â€™ï¼Œ â€˜â€™ï¼Œâ€˜â€™ï¼Œâ€˜â€™d]</span></span><br><span class="line">  })</span><br><span class="line">  <span class="comment">// return rows.map(item =&gt; Object.keys(headers).map(key =&gt; item[headers[key]]))</span></span><br><span class="line">  <span class="comment">// éœ€è¦å¤„ç†æ—¶é—´æ ¼å¼é—®é¢˜</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="æ‰©å±•-å¤æ‚è¡¨å¤´çš„å¯¼å‡º"><a href="#æ‰©å±•-å¤æ‚è¡¨å¤´çš„å¯¼å‡º" class="headerlink" title="æ‰©å±•  å¤æ‚è¡¨å¤´çš„å¯¼å‡º"></a><strong><code>æ‰©å±•</code></strong>  å¤æ‚è¡¨å¤´çš„å¯¼å‡º</h3><blockquote>
<p>å½“éœ€è¦å¯¼å‡ºå¤æ‚è¡¨å¤´çš„æ—¶å€™ï¼Œvue-element-adminåŒæ ·æ”¯æŒè¯¥ç±»æ“ä½œ</p>
</blockquote>
<p><strong>vue-element-admin</strong> æä¾›çš„å¯¼å‡ºæ–¹æ³•ä¸­æœ‰ <strong>multiHeader</strong>å’Œ<strong>merges</strong> çš„å‚æ•°</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
<th>ç±»å‹</th>
<th>å¯é€‰å€¼</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td>multiHeader</td>
<td>å¤æ‚è¡¨å¤´çš„éƒ¨åˆ†</td>
<td>Array</td>
<td>/</td>
<td>[[]]</td>
</tr>
<tr>
<td>merges</td>
<td>éœ€è¦åˆå¹¶çš„éƒ¨åˆ†</td>
<td>Array</td>
<td>/</td>
<td>[]</td>
</tr>
</tbody></table>
<p>multiHeaderé‡Œé¢æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œé‡Œé¢çš„ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€è¡Œè¡¨å¤´ï¼Œå‡è®¾ä½ æƒ³å¾—åˆ°ä¸€ä¸ªå¦‚å›¾çš„ç»“æ„</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201014152302636.png" alt="image-20201014152302636"></p>
<p>mutiHeaderåº”è¯¥è¿™æ ·å®šä¹‰</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> multiHeader = [[<span class="string">'å§“å'</span>, <span class="string">'ä¸»è¦ä¿¡æ¯'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">'éƒ¨é—¨'</span>]]</span><br></pre></td></tr></tbody></table></figure>

<p>multiHeaderä¸­çš„ä¸€è¡Œè¡¨å¤´ä¸­çš„å­—æ®µçš„ä¸ªæ•°éœ€è¦å’ŒçœŸæ­£çš„åˆ—æ•°ç›¸ç­‰ï¼Œå‡è®¾æƒ³è¦è·¨åˆ—ï¼Œå¤šä½™çš„ç©ºé—´éœ€è¦å®šä¹‰æˆç©ºä¸²</p>
<p>å®ƒä¸»è¦å¯¹åº”çš„æ˜¯æ ‡å‡†çš„è¡¨å¤´</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> header = [<span class="string">'å§“å'</span>, <span class="string">'æ‰‹æœºå·'</span>, <span class="string">'å…¥èŒæ—¥æœŸ'</span>, <span class="string">'è˜ç”¨å½¢å¼'</span>, <span class="string">'è½¬æ­£æ—¥æœŸ'</span>, <span class="string">'å·¥å·'</span>, <span class="string">'éƒ¨é—¨'</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœï¼Œæˆ‘ä»¬è¦å®ç°å…¶åˆå¹¶çš„æ•ˆæœï¼Œ éœ€è¦è®¾å®šmergesé€‰é¡¹</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merges = [<span class="string">'A1:A2'</span>, <span class="string">'B1:F1'</span>, <span class="string">'G1:G2'</span>]</span><br></pre></td></tr></tbody></table></figure>

<p>mergesçš„é¡ºåºæ˜¯æ²¡å…³ç³»çš„ï¼Œåªè¦é…ç½®è¿™ä¸¤ä¸ªå±æ€§ï¼Œå°±å¯ä»¥å¯¼å‡ºå¤æ‚è¡¨å¤´çš„exceläº†</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">exportData</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> headers = {</span><br><span class="line">      <span class="string">'å§“å'</span>: <span class="string">'username'</span>,</span><br><span class="line">      <span class="string">'æ‰‹æœºå·'</span>: <span class="string">'mobile'</span>,</span><br><span class="line">      <span class="string">'å…¥èŒæ—¥æœŸ'</span>: <span class="string">'timeOfEntry'</span>,</span><br><span class="line">      <span class="string">'è˜ç”¨å½¢å¼'</span>: <span class="string">'formOfEmployment'</span>,</span><br><span class="line">      <span class="string">'è½¬æ­£æ—¥æœŸ'</span>: <span class="string">'correctionTime'</span>,</span><br><span class="line">      <span class="string">'å·¥å·'</span>: <span class="string">'workNumber'</span>,</span><br><span class="line">      <span class="string">'éƒ¨é—¨'</span>: <span class="string">'departmentName'</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// å¯¼å‡ºexcel</span></span><br><span class="line">    <span class="keyword">import</span>(<span class="string">'@/vendor/Export2Excel'</span>).then(<span class="keyword">async</span> excel =&gt; {</span><br><span class="line">      <span class="comment">//  excelæ˜¯å¼•å…¥æ–‡ä»¶çš„å¯¼å‡ºå¯¹è±¡</span></span><br><span class="line">      <span class="comment">// å¯¼å‡º  headerä»å“ªé‡Œæ¥</span></span><br><span class="line">      <span class="comment">// dataä»å“ªé‡Œæ¥</span></span><br><span class="line">      <span class="comment">// ç°åœ¨æ²¡æœ‰ä¸€ä¸ªæ¥å£è·å–æ‰€æœ‰çš„æ•°æ®</span></span><br><span class="line">      <span class="comment">// è·å–å‘˜å·¥çš„æ¥å£ é¡µç  æ¯é¡µæ¡æ•°    100   1 10000</span></span><br><span class="line">      <span class="keyword">const</span> { rows } = <span class="keyword">await</span> getEmployeeList({ <span class="attr">page</span>: <span class="number">1</span>, <span class="attr">size</span>: <span class="built_in">this</span>.page.total })</span><br><span class="line">      <span class="keyword">const</span> data = <span class="built_in">this</span>.formatJson(headers, rows) <span class="comment">// è¿”å›çš„dataå°±æ˜¯ è¦å¯¼å‡ºçš„ç»“æ„</span></span><br><span class="line">      <span class="keyword">const</span> multiHeader = [[<span class="string">'å§“å'</span>, <span class="string">'ä¸»è¦ä¿¡æ¯'</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">''</span>, <span class="string">'éƒ¨é—¨'</span>]]</span><br><span class="line">      <span class="keyword">const</span> merges = [<span class="string">'A1:A2'</span>, <span class="string">'B1:F1'</span>, <span class="string">'G1:G2'</span>]</span><br><span class="line">      excel.export_json_to_excel({</span><br><span class="line">        <span class="attr">header</span>: <span class="built_in">Object</span>.keys(headers),</span><br><span class="line">        data,</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">'å‘˜å·¥èµ„æ–™è¡¨'</span>,</span><br><span class="line">        multiHeader, <span class="comment">// å¤æ‚è¡¨å¤´</span></span><br><span class="line">        merges <span class="comment">// åˆå¹¶é€‰é¡¹</span></span><br><span class="line">      })</span><br><span class="line"></span><br><span class="line">      <span class="comment">// excel.export_json_to_excel({</span></span><br><span class="line">      <span class="comment">//   header: ['å§“å', 'å·¥èµ„'],</span></span><br><span class="line">      <span class="comment">//   data: [['å¼ ä¸‰', 3000], ['æå››', 5000]],</span></span><br><span class="line">      <span class="comment">//   filename: 'å‘˜å·¥å·¥èµ„è¡¨'</span></span><br><span class="line">      <span class="comment">// })</span></span><br><span class="line">      <span class="comment">// [{ username: 'å¼ ä¸‰',mobile: 13112345678 }]  =&gt; [[]]</span></span><br><span class="line">      <span class="comment">// è¦è½¬åŒ– æ•°æ®ç»“æ„ è¿˜è¦å’Œè¡¨å¤´çš„é¡ºåºå¯¹åº”ä¸Š</span></span><br><span class="line">      <span class="comment">// è¦æ±‚è½¬å‡ºçš„æ ‡é¢˜æ˜¯ä¸­æ–‡</span></span><br><span class="line">    })</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// å°†è¡¨å¤´æ•°æ®å’Œæ•°æ®è¿›è¡Œå¯¹åº”</span></span><br><span class="line">  <span class="comment">// [{}]  =&gt;   [[]]</span></span><br><span class="line">  <span class="function"><span class="title">formatJson</span>(<span class="params">headers, rows</span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> rows.map(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">      <span class="comment">// itemæ˜¯ä¸€ä¸ªå¯¹è±¡  { mobile: 132111,username: 'å¼ ä¸‰'  }</span></span><br><span class="line">      <span class="comment">// ["æ‰‹æœºå·", "å§“å", "å…¥èŒæ—¥æœŸ" ã€‚ã€‚]</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Object</span>.keys(headers).map(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">        <span class="comment">// éœ€è¦åˆ¤æ–­ å­—æ®µ</span></span><br><span class="line">        <span class="keyword">if</span> (headers[key] === <span class="string">'timeOfEntry'</span> || headers[key] === <span class="string">'correctionTime'</span>) {</span><br><span class="line">          <span class="comment">// æ ¼å¼åŒ–æ—¥æœŸ</span></span><br><span class="line">          <span class="keyword">return</span> formatDate(item[headers[key]])</span><br><span class="line">        } <span class="keyword">else</span> <span class="keyword">if</span> (headers[key] === <span class="string">'formOfEmployment'</span>) {</span><br><span class="line">          <span class="keyword">const</span> obj = EmployeeEnum.hireType.find(<span class="function"><span class="params">obj</span> =&gt;</span> obj.id === item[headers[key]])</span><br><span class="line">          <span class="keyword">return</span> obj ? obj.value : <span class="string">'æœªçŸ¥'</span></span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> item[headers[key]]</span><br><span class="line">      })</span><br><span class="line">      <span class="comment">// ["132", 'å¼ ä¸‰â€™ï¼Œ â€˜â€™ï¼Œâ€˜â€™ï¼Œâ€˜â€™d]</span></span><br><span class="line">    })</span><br><span class="line">    <span class="comment">// return rows.map(item =&gt; Object.keys(headers).map(key =&gt; item[headers[key]]))</span></span><br><span class="line">    <span class="comment">// éœ€è¦å¤„ç†æ—¶é—´æ ¼å¼é—®é¢˜</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**å®ç°å°†å‘˜å·¥æ•°æ®å¯¼å‡ºåŠŸèƒ½</p>
<h2 id="å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€"><a href="#å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€" class="headerlink" title="å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€"></a>å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€</h2><p>**<code>ç›®æ ‡</code>**ï¼šåˆ›å»ºå‘˜å·¥è¯¦æƒ…çš„ä¸»è¦å¸ƒå±€é¡µé¢å’ŒåŸºæœ¬å¸ƒå±€</p>
<h3 id="è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±"><a href="#è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±" class="headerlink" title="è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±"></a>è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±</h3><p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200726130305221.png" alt="image-20200726130305221"></p>
<p><strong>å»ºç«‹è¯¦æƒ…é¡µè·¯ç”±</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'detail/:id'</span>, <span class="comment">// queryä¼ å‚ åŠ¨æ€è·¯ç”±ä¼ å‚</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/employees/detail'</span>),</span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span>, <span class="comment">// ä¸åœ¨å·¦ä¾§èœå•æ˜¾ç¤º</span></span><br><span class="line">    <span class="attr">meta</span>: {</span><br><span class="line">      <span class="attr">title</span>: <span class="string">'å‘˜å·¥è¯¦æƒ…'</span> <span class="comment">// æ ‡è®°å½“å‰è·¯ç”±è§„åˆ™çš„ä¸­æ–‡åç§° åç»­åœ¨åšå·¦ä¾§èœå•æ—¶ ä½¿ç”¨</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å»ºç«‹åŸºæœ¬æ¶æ„</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;el-card&gt;</span><br><span class="line">        &lt;el-tabs&gt;</span><br><span class="line">          &lt;el-tab-pane label="ç™»å½•è´¦æˆ·è®¾ç½®"&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- æ”¾ç½®è¡¨å• --&gt;</span><br><span class="line">            &lt;el-form label-width="120px" style="margin-left: 120px; margin-top:30px"&gt;</span><br><span class="line">              &lt;el-form-item label="å§“å:"&gt;</span><br><span class="line">                &lt;el-input style="width:300px" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item label="å¯†ç :"&gt;</span><br><span class="line">                &lt;el-input style="width:300px" type="password" /&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">              &lt;el-form-item&gt;</span><br><span class="line">                &lt;el-button type="primary"&gt;æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">              &lt;/el-form-item&gt;</span><br><span class="line">            &lt;/el-form&gt;</span><br><span class="line">          &lt;/el-tab-pane&gt;</span><br><span class="line">          &lt;el-tab-pane label="ä¸ªäººè¯¦æƒ…" /&gt;</span><br><span class="line">          &lt;el-tab-pane label="å²—ä½ä¿¡æ¯" /&gt;</span><br><span class="line">        &lt;/el-tabs&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åˆ—è¡¨è·³è½¬åˆ°è¯¦æƒ…</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type="text" size="small" @click="$router.push(`/employees/detail/${obj.row.id}`)"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£"><a href="#è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£" class="headerlink" title="è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£"></a>è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£</h3><p><strong>åŠ è½½ä¸ªäººåŸºæœ¬ä¿¡æ¯</strong> &gt; è¯¥æ¥å£å·²ç»åœ¨ä¹‹å‰æä¾›è¿‡äº† <strong><code>src/api/user.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  è·å–æŸä¸ªç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getUserDetailById</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ä¿å­˜ä¸ªäººåŸºæœ¬ä¿¡æ¯</strong>  <strong><code>src/api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ä¿å­˜å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">saveUserDetailById</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/user/<span class="subst">${data.id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹"><a href="#å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹" class="headerlink" title="å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹"></a>å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹</h3><p><strong><code>æ³¨æ„</code><strong>ï¼šè¿™é‡Œæœ‰ä¸ªç¼ºé™·ï¼Œæ¥å£ä¸­è¯»å–çš„æ˜¯åç«¯çš„å¯†æ–‡ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½è§£å¯†ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ²¡æœ‰ä»»ä½•ä¿®æ”¹å°±ä¿å­˜æ—¶ï¼Œä¼šæ ¡éªŒå¤±è´¥ï¼Œå› ä¸ºå¯†æ–‡è¶…è¿‡äº†è§„å®šçš„12ä½é•¿åº¦ï¼Œä¸ºäº†çœŸçš„ä¿®æ”¹å¯†ç ï¼Œæˆ‘ä»¬è®¾å®šäº†ä¸€ä¸ªä¸´æ—¶çš„å­—æ®µ <strong>password2</strong>ï¼Œç”¨å®ƒæ¥å­˜å‚¨æˆ‘ä»¬çš„ä¿®æ”¹å€¼ï¼Œæœ€åä¿å­˜çš„æ—¶å€™ï¼ŒæŠŠ</strong>password2</strong>ä¼ ç»™<strong>password</strong></p>
<p><strong>ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹</strong>  <strong><code>src/views/employees/detail.vue</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"><span class="keyword">import</span> { saveUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">userId</span>: <span class="built_in">this</span>.$route.params.id, <span class="comment">// è¿™æ ·å¯ä»¥åé¢ç›´æ¥é€šè¿‡ this.userIdè¿›è¡Œè·å–æ•°æ®</span></span><br><span class="line">      <span class="attr">userInfo</span>: {</span><br><span class="line">        <span class="comment">//   ä¸“é—¨å­˜æ”¾åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">        <span class="attr">username</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">password2</span>: <span class="string">''</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">rules</span>: {</span><br><span class="line">        <span class="attr">username</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å§“åä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }],</span><br><span class="line">        <span class="attr">password2</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'å¯†ç ä¸èƒ½ä¸ºç©º'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> },</span><br><span class="line">          { <span class="attr">min</span>: <span class="number">6</span>, <span class="attr">max</span>: <span class="number">9</span>, <span class="attr">message</span>: <span class="string">'å¯†ç é•¿åº¦6-9ä½'</span>, <span class="attr">trigger</span>: <span class="string">'blur'</span> }]</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getUserDetailById()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getUserDetailById</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.userInfo = <span class="keyword">await</span> getUserDetailById(<span class="built_in">this</span>.userId)</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">saveUser</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// æ ¡éªŒ</span></span><br><span class="line">        <span class="keyword">await</span> <span class="built_in">this</span>.$refs.userForm.validate()</span><br><span class="line">        <span class="keyword">await</span> saveUserDetailById({ ...this.userInfo, <span class="attr">password</span>: <span class="built_in">this</span>.userInfo.password2 }) <span class="comment">// å°†æ–°å¯†ç çš„å€¼æ›¿æ¢åŸå¯†ç çš„å€¼</span></span><br><span class="line">        <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span><br><span class="line">      } <span class="keyword">catch</span> (error) {</span><br><span class="line">        <span class="built_in">console</span>.log(error)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šè¡¨å•æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®è¡¨å• --&gt;</span><br><span class="line">           &lt;el-form ref="userForm" :model="userInfo" :rules="rules" label-width="120px" style="margin-left: 120px; margin-top:30px"&gt;</span><br><span class="line">             &lt;el-form-item label="å§“å:" prop="username"&gt;</span><br><span class="line">               &lt;el-input v-model="userInfo.username" style="width:300px" /&gt;</span><br><span class="line">             &lt;/el-form-item&gt;</span><br><span class="line">             &lt;el-form-item label="æ–°å¯†ç :" prop="password2"&gt;</span><br><span class="line">               &lt;el-input v-model="userInfo.password2" style="width:300px" type="password" /&gt;</span><br><span class="line">             &lt;/el-form-item&gt;</span><br><span class="line">             &lt;el-form-item&gt;</span><br><span class="line">               &lt;el-button type="primary" @click="saveUser"&gt;æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">             &lt;/el-form-item&gt;</span><br><span class="line">           &lt;/el-form&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…"><a href="#ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…" class="headerlink" title="ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…"></a>ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…</h2><h3 id="å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶"><a href="#å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶" class="headerlink" title="å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶"></a>å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶</h3><blockquote>
<p>æˆ‘ä»¬å°†å‘˜å·¥ä¸ªäººä¿¡æ¯åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼Œè´¦æˆ·ï¼Œä¸ªäººï¼Œ å²—ä½ï¼Œè¿™ä¸ªå°èŠ‚æˆ‘ä»¬å¯¹ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶è¿›è¡Œå°è£…</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901105323305.png" alt="image-20200901105323305"></p>
<p><strong>å°è£…ä¸ªäººç»„ä»¶</strong>   <strong><code>src/views/employees/components/user-info.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="user-info"&gt;</span><br><span class="line">    &lt;!-- ä¸ªäººä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;el-form label-width="220px"&gt;</span><br><span class="line">      &lt;!-- å·¥å· å…¥èŒæ—¶é—´ --&gt;</span><br><span class="line">      &lt;el-row class="inline-info"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="å·¥å·"&gt;</span><br><span class="line">            &lt;el-input v-model="userInfo.workNumber" class="inputW" /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="å…¥èŒæ—¶é—´"&gt;</span><br><span class="line">            &lt;el-date-picker</span><br><span class="line">              v-model="userInfo.timeOfEntry"</span><br><span class="line">              type="date"</span><br><span class="line">              class="inputW"</span><br><span class="line">              value-format="YYYY-MM-DD"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!-- å§“å éƒ¨é—¨ --&gt;</span><br><span class="line">      &lt;el-row class="inline-info"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="å§“å"&gt;</span><br><span class="line">            &lt;el-input v-model="userInfo.username" class="inputW" /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="éƒ¨é—¨"&gt;</span><br><span class="line">            &lt;el-input v-model="userInfo.departmentName" class="inputW" /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!--æ‰‹æœº è˜ç”¨å½¢å¼  --&gt;</span><br><span class="line">      &lt;el-row class="inline-info"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="æ‰‹æœº"&gt;</span><br><span class="line">            &lt;el-input v-model="userInfo.mobile" /&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="è˜ç”¨å½¢å¼"&gt;</span><br><span class="line">            &lt;el-select v-model="userInfo.formOfEmployment" class="inputW"&gt;</span><br><span class="line">              &lt;el-option</span><br><span class="line">                v-for="item in EmployeeEnum.hireType"</span><br><span class="line">                :key="item.id"</span><br><span class="line">                :label="item.value"</span><br><span class="line">                :value="item.id"</span><br><span class="line">              /&gt;</span><br><span class="line">            &lt;/el-select&gt;</span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!-- å‘˜å·¥ç…§ç‰‡ --&gt;</span><br><span class="line">      &lt;el-row class="inline-info"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-form-item label="å‘˜å·¥å¤´åƒ"&gt;</span><br><span class="line">            &lt;!-- æ”¾ç½®ä¸Šä¼ å›¾ç‰‡ --&gt;</span><br><span class="line">           </span><br><span class="line">          &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">      &lt;!-- ä¿å­˜ä¸ªäººä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;el-row class="inline-info" type="flex" justify="center"&gt;</span><br><span class="line">        &lt;el-col :span="12"&gt;</span><br><span class="line">          &lt;el-button type="primary" @click="saveUser"&gt;ä¿å­˜æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button @click="$router.back()"&gt;è¿”å›&lt;/el-button&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;!-- åŸºç¡€ä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;el-form label-width="220px"&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;åŸºç¡€ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="æœ€é«˜å­¦å†"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.theHighestDegreeOfEducation" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.highestDegree"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- ä¸ªäººå¤´åƒ --&gt;</span><br><span class="line">        &lt;!-- å‘˜å·¥ç…§ç‰‡ --&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form-item label="å‘˜å·¥ç…§ç‰‡"&gt;</span><br><span class="line">          &lt;!-- æ”¾ç½®ä¸Šä¼ å›¾ç‰‡ --&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å›½å®¶/åœ°åŒº"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.nationalArea" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.isOverseas"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æŠ¤ç…§å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.passportNo" placeholder="æ­£è§„æŠ¤ç…§æ ¼å¼" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="èº«ä»½è¯å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.idNumber" placeholder="æ­£è§„èº«ä»½è¯æ ¼å¼" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç±è´¯"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.nativePlace" placeholder="ç±è´¯åœ°å€" class="inputW5" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ°‘æ—"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.nation" placeholder="è¯·è¾“å…¥æ°‘æ—" class="inputW2" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å©šå§»çŠ¶å†µ"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.maritalStatus" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.maritaStatus"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç”Ÿæ—¥"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.birthday" placeholder="ç¤ºä¾‹ 0323" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å¹´é¾„"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.age" type="number" class="inputW2" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ˜Ÿåº§"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.constellation" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.constellation"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="è¡€å‹"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.bloodType" class="inputW2"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.bloodType"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æˆ·ç±æ‰€åœ¨åœ°"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.domicile" class="inputW5" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ”¿æ²»é¢è²Œ"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.politicalOutlook" class="inputW2" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å…¥å…šæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.timeToJoinTheParty"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            class="inputW"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å­˜æ¡£æœºæ„"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.archivingOrganization" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å­å¥³çŠ¶æ€"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.stateOfChildren" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å­å¥³æœ‰æ— å•†ä¸šé™©"&gt;</span><br><span class="line">          &lt;el-radio-group v-model="formData.doChildrenHaveCommercialInsurance"&gt;</span><br><span class="line">            &lt;el-radio label="1"&gt;æœ‰&lt;/el-radio&gt;</span><br><span class="line">            &lt;el-radio label="2"&gt;æ— &lt;/el-radio&gt;</span><br><span class="line">          &lt;/el-radio-group&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æœ‰æ— è¿æ³•è¿çºªçŠ¶æ€"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.isThereAnyViolationOfLawOrDiscipline" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æœ‰æ— é‡å¤§ç—…å²"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.areThereAnyMajorMedicalHistories" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- é€šè®¯ä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;é€šè®¯ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="QQ"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.qq" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å¾®ä¿¡"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.wechat" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç°å±…ä½åœ°"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.placeOfResidence" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="é€šè®¯åœ°å€"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.postalAddress" placeholder="è¯·è¾“å…¥" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="è”ç³»æ‰‹æœº"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.contactTheMobilePhone" placeholder="11ä½å­—ç¬¦" maxlength="11" class="inputW" @change.native="handlePhone(2)" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ä¸ªäººé‚®ç®±"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.personalMailbox" placeholder="è¯·è¾“å…¥" type="mail" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç´§æ€¥è”ç³»äºº"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.emergencyContact" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç´§æ€¥è”ç³»ç”µè¯"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.emergencyContactNumber" placeholder="11ä½å­—ç¬¦" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- è´¦å·ä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;è´¦å·ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="ç¤¾ä¿ç”µè„‘å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.socialSecurityComputerNumber" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å…¬ç§¯é‡‘è´¦å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.providentFundAccount" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="é“¶è¡Œå¡å·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.bankCardNumber" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å¼€æˆ·è¡Œ"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.openingBank" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- æ•™è‚²ä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;æ•™è‚²ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="å­¦å†ç±»å‹"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.educationalType" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.educationType"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ¯•ä¸šå­¦æ ¡"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.graduateSchool" placeholder="è¯·è¾“å…¥" class="inputW2" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å…¥å­¦æ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker v-model="formData.enrolmentTime" type="data" placeholder="è¯·è¾“å…¥æ—¶é—´" class="inputW" value-format="yyyy-MM-dd" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ¯•ä¸šæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker v-model="formData.graduationTime" type="data" placeholder="è¯·è¾“å…¥æ—¶é—´" class="inputW" value-format="yyyy-MM-dd" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ä¸“ä¸š"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.major" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- ä»ä¸šä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;ä»ä¸šä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="ä¸Šå®¶å…¬å¸"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.homeCompany" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="èŒç§°"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.title" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æœ‰æ— ç«ä¸šé™åˆ¶"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.isThereAnyCompetitionRestriction" placeholder="è¯·è¾“å…¥" style="width:80%" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="å¤‡æ³¨"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.remarks" type="textarea" placeholder="è¯·è¾“å…¥å¤‡æ³¨" style="width:80%" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- ä¿å­˜å‘˜å·¥ä¿¡æ¯ --&gt;</span><br><span class="line">        &lt;el-row class="inline-info" type="flex" justify="center"&gt;</span><br><span class="line">          &lt;el-col :span="12"&gt;</span><br><span class="line">            &lt;el-button type="primary" @click="savePersonal"&gt;ä¿å­˜æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button @click="$router.back()"&gt;è¿”å›&lt;/el-button&gt;</span><br><span class="line">          &lt;/el-col&gt;</span><br><span class="line">        &lt;/el-row&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æœ¬ç« èŠ‚ä¸ªäººæ•°æ®è¿‡äº**<code>ç¹æ‚ï¼Œåºå¤§</code>**ï¼ŒåŒå­¦ä»¬åœ¨å¼€å‘æœŸé—´ï¼Œæ‹·è´ä»£ç å³å¯ï¼Œæˆ‘ä»¬åªå†™å…³é”®éƒ¨ä½çš„ä»£ç </p>
</blockquote>
<p><strong>å®šä¹‰user-infoçš„æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> EmployeeEnum <span class="keyword">from</span> <span class="string">'@/api/constant/employees'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">userId</span>: <span class="built_in">this</span>.$route.params.id,</span><br><span class="line">      EmployeeEnum, <span class="comment">// å‘˜å·¥æšä¸¾æ•°æ®</span></span><br><span class="line">      <span class="attr">userInfo</span>: {},</span><br><span class="line">      <span class="attr">formData</span>: {</span><br><span class="line">        <span class="attr">userId</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">username</span>: <span class="string">''</span>, <span class="comment">// ç”¨æˆ·å</span></span><br><span class="line">        <span class="attr">sex</span>: <span class="string">''</span>, <span class="comment">// æ€§åˆ«</span></span><br><span class="line">        <span class="attr">mobile</span>: <span class="string">''</span>, <span class="comment">// æ‰‹æœº</span></span><br><span class="line">        <span class="attr">companyId</span>: <span class="string">''</span>, <span class="comment">// å…¬å¸id</span></span><br><span class="line">        <span class="attr">departmentName</span>: <span class="string">''</span>, <span class="comment">// éƒ¨é—¨åç§°</span></span><br><span class="line">        <span class="comment">//  onTheJobStatus: '', // åœ¨èŒçŠ¶æ€ no</span></span><br><span class="line">        <span class="attr">dateOfBirth</span>: <span class="string">''</span>, <span class="comment">// å‡ºç”Ÿæ—¥æœŸ</span></span><br><span class="line">        <span class="attr">timeOfEntry</span>: <span class="string">''</span>, <span class="comment">// å…¥èŒæ—¶é—´</span></span><br><span class="line">        <span class="attr">theHighestDegreeOfEducation</span>: <span class="string">''</span>, <span class="comment">// æœ€é«˜å­¦å†</span></span><br><span class="line">        <span class="attr">nationalArea</span>: <span class="string">''</span>, <span class="comment">// å›½å®¶</span></span><br><span class="line">        <span class="attr">passportNo</span>: <span class="string">''</span>, <span class="comment">// æŠ¤ç…§å·</span></span><br><span class="line">        <span class="attr">idNumber</span>: <span class="string">''</span>, <span class="comment">// èº«ä»½è¯å·</span></span><br><span class="line">        <span class="attr">idCardPhotoPositive</span>: <span class="string">''</span>, <span class="comment">// èº«ä»½è¯ç…§æ­£</span></span><br><span class="line">        <span class="attr">idCardPhotoBack</span>: <span class="string">''</span>, <span class="comment">// èº«ä»½è¯ç…§æ­£</span></span><br><span class="line">        <span class="attr">nativePlace</span>: <span class="string">''</span>, <span class="comment">// ç±è´¯</span></span><br><span class="line">        <span class="attr">nation</span>: <span class="string">''</span>, <span class="comment">// æ°‘æ—</span></span><br><span class="line">        <span class="attr">englishName</span>: <span class="string">''</span>, <span class="comment">// è‹±æ–‡åå­—</span></span><br><span class="line">        <span class="attr">maritalStatus</span>: <span class="string">''</span>, <span class="comment">// å©šå§»çŠ¶å†µ</span></span><br><span class="line">        <span class="attr">staffPhoto</span>: <span class="string">''</span>, <span class="comment">// å‘˜å·¥ç…§ç‰‡</span></span><br><span class="line">        <span class="attr">birthday</span>: <span class="string">''</span>, <span class="comment">// ç”Ÿæ—¥</span></span><br><span class="line">        <span class="attr">zodiac</span>: <span class="string">''</span>, <span class="comment">// å±ç›¸</span></span><br><span class="line">        <span class="attr">age</span>: <span class="string">''</span>, <span class="comment">// å¹´é¾„</span></span><br><span class="line">        <span class="attr">constellation</span>: <span class="string">''</span>, <span class="comment">// æ˜Ÿåº§</span></span><br><span class="line">        <span class="attr">bloodType</span>: <span class="string">''</span>, <span class="comment">// è¡€å‹</span></span><br><span class="line">        <span class="attr">domicile</span>: <span class="string">''</span>, <span class="comment">// æˆ·ç±æ‰€åœ¨åœ°</span></span><br><span class="line">        <span class="attr">politicalOutlook</span>: <span class="string">''</span>, <span class="comment">// æ”¿æ²»é¢è²Œ</span></span><br><span class="line">        <span class="attr">timeToJoinTheParty</span>: <span class="string">''</span>, <span class="comment">// å…¥å…šæ—¶é—´</span></span><br><span class="line">        <span class="attr">archivingOrganization</span>: <span class="string">''</span>, <span class="comment">// å­˜æ¡£æœºæ„</span></span><br><span class="line">        <span class="attr">stateOfChildren</span>: <span class="string">''</span>, <span class="comment">// å­å¥³çŠ¶æ€</span></span><br><span class="line">        <span class="attr">doChildrenHaveCommercialInsurance</span>: <span class="string">'1'</span>, <span class="comment">// ä¿é™©çŠ¶æ€</span></span><br><span class="line">        <span class="attr">isThereAnyViolationOfLawOrDiscipline</span>: <span class="string">''</span>, <span class="comment">// è¿æ³•è¿çºªçŠ¶æ€</span></span><br><span class="line">        <span class="attr">areThereAnyMajorMedicalHistories</span>: <span class="string">''</span>, <span class="comment">// é‡å¤§ç—…å²</span></span><br><span class="line">        <span class="attr">qq</span>: <span class="string">''</span>, <span class="comment">// QQ</span></span><br><span class="line">        <span class="attr">wechat</span>: <span class="string">''</span>, <span class="comment">// å¾®ä¿¡</span></span><br><span class="line">        <span class="attr">residenceCardCity</span>: <span class="string">''</span>, <span class="comment">// å±…ä½è¯åŸå¸‚</span></span><br><span class="line">        <span class="attr">dateOfResidencePermit</span>: <span class="string">''</span>, <span class="comment">// å±…ä½è¯åŠç†æ—¥æœŸ</span></span><br><span class="line">        <span class="attr">residencePermitDeadline</span>: <span class="string">''</span>, <span class="comment">// å±…ä½è¯æˆªæ­¢æ—¥æœŸ</span></span><br><span class="line">        <span class="attr">placeOfResidence</span>: <span class="string">''</span>, <span class="comment">// ç°å±…ä½åœ°</span></span><br><span class="line">        <span class="attr">postalAddress</span>: <span class="string">''</span>, <span class="comment">// é€šè®¯åœ°å€</span></span><br><span class="line">        <span class="attr">contactTheMobilePhone</span>: <span class="string">''</span>, <span class="comment">// è”ç³»æ‰‹æœº</span></span><br><span class="line">        <span class="attr">personalMailbox</span>: <span class="string">''</span>, <span class="comment">// ä¸ªäººé‚®ç®±</span></span><br><span class="line">        <span class="attr">emergencyContact</span>: <span class="string">''</span>, <span class="comment">// ç´§æ€¥è”ç³»äºº</span></span><br><span class="line">        <span class="attr">emergencyContactNumber</span>: <span class="string">''</span>, <span class="comment">// ç´§æ€¥è”ç³»ç”µè¯</span></span><br><span class="line">        <span class="attr">socialSecurityComputerNumber</span>: <span class="string">''</span>, <span class="comment">// ç¤¾ä¿ç”µè„‘å·</span></span><br><span class="line">        <span class="attr">providentFundAccount</span>: <span class="string">''</span>, <span class="comment">// å…¬ç§¯é‡‘è´¦å·</span></span><br><span class="line">        <span class="attr">bankCardNumber</span>: <span class="string">''</span>, <span class="comment">// é“¶è¡Œå¡å·</span></span><br><span class="line">        <span class="attr">openingBank</span>: <span class="string">''</span>, <span class="comment">// å¼€æˆ·è¡Œ</span></span><br><span class="line">        <span class="attr">educationalType</span>: <span class="string">''</span>, <span class="comment">// å­¦å†ç±»å‹</span></span><br><span class="line">        <span class="attr">graduateSchool</span>: <span class="string">''</span>, <span class="comment">// æ¯•ä¸šå­¦æ ¡</span></span><br><span class="line">        <span class="attr">enrolmentTime</span>: <span class="string">''</span>, <span class="comment">// å…¥å­¦æ—¶é—´</span></span><br><span class="line">        <span class="attr">graduationTime</span>: <span class="string">''</span>, <span class="comment">// æ¯•ä¸šæ—¶é—´</span></span><br><span class="line">        <span class="attr">major</span>: <span class="string">''</span>, <span class="comment">// ä¸“ä¸š</span></span><br><span class="line">        <span class="attr">graduationCertificate</span>: <span class="string">''</span>, <span class="comment">// æ¯•ä¸šè¯ä¹¦</span></span><br><span class="line">        <span class="attr">certificateOfAcademicDegree</span>: <span class="string">''</span>, <span class="comment">// å­¦ä½è¯ä¹¦</span></span><br><span class="line">        <span class="attr">homeCompany</span>: <span class="string">''</span>, <span class="comment">// ä¸Šå®¶å…¬å¸</span></span><br><span class="line">        <span class="attr">title</span>: <span class="string">''</span>, <span class="comment">// èŒç§°</span></span><br><span class="line">        <span class="attr">resume</span>: <span class="string">''</span>, <span class="comment">// ç®€å†</span></span><br><span class="line">        <span class="attr">isThereAnyCompetitionRestriction</span>: <span class="string">''</span>, <span class="comment">// æœ‰æ— ç«ä¸šé™åˆ¶</span></span><br><span class="line">        <span class="attr">proofOfDepartureOfFormerCompany</span>: <span class="string">''</span>, <span class="comment">// å‰å…¬å¸ç¦»èŒè¯æ˜</span></span><br><span class="line">        <span class="attr">remarks</span>: <span class="string">''</span> <span class="comment">// å¤‡æ³¨</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨detail.vueç»„ä»¶ä¸­ï¼Œæ³¨å†Œå¹¶ä½¿ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-tab-pane label="ä¸ªäººè¯¦æƒ…"&gt;</span><br><span class="line">           &lt;!-- æ”¾ç½®ä¸ªäººè¯¦æƒ… --&gt;</span><br><span class="line">           &lt;component :is="userComponent" /&gt;</span><br><span class="line">           &lt;!-- &lt;user-info /&gt; --&gt;</span><br><span class="line"> &lt;/el-tab-pane&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†åŠ¨æ€ç»„ä»¶<strong>component</strong>ï¼Œå®ƒé€šè¿‡ **<code>is</code><strong>å±æ€§æ¥ç»‘å®šéœ€è¦æ˜¾ç¤ºåœ¨è¯¥ä½ç½®çš„ç»„ä»¶ï¼Œiså±æ€§å¯ä»¥ç›´æ¥ä¸º</strong><code>æ³¨å†Œç»„ä»¶</code>**çš„ç»„ä»¶åç§°å³å¯</p>
<h3 id="å°è£…å²—ä½ç»„ä»¶"><a href="#å°è£…å²—ä½ç»„ä»¶" class="headerlink" title="å°è£…å²—ä½ç»„ä»¶"></a>å°è£…å²—ä½ç»„ä»¶</h3><p>åŒç†ï¼Œå°è£…å²—ä½ç»„ä»¶</p>
<p><strong>å°è£…å²—ä½ç»„ä»¶</strong>  <strong><code>src/views/employee/components/job-info.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class="job-info"&gt;</span><br><span class="line">    &lt;!-- åŸºç¡€ä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;el-form label-width="220px"&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;åŸºç¡€ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="å²—ä½"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.post" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;!-- &lt;el-form-item label="è½¬æ­£æ—¥æœŸ"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.dateOfCorrection"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt; --&gt;</span><br><span class="line">        &lt;el-form-item label="è½¬æ­£çŠ¶æ€"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.stateOfCorrection" placeholder="è¯·é€‰æ‹©" disabled&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.stateOfCorrection"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="èŒçº§"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.rank" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="è½¬æ­£è¯„ä»·"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.correctionEvaluation" type="textarea" placeholder="1-300ä½å­—ç¬¦" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ±‡æŠ¥å¯¹è±¡"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.reportId" filterable placeholder="è¯·é€‰æ‹©" class="inputW"&gt;</span><br><span class="line">            &lt;el-option v-for="item in depts" :key="item.id" :label="item.username" :value="item.id" /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="HRBP"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.hrbp" filterable placeholder="è¯·é€‰æ‹©" class="inputW"&gt;</span><br><span class="line">            &lt;el-option v-for="item in depts" :key="item.id" :label="item.username" :value="item.id" class="inputW" /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item class="formInfo" label="è°ƒæ•´å¸é¾„(å¤©)ï¼š"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.adjustmentAgedays" type="number" placeholder="è¯·è¾“å…¥" class="inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="é¦–æ¬¡å‚åŠ å·¥ä½œæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.workingTimeForTheFirstTime"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="è°ƒæ•´å·¥é¾„"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.adjustmentOfLengthOfService" placeholder="0.00å¹´" class="inputW" disabled /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- åˆåŒä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;åˆåŒä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item class="formInfo" label="é¦–æ¬¡åˆåŒå¼€å§‹æ—¶é—´ï¼š"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.initialContractStartTime"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="é¦–æ¬¡åˆåŒç»“æŸæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.firstContractTerminationTime"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç°åˆåŒå¼€å§‹æ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.currentContractStartTime"</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç°åˆåŒç»“æŸæ—¶é—´"&gt;</span><br><span class="line">          &lt;el-date-picker</span><br><span class="line">            v-model="formData.closingTimeOfCurrentContract  "</span><br><span class="line">            type="date"</span><br><span class="line">            placeholder="é€‰æ‹©æ—¥æœŸ"</span><br><span class="line">            value-format="yyyy-MM-dd"</span><br><span class="line">          /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="åˆåŒæœŸé™"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.contractPeriod" class="filter-item"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.contractPeriod"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç»­ç­¾æ¬¡æ•°"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.renewalNumber" class="filter-item"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.renewalCount"</span><br><span class="line">              :key="item.id"</span><br><span class="line">              :label="item.value"</span><br><span class="line">              :value="item.id"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- æ‹›è˜ä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;div class="block"&gt;</span><br><span class="line">        &lt;div class="title"&gt;æ‹›è˜ä¿¡æ¯&lt;/div&gt;</span><br><span class="line">        &lt;el-form-item label="å…¶ä»–æ‹›è˜æ¸ é“"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.otherRecruitmentChannels" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.resumeSource"</span><br><span class="line">              :key="item.id"</span><br><span class="line">              :label="item.value"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ‹›è˜æ¸ é“"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.recruitmentChannels" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.resumeSource"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="ç¤¾æ‹›/æ ¡æ‹›"&gt;</span><br><span class="line">          &lt;el-select v-model="formData.socialRecruitment" placeholder="è¯·é€‰æ‹©"&gt;</span><br><span class="line">            &lt;el-option</span><br><span class="line">              v-for="item in EmployeeEnum.hireSourceType"</span><br><span class="line">              :key="item.value"</span><br><span class="line">              :label="item.label"</span><br><span class="line">              :value="item.value"</span><br><span class="line">            /&gt;</span><br><span class="line">          &lt;/el-select&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label="æ¨èä¼ä¸š/äºº"&gt;</span><br><span class="line">          &lt;el-input v-model="formData.recommenderBusinessPeople" placeholder="è¯·è¾“å…¥" class="infoPosition inputW" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;!-- ä»ä¸šä¿¡æ¯ --&gt;</span><br><span class="line">      &lt;el-form-item&gt;</span><br><span class="line">        &lt;el-button type="primary" @click="saveJob"&gt;ä¿å­˜æ›´æ–°&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button @click="$router.back()"&gt;è¿”å›&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰å²—ä½æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> EmployeeEnum <span class="keyword">from</span> <span class="string">'@/api/constant/employees'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">userId</span>: <span class="built_in">this</span>.$route.params.id,</span><br><span class="line">      <span class="attr">depts</span>: [],</span><br><span class="line">      EmployeeEnum,</span><br><span class="line">      <span class="attr">formData</span>: {</span><br><span class="line">        <span class="attr">adjustmentAgedays</span>: <span class="string">''</span>, <span class="comment">// è°ƒæ•´å¸é¾„å¤©</span></span><br><span class="line">        <span class="attr">adjustmentOfLengthOfService</span>: <span class="string">''</span>, <span class="comment">// è°ƒæ•´å·¥é¾„å¤©</span></span><br><span class="line">        <span class="attr">closingTimeOfCurrentContract</span>: <span class="string">''</span>, <span class="comment">// ç°åˆåŒç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="attr">companyId</span>: <span class="string">''</span>, <span class="comment">// å…¬å¸ID</span></span><br><span class="line">        <span class="attr">contractDocuments</span>: <span class="string">''</span>, <span class="comment">// åˆåŒæ–‡ä»¶</span></span><br><span class="line">        <span class="attr">contractPeriod</span>: <span class="string">''</span>, <span class="comment">// åˆåŒæœŸé™</span></span><br><span class="line">        <span class="attr">correctionEvaluation</span>: <span class="string">''</span>, <span class="comment">//  è½¬æ­£è¯„ä»·</span></span><br><span class="line">        <span class="attr">currentContractStartTime</span>: <span class="string">''</span>, <span class="comment">// ç°åˆåŒå¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="attr">firstContractTerminationTime</span>: <span class="string">''</span>, <span class="comment">// é¦–æ¬¡åˆåŒç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="attr">hrbp</span>: <span class="string">''</span>, <span class="comment">// HRBP</span></span><br><span class="line">        <span class="attr">initialContractStartTime</span>: <span class="string">''</span>, <span class="comment">// é¦–æ¬¡åˆåŒå¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="attr">otherRecruitmentChannels</span>: <span class="string">''</span>, <span class="comment">// å…¶ä»–æ‹›è˜æ¸ é“</span></span><br><span class="line">        <span class="attr">post</span>: <span class="string">''</span>, <span class="comment">// å²—ä½</span></span><br><span class="line">        <span class="attr">rank</span>: <span class="literal">null</span>, <span class="comment">// èŒçº§</span></span><br><span class="line">        <span class="attr">recommenderBusinessPeople</span>: <span class="string">''</span>, <span class="comment">// æ¨èä¼ä¸šäºº</span></span><br><span class="line">        <span class="attr">recruitmentChannels</span>: <span class="string">''</span>, <span class="comment">// æ‹›è˜æ¸ é“</span></span><br><span class="line">        <span class="attr">renewalNumber</span>: <span class="string">''</span>, <span class="comment">// ç»­ç­¾æ¬¡æ•°</span></span><br><span class="line">        <span class="attr">reportId</span>: <span class="string">''</span>, <span class="comment">// æ±‡æŠ¥å¯¹è±¡</span></span><br><span class="line">        <span class="attr">reportName</span>: <span class="literal">null</span>, <span class="comment">// æ±‡æŠ¥å¯¹è±¡</span></span><br><span class="line">        <span class="attr">socialRecruitment</span>: <span class="string">''</span>, <span class="comment">// ç¤¾æ‹›æ ¡æ‹›</span></span><br><span class="line">        <span class="attr">stateOfCorrection</span>: <span class="string">''</span>, <span class="comment">// è½¬æ­£çŠ¶æ€</span></span><br><span class="line">        <span class="attr">taxableCity</span>: <span class="string">''</span>, <span class="comment">// çº³ç¨åŸå¸‚</span></span><br><span class="line">        <span class="attr">userId</span>: <span class="string">''</span>, <span class="comment">// å‘˜å·¥ID</span></span><br><span class="line">        <span class="attr">workMailbox</span>: <span class="string">''</span>, <span class="comment">// å·¥ä½œé‚®ç®±</span></span><br><span class="line">        <span class="attr">workingCity</span>: <span class="string">''</span>, <span class="comment">// å·¥ä½œåŸå¸‚</span></span><br><span class="line">        <span class="attr">workingTimeForTheFirstTime</span>: <span class="string">''</span> <span class="comment">// é¦–æ¬¡å‚åŠ å·¥ä½œæ—¶é—´</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨detail.vueç»„ä»¶ä¸­ï¼Œæ³¨å†Œå¹¶ä½¿ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-tab-pane label="å²—ä½è¯¦æƒ…"&gt;</span><br><span class="line">           &lt;!-- æ”¾ç½®å²—ä½è¯¦æƒ… --&gt;</span><br><span class="line">           &lt;component :is="JobInfo" /&gt;</span><br><span class="line"> &lt;/el-tab-pane&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼šå®Œæˆä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…</p>
<h2 id="å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜"><a href="#å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜" class="headerlink" title="å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜"></a>å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜</h2><p>**<code>ç›®æ ‡</code>**ï¼šå®ç°ä¸ªäººä¿¡æ¯çš„å²—ä½ä¿¡æ¯çš„è¯»å–å’Œæ ¡éªŒï¼Œä¿å­˜</p>
<h3 id="è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯"><a href="#è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯" class="headerlink" title="è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯"></a>è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯</h3><blockquote>
<p>è¿™ä¸ªç¯èŠ‚é‡Œé¢å¤§éƒ¨åˆ†éƒ½æ˜¯ç¹æ‚çš„å±æ€§å’Œé‡å¤çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥è¯¥ç¯èŠ‚ç›´æ¥å°†è¿‡ç¨‹ä»£ç æ‹·è´åˆ°é¡¹ç›®ä¸­å³å¯</p>
</blockquote>
<p>å°è£… <strong>è¯»å–ä¸ªäººä¿¡æ¯</strong> <strong>ä¿å­˜ä¸ªäººä¿¡æ¯</strong>  <strong>è¯»å–å²—ä½ä¿¡æ¯</strong> <strong>ä¿å­˜å²—ä½ä¿¡æ¯</strong>  </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  è¯»å–ç”¨æˆ·è¯¦æƒ…çš„åŸºç¡€ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getPersonalDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/employees/<span class="subst">${id}</span>/personalInfo`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> *  æ›´æ–°ç”¨æˆ·è¯¦æƒ…çš„åŸºç¡€ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * **/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updatePersonal</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/employees/<span class="subst">${data.userId}</span>/personalInfo`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/** **</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·çš„å²—ä½ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getJobDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/employees/<span class="subst">${id}</span>/jobs`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿å­˜å²—ä½ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * ****/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateJob</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/employees/<span class="subst">${data.userId}</span>/jobs`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯»å–ï¼Œä¿å­˜ä¸ªäººä¿¡æ¯</strong>  <strong><code>user-info</code></strong>  éœ€è¦æ³¨æ„ï¼šè¿™é‡Œçš„ä¿å­˜å®é™…ä¸Šåˆ†æˆäº†ä¸¤ä¸ªæ¥å£ï¼Œè¿™æ˜¯æ¥å£çš„è®¾è®¡ï¼Œæˆ‘ä»¬åªèƒ½éµå®ˆ</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getPersonalDetail, updatePersonal, saveUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line"><span class="keyword">import</span> { getUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"> <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getPersonalDetail()</span><br><span class="line">    <span class="built_in">this</span>.getUserDetailById()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getPersonalDetail</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.formData = <span class="keyword">await</span> getPersonalDetail(<span class="built_in">this</span>.userId) <span class="comment">// è·å–å‘˜å·¥æ•°æ®</span></span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">savePersonal</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">await</span> updatePersonal({ ...this.formData, <span class="attr">id</span>: <span class="built_in">this</span>.userId })</span><br><span class="line">      <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">saveUser</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">//  è°ƒç”¨çˆ¶ç»„ä»¶</span></span><br><span class="line">      <span class="keyword">await</span> saveUserDetailById(<span class="built_in">this</span>.userInfo)</span><br><span class="line">      <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getUserDetailById</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.userInfo = <span class="keyword">await</span> getUserDetailById(<span class="built_in">this</span>.userId)</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯"><a href="#è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯" class="headerlink" title="è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯"></a>è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯</h3><p><strong>è¯»å–ï¼Œä¿å­˜å²—ä½ä¿¡æ¯</strong>  <strong><code>job-info</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getEmployeeSimple, updateJob, getJobDetail } <span class="keyword">from</span> <span class="string">'@/api/employees'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.getJobDetail()</span><br><span class="line">  <span class="built_in">this</span>.getEmployeeSimple()</span><br><span class="line">},</span><br><span class="line"><span class="attr">methods</span>: {</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">getJobDetail</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.formData = <span class="keyword">await</span> getJobDetail(<span class="built_in">this</span>.userId)</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// è·å–å‘˜å·¥åˆ—è¡¨</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">getEmployeeSimple</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.depts = <span class="keyword">await</span> getEmployeeSimple()</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// ä¿å­˜å²—ä½ä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">saveJob</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">await</span> updateJob(<span class="built_in">this</span>.formData)</span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜å²—ä½ä¿¡æ¯æˆåŠŸ'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å®ç°ä¸ªäººä¿¡æ¯çš„å²—ä½ä¿¡æ¯çš„è¯»å–å’Œæ ¡éªŒï¼Œä¿å­˜</p>
<h2 id="é…ç½®è…¾è®¯äº‘Cos"><a href="#é…ç½®è…¾è®¯äº‘Cos" class="headerlink" title="é…ç½®è…¾è®¯äº‘Cos"></a>é…ç½®è…¾è®¯äº‘Cos</h2><p>**<code>ç›®æ ‡</code>**ï¼š é…ç½®ä¸€ä¸ªè…¾è®¯äº‘cos</p>
<blockquote>
<p>ç”±äºä¸Šè¯¾çš„å¼€å‘çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æŠŠæ‰€æœ‰çš„å›¾ç‰‡éƒ½ä¸Šä¼ åˆ°æˆ‘ä»¬è‡ªå·±çš„å®˜æ–¹æœåŠ¡å™¨ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€ä¸ªè…¾è®¯äº‘çš„å›¾ç‰‡æ–¹æ¡ˆ</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805200831035.png" alt="image-20200805200831035"></p>
<blockquote>
<p>ä¸Šè¾¹å›¾çš„æ„æ€å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸ªå¯ä»¥å…è´¹ä¸Šä¼ å›¾ç‰‡çš„æœåŠ¡å™¨ï¼Œå¸®æˆ‘ä»¬**<code>ä»£ç®¡å›¾ç‰‡</code><strong>ï¼Œæˆ‘ä»¬åœ¨è‡ªå·±çš„æ•°æ®åº“é‡Œåªä¿å­˜ä¸€ä¸ªåœ°å€å°±è¡Œï¼Œ è¿™å…¶å®ä¹Ÿæ˜¯å¾ˆå¤šé¡¹ç›®çš„å¤„ç†æ–¹æ¡ˆï¼Œä¼šæœ‰ä¸€ä¸ª</strong><code>å…¬å…±çš„æ–‡ä»¶æœåŠ¡å™¨</code>**</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæ‹¥æœ‰ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://cloud.tencent.com/login?s_url=https://console.cloud.tencent.com/">è…¾è¿…äº‘</a>çš„å¼€å‘è€…è´¦å·(<strong>å°å¿ƒè…¾è®¯äº‘çš„å¹¿å‘Šç”µè¯</strong>)</p>
<blockquote>
<p>è¯·æŒ‰ç…§è…¾è®¯äº‘çš„æ³¨å†Œæ–¹å¼ï¼Œæ³¨å†Œè‡ªå·±çš„è´¦å·</p>
</blockquote>
<p>ç¬¬äºŒæ­¥ï¼Œå®åè®¤è¯</p>
<blockquote>
<p>é€‰æ‹©ä¸ªäººè´¦æˆ·</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201013078.png" alt="image-20200805201013078"></p>
<p><strong>å¡«å†™ä¸ªäººèº«ä»½ä¿¡æ¯</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201230001.png" alt="image-20200805201230001"></p>
<p>ä¸‹ä¸€æ­¥ï¼Œæ‰«æäºŒç»´ç æˆæƒ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201318977.png" alt="image-20200805201318977"></p>
<p><strong>æ‰‹æœºç«¯æˆæƒ</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201422567.png" alt="image-20200805201422567"></p>
<p>ç‚¹å‡»<strong>é¢†å–å…è´¹äº§å“</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201513338.png" alt="image-20200805201513338"></p>
<p><strong>é€‰æ‹©å¯¹è±¡å­˜å‚¨COS</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201559233.png" alt="image-20200805201559233"></p>
<blockquote>
<p>æˆ‘ä»¬å…è´¹æ‹¥æœ‰**<code>6ä¸ªæœˆçš„50Gæµé‡</code>**çš„å¯¹è±¡å­˜å‚¨ç©ºé—´ä½¿ç”¨æƒé™ï¼Œè¶³å¤Ÿæˆ‘ä»¬ä¸Šä¼ ç”¨æˆ·å¤´åƒçš„ä½¿ç”¨äº†</p>
</blockquote>
<p><strong>ç‚¹å‡»0å…ƒè¯•ç”¨ï¼Œå¼€é€šæœåŠ¡</strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805201750662.png" alt="image-20200805201750662"></p>
<p>åˆ°è¿™ä¸€æ­¥ï¼Œè´¦å·çš„éƒ¨åˆ†å°±æ“ä½œå®Œæ¯•ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ¥åˆ›å»ºä¸€ä¸ªå­˜å‚¨å›¾ç‰‡çš„å­˜å‚¨æ¡¶</p>
<p>ç™»å½• <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/cos5">å¯¹è±¡å­˜å‚¨æ§åˆ¶å°</a> ï¼Œ<a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/436/13309">åˆ›å»ºå­˜å‚¨æ¡¶</a>ã€‚è®¾ç½®å­˜å‚¨æ¡¶çš„æƒé™ä¸º <strong><code>å…¬æœ‰è¯»ï¼Œç§æœ‰å†™</code></strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200806135409338.png" alt="image-20200806135409338"></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200916231600661.png" alt="image-20200916231600661"></p>
<p>è®¾ç½®corsè§„åˆ™</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200916231949174.png" alt="image-20200916231949174"></p>
<p>AllowHeader éœ€é…æˆ<code>*</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805211749522.png" alt="image-20200805211749522"></p>
<blockquote>
<p>å› ä¸ºæˆ‘ä»¬æœ¬èº«æ²¡æœ‰åŸŸåï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®æˆ**<code>*</code>**ï¼Œä»…é™äºæµ‹è¯•ï¼Œæ­£å¼ç¯å¢ƒçš„è¯ï¼Œè¿™é‡Œéœ€è¦é…ç½®çœŸå®çš„åŸŸååœ°å€</p>
</blockquote>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„è…¾è®¯äº‘å­˜å‚¨æ¡¶å°±è®¾ç½®å¥½äº†ã€‚</p>
<h2 id="å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ"><a href="#å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ" class="headerlink" title="å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ"></a>å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ</h2><p><strong><code>ç›®æ ‡</code></strong> æ¢³ç†æ•´ä¸ªçš„ä¸Šä¼ è¿‡ç¨‹</p>
<p><strong>åˆå§‹åŒ–coså¯¹è±¡å‚æ•°</strong></p>
<table>
<thead>
<tr>
<th align="left">åç§°</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left">SecretId</td>
<td align="left">å¼€å‘è€…æ‹¥æœ‰çš„é¡¹ç›®èº«ä»½è¯†åˆ« IDï¼Œç”¨ä»¥èº«ä»½è®¤è¯ï¼Œå¯åœ¨ <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/capi">API å¯†é’¥ç®¡ç†</a> é¡µé¢è·å–</td>
</tr>
<tr>
<td align="left">SecretKey</td>
<td align="left">å¼€å‘è€…æ‹¥æœ‰çš„é¡¹ç›®èº«ä»½å¯†é’¥ï¼Œå¯åœ¨ <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/capi">API å¯†é’¥ç®¡ç†</a> é¡µé¢è·å–</td>
</tr>
</tbody></table>
<blockquote>
<p>æ³¨æ„ï¼Œä¸Šè¿°çš„å‚æ•°æˆ‘ä»¬åœ¨æœ¬æ¬¡å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç›´æ¥å°†å‚æ•°æ”¾ç½®åœ¨å‰ç«¯ä»£ç ä¸­å­˜å‚¨ï¼Œä½†æ˜¯è…¾è®¯äº‘æœ¬èº«æ˜¯ä¸å»ºè®®è¿™ä¹ˆåšçš„ï¼Œå› ä¸º**<code>æ•æ„Ÿä¿¡æ¯</code>**æ”¾åœ¨å‰ç«¯å¾ˆå®¹æ˜“è¢«æ•è·ï¼Œç”±äºæˆ‘ä»¬æœ¬æ¬¡æ˜¯æµ‹è¯•ç ”å‘ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å¯ä»¥å¿½ç•¥</p>
<p>æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯ï¼Œé€šè¿‡ç½‘ç«™è°ƒç”¨æ¥å£æ¢å–æ•æ„Ÿä¿¡æ¯</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/436/11459">ç›¸å…³æ–‡æ¡£</a></p>
<p>å®ä¾‹åŒ– ä¸Šä¼ sdk</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cos = <span class="keyword">new</span> COS({</span><br><span class="line">    <span class="attr">SecretId</span>: <span class="string">'COS_SECRETID'</span>, <span class="comment">// èº«ä»½è¯†åˆ« ID</span></span><br><span class="line">    <span class="attr">SecretKey</span>: <span class="string">'COS_SECRETKEY'</span>, <span class="comment">// èº«ä»½å¯†é’¥</span></span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸Šä¼ å›¾ç‰‡å‡†å¤‡çš„å†…å®¹å°±å·²ç»OKï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨**<code>src/componets</code>** æ–°å»ºä¸€ä¸ª**<code>ImageUpload</code>** ç»„ä»¶</p>
</blockquote>
<p>è¯¥ç»„ä»¶éœ€è¦æ»¡è¶³ä»€ä¹ˆè¦æ±‚å‘¢ï¼Ÿ</p>
<ol>
<li>å¯ä»¥æ˜¾ç¤ºä¼ å…¥çš„å›¾ç‰‡åœ°å€</li>
<li>å¯ä»¥åˆ é™¤ä¼ å…¥çš„å›¾ç‰‡åœ°å€</li>
<li>å¯ä»¥ä¸Šä¼ å›¾ç‰‡åˆ°äº‘æœåŠ¡å™¨</li>
<li>ä¸Šä¼ åˆ°è…¾è®¯äº‘ä¹‹åï¼Œå¯ä»¥è¿”å›å›¾ç‰‡åœ°å€ï¼Œæ˜¾ç¤º  </li>
<li>ä¸Šä¼ æˆåŠŸä¹‹åï¼Œå¯ä»¥å›è°ƒæˆåŠŸå‡½æ•°</li>
</ol>
<p>è¿™ä¸ªä¸Šä¼ ç»„ä»¶ç®€å•å—ï¼Ÿ</p>
<p><strong><code>no ! ! !</code></strong></p>
<p>çœ‹ä¼¼éœ€æ±‚å¾ˆæ˜ç¡®ï¼Œä½†æ˜¯å®ƒçœŸæ­£çš„å®ç°å¾ˆå¤æ‚ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå›¾æ¥çœ‹ä¸€ä¸‹</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200806174643390.png" alt="image-20200806174643390"></p>
<p>ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šæ˜¯æœ‰ä¸¤ç§åœºæ™¯çš„ï¼Œæœ¬åœ°åœºæ™¯å’Œå·²ç»ä¸Šä¼ çš„åœºæ™¯</p>
<p>ä¸‹ä¸ªç« èŠ‚ï¼Œé’ˆå¯¹è¿™ä¸ªåœºæ™¯æˆ‘ä»¬è¿›è¡Œå¼€å‘</p>
<h2 id="å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°"><a href="#å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°" class="headerlink" title="å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°"></a>å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°</h2><p>**<code>ç›®æ ‡</code>**å®ç°ä¸Šä¼ ç»„ä»¶çš„ä»£ç éƒ¨åˆ†</p>
<blockquote>
<p>JavaScript SDK éœ€æµè§ˆå™¨æ”¯æŒåŸºæœ¬çš„ HTML5 ç‰¹æ€§ï¼ˆæ”¯æŒ IE10 ä»¥ä¸Šæµè§ˆå™¨ï¼‰ï¼Œä»¥ä¾¿æ”¯æŒ ajax ä¸Šä¼ æ–‡ä»¶å’Œè®¡ç®—æ–‡ä»¶ MD5 å€¼ã€‚</p>
</blockquote>
<h3 id="æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶"><a href="#æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶" class="headerlink" title="æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶"></a>æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶</h3><p><strong>å®‰è£…JavaScript SDK</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i cos-js-sdk-v5 --save</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ–°å»ºä¸Šä¼ å›¾ç‰‡ç»„ä»¶</strong> <strong><code>src/components/ImageUpload/index.vue</code></strong></p>
<blockquote>
<p>ä¸Šä¼ ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ²¿ç”¨elementçš„el-uploadç»„ä»¶,å¹¶ä¸”é‡‡ç”¨ç…§ç‰‡å¢™çš„æ¨¡å¼ <strong><code>list-type="picture-card"</code></strong></p>
</blockquote>
<p><strong>æ”¾ç½®el-uploadç»„ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-upload list-type="picture-card"&gt;</span><br><span class="line">     &lt;i class="el-icon-plus" /&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å…¨å±€æ³¨å†Œç»„ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PageTools <span class="keyword">from</span> <span class="string">'./PageTools'</span></span><br><span class="line"><span class="keyword">import</span> UploadExcel <span class="keyword">from</span> <span class="string">'./UploadExcel'</span></span><br><span class="line"><span class="keyword">import</span> ImageUpload <span class="keyword">from</span> <span class="string">'./ImageUpload'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">Vue</span>)</span> {</span><br><span class="line">    Vue.component(<span class="string">'PageTools'</span>, PageTools) <span class="comment">// æ³¨å†Œå·¥å…·æ ç»„ä»¶</span></span><br><span class="line">    Vue.component(<span class="string">'UploadExcel'</span>, UploadExcel) <span class="comment">// æ³¨å†Œå¯¼å…¥excelç»„ä»¶</span></span><br><span class="line">    Vue.component(<span class="string">'ImageUpload'</span>, ImageUpload) <span class="comment">// æ³¨å†Œå¯¼å…¥ä¸Šä¼ ç»„ä»¶</span></span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ"><a href="#ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ" class="headerlink" title="ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ"></a>ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ</h3><p><strong>é™å®šä¸Šä¼ çš„å›¾ç‰‡æ•°é‡å’Œaction</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-upload list-type="picture-card" :limit="1" action="#"&gt;</span><br><span class="line">  &lt;/el-upload&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>actionä¸ºä»€ä¹ˆç»™#ï¼Œ å› ä¸ºå‰é¢æˆ‘ä»¬è®²è¿‡äº†ï¼Œæˆ‘ä»¬è¦ä¸Šä¼ åˆ°è…¾è®¯äº‘ï¼Œéœ€è¦è‡ªå®šä¹‰çš„ä¸Šä¼ æ–¹å¼,actionç»™ä¸ª#é˜²æ­¢æŠ¥é”™</p>
</blockquote>
<p><strong>é¢„è§ˆ</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">fileList</span>: [], <span class="comment">// å›¾ç‰‡åœ°å€è®¾ç½®ä¸ºæ•°ç»„ </span></span><br><span class="line">      <span class="attr">showDialog</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ˜¾ç¤ºå¼¹å±‚</span></span><br><span class="line">      <span class="attr">imgUrl</span>: <span class="string">''</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="title">preview</span>(<span class="params">file</span>)</span> {</span><br><span class="line">    <span class="comment">// è¿™é‡Œåº”è¯¥å¼¹å‡ºä¸€ä¸ªå±‚ å±‚é‡Œæ˜¯ç‚¹å‡»çš„å›¾ç‰‡åœ°å€</span></span><br><span class="line">    <span class="built_in">this</span>.imgUrl = file.url</span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">},  </span><br></pre></td></tr></tbody></table></figure>

<p><strong>é¢„è§ˆå¼¹å±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title="å›¾ç‰‡" :visible.sync="showDialog"&gt;</span><br><span class="line">    &lt;img :src="imgUrl" style="width:100%" alt=""&gt;</span><br><span class="line"> &lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®"><a href="#æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®" class="headerlink" title="æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®"></a>æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®</h3><p><strong>æ§åˆ¶ä¸Šä¼ æ˜¾ç¤º</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">computed: {</span><br><span class="line">   <span class="comment">// è®¾å®šä¸€ä¸ªè®¡ç®—å±æ€§ åˆ¤æ–­æ˜¯å¦å·²ç»ä¸Šä¼ å®Œäº†ä¸€å¼ </span></span><br><span class="line">   <span class="function"><span class="title">fileComputed</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="keyword">return</span> <span class="built_in">this</span>.fileList.length === <span class="number">1</span></span><br><span class="line">   }</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> &lt;el-upload</span><br><span class="line">      :on-preview=<span class="string">"preview"</span></span><br><span class="line">      :on-remove=<span class="string">"handleRemove"</span></span><br><span class="line">      :on-change=<span class="string">"changeFile"</span></span><br><span class="line">      :file-list=<span class="string">"fileList"</span></span><br><span class="line">      list-type=<span class="string">"picture-card"</span></span><br><span class="line">      action=<span class="string">"#"</span></span><br><span class="line">      :limit=<span class="string">"1"</span></span><br><span class="line">      :class=<span class="string">"{disabled: fileComputed }"</span></span><br><span class="line">    &gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.disabled .el-upload--picture-card {</span><br><span class="line">  display: none</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡"><a href="#åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡" class="headerlink" title="åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡"></a>åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡</h3><p><strong>åˆ é™¤æ–‡ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">handleRemove</span>(<span class="params">file</span>)</span> {</span><br><span class="line">   <span class="comment">// fileæ˜¯ç‚¹å‡»åˆ é™¤çš„æ–‡ä»¶</span></span><br><span class="line"> <span class="comment">//   å°†åŸæ¥çš„æ–‡ä»¶ç»™æ’é™¤æ‰äº† å‰©ä¸‹çš„å°±æ˜¯æœ€æ–°çš„æ•°ç»„äº†</span></span><br><span class="line">   <span class="built_in">this</span>.fileList = <span class="built_in">this</span>.fileList.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.uid !== file.uid)</span><br><span class="line"> },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ·»åŠ æ–‡ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹æ–‡ä»¶æ—¶è§¦å‘</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶å¯ä»¥ç”¨fileList å› ä¸ºè¯¥æ–¹æ³•ä¼šè¿›æ¥å¾ˆå¤šé ä¸èƒ½æ¯æ¬¡éƒ½å»push</span></span><br><span class="line"><span class="comment">// fileListå› ä¸ºfileListå‚æ•°æ˜¯å½“å‰ä¼ è¿›æ¥çš„æœ€æ–°å‚æ•° æˆ‘ä»¬åªéœ€è¦å°†å…¶è½¬åŒ–æˆæ•°ç»„å³å¯ éœ€è¦è½¬åŒ–æˆä¸€ä¸ªæ–°çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">// [] =&gt; [...fileList] [] =&gt; fileList.map()</span></span><br><span class="line"><span class="comment">// ä¸Šä¼ æˆåŠŸä¹‹å è¿˜ä¼šè¿›æ¥ éœ€è¦å®ç°ä¸Šä¼ ä»£ç çš„é€»è¾‘ è¿™é‡Œæ‰ä¼šæˆåŠŸ</span></span><br><span class="line"><span class="function"><span class="title">changeFile</span>(<span class="params">file, fileList</span>)</span> {</span><br><span class="line">  <span class="built_in">this</span>.fileList = fileList.map(<span class="function"><span class="params">item</span> =&gt;</span> item)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¸Šä¼ ä¹‹å‰æ£€æŸ¥"><a href="#ä¸Šä¼ ä¹‹å‰æ£€æŸ¥" class="headerlink" title="ä¸Šä¼ ä¹‹å‰æ£€æŸ¥"></a>ä¸Šä¼ ä¹‹å‰æ£€æŸ¥</h3><blockquote>
<p>æ§åˆ¶ä¸Šä¼ å›¾ç‰‡çš„ç±»å‹å’Œä¸Šä¼ å¤§å°ï¼Œ å¦‚æœä¸æ»¡è¶³æ¡ä»¶ è¿”å›falseä¸Šä¼ å°±ä¼šåœæ­¢</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">beforeUpload</span>(<span class="params">file</span>)</span> {</span><br><span class="line">  <span class="comment">// è¦å¼€å§‹åšæ–‡ä»¶ä¸Šä¼ çš„æ£€æŸ¥äº†</span></span><br><span class="line">  <span class="comment">// æ–‡ä»¶ç±»å‹ æ–‡ä»¶å¤§å°</span></span><br><span class="line">  <span class="keyword">const</span> types = [<span class="string">'image/jpeg'</span>, <span class="string">'image/gif'</span>, <span class="string">'image/bmp'</span>, <span class="string">'image/png'</span>]</span><br><span class="line">  <span class="keyword">if</span> (!types.includes(file.type)) {</span><br><span class="line">    <span class="built_in">this</span>.$message.error(<span class="string">'ä¸Šä¼ å›¾ç‰‡åªèƒ½æ˜¯ JPGã€GIFã€BMPã€PNG æ ¼å¼!'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">  <span class="comment">//  æ£€æŸ¥å¤§å°</span></span><br><span class="line">  <span class="keyword">const</span> maxSize = <span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span></span><br><span class="line">  <span class="keyword">if</span> (maxSize &lt; file.size) {</span><br><span class="line">    <span class="built_in">this</span>.$message.error(<span class="string">'å›¾ç‰‡å¤§å°æœ€å¤§ä¸èƒ½è¶…è¿‡5M'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘"><a href="#ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘" class="headerlink" title="ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘"></a>ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘</h3><p><strong>ä¸Šä¼ åŠ¨ä½œä¸ºel-uploadçš„http-requestå±æ€§</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">:http-request=<span class="string">"upload"</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// è‡ªå®šä¹‰ä¸Šä¼ åŠ¨ä½œ æœ‰ä¸ªå‚æ•° æœ‰ä¸ªfileå¯¹è±¡ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦ä¸Šä¼ åˆ°è…¾è®¯äº‘æœåŠ¡å™¨çš„å†…å®¹</span></span><br><span class="line">   <span class="function"><span class="title">upload</span>(<span class="params">params</span>)</span> {</span><br><span class="line">     <span class="built_in">console</span>.log(params.file)</span><br><span class="line">   }</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬éœ€è¦åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œè°ƒç”¨è…¾è®¯äº‘çš„ä¸Šä¼ æ–¹æ³•</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/document/product/436/35649#.E7.AE.80.E5.8D.95.E4.B8.8A.E4.BC.A0.E5.AF.B9.E8.B1.A1">è…¾è®¯äº‘æ–‡æ¡£åœ°å€</a></p>
<p>èº«ä»½IDå’Œå¯†é’¥å¯ä»¥é€šè¿‡è…¾è®¯äº‘å¹³å°è·å–</p>
<p>ç™»å½• <a target="_blank" rel="noopener" href="https://console.cloud.tencent.com/capi">è®¿é—®ç®¡ç†æ§åˆ¶å°</a> ï¼Œè·å–æ‚¨çš„é¡¹ç›® SecretId å’Œ SecretKeyã€‚</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805211539544.png" alt="image-20200805211539544"></p>
<p>å®ç°ä»£ç </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿›è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="title">upload</span>(<span class="params">params</span>)</span> {</span><br><span class="line"><span class="comment">//   console.log(params.file)</span></span><br><span class="line">  <span class="keyword">if</span> (params.file) {</span><br><span class="line">    <span class="comment">// æ‰§è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line">    cos.putObject({</span><br><span class="line">      <span class="attr">Bucket</span>: <span class="string">'shuiruohanyu-106-1302806742'</span>, <span class="comment">// å­˜å‚¨æ¡¶</span></span><br><span class="line">      <span class="attr">Region</span>: <span class="string">'ap-beijing'</span>, <span class="comment">// åœ°åŸŸ</span></span><br><span class="line">      <span class="attr">Key</span>: params.file.name, <span class="comment">// æ–‡ä»¶å</span></span><br><span class="line">      <span class="attr">Body</span>: params.file, <span class="comment">// è¦ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">      <span class="attr">StorageClass</span>: <span class="string">'STANDARD'</span> <span class="comment">// ä¸Šä¼ çš„æ¨¡å¼ç±»å‹ ç›´æ¥é»˜è®¤ æ ‡å‡†æ¨¡å¼å³å¯</span></span><br><span class="line">      <span class="comment">// ä¸Šä¼ åˆ°è…¾è®¯äº‘ =ã€‹ å“ªä¸ªå­˜å‚¨æ¡¶ å“ªä¸ªåœ°åŸŸçš„å­˜å‚¨æ¡¶ æ–‡ä»¶  æ ¼å¼  åç§° å›è°ƒ</span></span><br><span class="line">    }, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>{</span><br><span class="line">      <span class="comment">// dataè¿”å›æ•°æ®ä¹‹å åº”è¯¥å¦‚ä½•å¤„ç†</span></span><br><span class="line">      <span class="built_in">console</span>.log(err || data)</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®"><a href="#ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®" class="headerlink" title="ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®"></a>ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®</h3><blockquote>
<p>å¦‚ä½•å¤„ç†è¿”å›æˆåŠŸçš„è¿”å›æ•°æ®</p>
</blockquote>
<p>ç¡®å®šè¦ä¸Šä¼ è®°å½•id</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">beforeUpload</span>(<span class="params">file</span>)</span> {</span><br><span class="line">    <span class="comment">//   å…ˆæ£€æŸ¥æ–‡ä»¶ç±»å‹</span></span><br><span class="line">    <span class="keyword">const</span> types = [<span class="string">'image/jpeg'</span>, <span class="string">'image/gif'</span>, <span class="string">'image/bmp'</span>, <span class="string">'image/png'</span>]</span><br><span class="line">    <span class="keyword">if</span> (!types.some(<span class="function"><span class="params">item</span> =&gt;</span> item === file.type)) {</span><br><span class="line">      <span class="comment">//   å¦‚æœä¸å­˜åœ¨</span></span><br><span class="line">      <span class="built_in">this</span>.$message.error(<span class="string">'ä¸Šä¼ å›¾ç‰‡åªèƒ½æ˜¯ JPGã€GIFã€BMPã€PNG æ ¼å¼!'</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">// ä¸Šä¼ ç»ˆæ­¢</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ–‡ä»¶å¤§å°  5M 1M = 1024KB 1KB = 1024B</span></span><br><span class="line">    <span class="keyword">const</span> maxSize = <span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span></span><br><span class="line">    <span class="keyword">if</span> (file.size &gt; maxSize) {</span><br><span class="line">      <span class="comment">//   è¶…è¿‡äº†é™åˆ¶çš„æ–‡ä»¶å¤§å°</span></span><br><span class="line">      <span class="built_in">this</span>.$message.error(<span class="string">'ä¸Šä¼ çš„å›¾ç‰‡å¤§å°ä¸èƒ½å¤§äº5M'</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">//   å·²ç»ç¡®å®šå½“å‰ä¸Šä¼ çš„å°±æ˜¯å½“å‰çš„è¿™ä¸ªfileäº†</span></span><br><span class="line">    <span class="built_in">this</span>.currentFileUid = file.uid</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span> <span class="comment">// æœ€åä¸€å®šè¦return  true</span></span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å¤„ç†è¿”å›æ•°æ®</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿›è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="title">upload</span>(<span class="params">params</span>)</span> {</span><br><span class="line"><span class="comment">//   console.log(params.file)</span></span><br><span class="line">  <span class="keyword">if</span> (params.file) {</span><br><span class="line">    <span class="comment">// æ‰§è¡Œä¸Šä¼ æ“ä½œ</span></span><br><span class="line">    cos.putObject({</span><br><span class="line">      <span class="attr">Bucket</span>: <span class="string">'shuiruohanyu-106-1302806742'</span>, <span class="comment">// å­˜å‚¨æ¡¶</span></span><br><span class="line">      <span class="attr">Region</span>: <span class="string">'ap-beijing'</span>, <span class="comment">// åœ°åŸŸ</span></span><br><span class="line">      <span class="attr">Key</span>: params.file.name, <span class="comment">// æ–‡ä»¶å</span></span><br><span class="line">      <span class="attr">Body</span>: params.file, <span class="comment">// è¦ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">      <span class="attr">StorageClass</span>: <span class="string">'STANDARD'</span> <span class="comment">// ä¸Šä¼ çš„æ¨¡å¼ç±»å‹ ç›´æ¥é»˜è®¤ æ ‡å‡†æ¨¡å¼å³å¯</span></span><br><span class="line">      <span class="comment">// ä¸Šä¼ åˆ°è…¾è®¯äº‘ =ã€‹ å“ªä¸ªå­˜å‚¨æ¡¶ å“ªä¸ªåœ°åŸŸçš„å­˜å‚¨æ¡¶ æ–‡ä»¶  æ ¼å¼  åç§° å›è°ƒ</span></span><br><span class="line">    }, <span class="function">(<span class="params">err, data</span>) =&gt;</span> {</span><br><span class="line">      <span class="comment">// dataè¿”å›æ•°æ®ä¹‹å åº”è¯¥å¦‚ä½•å¤„ç†</span></span><br><span class="line">      <span class="built_in">console</span>.log(err || data)</span><br><span class="line">      <span class="comment">// dataä¸­æœ‰ä¸€ä¸ªstatusCode === 200 çš„æ—¶å€™è¯´æ˜ä¸Šä¼ æˆåŠŸ</span></span><br><span class="line">      <span class="keyword">if</span> (!err &amp;&amp; data.statusCode === <span class="number">200</span>) {</span><br><span class="line">        <span class="comment">//   æ­¤æ—¶è¯´æ˜æ–‡ä»¶ä¸Šä¼ æˆåŠŸ  è¦è·å–æˆåŠŸçš„è¿”å›åœ°å€</span></span><br><span class="line">        <span class="comment">// fileListæ‰èƒ½æ˜¾ç¤ºåˆ°ä¸Šä¼ ç»„ä»¶ä¸Š æ­¤æ—¶æˆ‘ä»¬è¦å°†fileListä¸­çš„æ•°æ®çš„urlåœ°å€å˜æˆ ç°åœ¨ä¸Šä¼ æˆåŠŸçš„åœ°å€</span></span><br><span class="line">        <span class="comment">// ç›®å‰è™½ç„¶æ˜¯ä¸€å¼ å›¾ç‰‡ ä½†æ˜¯è¯·æ³¨æ„ æˆ‘ä»¬çš„fileListæ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">        <span class="comment">// éœ€è¦çŸ¥é“å½“å‰ä¸Šä¼ æˆåŠŸçš„æ˜¯å“ªä¸€å¼ å›¾ç‰‡</span></span><br><span class="line">        <span class="built_in">this</span>.fileList = <span class="built_in">this</span>.fileList.map(<span class="function"><span class="params">item</span> =&gt;</span> {</span><br><span class="line">          <span class="comment">// å»æ‰¾è°çš„uidç­‰äºåˆšåˆšè®°å½•ä¸‹æ¥çš„id</span></span><br><span class="line">          <span class="keyword">if</span> (item.uid === <span class="built_in">this</span>.currentFileUid) {</span><br><span class="line">            <span class="comment">// å°†æˆåŠŸçš„åœ°å€èµ‹å€¼ç»™åŸæ¥çš„urlå±æ€§</span></span><br><span class="line">            <span class="keyword">return</span> { <span class="attr">url</span>: <span class="string">'http://'</span> + data.Location, <span class="attr">upload</span>: <span class="literal">true</span> }</span><br><span class="line">            <span class="comment">// upload ä¸ºtrue è¡¨ç¤ºè¿™å¼ å›¾ç‰‡å·²ç»ä¸Šä¼ å®Œæ¯• è¿™ä¸ªå±æ€§è¦ä¸ºæˆ‘ä»¬åæœŸåº”ç”¨çš„æ—¶å€™åšæ ‡è®°</span></span><br><span class="line">            <span class="comment">// ä¿å­˜  =&gt; å›¾ç‰‡æœ‰å¤§æœ‰å° =&gt; ä¸Šä¼ é€Ÿåº¦æœ‰å¿«åˆæ…¢ =&gt;è¦æ ¹æ®æœ‰æ²¡æœ‰uploadè¿™ä¸ªæ ‡è®°æ¥å†³å®šæ˜¯å¦å»ä¿å­˜</span></span><br><span class="line">          }</span><br><span class="line">          <span class="keyword">return</span> item</span><br><span class="line">        })</span><br><span class="line">        <span class="comment">// å°†ä¸Šä¼ æˆåŠŸçš„åœ°å€ å›å†™åˆ°äº†fileListä¸­ fileListå˜åŒ–  =ã€‹ uploadç»„ä»¶ å°±ä¼šæ ¹æ®fileListçš„å˜åŒ–è€Œå»æ¸²æŸ“è§†å›¾</span></span><br><span class="line">      }</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬åœ¨fileListä¸­è®¾ç½®äº†å±æ€§ä¸ºuploadä¸ºtrueçš„å±æ€§ï¼Œè¡¨ç¤ºè¯¥å›¾ç‰‡å·²ç»ä¸Šä¼ æˆåŠŸäº†ï¼Œå¦‚æœfileListè¿˜æœ‰uploadä¸ä¸ºtrueçš„æ•°æ®ï¼Œé‚£å°±è¡¨ç¤ºè¯¥å›¾ç‰‡è¿˜æ²¡æœ‰ä¸Šä¼ å®Œæ¯•</p>
</blockquote>
<h3 id="ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º"><a href="#ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º" class="headerlink" title="ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º"></a>ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º</h3><blockquote>
<p>ä¸ºäº†å†ä¸Šä¼ å›¾ç‰‡è¿‡ç¨‹ä¸­æ˜¾ç¤ºè¿›åº¦æ¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨element-uiçš„è¿›åº¦æ¡æ˜¾ç¤ºå½“å‰çš„ä¸Šä¼ è¿›åº¦</p>
</blockquote>
<p><strong>æ”¾ç½®è¿›åº¦æ¡</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-progress v-if="showPercent" style="width: 180px" :percentage="percent" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>é€šè¿‡è…¾è®¯äº‘sdkç›‘å¬ä¸Šä¼ è¿›åº¦</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cos.putObject({</span><br><span class="line">         <span class="comment">// é…ç½®</span></span><br><span class="line">         <span class="attr">Bucket</span>: <span class="string">'laogao-1302806742'</span>, <span class="comment">// å­˜å‚¨æ¡¶åç§°</span></span><br><span class="line">         <span class="attr">Region</span>: <span class="string">'ap-guangzhou'</span>, <span class="comment">// å­˜å‚¨æ¡¶åœ°åŸŸ</span></span><br><span class="line">         <span class="attr">Key</span>: params.file.name, <span class="comment">// æ–‡ä»¶åä½œä¸ºkey</span></span><br><span class="line">         <span class="attr">StorageClass</span>: <span class="string">'STANDARD'</span>, <span class="comment">// æ­¤ç±»å†™æ­»</span></span><br><span class="line">         <span class="attr">Body</span>: params.file, <span class="comment">// å°†æœ¬åœ°çš„æ–‡ä»¶èµ‹å€¼ç»™è…¾è®¯äº‘é…ç½®</span></span><br><span class="line">         <span class="comment">// è¿›åº¦æ¡</span></span><br><span class="line">         <span class="attr">onProgress</span>: <span class="function">(<span class="params">params</span>) =&gt;</span> {</span><br><span class="line">           <span class="built_in">this</span>.percent = params.percent * <span class="number">100</span></span><br><span class="line">         }</span><br><span class="line">       }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®Œæ•´ä»£ç </strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- æ”¾ç½®ä¸€ä¸ªä¸Šä¼ ç»„ä»¶ --&gt;</span><br><span class="line">    &lt;!-- actionè¿™é‡Œä¸å†™ä¸Šä¼ åœ°å€ å› ä¸ºæˆ‘ä»¬æ˜¯è°ƒç”¨è…¾è®¯äº‘cos ä¸æ˜¯ä¸€ä¸ªåœ°å€å¯ä»¥æå®šçš„ è¦ç”¨è‡ªå®šä¹‰çš„ä¸Šä¼  --&gt;</span><br><span class="line">    &lt;el-upload</span><br><span class="line">      :on-preview="preview"</span><br><span class="line">      :on-remove="handleRemove"</span><br><span class="line">      :on-change="changeFile"</span><br><span class="line">      :before-upload="beforeUpload"</span><br><span class="line">      :file-list="fileList"</span><br><span class="line">      :http-request="upload"</span><br><span class="line">      list-type="picture-card"</span><br><span class="line">      action="#"</span><br><span class="line">      :limit="1"</span><br><span class="line">      :class="{disabled: fileComputed }"</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;i class="el-icon-plus" /&gt;</span><br><span class="line">    &lt;/el-upload&gt;</span><br><span class="line">    &lt;!-- è¿›åº¦æ¡ --&gt;</span><br><span class="line">    &lt;el-progress v-if="showPercent" style="width: 180px" :percentage="percent" /&gt;</span><br><span class="line">    &lt;!-- æ”¾ç½®ä¸€ä¸ªå¼¹å±‚ --&gt;</span><br><span class="line">    &lt;!-- syncä¿®é¥°ç¬¦è‡ªåŠ¨å°†å¼¹å±‚å…³é—­äº† --&gt;</span><br><span class="line">    &lt;el-dialog title="å›¾ç‰‡" :visible.sync="showDialog"&gt;</span><br><span class="line">      &lt;img :src="imgUrl" style="width:100%" alt=""&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import COS from 'cos-js-sdk-v5' // å¼•å…¥è…¾è®¯äº‘çš„åŒ…</span><br><span class="line">// éœ€è¦å®ä¾‹åŒ–</span><br><span class="line">const cos = new COS({</span><br><span class="line">  SecretId: 'AKID0mqfEWqlUzIbeSkGRL6c7ML6c0B93To9',</span><br><span class="line">  SecretKey: 'JFwNZdeRF2iOp03FFsGNDm44vWFitmNF'</span><br><span class="line">}) // å®ä¾‹åŒ–çš„åŒ… å·²ç»å…·æœ‰äº†ä¸Šä¼ çš„èƒ½åŠ› å¯ä»¥ä¸Šä¼ åˆ°è¯¥è´¦å·é‡Œé¢çš„å­˜å‚¨æ¡¶äº†</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      fileList: [],</span><br><span class="line">      showDialog: false, // æ§åˆ¶å›¾ç‰‡çš„æ˜¾ç¤ºæˆ–è€…éšè—</span><br><span class="line">      imgUrl: '', // å­˜å‚¨ç‚¹å‡»çš„å›¾ç‰‡åœ°å€</span><br><span class="line">      currentFileUid: '', // ç”¨ä¸€ä¸ªå˜é‡ è®°ä½å½“å‰ä¸Šä¼ çš„å›¾ç‰‡id</span><br><span class="line">      percent: 0,</span><br><span class="line">      showPercent: false // é»˜è®¤ä¸æ˜¾ç¤ºè¿›åº¦æ¡</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    // è®¾å®šä¸€ä¸ªè®¡ç®—å±æ€§ åˆ¤æ–­æ˜¯å¦å·²ç»ä¸Šä¼ å®Œäº†ä¸€å¼ </span><br><span class="line">    fileComputed() {</span><br><span class="line">      return this.fileList.length === 1</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    preview(file) {</span><br><span class="line">      // è¿™é‡Œåº”è¯¥å¼¹å‡ºä¸€ä¸ªå±‚ å±‚é‡Œæ˜¯ç‚¹å‡»çš„å›¾ç‰‡åœ°å€</span><br><span class="line">      this.imgUrl = file.url</span><br><span class="line">      this.showDialog = true</span><br><span class="line">    },</span><br><span class="line">    handleRemove(file) {</span><br><span class="line">      // fileæ˜¯ç‚¹å‡»åˆ é™¤çš„æ–‡ä»¶</span><br><span class="line">    //   å°†åŸæ¥çš„æ–‡ä»¶ç»™æ’é™¤æ‰äº† å‰©ä¸‹çš„å°±æ˜¯æœ€æ–°çš„æ•°ç»„äº†</span><br><span class="line">      this.fileList = this.fileList.filter(item =&gt; item.uid !== file.uid)</span><br><span class="line">    },</span><br><span class="line">    // ä¿®æ”¹æ–‡ä»¶æ—¶è§¦å‘</span><br><span class="line">    // æ­¤æ—¶å¯ä»¥ç”¨fileList å› ä¸ºè¯¥æ–¹æ³•ä¼šè¿›æ¥å¾ˆå¤šé ä¸èƒ½æ¯æ¬¡éƒ½å»push</span><br><span class="line">    // fileListå› ä¸ºfileListå‚æ•°æ˜¯å½“å‰ä¼ è¿›æ¥çš„æœ€æ–°å‚æ•° æˆ‘ä»¬åªéœ€è¦å°†å…¶è½¬åŒ–æˆæ•°ç»„å³å¯ éœ€è¦è½¬åŒ–æˆä¸€ä¸ªæ–°çš„æ•°ç»„</span><br><span class="line">    // [] =&gt; [...fileList] [] =&gt; fileList.map()</span><br><span class="line">    // ä¸Šä¼ æˆåŠŸä¹‹å è¿˜ä¼šè¿›æ¥ éœ€è¦å®ç°ä¸Šä¼ ä»£ç çš„é€»è¾‘ è¿™é‡Œæ‰ä¼šæˆåŠŸ</span><br><span class="line">    changeFile(file, fileList) {</span><br><span class="line">      this.fileList = fileList.map(item =&gt; item)</span><br><span class="line">    },</span><br><span class="line">    beforeUpload(file) {</span><br><span class="line">      // è¦å¼€å§‹åšæ–‡ä»¶ä¸Šä¼ çš„æ£€æŸ¥äº†</span><br><span class="line">      // æ–‡ä»¶ç±»å‹ æ–‡ä»¶å¤§å°</span><br><span class="line">      const types = ['image/jpeg', 'image/gif', 'image/bmp', 'image/png']</span><br><span class="line">      if (!types.includes(file.type)) {</span><br><span class="line">        this.$message.error('ä¸Šä¼ å›¾ç‰‡åªèƒ½æ˜¯ JPGã€GIFã€BMPã€PNG æ ¼å¼!')</span><br><span class="line">        return false</span><br><span class="line">      }</span><br><span class="line">      //  æ£€æŸ¥å¤§å°</span><br><span class="line">      const maxSize = 5 * 1024 * 1024</span><br><span class="line">      if (maxSize &lt; file.size) {</span><br><span class="line">        this.$message.error('å›¾ç‰‡å¤§å°æœ€å¤§ä¸èƒ½è¶…è¿‡5M')</span><br><span class="line">        return false</span><br><span class="line">      }</span><br><span class="line">      // file.uid</span><br><span class="line">      this.currentFileUid = file.uid // è®°ä½å½“å‰çš„uid</span><br><span class="line">      this.showPercent = true</span><br><span class="line">      return true</span><br><span class="line">    },</span><br><span class="line">    // è‡ªå®šä¹‰ä¸Šä¼ åŠ¨ä½œ æœ‰ä¸ªå‚æ•° æœ‰ä¸ªfileå¯¹è±¡ï¼Œæ˜¯æˆ‘ä»¬éœ€è¦ä¸Šä¼ åˆ°è…¾è®¯äº‘æœåŠ¡å™¨çš„å†…å®¹</span><br><span class="line">    upload(params) {</span><br><span class="line">      if (params.file) {</span><br><span class="line">        //  ä¸Šä¼ æ–‡ä»¶åˆ°è…¾è®¯äº‘</span><br><span class="line">        cos.putObject({</span><br><span class="line">          // é…ç½®</span><br><span class="line">          Bucket: 'laogao-1302806742', // å­˜å‚¨æ¡¶åç§°</span><br><span class="line">          Region: 'ap-guangzhou', // å­˜å‚¨æ¡¶åœ°åŸŸ</span><br><span class="line">          Key: params.file.name, // æ–‡ä»¶åä½œä¸ºkey</span><br><span class="line">          StorageClass: 'STANDARD', // æ­¤ç±»å†™æ­»</span><br><span class="line">          Body: params.file, // å°†æœ¬åœ°çš„æ–‡ä»¶èµ‹å€¼ç»™è…¾è®¯äº‘é…ç½®</span><br><span class="line">          // è¿›åº¦æ¡</span><br><span class="line">          onProgress: (params) =&gt; {</span><br><span class="line">            this.percent = params.percent * 100</span><br><span class="line">          }</span><br><span class="line">        }, (err, data) =&gt; {</span><br><span class="line">          // éœ€è¦åˆ¤æ–­é”™è¯¯ä¸æˆåŠŸ</span><br><span class="line">          if (!err &amp;&amp; data.statusCode === 200) {</span><br><span class="line">            // å¦‚æœæ²¡æœ‰å¤±è´¥è¡¨ç¤ºæˆåŠŸäº†</span><br><span class="line">            // æ­¤æ—¶è®¤ä¸ºä¸Šä¼ æˆåŠŸäº†</span><br><span class="line">            // this.currentFileUid</span><br><span class="line">            // ä»ç„¶æœ‰ä¸ªå°é—®é¢˜ï¼Œ æ¯”å¦‚æ­¤æ—¶æˆ‘ä»¬æ­£åœ¨ä¸Šä¼ ï¼Œä½†æ˜¯è°ƒç”¨äº†ä¿å­˜ï¼Œä¿å­˜åœ¨ä¸Šä¼ è¿‡ç¨‹ä¸­è¿›è¡Œï¼Œ</span><br><span class="line">            // æ­¤æ—¶ä¸Šä¼ è¿˜æ²¡æœ‰å®Œæˆ  æ­¤æ—¶å¯ä»¥è¿™æ ·åš ï¼š ç»™æ‰€æœ‰ä¸Šä¼ æˆåŠŸçš„å›¾ç‰‡ åŠ ä¸€ä¸ªå±æ€§ upload: true</span><br><span class="line">            this.fileList = this.fileList.map(item =&gt; {</span><br><span class="line">              if (item.uid === this.currentFileUid) {</span><br><span class="line">                //   uploadä¸ºtrueè¡¨ç¤º è¯¥å›¾ç‰‡å·²ç»æˆåŠŸä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œåœ°å€å·²ç»æ˜¯è…¾è®¯äº‘çš„åœ°å€äº†  å°±ä¸å¯ä»¥æ‰§è¡Œä¿å­˜äº†</span><br><span class="line">                return { url: 'http://' + data.Location, upload: true } // å°†æœ¬åœ°çš„åœ°å€æ¢æˆè…¾è®¯äº‘åœ°å€</span><br><span class="line">              }</span><br><span class="line">              return item</span><br><span class="line">            })</span><br><span class="line">            setTimeout(() =&gt; {</span><br><span class="line">              this.showPercent = false // éšè—è¿›åº¦æ¡</span><br><span class="line">              this.percent = 0 // è¿›åº¦å½’0</span><br><span class="line">            }, 2000)</span><br><span class="line"></span><br><span class="line">            // å°†è…¾è®¯äº‘åœ°å€å†™å…¥åˆ°fileListä¸Š ï¼Œä¿å­˜çš„æ—¶å€™ å°±å¯ä»¥ä»fileListä¸­ç›´æ¥è·å–å›¾ç‰‡åœ°å€</span><br><span class="line"></span><br><span class="line">            // æ­¤æ—¶æ³¨æ„ï¼Œæˆ‘ä»¬åº”è¯¥è®°ä½ å½“å‰ä¸Šä¼ çš„æ˜¯å“ªä¸ªå›¾ç‰‡  ä¸Šä¼ æˆåŠŸä¹‹åï¼Œå°†å›¾ç‰‡çš„åœ°å€èµ‹å€¼å›å»</span><br><span class="line">          }</span><br><span class="line">        })</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.disabled .el-upload--picture-card {</span><br><span class="line">  display: none</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šä¼ åŠ¨ä½œä¸­ï¼Œç”¨åˆ°äº†ä¸Šä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ³¨å†Œçš„è…¾è®¯äº‘cosçš„**<code>å­˜å‚¨æ¡¶åç§°</code><strong>å’Œ</strong><code>åœ°åŸŸåç§°</code>**</p>
</blockquote>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬æŠŠä¸Šä¼ ä¹‹åçš„å›¾ç‰‡ä¿¡æ¯éƒ½ç»™äº†**<code>fileListæ•°æ®</code><strong>ï¼Œé‚£ä¹ˆåœ¨åº”ç”¨æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥è·å–è¯¥å®ä¾‹çš„</strong><code>fileListæ•°æ®å³å¯</code>**</p>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å®Œæˆä¸Šä¼ ç»„ä»¶çš„å°è£…</p>
<h2 id="åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶"><a href="#åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶" class="headerlink" title="åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶"></a>åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶</h2><p>**<code>ç›®æ ‡</code>**ï¼šåº”ç”¨å°è£…å¥½çš„ä¸Šä¼ ç»„ä»¶</p>
<h3 id="å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶"><a href="#å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶" class="headerlink" title="å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶"></a>å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶</h3><p>åœ¨**<code>user-info.vue</code>**ä¸­æ”¾ç½®ä¸Šä¼ ç»„ä»¶</p>
<p><strong>å‘˜å·¥å¤´åƒ</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å‘˜å·¥ç…§ç‰‡ --&gt;</span><br><span class="line">    &lt;el-row class="inline-info"&gt;</span><br><span class="line">      &lt;el-col :span="12"&gt;</span><br><span class="line">        &lt;el-form-item label="å‘˜å·¥å¤´åƒ"&gt;</span><br><span class="line">          &lt;!-- æ”¾ç½®ä¸Šä¼ å›¾ç‰‡ --&gt;</span><br><span class="line">          &lt;image-upload ref="staffPhoto" /&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯»å–æ—¶èµ‹å€¼å¤´åƒ</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯»å–ä¸ŠåŠéƒ¨åˆ†çš„å†…å®¹</span></span><br><span class="line">   <span class="keyword">async</span> <span class="function"><span class="title">getUserDetailById</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.userInfo = <span class="keyword">await</span> getUserDetailById(<span class="built_in">this</span>.userId)</span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">this</span>.userInfo.staffPhoto) {</span><br><span class="line">       <span class="comment">// è¿™é‡Œæˆ‘ä»¬èµ‹å€¼ï¼ŒåŒæ—¶éœ€è¦ç»™èµ‹å€¼çš„åœ°å€ä¸€ä¸ªæ ‡è®° upload: true</span></span><br><span class="line">       <span class="built_in">this</span>.$refs.staffPhoto.fileList = [{ <span class="attr">url</span>: <span class="built_in">this</span>.userInfo.staffPhoto, <span class="attr">upload</span>: <span class="literal">true</span> }]</span><br><span class="line">     }</span><br><span class="line">   },</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å‘˜å·¥è¯ä»¶ç…§</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item label="å‘˜å·¥ç…§ç‰‡"&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®ä¸Šä¼ å›¾ç‰‡ --&gt;</span><br><span class="line">        &lt;!-- refä¸è¦é‡å --&gt;</span><br><span class="line">        &lt;image-upload ref="myStaffPhoto" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è¯»å–æ—¶èµ‹å€¼ç…§ç‰‡</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯»å–ä¸‹åŠéƒ¨åˆ†å†…å®¹</span></span><br><span class="line">   <span class="keyword">async</span>  <span class="function"><span class="title">getPersonalDetail</span>(<span class="params"></span>)</span> {</span><br><span class="line">     <span class="built_in">this</span>.formData = <span class="keyword">await</span> getPersonalDetail(<span class="built_in">this</span>.userId)</span><br><span class="line">     <span class="keyword">if</span> (<span class="built_in">this</span>.formData.staffPhoto) {</span><br><span class="line">       <span class="built_in">this</span>.$refs.myStaffPhoto.fileList = [{ <span class="attr">url</span>: <span class="built_in">this</span>.formData.staffPhoto, <span class="attr">upload</span>: <span class="literal">true</span> }]</span><br><span class="line">     }</span><br><span class="line">   },</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜"><a href="#ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜" class="headerlink" title="ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜"></a>ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜</h3><p><strong>å½“ç‚¹å‡»ä¿å­˜æ›´æ–°æ—¶ï¼Œè·å–å›¾ç‰‡çš„å†…å®¹</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span>  <span class="function"><span class="title">saveUser</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">// å»è¯»å– å‘˜å·¥ä¸Šä¼ çš„å¤´åƒ</span></span><br><span class="line">    <span class="keyword">const</span> fileList = <span class="built_in">this</span>.$refs.staffPhoto.fileList <span class="comment">// è¯»å–ä¸Šä¼ ç»„ä»¶çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (fileList.some(<span class="function"><span class="params">item</span> =&gt;</span> !item.upload)) {</span><br><span class="line">      <span class="comment">//  å¦‚æœæ­¤æ—¶å»æ‰¾ uploadä¸ºfalseçš„å›¾ç‰‡ æ‰¾åˆ°äº†è¯´æ˜ æœ‰å›¾ç‰‡è¿˜æ²¡æœ‰ä¸Šä¼ å®Œæˆ</span></span><br><span class="line">      <span class="built_in">this</span>.$message.warning(<span class="string">'æ‚¨å½“å‰è¿˜æœ‰å›¾ç‰‡æ²¡æœ‰ä¸Šä¼ å®Œæˆï¼'</span>)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// é€šè¿‡åˆå¹¶ å¾—åˆ°ä¸€ä¸ªæ–°å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">await</span> saveUserDetailById({ ...this.userInfo, <span class="attr">staffPhoto</span>: fileList &amp;&amp; fileList.length ? fileList[<span class="number">0</span>].url : <span class="string">''</span> })</span><br><span class="line">    <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜åŸºæœ¬ä¿¡æ¯æˆåŠŸ'</span>)</span><br><span class="line">  },</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢ä»£ç ä¸­ï¼Œuploadå¦‚æœä¸ºtrueï¼Œè¡¨ç¤ºè¯¥å›¾ç‰‡å·²ç»å®Œæˆä¸Šä¼ ï¼Œä»¥æ­¤æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦å·²ç»ä¸Šä¼ å®Œæˆ</p>
</blockquote>
<p><strong>ä¿å­˜æ—¶è¯»å–å¤´åƒ</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">savePersonal</span>(<span class="params"></span>)</span> {</span><br><span class="line">   <span class="keyword">const</span> fileList = <span class="built_in">this</span>.$refs.myStaffPhoto.fileList</span><br><span class="line">   <span class="keyword">if</span> (fileList.some(<span class="function"><span class="params">item</span> =&gt;</span> !item.upload)) {</span><br><span class="line">     <span class="comment">//  å¦‚æœæ­¤æ—¶å»æ‰¾ uploadä¸ºfalseçš„å›¾ç‰‡ æ‰¾åˆ°äº†è¯´æ˜ æœ‰å›¾ç‰‡è¿˜æ²¡æœ‰ä¸Šä¼ å®Œæˆ</span></span><br><span class="line">     <span class="built_in">this</span>.$message.warning(<span class="string">'æ‚¨å½“å‰è¿˜æœ‰å›¾ç‰‡æ²¡æœ‰ä¸Šä¼ å®Œæˆï¼'</span>)</span><br><span class="line">     <span class="keyword">return</span></span><br><span class="line">   }</span><br><span class="line">   <span class="keyword">await</span> updatePersonal({ ...this.formData, <span class="attr">staffPhoto</span>: fileList &amp;&amp; fileList.length ? fileList[<span class="number">0</span>].url : <span class="string">''</span> })</span><br><span class="line">   <span class="built_in">this</span>.$message.success(<span class="string">'ä¿å­˜åŸºç¡€ä¿¡æ¯æˆåŠŸ'</span>)</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> ï¼š åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶</p>
<h2 id="å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡"><a href="#å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡" class="headerlink" title="å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡"></a>å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡</h2><p>**<code>ç›®æ ‡</code>**ï¼šåœ¨å‘˜å·¥åˆ—è¡¨ä¸­å¿ƒæ˜¾ç¤ºå›¾ç‰‡</p>
<blockquote>
<p>å‘˜å·¥çš„å¤´åƒå¯ä»¥åœ¨åˆ—è¡¨é¡¹ä¸­æ·»åŠ ä¸€åˆ—æ¥è¿›è¡Œæ˜¾ç¤º</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column label="å¤´åƒ" align="center"&gt;</span><br><span class="line">            &lt;template slot-scope="{row}"&gt;</span><br><span class="line">              &lt;img</span><br><span class="line">                slot="reference"</span><br><span class="line">                v-imageerror="require('@/assets/common/bigUserHeader.png')"</span><br><span class="line">                :src="row.staffPhoto "</span><br><span class="line">                style="border-radius: 50%; width: 100px; height: 100px; padding: 10px"</span><br><span class="line">                alt=""</span><br><span class="line">              &gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æˆ‘ä»¬å°è¯•ç”¨ä¹‹å‰çš„æŒ‡ä»¤æ¥å¤„ç†å›¾ç‰‡çš„å¼‚å¸¸é—®é¢˜ï¼Œä½†æ˜¯å‘ç°åªæœ‰ä¸¤ä¸‰å¼ å›¾ç‰‡èƒ½æ˜¾ç¤º</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201028172654637.png" alt="image-20201028172654637"></p>
<blockquote>
<p>è¿™æ˜¯å› ä¸ºæœ‰çš„å‘˜å·¥çš„å¤´åƒçš„åœ°å€ä¸ºç©ºï¼Œç»™imgèµ‹å€¼ç©ºçš„srcä¸èƒ½è§¦å‘é”™è¯¯äº‹ä»¶ï¼Œé’ˆå¯¹è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æŒ‡ä»¤è¿›è¡Œå‡çº§</p>
</blockquote>
<p>æ’å…¥èŠ‚ç‚¹çš„é’©å­é‡Œé¢åˆ¤æ–­ç©ºï¼Œ ç„¶ååœ¨ç»„ä»¶æ›´æ–°ä¹‹åçš„é’©å­ä¸­åŒæ ·åˆ¤æ–­ç©º</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> imageerror = {</span><br><span class="line">  <span class="function"><span class="title">inserted</span>(<span class="params">dom, options</span>)</span> {</span><br><span class="line">    <span class="comment">//   å›¾ç‰‡å¼‚å¸¸çš„é€»è¾‘</span></span><br><span class="line">    <span class="comment">//  ç›‘å¬imgæ ‡ç­¾çš„é”™è¯¯äº‹ä»¶  å› ä¸ºå›¾ç‰‡åŠ è½½å¤±è´¥ ä¼šè§¦å‘  onerroräº‹ä»¶</span></span><br><span class="line">    dom.src = dom.src || options.value</span><br><span class="line"></span><br><span class="line">    dom.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">      <span class="comment">// å›¾ç‰‡å¤±è´¥  èµ‹å€¼ä¸€ä¸ªé»˜è®¤çš„å›¾ç‰‡</span></span><br><span class="line">      dom.src = options.value</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">componentUpdated</span>(<span class="params">dom, options</span>)</span> {</span><br><span class="line">    dom.src = dom.src || options.value</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>è¿™æ ·æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªç”¨æˆ·çš„å¤´åƒäº†ï¼Œå¦‚æœæ²¡æœ‰å¤´åƒåˆ™æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201028173333103.png" alt="image-20201028173333103"></p>
<p>**<code>ä»»åŠ¡</code>**ï¼šå‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡</p>
<h2 id="å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç "><a href="#å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç " class="headerlink" title="å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç "></a>å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç </h2><p><strong><code>ç›®æ ‡</code></strong> å°†å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç æ˜¾ç¤º</p>
<blockquote>
<p>æˆ‘ä»¬æƒ³å®Œæˆè¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œå½“æˆ‘ä»¬æ‹¥æœ‰å¤´åƒåœ°å€æ—¶ï¼Œå°†å¤´åƒåœ°å€ç”Ÿæˆä¸€ä¸ªäºŒç»´ç ï¼Œç”¨æ‰‹æœºæ‰«ç æ¥è®¿é—®</p>
</blockquote>
<p>é¦–å…ˆï¼Œéœ€è¦å®‰è£…ç”ŸæˆäºŒç»´ç çš„æ’ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i qrcode</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>qrcodeçš„ç”¨æ³•æ˜¯</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QrCode.toCanvas(dom, info)</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>domä¸ºä¸€ä¸ªcanvasçš„domå¯¹è±¡ï¼Œ infoä¸ºè½¬åŒ–äºŒç»´ç çš„ä¿¡æ¯</p>
</blockquote>
<p>æˆ‘ä»¬å°è¯•å°†canvasæ ‡ç­¾æ”¾åˆ°dialogçš„å¼¹å±‚ä¸­</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title="äºŒç»´ç " :visible.sync="showCodeDialog" @opened="showQrCode" @close="imgUrl=''"&gt;</span><br><span class="line">  &lt;el-row type="flex" justify="center"&gt;</span><br><span class="line">    &lt;canvas ref="myCanvas" /&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ç‚¹å‡»å‘˜å·¥çš„å›¾ç‰‡æ—¶ï¼Œæ˜¾ç¤ºå¼¹å±‚ï¼Œå¹¶å°†å›¾ç‰‡åœ°å€è½¬åŒ–æˆäºŒç»´ç </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">showQrCode</span>(<span class="params">url</span>)</span> {</span><br><span class="line">  <span class="comment">// urlå­˜åœ¨çš„æƒ…å†µä¸‹ æ‰å¼¹å‡ºå±‚</span></span><br><span class="line">  <span class="keyword">if</span> (url) {</span><br><span class="line">    <span class="built_in">this</span>.showCodeDialog = <span class="literal">true</span> <span class="comment">// æ•°æ®æ›´æ–°äº† ä½†æ˜¯æˆ‘çš„å¼¹å±‚ä¼šç«‹åˆ»å‡ºç°å— ï¼Ÿé¡µé¢çš„æ¸²æŸ“æ˜¯å¼‚æ­¥çš„ï¼ï¼ï¼ï¼</span></span><br><span class="line">    <span class="comment">// æœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥åœ¨ä¸Šä¸€æ¬¡æ•°æ®æ›´æ–°å®Œæ¯•ï¼Œé¡µé¢æ¸²æŸ“å®Œæ¯•ä¹‹å</span></span><br><span class="line">    <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> {</span><br><span class="line">      <span class="comment">// æ­¤æ—¶å¯ä»¥ç¡®è®¤å·²ç»æœ‰refå¯¹è±¡äº†</span></span><br><span class="line">      QrCode.toCanvas(<span class="built_in">this</span>.$refs.myCanvas, url) <span class="comment">// å°†åœ°å€è½¬åŒ–æˆäºŒç»´ç </span></span><br><span class="line">      <span class="comment">// å¦‚æœè½¬åŒ–çš„äºŒç»´ç åé¢ä¿¡æ¯ æ˜¯ä¸€ä¸ªåœ°å€çš„è¯ å°±ä¼šè·³è½¬åˆ°è¯¥åœ°å€ å¦‚æœä¸æ˜¯åœ°å€å°±ä¼šæ˜¾ç¤ºå†…å®¹</span></span><br><span class="line">    })</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="built_in">this</span>.$message.warning(<span class="string">'è¯¥ç”¨æˆ·è¿˜æœªä¸Šä¼ å¤´åƒ'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201028180651472.png" alt="image-20201028180651472"></p>
<h2 id="æ‰“å°å‘˜å·¥ä¿¡æ¯"><a href="#æ‰“å°å‘˜å·¥ä¿¡æ¯" class="headerlink" title="æ‰“å°å‘˜å·¥ä¿¡æ¯"></a>æ‰“å°å‘˜å·¥ä¿¡æ¯</h2><p><strong><code>ç›®æ ‡</code></strong> å®Œæˆä¸ªäººä¿¡æ¯å’Œå·¥ä½œä¿¡æ¯çš„æ‰“å°åŠŸèƒ½</p>
<h3 id="æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±"><a href="#æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±" class="headerlink" title="æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±"></a>æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±</h3><p><strong>åˆ›å»ºé¡µé¢ç»„ä»¶</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container" id="myPrint"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;el-card&gt;</span><br><span class="line">        &lt;el-breadcrumb separator="/" class="titInfo "&gt;</span><br><span class="line">          &lt;el-breadcrumb-item :to="{ path: '/' }"&gt;é¦–é¡µ&lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;</span><br><span class="line">            &lt;router-link :to="{'path':'/employees'}"&gt;å‘˜å·¥ç®¡ç†&lt;/router-link&gt;</span><br><span class="line">          &lt;/el-breadcrumb-item&gt;</span><br><span class="line">          &lt;el-breadcrumb-item&gt;æ‰“å°&lt;/el-breadcrumb-item&gt;</span><br><span class="line">        &lt;/el-breadcrumb&gt;</span><br><span class="line">        &lt;div v-if="type === 'personal'"&gt;</span><br><span class="line">          &lt;h2 class="centInfo"&gt;å‘˜å·¥ä¿¡æ¯è¡¨&lt;/h2&gt;</span><br><span class="line">          &lt;table cellspacing="0" width="100%" class="tableList"&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;åŸºæœ¬ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;å§“å&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6" style="width:80%"&gt;{{ formData.username }}&lt;/td&gt;</span><br><span class="line">              &lt;td rowspan="5" style="width:10%"&gt;&lt;img style="width:155px;height:218px" :src="formData.staffPhoto"&gt;&lt;/td&gt;</span><br><span class="line"></span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æ€§åˆ«&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6"&gt;{{ formData.sex }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æ‰‹æœº&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6"&gt;{{ formData.mobile }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å‡ºç”Ÿæ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6"&gt;{{ formData.dateOfBirth | formatDate }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æœ€é«˜å­¦å†&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="6"&gt;{{ formData.theHighestDegreeOfEducation }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;æ˜¯å¦å¯ç¼–è¾‘&lt;/th&gt;</span><br><span class="line">              &lt;td style="width:35%"&gt;{{ formData.isItEditable }}&lt;/td&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;æ˜¯å¦éšè—å·ç &lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5" style="width:45%"&gt;{{ formData.doYouHideNumbers }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å›½å®¶åœ°åŒº&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.nationalArea }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æŠ¤ç…§å·&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.passportNo }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;èº«ä»½è¯å·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.idNumber }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;èº«ä»½è¯ç…§ç‰‡&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.iDCardPhoto }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç±è´¯&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.nativePlace }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ°‘æ—&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.nation }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;è‹±æ–‡å&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.englishName }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å©šå§»çŠ¶å†µ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.maritalStatus }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å‘˜å·¥ç…§ç‰‡&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.staffPhoto }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;ç”Ÿæ—¥&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.birthday }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å±ç›¸&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.zodiac }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.age }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æ˜Ÿåº§&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.constellation }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è¡€å‹&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.bloodType }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æˆ·ç±æ‰€åœ¨åœ°&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.domicile }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ”¿æ²»é¢è²Œ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.politicalOutlook }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å…¥å…šæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.timeToJoinTheParty }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å­˜æ¡£æœºæ„&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.archivingOrganization }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å­å¥³çŠ¶æ€&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.stateOfChildren }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å­å¥³æœ‰æ— å•†ä¸šä¿é™©&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.doChildrenHaveCommercialInsurance }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;æœ‰æ— è¿æ³•è¿çºªè¡Œä¸º&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.isThereAnyViolationOfLawOrDiscipline }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æœ‰æ— é‡å¤§ç—…å²&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.areThereAnyMajorMedicalHistories }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;é€šè®¯ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;QQ&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.qQ }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å¾®ä¿¡&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.weChat }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å±…ä½è¯åŸå¸‚&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.residenceCardCity }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å±…ä½è¯åŠç†æ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.dateOfResidencePermit }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å±…ä½è¯æˆªæ­¢æ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.residencePermitDeadline }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;ç°å±…ä½åœ°&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.placeOfResidence }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;é€šè®¯åœ°å€&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.postalAddress }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è”ç³»æ‰‹æœº&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.contactTheMobilePhone }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ä¸ªäººé‚®ç®±&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.personalMailbox }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;ç´§æ€¥è”ç³»äºº&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.emergencyContact }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç´§æ€¥è”ç³»ç”µè¯&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="7"&gt;{{ formData.emergencyContactNumber }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;è´¦å·ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç¤¾ä¿ç”µè„‘å·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.socialSecurityComputerNumber }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å…¬ç§¯é‡‘è´¦å·&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.providentFundAccount }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;é“¶è¡Œå¡å·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.bankCardNumber }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å¼€æˆ·è¡Œ&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.openingBank }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;æ•™è‚²ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å­¦å†ç±»å‹&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.educationalType }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ¯•ä¸šå­¦æ ¡&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.graduateSchool }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å…¥å­¦æ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.enrolmentTime }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ¯•ä¸šæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.graduationTime }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ä¸“ä¸š&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.major }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ¯•ä¸šè¯ä¹¦&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.graduationCertificate }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å­¦ä½è¯ä¹¦&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="7"&gt;{{ formData.certificateOfAcademicDegree }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="8" class="centInfo"&gt;ä»ä¸šä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ä¸Šå®¶å…¬å¸&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.homeCompany }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;èŒç§°&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.title }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç®€å†&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.resume }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æœ‰æ— ç«ä¸šé™åˆ¶&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.isThereAnyCompetitionRestriction }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å‰å…¬å¸ç¦»èŒè¯æ˜&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.proofOfDepartureOfFormerCompany }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å¤‡æ³¨&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="5"&gt;{{ formData.remarks }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/table&gt;</span><br><span class="line">          &lt;div class="foot"&gt;ç­¾å­—ï¼š___________æ—¥æœŸ:___________&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div v-else&gt;</span><br><span class="line">          &lt;h2 class="centInfo"&gt;å²—ä½ä¿¡æ¯è¡¨&lt;/h2&gt;</span><br><span class="line">          &lt;table cellspacing="0" width="100%" class="tableList"&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="4" class="centInfo"&gt;åŸºæœ¬ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;å§“å&lt;/th&gt;</span><br><span class="line">              &lt;td style="width:40%"&gt;{{ formData.username }}&lt;/td&gt;</span><br><span class="line">              &lt;th style="width:10%"&gt;å…¥èŒæ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td style="width:40%"&gt;{{ formData.dateOfEntry }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;éƒ¨é—¨&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.departmentName }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å²—ä½&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.post }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å·¥ä½œé‚®ç®±&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.workMailbox }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å·¥å·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.workNumber }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;è½¬æ­£æ—¥æœŸ&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.dateOfCorrection }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è½¬æ­£çŠ¶æ€&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.stateOfCorrection }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;èŒçº§&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.rank }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ±‡æŠ¥å¯¹è±¡&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.reportName }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;HRBP&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.hRBP }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è˜ç”¨å½¢å¼&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.formOfEmployment }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç®¡ç†å½¢å¼&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.formOfManagement }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è°ƒæ•´å¸é¾„&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.adjustmentAgedays }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å¸é¾„&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.ageOfDivision }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;é¦–æ¬¡å‚åŠ å·¥ä½œæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.workingTimeForTheFirstTime }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;è°ƒæ•´å·¥é¾„å¤©&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.adjustmentOfLengthOfService }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;å·¥é¾„&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.workingYears }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;çº³ç¨åŸå¸‚&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.taxableCity }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;è½¬æ­£è¯„ä»·&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.correctionEvaluation }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="4" class="centInfo"&gt;åˆåŒä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;é¦–æ¬¡åˆåŒå¼€å§‹æ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.initialContractStartTime }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;é¦–æ¬¡åˆåŒç»“æŸæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.firstContractTerminationTime }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç°åˆåŒå¼€å§‹æ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.currentContractStartTime }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;ç°åˆåŒç»“æŸæ—¶é—´&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.closingTimeOfCurrentContract }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;åˆåŒæœŸé™&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.contractPeriod }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;åˆåŒæ–‡ä»¶&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.contractDocuments }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç»­ç­¾æ¬¡æ•°&lt;/th&gt;</span><br><span class="line">              &lt;td colspan="3"&gt;{{ formData.renewalNumber }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr class="title"&gt;</span><br><span class="line">              &lt;td colspan="4" class="centInfo"&gt;æ‹›è˜ä¿¡æ¯&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;å…¶ä»–æ‹›è˜æ¸ é“&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.otherRecruitmentChannels }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ‹›è˜æ¸ é“&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.recruitmentChannels }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">              &lt;th&gt;ç¤¾æ‹›æ ¡æ‹›&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.socialRecruitment }}&lt;/td&gt;</span><br><span class="line">              &lt;th&gt;æ¨èä¼ä¸šäºº&lt;/th&gt;</span><br><span class="line">              &lt;td&gt;{{ formData.recommenderBusinessPeople }}&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">          &lt;/table&gt;</span><br><span class="line">          &lt;div class="foot"&gt;ç­¾å­—ï¼š___________æ—¥æœŸ:___________&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/el-card&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { getPersonalDetail, getJobDetail } from '@/api/employees'</span><br><span class="line">import { getUserDetailById } from '@/api/user'</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      formData: {},</span><br><span class="line">      userId: this.$route.params.id,</span><br><span class="line">      type: this.$route.query.type // æ‰“å°ç±»å‹</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  // åˆ›å»ºå®Œæ¯•çŠ¶æ€</span><br><span class="line">  created() {</span><br><span class="line">    this.type === 'personal' ? this.getPersonalDetail() : this.getJobDetail()</span><br><span class="line">  },</span><br><span class="line">  // ç»„ä»¶æ›´æ–°</span><br><span class="line">  methods: {</span><br><span class="line">    async getPersonalDetail() {</span><br><span class="line">      this.formData = await getPersonalDetail(this.userId) // è·å–ä¸ªäººåŸºæœ¬ä¿¡æ¯</span><br><span class="line">    },</span><br><span class="line">    async getJobDetail() {</span><br><span class="line">      const userInfo = await getUserDetailById(this.userId)</span><br><span class="line">      const jobInfo = await getJobDetail(this.userId) // è·å–ä¸ªäººåŸºæœ¬ä¿¡æ¯</span><br><span class="line">      this.formData = { ...userInfo, ...jobInfo }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="scss"&gt;</span><br><span class="line">.foot {</span><br><span class="line">  padding: 30px 0;</span><br><span class="line">  text-align: right;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>è¯¥é¡µé¢å†…å®¹å®é™…ä¸Šå°±æ˜¯è¯»å–ä¸ªäººå’Œè¯¦æƒ…çš„æ¥å£æ•°æ®ï¼Œæ ¹æ®ä¼ å…¥çš„typeç±»å‹å†³å®šæ˜¾ç¤ºä¸ªäººè¿˜æ˜¯å²—ä½</p>
</blockquote>
<p>typeä¸º**<code>personal</code><strong>æ—¶æ˜¾ç¤ºä¸ªäººï¼Œä¸º</strong><code>job</code>**æ—¶æ˜¾ç¤ºå²—ä½</p>
<p><strong>æ–°å»ºæ‰“å°é¡µé¢è·¯ç”±</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">    <span class="attr">path</span>: <span class="string">'print/:id'</span>, <span class="comment">// äºŒçº§é»˜è®¤è·¯ç”±</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/employees/print'</span>), <span class="comment">// æŒ‰éœ€åŠ è½½</span></span><br><span class="line">    <span class="attr">hidden</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">meta</span>: {</span><br><span class="line">      <span class="attr">title</span>: <span class="string">'æ‰“å°'</span>, <span class="comment">// æ ‡è®°å½“å‰è·¯ç”±è§„åˆ™çš„ä¸­æ–‡åç§° åç»­åœ¨åšå·¦ä¾§èœå•æ—¶ ä½¿ç”¨</span></span><br><span class="line">      <span class="attr">icon</span>: <span class="string">'people'</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p>å®Œæˆè¯¦æƒ…åˆ°æ‰“å°çš„è·³è½¬</p>
<p><strong>ä¸ªäºº</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">           &lt;el-tooltip content="æ‰“å°ä¸ªäººåŸºæœ¬ä¿¡æ¯"&gt;</span><br><span class="line">               &lt;router-link :to="`/employees/print/${userId}?type=personal`"&gt;</span><br><span class="line">                 &lt;i class="el-icon-printer" /&gt;</span><br><span class="line">               &lt;/router-link&gt;</span><br><span class="line">            &lt;/el-tooltip&gt;</span><br><span class="line"> &lt;/el-row&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å²—ä½</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">            &lt;el-tooltip content="æ‰“å°å²—ä½ä¿¡æ¯"&gt;</span><br><span class="line">              &lt;router-link :to="`/employees/print/${userId}?type=job`"&gt;</span><br><span class="line">                &lt;i class="el-icon-printer"  /&gt;</span><br><span class="line">              &lt;/router-link&gt;</span><br><span class="line">            &lt;/el-tooltip&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°"><a href="#åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°" class="headerlink" title="åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°"></a>åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°</h3><p>é¦–å…ˆï¼Œæ‰“å°åŠŸèƒ½æˆ‘ä»¬å€ŸåŠ©ä¸€ä¸ªæ¯”è¾ƒæµè¡Œçš„æ’ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i vue-print-nb</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å®ƒçš„ç”¨æ³•æ˜¯ </p>
</blockquote>
<p>é¦–å…ˆæ³¨å†Œè¯¥æ’ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Print <span class="keyword">from</span> <span class="string">'vue-print-nb'</span></span><br><span class="line">Vue.use(Print);</span><br></pre></td></tr></tbody></table></figure>

<p>ä½¿ç”¨v-printæŒ‡ä»¤çš„æ–¹å¼è¿›è¡Œæ‰“å°</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">        &lt;el-button v-print="printObj" size="small" type="primary"&gt;æ‰“å°&lt;/el-button&gt;</span><br><span class="line"> &lt;/el-row&gt;</span><br><span class="line"> printObj: {</span><br><span class="line">      id: 'myPrint'</span><br><span class="line"> }</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ•ˆæœ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200728013006535.png" alt="image-20200728013006535"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<h1 id="8-æƒé™è®¾è®¡å’Œç®¡ç†"><a href="#8-æƒé™è®¾è®¡å’Œç®¡ç†" class="headerlink" title="8.æƒé™è®¾è®¡å’Œç®¡ç†"></a>8.æƒé™è®¾è®¡å’Œç®¡ç†</h1><h2 id="æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³"><a href="#æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³" class="headerlink" title="æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³"></a>æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³</h2><blockquote>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸‹ä»€ä¹ˆæ˜¯ä¼ ç»Ÿçš„æƒé™è®¾è®¡</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901150655343.png" alt="image-20200901150655343"></p>
<p>ä»ä¸Šé¢çš„å›¾ä¸­ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä¼ ç»Ÿçš„æƒé™è®¾è®¡æ˜¯å¯¹æ¯ä¸ªäººè¿›è¡Œå•ç‹¬çš„æƒé™è®¾ç½®ï¼Œä½†è¿™ç§æ–¹å¼å·²ç»ä¸é€‚åˆç›®å‰ä¼ä¸šçš„é«˜æ•ˆç®¡æ§æƒé™çš„å‘å±•éœ€æ±‚ï¼Œå› ä¸ºæ¯ä¸ªäººéƒ½è¦å•ç‹¬å»è®¾ç½®æƒé™</p>
<blockquote>
<p>  åŸºäºæ­¤ï¼ŒRBACçš„æƒé™æ¨¡å‹å°±åº”è¿è€Œç”Ÿäº†ï¼ŒRBAC(Role-Based Access control) ï¼Œä¹Ÿå°±æ˜¯åŸºäºè§’è‰²çš„æƒé™åˆ†é…è§£å†³æ–¹æ¡ˆï¼Œç›¸å¯¹äºä¼ ç»Ÿæ–¹æ¡ˆï¼ŒRBACæä¾›äº†ä¸­é—´å±‚Roleï¼ˆè§’è‰²ï¼‰ï¼Œå…¶æƒé™æ¨¡å¼å¦‚ä¸‹</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901151025021.png" alt="image-20200901151025021"></p>
<p>RBACå®ç°äº†ç”¨æˆ·å’Œæƒé™ç‚¹çš„åˆ†ç¦»ï¼Œæƒ³å¯¹æŸä¸ªç”¨æˆ·è®¾ç½®æƒé™ï¼Œåªéœ€è¦å¯¹è¯¥ç”¨æˆ·è®¾ç½®ç›¸åº”çš„è§’è‰²å³å¯ï¼Œè€Œè¯¥è§’è‰²å°±æ‹¥æœ‰äº†å¯¹åº”çš„æƒé™ï¼Œè¿™æ ·ä¸€æ¥ï¼Œæƒé™çš„åˆ†é…å’Œè®¾è®¡å°±åšåˆ°äº†æç®€ï¼Œé«˜æ•ˆï¼Œå½“æƒ³å¯¹ç”¨æˆ·æ”¶å›æƒé™æ—¶ï¼Œåªéœ€è¦æ”¶å›è§’è‰²å³å¯ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±åœ¨è¯¥é¡¹ç›®ä¸­å®æ–½è¿™ä¸€è®¾æƒ³</p>
<h2 id="ç»™åˆ†é…å‘˜å·¥è§’è‰²"><a href="#ç»™åˆ†é…å‘˜å·¥è§’è‰²" class="headerlink" title="ç»™åˆ†é…å‘˜å·¥è§’è‰²"></a>ç»™åˆ†é…å‘˜å·¥è§’è‰²</h2><p>**<code>ç›®æ ‡</code>**åœ¨å‘˜å·¥ç®¡ç†é¡µé¢ï¼Œåˆ†é…è§’è‰²</p>
<h3 id="æ–°å»ºåˆ†é…è§’è‰²çª—ä½“"><a href="#æ–°å»ºåˆ†é…è§’è‰²çª—ä½“" class="headerlink" title="æ–°å»ºåˆ†é…è§’è‰²çª—ä½“"></a>æ–°å»ºåˆ†é…è§’è‰²çª—ä½“</h3><blockquote>
<p>åœ¨ä¸Šä¸€èŠ‚ç« èŠ‚ä¸­ï¼Œå‘˜å·¥ç®¡ç†çš„è§’è‰²åŠŸèƒ½ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å®ç°ï¼Œæ­¤ç« èŠ‚æˆ‘ä»¬å®ç°ç»™å‘˜å·¥åˆ†é…è§’è‰²</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901151151286.png" alt="image-20200901151151286"></p>
<p>ä»ä¸Šå›¾ä¸­ï¼Œå¯ä»¥çœ‹å‡ºï¼Œç”¨æˆ·å’Œè§’è‰²æ˜¯**<code>1å¯¹å¤š</code>**çš„å…³ç³»ï¼Œå³ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ‹¥æœ‰å¤šä¸ªè§’è‰²ï¼Œæ¯”å¦‚å…¬å¸çš„è‘£äº‹é•¿å¯ä»¥æ‹¥æœ‰æ€»ç»ç†å’Œç³»ç»Ÿç®¡ç†å‘˜ä¸€æ ·çš„è§’è‰²</p>
<p>é¦–å…ˆï¼Œæ–°å»ºåˆ†é…è§’è‰²çª—ä½“ <strong><code>assign-role.vue</code></strong>   </p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200728172853451.png" alt="image-20200728172853451"></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dialog title="åˆ†é…è§’è‰²" :visible="showRoleDialog"&gt;</span><br><span class="line">    &lt;!-- el-checkbox-groupé€‰ä¸­çš„æ˜¯ å½“å‰ç”¨æˆ·æ‰€æ‹¥æœ‰çš„è§’è‰²  éœ€è¦ç»‘å®š å½“å‰ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²--&gt;</span><br><span class="line">    &lt;el-checkbox-group&gt;</span><br><span class="line">      &lt;!-- é€‰é¡¹ --&gt;</span><br><span class="line">    &lt;/el-checkbox-group&gt;</span><br><span class="line">    &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">      &lt;el-col :span="6"&gt;</span><br><span class="line">        &lt;el-button type="primary" size="small"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size="small"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    showRoleDialog: {</span><br><span class="line">      type: Boolean,</span><br><span class="line">      default: false</span><br><span class="line">    },</span><br><span class="line">    // ç”¨æˆ·çš„id ç”¨æ¥æŸ¥è¯¢å½“å‰ç”¨æˆ·çš„è§’è‰²ä¿¡æ¯</span><br><span class="line">    userId: {</span><br><span class="line">      type: String,</span><br><span class="line">      default: null</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²"><a href="#è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²" class="headerlink" title="è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²"></a>è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²</h3><p><strong>è·å–æ‰€æœ‰è§’è‰²åˆ—è¡¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- åˆ†é…è§’è‰² --&gt;</span><br><span class="line">  &lt;el-checkbox-group v-model="roleIds"&gt;</span><br><span class="line">    &lt;el-checkbox v-for="item in list" :key="item.id" :label="item.id"&gt;</span><br><span class="line">      {{</span><br><span class="line">        item.name</span><br><span class="line">      }}</span><br><span class="line">    &lt;/el-checkbox&gt;</span><br><span class="line">  &lt;/el-checkbox-group&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>è·å–è§’è‰²åˆ—è¡¨</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getRoleList } <span class="keyword">from</span> <span class="string">'@/api/setting'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">props</span>: {</span><br><span class="line">    <span class="attr">showRoleDialog</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">userId</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="literal">null</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">list</span>: [], <span class="comment">// è§’è‰²åˆ—è¡¨</span></span><br><span class="line">      <span class="attr">roleIds</span>: []</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="built_in">this</span>.getRoleList()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="comment">//  è·å–æ‰€æœ‰è§’è‰²</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getRoleList</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> { rows } = <span class="keyword">await</span> getRoleList()</span><br><span class="line">      <span class="built_in">this</span>.list = rows</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>è·å–ç”¨æˆ·çš„å½“å‰è§’è‰²</strong>  </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getUserDetailById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">async</span> <span class="function"><span class="title">getUserDetailById</span>(<span class="params">id</span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> { roleIds } = <span class="keyword">await</span> getUserDetailById(id)</span><br><span class="line">      <span class="built_in">this</span>.roleIds = roleIds <span class="comment">// èµ‹å€¼æœ¬ç”¨æˆ·çš„è§’è‰²</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç‚¹å‡»è§’è‰²å¼¹å‡ºå±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// ç¼–è¾‘è§’è‰²</span><br><span class="line"> async  editRole(id) {</span><br><span class="line">      this.userId = id // propsä¼ å€¼ æ˜¯å¼‚æ­¥çš„</span><br><span class="line">      await this.$refs.assignRole.getUserDetailById(id) // çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•</span><br><span class="line">      this.showRoleDialog = true</span><br><span class="line">    },</span><br><span class="line">  &lt;!-- æ”¾ç½®è§’è‰²åˆ†é…ç»„ä»¶ --&gt;</span><br><span class="line"> &lt;assign-role ref="assignRole" :show-role-dialog.sync="showRoleDialog" :user-id="userId" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç»™å‘˜å·¥åˆ†é…è§’è‰²"><a href="#ç»™å‘˜å·¥åˆ†é…è§’è‰²" class="headerlink" title="ç»™å‘˜å·¥åˆ†é…è§’è‰²"></a>ç»™å‘˜å·¥åˆ†é…è§’è‰²</h3><p><strong>åˆ†é…è§’è‰²æ¥å£</strong>  <strong><code>api/employees.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** *</span></span><br><span class="line"><span class="comment"> * ç»™ç”¨æˆ·åˆ†é…è§’è‰²</span></span><br><span class="line"><span class="comment"> * ***/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">assignRoles</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/user/assignRoles'</span>,</span><br><span class="line">    data,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¡®å®šä¿å­˜</strong>  <strong><code>assign-role</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">await</span> assignRoles({ <span class="attr">id</span>: <span class="built_in">this</span>.userId, <span class="attr">roleIds</span>: <span class="built_in">this</span>.roleIds })</span><br><span class="line">      <span class="comment">//   å…³é—­çª—ä½“</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'update:showRoleDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">    },</span><br></pre></td></tr></tbody></table></figure>

<p>**å–æ¶ˆæˆ–è€…å…³é—­ **  <strong><code>assign-role</code></strong> </p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.roleIds = [] <span class="comment">// æ¸…ç©ºåŸæ¥çš„æ•°ç»„</span></span><br><span class="line">      <span class="built_in">this</span>.$emit(<span class="string">'update:showRoleDialog'</span>, <span class="literal">false</span>)</span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> åˆ†é…å‘˜å·¥æƒé™</p>
<h2 id="æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘"><a href="#æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘" class="headerlink" title="æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘"></a>æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®Œæˆæƒé™ç‚¹é¡µé¢çš„å¼€å‘å’Œç®¡ç†</p>
<h3 id="æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢"><a href="#æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢" class="headerlink" title="æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢"></a>æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢</h3><blockquote>
<p>äººå·²ç»æœ‰äº†è§’è‰²ï¼Œ é‚£ä¹ˆæƒé™æ˜¯ä»€ä¹ˆ</p>
</blockquote>
<p>åœ¨ä¼ä¸šæœåŠ¡ä¸­ï¼Œæƒé™ä¸€èˆ¬åˆ†å‰²ä¸º <strong>é¡µé¢è®¿é—®æƒé™</strong>ï¼Œ<strong>æŒ‰é’®æ“ä½œæƒé™</strong>ï¼Œ<strong>APIè®¿é—®æƒé™</strong></p>
<blockquote>
<p>APIæƒé™å¤šè§äºåœ¨åç«¯è¿›è¡Œæ‹¦æˆªï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™ä¸€ç‰ˆæœ¬åªåš**<code>é¡µé¢è®¿é—®</code><strong>å’Œ</strong><code>æŒ‰é’®æ“ä½œæˆæƒ</code>/**</p>
</blockquote>
<p>ç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾è®¡æƒé™ç®¡ç†é¡µé¢</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901160508382.png" alt="image-20200901160508382"></p>
<p><strong>å®Œæˆæƒé™é¡µé¢ç»“æ„</strong> <strong><code>src/views/permission/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;div class="app-container"&gt;</span><br><span class="line">      &lt;!-- é å³çš„æŒ‰é’® --&gt;</span><br><span class="line">      &lt;page-tools&gt;</span><br><span class="line">        &lt;template v-slot:after&gt;</span><br><span class="line">          &lt;el-button type="primary" size="small"&gt;æ·»åŠ æƒé™&lt;/el-button&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/page-tools&gt;</span><br><span class="line">      &lt;!-- è¡¨æ ¼ --&gt;</span><br><span class="line">      &lt;el-table border&gt;</span><br><span class="line">        &lt;el-table-column align="center" label="åç§°" /&gt;</span><br><span class="line">        &lt;el-table-column align="center" label="æ ‡è¯†" /&gt;</span><br><span class="line">        &lt;el-table-column align="center" label="æè¿°" /&gt;</span><br><span class="line">        &lt;el-table-column align="center" label="æ“ä½œ"&gt;</span><br><span class="line">          &lt;template&gt;</span><br><span class="line">            &lt;el-button type="text"&gt;æ·»åŠ &lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type="text"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type="text"&gt;åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å°è£…æƒé™ç®¡ç†çš„å¢åˆ æ”¹æŸ¥è¯·æ±‚</strong>  <strong><code>src/api/permisson.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getPermissionList</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/permission'</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"><span class="comment">// æ–°å¢æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addPermission</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/permission'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'post'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updatePermission</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">${data.id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">delPermission</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">${id}</span>`</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'delete'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"><span class="comment">// è·å–æƒé™è¯¦æƒ…</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getPermissionDetail</span>(<span class="params">id</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/sys/permission/<span class="subst">${id}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢"><a href="#è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢" class="headerlink" title="è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢"></a>è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢</h3><p>è¿™é‡Œï¼Œæˆ‘ä»¬é€šè¿‡æ ‘å½¢æ“ä½œæ–¹æ³•ï¼Œå°†åˆ—è¡¨è½¬åŒ–æˆå±‚çº§æ•°æ®</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import { getPermissionList } from '@/api/permission'</span><br><span class="line">import { transListToTreeData } from '@/utils'</span><br><span class="line">export default {</span><br><span class="line">data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [],</span><br><span class="line">      formData: {</span><br><span class="line">        name: '', // åç§°</span><br><span class="line">        code: '', // æ ‡è¯†</span><br><span class="line">        description: '', // æè¿°</span><br><span class="line">        type: '', // ç±»å‹ è¯¥ç±»å‹ ä¸éœ€è¦æ˜¾ç¤º å› ä¸ºç‚¹å‡»æ·»åŠ çš„æ—¶å€™å·²ç»çŸ¥é“ç±»å‹äº†</span><br><span class="line">        pid: '', // å› ä¸ºåšçš„æ˜¯æ ‘ éœ€è¦çŸ¥é“æ·»åŠ åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸‹äº†</span><br><span class="line">        enVisible: '0' // å¼€å¯</span><br><span class="line">      },</span><br><span class="line">      rules: {</span><br><span class="line">        name: [{ required: true, message: 'æƒé™åç§°ä¸èƒ½ä¸ºç©º', trigger: 'blur' }],</span><br><span class="line">        code: [{ required: true, message: 'æƒé™æ ‡è¯†ä¸èƒ½ä¸ºç©º', trigger: 'blur' }]</span><br><span class="line">      },</span><br><span class="line">      showDialog: false</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  created() {</span><br><span class="line">    this.getPermissionList()</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    showText() {</span><br><span class="line">      return this.formData.id ? 'ç¼–è¾‘' : 'æ–°å¢'</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    async  getPermissionList() {</span><br><span class="line">      this.list = transListToTreeData(await getPermissionList(), '0')</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç»‘å®šè¡¨æ ¼æ•°æ®</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table :data="list" border="" row-key="id"&gt;</span><br><span class="line">        &lt;el-table-column label="åç§°" prop="name" /&gt;</span><br><span class="line">        &lt;el-table-column label="æ ‡è¯†" prop="code" /&gt;</span><br><span class="line">        &lt;el-table-column label="æè¿°" prop="description" /&gt;</span><br><span class="line">        &lt;el-table-column label="æ“ä½œ"&gt;</span><br><span class="line">          &lt;template slot-scope="{ row }"&gt;</span><br><span class="line">            &lt;el-button v-if="row.type === 1" type="text" @click="addPermission(row.id, 2)"&gt;æ·»åŠ &lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type="text" @click="editPermission(row.id)"&gt;ç¼–è¾‘&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type="text" @click="delPermission(row.id)"&gt; åˆ é™¤&lt;/el-button&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ å¦‚æœéœ€è¦æ ‘è¡¨ï¼Œ éœ€è¦ç»™<strong>el-table</strong>é…ç½®<strong>row-key</strong>å±æ€§  id</p>
<blockquote>
<p>å½“typeä¸º1æ—¶ä¸ºè®¿é—®æƒé™ï¼Œtypeä¸º2æ—¶ä¸ºåŠŸèƒ½æƒé™</p>
</blockquote>
<blockquote>
<p>å’Œå‰é¢å†…å®¹ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆ æ–°å¢æƒé™ / åˆ é™¤æƒé™ / ç¼–è¾‘æƒé™</p>
</blockquote>
<h3 id="æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚"><a href="#æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚" class="headerlink" title="æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚"></a>æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚</h3><p><strong>æ–°å¢æƒé™/ç¼–è¾‘æƒé™å¼¹å±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®ä¸€ä¸ªå¼¹å±‚ ç”¨æ¥ç¼–è¾‘æ–°å¢èŠ‚ç‚¹ --&gt;</span><br><span class="line"> &lt;el-dialog :title="`${showText}æƒé™ç‚¹`" :visible="showDialog" @close="btnCancel"&gt;</span><br><span class="line">    &lt;!-- è¡¨å• --&gt;</span><br><span class="line">    &lt;el-form ref="perForm" :model="formData" :rules="rules" label-width="120px"&gt;</span><br><span class="line">      &lt;el-form-item label="æƒé™åç§°" prop="name"&gt;</span><br><span class="line">        &lt;el-input v-model="formData.name" style="width:90%" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="æƒé™æ ‡è¯†" prop="code"&gt;</span><br><span class="line">        &lt;el-input v-model="formData.code" style="width:90%" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="æƒé™æè¿°"&gt;</span><br><span class="line">        &lt;el-input v-model="formData.description" style="width:90%" /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">      &lt;el-form-item label="å¼€å¯"&gt;</span><br><span class="line">        &lt;el-switch</span><br><span class="line">          v-model="formData.enVisible"</span><br><span class="line">          active-value="1"</span><br><span class="line">          inactive-value="0"</span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/el-form-item&gt;</span><br><span class="line">    &lt;/el-form&gt;</span><br><span class="line">    &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">      &lt;el-col :span="6"&gt;</span><br><span class="line">        &lt;el-button size="small" type="primary" @click="btnOK"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button size="small" @click="btnCancel"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹"><a href="#æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹" class="headerlink" title="æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹"></a>æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹</h3><p><strong>æ–°å¢/åˆ é™¤/ç¼–è¾‘é€»è¾‘</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { updatePermission, addPermission, getPermissionDetail, delPermission, getPermissionList } <span class="keyword">from</span> <span class="string">'@/api/permission'</span></span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">     <span class="comment">// åˆ é™¤æ“ä½œ</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">delPermission</span>(<span class="params">id</span>)</span> {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">await</span> <span class="built_in">this</span>.$confirm(<span class="string">'ç¡®å®šè¦åˆ é™¤è¯¥æ•°æ®å—'</span>)</span><br><span class="line">        <span class="keyword">await</span> delPermission(id)</span><br><span class="line">        <span class="built_in">this</span>.getPermissionList()</span><br><span class="line">        <span class="built_in">this</span>.$message.success(<span class="string">'åˆ é™¤æˆåŠŸ'</span>)</span><br><span class="line">      } <span class="keyword">catch</span> (error) {</span><br><span class="line">        <span class="built_in">console</span>.log(error)</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.$refs.perForm.validate().then(<span class="function">() =&gt;</span> {</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) {</span><br><span class="line">          <span class="keyword">return</span> updatePermission(<span class="built_in">this</span>.formData)</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> addPermission(<span class="built_in">this</span>.formData)</span><br><span class="line">      }).then(<span class="function">() =&gt;</span> {</span><br><span class="line">        <span class="comment">//  æç¤ºæ¶ˆæ¯</span></span><br><span class="line">        <span class="built_in">this</span>.$message.success(<span class="string">'æ–°å¢æˆåŠŸ'</span>)</span><br><span class="line">        <span class="built_in">this</span>.getPermissionList()</span><br><span class="line">        <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.formData = {</span><br><span class="line">        <span class="attr">name</span>: <span class="string">''</span>, <span class="comment">// åç§°</span></span><br><span class="line">        <span class="attr">code</span>: <span class="string">''</span>, <span class="comment">// æ ‡è¯†</span></span><br><span class="line">        <span class="attr">description</span>: <span class="string">''</span>, <span class="comment">// æè¿°</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">''</span>, <span class="comment">// ç±»å‹ è¯¥ç±»å‹ ä¸éœ€è¦æ˜¾ç¤º å› ä¸ºç‚¹å‡»æ·»åŠ çš„æ—¶å€™å·²ç»çŸ¥é“ç±»å‹äº†</span></span><br><span class="line">        <span class="attr">pid</span>: <span class="string">''</span>, <span class="comment">// å› ä¸ºåšçš„æ˜¯æ ‘ éœ€è¦çŸ¥é“æ·»åŠ åˆ°å“ªä¸ªèŠ‚ç‚¹ä¸‹äº†</span></span><br><span class="line">        <span class="attr">enVisible</span>: <span class="string">'0'</span> <span class="comment">// å¼€å¯</span></span><br><span class="line">      }</span><br><span class="line">      <span class="built_in">this</span>.$refs.perForm.resetFields()</span><br><span class="line">      <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">addPermission</span>(<span class="params">pid, type</span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.formData.pid = pid</span><br><span class="line">      <span class="built_in">this</span>.formData.type = type</span><br><span class="line">      <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">editPermission</span>(<span class="params">id</span>)</span> {</span><br><span class="line">      <span class="comment">// æ ¹æ®è·å–idè·å–è¯¦æƒ…</span></span><br><span class="line">      <span class="built_in">this</span>.formData = <span class="keyword">await</span> getPermissionDetail(id)</span><br><span class="line">      <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"> </span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong>: æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘</p>
<h2 id="ç»™è§’è‰²åˆ†é…æƒé™"><a href="#ç»™è§’è‰²åˆ†é…æƒé™" class="headerlink" title="ç»™è§’è‰²åˆ†é…æƒé™"></a>ç»™è§’è‰²åˆ†é…æƒé™</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®Œæˆç»™è§’è‰²åˆ†é…æƒé™çš„ä¸šåŠ¡</p>
<h3 id="æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚"><a href="#æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚" class="headerlink" title="æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚"></a>æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚</h3><blockquote>
<p>åœ¨å…¬å¸è®¾ç½®çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰å®ç°åˆ†é…æƒé™çš„åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹</p>
</blockquote>
<p><strong>å°è£…åˆ†é…æƒé™çš„api</strong>  <strong><code>src/api/setting.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»™è§’è‰²åˆ†é…æƒé™</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">assignPerm</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/sys/role/assignPrem'</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'put'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
<p><strong>ç»™è§’è‰²åˆ†é…æƒé™å¼¹å‡ºå±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-dialog title="åˆ†é…æƒé™" :visible="showPermDialog" @close="btnPermCancel"&gt;</span><br><span class="line">      &lt;!-- æƒé™æ˜¯ä¸€é¢—æ ‘ --&gt;</span><br><span class="line">      &lt;!-- å°†æ•°æ®ç»‘å®šåˆ°ç»„ä»¶ä¸Š --&gt;</span><br><span class="line">      &lt;!-- check-strictly å¦‚æœä¸ºtrue é‚£è¡¨ç¤ºçˆ¶å­å‹¾é€‰æ—¶  ä¸äº’ç›¸å…³è” å¦‚æœä¸ºfalseå°±äº’ç›¸å…³è” --&gt;</span><br><span class="line">      &lt;!-- idä½œä¸ºå”¯ä¸€æ ‡è¯† --&gt;</span><br><span class="line">      &lt;el-tree</span><br><span class="line">        ref="permTree"</span><br><span class="line">        :data="permData"</span><br><span class="line">        :props="defaultProps"</span><br><span class="line">        :show-checkbox="true"</span><br><span class="line">        :check-strictly="true"</span><br><span class="line">        :default-expand-all="true"</span><br><span class="line">        :default-checked-keys="selectCheck"</span><br><span class="line">        node-key="id"</span><br><span class="line">      /&gt;</span><br><span class="line">      &lt;!-- ç¡®å®š å–æ¶ˆ --&gt;</span><br><span class="line">      &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">        &lt;el-col :span="6"&gt;</span><br><span class="line">          &lt;el-button type="primary" size="small" @click="btnPermOK"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">          &lt;el-button size="small" @click="btnPermCancel"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">        &lt;/el-col&gt;</span><br><span class="line">      &lt;/el-row&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®šä¹‰æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">showPermDialog: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶åˆ†é…æƒé™å¼¹å±‚çš„æ˜¾ç¤ºåè€…éšè—</span></span><br><span class="line"><span class="attr">defaultProps</span>: {</span><br><span class="line">  <span class="attr">label</span>: <span class="string">'name'</span></span><br><span class="line">},</span><br><span class="line"> <span class="attr">permData</span>: [], <span class="comment">// ä¸“é—¨ç”¨æ¥æ¥æ”¶æƒé™æ•°æ® æ ‘å½¢æ•°æ®</span></span><br><span class="line"><span class="attr">selectCheck</span>: [], <span class="comment">// å®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥æ¥æ”¶ å·²ç»é€‰ä¸­çš„èŠ‚ç‚¹</span></span><br><span class="line"><span class="attr">roleId</span>: <span class="literal">null</span> <span class="comment">// ç”¨æ¥è®°å½•åˆ†é…è§’è‰²çš„id</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç‚¹å‡»åˆ†é…æƒé™</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button size="small" type="success" @click="assignPerm(row.id)"&gt;åˆ†é…æƒé™&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç»™è§’è‰²åˆ†é…æƒé™-1"><a href="#ç»™è§’è‰²åˆ†é…æƒé™-1" class="headerlink" title="ç»™è§’è‰²åˆ†é…æƒé™"></a>ç»™è§’è‰²åˆ†é…æƒé™</h3><p><strong>åˆ†é…æƒé™</strong>/<strong>æ ‘å½¢æ•°æ®</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">import</span> { transListToTreeData } <span class="keyword">from</span> <span class="string">'@/utils'</span></span><br><span class="line"><span class="keyword">import</span> { getPermissionList } <span class="keyword">from</span> <span class="string">'@/api/permission'</span></span><br><span class="line"><span class="attr">methods</span>: {</span><br><span class="line">    <span class="comment">// ç‚¹å‡»åˆ†é…æƒé™</span></span><br><span class="line">  <span class="comment">// è·å–æƒé™ç‚¹æ•°æ® åœ¨ç‚¹å‡»çš„æ—¶å€™è°ƒç”¨ è·å–æƒé™ç‚¹æ•°æ®</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">assignPerm</span>(<span class="params">id</span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.permData = tranListToTreeData(<span class="keyword">await</span> getPermissionList(), <span class="string">'0'</span>) <span class="comment">// è½¬åŒ–liståˆ°æ ‘å½¢æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.roleId = id</span><br><span class="line">      <span class="comment">// åº”è¯¥å»è·å– è¿™ä¸ªidçš„ æƒé™ç‚¹</span></span><br><span class="line">      <span class="comment">// æœ‰id å°±å¯ä»¥ idåº”è¯¥å…ˆè®°å½•ä¸‹æ¥</span></span><br><span class="line">      <span class="keyword">const</span> { permIds } = <span class="keyword">await</span> getRoleDetail(id) <span class="comment">// permIdsæ˜¯å½“å‰è§’è‰²æ‰€æ‹¥æœ‰çš„æƒé™ç‚¹æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.selectCheck = permIds <span class="comment">// å°†å½“å‰è§’è‰²æ‰€æ‹¥æœ‰çš„æƒé™idèµ‹å€¼</span></span><br><span class="line">      <span class="built_in">this</span>.showPermDialog = <span class="literal">true</span></span><br><span class="line">    },</span><br><span class="line">    <span class="keyword">async</span>  <span class="function"><span class="title">btnPermOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="comment">// è°ƒç”¨el-treeçš„æ–¹æ³•</span></span><br><span class="line">      <span class="comment">// console.log(this.$refs.permTree.getCheckedKeys())</span></span><br><span class="line">      <span class="keyword">await</span> assignPerm({ <span class="attr">permIds</span>: <span class="built_in">this</span>.$refs.permTree.getCheckedKeys(), <span class="attr">id</span>: <span class="built_in">this</span>.roleId })</span><br><span class="line">      <span class="built_in">this</span>.$message.success(<span class="string">'åˆ†é…æƒé™æˆåŠŸ'</span>)</span><br><span class="line">      <span class="built_in">this</span>.showPermDialog = <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">btnPermCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.selectCheck = [] <span class="comment">// é‡ç½®æ•°æ®</span></span><br><span class="line">      <span class="built_in">this</span>.showPermDialog = <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> ç»™è§’è‰²åˆ†é…æƒé™</p>
<h2 id="å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•"><a href="#å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•" class="headerlink" title="å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•"></a>å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•</h2><p>**<code>ç›®æ ‡</code>**ï¼š åœ¨å½“å‰é¡¹ç›®åº”ç”¨ç”¨æˆ·çš„é¡µé¢è®¿é—®æƒé™</p>
<h3 id="æƒé™å—æ§çš„ä¸»ä½“æ€è·¯"><a href="#æƒé™å—æ§çš„ä¸»ä½“æ€è·¯" class="headerlink" title="æƒé™å—æ§çš„ä¸»ä½“æ€è·¯"></a>æƒé™å—æ§çš„ä¸»ä½“æ€è·¯</h3><blockquote>
<p>åˆ°äº†æœ€å…³é”®çš„ç¯èŠ‚ï¼Œæˆ‘ä»¬è®¾ç½®çš„æƒé™å¦‚ä½•åº”ç”¨ï¼Ÿ</p>
</blockquote>
<p>åœ¨ä¸Šé¢çš„å‡ ä¸ªå°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»æŠŠç»™ç”¨æˆ·åˆ†é…äº†è§’è‰²ï¼Œ ç»™è§’è‰²åˆ†é…äº†æƒé™ï¼Œé‚£ä¹ˆåœ¨ç”¨æˆ·ç™»å½•è·å–èµ„æ–™çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æŸ¥å‡ºè¯¥ç”¨æˆ·æ‹¥æœ‰å“ªäº›æƒé™ï¼Œè¿™ä¸ªæƒé™éœ€è¦å’Œæˆ‘ä»¬çš„èœå•è¿˜æœ‰è·¯ç”±æœ‰æ•ˆç»“åˆèµ·æ¥</p>
<blockquote>
<p>æˆ‘ä»¬åœ¨è·¯ç”±å’Œé¡µé¢ç« èŠ‚ä¸­ï¼Œå·²ç»ä»‹ç»è¿‡ï¼ŒåŠ¨æ€æƒé™å…¶å®å°±æ˜¯æ ¹æ®ç”¨æˆ·çš„å®é™…æƒé™æ¥è®¿é—®çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ“ä½œä¸€ä¸‹</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200730002842243.png" alt="image-20200730002842243"></p>
<p>åœ¨æƒé™ç®¡ç†é¡µé¢ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ª<strong>æ ‡è¯†</strong>ï¼Œ è¿™ä¸ªæ ‡è¯†å¯ä»¥å’Œæˆ‘ä»¬çš„è·¯ç”±æ¨¡å—è¿›è¡Œå…³è”ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç”¨æˆ·æ‹¥æœ‰è¿™ä¸ªæ ‡è¯†ï¼Œé‚£ä¹ˆç”¨æˆ·å°±å¯ä»¥<strong>æ‹¥æœ‰è¿™ä¸ªè·¯ç”±æ¨¡å—</strong>ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ ‡è¯†ï¼Œå°±ä¸èƒ½<strong>è®¿é—®è·¯ç”±æ¨¡å—</strong></p>
<blockquote>
<p>ç”¨ä»€ä¹ˆæ¥å®ç°ï¼Ÿ</p>
</blockquote>
<p>vue-routeræä¾›äº†ä¸€ä¸ªå«åš<a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/api/#router-addroutes">addRoutes</a>çš„APIæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„å«ä¹‰æ˜¯<strong>åŠ¨æ€æ·»åŠ è·¯ç”±è§„åˆ™</strong></p>
<p>æ€è·¯å¦‚ä¸‹</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200901164312005.png" alt="image-20200901164312005"></p>
<h3 id="æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—"><a href="#æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—" class="headerlink" title="æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—"></a>æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—</h3><blockquote>
<p> åœ¨<strong>ä¸»é¡µæ¨¡å—</strong>ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ç”¨æˆ·çš„èµ„æ–™è®¾ç½®åˆ°vuexä¸­ï¼Œå…¶ä¸­ä¾¿æœ‰æƒé™æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å°±æ­¤è¿›è¡Œæ“ä½œ</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åœ¨vuexä¸­æ–°å¢ä¸€ä¸ªpermissionæ¨¡å—</p>
<p><strong><code>src/store/modules/permission.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vuexçš„æƒé™æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> { constantRoutes } <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"><span class="comment">// vuexä¸­çš„permissionæ¨¡å—ç”¨æ¥å­˜æ”¾å½“å‰çš„ é™æ€è·¯ç”± + å½“å‰ç”¨æˆ·çš„ æƒé™è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> state = {</span><br><span class="line">  <span class="attr">routes</span>: constantRoutes <span class="comment">// æ‰€æœ‰äººé»˜è®¤æ‹¥æœ‰é™æ€è·¯ç”±</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">const</span> mutations = {</span><br><span class="line">  <span class="comment">// newRouteså¯ä»¥è®¤ä¸ºæ˜¯ ç”¨æˆ·ç™»å½• é€šè¿‡æƒé™æ‰€å¾—åˆ°çš„åŠ¨æ€è·¯ç”±çš„éƒ¨åˆ†</span></span><br><span class="line">  <span class="function"><span class="title">setRoutes</span>(<span class="params">state, newRoutes</span>)</span> {</span><br><span class="line">    <span class="comment">// ä¸‹é¢è¿™ä¹ˆå†™ä¸å¯¹ ä¸æ˜¯è¯­æ³•ä¸å¯¹ æ˜¯ä¸šåŠ¡ä¸å¯¹</span></span><br><span class="line">    <span class="comment">// state.routes = [...state.routes, ...newRoutes]</span></span><br><span class="line">    <span class="comment">// æœ‰ä¸€ç§æƒ…å†µ  å¼ ä¸‰ ç™»å½• è·å–äº†åŠ¨æ€è·¯ç”± è¿½åŠ åˆ°è·¯ç”±ä¸Š  æå››ç™»å½• 4ä¸ªåŠ¨æ€è·¯ç”±</span></span><br><span class="line">    <span class="comment">// åº”è¯¥æ˜¯æ¯æ¬¡æ›´æ–° éƒ½åº”è¯¥åœ¨é™æ€è·¯ç”±çš„åŸºç¡€ä¸Šè¿›è¡Œè¿½åŠ </span></span><br><span class="line">    state.routes = [...constantRoutes, ...newRoutes]</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"><span class="keyword">const</span> actions = {}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨Vuexç®¡ç†æ¨¡å—ä¸­å¼•å…¥permissonæ¨¡å—</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> permission <span class="keyword">from</span> <span class="string">'./modules/permission'</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">    <span class="comment">// å­æ¨¡å—   $store.state.app.</span></span><br><span class="line">    <span class="comment">// mapGetters([])</span></span><br><span class="line">    app,</span><br><span class="line">    settings,</span><br><span class="line">    user,</span><br><span class="line">    permission</span><br><span class="line">  },</span><br><span class="line">  getters</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="Vuexç­›é€‰æƒé™è·¯ç”±"><a href="#Vuexç­›é€‰æƒé™è·¯ç”±" class="headerlink" title="Vuexç­›é€‰æƒé™è·¯ç”±"></a>Vuexç­›é€‰æƒé™è·¯ç”±</h3><blockquote>
<p> OKï¼Œ é‚£ä¹ˆæˆ‘ä»¬åœ¨å“ªå°†ç”¨æˆ·çš„æ ‡è¯†å’Œæƒé™è¿›è¡Œå…³è”å‘¢ ï¼Ÿ</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200815184203715.png" alt="image-20200815184203715"></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨è¿™å¼ å›¾ä¸­ï¼Œè¿›ä¸€æ­¥çš„è¿›è¡Œæ“ä½œ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200815184407204.png" alt="image-20200815184407204"></p>
<p>è®¿é—®æƒé™çš„æ•°æ®åœ¨ç”¨æˆ·å±æ€§**<code>menus</code><strong>ä¸­ï¼Œ</strong><code>menus</code>**ä¸­çš„æ ‡è¯†è¯¥æ€ä¹ˆå’Œè·¯ç”±å¯¹åº”å‘¢ï¼Ÿ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200815185230597.png" alt="image-20200815185230597"></p>
<blockquote>
<p>  å¯ä»¥å°†è·¯ç”±æ¨¡å—çš„æ ¹èŠ‚ç‚¹**<code>name</code>**å±æ€§å‘½åå’Œæƒé™æ ‡è¯†ä¸€è‡´ï¼Œè¿™æ ·åªè¦æ ‡è¯†èƒ½å¯¹ä¸Šï¼Œå°±è¯´æ˜ç”¨æˆ·æ‹¥æœ‰äº†è¯¥æƒé™</p>
</blockquote>
<p>è¿™ä¸€æ­¥ï¼Œåœ¨æˆ‘ä»¬å‘½åè·¯ç”±çš„æ—¶å€™å·²ç»æ“ä½œè¿‡äº†</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200730011629326.png" alt="image-20200730011629326"></p>
<p>æ¥ä¸‹æ¥ï¼Œ vuexçš„permissionä¸­æä¾›ä¸€ä¸ªactionï¼Œè¿›è¡Œå…³è”</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { asyncRoutes, constantRoutes } <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = {</span><br><span class="line">  <span class="comment">// ç­›é€‰æƒé™è·¯ç”±</span></span><br><span class="line">  <span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ä¸ºå½“å‰ç”¨æˆ·çš„æ‰€æ‹¥æœ‰çš„èœå•æƒé™</span></span><br><span class="line">  <span class="comment">// menus: ["settings","permissions"]</span></span><br><span class="line">  <span class="comment">// asyncRoutesæ˜¯æ‰€æœ‰çš„åŠ¨æ€è·¯ç”±</span></span><br><span class="line">  <span class="comment">// asyncRoutes  [{path: 'setting',name: 'setting'},{}]</span></span><br><span class="line">  <span class="function"><span class="title">filterRoutes</span>(<span class="params">context, menus</span>)</span> {</span><br><span class="line">    <span class="keyword">const</span> routes = []</span><br><span class="line">    <span class="comment">//   ç­›é€‰å‡º åŠ¨æ€è·¯ç”±ä¸­å’Œmenusä¸­èƒ½å¤Ÿå¯¹ä¸Šçš„è·¯ç”±</span></span><br><span class="line">    menus.forEach(<span class="function"><span class="params">key</span> =&gt;</span> {</span><br><span class="line">      <span class="comment">// keyå°±æ˜¯æ ‡è¯†</span></span><br><span class="line">      <span class="comment">// asyncRoutes æ‰¾ æœ‰æ²¡æœ‰å¯¹è±¡ä¸­çš„nameå±æ€§ç­‰äº keyçš„ å¦‚æœæ‰¾ä¸åˆ°å°±æ²¡æƒé™ å¦‚æœæ‰¾åˆ°äº† è¦ç­›é€‰å‡ºæ¥</span></span><br><span class="line">      routes.push(...asyncRoutes.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.name === key)) <span class="comment">// å¾—åˆ°ä¸€ä¸ªæ•°ç»„ æœ‰å¯èƒ½ æœ‰å…ƒç´  ä¹Ÿæœ‰å¯èƒ½æ˜¯ç©ºæ•°ç»„</span></span><br><span class="line">    })</span><br><span class="line">    <span class="comment">// å¾—åˆ°çš„routesæ˜¯æ‰€æœ‰æ¨¡å—ä¸­æ»¡è¶³æƒé™è¦æ±‚çš„è·¯ç”±æ•°ç»„</span></span><br><span class="line">    <span class="comment">// routeså°±æ˜¯å½“å‰ç”¨æˆ·æ‰€æ‹¥æœ‰çš„ åŠ¨æ€è·¯ç”±çš„æƒé™</span></span><br><span class="line">    context.commit(<span class="string">'setRoutes'</span>, routes) <span class="comment">// å°†åŠ¨æ€è·¯ç”±æäº¤ç»™mutations</span></span><br><span class="line">    <span class="keyword">return</span> routes <span class="comment">// è¿™é‡Œä¸ºä»€ä¹ˆè¿˜è¦return  stateæ•°æ® æ˜¯ç”¨æ¥ æ˜¾ç¤ºå·¦ä¾§èœå•ç”¨çš„  return  æ˜¯ç»™è·¯ç”±addRoutesç”¨çš„</span></span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action"><a href="#æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action" class="headerlink" title="æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action"></a>æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action</h3><p>åœ¨æ‹¦æˆªçš„ä½ç½®ï¼Œè°ƒç”¨å…³è”actionï¼Œ è·å–æ–°å¢routesï¼Œå¹¶ä¸”<strong>addRoutes</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æƒé™æ‹¦æˆªåœ¨è·¯ç”±è·³è½¬  å¯¼èˆªå®ˆå«</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'@/router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span> <span class="comment">// å¼•å…¥storeå®ä¾‹ å’Œç»„ä»¶ä¸­çš„this.$storeæ˜¯ä¸€å›äº‹</span></span><br><span class="line"><span class="keyword">import</span> nprogress <span class="keyword">from</span> <span class="string">'nprogress'</span> <span class="comment">// å¼•å…¥è¿›åº¦æ¡</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'nprogress/nprogress.css'</span> <span class="comment">// å¼•å…¥è¿›åº¦æ¡æ ·å¼</span></span><br><span class="line"><span class="comment">// ä¸éœ€è¦å¯¼å‡º  å› ä¸ºåªéœ€è¦è®©ä»£ç æ‰§è¡Œå³å¯</span></span><br><span class="line"><span class="comment">// å‰ç½®å®ˆå«</span></span><br><span class="line"><span class="comment">// nextæ˜¯å‰ç½®å®ˆå«å¿…é¡»å¿…é¡»å¿…é¡»æ‰§è¡Œçš„é’©å­  nextå¿…é¡»æ‰§è¡Œ å¦‚æœä¸æ‰§è¡Œ é¡µé¢å°±æ­»äº†</span></span><br><span class="line"><span class="comment">// next()  æ”¾è¿‡</span></span><br><span class="line"><span class="comment">// next(false) è·³è½¬ç»ˆæ­¢</span></span><br><span class="line"><span class="comment">// next(åœ°å€) è·³è½¬åˆ°æŸä¸ªåœ°å€</span></span><br><span class="line"><span class="keyword">const</span> whiteList = [<span class="string">'/login'</span>, <span class="string">'/404'</span>] <span class="comment">// å®šä¹‰ç™½åå•</span></span><br><span class="line">router.beforeEach(<span class="keyword">async</span>(to, <span class="keyword">from</span>, next) =&gt; {</span><br><span class="line">  nprogress.start() <span class="comment">// å¼€å¯è¿›åº¦æ¡çš„æ„æ€</span></span><br><span class="line">  <span class="keyword">if</span> (store.getters.token) {</span><br><span class="line">    <span class="comment">// åªæœ‰æœ‰tokençš„æƒ…å†µä¸‹ æ‰èƒ½è·å–èµ„æ–™</span></span><br><span class="line">    <span class="comment">//   å¦‚æœæœ‰token</span></span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">'/login'</span>) {</span><br><span class="line">      <span class="comment">// å¦‚æœè¦è®¿é—®çš„æ˜¯ ç™»å½•é¡µ</span></span><br><span class="line">      next(<span class="string">'/'</span>) <span class="comment">// è·³åˆ°ä¸»é¡µ  // æœ‰token ç”¨å¤„ç†å—ï¼Ÿä¸ç”¨</span></span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// åªæœ‰æ”¾è¿‡çš„æ—¶å€™æ‰å»è·å–ç”¨æˆ·èµ„æ–™</span></span><br><span class="line">      <span class="comment">// æ˜¯æ¯æ¬¡éƒ½è·å–å—</span></span><br><span class="line">      <span class="comment">// å¦‚æœå½“å‰vuexä¸­æœ‰ç”¨æˆ·çš„èµ„æ–™çš„id è¡¨ç¤º å·²ç»æœ‰èµ„æ–™äº† ä¸éœ€è¦è·å–äº† å¦‚æœæ²¡æœ‰idæ‰éœ€è¦è·å–</span></span><br><span class="line">      <span class="keyword">if</span> (!store.getters.userId) {</span><br><span class="line">        <span class="comment">// å¦‚æœæ²¡æœ‰idæ‰è¡¨ç¤ºå½“å‰ç”¨æˆ·èµ„æ–™æ²¡æœ‰è·å–è¿‡</span></span><br><span class="line">        <span class="comment">// async å‡½æ•°æ‰€returnçš„å†…å®¹ ç”¨ awaitå°±å¯ä»¥æ¥æ”¶åˆ°</span></span><br><span class="line">        <span class="keyword">const</span> { roles } = <span class="keyword">await</span> store.dispatch(<span class="string">'user/getUserInfo'</span>)</span><br><span class="line">        <span class="comment">// å¦‚æœè¯´åç»­ éœ€è¦æ ¹æ®ç”¨æˆ·èµ„æ–™è·å–æ•°æ®çš„è¯ è¿™é‡Œå¿…é¡»æ”¹æˆ åŒæ­¥</span></span><br><span class="line">        <span class="comment">// ç­›é€‰ç”¨æˆ·çš„å¯ç”¨è·¯ç”±</span></span><br><span class="line">        <span class="comment">// actionsä¸­å‡½æ•° é»˜è®¤æ˜¯Promiseå¯¹è±¡ è°ƒç”¨è¿™ä¸ªå¯¹è±¡ æƒ³è¦è·å–è¿”å›çš„å€¼è¯ å¿…é¡» åŠ  awaitæˆ–è€…æ˜¯then</span></span><br><span class="line">        <span class="comment">// actionsæ˜¯åšå¼‚æ­¥æ“ä½œçš„</span></span><br><span class="line">        <span class="keyword">const</span> routes = <span class="keyword">await</span> store.dispatch(<span class="string">'permission/filterRoutes'</span>, roles.menus)</span><br><span class="line">        <span class="comment">// routeså°±æ˜¯ç­›é€‰å¾—åˆ°çš„åŠ¨æ€è·¯ç”±</span></span><br><span class="line">        <span class="comment">// åŠ¨æ€è·¯ç”± æ·»åŠ åˆ° è·¯ç”±è¡¨ä¸­ é»˜è®¤çš„è·¯ç”±è¡¨ åªæœ‰é™æ€è·¯ç”± æ²¡æœ‰åŠ¨æ€è·¯ç”±</span></span><br><span class="line">        <span class="comment">// addRoutes  å¿…é¡» ç”¨ next(åœ°å€) ä¸èƒ½ç”¨next()</span></span><br><span class="line">        router.addRoutes(routes) <span class="comment">// æ·»åŠ åŠ¨æ€è·¯ç”±åˆ°è·¯ç”±è¡¨  é“ºè·¯</span></span><br><span class="line">        <span class="comment">// æ·»åŠ å®ŒåŠ¨æ€è·¯ç”±ä¹‹å</span></span><br><span class="line">        next(to.path) <span class="comment">// ç›¸å½“äºè·³åˆ°å¯¹åº”çš„åœ°å€  ç›¸å½“äºå¤šåšä¸€æ¬¡è·³è½¬ ä¸ºä»€ä¹ˆè¦å¤šåšä¸€æ¬¡è·³è½¬</span></span><br><span class="line">        <span class="comment">// è¿›é—¨äº†ï¼Œä½†æ˜¯è¿›é—¨ä¹‹åæˆ‘è¦å»çš„åœ°æ–¹çš„è·¯è¿˜æ²¡æœ‰é“ºå¥½ï¼Œç›´æ¥èµ°ï¼Œæ‰å‘é‡Œï¼Œå¤šåšä¸€æ¬¡è·³è½¬ï¼Œå†ä»é—¨å¤–å¾€é‡Œè¿›ä¸€æ¬¡ï¼Œè·³è½¬ä¹‹å‰ æŠŠè·¯é“ºå¥½ï¼Œå†æ¬¡è¿›æ¥çš„æ—¶å€™ï¼Œè·¯å°±é“ºå¥½äº†</span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        next()</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">//   æ²¡æœ‰tokençš„æƒ…å†µä¸‹</span></span><br><span class="line">    <span class="keyword">if</span> (whiteList.indexOf(to.path) &gt; -<span class="number">1</span>) {</span><br><span class="line">      <span class="comment">//  è¡¨ç¤ºè¦å»çš„åœ°å€åœ¨ç™½åå•</span></span><br><span class="line">      next()</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      next(<span class="string">'/login'</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  nprogress.done() <span class="comment">// è§£å†³æ‰‹åŠ¨åˆ‡æ¢åœ°å€æ—¶ è¿›åº¦æ¡ä¸å…³é—­çš„é—®é¢˜</span></span><br><span class="line">})</span><br><span class="line"><span class="comment">// åç½®å®ˆå«</span></span><br><span class="line">router.afterEach(<span class="function">() =&gt;</span> {</span><br><span class="line">  nprogress.done() <span class="comment">// å…³é—­è¿›åº¦æ¡</span></span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶"><a href="#é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶" class="headerlink" title="é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶"></a>é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶</h3><p><strong>æ³¨æ„</strong>ï¼š è¿™é‡Œæœ‰ä¸ªéå¸¸å®¹æ˜“å‡ºé—®é¢˜çš„ä½ç½®ï¼Œå½“æˆ‘ä»¬åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å·²ç»æ·»åŠ è·¯ç”±çš„å‰åï¼Œä¸èƒ½éƒ½æ˜¯ç”¨**next()**ï¼Œ</p>
<p>åœ¨æ·»åŠ è·¯ç”±ä¹‹ååº”è¯¥ä½¿ç”¨ <strong>next(to.path)<strong>ï¼Œ å¦åˆ™ä¼šä½¿åˆ·æ–°é¡µé¢ä¹‹å æƒé™æ¶ˆå¤±ï¼Œè¿™å±äºä¸€ä¸ªvue-routerçš„</strong>å·²çŸ¥ç¼ºé™·</strong></p>
<p>åŒæ—¶ï¼Œä¸è¦å¿˜è®°ï¼Œæˆ‘ä»¬å°†åŸæ¥çš„é™æ€è·¯ç”± + åŠ¨æ€è·¯ç”±åˆä½“çš„æ¨¡å¼ æ”¹æˆ åªæœ‰é™æ€è·¯ç”±  <strong><code>src/router/index.js</code></strong></p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200730012805239.png" alt="image-20200730012805239"></p>
<blockquote>
<p>  æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æƒé™è®¾ç½®çš„ä¸€åŠï¼Œ æ­¤æ—¶æˆ‘ä»¬å‘ç°å·¦ä¾§èœå•å¤±å»äº†å†…å®¹ï¼Œè¿™æ˜¯å› ä¸ºå·¦ä¾§èœå•è¯»å–çš„æ˜¯å›ºå®šçš„è·¯ç”±ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒæ¢æˆå®æ—¶çš„æœ€æ–°è·¯ç”±</p>
</blockquote>
<p>åœ¨**<code>src/store/getters.js</code>**é…ç½®å¯¼å‡ºroutes</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = {</span><br><span class="line">  <span class="attr">sidebar</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.sidebar,</span><br><span class="line">  <span class="attr">device</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.app.device,</span><br><span class="line">  <span class="attr">token</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.token,</span><br><span class="line">  <span class="attr">name</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.username, <span class="comment">// å»ºç«‹ç”¨æˆ·åç§°çš„æ˜ å°„</span></span><br><span class="line">  <span class="attr">userId</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.userId, <span class="comment">// å»ºç«‹ç”¨æˆ·idçš„æ˜ å°„</span></span><br><span class="line">  <span class="attr">companyId</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.user.userInfo.companyId, <span class="comment">// å»ºç«‹ç”¨æˆ·çš„å…¬å¸Idæ˜ å°„</span></span><br><span class="line">  <span class="attr">routes</span>: <span class="function"><span class="params">state</span> =&gt;</span> state.permission.routes <span class="comment">// å¯¼å‡ºå½“å‰çš„è·¯ç”±</span></span><br><span class="line">}</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨å·¦ä¾§èœå•ç»„ä»¶ä¸­ï¼Œ å¼•å…¥routes</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed: {</span><br><span class="line">  ...mapGetters([</span><br><span class="line">    <span class="string">'sidebar'</span>, <span class="string">'routes'</span></span><br><span class="line">  ]),</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p> OKï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å®ç°ä¸åŒç”¨æˆ·ç™»å½•çš„æ—¶å€™ï¼Œèœå•æ˜¯åŠ¨æ€çš„äº†</p>
</blockquote>
<p><strong>æäº¤ä»£ç </strong></p>
<p><strong><code>æœ¬èŠ‚ä»»åŠ¡</code></strong> å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•</p>
<h2 id="ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ-404é—®é¢˜"><a href="#ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ-404é—®é¢˜" class="headerlink" title="ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ 404é—®é¢˜"></a>ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ 404é—®é¢˜</h2><p><strong>ç›®æ ‡</strong>ï¼š å¤„ç†å½“ç™»å‡ºé¡µé¢æ—¶ï¼Œè·¯ç”±ä¸æ­£ç¡®çš„é—®é¢˜</p>
<blockquote>
<p> ä¸Šä¸€å°èŠ‚ï¼Œæˆ‘ä»¬çœ‹ä¼¼å®Œæˆäº†è®¿é—®æƒé™çš„åŠŸèƒ½ï¼Œå®åˆ™ä¸ç„¶ï¼Œå› ä¸ºå½“æˆ‘ä»¬ç™»å‡ºæ“ä½œä¹‹åï¼Œè™½ç„¶çœ‹ä¸åˆ°èœå•ï¼Œä½†æ˜¯ç”¨æˆ·å®é™…ä¸Šå¯ä»¥è®¿é—®é¡µé¢ï¼Œç›´æ¥åœ¨åœ°å€æ è¾“å…¥åœ°å€å°±èƒ½è®¿é—®</p>
</blockquote>
<p>è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p>
<blockquote>
<p> è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å‰é¢åœ¨<strong>addRoutes</strong>çš„æ—¶å€™ï¼Œä¸€ç›´éƒ½æ˜¯åœ¨<strong>åŠ </strong>ï¼Œç™»å‡ºçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åˆ ï¼Œä¹Ÿæ²¡æœ‰é‡ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¹‹å‰åŠ çš„è·¯ç”±åœ¨ç™»å‡ºä¹‹åä¸€ç›´åœ¨ï¼Œè¿™æ€ä¹ˆå¤„ç†ï¼Ÿ</p>
</blockquote>
<p>å¤§å®¶ç•™æ„æˆ‘ä»¬çš„<strong>router/index.js</strong>æ–‡ä»¶ï¼Œå‘ç°ä¸€ä¸ªé‡ç½®è·¯ç”±æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é‡ç½®è·¯ç”±</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">resetRouter</span>(<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">const</span> newRouter = createRouter()</span><br><span class="line">  router.matcher = newRouter.matcher <span class="comment">// é‡æ–°è®¾ç½®è·¯ç”±çš„å¯åŒ¹é…è·¯å¾„</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æ²¡é”™ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯å°†è·¯ç”±é‡æ–°å®ä¾‹åŒ–ï¼Œç›¸å½“äºæ¢äº†ä¸€ä¸ªæ–°çš„è·¯ç”±ï¼Œä¹‹å‰**<code>åŠ çš„è·¯ç”±</code>**è‡ªç„¶ä¸å­˜åœ¨äº†ï¼Œåªéœ€è¦åœ¨ç™»å‡ºçš„æ—¶å€™ï¼Œ å¤„ç†ä¸€ä¸‹å³å¯</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç™»å‡ºçš„action</span></span><br><span class="line"><span class="function"><span class="title">lgout</span>(<span class="params">context</span>)</span> {</span><br><span class="line">  <span class="comment">// åˆ é™¤token</span></span><br><span class="line">  context.commit(<span class="string">'removeToken'</span>) <span class="comment">// ä¸ä»…ä»…åˆ é™¤äº†vuexä¸­çš„ è¿˜åˆ é™¤äº†ç¼“å­˜ä¸­çš„</span></span><br><span class="line">  <span class="comment">// åˆ é™¤ç”¨æˆ·èµ„æ–™</span></span><br><span class="line">  context.commit(<span class="string">'removeUserInfo'</span>) <span class="comment">// åˆ é™¤ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">  <span class="comment">// é‡ç½®è·¯ç”±</span></span><br><span class="line">  resetRouter()</span><br><span class="line">  <span class="comment">// è¿˜æœ‰ä¸€æ­¥  vuexä¸­çš„æ•°æ®æ˜¯ä¸æ˜¯è¿˜åœ¨</span></span><br><span class="line">  <span class="comment">// è¦æ¸…ç©ºpermissionæ¨¡å—ä¸‹çš„stateæ•°æ®</span></span><br><span class="line">  <span class="comment">// vuexä¸­ userå­æ¨¡å—  permissionå­æ¨¡å—</span></span><br><span class="line">  <span class="comment">// å­æ¨¡å—è°ƒç”¨å­æ¨¡å—çš„action  é»˜è®¤æƒ…å†µä¸‹ å­æ¨¡å—çš„contextæ˜¯å­æ¨¡å—çš„</span></span><br><span class="line">  <span class="comment">// çˆ¶æ¨¡å— è°ƒç”¨ å­æ¨¡å—çš„action</span></span><br><span class="line">  context.commit(<span class="string">'permission/setRoutes'</span>, [], { <span class="attr">root</span>: <span class="literal">true</span> })</span><br><span class="line">  <span class="comment">// å­æ¨¡å—è°ƒç”¨å­æ¨¡å—çš„action å¯ä»¥ å°† commitçš„ç¬¬ä¸‰ä¸ªå‚æ•° è®¾ç½®æˆ  { root: true } å°±è¡¨ç¤ºå½“å‰çš„contextä¸æ˜¯å­æ¨¡å—äº† è€Œæ˜¯çˆ¶æ¨¡å—</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å‘ç°åœ¨é¡µé¢åˆ·æ–°çš„æ—¶å€™ï¼Œæœ¬æ¥åº”è¯¥æ‹¥æœ‰æƒé™çš„é¡µé¢å‡ºç°äº†404ï¼Œè¿™æ˜¯å› ä¸º404çš„åŒ¹é…æƒé™æ”¾åœ¨äº†é™æ€è·¯ç”±ï¼Œè€ŒåŠ¨æ€è·¯ç”±åœ¨æ²¡æœ‰addRoutesä¹‹å‰ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„åœ°å€ï¼Œå°±ä¼šæ˜¾ç¤º404ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†404æ”¾ç½®åˆ°åŠ¨æ€è·¯ç”±çš„æœ€å</p>
<p><strong><code>src/permission.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.addRoutes([...routes, { <span class="attr">path</span>: <span class="string">'*'</span>, <span class="attr">redirect</span>: <span class="string">'/404'</span>, <span class="attr">hidden</span>: <span class="literal">true</span> }]) <span class="comment">// æ·»åŠ åˆ°è·¯ç”±è¡¨</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="åŠŸèƒ½æƒé™åº”ç”¨"><a href="#åŠŸèƒ½æƒé™åº”ç”¨" class="headerlink" title="åŠŸèƒ½æƒé™åº”ç”¨"></a>åŠŸèƒ½æƒé™åº”ç”¨</h2><p><strong>ç›®æ ‡</strong>ï¼š å®ç°åŠŸèƒ½æƒé™çš„åº”ç”¨</p>
<h3 id="åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯"><a href="#åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯" class="headerlink" title="åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯"></a>åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯</h3><blockquote>
<p> ä¸Šå°èŠ‚ä¸­ï¼Œå½“æˆ‘ä»¬æ‹¥æœ‰äº†ä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªé¡µé¢çš„è®¿é—®æƒé™ä¹‹åï¼Œé¡µé¢ä¸­çš„æŸäº›åŠŸèƒ½ï¼Œç”¨æˆ·å¯èƒ½æœ‰ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ï¼Œè¿™å°±æ˜¯åŠŸèƒ½æƒé™</p>
</blockquote>
<p>è¿™å°±æ˜¯ä¸Šå°èŠ‚ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ä¸­çš„**<code>points</code>**</p>
<blockquote>
<p> æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³å¯¹å‘˜å·¥ç®¡ç†çš„åˆ é™¤åŠŸèƒ½åšä¸ªæƒé™æ€ä¹ˆåšï¼Ÿ</p>
</blockquote>
<p>é¦–å…ˆéœ€è¦åœ¨å‘˜å·¥ç®¡ç†çš„æƒé™ç‚¹ä¸‹ï¼Œ æ–°å¢ä¸€ä¸ªåˆ é™¤æƒé™ç‚¹ï¼Œå¯ç”¨</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200730020732919.png" alt="image-20200730020732919"></p>
<blockquote>
<p>  æˆ‘ä»¬è¦åšçš„å°±æ˜¯çœ‹çœ‹ç”¨æˆ·ï¼Œæ˜¯å¦æ‹¥æœ‰<strong>point-user-delete</strong>è¿™ä¸ªpointï¼Œæœ‰å°±å¯ä»¥è®©åˆ é™¤èƒ½ç”¨ï¼Œæ²¡æœ‰å°±éšè—æˆ–è€…ç¦ç”¨</p>
</blockquote>
<h3 id="ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥"><a href="#ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥" class="headerlink" title="ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥"></a>ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥</h3><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä¸€ä¸ªæ–°çš„æŠ€æœ¯ <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/mixins.html">mixin(æ··å…¥)</a>æ¥è®©æ‰€æœ‰çš„ç»„ä»¶å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªå…¬å…±çš„æ–¹æ³•</p>
<p><strong><code>src/mixin/checkPermission.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="function"><span class="title">checkPermission</span>(<span class="params">key</span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> { userInfo } = store.state.user</span><br><span class="line">      <span class="keyword">if</span> (userInfo.roles.points &amp;&amp; userInfo.roles.points.length) {</span><br><span class="line">        <span class="keyword">return</span> userInfo.roles.points.some(<span class="function"><span class="params">item</span> =&gt;</span> item === key)</span><br><span class="line">      }</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p><strong>åœ¨å‘˜å·¥ç»„ä»¶ä¸­æ£€æŸ¥æƒé™ç‚¹</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button :disabled="!checkPermission('POINT-USER-UPDATE')" type="text" size="small" @click="$router.push(`/employees/detail/${obj.row.id}`)"&gt;æŸ¥çœ‹&lt;/el-button&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡é…ç½®æƒé™çš„æ–¹å¼ï¼Œæ£€æŸ¥æƒé™çš„å¯ç”¨æ€§äº†</p>
<p><strong>æäº¤ä»£ç </strong></p>
<h1 id="9-å…¶ä»–æ¨¡å—é›†æˆ"><a href="#9-å…¶ä»–æ¨¡å—é›†æˆ" class="headerlink" title="9.å…¶ä»–æ¨¡å—é›†æˆ"></a>9.å…¶ä»–æ¨¡å—é›†æˆ</h1><h2 id="å…¨æ¨¡å—é›†æˆ"><a href="#å…¨æ¨¡å—é›†æˆ" class="headerlink" title="å…¨æ¨¡å—é›†æˆ"></a>å…¨æ¨¡å—é›†æˆ</h2><p><strong>ç›®æ ‡</strong>ï¼š å°†å…¶ä»–ä¸šåŠ¡æ¨¡å—ä»£ç é›†æˆåˆ°è¯¥é¡¹ç›®ä¸­</p>
<blockquote>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªåŸºæœ¬é¡¹ç›®æ¡†æ¶ + ç»„ç»‡æ¶æ„ + å…¬å¸ + å‘˜å·¥  +  æƒé™çš„ ä¸šåŠ¡è”è°ƒï¼Œ æ—¶é—´å…³ç³»ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å°†æ‰€æœ‰çš„ä¸šåŠ¡éƒ½å»ç¼–å†™ä¸€éï¼Œè¿™é‡Œæä¾›å¤§å®¶ å…¶ä½™æ¨¡å—çš„é›†æˆä»£ç ï¼Œæœ€ç»ˆçš„ç›®çš„æ˜¯è®©å¤§å®¶å¾—åˆ°ä¸€ä¸ªå®Œæˆçš„ä¸šåŠ¡æ¨¡å—</p>
</blockquote>
<p>è¦é›†æˆçš„æ¨¡å—ä¸šåŠ¡ï¼ŒåŒ…æ‹¬å·¥èµ„æ¨¡å—ï¼Œç¤¾ä¿æ¨¡å—ï¼Œè€ƒå‹¤æ¨¡å—ï¼Œå®¡æ‰¹æ¨¡å—</p>
<blockquote>
<p>åœ¨æˆ‘ä»¬æä¾›çš„èµ„æºé›†æˆæ¨¡å—ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†å››ä¸ªæ¨¡å—çš„**<code>è·¯ç”±</code><strong>/</strong><code>é¡µé¢</code><strong>/</strong><code>api</code>*, æŒ‰ç…§ä¸‹é¢çš„è·¯å¾„æ‹·è´å³å¯</p>
</blockquote>
<p>è·¯ç”± =&gt;  <strong><code>src/router/modules</code></strong></p>
<p>é¡µé¢ =&gt;  <strong><code>src/views</code></strong></p>
<p>api  =&gt;  <strong><code>src/api</code></strong></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬éœ€è¦å°† <strong><code>router/modules/user.js </code></strong> å¯¼å…¥åˆ°é™æ€è·¯ç”±ä¸­ï¼Œå› ä¸ºè¿™ä¸ªæ¨¡å—æ˜¯æ‰€æœ‰æ¨¡å—éƒ½å¯ä»¥è®¿é—®çš„</p>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„ç³»ç»Ÿä¸šåŠ¡ã€‚</p>
<h1 id="10-ä¸»é¡µå®¡æ‰¹"><a href="#10-ä¸»é¡µå®¡æ‰¹" class="headerlink" title="10.ä¸»é¡µå®¡æ‰¹"></a>10.ä¸»é¡µå®¡æ‰¹</h1><h2 id="é¦–é¡µçš„é¡µé¢ç»“æ„"><a href="#é¦–é¡µçš„é¡µé¢ç»“æ„" class="headerlink" title="é¦–é¡µçš„é¡µé¢ç»“æ„"></a>é¦–é¡µçš„é¡µé¢ç»“æ„</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°ç³»ç»Ÿé¦–é¡µçš„é¡µé¢ç»“æ„</p>
<blockquote>
<p>ç›®å‰ï¼Œæˆ‘ä»¬çš„é¡µé¢è¿˜å‰©ä¸‹é¦–é¡µï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§å¦‚å›¾å®ç°ä¸€ä¸‹çš„ç»“æ„</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200802002002229.png" alt="image-20200802002002229"></p>
<p>é¦–é¡µé¡µé¢ç»“æ„ï¼Œ<strong>src/views/dashboard/index.vue</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class="dashboard-container"&gt;</span><br><span class="line">    &lt;!-- å¤´éƒ¨å†…å®¹ --&gt;</span><br><span class="line">    &lt;el-card class="header-card"&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;div class="fl headL"&gt;</span><br><span class="line">          &lt;div class="headImg"&gt;</span><br><span class="line">            &lt;img src="@/assets/common/head.jpg"&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="headInfoTip"&gt;</span><br><span class="line">            &lt;p class="firstChild"&gt;æ—©å®‰ï¼Œç®¡ç†å‘˜ï¼Œç¥ä½ å¼€å¿ƒæ¯ä¸€å¤©ï¼&lt;/p&gt;</span><br><span class="line">            &lt;p class="lastChild"&gt;æ—©å®‰ï¼Œç®¡ç†å‘˜ï¼Œç¥ä½ å¼€å¿ƒæ¯ä¸€å¤©ï¼&lt;/p&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class="fr" /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/el-card&gt;</span><br><span class="line">    &lt;!-- ä¸»è¦å†…å®¹ --&gt;</span><br><span class="line">    &lt;el-row type="flex" justify="space-between"&gt;</span><br><span class="line">      &lt;!-- å·¦ä¾§å†…å®¹ --&gt;</span><br><span class="line">      &lt;el-col :span="13" style="padding-right:26px"&gt;</span><br><span class="line">        &lt;!-- å·¥ä½œæ—¥å† --&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div slot="header" class="header"&gt;</span><br><span class="line">            &lt;span&gt;å·¥ä½œæ—¥å†&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®æ—¥å†ç»„ä»¶ --&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">        &lt;!-- å…¬å‘Š --&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div class="advContent"&gt;</span><br><span class="line">            &lt;div class="title"&gt; å…¬å‘Š&lt;/div&gt;</span><br><span class="line">            &lt;div class="contentItem"&gt;</span><br><span class="line">              &lt;ul class="noticeList"&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;div class="item"&gt;</span><br><span class="line">                    &lt;img src="@/assets/common/img.jpeg" alt=""&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                      &lt;p&gt;&lt;span class="col"&gt;æœ±ç»§æŸ³&lt;/span&gt; å‘å¸ƒäº† ç¬¬1æœŸâ€œä¼ æ™ºå¤§è®²å ‚â€äº’åŠ¨è®¨è®ºè·å¥–åå•å…¬å¸ƒ&lt;/p&gt;</span><br><span class="line">                      &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;div class="item"&gt;</span><br><span class="line">                    &lt;img src="@/assets/common/img.jpeg" alt=""&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                      &lt;p&gt;&lt;span class="col"&gt;æœ±ç»§æŸ³&lt;/span&gt; å‘å¸ƒäº† ç¬¬2æœŸâ€œä¼ æ™ºå¤§è®²å ‚â€äº’åŠ¨è®¨è®ºè·å¥–åå•å…¬å¸ƒ&lt;/p&gt;</span><br><span class="line">                      &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">                &lt;li&gt;</span><br><span class="line">                  &lt;div class="item"&gt;</span><br><span class="line">                    &lt;img src="@/assets/common/img.jpeg" alt=""&gt;</span><br><span class="line">                    &lt;div&gt;</span><br><span class="line">                      &lt;p&gt;&lt;span class="col"&gt;æœ±ç»§æŸ³&lt;/span&gt; å‘å¸ƒäº† ç¬¬3æœŸâ€œä¼ æ™ºå¤§è®²å ‚â€äº’åŠ¨è®¨è®ºè·å¥–åå•å…¬å¸ƒ&lt;/p&gt;</span><br><span class="line">                      &lt;p&gt;2018-07-21 15:21:38&lt;/p&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                &lt;/li&gt;</span><br><span class="line">              &lt;/ul&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;!-- å³ä¾§å†…å®¹ --&gt;</span><br><span class="line">      &lt;el-col :span="11"&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div class="header headTit"&gt;</span><br><span class="line">            &lt;span&gt;æµç¨‹ç”³è¯·&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="sideNav"&gt;</span><br><span class="line">            &lt;el-button class="sideBtn"&gt;åŠ ç­ç¦»èŒ&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button class="sideBtn"&gt;è¯·å‡è°ƒä¼‘&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button class="sideBtn"&gt;å®¡æ‰¹åˆ—è¡¨&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button class="sideBtn"&gt;æˆ‘çš„ä¿¡æ¯&lt;/el-button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- ç»©æ•ˆæŒ‡æ•° --&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div slot="header" class="header"&gt;</span><br><span class="line">            &lt;span&gt;ç»©æ•ˆæŒ‡æ•°&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®é›·è¾¾å›¾ --&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">        &lt;!-- å¸®åŠ©è¿æ¥ --&gt;</span><br><span class="line">        &lt;el-card class="box-card"&gt;</span><br><span class="line">          &lt;div class="header headTit"&gt;</span><br><span class="line">            &lt;span&gt;å¸®åŠ©é“¾æ¥&lt;/span&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="sideLink"&gt;</span><br><span class="line">            &lt;el-row&gt;</span><br><span class="line">              &lt;el-col :span="8"&gt;</span><br><span class="line">                &lt;a href="#"&gt;</span><br><span class="line">                  &lt;span class="icon iconGuide" /&gt;</span><br><span class="line">                  &lt;p&gt;å…¥é—¨æŒ‡å—&lt;/p&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/el-col&gt;</span><br><span class="line">              &lt;el-col :span="8"&gt;</span><br><span class="line">                &lt;a href="#"&gt;</span><br><span class="line">                  &lt;span class="icon iconHelp" /&gt;</span><br><span class="line">                  &lt;p&gt;åœ¨çº¿å¸®åŠ©æ‰‹å†Œ&lt;/p&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/el-col&gt;</span><br><span class="line">              &lt;el-col :span="8"&gt;</span><br><span class="line">                &lt;a href="#"&gt;</span><br><span class="line">                  &lt;span class="icon iconTechnology" /&gt;</span><br><span class="line">                  &lt;p&gt;è”ç³»æŠ€æœ¯æ”¯æŒ&lt;/p&gt;</span><br><span class="line">                &lt;/a&gt;</span><br><span class="line">              &lt;/el-col&gt;</span><br><span class="line">            &lt;/el-row&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/el-card&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import { mapGetters } from 'vuex'</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  name: 'Dashboard',</span><br><span class="line">  computed: {</span><br><span class="line">    ...mapGetters([</span><br><span class="line">      'name'</span><br><span class="line">    ])</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang="scss" scoped&gt;</span><br><span class="line">.dashboard-container {</span><br><span class="line">  margin: 10px;</span><br><span class="line">  li {</span><br><span class="line">    list-style: none;</span><br><span class="line">  }</span><br><span class="line">  .headImg {</span><br><span class="line">    float: left;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    border-radius: 50%;</span><br><span class="line">    background: #999;</span><br><span class="line">          img {</span><br><span class="line">      width: 100%;</span><br><span class="line">      height: 100%;</span><br><span class="line">      border-radius: 50%;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  .headInfoTip {</span><br><span class="line">    padding: 25px 0 0;</span><br><span class="line">    margin-left: 120px;</span><br><span class="line">    p {</span><br><span class="line">      padding: 0 0 15px;</span><br><span class="line">      margin: 0;</span><br><span class="line">      &amp;.firstChild {</span><br><span class="line">        font-size: 24px;</span><br><span class="line">      }</span><br><span class="line">      &amp;.lastChild {</span><br><span class="line">        font-size: 20px;</span><br><span class="line">        color: #7f8c8d;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.box-card {</span><br><span class="line">  padding: 5px 10px;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">  .header {</span><br><span class="line">    span {</span><br><span class="line">      color: #2c3e50;</span><br><span class="line">      font-size: 24px;</span><br><span class="line">    }</span><br><span class="line">    .item {</span><br><span class="line">      color: #97a8be;</span><br><span class="line">      float: right;</span><br><span class="line">      padding: 3px 0;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">  .headTit {</span><br><span class="line">    span {</span><br><span class="line">      border-bottom: 4px solid #8a97f8;</span><br><span class="line">      padding-bottom: 10px;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">.header-card{</span><br><span class="line">  position: relative;</span><br><span class="line">  .header {</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 20px;</span><br><span class="line">    top: 15px;</span><br><span class="line">    z-index: 1;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">.advContent {</span><br><span class="line">  background: #fff;</span><br><span class="line">  border-radius: 5px 5px 0px 0px;</span><br><span class="line">  .title {</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    padding: 20px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    border-bottom: solid 1px #ccc;</span><br><span class="line">  }</span><br><span class="line">  .contentItem {</span><br><span class="line">    padding: 0 30px;</span><br><span class="line">    min-height: 350px;</span><br><span class="line">    .item {</span><br><span class="line">      display: flex;</span><br><span class="line">      padding:18px 0 10px;</span><br><span class="line">      border-bottom: solid 1px #ccc;</span><br><span class="line">      .col {</span><br><span class="line">        color: #8a97f8;</span><br><span class="line">      }</span><br><span class="line">      img {</span><br><span class="line">        width: 56px;</span><br><span class="line">        height: 56px;</span><br><span class="line">        border-radius: 50%;</span><br><span class="line">        margin-right: 10px;</span><br><span class="line">      }</span><br><span class="line">      p{</span><br><span class="line">        padding: 0 0 8px;</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">.noticeList {</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0;</span><br><span class="line">}</span><br><span class="line">.sideNav,</span><br><span class="line">.sideLink {</span><br><span class="line">  padding: 30px 0 12px;</span><br><span class="line">  .sideBtn {</span><br><span class="line">    padding: 16px 26px;</span><br><span class="line">    font-size:16px;</span><br><span class="line">    margin: 10px 5px;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">.sideLink {</span><br><span class="line">  text-align: center;</span><br><span class="line">  .icon {</span><br><span class="line">    display: inline-block;</span><br><span class="line">    width: 76px;</span><br><span class="line">    height: 76px;</span><br><span class="line">    background: url('./../../assets/common/icon.png') no-repeat;</span><br><span class="line">  }</span><br><span class="line">  .iconGuide {</span><br><span class="line">    background-position: 0 0;</span><br><span class="line">  }</span><br><span class="line">  .iconHelp {</span><br><span class="line">    background-position: -224px 0;</span><br><span class="line">  }</span><br><span class="line">  .iconTechnology {</span><br><span class="line">    background-position: -460px 0;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹çš„é¡µé¢</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200802015023168.png" alt="image-20200802015023168"></p>
<p>å¤§å®¶å‘ç°ï¼Œæˆ‘ä»¬é¢„ç•™äº†**<code>å·¥ä½œæ—¥å†</code><strong>å’Œ</strong><code>ç»©æ•ˆæŒ‡æ•°</code>**ä¸¤ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬ä¼šåœ¨åç»­çš„ç»„ä»¶ä¸­è¿›è¡Œå¼€å‘</p>
<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º"><a href="#é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º" class="headerlink" title="é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º"></a>é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º</h2><p>â€‹ **<code>ç›®æ ‡</code>**ï¼šå°†é¦–é¡µçš„ä¿¡æ¯æ¢æˆçœŸå®çš„ç”¨æˆ·èµ„æ–™</p>
<blockquote>
<p>ç›´æ¥è·å–Vuexçš„ç”¨æˆ·èµ„æ–™å³å¯</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import { createNamespacedHelpers } from 'vuex'</span><br><span class="line">const { mapState } = createNamespacedHelpers('user')</span><br><span class="line">export default {</span><br><span class="line">  name: 'Dashboard',</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      defaultImg: require('@/assets/common/head.jpg'),</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    ...mapState(['userInfo'])</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ vueè§†å›¾ä¸­ç»‘å®š</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class="fl headL"&gt;</span><br><span class="line">          &lt;div class="headImg"&gt;</span><br><span class="line">            &lt;img :src="userInfo.staffPhoto"&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">          &lt;div class="headInfoTip"&gt;</span><br><span class="line">            &lt;p class="firstChild"&gt;æ—©å®‰ï¼Œ{{ userInfo.username }}ï¼Œç¥ä½ å¼€å¿ƒæ¯ä¸€å¤©ï¼&lt;/p&gt;</span><br><span class="line">            &lt;p class="lastChild"&gt;{{ userInfo.username }}   |  {{ userInfo.companyName }}-{{ userInfo.departmentName }}&lt;/p&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå½“æˆ‘ä»¬åŠ è½½å›¾ç‰‡å¤±è´¥çš„æ—¶å€™ï¼Œå›¾ç‰‡åœ°å€å­˜åœ¨ï¼Œä½†æ˜¯å´ä¸èƒ½æ˜¾ç¤ºï¼Œä¹‹å‰æˆ‘ä»¬å°è£…çš„å›¾ç‰‡é”™è¯¯æŒ‡ä»¤å¯ä»¥åº”ç”¨</p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img  :src="userInfo.staffPhoto" v-imageerror="defaultImg"&gt;</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å·¥ä½œæ—¥å†ç»„ä»¶å°è£…"><a href="#å·¥ä½œæ—¥å†ç»„ä»¶å°è£…" class="headerlink" title="å·¥ä½œæ—¥å†ç»„ä»¶å°è£…"></a>å·¥ä½œæ—¥å†ç»„ä»¶å°è£…</h2><p>**<code>ç›®æ ‡</code>**å°è£…ä¸€ä¸ªå·¥ä½œæ—¥å†ç»„ä»¶åœ¨é¦–é¡µä¸­å±•ç¤º</p>
<h3 id="æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„"><a href="#æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„" class="headerlink" title="æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„"></a>æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„</h3><blockquote>
<p> å·¥ä½œæ—¥å†çš„è¦æ±‚å¾ˆç®€å•ï¼Œæ˜¾ç¤ºæ¯ä¸ªæœˆçš„æ—¥æœŸï¼Œå¯ä»¥è®¾å®šæ—¥æœŸçš„èŒƒå›´</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åŸºäºElementç»„ä»¶<a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/calendar">el-calendar</a>è¿›è¡Œå°è£…</p>
<p>ä»£ç å¦‚ä¸‹  <strong><code>src/views/dashboard/components/work-calendar.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-row type="flex" justify="end"&gt;</span><br><span class="line">      &lt;el-select v-model="currentYear" size="small" style="width: 120px" @change="dateChange"&gt;</span><br><span class="line">        &lt;el-option v-for="item in yearList" :key="item" :label="item" :value="item"&gt;{{ item }}&lt;/el-option&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">      &lt;el-select v-model="currentMonth" size="small" style="width: 120px;margin-left:10px" @change="dateChange"&gt;</span><br><span class="line">        &lt;el-option v-for="item in 12" :key="item" :label="item" :value="item"&gt;{{ item }}&lt;/el-option&gt;</span><br><span class="line">      &lt;/el-select&gt;</span><br><span class="line">    &lt;/el-row&gt;</span><br><span class="line">    &lt;el-calendar v-model="currentDate"&gt;</span><br><span class="line">      &lt;template v-slot:dateCell="{ date, data }" class="content"&gt;</span><br><span class="line">        &lt;div class="date-content"&gt;</span><br><span class="line">          &lt;span class="text"&gt; {{ data.day | getDay }}&lt;/span&gt;</span><br><span class="line">          &lt;span v-if="isWeek(date)" class="rest"&gt;ä¼‘&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt; </span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-calendar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default {</span><br><span class="line">  props: {</span><br><span class="line">    startDate: {</span><br><span class="line">      type: Date,</span><br><span class="line">      default: () =&gt; new Date()</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      currentMonth: null, // å½“å‰æœˆä»½</span><br><span class="line">      currentYear: null, // å½“å‰å¹´ä»½</span><br><span class="line">      currentDate: null,</span><br><span class="line">      yearList: []</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style  scoped&gt;</span><br><span class="line"> /deep/ .el-calendar-day {</span><br><span class="line">  height:  auto;</span><br><span class="line"> }</span><br><span class="line"> /deep/ .el-calendar-table__row td,/deep/ .el-calendar-table tr td:first-child,  /deep/ .el-calendar-table__row td.prev{</span><br><span class="line">  border:none;</span><br><span class="line"> }</span><br><span class="line">.date-content {</span><br><span class="line">  height: 40px;</span><br><span class="line">  text-align: center;</span><br><span class="line">  line-height: 40px;</span><br><span class="line">  font-size: 14px;</span><br><span class="line">}</span><br><span class="line">.date-content .rest {</span><br><span class="line">  color: #fff;</span><br><span class="line">  border-radius: 50%;</span><br><span class="line">  background: rgb(250, 124, 77);</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  font-size: 12px;</span><br><span class="line">  margin-left: 10px;</span><br><span class="line">}</span><br><span class="line">.date-content .text{</span><br><span class="line">  width: 20px;</span><br><span class="line">  height: 20px;</span><br><span class="line">  line-height: 20px;</span><br><span class="line"> display: inline-block;</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"> /deep/ .el-calendar-table td.is-selected .text{</span><br><span class="line">   background: #409eff;</span><br><span class="line">   color: #fff;</span><br><span class="line">   border-radius: 50%;</span><br><span class="line"> }</span><br><span class="line"> /deep/ .el-calendar__header {</span><br><span class="line">   display: none</span><br><span class="line"> }</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å®ç°å·¥ä½œæ—¥å†é€»è¾‘"><a href="#å®ç°å·¥ä½œæ—¥å†é€»è¾‘" class="headerlink" title="å®ç°å·¥ä½œæ—¥å†é€»è¾‘"></a>å®ç°å·¥ä½œæ—¥å†é€»è¾‘</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">filters</span>: {</span><br><span class="line">    <span class="function"><span class="title">getDay</span>(<span class="params">value</span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> day = value.split(<span class="string">'-'</span>)[<span class="number">2</span>]</span><br><span class="line">      <span class="keyword">return</span> day.startsWith(<span class="string">'0'</span>) ? day.substr(<span class="number">1</span>) : day</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">props</span>: {</span><br><span class="line">    <span class="attr">startDate</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Date</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">currentMonth</span>: <span class="literal">null</span>, <span class="comment">// å½“å‰æœˆä»½</span></span><br><span class="line">      <span class="attr">currentYear</span>: <span class="literal">null</span>, <span class="comment">// å½“å‰å¹´ä»½</span></span><br><span class="line">      <span class="attr">currentDate</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">yearList</span>: []</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">//   åˆå§‹åŒ–äº‹ä»¶</span></span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {</span><br><span class="line">    <span class="comment">//    å¤„ç†èµ·å§‹æ—¶é—´</span></span><br><span class="line">    <span class="comment">// ç»„ä»¶è¦æ±‚èµ·å§‹æ—¶é—´å¿…é¡»æ˜¯ å‘¨ä¸€å¼€å§‹ ä»¥ä¸€ä¸ªæœˆä¸ºå¼€å§‹</span></span><br><span class="line">    <span class="built_in">this</span>.currentMonth = <span class="built_in">this</span>.startDate.getMonth() + <span class="number">1</span></span><br><span class="line">    <span class="built_in">this</span>.currentYear = <span class="built_in">this</span>.startDate.getFullYear()</span><br><span class="line">    <span class="comment">// æ ¹æ®å½“å‰çš„å¹´ ç”Ÿæˆå¯é€‰å¹´ä»½ å‰åå„åŠ 5å¹´</span></span><br><span class="line">    <span class="built_in">this</span>.yearList = <span class="built_in">Array</span>.from(<span class="built_in">Array</span>(<span class="number">11</span>), <span class="function">(<span class="params">value, index</span>) =&gt;</span>  <span class="built_in">this</span>.currentYear + index - <span class="number">5</span> )</span><br><span class="line">    <span class="comment">// è®¡ç®— å½“å¹´å½“æœˆçš„ç¬¬ä¸€ä¸ªå‘¨ä¸€ å†åŠ ä¸Š å››å‘¨ä¹‹åçš„ä¸€ä¸ªæœˆæœˆä»½</span></span><br><span class="line">    <span class="built_in">this</span>.dateChange()</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="comment">// æ˜¯å¦æ˜¯ä¼‘æ¯æ—¥</span></span><br><span class="line">    <span class="function"><span class="title">isWeek</span>(<span class="params">value</span>)</span> {</span><br><span class="line">      <span class="keyword">return</span> value.getDay() === <span class="number">6</span> || value.getDay() === <span class="number">0</span></span><br><span class="line">    },</span><br><span class="line">    <span class="comment">// å¹´æœˆä»½æ”¹å˜ä¹‹å</span></span><br><span class="line">    <span class="function"><span class="title">dateChange</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="keyword">const</span> year = <span class="built_in">this</span>.currentYear</span><br><span class="line">      <span class="keyword">const</span> month = <span class="built_in">this</span>.currentMonth</span><br><span class="line">      <span class="built_in">this</span>.currentDate = <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">`<span class="subst">${year}</span>-<span class="subst">${month}</span>-1`</span>) <span class="comment">// ä»¥å½“å‰æœˆçš„1å·ä¸ºèµ·å§‹</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åœ¨ä¸»é¡µä¸­åº”ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®æ—¥å†ç»„ä»¶ --&gt;</span><br><span class="line">&lt;work-calendar /&gt;</span><br></pre></td></tr></tbody></table></figure>



<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ"><a href="#å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ" class="headerlink" title="å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ"></a>å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ</h2><p>**<code>ç›®æ ‡</code>**ï¼šå°è£…ä¸€ä¸ªechartsä¸­çš„é›·è¾¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µçš„ç»©æ•ˆæŒ‡æ•°çš„ä½ç½®</p>
<h3 id="äº†è§£é›·è¾¾å›¾"><a href="#äº†è§£é›·è¾¾å›¾" class="headerlink" title="äº†è§£é›·è¾¾å›¾"></a>äº†è§£é›·è¾¾å›¾</h3><h3 id="å°è£…é›·è¾¾å›¾æ’ä»¶"><a href="#å°è£…é›·è¾¾å›¾æ’ä»¶" class="headerlink" title="å°è£…é›·è¾¾å›¾æ’ä»¶"></a>å°è£…é›·è¾¾å›¾æ’ä»¶</h3><blockquote>
<p>é¦–é¡µä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªç»©æ•ˆæŒ‡æ•°çš„ä½ç½®éœ€è¦æ”¾ç½®ä¸€ä¸ªé›·è¾¾å›¾çš„å›¾è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ç™¾åº¦çš„echartsè¿›è¡Œå°è£…</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œ å®‰è£…echartså›¾è¡¨</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i echarts</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>echartsæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„åŒ…ï¼Œé‡Œé¢åŒ…å«äº†ä¼—å¤šå›¾å½¢ï¼Œå‡è®¾æˆ‘ä»¬åªä½¿ç”¨é›·è¾¾å›¾ï¼Œå¯ä»¥åšæŒ‰éœ€åŠ è½½</p>
</blockquote>
<p>ç¬¬äºŒæ­¥ï¼Œ æ–°å»ºé›·è¾¾å›¾ç»„ä»¶ï¼Œ**<code>src/views/dashboard/components/radar.vue</code>**</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- é›·è¾¾å›¾  å›¾è¡¨å¿…é¡»ç»™é«˜å’Œå®½åº¦--&gt;</span><br><span class="line">  &lt;div ref="myDiv" class="radar-echart" /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// å®ŒæˆåŠ è½½è¿‡ç¨‹</span><br><span class="line">// var echarts = require('echarts')</span><br><span class="line">var echarts = require('echarts/lib/echarts') // å¼•å…¥echartsä¸»æ¨¡å—</span><br><span class="line">require('echarts/lib/chart/radar') // å¼•å…¥é›·è¾¾å›¾</span><br><span class="line">// å¼•å…¥æç¤ºæ¡†å’Œæ ‡é¢˜ç»„ä»¶</span><br><span class="line">require('echarts/lib/component/tooltip')</span><br><span class="line">require('echarts/lib/component/title')</span><br><span class="line"></span><br><span class="line">export default {</span><br><span class="line">  // é¡µé¢æ¸²æŸ“å®Œæ¯•äº‹ä»¶</span><br><span class="line">  mounted() {</span><br><span class="line">    const myChart = echarts.init(this.$refs.myDiv) // å¾—åˆ°å›¾è¡¨å®ä¾‹</span><br><span class="line">    myChart.setOption({</span><br><span class="line">      title: {</span><br><span class="line">        text: 'åŸºç¡€é›·è¾¾å›¾'</span><br><span class="line">      },</span><br><span class="line">      tooltip: {},</span><br><span class="line">      legend: {</span><br><span class="line">        data: ['é¢„ç®—åˆ†é…ï¼ˆAllocated Budgetï¼‰', 'å®é™…å¼€é”€ï¼ˆActual Spendingï¼‰']</span><br><span class="line">      },</span><br><span class="line">      radar: {</span><br><span class="line">        // shape: 'circle',</span><br><span class="line">        name: {</span><br><span class="line">          textStyle: {</span><br><span class="line">            color: '#fff',</span><br><span class="line">            backgroundColor: '#999',</span><br><span class="line">            borderRadius: 3,</span><br><span class="line">            padding: [3, 5]</span><br><span class="line">          }</span><br><span class="line">        },</span><br><span class="line">        // æ¯ä¸ªåŒºåŸŸçš„æœ€é«˜å€¼</span><br><span class="line">        indicator: [</span><br><span class="line">          { name: 'å·¥ä½œæ•ˆç‡', max: 100 },</span><br><span class="line">          { name: 'è€ƒå‹¤', max: 100 },</span><br><span class="line">          { name: 'ç§¯ææ€§', max: 100 },</span><br><span class="line">          { name: 'å¸®åŠ©åŒäº‹', max: 100 },</span><br><span class="line">          { name: 'è‡ªä¸»å­¦ä¹ ', max: 100 },</span><br><span class="line">          { name: 'æ­£ç¡®ç‡', max: 100 }</span><br><span class="line">        ]</span><br><span class="line">      },</span><br><span class="line">      series: [{</span><br><span class="line">        name: 'é¢„ç®— vs å¼€é”€ï¼ˆBudget vs spendingï¼‰',</span><br><span class="line">        type: 'radar',</span><br><span class="line">        // areaStyle: {normal: {}},</span><br><span class="line">        data: [</span><br><span class="line">          {</span><br><span class="line">            value: [10, 1, 100, 5, 100, 0],</span><br><span class="line">            name: 'å¼ ä¸‰'</span><br><span class="line">          },</span><br><span class="line">          {</span><br><span class="line">            value: [50, 50, 50, 50, 50, 10],</span><br><span class="line">            name: 'æå››'</span><br><span class="line">          }</span><br><span class="line">        ]</span><br><span class="line">      }]</span><br><span class="line">    })</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.radar-echart {</span><br><span class="line">    width: 600px;</span><br><span class="line">    height: 400px;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªé›·è¾¾å›¾ï¼Œå¯¹ç»©æ•ˆæŒ‡æ•°è¿›è¡Œç»Ÿè®¡</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200924111334856.png" alt="image-20200924111334856"></p>
<p>**<code>æ³¨æ„</code>**ï¼šç›¸å…³æ•°æ®çš„ç¼ºå¤±ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¿›è¡Œçš„æ˜¯æ¨¡æ‹Ÿæ•°æ®</p>
<p><strong>åœ¨ä¸»é¡µä¸­å¼•å…¥ä½¿ç”¨</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Radar from './components/radar'</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»"><a href="#å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»" class="headerlink" title="å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»"></a>å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»</h2><blockquote>
<p>ä»€ä¹ˆæ˜¯å®¡æ‰¹æµç¨‹</p>
</blockquote>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20201102215131402.png" alt="image-20201102215131402"></p>
<h2 id="æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹"><a href="#æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹" class="headerlink" title="æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹"></a>æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹</h2><p>**<code>ç›®æ ‡</code>**ï¼š æäº¤ä¸€ä¸ªç¦»èŒçš„å®¡æ‰¹ï¼Œå¹¶å®Œæˆä¸šåŠ¡æµè½¬</p>
<p><strong>ç¦»èŒå¼¹å±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼¹å‡ºå±‚ --&gt;</span><br><span class="line">&lt;el-dialog :visible="showDialog" title="ç¦»èŒç”³è¯·" @close="btnCancel"&gt;</span><br><span class="line">  &lt;el-form</span><br><span class="line">    ref="ruleForm"</span><br><span class="line">    :model="ruleForm"</span><br><span class="line">    status-icon</span><br><span class="line">    label-width="110px"</span><br><span class="line">    :rules="rules"</span><br><span class="line">  &gt;</span><br><span class="line">    &lt;!--ç¦»èŒè¡¨å•--&gt;</span><br><span class="line">    &lt;el-form-item label="ç¦»èŒæ—¶é—´" prop="end_time"&gt;</span><br><span class="line">      &lt;el-date-picker</span><br><span class="line">        v-model="ruleForm.exceptTime"</span><br><span class="line">        type="datetime"</span><br><span class="line">        value-format="yyyy-MM-dd HH:mm:ss"</span><br><span class="line">        placeholder="é€‰æ‹©æ—¥æœŸæ—¶é—´"</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label="ç¦»èŒåŸå› " prop="reason"&gt;</span><br><span class="line">      &lt;el-input</span><br><span class="line">        v-model="ruleForm.reason"</span><br><span class="line">        type="textarea"</span><br><span class="line">        :autosize="{ minRows: 3, maxRows: 8}"</span><br><span class="line">        style="width: 70%;"</span><br><span class="line">        placeholder="è¯·è¾“å…¥å†…å®¹"</span><br><span class="line">      /&gt;</span><br><span class="line">    &lt;/el-form-item&gt;</span><br><span class="line">  &lt;/el-form&gt;</span><br><span class="line">  &lt;el-row slot="footer" type="flex" justify="center"&gt;</span><br><span class="line">    &lt;el-col :span="6"&gt;</span><br><span class="line">      &lt;el-button size="small" type="primary" @click="btnOK"&gt;ç¡®å®š&lt;/el-button&gt;</span><br><span class="line">      &lt;el-button size="small" @click="btnCancel"&gt;å–æ¶ˆ&lt;/el-button&gt;</span><br><span class="line">    &lt;/el-col&gt;</span><br><span class="line">  &lt;/el-row&gt;</span><br><span class="line">&lt;/el-dialog&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ˜¾ç¤ºå¼¹å±‚</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button class="sideBtn" @click="showDialog = true"&gt;åŠ ç­ç¦»èŒ&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>åŠ ç­æ•°æ®åŠæ ¡éªŒ</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">showDialog: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">ruleForm</span>: {</span><br><span class="line">  <span class="attr">exceptTime</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="attr">reason</span>: <span class="string">''</span>,</span><br><span class="line">  <span class="attr">processKey</span>: <span class="string">'process_dimission'</span>, <span class="comment">// ç‰¹å®šçš„å®¡æ‰¹</span></span><br><span class="line">  <span class="attr">processName</span>: <span class="string">'ç¦»èŒ'</span></span><br><span class="line">},</span><br><span class="line"><span class="attr">rules</span>: {</span><br><span class="line">  <span class="attr">exceptTime</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'ç¦»èŒæ—¶é—´ä¸èƒ½ä¸ºç©º'</span> }],</span><br><span class="line">  <span class="attr">reason</span>: [{ <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">'ç¦»èŒåŸå› ä¸èƒ½ä¸ºç©º'</span> }]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤å®¡æ‰¹é€»è¾‘</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { startProcess } <span class="keyword">from</span> <span class="string">'@/api/approvals'</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">methods</span>: {</span><br><span class="line">    <span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.$refs.ruleForm.validate(<span class="keyword">async</span> validate =&gt; {</span><br><span class="line">        <span class="keyword">if</span> (validate) {</span><br><span class="line">          <span class="keyword">const</span> data = { ...this.ruleForm, <span class="attr">userId</span>: <span class="built_in">this</span>.userInfo.userId }</span><br><span class="line">          <span class="keyword">await</span> startProcess(data)</span><br><span class="line">          <span class="built_in">this</span>.$message.success(<span class="string">'æäº¤æµç¨‹æˆåŠŸ'</span>)</span><br><span class="line">          <span class="built_in">this</span>.btnCancel()</span><br><span class="line">        }</span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    <span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> {</span><br><span class="line">      <span class="built_in">this</span>.showDialog = <span class="literal">false</span></span><br><span class="line">      <span class="built_in">this</span>.$refs.ruleForm.resetFields()</span><br><span class="line">      <span class="built_in">this</span>.ruleForm = {</span><br><span class="line">        <span class="attr">exceptTime</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">reason</span>: <span class="string">''</span>,</span><br><span class="line">        <span class="attr">processKey</span>: <span class="string">'process_dimission'</span>, <span class="comment">// ç‰¹å®šçš„å®¡æ‰¹</span></span><br><span class="line">        <span class="attr">processName</span>: <span class="string">'ç¦»èŒ'</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>

<p><strong>é…ç½®å®¡æ‰¹åˆ—è¡¨çš„å¯¼èˆª</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button class="sideBtn" @click="$router.push('/users/approvals')"&gt;å®¡æ‰¹åˆ—è¡¨&lt;/el-button&gt;</span><br><span class="line">&lt;el-button class="sideBtn" @click="$router.push('/users/info')"&gt;æˆ‘çš„ä¿¡æ¯&lt;/el-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>å®Œæˆè¯¥æµç¨‹çš„å®¡æ‰¹å’Œæµè½¬</strong></p>
<p>æ³¨æ„ï¼š å®¡æ‰¹æ¥å£ä¸­çš„åŒæ„æ¥å£å­˜åœ¨ä¸€å®šé—®é¢˜ï¼Œå¯ä»¥æµ‹è¯•   æäº¤ /æ’¤é”€ é©³å›ç­‰æ“ä½œ</p>
<p><strong><code>æäº¤ä»£ç </code></strong></p>
<h1 id="11-å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜"><a href="#11-å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜" class="headerlink" title="11.å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜"></a>11.å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜</h1><h2 id="å…¨å±æ’ä»¶çš„å¼•ç”¨"><a href="#å…¨å±æ’ä»¶çš„å¼•ç”¨" class="headerlink" title="å…¨å±æ’ä»¶çš„å¼•ç”¨"></a>å…¨å±æ’ä»¶çš„å¼•ç”¨</h2><p><strong>ç›®æ ‡</strong>ï¼šå®ç°é¡µé¢çš„å…¨å±åŠŸèƒ½</p>
<blockquote>
<p>å…¨å±åŠŸèƒ½å¯ä»¥å€ŸåŠ©ä¸€ä¸ªæ’ä»¶æ¥å®ç°</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œå®‰è£…å…¨å±€æ’ä»¶<strong>screenfull</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i screenfull</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬äºŒæ­¥ï¼Œå°è£…å…¨å±æ˜¾ç¤ºçš„æ’ä»¶Â·Â· <strong><code>src/components/ScreenFull/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- æ”¾ç½®ä¸€ä¸ªå›¾æ ‡ --&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- æ”¾ç½®ä¸€ä¸ªsvgçš„å›¾æ ‡ --&gt;</span><br><span class="line">    &lt;svg-icon icon-class="fullscreen" style="color:#fff; width: 20px; height: 20px" @click="changeScreen" /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import ScreenFull from 'screenfull'</span><br><span class="line">export default {</span><br><span class="line">  methods: {</span><br><span class="line">    //   æ”¹å˜å…¨å±</span><br><span class="line">    changeScreen() {</span><br><span class="line">      if (!ScreenFull.isEnabled) {</span><br><span class="line">        // æ­¤æ—¶å…¨å±ä¸å¯ç”¨</span><br><span class="line">        this.$message.warning('æ­¤æ—¶å…¨å±ç»„ä»¶ä¸å¯ç”¨')</span><br><span class="line">        return</span><br><span class="line">      }</span><br><span class="line">      // document.documentElement.requestFullscreen()  åŸç”Ÿjsè°ƒç”¨</span><br><span class="line">      //   å¦‚æœå¯ç”¨ å°±å¯ä»¥å…¨å±</span><br><span class="line">      ScreenFull.toggle()</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼Œå…¨å±€æ³¨å†Œè¯¥ç»„ä»¶  <strong><code>src/components/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ScreenFull <span class="keyword">from</span> <span class="string">'./ScreenFull'</span></span><br><span class="line">Vue.component(<span class="string">'ScreenFull'</span>, ScreenFull) <span class="comment">// æ³¨å†Œå…¨å±ç»„ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬å››æ­¥ï¼Œæ”¾ç½®äº**<code>layout/navbar.vue</code>**ä¸­</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;screen-full class="right-menu-item" /&gt;</span><br><span class="line">.right-menu-item {</span><br><span class="line">   vertical-align: middle;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<p>**<code>æœ¬èŠ‚ä»»åŠ¡</code>**ï¼š å®ç°é¡µé¢çš„å…¨å±åŠŸèƒ½</p>
<h2 id="åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®"><a href="#åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®" class="headerlink" title="åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®"></a>åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®</p>
<blockquote>
<p>æˆ‘ä»¬æƒ³è¦å®ç°åœ¨é¡µé¢ä¸­å®æ—¶çš„åˆ‡æ¢é¢œè‰²ï¼Œæ­¤æ—¶é¡µé¢çš„ä¸»é¢˜å¯ä»¥è·Ÿç€è®¾ç½®çš„é¢œè‰²è¿›è¡Œå˜åŒ–</p>
</blockquote>
<p><strong>ç®€å•è¯´æ˜ä¸€ä¸‹å®ƒçš„åŸç†ï¼š</strong> element-ui 2.0 ç‰ˆæœ¬ä¹‹åæ‰€æœ‰çš„æ ·å¼éƒ½æ˜¯åŸºäº SCSS ç¼–å†™çš„ï¼Œæ‰€æœ‰çš„é¢œè‰²éƒ½æ˜¯åŸºäºå‡ ä¸ªåŸºç¡€é¢œè‰²<a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/custom-element-theme/blob/master/element-variables.scss">å˜é‡</a>æ¥è®¾ç½®çš„ï¼Œæ‰€ä»¥å°±ä¸éš¾å®ç°åŠ¨æ€æ¢è‚¤äº†ï¼Œåªè¦æ‰¾åˆ°é‚£å‡ ä¸ªé¢œè‰²å˜é‡ä¿®æ”¹å®ƒå°±å¯ä»¥äº†ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‹¿åˆ°é€šè¿‡ <code>package.json</code> æ‹¿åˆ° element-ui çš„ç‰ˆæœ¬å·ï¼Œæ ¹æ®è¯¥ç‰ˆæœ¬å·å»è¯·æ±‚ç›¸åº”çš„æ ·å¼ã€‚æ‹¿åˆ°æ ·å¼ä¹‹åå°†æ ·è‰²ï¼Œé€šè¿‡æ­£åˆ™åŒ¹é…å’Œæ›¿æ¢ï¼Œå°†é¢œè‰²å˜é‡æ›¿æ¢æˆä½ éœ€è¦çš„ï¼Œä¹‹ååŠ¨æ€æ·»åŠ  <code>style</code> æ ‡ç­¾æ¥è¦†ç›–åŸæœ‰çš„ css æ ·å¼ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼Œ å°è£…é¢œè‰²é€‰æ‹©ç»„ä»¶ <strong><code>ThemePicker</code></strong> ä»£ç åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/PanJiaChen/vue-element-admin/blob/master/src/components/ThemePicker/index.vue">@/components/ThemePicker</a>ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæœ¬ç« èŠ‚é‡ç‚¹åœ¨äºé›†æˆï¼Œå†…éƒ¨çš„æ›´æ¢ä¸»é¢˜å¯ä»¥å…ˆä¸ç”¨å…³å¿ƒã€‚</p>
</blockquote>
<p><strong>å®ç°ä»£ç </strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-color-picker</span><br><span class="line">    v-model="theme"</span><br><span class="line">    :predefine="['#409EFF', '#1890ff', '#304156','#212121','#11a983', '#13c2c2', '#6959CD', '#f5222d', ]"</span><br><span class="line">    class="theme-picker"</span><br><span class="line">    popper-class="theme-picker-dropdown"</span><br><span class="line">  /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">const version = require('element-ui/package.json').version // element-ui version from node_modules</span><br><span class="line">const ORIGINAL_THEME = '#409EFF' // default color</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      chalk: '', // content of theme-chalk css</span><br><span class="line">      theme: ''</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  computed: {</span><br><span class="line">    defaultTheme() {</span><br><span class="line">      return this.$store.state.settings.theme</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  watch: {</span><br><span class="line">    defaultTheme: {</span><br><span class="line">      handler: function(val, oldVal) {</span><br><span class="line">        this.theme = val</span><br><span class="line">      },</span><br><span class="line">      immediate: true</span><br><span class="line">    },</span><br><span class="line">    async theme(val) {</span><br><span class="line">      const oldVal = this.chalk ? this.theme : ORIGINAL_THEME</span><br><span class="line">      if (typeof val !== 'string') return</span><br><span class="line">      const themeCluster = this.getThemeCluster(val.replace('#', ''))</span><br><span class="line">      const originalCluster = this.getThemeCluster(oldVal.replace('#', ''))</span><br><span class="line">      console.log(themeCluster, originalCluster)</span><br><span class="line">      const $message = this.$message({</span><br><span class="line">        message: '  Compiling the theme',</span><br><span class="line">        customClass: 'theme-message',</span><br><span class="line">        type: 'success',</span><br><span class="line">        duration: 0,</span><br><span class="line">        iconClass: 'el-icon-loading'</span><br><span class="line">      })</span><br><span class="line">      const getHandler = (variable, id) =&gt; {</span><br><span class="line">        return () =&gt; {</span><br><span class="line">          const originalCluster = this.getThemeCluster(ORIGINAL_THEME.replace('#', ''))</span><br><span class="line">          const newStyle = this.updateStyle(this[variable], originalCluster, themeCluster)</span><br><span class="line">          let styleTag = document.getElementById(id)</span><br><span class="line">          if (!styleTag) {</span><br><span class="line">            styleTag = document.createElement('style')</span><br><span class="line">            styleTag.setAttribute('id', id)</span><br><span class="line">            document.head.appendChild(styleTag)</span><br><span class="line">          }</span><br><span class="line">          styleTag.innerText = newStyle</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      if (!this.chalk) {</span><br><span class="line">        const url = `https://unpkg.com/element-ui@${version}/lib/theme-chalk/index.css`</span><br><span class="line">        await this.getCSSString(url, 'chalk')</span><br><span class="line">      }</span><br><span class="line">      const chalkHandler = getHandler('chalk', 'chalk-style')</span><br><span class="line">      chalkHandler()</span><br><span class="line">      const styles = [].slice.call(document.querySelectorAll('style'))</span><br><span class="line">        .filter(style =&gt; {</span><br><span class="line">          const text = style.innerText</span><br><span class="line">          return new RegExp(oldVal, 'i').test(text) &amp;&amp; !/Chalk Variables/.test(text)</span><br><span class="line">        })</span><br><span class="line">      styles.forEach(style =&gt; {</span><br><span class="line">        const { innerText } = style</span><br><span class="line">        if (typeof innerText !== 'string') return</span><br><span class="line">        style.innerText = this.updateStyle(innerText, originalCluster, themeCluster)</span><br><span class="line">      })</span><br><span class="line">      this.$emit('change', val)</span><br><span class="line">      $message.close()</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  methods: {</span><br><span class="line">    updateStyle(style, oldCluster, newCluster) {</span><br><span class="line">      let newStyle = style</span><br><span class="line">      oldCluster.forEach((color, index) =&gt; {</span><br><span class="line">        newStyle = newStyle.replace(new RegExp(color, 'ig'), newCluster[index])</span><br><span class="line">      })</span><br><span class="line">      return newStyle</span><br><span class="line">    },</span><br><span class="line">    getCSSString(url, variable) {</span><br><span class="line">      return new Promise(resolve =&gt; {</span><br><span class="line">        const xhr = new XMLHttpRequest()</span><br><span class="line">        xhr.onreadystatechange = () =&gt; {</span><br><span class="line">          if (xhr.readyState === 4 &amp;&amp; xhr.status === 200) {</span><br><span class="line">            this[variable] = xhr.responseText.replace(/@font-face{[^}]+}/, '')</span><br><span class="line">            resolve()</span><br><span class="line">          }</span><br><span class="line">        }</span><br><span class="line">        xhr.open('GET', url)</span><br><span class="line">        xhr.send()</span><br><span class="line">      })</span><br><span class="line">    },</span><br><span class="line">    getThemeCluster(theme) {</span><br><span class="line">      const tintColor = (color, tint) =&gt; {</span><br><span class="line">        let red = parseInt(color.slice(0, 2), 16)</span><br><span class="line">        let green = parseInt(color.slice(2, 4), 16)</span><br><span class="line">        let blue = parseInt(color.slice(4, 6), 16)</span><br><span class="line">        if (tint === 0) { // when primary color is in its rgb space</span><br><span class="line">          return [red, green, blue].join(',')</span><br><span class="line">        } else {</span><br><span class="line">          red += Math.round(tint * (255 - red))</span><br><span class="line">          green += Math.round(tint * (255 - green))</span><br><span class="line">          blue += Math.round(tint * (255 - blue))</span><br><span class="line">          red = red.toString(16)</span><br><span class="line">          green = green.toString(16)</span><br><span class="line">          blue = blue.toString(16)</span><br><span class="line">          return `#${red}${green}${blue}`</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line">      const shadeColor = (color, shade) =&gt; {</span><br><span class="line">        let red = parseInt(color.slice(0, 2), 16)</span><br><span class="line">        let green = parseInt(color.slice(2, 4), 16)</span><br><span class="line">        let blue = parseInt(color.slice(4, 6), 16)</span><br><span class="line">        red = Math.round((1 - shade) * red)</span><br><span class="line">        green = Math.round((1 - shade) * green)</span><br><span class="line">        blue = Math.round((1 - shade) * blue)</span><br><span class="line">        red = red.toString(16)</span><br><span class="line">        green = green.toString(16)</span><br><span class="line">        blue = blue.toString(16)</span><br><span class="line">        return `#${red}${green}${blue}`</span><br><span class="line">      }</span><br><span class="line">      const clusters = [theme]</span><br><span class="line">      for (let i = 0; i &lt;= 9; i++) {</span><br><span class="line">        clusters.push(tintColor(theme, Number((i / 10).toFixed(2))))</span><br><span class="line">      }</span><br><span class="line">      clusters.push(shadeColor(theme, 0.1))</span><br><span class="line">      return clusters</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.theme-message,</span><br><span class="line">.theme-picker-dropdown {</span><br><span class="line">  z-index: 99999 !important;</span><br><span class="line">}</span><br><span class="line">.theme-picker .el-color-picker__trigger {</span><br><span class="line">  height: 26px !important;</span><br><span class="line">  width: 26px !important;</span><br><span class="line">  padding: 2px;</span><br><span class="line">}</span><br><span class="line">.theme-picker-dropdown .el-color-dropdown__link-btn {</span><br><span class="line">  display: none;</span><br><span class="line">}</span><br><span class="line">.el-color-picker {</span><br><span class="line">  height: auto !important;</span><br><span class="line">}</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ³¨å†Œä»£ç </strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ThemePicker <span class="keyword">from</span> <span class="string">'./ThemePicker'</span></span><br><span class="line">Vue.component(<span class="string">'ThemePicker'</span>, ThemePicker)</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬äºŒæ­¥ï¼Œ  æ”¾ç½®äº**<code>layout/navbar.vue</code>**ä¸­</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®å…¨å±æ’ä»¶ --&gt;</span><br><span class="line"> &lt;theme-picker class="right-menu-item" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="å¤šè¯­è¨€å®ç°"><a href="#å¤šè¯­è¨€å®ç°" class="headerlink" title="å¤šè¯­è¨€å®ç°"></a>å¤šè¯­è¨€å®ç°</h2><p>**<code>ç›®æ ‡</code>**å®ç°å›½é™…åŒ–è¯­è¨€åˆ‡æ¢</p>
<h3 id="åˆå§‹åŒ–å¤šè¯­è¨€åŒ…"><a href="#åˆå§‹åŒ–å¤šè¯­è¨€åŒ…" class="headerlink" title="åˆå§‹åŒ–å¤šè¯­è¨€åŒ…"></a>åˆå§‹åŒ–å¤šè¯­è¨€åŒ…</h3><p>æœ¬é¡¹ç›®ä½¿ç”¨å›½é™…åŒ– i18n æ–¹æ¡ˆã€‚é€šè¿‡ <a target="_blank" rel="noopener" href="https://github.com/kazupon/vue-i18n">vue-i18n</a>è€Œå®ç°ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆå›½é™…åŒ–çš„åŒ…</strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i vue-i18n</span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¬¬äºŒæ­¥ï¼Œéœ€è¦å•ç‹¬ä¸€ä¸ªå¤šè¯­è¨€çš„å®ä¾‹åŒ–æ–‡ä»¶ <code>src/lang/index.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span> <span class="comment">// å¼•å…¥Vue</span></span><br><span class="line"><span class="keyword">import</span> VueI18n <span class="keyword">from</span> <span class="string">'vue-i18n'</span> <span class="comment">// å¼•å…¥å›½é™…åŒ–çš„åŒ…</span></span><br><span class="line"><span class="keyword">import</span> Cookie <span class="keyword">from</span> <span class="string">'js-cookie'</span> <span class="comment">// å¼•å…¥cookieåŒ…</span></span><br><span class="line"><span class="keyword">import</span> elementEN <span class="keyword">from</span> <span class="string">'element-ui/lib/locale/lang/en'</span> <span class="comment">// å¼•å…¥é¥¿äº†ä¹ˆçš„è‹±æ–‡åŒ…</span></span><br><span class="line"><span class="keyword">import</span> elementZH <span class="keyword">from</span> <span class="string">'element-ui/lib/locale/lang/zh-CN'</span> <span class="comment">// å¼•å…¥é¥¿äº†ä¹ˆçš„ä¸­æ–‡åŒ…</span></span><br><span class="line">Vue.use(VueI18n) <span class="comment">// å…¨å±€æ³¨å†Œå›½é™…åŒ–åŒ…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueI18n({</span><br><span class="line">  <span class="attr">locale</span>: Cookie.get(<span class="string">'language'</span>) || <span class="string">'zh'</span>, <span class="comment">// ä»cookieä¸­è·å–è¯­è¨€ç±»å‹ è·å–ä¸åˆ°å°±æ˜¯ä¸­æ–‡</span></span><br><span class="line">  <span class="attr">messages</span>: {</span><br><span class="line">    <span class="attr">en</span>: {</span><br><span class="line">      ...elementEN <span class="comment">// å°†é¥¿äº†ä¹ˆçš„è‹±æ–‡è¯­è¨€åŒ…å¼•å…¥</span></span><br><span class="line">    },</span><br><span class="line">    <span class="attr">zh</span>: {</span><br><span class="line">      ...elementZH <span class="comment">// å°†é¥¿äº†ä¹ˆçš„ä¸­æ–‡è¯­è¨€åŒ…å¼•å…¥</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸Šé¢çš„ä»£ç çš„ä½œç”¨æ˜¯å°†Elementçš„ä¸¤ç§è¯­è¨€å¯¼å…¥äº†</p>
</blockquote>
<p><strong>ç¬¬ä¸‰æ­¥ï¼Œåœ¨main.jsä¸­å¯¹æŒ‚è½½ i18nçš„æ’ä»¶ï¼Œå¹¶è®¾ç½®elementä¸ºå½“å‰çš„è¯­è¨€</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®elementä¸ºå½“å‰çš„è¯­è¨€</span></span><br><span class="line">Vue.use(ElementUI, {</span><br><span class="line">  <span class="attr">i18n</span>: <span class="function">(<span class="params">key, value</span>) =&gt;</span> i18n.t(key, value)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue({</span><br><span class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  i18n,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…"><a href="#å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…" class="headerlink" title="å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…"></a>å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…</h3><blockquote>
<p>æ­¤æ—¶ï¼Œelementå·²ç»å˜æˆäº†zhï¼Œä¹Ÿå°±æ˜¯ä¸­æ–‡ï¼Œä½†æ˜¯æˆ‘ä»¬å¸¸è§„çš„å†…å®¹æ€ä¹ˆæ ¹æ®å½“å‰è¯­è¨€ç±»å‹æ˜¾ç¤ºï¼Ÿ</p>
</blockquote>
<p>è¿™é‡Œï¼Œé’ˆå¯¹è‹±æ–‡å’Œä¸­æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ä¸¤ä¸ªä¸åŒçš„è¯­è¨€åŒ… <strong><code>src/lang/zh.js , src/lang/en.js</code></strong></p>
<blockquote>
<p>è¯¥è¯­è¨€åŒ…ï¼Œæˆ‘ä»¬å·²ç»åœ¨èµ„æºä¸­æä¾›</p>
</blockquote>
<p><strong>ç¬¬å››æ­¥ï¼Œåœ¨index.jsä¸­åŒæ ·å¼•å…¥è¯¥è¯­è¨€åŒ…</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> customZH <span class="keyword">from</span> <span class="string">'./zh'</span> <span class="comment">// å¼•å…¥è‡ªå®šä¹‰ä¸­æ–‡åŒ…</span></span><br><span class="line"><span class="keyword">import</span> customEN <span class="keyword">from</span> <span class="string">'./en'</span> <span class="comment">// å¼•å…¥è‡ªå®šä¹‰è‹±æ–‡åŒ…</span></span><br><span class="line">Vue.use(VueI18n) <span class="comment">// å…¨å±€æ³¨å†Œå›½é™…åŒ–åŒ…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> VueI18n({</span><br><span class="line">  <span class="attr">locale</span>: Cookie.get(<span class="string">'language'</span>) || <span class="string">'zh'</span>, <span class="comment">// ä»cookieä¸­è·å–è¯­è¨€ç±»å‹ è·å–ä¸åˆ°å°±æ˜¯ä¸­æ–‡</span></span><br><span class="line">  <span class="attr">messages</span>: {</span><br><span class="line">    <span class="attr">en</span>: {</span><br><span class="line">      ...elementEN, <span class="comment">// å°†é¥¿äº†ä¹ˆçš„è‹±æ–‡è¯­è¨€åŒ…å¼•å…¥</span></span><br><span class="line">      ...customEN</span><br><span class="line">    },</span><br><span class="line">    <span class="attr">zh</span>: {</span><br><span class="line">      ...elementZH, <span class="comment">// å°†é¥¿äº†ä¹ˆçš„ä¸­æ–‡è¯­è¨€åŒ…å¼•å…¥</span></span><br><span class="line">      ...customZH</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…"><a href="#åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…" class="headerlink" title="åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…"></a>åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…</h3><blockquote>
<p> è‡ªå®šä¹‰è¯­è¨€åŒ…çš„å†…å®¹æ€ä¹ˆä½¿ç”¨?</p>
</blockquote>
<p><strong>ç¬¬äº”æ­¥ï¼Œåœ¨å·¦ä¾§èœå•åº”ç”¨</strong></p>
<p>å½“æˆ‘ä»¬å…¨å±€æ³¨å†Œi18nçš„æ—¶å€™ï¼Œæ¯ä¸ªç»„ä»¶éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ª**<code>$t</code>**çš„æ–¹æ³•ï¼Œå®ƒä¼šæ ¹æ®ä¼ å…¥çš„keyï¼Œè‡ªåŠ¨çš„å»å¯»æ‰¾å½“å‰è¯­è¨€çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥å°†å·¦ä¾§èœå•å˜æˆå¤šè¯­è¨€å±•ç¤ºæ–‡æœ¬</p>
<p><strong><code>layout/components/SidebarItem.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;item :icon="onlyOneChild.meta.icon||(item.meta&amp;&amp;item.meta.icon)" :title="$t('route.'+onlyOneChild.name)" /&gt;</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ³¨æ„ï¼šå½“æ–‡æœ¬çš„å€¼ä¸ºåµŒå¥—æ—¶ï¼Œå¯ä»¥é€šè¿‡**<code>$t(key1.key2.key3...)</code>**çš„æ–¹å¼è·å–</p>
<blockquote>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†å¤šè¯­è¨€çš„æ¥å…¥ï¼Œç°åœ¨å°è£…åˆ‡æ¢å¤šè¯­è¨€çš„ç»„ä»¶</p>
</blockquote>
<h3 id="å°è£…å¤šè¯­è¨€æ’ä»¶"><a href="#å°è£…å¤šè¯­è¨€æ’ä»¶" class="headerlink" title="å°è£…å¤šè¯­è¨€æ’ä»¶"></a>å°è£…å¤šè¯­è¨€æ’ä»¶</h3><p><strong>ç¬¬å…­æ­¥ï¼Œå°è£…å¤šè¯­è¨€ç»„ä»¶</strong>  <strong><code>src/components/lang/index.vue</code></strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-dropdown trigger="click" @command="changeLanguage"&gt;</span><br><span class="line">    &lt;!-- è¿™é‡Œå¿…é¡»åŠ ä¸€ä¸ªdiv --&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;svg-icon style="color:#fff;font-size:20px" icon-class="language" /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;el-dropdown-menu slot="dropdown"&gt;</span><br><span class="line">      &lt;el-dropdown-item command="zh" :disabled="'zh'=== $i18n.locale "&gt;ä¸­æ–‡&lt;/el-dropdown-item&gt;</span><br><span class="line">      &lt;el-dropdown-item command="en" :disabled="'en'=== $i18n.locale "&gt;en&lt;/el-dropdown-item&gt;</span><br><span class="line">    &lt;/el-dropdown-menu&gt;</span><br><span class="line">  &lt;/el-dropdown&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Cookie from 'js-cookie'</span><br><span class="line">export default {</span><br><span class="line">  methods: {</span><br><span class="line">    changeLanguage(lang) {</span><br><span class="line">      Cookie.set('language', lang) // åˆ‡æ¢å¤šè¯­è¨€</span><br><span class="line">      this.$i18n.locale = lang // è®¾ç½®ç»™æœ¬åœ°çš„i18næ’ä»¶</span><br><span class="line">      this.$message.success('åˆ‡æ¢å¤šè¯­è¨€æˆåŠŸ')</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><strong>ç¬¬ä¸ƒæ­¥ï¼Œåœ¨Navbarç»„ä»¶ä¸­å¼•å…¥</strong></p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ”¾ç½®åˆ‡æ¢å¤šè¯­è¨€ --&gt;</span><br><span class="line">     &lt;lang class="right-menu-item" /&gt;</span><br><span class="line">     &lt;!-- æ”¾ç½®ä¸»é¢˜ --&gt;</span><br><span class="line">     &lt;theme-picker class="right-menu-item" /&gt;</span><br><span class="line">     &lt;!-- æ”¾ç½®å…¨å±æ’ä»¶ --&gt;</span><br><span class="line">     &lt;screen-full class="right-menu-item" /&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆæ•ˆæœ</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200804001654730.png" alt="image-20200804001654730"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="tabé¡µçš„è§†å›¾å¼•å…¥"><a href="#tabé¡µçš„è§†å›¾å¼•å…¥" class="headerlink" title="tabé¡µçš„è§†å›¾å¼•å…¥"></a>tabé¡µçš„è§†å›¾å¼•å…¥</h2><p>**<code>ç›®æ ‡</code>**ï¼š å®ç°tabé¡µæ‰“å¼€è·¯ç”±çš„åŠŸèƒ½</p>
<blockquote>
<p>å½“å‰æˆ‘ä»¬å®ç°çš„æ‰“å¼€é¡µé¢ï¼Œçœ‹åˆ°ä¸€ä¸ªé¡µé¢ä¹‹åï¼Œå¦ä¸€ä¸ªé¡µé¢å°±ä¼šå…³é—­ï¼Œä¸ºäº†æ˜¾ç¤ºæ›´åŠ æœ‰æ•ˆç‡ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥å¤šé¡µç­¾ç»„ä»¶</p>
</blockquote>
<p>å¤šé¡µç­¾çš„ç»„ä»¶çš„ä»£ç è¿‡äºç¹æ‚ï¼Œå¼€å‘å®é™…éœ€è¦çš„æ˜¯é›†æˆå’Œè°ƒç”¨èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬åªæ˜¯å°†å¼€å‘å¥½çš„ç»„ä»¶é›†æˆåˆ°å½“å‰çš„åŠŸèƒ½é¡¹ä¸­å³å¯ã€‚</p>
<blockquote>
<p> åœ¨èµ„æºç›®å½•ä¸­ï¼Œ**<code>å¤šé¡µç­¾</code>**ç›®å½•ä¸‹æ”¾ç½®çš„æ˜¯ ç»„ä»¶å’Œvuexæ¨¡å—</p>
</blockquote>
<p>ç¬¬ä¸€æ­¥ï¼Œå°†ç»„ä»¶TagsViewç›®å½•æ”¾ç½®åˆ°**<code>src/components</code>** , å¹¶å…¨å±€æ³¨å†Œ</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> TagsView <span class="keyword">from</span> <span class="string">'./TagsView'</span></span><br><span class="line">Vue.component(<span class="string">'TagsView'</span>, TagsView)</span><br></pre></td></tr></tbody></table></figure>



<p>ç¬¬äºŒæ­¥ï¼Œå°†Vuexæ¨¡å—**<code>tagsView.js</code>**æ”¾ç½®åˆ° <strong><code>src/store/modules</code></strong></p>
<p>å¹¶åœ¨storeä¸­å¼•å…¥è¯¥æ¨¡å—</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tagsView <span class="keyword">from</span> <span class="string">'./modules/tagsView'</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">    app,</span><br><span class="line">    settings,</span><br><span class="line">    user,</span><br><span class="line">    permission,</span><br><span class="line">    tagsView</span><br><span class="line">  },</span><br><span class="line">  getters</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼Œåœ¨**<code>src/layout/Index.vue</code>**ä¸­å¼•å…¥è¯¥ç»„ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class="classObj" class="app-wrapper"&gt;</span><br><span class="line">    &lt;div v-if="device==='mobile'&amp;&amp;sidebar.opened" class="drawer-bg" @click="handleClickOutside" /&gt;</span><br><span class="line">    &lt;sidebar class="sidebar-container" /&gt;</span><br><span class="line">    &lt;div class="main-container"&gt;</span><br><span class="line">      &lt;div :class="{'fixed-header':fixedHeader}"&gt;</span><br><span class="line">        &lt;navbar /&gt;</span><br><span class="line">        &lt;!-- æ”¾ç½®tabsview --&gt;</span><br><span class="line">        &lt;tags-view /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">      &lt;app-main /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200804012117287.png" alt="image-20200804012117287"></p>
<p><strong><code>æäº¤ä»£ç </code></strong><br>#12.æ‰“åŒ…ä¸Šçº¿</p>
<h2 id="æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼"><a href="#æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼" class="headerlink" title="æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼"></a><strong>æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼</strong></h2><p>**<code>ç›®æ ‡</code>**é…ç½®æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼</p>
<blockquote>
<p>åœ¨SPAå•é¡µåº”ç”¨ä¸­ï¼Œæœ‰ä¸¤ç§è·¯ç”±æ¨¡å¼</p>
</blockquote>
<p><strong>hashæ¨¡å¼</strong> ï¼š #åé¢æ˜¯è·¯ç”±è·¯å¾„ï¼Œç‰¹ç‚¹æ˜¯å‰ç«¯è®¿é—®ï¼Œ#åé¢çš„å˜åŒ–ä¸ä¼šç»è¿‡æœåŠ¡å™¨</p>
<p><strong>historyæ¨¡å¼</strong>ï¼šæ­£å¸¸çš„/è®¿é—®æ¨¡å¼ï¼Œç‰¹ç‚¹æ˜¯åç«¯è®¿é—®ï¼Œä»»æ„åœ°å€çš„å˜åŒ–éƒ½ä¼šè®¿é—®æœåŠ¡å™¨</p>
<blockquote>
<p>å¼€å‘åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬ä¸€ç›´éƒ½åœ¨ç”¨hashæ¨¡å¼ï¼Œæ‰“åŒ…æˆ‘ä»¬å°è¯•ç”¨historyæ¨¡å¼</p>
</blockquote>
<p>æ”¹æˆhistoryæ¨¡å¼éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†è·¯ç”±çš„modeç±»å‹æ”¹æˆhistoryå³å¯</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createRouter = <span class="function">() =&gt;</span> <span class="keyword">new</span> Router({</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">'history'</span>, <span class="comment">// require service support</span></span><br><span class="line">  <span class="attr">scrollBehavior</span>: <span class="function">() =&gt;</span> ({ <span class="attr">y</span>: <span class="number">0</span> }), <span class="comment">// ç®¡ç†æ»šåŠ¨è¡Œä¸º å¦‚æœå‡ºç°æ»šåŠ¨ åˆ‡æ¢å°±è®© è®©é¡µé¢å›åˆ°é¡¶éƒ¨</span></span><br><span class="line">  <span class="attr">routes</span>: [...constantRoutes] <span class="comment">// æ”¹æˆåªæœ‰é™æ€è·¯ç”±</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å‡è®¾æˆ‘ä»¬çš„åœ°å€æ˜¯è¿™æ ·çš„  <strong><code>www.xxxx/com/hr</code></strong>/a <strong><code>www.xxxx/com/hr</code></strong>/b</p>
</blockquote>
<p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œå…¶å®åŸŸåæ˜¯**<code>www.xxxx/com</code>**ï¼Œhræ˜¯ç‰¹å®šçš„å‰ç¼€åœ°å€ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥é…ç½®ä¸€ä¸ªbaseå±æ€§ï¼Œé…ç½®ä¸ºhr</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> createRouter = <span class="function">() =&gt;</span> <span class="keyword">new</span> Router({</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">'history'</span>, <span class="comment">// require service support</span></span><br><span class="line">  <span class="attr">base</span>: <span class="string">'/hr/'</span>, <span class="comment">// é…ç½®é¡¹ç›®çš„åŸºç¡€åœ°å€</span></span><br><span class="line">  <span class="attr">scrollBehavior</span>: <span class="function">() =&gt;</span> ({ <span class="attr">y</span>: <span class="number">0</span> }), <span class="comment">// ç®¡ç†æ»šåŠ¨è¡Œä¸º å¦‚æœå‡ºç°æ»šåŠ¨ åˆ‡æ¢å°±è®© è®©é¡µé¢å›åˆ°é¡¶éƒ¨</span></span><br><span class="line">  <span class="attr">routes</span>: [...constantRoutes] <span class="comment">// æ”¹æˆåªæœ‰é™æ€è·¯ç”±</span></span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°åœ°å€å·²ç»å˜æˆæˆ‘ä»¬æƒ³è¦çš„æ ·å­äº†</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200804014626686.png" alt="image-20200804014626686"></p>
<p><strong>æäº¤ä»£ç </strong></p>
<h2 id="æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨"><a href="#æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨" class="headerlink" title="æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨"></a>æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨</h2><p>**<code>ç›®æ ‡</code>**ï¼š å¯¹å¼€å‘çš„åº”ç”¨è¿›è¡Œæ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨</p>
<h3 id="æ€§èƒ½åˆ†æ"><a href="#æ€§èƒ½åˆ†æ" class="headerlink" title="æ€§èƒ½åˆ†æ"></a>æ€§èƒ½åˆ†æ</h3><blockquote>
<p>æˆ‘ä»¬é›†æˆäº† åŠŸèƒ½ï¼Œå†™äº†å¾ˆå¤šç»„ä»¶ï¼Œæœ€ç»ˆéƒ½ä¼šæ‰“åŒ…æˆä¸€å †æ–‡ä»¶ï¼Œé‚£ä¹ˆçœŸå®è¿è¡Œçš„æ€§èƒ½å¦‚ä½•å‘¢ï¼Ÿ</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨vue-cliæœ¬èº«æä¾›çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå¯¹æˆ‘ä»¬å¼€å‘çš„æ‰€æœ‰åŠŸèƒ½è¿›è¡Œæ‰“åŒ…åˆ†æ</p>
<p>å®ƒçš„åº”ç”¨éå¸¸ç®€å•</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run preview -- --report</span><br></pre></td></tr></tbody></table></figure>

<p>è¿™ä¸ªå‘½ä»¤ä¼šä»æˆ‘ä»¬çš„**<code>å…¥å£main.js</code>**è¿›è¡Œä¾èµ–åˆ†æï¼Œåˆ†æå‡ºæœ€å¤§çš„åŒ…ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œè§‚å¯Ÿå’Œä¼˜åŒ–</p>
<p>æ‰§è¡Œå®Œè¿™ä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹çš„é¡µé¢</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200804015849396.png" alt="image-20200804015849396"></p>
<p>å¦‚å›¾æ‰€ä»¥ï¼Œæ–¹å—è¶Šå¤§ï¼Œè¯´æ˜è¯¥æ–‡ä»¶å ç”¨çš„æ–‡ä»¶è¶Šå¤§ï¼Œæ–‡ä»¶è¶Šå¤§ï¼Œå¯¹äºç½‘ç»œå¸¦å®½å’Œè®¿é—®é€Ÿåº¦çš„è¦æ±‚å°±è¶Šé«˜ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼˜åŒ–çš„æ–¹å‘</p>
<blockquote>
<p>åƒè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æ€ä¹ˆä¼˜åŒ–ä¸€ä¸‹å‘¢</p>
</blockquote>
<h3 id="webpackæ’é™¤æ‰“åŒ…"><a href="#webpackæ’é™¤æ‰“åŒ…" class="headerlink" title="webpackæ’é™¤æ‰“åŒ…"></a>webpackæ’é™¤æ‰“åŒ…</h3><p>CDNæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹å¼</p>
<blockquote>
<p>æ–‡ä»¶ä¸æ˜¯å¤§å—ï¼Ÿæˆ‘ä»¬å°±ä¸è¦æŠŠè¿™äº›å¤§çš„æ–‡ä»¶å’Œé‚£äº›å°çš„æ–‡ä»¶æ‰“åŒ…åˆ°ä¸€èµ·äº†ï¼Œåƒè¿™ç§xlsx,elementè¿™ç§åŠŸèƒ½æ€§å¾ˆå…¨çš„æ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾åˆ°CDNæœåŠ¡å™¨ä¸Šï¼Œä¸€æ¥ï¼Œå‡è½»æ•´ä½“åŒ…çš„å¤§å°ï¼ŒäºŒæ¥CDNçš„åŠ é€ŸæœåŠ¡å¯ä»¥åŠ å¿«æˆ‘ä»¬å¯¹äºæ’ä»¶çš„è®¿é—®é€Ÿåº¦</p>
</blockquote>
<p><strong>ä½¿ç”¨æ–¹å¼</strong></p>
<p>å…ˆæ‰¾åˆ° <code>vue.config.js</code>ï¼Œ æ·»åŠ  <code>externals</code> è®© <code>webpack</code> ä¸æ‰“åŒ… <code>xlsx</code> å’Œ <code>element</code>   </p>
<p><strong><code>vue.config.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ’é™¤ elementUI xlsx  å’Œ vue </span></span><br><span class="line"> <span class="attr">externals</span>:</span><br><span class="line">     {</span><br><span class="line">       <span class="string">'vue'</span>: <span class="string">'Vue'</span>,</span><br><span class="line">       <span class="string">'element-ui'</span>: <span class="string">'ELEMENT'</span>,</span><br><span class="line">       <span class="string">'xlsx'</span>: <span class="string">'XLSX'</span></span><br><span class="line">    }</span><br></pre></td></tr></tbody></table></figure>

<p>å†æ¬¡è¿è¡Œï¼Œæˆ‘ä»¬ä¼šå‘ç°åŒ…çš„å¤§å°å·²ç»å¤§å¹…å‡å°</p>
<h3 id="CDNæ–‡ä»¶é…ç½®"><a href="#CDNæ–‡ä»¶é…ç½®" class="headerlink" title="CDNæ–‡ä»¶é…ç½®"></a>CDNæ–‡ä»¶é…ç½®</h3><blockquote>
<p>ä½†æ˜¯ï¼Œæ²¡æœ‰è¢«æ‰“åŒ…çš„å‡ ä¸ªæ¨¡å—æ€ä¹ˆå¤„ç†ï¼Ÿ</p>
</blockquote>
<p>å¯ä»¥é‡‡ç”¨CDNçš„æ–¹å¼ï¼Œåœ¨é¡µé¢æ¨¡æ¿ä¸­é¢„å…ˆå¼•å…¥</p>
<p><strong><code>vue.config.js</code></strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cdn = {</span><br><span class="line">  <span class="attr">css</span>: [</span><br><span class="line">    <span class="comment">// element-ui css</span></span><br><span class="line">    <span class="string">'https://unpkg.com/element-ui/lib/theme-chalk/index.css'</span> <span class="comment">// æ ·å¼è¡¨</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">js</span>: [</span><br><span class="line">    <span class="comment">// vue must at first!</span></span><br><span class="line">    <span class="string">'https://unpkg.com/vue/dist/vue.js'</span>, <span class="comment">// vuejs</span></span><br><span class="line">    <span class="comment">// element-ui js</span></span><br><span class="line">    <span class="string">'https://unpkg.com/element-ui/lib/index.js'</span>, <span class="comment">// elementUI</span></span><br><span class="line">      <span class="string">'https://cdn.jsdelivr.net/npm/xlsx@0.16.6/dist/jszip.min.js'</span>,</span><br><span class="line">    <span class="string">'https://cdn.jsdelivr.net/npm/xlsx@0.16.6/dist/xlsx.full.min.js'</span></span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä½†æ˜¯è¯·æ³¨æ„ï¼Œè¿™æ—¶çš„é…ç½®å®é™…ä¸Šæ˜¯å¯¹å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒéƒ½ç”Ÿæ•ˆçš„ï¼Œåœ¨å¼€å‘ç¯å¢ƒæ—¶ï¼Œæ²¡æœ‰å¿…è¦ä½¿ç”¨CDNï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥è¿›è¡ŒåŒºåˆ†</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cdn = { <span class="attr">css</span>: [], <span class="attr">js</span>: [] }</span><br><span class="line"><span class="comment">// é€šè¿‡ç¯å¢ƒå˜é‡ æ¥åŒºåˆ†æ˜¯å¦ä½¿ç”¨cdn</span></span><br><span class="line"><span class="keyword">const</span> isProd = process.env.NODE_ENV === <span class="string">'production'</span> <span class="comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ç”Ÿäº§ç¯å¢ƒ</span></span><br><span class="line"><span class="keyword">let</span> externals = {}</span><br><span class="line"><span class="keyword">if</span> (isProd) {</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒ å°±æ’é™¤æ‰“åŒ… å¦åˆ™ä¸æ’é™¤</span></span><br><span class="line">  externals = {</span><br><span class="line">    <span class="comment">// key(åŒ…å) / value(è¿™ä¸ªå€¼ æ˜¯ éœ€è¦åœ¨CDNä¸­è·å–js, ç›¸å½“äº è·å–çš„jsä¸­ çš„è¯¥åŒ…çš„å…¨å±€çš„å¯¹è±¡çš„åå­—)</span></span><br><span class="line">    <span class="string">'vue'</span>: <span class="string">'Vue'</span>, <span class="comment">// åé¢çš„åå­—ä¸èƒ½éšä¾¿èµ· åº”è¯¥æ˜¯ jsä¸­çš„å…¨å±€å¯¹è±¡å</span></span><br><span class="line">    <span class="string">'element-ui'</span>: <span class="string">'ELEMENT'</span>, <span class="comment">// éƒ½æ˜¯jsä¸­å…¨å±€å®šä¹‰çš„</span></span><br><span class="line">    <span class="string">'xlsx'</span>: <span class="string">'XLSX'</span> <span class="comment">// éƒ½æ˜¯jsä¸­å…¨å±€å®šä¹‰çš„</span></span><br><span class="line">  }</span><br><span class="line">  cdn = {</span><br><span class="line">    <span class="attr">css</span>: [</span><br><span class="line">      <span class="string">'https://unpkg.com/element-ui/lib/theme-chalk/index.css'</span> <span class="comment">// æå‰å¼•å…¥elementUIæ ·å¼</span></span><br><span class="line">    ], <span class="comment">// æ”¾ç½®cssæ–‡ä»¶ç›®å½•</span></span><br><span class="line">    <span class="attr">js</span>: [</span><br><span class="line">      <span class="string">'https://unpkg.com/vue/dist/vue.js'</span>, <span class="comment">// vuejs</span></span><br><span class="line">      <span class="string">'https://unpkg.com/element-ui/lib/index.js'</span>, <span class="comment">// element</span></span><br><span class="line">      <span class="string">'https://cdn.jsdelivr.net/npm/xlsx@0.16.6/dist/xlsx.full.min.js'</span>, <span class="comment">// xlsx ç›¸å…³</span></span><br><span class="line">      <span class="string">'https://cdn.jsdelivr.net/npm/xlsx@0.16.6/dist/jszip.min.js'</span> <span class="comment">// xlsx ç›¸å…³</span></span><br><span class="line">    ] <span class="comment">// æ”¾ç½®jsæ–‡ä»¶ç›®å½•</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿"><a href="#æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿" class="headerlink" title="æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿"></a>æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿</h3><p>ä¹‹åé€šè¿‡ <code>html-webpack-plugin</code>æ³¨å…¥åˆ° <code>index.html</code>ä¹‹ä¸­:</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">config.plugin(<span class="string">'html'</span>).tap(<span class="function"><span class="params">args</span> =&gt;</span> {</span><br><span class="line">  args[<span class="number">0</span>].cdn = cdn</span><br><span class="line">  <span class="keyword">return</span> args</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰¾åˆ° <code>public/index.html</code>ã€‚é€šè¿‡ä½ é…ç½®çš„<code>CDN Config</code> ä¾æ¬¡æ³¨å…¥ css å’Œ jsã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;!-- å¼•å…¥æ ·å¼ --&gt;</span><br><span class="line">  &lt;% for(var css of htmlWebpackPlugin.options.cdn.css) { %&gt;</span><br><span class="line">    &lt;link rel="stylesheet" href="&lt;%=css%&gt;"&gt;</span><br><span class="line">  &lt;% } %&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å¼•å…¥JS --&gt;</span><br><span class="line">&lt;% for(var js of htmlWebpackPlugin.options.cdn.js) { %&gt;</span><br><span class="line">  &lt;script src="&lt;%=js%&gt;"&gt;&lt;/script&gt;</span><br><span class="line">&lt;% } %&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åï¼Œè¿›è¡Œæ‰“åŒ… </p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm run build:prod</span><br></pre></td></tr></tbody></table></figure>

<h2 id="åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ"><a href="#åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ" class="headerlink" title="åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ"></a>åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ</h2><p>**<code>ç›®æ ‡</code>**å°†æ‰“åŒ…å¥½çš„ä»£ç æ‰“åŒ…ä¸Šçº¿ï¼Œå¹¶åœ¨nodejsä¸­ä»£ç†è·¨åŸŸ</p>
<h3 id="ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®"><a href="#ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®" class="headerlink" title="ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®"></a>ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®</h3><blockquote>
<p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆçš„å¼€å‘æµç¨‹ï¼ŒæŒ‰ç…§å¸¸è§„çš„åšæ³•ï¼Œæ­¤æ—¶ï¼Œè¿ç»´ä¼šå°†æˆ‘ä»¬çš„ä»£ç éƒ¨ç½²åˆ°é˜¿é‡Œäº‘çš„ngixæœåŠ¡ä¸Šï¼Œå¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶éƒ¨ç½²åˆ°æœ¬æœºçš„nodejsç¯å¢ƒä¸­</p>
</blockquote>
<p>éƒ¨ç½² è‡ªåŠ¨åŒ–éƒ¨ç½² /æ‰‹åŠ¨éƒ¨ç½²</p>
<p>ç¬¬ä¸€æ­¥ï¼Œå»ºç«‹webæœåŠ¡æ–‡ä»¶å¤¹  <strong><code>hrServer</code></strong></p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir hrServer <span class="comment">#å»ºç«‹hrServeræ–‡ä»¶å¤¹ </span></span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬äºŒæ­¥ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œåˆå§‹åŒ–npm</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm init -y</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬ä¸‰æ­¥ï¼Œå®‰è£…æœåŠ¡ç«¯æ¡†æ¶koa(ä¹Ÿå¯ä»¥é‡‡ç”¨expressæˆ–è€…egg)</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i koa koa-static</span><br></pre></td></tr></tbody></table></figure>

<p>ç¬¬å››æ­¥ï¼Œæ‹·è´ä¸Šå°èŠ‚æ‰“åŒ…çš„distç›®å½•åˆ°**<code>hrServer/public</code>**ä¸‹</p>
<p>ç¬¬äº”æ­¥ï¼Œåœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºapp.jsï¼Œä»£ç å¦‚ä¸‹</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa  = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">'koa-static'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line">app.use(serve(__dirname + <span class="string">"/public"</span>)); <span class="comment">//å°†publicä¸‹çš„ä»£ç é™æ€åŒ–</span></span><br><span class="line">app.listen(<span class="number">3333</span>, <span class="function">() =&gt;</span> {</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'äººèµ„é¡¹ç›®å¯åŠ¨'</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®ï¼Œ<a target="_blank" rel="noopener" href="http://localhost:3333/">http://localhost:3333</a></p>
</blockquote>
<p>é¡µé¢å‡ºæ¥äº†</p>
<p><img src="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/image-20200805012430884.png" alt="image-20200805012430884"></p>
<h3 id="è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜"><a href="#è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜" class="headerlink" title="è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜"></a>è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜</h3><p>ä½†æ˜¯ï¼Œæ­¤æ—¶å­˜åœ¨ä¸¤ä¸ªé—®é¢˜ï¼Œ</p>
<ol>
<li><strong>å½“æˆ‘ä»¬åˆ·æ–°é¡µé¢ï¼Œå‘ç°404</strong></li>
</ol>
<blockquote>
<p>  è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é‡‡ç”¨äº†historyçš„æ¨¡å¼ï¼Œåœ°å€çš„å˜åŒ–ä¼šå¼•èµ·æœåŠ¡å™¨çš„åˆ·æ–°ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨app.jså¯¹æ‰€æœ‰çš„åœ°å€è¿›è¡Œä¸€ä¸‹å¤„ç†å³å¯</p>
</blockquote>
<p>å®‰è£… koaä¸­é—´ä»¶ </p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i koa2-connect-history-api-fallback <span class="comment">#ä¸“é—¨å¤„ç†historyæ¨¡å¼çš„ä¸­é—´ä»¶</span></span><br></pre></td></tr></tbody></table></figure>

<p><strong>æ³¨å†Œä¸­é—´ä»¶</strong></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa  = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> serve = <span class="built_in">require</span>(<span class="string">'koa-static'</span>);</span><br><span class="line"><span class="keyword">const</span>  { historyApiFallback } = <span class="built_in">require</span>(<span class="string">'koa2-connect-history-api-fallback'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"><span class="comment">// è¿™å¥è¯ çš„æ„æ€æ˜¯é™¤æ¥å£ä¹‹å¤–æ‰€æœ‰çš„è¯·æ±‚éƒ½å‘é€ç»™äº† index.html</span></span><br><span class="line">app.use(historyApiFallback({ </span><br><span class="line">     <span class="attr">whiteList</span>: [<span class="string">'/prod-api'</span>]</span><br><span class="line"> }));  <span class="comment">// è¿™é‡Œçš„whiteListæ˜¯ ç™½åå•çš„æ„æ€</span></span><br><span class="line">app.use(serve(__dirname + <span class="string">"/public"</span>)); <span class="comment">//å°†publicä¸‹çš„ä»£ç é™æ€åŒ–</span></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3333</span>, <span class="function">() =&gt;</span> {</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'äººèµ„é¡¹ç›®å¯åŠ¨'</span>)</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜"><a href="#è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜" class="headerlink" title="è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜"></a>è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜</h3><ol>
<li>å½“ç‚¹å‡»ç™»å½•æ—¶ï¼Œå‘ç°æ¥å£404</li>
</ol>
<blockquote>
<p>  å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œvue-cliçš„ä»£ç†åªå­˜åœ¨äºå¼€å‘æœŸï¼Œå½“æˆ‘ä»¬ä¸Šçº¿åˆ°nodeç¯å¢ƒæˆ–è€…ngixç¯å¢ƒæ—¶ï¼Œéœ€è¦æˆ‘ä»¬å†æ¬¡åœ¨ç¯å¢ƒä¸­ä»£ç†</p>
</blockquote>
<p>åœ¨nodejsä¸­ä»£ç†</p>
<p>å®‰è£…è·¨åŸŸä»£ç†ä¸­é—´ä»¶</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i koa2-proxy-middleware</span><br></pre></td></tr></tbody></table></figure>

<p>é…ç½®è·¨è¶Šä»£ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">'koa2-proxy-middleware'</span>)</span><br><span class="line"></span><br><span class="line">app.use(proxy({</span><br><span class="line">  <span class="attr">targets</span>: {</span><br><span class="line">    <span class="comment">// (.*) means anything</span></span><br><span class="line">    <span class="string">'/prod-api/(.*)'</span>: {</span><br><span class="line">        <span class="attr">target</span>: <span class="string">'http://ihrm-java.itheima.net/api'</span>, <span class="comment">//åç«¯æœåŠ¡å™¨åœ°å€</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: {  </span><br><span class="line">            <span class="string">'/prod-api'</span>: <span class="string">""</span></span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}))</span><br></pre></td></tr></tbody></table></figure>

<p>æ³¨æ„ï¼šè¿™é‡Œä¹‹æ‰€ä»¥ç”¨äº†<strong>pathRewrite</strong>ï¼Œæ˜¯å› ä¸ºç”Ÿäº§ç¯å¢ƒçš„è¯·æ±‚åŸºç¡€åœ°å€æ˜¯ <strong>/prod-api</strong>ï¼Œéœ€è¦å°†è¯¥åœ°å€å»æ‰</p>
<p>æ­¤æ—¶ï¼Œé¡¹ç›®å°±å¯ä»¥è·¨åŸŸè®¿é—®äº†ï¼</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">è·¯å°é›¨</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://www.abigailcui.com/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/">https://www.abigailcui.com/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://www.abigailcui.com" target="_blank">Abigail Cuiçš„å°ç«™</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/04/14/webpack/"><img class="prev-cover" src="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">åˆè¯†webpack</div></div></a></div><div class="next-post pull-right"><a href="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/"><img class="next-cover" src="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">vueåº”ç”¨2-vueç§»åŠ¨ç«¯-å¤´æ¡demo</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.</span> <span class="toc-text">1.é¡¹ç›®è®¾è®¡</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E4%BA%BA%E5%8A%9B%E8%B5%84%E6%BA%90%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">2.</span> <span class="toc-text">1.äººåŠ›èµ„æºçš„ç¯å¢ƒæ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#vue-element-admin%E7%9A%84%E4%BA%86%E8%A7%A3%E5%92%8C%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.1.</span> <span class="toc-text">vue-element-adminçš„äº†è§£å’Œä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%89%8D%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9F%BA%E6%9C%AC%E5%87%86%E5%A4%87"><span class="toc-number">2.2.</span> <span class="toc-text">æ­å»ºé¡¹ç›®å‰çš„ä¸€äº›åŸºæœ¬å‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%A8%A1%E6%9D%BF%E5%90%AF%E5%8A%A8%E5%92%8C%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.3.</span> <span class="toc-text">é¡¹ç›®æ¨¡æ¿å¯åŠ¨å’Œç›®å½•ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%92%8C%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A"><span class="toc-number">2.4.</span> <span class="toc-text">é¡¹ç›®è¿è¡Œæœºåˆ¶å’Œä»£ç æ³¨é‡Š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#main-js"><span class="toc-number">2.4.1.</span> <span class="toc-text">main.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#App-vue"><span class="toc-number">2.4.2.</span> <span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#permission-js"><span class="toc-number">2.4.3.</span> <span class="toc-text">permission.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vuex%E7%BB%93%E6%9E%84"><span class="toc-number">2.4.4.</span> <span class="toc-text">Vuexç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scss"><span class="toc-number">2.4.5.</span> <span class="toc-text">scss</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#icons"><span class="toc-number">2.4.6.</span> <span class="toc-text">icons</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SCSS%E5%A4%84%E7%90%86%E7%9A%84%E4%BA%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8"><span class="toc-number">2.5.</span> <span class="toc-text">SCSSå¤„ç†çš„äº†è§£å’Œä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E5%B0%8F%E5%9E%8B%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83"><span class="toc-number">2.5.1.</span> <span class="toc-text">æ­å»ºå°å‹æµ‹è¯•ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">2.5.2.</span> <span class="toc-text">å˜é‡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9C%E7%A8%8BGit%E4%BB%93%E5%BA%93%E5%B9%B6%E5%AE%8C%E6%88%90%E5%88%9D%E5%A7%8B%E6%8F%90%E4%BA%A4"><span class="toc-number">2.6.</span> <span class="toc-text">å»ºç«‹è¿œç¨‹Gitä»“åº“å¹¶å®Œæˆåˆå§‹æäº¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#API%E6%A8%A1%E5%9D%97%E5%92%8C%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85%E6%A8%A1%E5%9D%97%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.7.</span> <span class="toc-text">APIæ¨¡å—å’Œè¯·æ±‚å°è£…æ¨¡å—ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Axios%E7%9A%84%E6%8B%A6%E6%88%AA%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.7.1.</span> <span class="toc-text">Axiosçš„æ‹¦æˆªå™¨ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#api%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8D%95%E7%8B%AC%E5%B0%81%E8%A3%85"><span class="toc-number">2.7.2.</span> <span class="toc-text">apiæ¨¡å—çš„å•ç‹¬å°è£…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AC%E5%85%B1%E8%B5%84%E6%BA%90%E5%9B%BE%E7%89%87%E5%92%8C%E7%BB%9F%E4%B8%80%E6%A0%B7%E5%BC%8F"><span class="toc-number">2.8.</span> <span class="toc-text">å…¬å…±èµ„æºå›¾ç‰‡å’Œç»Ÿä¸€æ ·å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97"><span class="toc-number">3.</span> <span class="toc-text">2.ç™»å½•æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%9B%BA%E5%AE%9A%E7%9A%84%E6%9C%AC%E5%9C%B0%E8%AE%BF%E9%97%AE%E7%AB%AF%E5%8F%A3%E5%92%8C%E7%BD%91%E7%AB%99%E5%90%8D%E7%A7%B0"><span class="toc-number">3.1.</span> <span class="toc-text">è®¾ç½®å›ºå®šçš„æœ¬åœ°è®¿é—®ç«¯å£å’Œç½‘ç«™åç§°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%9F%BA%E7%A1%80%E5%B8%83%E5%B1%80"><span class="toc-number">3.2.</span> <span class="toc-text">ç™»å½•é¡µé¢çš„åŸºç¡€å¸ƒå±€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E8%A1%A8%E5%8D%95%E7%9A%84%E6%A0%A1%E9%AA%8C"><span class="toc-number">3.3.</span> <span class="toc-text">ç™»å½•è¡¨å•çš„æ ¡éªŒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#el-form%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E7%9A%84%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6"><span class="toc-number">3.3.1.</span> <span class="toc-text">el-formè¡¨å•æ ¡éªŒçš„å…ˆå†³æ¡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E6%9C%BA%E5%8F%B7%E5%92%8C%E5%AF%86%E7%A0%81%E7%9A%84%E6%A0%A1%E9%AA%8C"><span class="toc-number">3.3.2.</span> <span class="toc-text">æ‰‹æœºå·å’Œå¯†ç çš„æ ¡éªŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-number">3.3.3.</span> <span class="toc-text">å…³äºä¿®é¥°ç¬¦</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vue-Cli%E9%85%8D%E7%BD%AE%E8%B7%A8%E5%9F%9F%E4%BB%A3%E7%90%86"><span class="toc-number">3.4.</span> <span class="toc-text">Vue-Clié…ç½®è·¨åŸŸä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E5%87%BA%E7%8E%B0%E8%B7%A8%E5%9F%9F%EF%BC%9F"><span class="toc-number">3.4.1.</span> <span class="toc-text">ä¸ºä»€ä¹ˆä¼šå‡ºç°è·¨åŸŸï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">3.4.2.</span> <span class="toc-text">è§£å†³å¼€å‘ç¯å¢ƒçš„è·¨åŸŸé—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%8D%95%E7%8B%AC%E7%9A%84%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3"><span class="toc-number">3.5.</span> <span class="toc-text">å°è£…å•ç‹¬çš„ç™»å½•æ¥å£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85Vuex%E7%9A%84%E7%99%BB%E5%BD%95Action%E5%B9%B6%E5%A4%84%E7%90%86token"><span class="toc-number">3.6.</span> <span class="toc-text">å°è£…Vuexçš„ç™»å½•Actionå¹¶å¤„ç†token</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8Vuex%E4%B8%AD%E5%AF%B9token%E8%BF%9B%E8%A1%8C%E7%AE%A1%E7%90%86"><span class="toc-number">3.6.1.</span> <span class="toc-text">åœ¨Vuexä¸­å¯¹tokenè¿›è¡Œç®¡ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E7%99%BB%E5%BD%95%E7%9A%84Action"><span class="toc-number">3.6.2.</span> <span class="toc-text">å°è£…ç™»å½•çš„Action</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#request%E4%B8%AD%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E5%BC%82%E5%B8%B8%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">3.7.</span> <span class="toc-text">requestä¸­ç¯å¢ƒå˜é‡å’Œå¼‚å¸¸çš„å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BA%E5%88%86axios%E5%9C%A8%E4%B8%8D%E5%90%8C%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%9A%84%E8%AF%B7%E6%B1%82%E5%9F%BA%E7%A1%80%E5%9C%B0%E5%9D%80"><span class="toc-number">3.7.1.</span> <span class="toc-text">åŒºåˆ†axiosåœ¨ä¸åŒç¯å¢ƒä¸­çš„è¯·æ±‚åŸºç¡€åœ°å€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86axios%E7%9A%84%E5%93%8D%E5%BA%94%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">3.7.2.</span> <span class="toc-text">å¤„ç†axiosçš„å“åº”æ‹¦æˆªå™¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E8%B0%83%E7%94%A8%E7%99%BB%E5%BD%95action-%E5%A4%84%E7%90%86%E5%BC%82%E5%B8%B8"><span class="toc-number">3.8.</span> <span class="toc-text">ç™»å½•é¡µé¢è°ƒç”¨ç™»å½•action,å¤„ç†å¼‚å¸¸</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E7%9A%84token%E6%8B%A6%E6%88%AA%E5%A4%84%E7%90%86"><span class="toc-number">3.9.</span> <span class="toc-text">ä¸»é¡µçš„tokenæ‹¦æˆªå¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8B%A6%E6%88%AA%E7%9A%84%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-number">3.9.1.</span> <span class="toc-text">æƒé™æ‹¦æˆªçš„æµç¨‹å›¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%9B%BE%E8%BD%AC%E5%8C%96%E4%BB%A3%E7%A0%81"><span class="toc-number">3.9.2.</span> <span class="toc-text">æµç¨‹å›¾è½¬åŒ–ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E7%9A%84%E5%B7%A6%E4%BE%A7%E5%AF%BC%E8%88%AA%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.10.</span> <span class="toc-text">ä¸»é¡µçš„å·¦ä¾§å¯¼èˆªæ ·å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%A4%B4%E9%83%A8%E5%86%85%E5%AE%B9%E7%9A%84%E5%B8%83%E5%B1%80%E5%92%8C%E6%A0%B7%E5%BC%8F"><span class="toc-number">3.11.</span> <span class="toc-text">è®¾ç½®å¤´éƒ¨å†…å®¹çš„å¸ƒå±€å’Œæ ·å¼</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%B8%BB%E9%A1%B5%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">3.ä¸»é¡µæ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E8%B5%84%E6%96%99%E6%8E%A5%E5%8F%A3%E5%92%8Ctoken%E6%B3%A8%E5%85%A5"><span class="toc-number">4.1.</span> <span class="toc-text">è·å–ç”¨æˆ·èµ„æ–™æ¥å£å’Œtokenæ³¨å…¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E8%B5%84%E6%96%99%E7%9A%84action%E5%B9%B6%E5%85%B1%E4%BA%AB%E7%94%A8%E6%88%B7%E7%8A%B6%E6%80%81"><span class="toc-number">4.2.</span> <span class="toc-text">å°è£…è·å–ç”¨æˆ·èµ„æ–™çš„actionå¹¶å…±äº«ç”¨æˆ·çŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8B%A6%E6%88%AA%E5%A4%84%E8%B0%83%E7%94%A8%E8%8E%B7%E5%8F%96%E8%B5%84%E6%96%99action"><span class="toc-number">4.3.</span> <span class="toc-text">æƒé™æ‹¦æˆªå¤„è°ƒç”¨è·å–èµ„æ–™action</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8B%A6%E6%88%AA%E5%99%A8%E8%B0%83%E7%94%A8action"><span class="toc-number">4.3.1.</span> <span class="toc-text">æƒé™æ‹¦æˆªå™¨è°ƒç”¨action</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%A4%B4%E5%83%8F%E6%8E%A5%E5%8F%A3%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE"><span class="toc-number">4.3.2.</span> <span class="toc-text">è·å–å¤´åƒæ¥å£åˆå¹¶æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4-%E8%A7%A3%E5%86%B3%E5%BC%82%E5%B8%B8%E5%9B%BE%E7%89%87%E6%83%85%E5%86%B5"><span class="toc-number">4.4.</span> <span class="toc-text">è‡ªå®šä¹‰æŒ‡ä»¤-è§£å†³å¼‚å¸¸å›¾ç‰‡æƒ…å†µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-number">4.4.1.</span> <span class="toc-text">è‡ªå®šä¹‰æŒ‡ä»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8main-js%E5%AE%8C%E6%88%90%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C"><span class="toc-number">4.4.2.</span> <span class="toc-text">åœ¨main.jså®Œæˆè‡ªå®šä¹‰æŒ‡ä»¤å…¨å±€æ³¨å†Œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%99%BB%E5%87%BA%E5%8A%9F%E8%83%BD"><span class="toc-number">4.5.</span> <span class="toc-text">å®ç°ç™»å‡ºåŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Token%E5%A4%B1%E6%95%88%E7%9A%84%E4%B8%BB%E5%8A%A8%E4%BB%8B%E5%85%A5"><span class="toc-number">4.6.</span> <span class="toc-text">Tokenå¤±æ•ˆçš„ä¸»åŠ¨ä»‹å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E5%8A%A8%E4%BB%8B%E5%85%A5token%E5%A4%84%E7%90%86%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91"><span class="toc-number">4.6.1.</span> <span class="toc-text">ä¸»åŠ¨ä»‹å…¥tokenå¤„ç†çš„ä¸šåŠ¡é€»è¾‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%9B%BE%E8%BD%AC%E5%8C%96%E4%BB%A3%E7%A0%81-1"><span class="toc-number">4.6.2.</span> <span class="toc-text">æµç¨‹å›¾è½¬åŒ–ä»£ç </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Token%E5%A4%B1%E6%95%88%E7%9A%84%E8%A2%AB%E5%8A%A8%E5%A4%84%E7%90%86"><span class="toc-number">4.7.</span> <span class="toc-text">Tokenå¤±æ•ˆçš„è¢«åŠ¨å¤„ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.8.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%B7%AF%E7%94%B1%E5%92%8C%E9%A1%B5%E9%9D%A2"><span class="toc-number">5.</span> <span class="toc-text">4.è·¯ç”±å’Œé¡µé¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%A1%B5%E9%9D%A2%E6%95%B4%E7%90%86"><span class="toc-number">5.1.</span> <span class="toc-text">è·¯ç”±é¡µé¢æ•´ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E6%A8%A1%E5%9D%97%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA"><span class="toc-number">5.2.</span> <span class="toc-text">ä¸šåŠ¡æ¨¡å—é¡µé¢çš„å¿«é€Ÿæ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E6%A8%A1%E5%9D%97%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%92%8C%E8%B7%AF%E7%94%B1%E6%96%87%E4%BB%B6"><span class="toc-number">5.2.1.</span> <span class="toc-text">æ–°å»ºæ¨¡å—çš„é¡µé¢å’Œè·¯ç”±æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%AF%8F%E4%B8%AA%E6%A8%A1%E5%9D%97%E7%9A%84%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99"><span class="toc-number">5.2.2.</span> <span class="toc-text">è®¾ç½®æ¯ä¸ªæ¨¡å—çš„è·¯ç”±è§„åˆ™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%92%8C%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%B4%E6%97%B6%E5%90%88%E5%B9%B6%EF%BC%8C%E5%BD%A2%E6%88%90%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95"><span class="toc-number">5.3.</span> <span class="toc-text">é™æ€è·¯ç”±å’ŒåŠ¨æ€è·¯ç”±ä¸´æ—¶åˆå¹¶ï¼Œå½¢æˆå·¦ä¾§èœå•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E7%9A%84%E6%98%BE%E7%A4%BA%E9%80%BB%E8%BE%91%EF%BC%8C%E8%AE%BE%E7%BD%AE%E8%8F%9C%E5%8D%95%E5%9B%BE%E6%A0%87"><span class="toc-number">5.4.</span> <span class="toc-text">å·¦ä¾§èœå•çš„æ˜¾ç¤ºé€»è¾‘ï¼Œè®¾ç½®èœå•å›¾æ ‡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84"><span class="toc-number">6.</span> <span class="toc-text">5.ç»„ç»‡ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E5%B8%83%E5%B1%80"><span class="toc-number">6.1.</span> <span class="toc-text">ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84"><span class="toc-number">6.1.1.</span> <span class="toc-text">è®¤è¯†ç»„ç»‡æ¶æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E7%9A%84%E5%A4%B4%E9%83%A8%E5%86%85%E5%AE%B9"><span class="toc-number">6.1.2.</span> <span class="toc-text">å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%91%E5%BD%A2%E7%BB%84%E4%BB%B6%E8%AE%A4%E8%AF%86"><span class="toc-number">6.1.3.</span> <span class="toc-text">æ ‘å½¢ç»„ä»¶è®¤è¯†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%A0%91%E5%BD%A2%E7%9A%84%E9%9D%99%E6%80%81%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84"><span class="toc-number">6.1.4.</span> <span class="toc-text">å®ç°æ ‘å½¢çš„é™æ€ç»„ç»‡æ¶æ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%86%E6%A0%91%E5%BD%A2%E7%9A%84%E6%93%8D%E4%BD%9C%E5%86%85%E5%AE%B9%E5%8D%95%E7%8B%AC%E6%8A%BD%E6%8F%90%E6%88%90%E7%BB%84%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">å°†æ ‘å½¢çš„æ“ä½œå†…å®¹å•ç‹¬æŠ½ææˆç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%8D%95%E7%8B%AC%E7%9A%84%E6%A0%91%E6%93%8D%E4%BD%9C%E6%A0%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">6.2.1.</span> <span class="toc-text">å°è£…å•ç‹¬çš„æ ‘æ“ä½œæ ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E4%B8%AD%E5%BA%94%E7%94%A8%E6%93%8D%E4%BD%9C%E6%A0%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">6.2.2.</span> <span class="toc-text">åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨æ“ä½œæ ç»„ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%B9%B6%E8%BF%9B%E8%A1%8C%E6%A0%91%E5%BD%A2%E5%A4%84%E7%90%86"><span class="toc-number">6.3.</span> <span class="toc-text">è·å–ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶è¿›è¡Œæ ‘å½¢å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85API%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%8E%B7%E5%8F%96%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E6%95%B0%E6%8D%AE"><span class="toc-number">6.3.1.</span> <span class="toc-text">å°è£…APIæ¥å£ï¼Œè·å–ç»„ç»‡æ¶æ„æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E6%95%B0%E7%BB%84%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8C%96%E6%88%90%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84"><span class="toc-number">6.3.2.</span> <span class="toc-text">å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">6.4.</span> <span class="toc-text">åˆ é™¤éƒ¨é—¨åŠŸèƒ½å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%88%A0%E9%99%A4%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%B3%A8%E5%86%8C%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.4.1.</span> <span class="toc-text">å°è£…åˆ é™¤æ¥å£ï¼Œæ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%88%A0%E9%99%A4%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%80%9A%E7%9F%A5%E7%88%B6%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-number">6.4.2.</span> <span class="toc-text">è°ƒç”¨åˆ é™¤æ¥å£ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E9%83%A8%E9%97%A8%E5%8A%9F%E8%83%BD-%E5%BB%BA%E7%AB%8B%E7%BB%84%E4%BB%B6"><span class="toc-number">6.5.</span> <span class="toc-text">æ–°å¢éƒ¨é—¨åŠŸèƒ½-å»ºç«‹ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%96%B0%E5%BB%BA%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%BC%B9%E5%B1%82%E7%BB%93%E6%9E%84"><span class="toc-number">6.5.1.</span> <span class="toc-text">å°è£…æ–°å¢æ¥å£ï¼Œæ–°å»ºç»„ä»¶ä¸­çš„å¼¹å±‚ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E6%96%B0%E5%A2%9E%E5%AD%90%E9%83%A8%E9%97%A8%E6%98%BE%E7%A4%BA%E5%BC%B9%E5%B1%82%E7%BB%84%E4%BB%B6"><span class="toc-number">6.5.2.</span> <span class="toc-text">ç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E6%96%B0%E5%A2%9E%E9%83%A8%E9%97%A8%E7%9A%84%E8%A7%84%E5%88%99%E6%A0%A1%E9%AA%8C"><span class="toc-number">6.6.</span> <span class="toc-text">å®Œæˆæ–°å¢éƒ¨é—¨çš„è§„åˆ™æ ¡éªŒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%88%90%E6%96%B0%E5%A2%9E%E8%A1%A8%E5%8D%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A0%A1%E9%AA%8C%E6%9D%A1%E4%BB%B6"><span class="toc-number">6.6.1.</span> <span class="toc-text">å®Œæˆæ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒæ¡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%B0%E5%A2%9E%E8%A1%A8%E5%8D%95%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99"><span class="toc-number">6.6.2.</span> <span class="toc-text">é…ç½®æ–°å¢è¡¨å•çš„åŸºæœ¬æ ¡éªŒè§„åˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E9%97%A8%E5%90%8D%E7%A7%B0%E5%92%8C%E9%83%A8%E9%97%A8%E7%BC%96%E7%A0%81%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%A1%E9%AA%8C"><span class="toc-number">6.6.3.</span> <span class="toc-text">éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E9%A6%96%E9%83%A8%E5%86%85%E5%AE%B9%E7%9A%84pid%E6%95%B0%E6%8D%AE"><span class="toc-number">6.6.4.</span> <span class="toc-text">å¤„ç†é¦–éƒ¨å†…å®¹çš„pidæ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E9%83%A8%E9%97%A8%E5%8A%9F%E8%83%BD-%E9%83%A8%E9%97%A8%E8%B4%9F%E8%B4%A3%E4%BA%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">6.7.</span> <span class="toc-text">æ–°å¢éƒ¨é—¨åŠŸèƒ½-éƒ¨é—¨è´Ÿè´£äººæ•°æ®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD-%E6%8F%90%E4%BA%A4-%E5%8F%96%E6%B6%88-%E5%85%B3%E9%97%AD"><span class="toc-number">6.8.</span> <span class="toc-text">æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ-å…³é—­</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E9%80%9A%E8%BF%87%EF%BC%8C%E8%B0%83%E7%94%A8%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3"><span class="toc-number">6.8.1.</span> <span class="toc-text">æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8sync%E4%BF%AE%E9%A5%B0%E7%AC%A6%E5%85%B3%E9%97%AD%E6%96%B0%E5%A2%9E%E5%BC%B9%E5%B1%82"><span class="toc-number">6.8.2.</span> <span class="toc-text">åˆ©ç”¨syncä¿®é¥°ç¬¦å…³é—­æ–°å¢å¼¹å±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E6%B6%88%E6%97%B6%E9%87%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%92%8C%E6%A0%A1%E9%AA%8C"><span class="toc-number">6.8.3.</span> <span class="toc-text">å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E9%83%A8%E9%97%A8%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%9B%9E%E5%86%99"><span class="toc-number">6.9.</span> <span class="toc-text">ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E7%BC%96%E8%BE%91%E5%BC%B9%E5%87%BA%E5%B1%82%EF%BC%8C%E8%AE%B0%E5%BD%95%E5%BD%93%E5%89%8D%E8%8A%82%E7%82%B9"><span class="toc-number">6.9.1.</span> <span class="toc-text">ç‚¹å‡»ç¼–è¾‘å¼¹å‡ºå±‚ï¼Œè®°å½•å½“å‰èŠ‚ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E7%BB%84%E4%BB%B6%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E7%9A%84%E8%8E%B7%E5%8F%96%E8%AF%A6%E6%83%85%E6%96%B9%E6%B3%95"><span class="toc-number">6.9.2.</span> <span class="toc-text">çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„è·å–è¯¦æƒ…æ–¹æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E6%98%BE%E7%A4%BA%E6%8E%A7%E5%88%B6%E6%A0%87%E9%A2%98"><span class="toc-number">6.9.3.</span> <span class="toc-text">æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E6%94%AF%E6%8C%81%E7%BC%96%E8%BE%91%E5%92%8C%E6%96%B0%E5%A2%9E%E5%9C%BA%E6%99%AF"><span class="toc-number">6.10.</span> <span class="toc-text">åŒæ—¶æ”¯æŒç¼–è¾‘å’Œæ–°å¢åœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E7%BC%96%E8%BE%91%E6%8E%A5%E5%8F%A3%EF%BC%8C%E4%BF%9D%E5%AD%98%E5%8C%BA%E5%88%86%E5%9C%BA%E6%99%AF"><span class="toc-number">6.10.1.</span> <span class="toc-text">å°è£…ç¼–è¾‘æ¥å£ï¼Œä¿å­˜åŒºåˆ†åœºæ™¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99%E6%94%AF%E6%8C%81%E7%BC%96%E8%BE%91%E5%9C%BA%E6%99%AF%E4%B8%8B%E7%9A%84%E6%A0%A1%E9%AA%8C"><span class="toc-number">6.10.2.</span> <span class="toc-text">æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯ä¸‹çš„æ ¡éªŒ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%99%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%B7%BB%E5%8A%A0%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="toc-number">6.11.</span> <span class="toc-text">ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E5%85%AC%E5%8F%B8%E5%92%8C%E8%A7%92%E8%89%B2"><span class="toc-number">7.</span> <span class="toc-text">6.å…¬å¸å’Œè§’è‰²</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E5%85%AC%E5%8F%B8%E8%A7%92%E8%89%B2%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">7.1.</span> <span class="toc-text">å»ºç«‹å…¬å¸è§’è‰²é¡µé¢çš„åŸºæœ¬ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E5%85%AC%E5%8F%B8%E8%A7%92%E8%89%B2%E4%BF%A1%E6%81%AF"><span class="toc-number">7.2.</span> <span class="toc-text">è¯»å–å…¬å¸è§’è‰²ä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">7.2.1.</span> <span class="toc-text">è¯»å–è§’è‰²åˆ—è¡¨æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E5%85%AC%E5%8F%B8%E4%BF%A1%E6%81%AF%E6%95%B0%E6%8D%AE"><span class="toc-number">7.2.2.</span> <span class="toc-text">è¯»å–å…¬å¸ä¿¡æ¯æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%A7%92%E8%89%B2%E5%8A%9F%E8%83%BD"><span class="toc-number">7.3.</span> <span class="toc-text">åˆ é™¤è§’è‰²åŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E8%A7%92%E8%89%B2%E5%8A%9F%E8%83%BD"><span class="toc-number">7.4.</span> <span class="toc-text">ç¼–è¾‘è§’è‰²åŠŸèƒ½</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E7%BC%96%E8%BE%91%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%96%B0%E5%BB%BA%E7%BC%96%E8%BE%91%E5%BC%B9%E5%B1%82"><span class="toc-number">7.4.1.</span> <span class="toc-text">å°è£…ç¼–è¾‘æ¥å£ï¼Œæ–°å»ºç¼–è¾‘å¼¹å±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%BC%96%E8%BE%91%E5%8A%9F%E8%83%BD%EF%BC%8C%E4%B8%BA%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD%E7%95%99%E5%8F%A3"><span class="toc-number">7.4.2.</span> <span class="toc-text">å®ç°ç¼–è¾‘åŠŸèƒ½ï¼Œä¸ºæ–°å¢åŠŸèƒ½ç•™å£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E8%A7%92%E8%89%B2%E5%8A%9F%E8%83%BD"><span class="toc-number">7.5.</span> <span class="toc-text">æ–°å¢è§’è‰²åŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">7.6.</span> <span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86"><span class="toc-number">8.</span> <span class="toc-text">7.å‘˜å·¥ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E4%B8%80%E4%B8%AA%E9%80%9A%E7%94%A8%E7%9A%84%E5%B7%A5%E5%85%B7%E6%A0%8F"><span class="toc-number">8.1.</span> <span class="toc-text">å°è£…ä¸€ä¸ªé€šç”¨çš„å·¥å…·æ </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E5%B7%A5%E5%85%B7%E6%A0%8F%E7%9A%84%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-number">8.1.1.</span> <span class="toc-text">é€šç”¨å·¥å…·æ çš„ç»„ä»¶ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%BB%9F%E4%B8%80%E6%B3%A8%E5%86%8C"><span class="toc-number">8.1.2.</span> <span class="toc-text">ç»„ä»¶ç»Ÿä¸€æ³¨å†Œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80%E5%92%8C%E7%BB%93%E6%9E%84"><span class="toc-number">8.2.</span> <span class="toc-text">å‘˜å·¥åˆ—è¡¨é¡µé¢çš„åŸºæœ¬å¸ƒå±€å’Œç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82%E5%92%8C%E5%88%86%E9%A1%B5%E5%8A%A0%E8%BD%BD"><span class="toc-number">8.3.</span> <span class="toc-text">å‘˜å·¥åˆ—è¡¨æ•°æ®è¯·æ±‚å’Œåˆ†é¡µåŠ è½½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E5%88%97%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">8.4.</span> <span class="toc-text">å‘˜å·¥åˆ—è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ ¼å¼åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%88%97%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%B1%9E%E6%80%A7%E5%A4%84%E7%90%86%E8%81%98%E7%94%A8%E5%BD%A2%E5%BC%8F"><span class="toc-number">8.4.1.</span> <span class="toc-text">åˆ©ç”¨åˆ—æ ¼å¼åŒ–å±æ€§å¤„ç†è˜ç”¨å½¢å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8%E8%A7%A3%E5%86%B3%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">8.4.2.</span> <span class="toc-text">è¿‡æ»¤å™¨è§£å†³æ—¶é—´æ ¼å¼çš„å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%91%98%E5%B7%A5%E5%8A%9F%E8%83%BD"><span class="toc-number">8.5.</span> <span class="toc-text">åˆ é™¤å‘˜å·¥åŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%91%98%E5%B7%A5%E5%8A%9F%E8%83%BD-%E5%BC%B9%E5%B1%82-%E6%A0%A1%E9%AA%8C-%E9%83%A8%E9%97%A8"><span class="toc-number">8.6.</span> <span class="toc-text">æ–°å¢å‘˜å·¥åŠŸèƒ½-å¼¹å±‚-æ ¡éªŒ-éƒ¨é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%91%98%E5%B7%A5%E5%BC%B9%E5%B1%82%E7%BB%84%E4%BB%B6"><span class="toc-number">8.6.1.</span> <span class="toc-text">æ–°å»ºå‘˜å·¥å¼¹å±‚ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%BC%B9%E5%87%BA%E5%B1%82%EF%BC%8C%E7%82%B9%E5%87%BB%E5%BC%B9%E5%87%BA"><span class="toc-number">8.6.2.</span> <span class="toc-text">å¼•ç”¨å¼¹å‡ºå±‚ï¼Œç‚¹å‡»å¼¹å‡º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%91%98%E5%B7%A5%E7%9A%84%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C"><span class="toc-number">8.6.3.</span> <span class="toc-text">æ–°å¢å‘˜å·¥çš„è¡¨å•æ ¡éªŒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E9%83%A8%E9%97%A8%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8C%96%E6%A0%91%E5%BD%A2"><span class="toc-number">8.6.4.</span> <span class="toc-text">åŠ è½½éƒ¨é—¨æ•°æ®è½¬åŒ–æ ‘å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E9%83%A8%E9%97%A8%E8%B5%8B%E5%80%BC%E8%A1%A8%E5%8D%95%E6%95%B0%E6%8D%AE"><span class="toc-number">8.6.5.</span> <span class="toc-text">ç‚¹å‡»éƒ¨é—¨èµ‹å€¼è¡¨å•æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%91%98%E5%B7%A5%E5%8A%9F%E8%83%BD-%E7%A1%AE%E5%AE%9A-%E5%8F%96%E6%B6%88"><span class="toc-number">8.7.</span> <span class="toc-text">æ–°å¢å‘˜å·¥åŠŸèƒ½-ç¡®å®š-å–æ¶ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E5%AF%BC%E5%85%A5%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">8.8.</span> <span class="toc-text">å‘˜å·¥å¯¼å…¥ç»„ä»¶å°è£…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E7%9A%84%E5%AF%BC%E5%85%A5"><span class="toc-number">8.9.</span> <span class="toc-text">å‘˜å·¥çš„å¯¼å…¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E5%85%AC%E5%85%B1%E5%AF%BC%E5%85%A5%E7%9A%84%E9%A1%B5%E9%9D%A2%E8%B7%AF%E7%94%B1"><span class="toc-number">8.9.1.</span> <span class="toc-text">å»ºç«‹å…¬å…±å¯¼å…¥çš„é¡µé¢è·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90excel%E5%AF%BC%E5%85%A5%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%B0%81%E8%A3%85%E6%8E%A5%E5%8F%A3"><span class="toc-number">8.9.2.</span> <span class="toc-text">åˆ†æexcelå¯¼å…¥ä»£ç ï¼Œå°è£…æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0excel%E5%AF%BC%E5%85%A5"><span class="toc-number">8.9.3.</span> <span class="toc-text">å®ç°excelå¯¼å…¥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E5%AF%BC%E5%87%BAexcel%E5%8A%9F%E8%83%BD"><span class="toc-number">8.10.</span> <span class="toc-text">å‘˜å·¥å¯¼å‡ºexcelåŠŸèƒ½</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85excel%E6%89%80%E9%9C%80%E4%BE%9D%E8%B5%96%E5%92%8C%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD"><span class="toc-number">8.10.1.</span> <span class="toc-text">å®‰è£…excelæ‰€éœ€ä¾èµ–å’ŒæŒ‰éœ€åŠ è½½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#excel%E5%AF%BC%E5%87%BA%E5%8F%82%E6%95%B0%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">8.10.2.</span> <span class="toc-text">excelå¯¼å‡ºå‚æ•°çš„ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#excel%E5%AF%BC%E5%87%BA%E5%9F%BA%E6%9C%AC%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-number">8.10.3.</span> <span class="toc-text">excelå¯¼å‡ºåŸºæœ¬çš„ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E5%87%BA%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">8.10.4.</span> <span class="toc-text">å¯¼å‡ºæ—¶é—´æ ¼å¼çš„å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95-%E5%A4%8D%E6%9D%82%E8%A1%A8%E5%A4%B4%E7%9A%84%E5%AF%BC%E5%87%BA"><span class="toc-number">8.10.5.</span> <span class="toc-text">æ‰©å±•  å¤æ‚è¡¨å¤´çš„å¯¼å‡º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E8%AF%A6%E6%83%85%E9%A1%B5%E5%88%9B%E5%BB%BA%E5%92%8C%E5%B8%83%E5%B1%80"><span class="toc-number">8.11.</span> <span class="toc-text">å‘˜å·¥è¯¦æƒ…é¡µåˆ›å»ºå’Œå¸ƒå±€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E6%83%85%E9%A1%B5%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80%E5%92%8C%E8%B7%AF%E7%94%B1"><span class="toc-number">8.11.1.</span> <span class="toc-text">è¯¦æƒ…é¡µçš„åŸºæœ¬å¸ƒå±€å’Œè·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E5%92%8C%E4%BF%9D%E5%AD%98%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="toc-number">8.11.2.</span> <span class="toc-text">è¯»å–å’Œä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ¥å£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81%E7%9A%84%E4%BF%AE%E6%94%B9"><span class="toc-number">8.11.3.</span> <span class="toc-text">å®ç°ç”¨æˆ·åå’Œå¯†ç çš„ä¿®æ”¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E7%BB%84%E4%BB%B6%E5%92%8C%E5%B2%97%E4%BD%8D%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">8.12.</span> <span class="toc-text">ä¸ªäººç»„ä»¶å’Œå²—ä½ç»„ä»¶å°è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E4%B8%AA%E4%BA%BA%E8%AF%A6%E6%83%85%E7%BB%84%E4%BB%B6"><span class="toc-number">8.12.1.</span> <span class="toc-text">å°è£…ä¸ªäººè¯¦æƒ…ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%B2%97%E4%BD%8D%E7%BB%84%E4%BB%B6"><span class="toc-number">8.12.2.</span> <span class="toc-text">å°è£…å²—ä½ç»„ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E5%92%8C%E5%B2%97%E4%BD%8D%E4%BF%A1%E6%81%AF-%E8%AF%BB%E5%8F%96-%E4%BF%9D%E5%AD%98"><span class="toc-number">8.13.</span> <span class="toc-text">å‘˜å·¥ä¸ªäººä¿¡æ¯å’Œå²—ä½ä¿¡æ¯-è¯»å–-ä¿å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E4%B8%AA%E4%BA%BA%E4%BF%9D%E5%AD%98%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF"><span class="toc-number">8.13.1.</span> <span class="toc-text">è¯»å–ä¸ªäººä¿å­˜ä¸ªäººä¿¡æ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E4%BF%9D%E5%AD%98%E5%B2%97%E4%BD%8D%E4%BF%A1%E6%81%AF"><span class="toc-number">8.13.2.</span> <span class="toc-text">è¯»å–ä¿å­˜å²—ä½ä¿¡æ¯</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%85%BE%E8%AE%AF%E4%BA%91Cos"><span class="toc-number">8.14.</span> <span class="toc-text">é…ç½®è…¾è®¯äº‘Cos</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E7%BB%84%E4%BB%B6-%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">8.15.</span> <span class="toc-text">å°è£…ä¸Šä¼ å›¾ç‰‡ç»„ä»¶-ä¸Šä¼ ç»„ä»¶éœ€æ±‚åˆ†æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">8.16.</span> <span class="toc-text">å°è£…ä¸Šä¼ ç»„ä»¶-ä»£ç å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6"><span class="toc-number">8.16.1.</span> <span class="toc-text">æ–°å»ºæ–‡ä»¶ä¸Šä¼ ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E5%9B%BE%E7%89%87%E8%BF%9B%E8%A1%8C%E9%A2%84%E8%A7%88"><span class="toc-number">8.16.2.</span> <span class="toc-text">ç‚¹å‡»å›¾ç‰‡è¿›è¡Œé¢„è§ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E4%B8%8A%E4%BC%A0%E6%95%B0%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8A%E4%BC%A0%E6%8C%89%E9%92%AE"><span class="toc-number">8.16.3.</span> <span class="toc-text">æ ¹æ®ä¸Šä¼ æ•°é‡æ§åˆ¶ä¸Šä¼ æŒ‰é’®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%9B%BE%E7%89%87%E5%92%8C%E6%B7%BB%E5%8A%A0%E5%9B%BE%E7%89%87"><span class="toc-number">8.16.4.</span> <span class="toc-text">åˆ é™¤å›¾ç‰‡å’Œæ·»åŠ å›¾ç‰‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E4%B9%8B%E5%89%8D%E6%A3%80%E6%9F%A5"><span class="toc-number">8.16.5.</span> <span class="toc-text">ä¸Šä¼ ä¹‹å‰æ£€æŸ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E5%8A%A8%E4%BD%9C%E8%B0%83%E7%94%A8%E4%B8%8A%E4%BC%A0%E8%85%BE%E8%AE%AF%E4%BA%91"><span class="toc-number">8.16.6.</span> <span class="toc-text">ä¸Šä¼ åŠ¨ä½œè°ƒç”¨ä¸Šä¼ è…¾è®¯äº‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%E5%A4%84%E7%90%86%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE"><span class="toc-number">8.16.7.</span> <span class="toc-text">ä¸Šä¼ æˆåŠŸä¹‹åå¤„ç†è¿”å›æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E7%9A%84%E8%BF%9B%E5%BA%A6%E6%9D%A1%E6%98%BE%E7%A4%BA"><span class="toc-number">8.16.8.</span> <span class="toc-text">ä¸Šä¼ çš„è¿›åº¦æ¡æ˜¾ç¤º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E5%91%98%E5%B7%A5%E8%AF%A6%E6%83%85%E4%B8%AD%E5%BA%94%E7%94%A8%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6"><span class="toc-number">8.17.</span> <span class="toc-text">åœ¨å‘˜å·¥è¯¦æƒ…ä¸­åº”ç”¨ä¸Šä¼ ç»„ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%86%E5%91%98%E5%B7%A5%E7%9A%84%E5%A4%B4%E5%83%8F%E5%92%8C%E8%AF%81%E4%BB%B6%E7%85%A7%E8%B5%8B%E5%80%BC%E7%BB%99%E4%B8%8A%E4%BC%A0%E7%BB%84%E4%BB%B6"><span class="toc-number">8.17.1.</span> <span class="toc-text">å°†å‘˜å·¥çš„å¤´åƒå’Œè¯ä»¶ç…§èµ‹å€¼ç»™ä¸Šä¼ ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E6%97%B6%E5%A4%84%E7%90%86%E5%A4%B4%E5%83%8F%E5%92%8C%E8%AF%81%E4%BB%B6%E7%85%A7%E7%9A%84%E4%BF%9D%E5%AD%98"><span class="toc-number">8.17.2.</span> <span class="toc-text">ä¿å­˜æ—¶å¤„ç†å¤´åƒå’Œè¯ä»¶ç…§çš„ä¿å­˜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%98%E5%B7%A5%E5%88%97%E8%A1%A8%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87"><span class="toc-number">8.18.</span> <span class="toc-text">å‘˜å·¥åˆ—è¡¨æ˜¾ç¤ºå›¾ç‰‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80%E7%94%9F%E6%88%90%E4%BA%8C%E7%BB%B4%E7%A0%81"><span class="toc-number">8.19.</span> <span class="toc-text">å›¾ç‰‡åœ°å€ç”ŸæˆäºŒç»´ç </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">8.20.</span> <span class="toc-text">æ‰“å°å‘˜å·¥ä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E6%89%93%E5%8D%B0%E9%A1%B5%E9%9D%A2%E5%8F%8A%E8%B7%AF%E7%94%B1"><span class="toc-number">8.20.1.</span> <span class="toc-text">æ–°å»ºæ‰“å°é¡µé¢åŠè·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8vue-print-nb%E8%BF%9B%E8%A1%8C%E6%89%93%E5%8D%B0"><span class="toc-number">8.20.2.</span> <span class="toc-text">åˆ©ç”¨vue-print-nbè¿›è¡Œæ‰“å°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E6%9D%83%E9%99%90%E8%AE%BE%E8%AE%A1%E5%92%8C%E7%AE%A1%E7%90%86"><span class="toc-number">9.</span> <span class="toc-text">8.æƒé™è®¾è®¡å’Œç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E8%AE%BE%E8%AE%A1-RBAC%E7%9A%84%E6%9D%83%E9%99%90%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3"><span class="toc-number">9.1.</span> <span class="toc-text">æƒé™è®¾è®¡-RBACçš„æƒé™è®¾è®¡æ€æƒ³</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%99%E5%88%86%E9%85%8D%E5%91%98%E5%B7%A5%E8%A7%92%E8%89%B2"><span class="toc-number">9.2.</span> <span class="toc-text">ç»™åˆ†é…å‘˜å·¥è§’è‰²</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2%E7%AA%97%E4%BD%93"><span class="toc-number">9.2.1.</span> <span class="toc-text">æ–°å»ºåˆ†é…è§’è‰²çª—ä½“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8%E5%92%8C%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E8%A7%92%E8%89%B2"><span class="toc-number">9.2.2.</span> <span class="toc-text">è·å–è§’è‰²åˆ—è¡¨å’Œå½“å‰ç”¨æˆ·è§’è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%99%E5%91%98%E5%B7%A5%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2"><span class="toc-number">9.2.3.</span> <span class="toc-text">ç»™å‘˜å·¥åˆ†é…è§’è‰²</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%82%B9%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91"><span class="toc-number">9.3.</span> <span class="toc-text">æƒé™ç‚¹ç®¡ç†é¡µé¢å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E6%9D%83%E9%99%90%E7%82%B9%E7%AE%A1%E7%90%86%E9%A1%B5%E9%9D%A2"><span class="toc-number">9.3.1.</span> <span class="toc-text">æ–°å»ºæƒé™ç‚¹ç®¡ç†é¡µé¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%9D%83%E9%99%90%E6%95%B0%E6%8D%AE%E5%B9%B6%E8%BD%AC%E5%8C%96%E6%A0%91%E5%BD%A2"><span class="toc-number">9.3.2.</span> <span class="toc-text">è·å–æƒé™æ•°æ®å¹¶è½¬åŒ–æ ‘å½¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E7%BC%96%E8%BE%91%E6%9D%83%E9%99%90%E7%9A%84%E5%BC%B9%E5%B1%82"><span class="toc-number">9.3.3.</span> <span class="toc-text">æ–°å¢ç¼–è¾‘æƒé™çš„å¼¹å±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%EF%BC%8C%E7%BC%96%E8%BE%91%EF%BC%8C%E5%88%A0%E9%99%A4%E6%9D%83%E9%99%90%E7%82%B9"><span class="toc-number">9.3.4.</span> <span class="toc-text">æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤æƒé™ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%99%E8%A7%92%E8%89%B2%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90"><span class="toc-number">9.4.</span> <span class="toc-text">ç»™è§’è‰²åˆ†é…æƒé™</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-number">9.4.1.</span> <span class="toc-text">æ–°å»ºåˆ†é…æƒé™å¼¹å‡ºå±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%99%E8%A7%92%E8%89%B2%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90-1"><span class="toc-number">9.4.2.</span> <span class="toc-text">ç»™è§’è‰²åˆ†é…æƒé™</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E6%9D%83%E9%99%90%E5%BA%94%E7%94%A8-%E9%A1%B5%E9%9D%A2%E8%AE%BF%E9%97%AE%E5%92%8C%E8%8F%9C%E5%8D%95"><span class="toc-number">9.5.</span> <span class="toc-text">å‰ç«¯æƒé™åº”ç”¨-é¡µé¢è®¿é—®å’Œèœå•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E5%8F%97%E6%8E%A7%E7%9A%84%E4%B8%BB%E4%BD%93%E6%80%9D%E8%B7%AF"><span class="toc-number">9.5.1.</span> <span class="toc-text">æƒé™å—æ§çš„ä¸»ä½“æ€è·¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BAVuex%E4%B8%AD%E7%AE%A1%E7%90%86%E6%9D%83%E9%99%90%E7%9A%84%E6%A8%A1%E5%9D%97"><span class="toc-number">9.5.2.</span> <span class="toc-text">æ–°å»ºVuexä¸­ç®¡ç†æƒé™çš„æ¨¡å—</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Vuex%E7%AD%9B%E9%80%89%E6%9D%83%E9%99%90%E8%B7%AF%E7%94%B1"><span class="toc-number">9.5.3.</span> <span class="toc-text">Vuexç­›é€‰æƒé™è·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8B%A6%E6%88%AA%E5%87%BA%E8%B0%83%E7%94%A8%E7%AD%9B%E9%80%89%E6%9D%83%E9%99%90Action"><span class="toc-number">9.5.4.</span> <span class="toc-text">æƒé™æ‹¦æˆªå‡ºè°ƒç”¨ç­›é€‰æƒé™Action</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E8%A7%A3%E9%99%A4%E5%90%88%E5%B9%B6"><span class="toc-number">9.5.5.</span> <span class="toc-text">é™æ€è·¯ç”±åŠ¨æ€è·¯ç”±è§£é™¤åˆå¹¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%87%BA%E6%97%B6%EF%BC%8C%E9%87%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E6%9D%83%E9%99%90%E5%92%8C-404%E9%97%AE%E9%A2%98"><span class="toc-number">9.6.</span> <span class="toc-text">ç™»å‡ºæ—¶ï¼Œé‡ç½®è·¯ç”±æƒé™å’Œ 404é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E6%9D%83%E9%99%90%E5%BA%94%E7%94%A8"><span class="toc-number">9.7.</span> <span class="toc-text">åŠŸèƒ½æƒé™åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E6%9D%83%E9%99%90%E7%9A%84%E5%8F%97%E6%8E%A7%E6%80%9D%E8%B7%AF"><span class="toc-number">9.7.1.</span> <span class="toc-text">åŠŸèƒ½æƒé™çš„å—æ§æ€è·¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Mixin%E6%8A%80%E6%9C%AF%E5%B0%86%E6%A3%80%E6%9F%A5%E6%96%B9%E6%B3%95%E6%B3%A8%E5%85%A5"><span class="toc-number">9.7.2.</span> <span class="toc-text">ä½¿ç”¨MixinæŠ€æœ¯å°†æ£€æŸ¥æ–¹æ³•æ³¨å…¥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E5%85%B6%E4%BB%96%E6%A8%A1%E5%9D%97%E9%9B%86%E6%88%90"><span class="toc-number">10.</span> <span class="toc-text">9.å…¶ä»–æ¨¡å—é›†æˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E6%A8%A1%E5%9D%97%E9%9B%86%E6%88%90"><span class="toc-number">10.1.</span> <span class="toc-text">å…¨æ¨¡å—é›†æˆ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E4%B8%BB%E9%A1%B5%E5%AE%A1%E6%89%B9"><span class="toc-number">11.</span> <span class="toc-text">10.ä¸»é¡µå®¡æ‰¹</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E7%9A%84%E9%A1%B5%E9%9D%A2%E7%BB%93%E6%9E%84"><span class="toc-number">11.1.</span> <span class="toc-text">é¦–é¡µçš„é¡µé¢ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E7%94%A8%E6%88%B7%E8%B5%84%E6%96%99%E6%98%BE%E7%A4%BA"><span class="toc-number">11.2.</span> <span class="toc-text">é¦–é¡µç”¨æˆ·èµ„æ–™æ˜¾ç¤º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">11.3.</span> <span class="toc-text">å·¥ä½œæ—¥å†ç»„ä»¶å°è£…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%B7%A5%E4%BD%9C%E6%97%A5%E5%8E%86%E7%BB%84%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-number">11.3.1.</span> <span class="toc-text">æ–°å»ºå·¥ä½œæ—¥å†ç»„ä»¶ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%B7%A5%E4%BD%9C%E6%97%A5%E5%8E%86%E9%80%BB%E8%BE%91"><span class="toc-number">11.3.2.</span> <span class="toc-text">å®ç°å·¥ä½œæ—¥å†é€»è¾‘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E9%9B%B7%E8%BE%BE%E5%9B%BE%E5%9B%BE%E8%A1%A8%E6%98%BE%E7%A4%BA%E5%9C%A8%E9%A6%96%E9%A1%B5"><span class="toc-number">11.4.</span> <span class="toc-text">å°è£…é›·è¾¾å›¾å›¾è¡¨æ˜¾ç¤ºåœ¨é¦–é¡µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3%E9%9B%B7%E8%BE%BE%E5%9B%BE"><span class="toc-number">11.4.1.</span> <span class="toc-text">äº†è§£é›·è¾¾å›¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E9%9B%B7%E8%BE%BE%E5%9B%BE%E6%8F%92%E4%BB%B6"><span class="toc-number">11.4.2.</span> <span class="toc-text">å°è£…é›·è¾¾å›¾æ’ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%A1%E6%89%B9%E6%B5%81%E7%A8%8B%E4%B8%9A%E5%8A%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">11.5.</span> <span class="toc-text">å®¡æ‰¹æµç¨‹ä¸šåŠ¡çš„åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E4%B8%80%E4%B8%AA%E7%A6%BB%E8%81%8C%E5%AE%A1%E6%89%B9"><span class="toc-number">11.6.</span> <span class="toc-text">æäº¤ä¸€ä¸ªç¦»èŒå®¡æ‰¹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E5%A4%9A%E8%AF%AD%E8%A8%80tab%E9%A1%B5%E9%9D%A2%E5%85%A8%E5%B1%8F%E4%B8%BB%E9%A2%98"><span class="toc-number">12.</span> <span class="toc-text">11.å¤šè¯­è¨€tabé¡µé¢å…¨å±ä¸»é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%8F%E6%8F%92%E4%BB%B6%E7%9A%84%E5%BC%95%E7%94%A8"><span class="toc-number">12.1.</span> <span class="toc-text">å…¨å±æ’ä»¶çš„å¼•ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E4%B8%BB%E9%A2%98%E7%9A%84%E8%AE%BE%E7%BD%AE"><span class="toc-number">12.2.</span> <span class="toc-text">åŠ¨æ€ä¸»é¢˜çš„è®¾ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0"><span class="toc-number">12.3.</span> <span class="toc-text">å¤šè¯­è¨€å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%8C%85"><span class="toc-number">12.3.1.</span> <span class="toc-text">åˆå§‹åŒ–å¤šè¯­è¨€åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%E5%8C%85"><span class="toc-number">12.3.2.</span> <span class="toc-text">å¼•å…¥è‡ªå®šä¹‰è¯­è¨€åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E4%B8%AD%E5%BA%94%E7%94%A8%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%8C%85"><span class="toc-number">12.3.3.</span> <span class="toc-text">åœ¨å·¦ä¾§èœå•ä¸­åº”ç”¨å¤šè¯­è¨€åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%8F%92%E4%BB%B6"><span class="toc-number">12.3.4.</span> <span class="toc-text">å°è£…å¤šè¯­è¨€æ’ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tab%E9%A1%B5%E7%9A%84%E8%A7%86%E5%9B%BE%E5%BC%95%E5%85%A5"><span class="toc-number">12.4.</span> <span class="toc-text">tabé¡µçš„è§†å›¾å¼•å…¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E4%B9%8B%E5%89%8D%E7%9A%84%E8%B7%AF%E7%94%B1%E6%A8%A1%E5%BC%8F"><span class="toc-number">12.5.</span> <span class="toc-text">æ‰“åŒ…ä¹‹å‰çš„è·¯ç”±æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%92%8CCDN%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-number">12.6.</span> <span class="toc-text">æ€§èƒ½åˆ†æå’ŒCDNçš„åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="toc-number">12.6.1.</span> <span class="toc-text">æ€§èƒ½åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webpack%E6%8E%92%E9%99%A4%E6%89%93%E5%8C%85"><span class="toc-number">12.6.2.</span> <span class="toc-text">webpackæ’é™¤æ‰“åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CDN%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">12.6.3.</span> <span class="toc-text">CDNæ–‡ä»¶é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%85%A5CDN%E6%96%87%E4%BB%B6%E5%88%B0%E6%A8%A1%E6%9D%BF"><span class="toc-number">12.6.4.</span> <span class="toc-text">æ³¨å…¥CDNæ–‡ä»¶åˆ°æ¨¡æ¿</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8nodejs%E7%8E%AF%E5%A2%83%E4%B8%AD%E5%BA%94%E7%94%A8%E5%B9%B6%E4%BB%A3%E7%90%86%E8%B7%A8%E5%9F%9F"><span class="toc-number">12.7.</span> <span class="toc-text">åœ¨nodejsç¯å¢ƒä¸­åº”ç”¨å¹¶ä»£ç†è·¨åŸŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8koa%E6%A1%86%E6%9E%B6%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE"><span class="toc-number">12.7.1.</span> <span class="toc-text">ä½¿ç”¨koaæ¡†æ¶éƒ¨ç½²é¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3history%E9%A1%B5%E9%9D%A2%E8%AE%BF%E9%97%AE%E9%97%AE%E9%A2%98"><span class="toc-number">12.7.2.</span> <span class="toc-text">è§£å†³historyé¡µé¢è®¿é—®é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">12.7.3.</span> <span class="toc-text">è§£å†³ç”Ÿäº§ç¯å¢ƒè·¨åŸŸé—®é¢˜</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021  <i id="heartbeat" class="fa fas fa-heartbeat"></i> è·¯å°é›¨</div><div class="footer_custom_text">plain living and high thinking</div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="æ”¾å¤§å­—ä½“"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="ç¼©å°å­—ä½“"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><canvas id="universe"></canvas><div class="aplayer no-destroy" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="150" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>é‚£å¹´ä»Šæ—¥</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('å·²æŒ‚è½½history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // æ— æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // æœ‰æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('å·²æŒ‚è½½electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // æ— æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // æœ‰æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body></html>
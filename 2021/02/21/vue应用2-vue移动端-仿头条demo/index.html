<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>vueåº”ç”¨2-vueç§»åŠ¨ç«¯-å¤´æ¡demo | Abigail Cuiçš„å°ç«™</title><meta name="author" content="è·¯å°é›¨"><meta name="copyright" content="è·¯å°é›¨"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="ä¸€ã€é¡¹ç›®åˆå§‹åŒ– ç›®æ ‡  èƒ½ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›® äº†è§£ Vant ç»„ä»¶åº“çš„å¯¼å…¥æ–¹å¼ æŒæ¡åˆ¶ä½œä½¿ç”¨å­—ä½“å›¾æ ‡çš„æ–¹å¼ æŒæ¡å¦‚ä½•åœ¨ Vue é¡¹ç›®ä¸­å¤„ç† REM é€‚é… ç†è§£ axios è¯·æ±‚æ¨¡å—çš„å°è£…   ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›® å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… VueCLIï¼Œè¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…æˆ–æ˜¯å‡çº§ï¼š 1npm install --global @vue&#x2F;cli  åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»º Vue">
<meta property="og:type" content="article">
<meta property="og:title" content="vueåº”ç”¨2-vueç§»åŠ¨ç«¯-å¤´æ¡demo">
<meta property="og:url" content="https://www.abigailcui.com/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/index.html">
<meta property="og:site_name" content="Abigail Cuiçš„å°ç«™">
<meta property="og:description" content="ä¸€ã€é¡¹ç›®åˆå§‹åŒ– ç›®æ ‡  èƒ½ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›® äº†è§£ Vant ç»„ä»¶åº“çš„å¯¼å…¥æ–¹å¼ æŒæ¡åˆ¶ä½œä½¿ç”¨å­—ä½“å›¾æ ‡çš„æ–¹å¼ æŒæ¡å¦‚ä½•åœ¨ Vue é¡¹ç›®ä¸­å¤„ç† REM é€‚é… ç†è§£ axios è¯·æ±‚æ¨¡å—çš„å°è£…   ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›® å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… VueCLIï¼Œè¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…æˆ–æ˜¯å‡çº§ï¼š 1npm install --global @vue&#x2F;cli  åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»º Vue">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg">
<meta property="article:published_time" content="2021-02-21T07:04:15.000Z">
<meta property="article:modified_time" content="2021-09-24T11:25:30.583Z">
<meta property="article:author" content="è·¯å°é›¨">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://www.abigailcui.com/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'vueåº”ç”¨2-vueç§»åŠ¨ç«¯-å¤´æ¡demo',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-09-24 19:25:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    document.addEventListener('pjax:complete', detectApple)})(window)</script><link rel="stylesheet" href="/css/custom.css"><style type="text/css">#universe{display: block;position: fixed;margin: 0;padding: 0;border: 0;outline: 0;left: 0;top: 0;width: 100%;height: 100%;pointer-events: none;z-index: -1;}</style><style type="text/css">#toggle-sidebar {bottom: 80px}</style><style type="text/css">#toggle-sidebar {left:100px}</style><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/css/main.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><!-- hexo injector head_end end --><style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loaderé¡µé¢æ¶ˆå¤±é‡‡ç”¨æ¸éšçš„æ–¹å¼*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }
    
    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }
    
   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}
    
    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}
    
   
    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logoå‡ºç°åŠ¨ç”» */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//ä½¿ç”¨æ¸éšçš„æ–¹æ³•æ·¡å‡ºloading page
            // document.getElementById("body-wrap").style.display="flex";
            document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//å¼ºåˆ¶æ˜¾ç¤ºloading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>
 <div id="loading-container">
     <p class="loading-text"> å…¨å‘˜åŠ é€Ÿä¸­ . . . </p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">25</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/todo-List/index.html#/myday"><i class="fa-fw fas fa-clock"></i><span> ToDo-List</span></a></li><li><a class="site-page child" href="/te/"><i class="fa-fw fas fa-envelope"></i><span> ç–«æƒ…åœ°å›¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-gamepad"></i><span> å°æ¸¸æˆ</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/catch-cat-master/index.html"><i class="fa-fw fas fa-certificate"></i><span> å µä½é»‘çŒ«!</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://daxigua.guole.fun/"><i class="fa-fw fas fa-asterisk"></i><span> åˆæˆå¤§ğŸ‰</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog-game.vercel.app/znm/"><i class="fa-fw fas fa-podcast"></i><span> è§£å‹å…­è¾¹å½¢</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Abigail Cuiçš„å°ç«™</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> List</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/todo-List/index.html#/myday"><i class="fa-fw fas fa-clock"></i><span> ToDo-List</span></a></li><li><a class="site-page child" href="/te/"><i class="fa-fw fas fa-envelope"></i><span> ç–«æƒ…åœ°å›¾</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-gamepad"></i><span> å°æ¸¸æˆ</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/catch-cat-master/index.html"><i class="fa-fw fas fa-certificate"></i><span> å µä½é»‘çŒ«!</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://daxigua.guole.fun/"><i class="fa-fw fas fa-asterisk"></i><span> åˆæˆå¤§ğŸ‰</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://blog-game.vercel.app/znm/"><i class="fa-fw fas fa-podcast"></i><span> è§£å‹å…­è¾¹å½¢</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">vueåº”ç”¨2-vueç§»åŠ¨ç«¯-å¤´æ¡demo</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2021-02-21T07:04:15.000Z" title="å‘è¡¨äº 2021-02-21 15:04:15">2021-02-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-09-24T11:25:30.583Z" title="æ›´æ–°äº 2021-09-24 19:25:30">2021-09-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">29.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>125åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="vueåº”ç”¨2-vueç§»åŠ¨ç«¯-å¤´æ¡demo"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="ä¸€ã€é¡¹ç›®åˆå§‹åŒ–"><a href="#ä¸€ã€é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="ä¸€ã€é¡¹ç›®åˆå§‹åŒ–"></a>ä¸€ã€é¡¹ç›®åˆå§‹åŒ–</h1><blockquote>
<p>ç›®æ ‡</p>
<ul>
<li>èƒ½ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›®</li>
<li>äº†è§£ Vant ç»„ä»¶åº“çš„å¯¼å…¥æ–¹å¼</li>
<li>æŒæ¡åˆ¶ä½œä½¿ç”¨å­—ä½“å›¾æ ‡çš„æ–¹å¼</li>
<li>æŒæ¡å¦‚ä½•åœ¨ Vue é¡¹ç›®ä¸­å¤„ç† REM é€‚é…</li>
<li>ç†è§£ axios è¯·æ±‚æ¨¡å—çš„å°è£…</li>
</ul>
</blockquote>
<h2 id="ä½¿ç”¨-Vue-CLI-åˆ›å»ºé¡¹ç›®"><a href="#ä½¿ç”¨-Vue-CLI-åˆ›å»ºé¡¹ç›®" class="headerlink" title="ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›®"></a>ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›®</h2><blockquote>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£… VueCLIï¼Œè¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å®‰è£…æˆ–æ˜¯å‡çº§ï¼š</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --global @vue/cli</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»º Vue é¡¹ç›®ï¼š</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create toutiao-m</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue CLI v4.2.3</span><br><span class="line">? Please pick a preset:</span><br><span class="line">  default (babel, eslint)</span><br><span class="line">&gt; Manually select features</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>defaultï¼šé»˜è®¤å‹¾é€‰ babelã€eslintï¼Œå›è½¦ä¹‹åç›´æ¥è¿›å…¥è£…åŒ…</p>
<p>manuallyï¼šè‡ªå®šä¹‰å‹¾é€‰ç‰¹æ€§é…ç½®ï¼Œé€‰æ‹©å®Œæ¯•ä¹‹åï¼Œæ‰ä¼šè¿›å…¥è£…åŒ…</p>
<p>é€‰æ‹©ç¬¬ 2 ç§ï¼šæ‰‹åŠ¨é€‰æ‹©ç‰¹æ€§ï¼Œæ”¯æŒæ›´å¤šè‡ªå®šä¹‰é€‰é¡¹</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">? Please pick a preset: Manually select features</span><br><span class="line">? Check the features needed for your project:</span><br><span class="line"> (*) Babel</span><br><span class="line"> ( ) TypeScript</span><br><span class="line"> ( ) Progressive Web App (PWA) Support</span><br><span class="line"> (*) Router</span><br><span class="line"> (*) Vuex</span><br><span class="line"> (*) CSS Pre-processors</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">(*) Linter / Formatter</span></span><br><span class="line"> ( ) Unit Testing</span><br><span class="line"> ( ) E2E Testing</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>åˆ†åˆ«é€‰æ‹©ï¼š<br>Babelï¼šes6 è½¬ es5<br>Routerï¼šè·¯ç”±<br>Vuexï¼šæ•°æ®å®¹å™¨ï¼Œå­˜å‚¨å…±äº«æ•°æ®<br>CSS Pre-processorsï¼šCSS é¢„å¤„ç†å™¨ï¼Œåé¢ä¼šæç¤ºä½ é€‰æ‹© lessã€sassã€stylus ç­‰<br>Linter / Formatterï¼šä»£ç æ ¼å¼æ ¡éªŒ</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? Use history mode for router? (Requires proper server setup for index fallback in production) (Y/n) n</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>æ˜¯å¦ä½¿ç”¨ history è·¯ç”±æ¨¡å¼ï¼Œè¿™é‡Œè¾“å…¥ n ä¸ä½¿ç”¨</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">? Pick a CSS pre-processor (PostCSS, Autoprefixer and CSS Modules are supported by default):</span><br><span class="line">  Sass/SCSS (with dart-sass)</span><br><span class="line">  Sass/SCSS (with node-sass)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Less</span></span><br><span class="line">  Stylus</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>é€‰æ‹© CSS é¢„å¤„ç†å™¨ï¼Œè¿™é‡Œé€‰æ‹©æˆ‘ä»¬ç†Ÿæ‚‰çš„ Less</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">? Pick a linter / formatter config:</span><br><span class="line">  ESLint with error prevention only</span><br><span class="line">  ESLint + Airbnb config</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> ESLint + Standard config</span></span><br><span class="line">  ESLint + Prettier</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>é€‰æ‹©æ ¡éªŒå·¥å…·ï¼Œè¿™é‡Œé€‰æ‹© ESLint + <a target="_blank" rel="noopener" href="https://standardjs.com/">Standard config</a></p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">? Pick additional lint features:</span><br><span class="line"> (*) Lint on save</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">(*) Lint and fix on commit</span></span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>é€‰æ‹©åœ¨ä»€ä¹ˆæ—¶æœºä¸‹è§¦å‘ä»£ç æ ¼å¼æ ¡éªŒï¼š</p>
<ul>
<li>Lint on saveï¼šæ¯å½“ä¿å­˜æ–‡ä»¶çš„æ—¶å€™</li>
<li>Lint and fix on commitï¼šæ¯å½“æ‰§è¡Œ <code>git commit</code> æäº¤çš„æ—¶å€™</li>
</ul>
</blockquote>
<p>è¿™é‡Œå»ºè®®ä¸¤ä¸ªéƒ½é€‰ä¸Šï¼Œæ›´ä¸¥è°¨ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> In dedicated config files</span></span><br><span class="line">  In package.json</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>Babelã€ESLint ç­‰å·¥å…·ä¼šæœ‰ä¸€äº›é¢å¤–çš„é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œçš„æ„æ€æ˜¯é—®ä½ å°†è¿™äº›å·¥å…·ç›¸å…³çš„é…ç½®æ–‡ä»¶å†™åˆ°å“ªé‡Œï¼š</p>
<ul>
<li>In dedicated config filesï¼šåˆ†åˆ«ä¿å­˜åˆ°å•ç‹¬çš„é…ç½®æ–‡ä»¶</li>
<li>In package.jsonï¼šä¿å­˜åˆ° package.json æ–‡ä»¶ä¸­</li>
</ul>
</blockquote>
<p>è¿™é‡Œå»ºè®®é€‰æ‹©ç¬¬ 1 ä¸ªï¼Œä¿å­˜åˆ°å•ç‹¬çš„é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·æ–¹ä¾¿æˆ‘ä»¬åšè‡ªå®šä¹‰é…ç½®ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? Save this as a preset for future projects? (y/N) N</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>è¿™é‡Œé‡Œæ˜¯é—®ä½ æ˜¯å¦éœ€è¦å°†åˆšæ‰é€‰æ‹©çš„ä¸€ç³»åˆ—é…ç½®ä¿å­˜èµ·æ¥ï¼Œç„¶åå®ƒå¯ä»¥å¸®ä½ è®°ä½ä¸Šé¢çš„ä¸€ç³»åˆ—é€‰æ‹©ï¼Œä»¥ä¾¿ä¸‹æ¬¡ç›´æ¥é‡ç”¨ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™é‡Œæ ¹æ®è‡ªå·±éœ€è¦è¾“å…¥ y æˆ–è€… nï¼Œæˆ‘è¿™é‡Œè¾“å…¥ n ä¸éœ€è¦ã€‚</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">âœ¨  Creating project in C:\Users\LPZ\Desktop\topline-m-fe89\topline-m-89.</span><br><span class="line">ï¿½  Initializing git repository...</span><br><span class="line">âš™  Installing CLI plugins. This might take a while...</span><br><span class="line"></span><br><span class="line">[          ........] - extract:object-keys: sill extract json5@2.1.1</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>å‘å¯¼é…ç½®ç»“æŸï¼Œå¼€å§‹è£…åŒ…ã€‚<br>å®‰è£…åŒ…çš„æ—¶é—´å¯èƒ½è¾ƒé•¿ï¼Œè¯·è€å¿ƒç­‰å¾…â€¦â€¦</p>
</blockquote>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">âš“  Running completion hooks...</span><br><span class="line"></span><br><span class="line">ï¿½  Generating README.md...</span><br><span class="line"></span><br><span class="line">ï¿½  Successfully created project topline-m-89.</span><br><span class="line">ï¿½  Get started with the following commands:</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta"> $</span><span class="bash"> <span class="built_in">cd</span> topline-m</span></span><br><span class="line"><span class="meta"> $</span><span class="bash"> npm run serve</span></span><br></pre></td></tr></tbody></table></figure>
<p>å®‰è£…ç»“æŸï¼Œå‘½ä»¤æç¤ºä½ é¡¹ç›®åˆ›å»ºæˆåŠŸï¼ŒæŒ‰ç…§å‘½ä»¤è¡Œçš„æç¤ºåœ¨ç»ˆç«¯ä¸­åˆ†åˆ«è¾“å…¥ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•</span></span><br><span class="line">cd toutiao-webapp</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯åŠ¨å¼€å‘æœåŠ¡</span></span><br><span class="line">npm run serve</span><br></pre></td></tr></tbody></table></figure>




<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DONE  Compiled successfully in 7527ms</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> App running at:</span><br><span class="line"> - Local:   http://localhost:8080/</span><br><span class="line"> - Network: http://192.168.10.216:8080/</span><br><span class="line"></span><br><span class="line"> Note that the development build is not optimized.</span><br><span class="line"> To create a production build, run npm run build.</span><br></pre></td></tr></tbody></table></figure>
<blockquote>
<p>å¯åŠ¨æˆåŠŸï¼Œå‘½ä»¤è¡Œä¸­è¾“å‡ºé¡¹ç›®çš„ http è®¿é—®åœ°å€ã€‚<br>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥å…¶ä¸­ä»»ä½•ä¸€ä¸ªåœ°å€è¿›è¡Œè®¿é—®ã€‚</p>
</blockquote>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582010300149-9932febe-2625-4ee7-986f-9190ab449fec.png" alt="image.png"></p>
<p>å¦‚æœèƒ½çœ‹åˆ°è¯¥é¡µé¢ï¼Œæ­å–œä½ ï¼Œé¡¹ç›®åˆ›å»ºæˆåŠŸäº†ã€‚</p>
<h2 id="åŠ å…¥-Git-ç‰ˆæœ¬ç®¡ç†"><a href="#åŠ å…¥-Git-ç‰ˆæœ¬ç®¡ç†" class="headerlink" title="åŠ å…¥ Git ç‰ˆæœ¬ç®¡ç†"></a>åŠ å…¥ Git ç‰ˆæœ¬ç®¡ç†</h2><p>å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>ä»£ç å¤‡ä»½</li>
<li>å¤šäººåä½œ</li>
<li>å†å²è®°å½•</li>
<li>â€¦</li>
</ul>
<p>ï¼ˆ1ï¼‰åˆ›å»ºè¿œç¨‹ä»“åº“</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/lipengzhou">GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://gitee.com/">ç äº‘</a></li>
<li><a target="_blank" rel="noopener" href="https://coding.net/">Coding</a></li>
<li>â€¦</li>
</ul>
<p>ï¼ˆ2ï¼‰å°†æœ¬åœ°ä»“åº“æ¨åˆ°çº¿ä¸Š</p>
<p>å¦‚æœæ²¡æœ‰æœ¬åœ°ä»“åº“ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºæœ¬åœ°ä»“åº“</span></span><br><span class="line">git init</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</span></span><br><span class="line">git add æ–‡ä»¶</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æäº¤å†å²è®°å½•</span></span><br><span class="line">git commit "æäº¤æ—¥å¿—"</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ è¿œç«¯ä»“åº“åœ°å€</span></span><br><span class="line">git remote add origin ä½ çš„è¿œç¨‹ä»“åº“åœ°å€</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¨é€æäº¤</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœå·²æœ‰æœ¬åœ°ä»“åº“ï¼ˆVue CLI å·²ç»å¸®æˆ‘ä»¬åˆå§‹åŒ–å¥½äº†ï¼‰ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ è¿œç«¯ä»“åº“åœ°å€</span></span><br><span class="line">git remote add origin ä½ çš„è¿œç¨‹ä»“åº“åœ°å€</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¨é€æäº¤</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœä¹‹åé¡¹ç›®ä»£ç æœ‰äº†å˜åŠ¨éœ€è¦æäº¤ï¼š</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add</span><br><span class="line">git commit</span><br><span class="line">git push</span><br></pre></td></tr></tbody></table></figure>

<h2 id="è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„"><a href="#è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„" class="headerlink" title="è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„"></a>è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„</h2><p>é»˜è®¤ç”Ÿæˆçš„ç›®å½•ç»“æ„ä¸æ»¡è¶³æˆ‘ä»¬çš„å¼€å‘éœ€æ±‚ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦åšä¸€äº›è‡ªå®šä¹‰æ”¹åŠ¨ã€‚</p>
<p>è¿™é‡Œä¸»è¦å°±æ˜¯ä¸‹é¢çš„ä¸¤ä¸ªå·¥ä½œï¼š</p>
<ul>
<li>åˆ é™¤åˆå§‹åŒ–çš„é»˜è®¤æ–‡ä»¶</li>
<li>æ–°å¢è°ƒæ•´æˆ‘ä»¬éœ€è¦çš„ç›®å½•ç»“æ„</li>
</ul>
<p>1ã€å°† <code>App.vue</code> ä¿®æ”¹ä¸º</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>é»‘é©¬å¤´æ¡<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'App'</span></span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€å°† <code>router/index.js</code> ä¿®æ”¹ä¸º</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter({</span><br><span class="line">  routes</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åˆ é™¤</p>
<ul>
<li>src/views/About.vue</li>
<li>src/views/Home.vue</li>
<li>src/components/HelloWorld.vue</li>
<li>src/assets/logo.png</li>
</ul>
<p>4ã€åˆ›å»ºä»¥ä¸‹å‡ ä¸ªç›®å½•</p>
<ul>
<li>src/api ç›®å½•<ul>
<li>å­˜å‚¨æ¥å£å°è£…</li>
</ul>
</li>
<li>src/utils ç›®å½•<ul>
<li>å­˜å‚¨ä¸€äº›å·¥å…·æ¨¡å—</li>
</ul>
</li>
<li>src/styles ç›®å½•<ul>
<li>index.less æ–‡ä»¶ï¼Œå­˜å‚¨å…¨å±€æ ·å¼</li>
<li>åœ¨ <code>main.js</code> ä¸­åŠ è½½å…¨å±€æ ·å¼ <code>import './styles/index.less'</code></li>
</ul>
</li>
</ul>
<p>è°ƒæ•´ä¹‹åçš„ç›®å½•ç»“æ„å¦‚ä¸‹ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.                                 </span><br><span class="line">â”œâ”€â”€ README.md                     </span><br><span class="line">â”œâ”€â”€ babel.config.js               </span><br><span class="line">â”œâ”€â”€ package-lock.json             </span><br><span class="line">â”œâ”€â”€ package.json                  </span><br><span class="line">â”œâ”€â”€ public                        </span><br><span class="line">â”‚   â”œâ”€â”€ favicon.ico               </span><br><span class="line">â”‚   â””â”€â”€ index.html                </span><br><span class="line">â””â”€â”€ src                           </span><br><span class="line">    â”œâ”€â”€ api</span><br><span class="line">    â”œâ”€â”€ App.vue                   </span><br><span class="line">    â”œâ”€â”€ assets                    </span><br><span class="line">    â”œâ”€â”€ components                </span><br><span class="line">    â”œâ”€â”€ main.js                   </span><br><span class="line">    â”œâ”€â”€ router</span><br><span class="line">    â”œâ”€â”€ utils</span><br><span class="line">    â”œâ”€â”€ styles</span><br><span class="line">    â”œâ”€â”€ store                     </span><br><span class="line">    â””â”€â”€ views</span><br></pre></td></tr></tbody></table></figure>



<h2 id="å¯¼å…¥å›¾æ ‡ç´ æ"><a href="#å¯¼å…¥å›¾æ ‡ç´ æ" class="headerlink" title="å¯¼å…¥å›¾æ ‡ç´ æ"></a>å¯¼å…¥å›¾æ ‡ç´ æ</h2><p>è®¾è®¡å¸ˆä¸ºæˆ‘ä»¬å•ç‹¬æä¾›äº†è®¾è®¡ç¨¿ä¸­çš„å›¾æ ‡ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬åœ¨è¿™é‡ŒæŠŠå®ƒåˆ¶ä½œä¸ºå­—ä½“å›¾æ ‡ã€‚</p>
<p>åˆ¶ä½œå­—ä½“å›¾æ ‡çš„å·¥å…·æœ‰å¾ˆå¤šï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æ¨èå¤§å®¶ä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://www.iconfont.cn/%E3%80%82">https://www.iconfont.cn/ã€‚</a></p>
<p>ä¸€ã€æ³¨å†Œè´¦æˆ·</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325004756766.png" alt="image-20200325004756766"></p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325004912687.png" alt="image-20200325004912687"></p>
<blockquote>
<p>ç›´æ¥é€‰æ‹©ç¬¬ä¸‰æ–¹ç™»å½•å³å¯</p>
</blockquote>
<p>äºŒã€åˆ›å»ºé¡¹ç›®</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325005117323.png" alt="image-20200325005117323"></p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325005648620.png" alt="image-20200325005648620"></p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010034390.png" alt="image-20200325010034390"></p>
<p>ä¸‰ã€ä¸Šä¼ å›¾æ ‡åˆ°é¡¹ç›®</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010119980.png" alt="image-20200325010119980"></p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010201945.png" alt="image-20200325010201945"></p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010254398.png" alt="image-20200325010254398"></p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010413448.png" alt="image-20200325010413448"></p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010439802.png" alt="image-20200325010439802"></p>
<p>å››ã€ç”Ÿæˆé“¾æ¥</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200325010505302.png" alt="image-20200325010505302"></p>
<p>äº”ã€é…ç½®åˆ°é¡¹ç›®ä¸­ä½¿ç”¨</p>
<p>ä¸€ç§æ–¹å¼æ˜¯<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/cookbook/editable-svg-icons.html">å°† SVG å›¾æ ‡ åŒ…è£…ä¸º Vue ç»„ä»¶æ¥ä½¿ç”¨</a>ã€‚</p>
<p>ä¸€ç§æ–¹å¼æ˜¯å°† SVG åˆ¶ä½œä¸ºå­—ä½“å›¾æ ‡æ¥ä½¿ç”¨ï¼š</p>
<h2 id="å¼•å…¥-Vant-ç»„ä»¶åº“"><a href="#å¼•å…¥-Vant-ç»„ä»¶åº“" class="headerlink" title="å¼•å…¥ Vant ç»„ä»¶åº“"></a>å¼•å…¥ Vant ç»„ä»¶åº“</h2><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582010382780-c25b1af8-ce6d-438e-a6d5-009cd426b927.png" alt="image.png" style="zoom:25%;">



<p>Vant æ˜¯æœ‰èµå•†åŸå‰ç«¯å¼€å‘å›¢é˜Ÿå¼€å‘çš„ä¸€ä¸ªåŸºäº Vue.js çš„ç§»åŠ¨ç«¯ç»„ä»¶åº“ï¼Œå®ƒæä¾›äº†éå¸¸ä¸°å¯Œçš„ç§»åŠ¨ç«¯åŠŸèƒ½ç»„ä»¶ï¼Œç®€å•æ˜“ç”¨ã€‚</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/">å®˜æ–¹æ–‡æ¡£</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/youzan/vant">GitHub ä»“åº“</a></li>
</ul>
<p>ä¸‹é¢æ˜¯åœ¨ Vant å®˜ç½‘ä¸­åˆ—å‡ºçš„ä¸€äº›ä¼˜ç‚¹ï¼š</p>
<ul>
<li>60+ é«˜è´¨é‡ç»„ä»¶</li>
<li>90% å•å…ƒæµ‹è¯•è¦†ç›–ç‡</li>
<li>å®Œå–„çš„ä¸­è‹±æ–‡æ–‡æ¡£å’Œç¤ºä¾‹</li>
<li>æ”¯æŒæŒ‰éœ€å¼•å…¥</li>
<li>æ”¯æŒä¸»é¢˜å®šåˆ¶</li>
<li>æ”¯æŒå›½é™…åŒ–</li>
<li>æ”¯æŒ TS</li>
<li>æ”¯æŒ SSR</li>
</ul>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä¸»è¦ä½¿ç”¨ Vant ä½œä¸ºæ ¸å¿ƒç»„ä»¶åº“ï¼Œä¸‹é¢æˆ‘ä»¬æ ¹æ®<a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/quickstart#yin-ru-zu-jian">å®˜æ–¹æ–‡æ¡£</a>å°† Vant å¯¼å…¥é¡¹ç›®ä¸­ã€‚</p>
<p>å°† Vant å¼•å…¥é¡¹ç›®ä¸€å…±æœ‰å››ç§æ–¹å¼ï¼š</p>
<ul>
<li><p>æ–¹å¼ä¸€ï¼šè‡ªåŠ¨æŒ‰éœ€å¼•å…¥ç»„ä»¶</p>
<ul>
<li>å’Œæ–¹å¼äºŒä¸€æ ·ï¼Œéƒ½æ˜¯æŒ‰éœ€å¼•å…¥ï¼Œä½†æ˜¯åŠ è½½æ›´æ–¹ä¾¿ä¸€äº›ï¼ˆéœ€è¦é¢å¤–é…ç½®æ’ä»¶ï¼‰</li>
<li>ä¼˜ç‚¹ï¼šæ‰“åŒ…ä½“ç§¯å°</li>
<li>ç¼ºç‚¹ï¼šæ¯ä¸ªç»„ä»¶åœ¨ä½¿ç”¨ä¹‹å‰éƒ½éœ€è¦æ‰‹åŠ¨åŠ è½½æ³¨å†Œ</li>
</ul>
</li>
<li><p>æ–¹å¼äºŒï¼šæ‰‹åŠ¨æŒ‰éœ€å¼•å…¥ç»„ä»¶</p>
<ul>
<li>åœ¨ä¸ä½¿ç”¨æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰‹åŠ¨å¼•å…¥éœ€è¦çš„ç»„ä»¶</li>
<li>ä¼˜ç‚¹ï¼šæ‰“åŒ…ä½“ç§¯å°</li>
<li>ç¼ºç‚¹ï¼šæ¯ä¸ªç»„ä»¶åœ¨ä½¿ç”¨ä¹‹å‰éƒ½éœ€è¦æ‰‹åŠ¨åŠ è½½æ³¨å†Œ</li>
</ul>
</li>
<li><p>æ–¹å¼ä¸‰ï¼šå¯¼å…¥æ‰€æœ‰ç»„ä»¶</p>
<ul>
<li>Vant æ”¯æŒä¸€æ¬¡æ€§å¯¼å…¥æ‰€æœ‰ç»„ä»¶ï¼Œå¼•å…¥æ‰€æœ‰ç»„ä»¶ä¼šå¢åŠ ä»£ç åŒ…ä½“ç§¯ï¼Œå› æ­¤ä¸æ¨èè¿™ç§åšæ³•</li>
<li>ä¼˜ç‚¹ï¼šå¯¼å…¥ä¸€æ¬¡ï¼Œä½¿ç”¨æ‰€æœ‰</li>
<li>ç¼ºç‚¹ï¼šæ‰“åŒ…ä½“ç§¯å¤§</li>
</ul>
</li>
<li><p>æ–¹å¼å››ï¼šé€šè¿‡ CDN å¼•å…¥</p>
<ul>
<li>ä½¿ç”¨ Vant æœ€ç®€å•çš„æ–¹æ³•æ˜¯ç›´æ¥åœ¨ html æ–‡ä»¶ä¸­å¼•å…¥ CDN é“¾æ¥ï¼Œä¹‹åä½ å¯ä»¥é€šè¿‡å…¨å±€å˜é‡<code>vant</code>è®¿é—®åˆ°æ‰€æœ‰ç»„ä»¶ã€‚</li>
<li>ä¼˜ç‚¹ï¼šé€‚åˆä¸€äº›æ¼”ç¤ºã€ç¤ºä¾‹é¡¹ç›®ï¼Œä¸€ä¸ª html æ–‡ä»¶å°±å¯ä»¥è·‘èµ·æ¥</li>
<li>ç¼ºç‚¹ï¼šä¸é€‚åˆåœ¨æ¨¡å—åŒ–ç³»ç»Ÿä¸­ä½¿ç”¨</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œå»ºè®®ä¸ºäº†å‰æœŸå¼€å‘çš„ä¾¿åˆ©æ€§æˆ‘ä»¬é€‰æ‹©æ–¹å¼ä¸‰ï¼šå¯¼å…¥æ‰€æœ‰ç»„ä»¶ï¼Œåœ¨æœ€ååšæ‰“åŒ…ä¼˜åŒ–çš„æ—¶å€™æ ¹æ®éœ€æ±‚é…ç½®æŒ‰éœ€åŠ è½½ä»¥é™ä½æ‰“åŒ…ä½“ç§¯å¤§å°ã€‚</p>
<p>1ã€å®‰è£… Vant</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vant</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ <code>main.js</code> ä¸­åŠ è½½æ³¨å†Œ Vant ç»„ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vant <span class="keyword">from</span> <span class="string">'vant'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'vant/lib/index.css'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vant)</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æŸ¥é˜…æ–‡æ¡£ä½¿ç”¨ç»„ä»¶</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582017539392-6c48b63f-8e8b-4ef2-b4fa-ddeb059cec04.png" alt="image.png"></p>
<blockquote>
<p>Vant çš„æ–‡æ¡£éå¸¸æ¸…æ™°ï¼Œå·¦ä¾§æ˜¯ç»„ä»¶ç›®å½•å¯¼èˆªï¼Œä¸­é—´æ˜¯æ•ˆæœä»£ç ï¼Œå³è¾¹æ˜¯æ•ˆæœé¢„è§ˆã€‚</p>
</blockquote>
<p>ä¾‹å¦‚æˆ‘ä»¬åœ¨æ ¹ç»„ä»¶ä½¿ç”¨ Vant ä¸­çš„ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"primary"</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"info"</span>&gt;</span>ä¿¡æ¯æŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"warning"</span>&gt;</span>è­¦å‘ŠæŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">"danger"</span>&gt;</span>å±é™©æŒ‰é’®<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å•å…ƒæ ¼"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å•å…ƒæ ¼"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> <span class="attr">label</span>=<span class="string">"æè¿°ä¿¡æ¯"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200227231037762.png" alt="image-20200227231037762" style="zoom:50%;">

<blockquote>
<p>å¦‚æœåœ¨é¡µé¢ä¸­èƒ½å¤Ÿæ­£å¸¸çš„çœ‹åˆ°ä¸‹é¢çš„æ•ˆæœï¼Œåˆ™è¯´æ˜ Vant å¯¼å…¥æˆåŠŸäº†ã€‚</p>
</blockquote>
<h2 id="ç§»åŠ¨ç«¯-REM-é€‚é…"><a href="#ç§»åŠ¨ç«¯-REM-é€‚é…" class="headerlink" title="ç§»åŠ¨ç«¯ REM é€‚é…"></a>ç§»åŠ¨ç«¯ REM é€‚é…</h2><p>Vant ä¸­çš„æ ·å¼é»˜è®¤ä½¿ç”¨ <code>px</code> ä½œä¸ºå•ä½ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ <code>rem</code> å•ä½ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå·¥å…·ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/cuth/postcss-pxtorem">postcss-pxtorem</a> æ˜¯ä¸€æ¬¾ postcss æ’ä»¶ï¼Œç”¨äºå°†å•ä½è½¬åŒ–ä¸º rem</li>
<li><a target="_blank" rel="noopener" href="https://github.com/amfe/lib-flexible">lib-flexible</a> ç”¨äºè®¾ç½® rem åŸºå‡†å€¼</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«å°†è¿™ä¸¤ä¸ªå·¥å…·é…ç½®åˆ°é¡¹ç›®ä¸­å®Œæˆ REM é€‚é…ã€‚</p>
<p><strong>ä¸€ã€ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/amfe/lib-flexible">lib-flexible</a> åŠ¨æ€è®¾ç½® REM åŸºå‡†å€¼ï¼ˆhtml æ ‡ç­¾çš„å­—ä½“å¤§å°ï¼‰</strong></p>
<p>1ã€å®‰è£…</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yarn add amfe-flexible</span></span><br><span class="line">npm i amfe-flexible</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨ <code>main.js</code> ä¸­åŠ è½½æ‰§è¡Œè¯¥æ¨¡å—</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'amfe-flexible'</span></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ï¼šåœ¨æµè§ˆå™¨ä¸­åˆ‡æ¢ä¸åŒçš„æ‰‹æœºè®¾å¤‡å°ºå¯¸ï¼Œè§‚å¯Ÿ html æ ‡ç­¾ <code>font-size</code> çš„å˜åŒ–ã€‚</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582034718723-500ef407-af66-4770-8fdd-33d0fc3ef9ed.png" alt="image.png"></p>
<blockquote>
<p>ä¾‹å¦‚åœ¨ iPhone 6/7/8 è®¾å¤‡ä¸‹ï¼Œhtml æ ‡ç­¾å­—ä½“å¤§å°ä¸º 37.5 px</p>
</blockquote>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582034950176-868d5875-3496-45d3-8a61-e556e1cc1f90.png" alt="image.png"></p>
<blockquote>
<p>ä¾‹å¦‚åœ¨ iPhone 6/7/8 Plus è®¾å¤‡ä¸‹ï¼Œhtml æ ‡ç­¾å­—ä½“å¤§å°ä¸º 41.4 px</p>
</blockquote>
<p><strong>äºŒã€ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/cuth/postcss-pxtorem">postcss-pxtorem</a> å°† <code>px</code> è½¬ä¸º <code>rem</code></strong></p>
<p>1ã€å®‰è£…</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yarn add -D postcss-pxtorem</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -D æ˜¯ --save-dev çš„ç®€å†™</span></span><br><span class="line">npm install postcss-pxtorem -D</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨<strong>é¡¹ç›®æ ¹ç›®å½•</strong>ä¸­åˆ›å»º <code>.postcssrc.js</code> æ–‡ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'autoprefixer'</span>: {</span><br><span class="line">      <span class="attr">browsers</span>: [<span class="string">'Android &gt;= 4.0'</span>, <span class="string">'iOS &gt;= 8'</span>]</span><br><span class="line">    },</span><br><span class="line">    <span class="string">'postcss-pxtorem'</span>: {</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">37.5</span>,</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">'*'</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€<strong>é…ç½®å®Œæ¯•ï¼Œé‡æ–°å¯åŠ¨æœåŠ¡</strong></p>
<p>æœ€åæµ‹è¯•ï¼š<strong>åˆ·æ–°æµè§ˆå™¨é¡µé¢</strong>ï¼Œå®¡æŸ¥å…ƒç´ çš„æ ·å¼æŸ¥çœ‹æ˜¯å¦å·²å°† <code>px</code> è½¬æ¢ä¸º <code>rem</code>ã€‚</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582035408807-1adb02e6-4576-48b6-8fb9-b3a0c57ead0d.png" alt="image.png"></p>
<blockquote>
<p>è¿™æ˜¯æ²¡æœ‰é…ç½®è½¬æ¢ä¹‹å‰çš„ã€‚</p>
</blockquote>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582035305177-d13c0a83-65bf-4fe5-a509-83bbb3bbf627.png" alt="image.png"></p>
<blockquote>
<p>è¿™æ˜¯è½¬æ¢ä¹‹åçš„ï¼Œå¯ä»¥çœ‹åˆ° px éƒ½è¢«è½¬æ¢ä¸ºäº† remã€‚</p>
</blockquote>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</strong></p>
<ul>
<li>è¯¥æ’ä»¶**ä¸èƒ½è½¬æ¢è¡Œå†…æ ·å¼ä¸­çš„ <code>px</code>**ï¼Œä¾‹å¦‚ <code>&lt;div style="width: 200px;"&gt;&lt;/div&gt;</code></li>
</ul>
<h2 id="å…³äº-postcssrc-js-é…ç½®æ–‡ä»¶"><a href="#å…³äº-postcssrc-js-é…ç½®æ–‡ä»¶" class="headerlink" title="å…³äº .postcssrc.js é…ç½®æ–‡ä»¶"></a>å…³äº <code>.postcssrc.js</code> é…ç½®æ–‡ä»¶</h2><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="string">'autoprefixer'</span>: {</span><br><span class="line">      <span class="attr">browsers</span>: [<span class="string">'Android &gt;= 4.0'</span>, <span class="string">'iOS &gt;= 8'</span>]</span><br><span class="line">    },</span><br><span class="line">    <span class="string">'postcss-pxtorem'</span>: {</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">37.5</span>,</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">'*'</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><code>.postcssrc.js</code> æ˜¯ PostCSS çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>ï¼ˆ1ï¼‰PostCSS ä»‹ç»</p>
<p><a target="_blank" rel="noopener" href="https://postcss.org/">PostCSS</a> æ˜¯ä¸€ä¸ªå¤„ç† CSS çš„å¤„ç†å·¥å…·ï¼Œæœ¬èº«åŠŸèƒ½æ¯”è¾ƒå•ä¸€ï¼Œå®ƒä¸»è¦è´Ÿè´£è§£æ CSS ä»£ç ï¼Œå†äº¤ç”±æ’ä»¶æ¥è¿›è¡Œå¤„ç†ï¼Œå®ƒçš„æ’ä»¶ä½“ç³»éå¸¸å¼ºå¤§ï¼Œæ‰€èƒ½è¿›è¡Œçš„æ“ä½œæ˜¯å¤šç§å¤šæ ·çš„ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/postcss/autoprefixer">Autoprefixer</a> æ’ä»¶å¯ä»¥å®ç°è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨ç›¸å…³çš„å£°æ˜å‰ç¼€</li>
<li><a target="_blank" rel="noopener" href="https://github.com/csstools/postcss-preset-env">PostCSS Preset Env</a> æ’ä»¶å¯ä»¥è®©ä½ ä½¿ç”¨æ›´æ–°çš„ CSS è¯­æ³•ç‰¹æ€§å¹¶å®ç°å‘ä¸‹å…¼å®¹</li>
<li><a target="_blank" rel="noopener" href="https://github.com/cuth/postcss-pxtorem">postcss-pxtorem</a> å¯ä»¥å®ç°å°† px è½¬æ¢ä¸º rem</li>
<li>â€¦</li>
</ul>
<p>ç›®å‰ PostCSS å·²ç»æœ‰ <a target="_blank" rel="noopener" href="https://github.com/postcss/postcss/blob/master/docs/plugins.md">200 å¤šä¸ªåŠŸèƒ½å„å¼‚çš„æ’ä»¶</a>ã€‚å¼€å‘äººå‘˜ä¹Ÿå¯ä»¥æ ¹æ®é¡¹ç›®çš„éœ€è¦ï¼Œå¼€å‘å‡ºè‡ªå·±çš„ PostCSS æ’ä»¶ã€‚</p>
<p>PostCSS ä¸€èˆ¬ä¸å•ç‹¬ä½¿ç”¨ï¼Œè€Œæ˜¯ä¸å·²æœ‰çš„æ„å»ºå·¥å…·è¿›è¡Œé›†æˆã€‚</p>
<p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/css.html#postcss">Vue CLI é»˜è®¤é›†æˆäº† PostCSS</a>ï¼Œå¹¶ä¸”é»˜è®¤å¼€å¯äº† <a target="_blank" rel="noopener" href="https://github.com/postcss/autoprefixer">autoprefixer</a> æ’ä»¶ã€‚</p>
<blockquote>
<p>Vue CLI å†…éƒ¨ä½¿ç”¨äº† PostCSSã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>.postcssrc</code> æˆ–ä»»ä½• <a target="_blank" rel="noopener" href="https://github.com/michael-ciniawsky/postcss-load-config">postcss-load-config</a> æ”¯æŒçš„é…ç½®æºæ¥é…ç½® PostCSSã€‚ä¹Ÿå¯ä»¥é€šè¿‡ <code>vue.config.js</code> ä¸­çš„ <code>css.loaderOptions.postcss</code> é…ç½® <a target="_blank" rel="noopener" href="https://github.com/postcss/postcss-loader">postcss-loader</a>ã€‚</p>
<p>æˆ‘ä»¬é»˜è®¤å¼€å¯äº† <a target="_blank" rel="noopener" href="https://github.com/postcss/autoprefixer">autoprefixer</a>ã€‚å¦‚æœè¦é…ç½®ç›®æ ‡æµè§ˆå™¨ï¼Œå¯ä½¿ç”¨ <code>package.json</code> çš„ <a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/guide/browser-compatibility.html#browserslist">browserslist</a> å­—æ®µã€‚</p>
</blockquote>
<p>ï¼ˆ2ï¼‰Autoprefixer æ’ä»¶çš„é…ç½®</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200319104557718.png" alt="image-20200319104557718"></p>
<p><a target="_blank" rel="noopener" href="https://github.com/postcss/autoprefixer">autoprefixer</a> æ˜¯ä¸€ä¸ªè‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€çš„ PostCss æ’ä»¶ï¼Œ<code>browsers</code> ç”¨æ¥é…ç½®å…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯ï¼Œä½†æ˜¯å†™åœ¨è¿™é‡Œçš„è¯ä¼šå¼•èµ·ç¼–è¯‘å™¨è­¦å‘Šã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Replace Autoprefixer browsers option to Browserslist config.</span><br><span class="line">Use browserslist key in package.json or .browserslistrc file.</span><br><span class="line"></span><br><span class="line">Using browsers option can cause errors. Browserslist config</span><br><span class="line">can be used for Babel, Autoprefixer, postcss-normalize and other tools.</span><br><span class="line"></span><br><span class="line">If you really need to use option, rename it to overrideBrowserslist.</span><br><span class="line"></span><br><span class="line">Learn more at:</span><br><span class="line">https://github.com/browserslist/browserslist#readme</span><br><span class="line">https://twitter.com/browserslist</span><br></pre></td></tr></tbody></table></figure>

<p>è­¦å‘Šæ„æ€å°±æ˜¯è¯´ä½ åº”è¯¥å°† <code>browsers</code> é€‰é¡¹å†™åˆ° <code>package.json</code> æˆ– <code>.browserlistrc</code> æ–‡ä»¶ä¸­ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Android]</span><br><span class="line">&gt;= 4.0</span><br><span class="line"></span><br><span class="line">[iOS]</span><br><span class="line">&gt;= 8</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>å…·ä½“è¯­æ³•è¯·<a target="_blank" rel="noopener" href="https://github.com/browserslist/browserslist">å‚è€ƒè¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>ï¼ˆ3ï¼‰postcss-pxtorem æ’ä»¶çš„é…ç½®</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200319105610557.png" alt="image-20200319105610557"></p>
<ul>
<li><code>rootValue</code>ï¼šè¡¨ç¤ºæ ¹å…ƒç´ å­—ä½“å¤§å°ï¼Œå®ƒä¼šæ ¹æ®æ ¹å…ƒç´ å¤§å°è¿›è¡Œå•ä½è½¬æ¢</li>
<li><code>propList</code> ç”¨æ¥è®¾å®šå¯ä»¥ä» px è½¬ä¸º rem çš„å±æ€§<ul>
<li>ä¾‹å¦‚ <code>*</code> å°±æ˜¯æ‰€æœ‰å±æ€§éƒ½è¦è½¬æ¢ï¼Œ<code>width</code> å°±æ˜¯ä»…è½¬æ¢ <code>width</code> å±æ€§</li>
</ul>
</li>
</ul>
<p><code>rootValue</code> åº”è¯¥å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœä½ ä½¿ç”¨çš„æ˜¯åŸºäº lib-flexable çš„ REM é€‚é…æ–¹æ¡ˆï¼Œåˆ™åº”è¯¥è®¾ç½®ä¸ºä½ çš„è®¾è®¡ç¨¿çš„ååˆ†ä¹‹ä¸€ã€‚</span><br><span class="line">ä¾‹å¦‚è®¾è®¡ç¨¿æ˜¯ 750 å®½ï¼Œåˆ™åº”è¯¥è®¾ç½®ä¸º 75ã€‚</span><br></pre></td></tr></tbody></table></figure>



<p>å¤§å¤šæ•°è®¾è®¡ç¨¿çš„åŸå‹éƒ½æ˜¯ä»¥ iphone6 ä¸ºåŸå‹ï¼Œiphone6 è®¾å¤‡çš„å®½æ˜¯ 750ï¼Œæˆ‘ä»¬çš„è®¾è®¡ç¨¿ä¹Ÿæ˜¯è¿™æ ·ã€‚</p>
<p>ä½†æ˜¯ Vant å»ºè®®è®¾ç½®ä¸º 37.5ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å› ä¸º Vant æ˜¯åŸºäº 375 å†™çš„ï¼Œæ‰€ä»¥å¦‚æœä½ è®¾ç½®ä¸º 75 çš„è¯ï¼ŒVant çš„æ ·å¼å°±å°äº†ä¸€åŠã€‚</span><br></pre></td></tr></tbody></table></figure>

<p>æ‰€ä»¥å¦‚æœè®¾ç½®ä¸º <code>37.5</code> çš„è¯ï¼ŒVant çš„æ ·å¼æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨æµ‹é‡è®¾è®¡ç¨¿çš„æ—¶å€™éƒ½å¿…é¡»é™¤2æ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™å°±ä¼šå˜å¾—å¾ˆå¤§ã€‚</p>
<p>è¿™æ ·åšå…¶å®ä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•å‘¢ï¼Ÿæˆ‘å°±æƒ³å®ç°æµ‹é‡å¤šå°‘å†™å¤šå°‘ï¼ˆä¸ç”¨æ¢ç®—ï¼‰ã€‚äºæ˜¯èªæ˜çš„ä½ å°±æƒ³ï¼Œå¯ä»¥ä¸å¯ä»¥è¿™æ ·æ¥åšï¼Ÿ</p>
<ul>
<li>å¦‚æœæ˜¯ Vant çš„æ ·å¼ï¼Œå°±æŠŠ <code>rootValue</code> è®¾ç½®ä¸º 37.5 æ¥è½¬æ¢</li>
<li>å¦‚æœæ˜¯æˆ‘ä»¬çš„æ ·å¼ï¼Œå°±æŒ‰ç…§ 75 çš„ <code>rootValue</code> æ¥è½¬æ¢</li>
</ul>
<p>é€šè¿‡<a target="_blank" rel="noopener" href="https://github.com/cuth/postcss-pxtorem#options">æŸ¥é˜…æ–‡æ¡£</a>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>rootValue</code> æ”¯æŒä¸¤ç§å‚æ•°ç±»å‹ï¼š</p>
<ul>
<li>æ•°å­—ï¼šå›ºå®šå€¼</li>
<li>å‡½æ•°ï¼šåŠ¨æ€è®¡ç®—è¿”å›<ul>
<li>postcss-pxtorem å¤„ç†æ¯ä¸ª CSS æ–‡ä»¶çš„æ—¶å€™éƒ½ä¼šæ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°</li>
<li>å®ƒä¼šæŠŠè¢«å¤„ç†çš„ CSS æ–‡ä»¶ç›¸å…³çš„ä¿¡æ¯é€šè¿‡å‚æ•°ä¼ é€’ç»™è¯¥å‡½æ•°</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹é…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PostCSS é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = {</span><br><span class="line">  <span class="comment">// é…ç½®è¦ä½¿ç”¨çš„ PostCSS æ’ä»¶</span></span><br><span class="line">  <span class="attr">plugins</span>: {</span><br><span class="line">    <span class="comment">// é…ç½®ä½¿ç”¨ autoprefixer æ’ä»¶</span></span><br><span class="line">    <span class="comment">// ä½œç”¨ï¼šç”Ÿæˆæµè§ˆå™¨ CSS æ ·å¼è§„åˆ™å‰ç¼€</span></span><br><span class="line">    <span class="comment">// VueCLI å†…éƒ¨å·²ç»é…ç½®äº† autoprefixer æ’ä»¶</span></span><br><span class="line">    <span class="comment">// æ‰€ä»¥åˆé…ç½®äº†ä¸€æ¬¡ï¼Œæ‰€ä»¥äº§ç”Ÿå†²çªäº†</span></span><br><span class="line">    <span class="comment">// 'autoprefixer': { // autoprefixer æ’ä»¶çš„é…ç½®</span></span><br><span class="line">    <span class="comment">//   // é…ç½®è¦å…¼å®¹åˆ°çš„ç¯å¢ƒä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//   browsers: ['Android &gt;= 4.0', 'iOS &gt;= 8']</span></span><br><span class="line">    <span class="comment">// },</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®ä½¿ç”¨ postcss-pxtorem æ’ä»¶</span></span><br><span class="line">    <span class="comment">// ä½œç”¨ï¼šæŠŠ px è½¬ä¸º rem</span></span><br><span class="line">    <span class="string">'postcss-pxtorem'</span>: {</span><br><span class="line">      rootValue ({ file }) {</span><br><span class="line">        <span class="keyword">return</span> file.indexOf(<span class="string">'vant'</span>) !== -<span class="number">1</span> ? <span class="number">37.5</span> : <span class="number">75</span></span><br><span class="line">      },</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">'*'</span>]</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>é…ç½®å®Œæ¯•ï¼ŒæŠŠæœåŠ¡é‡å¯ä¸€ä¸‹ï¼Œæœ€åæµ‹è¯•ï¼Œvery goodã€‚</p>
<h2 id="å°è£…è¯·æ±‚æ¨¡å—"><a href="#å°è£…è¯·æ±‚æ¨¡å—" class="headerlink" title="å°è£…è¯·æ±‚æ¨¡å—"></a>å°è£…è¯·æ±‚æ¨¡å—</h2><p>å’Œä¹‹å‰é¡¹ç›®ä¸€æ ·ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/axios/axios">axios</a> ä½œä¸ºæˆ‘ä»¬é¡¹ç›®ä¸­çš„è¯·æ±‚åº“ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬æŠŠå®ƒå°è£…ä¸ºä¸€ä¸ªè¯·æ±‚æ¨¡å—ï¼Œåœ¨éœ€è¦çš„æ—¶å€™ç›´æ¥åŠ è½½å³å¯ã€‚</p>
<p>1ã€å®‰è£… axios</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i axios</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åˆ›å»º <code>src/utils/request.js</code></p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£… axios è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">"http://ttapi.research.itcast.cn/"</span> <span class="comment">// åŸºç¡€è·¯å¾„</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€å¦‚ä½•ä½¿ç”¨</p>
<ul>
<li>æ–¹å¼ä¸€ï¼ˆç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯ä¸åˆ©äºæ¥å£ç»´æŠ¤ï¼‰ï¼šæˆ‘ä»¬å¯ä»¥æŠŠè¯·æ±‚å¯¹è±¡æŒ‚è½½åˆ° <code>Vue.prototype</code> åŸå‹å¯¹è±¡ä¸­ï¼Œç„¶ååœ¨ç»„ä»¶ä¸­é€šè¿‡ <code>this.xxx</code> ç›´æ¥è®¿é—®</li>
<li>æ–¹å¼äºŒï¼ˆæ¨èï¼‰ï¼šæˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªè¯·æ±‚éƒ½å°è£…æˆæ¯ä¸ªç‹¬ç«‹çš„åŠŸèƒ½å‡½æ•°ï¼Œåœ¨éœ€è¦çš„æ—¶å€™åŠ è½½è°ƒç”¨ï¼Œè¿™ç§åšæ³•æ›´ä¾¿äºæ¥å£çš„ç®¡ç†å’Œç»´æŠ¤</li>
</ul>
<p>åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å»ºè®®ä½¿ç”¨æ–¹å¼äºŒï¼Œæ›´æ¨èï¼ˆåœ¨éšåçš„ä¸šåŠ¡åŠŸèƒ½ä¸­æˆ‘ä»¬å°±èƒ½å­¦åˆ°ï¼‰ã€‚</p>
<h1 id="äºŒã€ç™»å½•æ³¨å†Œ"><a href="#äºŒã€ç™»å½•æ³¨å†Œ" class="headerlink" title="äºŒã€ç™»å½•æ³¨å†Œ"></a>äºŒã€ç™»å½•æ³¨å†Œ</h1><blockquote>
<p>ç›®æ ‡</p>
<ul>
<li>èƒ½å®ç°ç™»å½•é¡µé¢çš„å¸ƒå±€</li>
<li>èƒ½å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½</li>
<li>èƒ½æŒæ¡ Vant ä¸­ Toast æç¤ºç»„ä»¶çš„ä½¿ç”¨</li>
<li>èƒ½ç†è§£ API è¯·æ±‚æ¨¡å—çš„å°è£…</li>
<li>èƒ½ç†è§£å‘é€éªŒè¯ç çš„å®ç°æ€è·¯</li>
<li>èƒ½ç†è§£ Vant Form å®ç°è¡¨å•éªŒè¯çš„ä½¿ç”¨</li>
</ul>
</blockquote>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200228161041266.png" alt="image-20200228161041266" style="zoom:50%;">

<h2 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h2><h3 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h3><p>1ã€åˆ›å»º <code>src/views/login/index.vue</code> å¹¶å†™å…¥ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-container"</span>&gt;</span>ç™»å½•é¡µé¢<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'LoginPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨ <code>src/router/index.js</code> ä¸­é…ç½®ç™»å½•é¡µçš„è·¯ç”±è¡¨</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/login'</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'login'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/login'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>


<p>æœ€åï¼Œè®¿é—® <code>/login</code> æŸ¥çœ‹æ˜¯å¦èƒ½è®¿é—®åˆ°ç™»å½•é¡µé¢ã€‚</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200229115109026.png" alt="image-20200229115109026" style="zoom:50%;">


<h3 id="å¸ƒå±€ç»“æ„"><a href="#å¸ƒå±€ç»“æ„" class="headerlink" title="å¸ƒå±€ç»“æ„"></a>å¸ƒå±€ç»“æ„</h3><p>è¿™é‡Œä¸»è¦ä½¿ç”¨åˆ°ä¸‰ä¸ª Vant ç»„ä»¶ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/nav-bar">NavBar å¯¼èˆªæ </a></li>
<li><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/form">Form è¡¨å•</a><ul>
<li><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/field">Field è¾“å…¥æ¡†</a></li>
<li><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/button">Button æŒ‰é’®</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>ä¸€ä¸ªç»éªŒï¼šä½¿ç”¨ç»„ä»¶åº“ä¸­çš„ç°æœ‰ç»„ä»¶å¿«é€Ÿå¸ƒå±€ï¼Œå†æ…¢æ…¢è°ƒæ•´ç»†èŠ‚ï¼Œæ•ˆç‡æ›´é«˜ï¼ˆåˆšå¼€å§‹å¯èƒ½ä¼šæ„Ÿè§‰æœ‰ç‚¹éº»çƒ¦ï¼Œè¶Šç”¨è¶Šç†Ÿï¼Œæ…¢æ…¢çš„å°±æœ‰äº†è‡ªå·±çš„æ€æƒ³ï¼‰ã€‚</p>
</blockquote>
<h3 id="å¸ƒå±€æ ·å¼"><a href="#å¸ƒå±€æ ·å¼" class="headerlink" title="å¸ƒå±€æ ·å¼"></a>å¸ƒå±€æ ·å¼</h3><blockquote>
<p>å†™æ ·å¼çš„åŸåˆ™ï¼šå°†å…¬å…±æ ·å¼å†™åˆ°å…¨å±€ï¼ˆ<code>src/styles/index.less</code>ï¼‰ï¼Œå°†å±€éƒ¨æ ·å¼å†™åˆ°ç»„ä»¶å†…éƒ¨ã€‚</p>
</blockquote>
<p>1ã€<code>src/styles/index.less</code></p>
<figure class="highlight less"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> {</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f7f9</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.page-nav-bar</span> {</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#3296fa</span>;</span><br><span class="line">  <span class="selector-class">.van-nav-bar__title</span> {</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€<code>src/views/login/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">class</span>=<span class="string">"page-nav-bar"</span> <span class="attr">title</span>=<span class="string">"ç™»å½•"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç™»å½•è¡¨å• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-form</span> @<span class="attr">submit</span>=<span class="string">"onSubmit"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"ç”¨æˆ·å"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-shouji"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"password"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-yanzhengma"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"send-sms-btn"</span> <span class="attr">round</span> <span class="attr">size</span>=<span class="string">"small"</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>å‘é€éªŒè¯ç <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-btn-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"login-btn"</span> <span class="attr">block</span> <span class="attr">type</span>=<span class="string">"info"</span> <span class="attr">native-type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">          ç™»å½•</span><br><span class="line">        <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /ç™»å½•è¡¨å• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'LoginIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    onSubmit (values) {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'submit'</span>, values)</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.login-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.toutiao</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">37px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.send-sms-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">152px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#ededed</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.login-btn-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">53px</span> <span class="number">33px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.login-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">background-color</span>: <span class="number">#6db4fb</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½"><a href="#å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½" class="headerlink" title="å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½"></a>å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>æ³¨å†Œç‚¹å‡»ç™»å½•çš„äº‹ä»¶</li>
<li>è·å–è¡¨å•æ•°æ®ï¼ˆæ ¹æ®æ¥å£è¦æ±‚ä½¿ç”¨ v-model ç»‘å®šï¼‰</li>
<li>è¡¨å•éªŒè¯</li>
<li>å‘è¯·æ±‚æäº¤</li>
<li>æ ¹æ®è¯·æ±‚ç»“æœåšä¸‹ä¸€æ­¥å¤„ç†</li>
</ul>
<p><strong>ä¸€ã€æ ¹æ®æ¥å£è¦æ±‚ç»‘å®šè·å–è¡¨å•æ•°æ®</strong></p>
<p>1ã€åœ¨ç™»å½•é¡µé¢ç»„ä»¶çš„å®ä¾‹é€‰é¡¹ data ä¸­æ·»åŠ  <code>user</code> æ•°æ®å­—æ®µ</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    <span class="attr">user</span>: {</span><br><span class="line">      <span class="attr">mobile</span>: <span class="string">''</span>,</span><br><span class="line">      <span class="attr">code</span>: <span class="string">''</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è¡¨å•ä¸­ä½¿ç”¨ <code>v-model</code> ç»‘å®šå¯¹åº”æ•°æ®</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- van-cell-group ä»…ä»…æ˜¯æä¾›äº†ä¸€ä¸ªä¸Šä¸‹å¤–è¾¹æ¡†ï¼Œèƒ½çœ‹åˆ°åŒ…è£¹çš„åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-model</span>=<span class="string">"user.mobile"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">required</span></span></span><br><span class="line"><span class="tag">    <span class="attr">clearable</span></span></span><br><span class="line"><span class="tag">    <span class="attr">label</span>=<span class="string">"æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-model</span>=<span class="string">"user.code"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"number"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">label</span>=<span class="string">"éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">    <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">    <span class="attr">required</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<blockquote>
<p>ä¸€ä¸ªå°æŠ€å·§ï¼šä½¿ç”¨ VueDevtools è°ƒè¯•å·¥å…·æŸ¥çœ‹æ˜¯å¦ç»‘å®šæˆåŠŸã€‚</p>
</blockquote>
<p><strong>äºŒã€è¯·æ±‚ç™»å½•</strong></p>
<p>1ã€åˆ›å»º <code>src/api/user.js</code> å°è£…è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç›¸å…³çš„è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">"@/utils/request"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·ç™»å½•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> login = <span class="function"><span class="params">data</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/authorizations'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™ç™»å½•æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onLogin () {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> login(<span class="built_in">this</span>.user)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•æˆåŠŸ'</span>, res)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="keyword">if</span> (err.response.status === <span class="number">400</span>) {</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'ç™»å½•å¤±è´¥'</span>, err)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h2 id="ç™»å½•çŠ¶æ€æç¤º"><a href="#ç™»å½•çŠ¶æ€æç¤º" class="headerlink" title="ç™»å½•çŠ¶æ€æç¤º"></a>ç™»å½•çŠ¶æ€æç¤º</h2><p>Vant ä¸­å†…ç½®äº†<a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/toast">Toast è½»æç¤º</a>ç»„ä»¶ï¼Œå¯ä»¥å®ç°ç§»åŠ¨ç«¯å¸¸è§çš„æç¤ºæ•ˆæœã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€å•æ–‡å­—æç¤º</span></span><br><span class="line">Toast(<span class="string">"æç¤ºå†…å®¹"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// loading è½¬åœˆåœˆæç¤º</span></span><br><span class="line">Toast.loading({</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span><br><span class="line">  <span class="attr">message</span>: <span class="string">"åŠ è½½ä¸­..."</span>,</span><br><span class="line">  <span class="attr">forbidClick</span>: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆåŠŸæç¤º</span></span><br><span class="line">Ttoast.success(<span class="string">"æˆåŠŸæ–‡æ¡ˆ"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤±è´¥æç¤º</span></span><br><span class="line">Toast.fail(<span class="string">"å¤±è´¥æ–‡æ¡ˆ"</span>);</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æç¤ºï¼šåœ¨ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥é€šè¿‡ <code>this.$toast</code> è°ƒç”¨ã€‚</p>
</blockquote>
<p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼šToast é»˜è®¤é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼Œå³åŒä¸€æ—¶é—´åªä¼šå­˜åœ¨ä¸€ä¸ª Toastï¼Œå¦‚æœéœ€è¦åœ¨åŒä¸€æ—¶é—´å¼¹å‡ºå¤šä¸ª Toastï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„ç¤ºä¾‹</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Toast.allowMultiple();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> toast1 = Toast(<span class="string">'ç¬¬ä¸€ä¸ª Toast'</span>);</span><br><span class="line"><span class="keyword">const</span> toast2 = Toast.success(<span class="string">'ç¬¬äºŒä¸ª Toast'</span>);</span><br><span class="line"></span><br><span class="line">toast1.clear();</span><br><span class="line">toast2.clear();</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢æ˜¯ä¸ºæˆ‘ä»¬çš„ç™»å½•åŠŸèƒ½å¢åŠ  toast äº¤äº’æç¤ºã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onLogin () {</span><br><span class="line">  <span class="comment">// å¼€å§‹è½¬åœˆåœˆ</span></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­æ—¶é—´ï¼Œ0è¡¨ç¤ºæŒç»­å±•ç¤ºä¸åœæ­¢</span></span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'ç™»å½•ä¸­...'</span> <span class="comment">// æç¤ºæ¶ˆæ¯</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> request({</span><br><span class="line">      <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">      <span class="attr">url</span>: <span class="string">'/app/v1_0/authorizations'</span>,</span><br><span class="line">      <span class="attr">data</span>: <span class="built_in">this</span>.user</span><br><span class="line">    })</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•æˆåŠŸ'</span>, res)</span><br><span class="line">    <span class="comment">// æç¤º success æˆ–è€… fail çš„æ—¶å€™ï¼Œä¼šå…ˆæŠŠå…¶å®ƒçš„ toast å…ˆæ¸…é™¤</span></span><br><span class="line">    <span class="built_in">this</span>.$toast.success(<span class="string">'ç™»å½•æˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•å¤±è´¥'</span>, err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'ç™»å½•å¤±è´¥ï¼Œæ‰‹æœºå·æˆ–éªŒè¯ç é”™è¯¯'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>å‡å¦‚è¯·æ±‚éå¸¸å¿«çš„è¯å°±çœ‹ä¸åˆ° loading æ•ˆæœäº†ï¼Œè¿™é‡Œå¯ä»¥æ‰‹åŠ¨å°†è°ƒè¯•å·¥å…·ä¸­çš„ç½‘ç»œè®¾ç½®ä¸ºæ…¢é€Ÿç½‘ç»œã€‚</p>
<p>æµ‹è¯•ç»“æŸï¼Œå†æŠŠç½‘ç»œè®¾ç½®æ¢å¤ä¸º <code>Online</code> æ­£å¸¸ç½‘ç»œã€‚</p>
<h2 id="è¡¨å•éªŒè¯"><a href="#è¡¨å•éªŒè¯" class="headerlink" title="è¡¨å•éªŒè¯"></a>è¡¨å•éªŒè¯</h2><blockquote>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/form#xiao-yan-gui-ze">Form è¡¨å•éªŒè¯</a></p>
</blockquote>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">class</span>=<span class="string">"page-nav-bar"</span> <span class="attr">title</span>=<span class="string">"ç™»å½•"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç™»å½•è¡¨å• --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      è¡¨å•éªŒè¯ï¼š</span></span><br><span class="line"><span class="comment">        1ã€ç»™ van-field ç»„ä»¶é…ç½® rules éªŒè¯è§„åˆ™</span></span><br><span class="line"><span class="comment">          å‚è€ƒæ–‡æ¡£ï¼šhttps://youzan.github.io/vant/#/zh-CN/form#rule-shu-ju-jie-gou</span></span><br><span class="line"><span class="comment">        2ã€å½“è¡¨å•æäº¤çš„æ—¶å€™ä¼šè‡ªåŠ¨è§¦å‘è¡¨å•éªŒè¯</span></span><br><span class="line"><span class="comment">           å¦‚æœéªŒè¯é€šè¿‡ï¼Œä¼šè§¦å‘ submit äº‹ä»¶</span></span><br><span class="line"><span class="comment">           å¦‚æœéªŒè¯å¤±è´¥ï¼Œä¸ä¼šè§¦å‘ submit</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-form</span> @<span class="attr">submit</span>=<span class="string">"onSubmit"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"user.mobile"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥æ‰‹æœºå·"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:rules</span>=<span class="string">"userFormRules.mobile"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"number"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxlength</span>=<span class="string">"11"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-shouji"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"user.code"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:rules</span>=<span class="string">"userFormRules.code"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"number"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxlength</span>=<span class="string">"6"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-yanzhengma"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">template</span> #<span class="attr">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"send-sms-btn"</span> <span class="attr">round</span> <span class="attr">size</span>=<span class="string">"small"</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>å‘é€éªŒè¯ç <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"login-btn-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"login-btn"</span> <span class="attr">block</span> <span class="attr">type</span>=<span class="string">"info"</span> <span class="attr">native-type</span>=<span class="string">"submit"</span>&gt;</span></span><br><span class="line">          ç™»å½•</span><br><span class="line">        <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /ç™»å½•è¡¨å• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> { login } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'LoginIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">user</span>: {</span></span><br><span class="line"><span class="javascript">        <span class="attr">mobile</span>: <span class="string">''</span>, <span class="comment">// æ‰‹æœºå·</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">code</span>: <span class="string">''</span> <span class="comment">// éªŒè¯ç </span></span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript">      <span class="attr">userFormRules</span>: {</span></span><br><span class="line"><span class="javascript">        <span class="attr">mobile</span>: [{</span></span><br><span class="line"><span class="javascript">          <span class="attr">required</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">message</span>: <span class="string">'æ‰‹æœºå·ä¸èƒ½ä¸ºç©º'</span></span></span><br><span class="line"><span class="javascript">        }, {</span></span><br><span class="line"><span class="javascript">          <span class="attr">pattern</span>: <span class="regexp">/^1[3|5|7|8]\d{9}$/</span>,</span></span><br><span class="line"><span class="javascript">          message: <span class="string">'æ‰‹æœºå·æ ¼å¼é”™è¯¯'</span></span></span><br><span class="line"><span class="javascript">        }],</span></span><br><span class="line"><span class="javascript">        <span class="attr">code</span>: [{</span></span><br><span class="line"><span class="javascript">          <span class="attr">required</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">message</span>: <span class="string">'éªŒè¯ç ä¸èƒ½ä¸ºç©º'</span></span></span><br><span class="line"><span class="javascript">        }, {</span></span><br><span class="line"><span class="javascript">          <span class="attr">pattern</span>: <span class="regexp">/^\d{6}$/</span>,</span></span><br><span class="line"><span class="javascript">          message: <span class="string">'éªŒè¯ç æ ¼å¼é”™è¯¯'</span></span></span><br><span class="line"><span class="javascript">        }]</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> onSubmit () {</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 1. è·å–è¡¨å•æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> user = <span class="built_in">this</span>.user</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// <span class="doctag">TODO:</span> 2. è¡¨å•éªŒè¯</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 3. æäº¤è¡¨å•è¯·æ±‚ç™»å½•</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$toast.loading({</span></span><br><span class="line"><span class="javascript">        <span class="attr">message</span>: <span class="string">'ç™»å½•ä¸­...'</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// ç¦ç”¨èƒŒæ™¯ç‚¹å‡»</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">duration</span>: <span class="number">0</span> <span class="comment">// æŒç»­æ—¶é—´ï¼Œé»˜è®¤ 2000ï¼Œ0 è¡¨ç¤ºæŒç»­å±•ç¤ºä¸å…³é—­</span></span></span><br><span class="line"><span class="javascript">      })</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">try</span> {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> res = <span class="keyword">await</span> login(user)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'ç™»å½•æˆåŠŸ'</span>, res)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$toast.success(<span class="string">'ç™»å½•æˆåŠŸ'</span>)</span></span><br><span class="line"><span class="javascript">      } <span class="keyword">catch</span> (err) {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (err.response.status === <span class="number">400</span>) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.$toast.fail(<span class="string">'æ‰‹æœºå·æˆ–éªŒè¯ç é”™è¯¯'</span>)</span></span><br><span class="line"><span class="javascript">        } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.$toast.fail(<span class="string">'ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 4. æ ¹æ®è¯·æ±‚å“åº”ç»“æœå¤„ç†åç»­æ“ä½œ</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.login-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.toutiao</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">37px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.send-sms-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">152px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#ededed</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.login-btn-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">53px</span> <span class="number">33px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.login-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">background-color</span>: <span class="number">#6db4fb</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="éªŒè¯ç å¤„ç†"><a href="#éªŒè¯ç å¤„ç†" class="headerlink" title="éªŒè¯ç å¤„ç†"></a>éªŒè¯ç å¤„ç†</h2><h3 id="éªŒè¯æ‰‹æœºå·"><a href="#éªŒè¯æ‰‹æœºå·" class="headerlink" title="éªŒè¯æ‰‹æœºå·"></a>éªŒè¯æ‰‹æœºå·</h3><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onSendSms () {</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'onSendSms'</span>)</span><br><span class="line">  <span class="comment">// 1. æ ¡éªŒæ‰‹æœºå·</span></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.loginForm.validate(<span class="string">'mobile'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">'éªŒè¯å¤±è´¥'</span>, err)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. éªŒè¯é€šè¿‡ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶</span></span><br><span class="line">  <span class="comment">// 3. è¯·æ±‚å‘é€éªŒè¯ç </span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶"><a href="#ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶" class="headerlink" title="ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶"></a>ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶</h3><p>1ã€åœ¨ data ä¸­æ·»åŠ æ•°æ®ç”¨æ¥æ§åˆ¶å€’è®¡æ—¶çš„æ˜¾ç¤ºå’Œéšè—</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isCountDownShow</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"user.code"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥éªŒè¯ç "</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"icon icon-mima"</span> <span class="attr">slot</span>=<span class="string">"left-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-count-down</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-if</span>=<span class="string">"isCountDownShow"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">slot</span>=<span class="string">"button"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:time</span>=<span class="string">"1000 * 5"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">format</span>=<span class="string">"ss s"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">finish</span>=<span class="string">"isCountDownShow = false"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-else</span></span></span><br><span class="line"><span class="tag">    <span class="attr">slot</span>=<span class="string">"button"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"primary"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">round</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">"onSendSmsCode"</span></span></span><br><span class="line"><span class="tag">  &gt;</span>å‘é€éªŒè¯ç <span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‘é€éªŒè¯ç "><a href="#å‘é€éªŒè¯ç " class="headerlink" title="å‘é€éªŒè¯ç "></a>å‘é€éªŒè¯ç </h3><p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getSmsCode = <span class="function"><span class="params">mobile</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/sms/codes/<span class="subst">${mobile}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™å‘é€éªŒè¯ç æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>3ã€å‘é€å¤„ç†</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onSendSms () {</span><br><span class="line">  <span class="comment">// 1. æ ¡éªŒæ‰‹æœºå·</span></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">this</span>.$refs.loginForm.validate(<span class="string">'mobile'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">'éªŒè¯å¤±è´¥'</span>, err)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. éªŒè¯é€šè¿‡ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶</span></span><br><span class="line">  <span class="built_in">this</span>.isCountDownShow = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. è¯·æ±‚å‘é€éªŒè¯ç </span></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">await</span> sendSms(<span class="built_in">this</span>.user.mobile)</span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'å‘é€æˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="comment">// å‘é€å¤±è´¥ï¼Œå…³é—­å€’è®¡æ—¶</span></span><br><span class="line">    <span class="built_in">this</span>.isCountDownShow = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> (err.response.status === <span class="number">429</span>) {</span><br><span class="line">      <span class="built_in">this</span>.$toast(<span class="string">'å‘é€å¤ªé¢‘ç¹äº†ï¼Œè¯·ç¨åé‡è¯•'</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="built_in">this</span>.$toast(<span class="string">'å‘é€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>)</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å¤„ç†ç”¨æˆ·-Token"><a href="#å¤„ç†ç”¨æˆ·-Token" class="headerlink" title="å¤„ç†ç”¨æˆ· Token"></a>å¤„ç†ç”¨æˆ· Token</h2><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200329121650635.png" alt="image-20200329121650635">

<p>Token æ˜¯ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åæœåŠ¡ç«¯è¿”å›çš„ä¸€ä¸ªèº«ä»½ä»¤ç‰Œï¼Œåœ¨é¡¹ç›®ä¸­çš„å¤šä¸ªä¸šåŠ¡ä¸­éœ€è¦ä½¿ç”¨åˆ°ï¼š</p>
<ul>
<li>è®¿é—®éœ€è¦æˆæƒçš„ API æ¥å£</li>
<li>æ ¡éªŒé¡µé¢çš„è®¿é—®æƒé™</li>
<li>â€¦</li>
</ul>
<p>ä½†æ˜¯æˆ‘ä»¬åªæœ‰åœ¨ç¬¬ä¸€æ¬¡ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åæ‰èƒ½æ‹¿åˆ° Tokenã€‚</p>
<p>æ‰€ä»¥ä¸ºäº†èƒ½åœ¨å…¶å®ƒæ¨¡å—ä¸­è·å–åˆ° Token æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒå­˜å‚¨åˆ°ä¸€ä¸ªå…¬å…±çš„ä½ç½®ï¼Œæ–¹ä¾¿éšæ—¶å–ç”¨ã€‚</p>
<p>å¾€å“ªå„¿å­˜ï¼Ÿ</p>
<ul>
<li>æœ¬åœ°å­˜å‚¨<ul>
<li>è·å–éº»çƒ¦</li>
<li>æ•°æ®ä¸æ˜¯å“åº”å¼</li>
</ul>
</li>
<li>Vuex å®¹å™¨ï¼ˆæ¨èï¼‰<ul>
<li>è·å–æ–¹ä¾¿</li>
<li>å“åº”å¼çš„</li>
</ul>
</li>
</ul>
<p>ä½¿ç”¨å®¹å™¨å­˜å‚¨ Token çš„æ€è·¯ï¼š</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200109192157006.png" alt="image-20200109192157006"></p>
<ul>
<li>ç™»å½•æˆåŠŸï¼Œå°† Token å­˜å‚¨åˆ° Vuex å®¹å™¨ä¸­<ul>
<li>è·å–æ–¹ä¾¿</li>
<li>å“åº”å¼</li>
</ul>
</li>
<li>ä¸ºäº†æŒä¹…åŒ–ï¼Œè¿˜éœ€è¦æŠŠ Token æ”¾åˆ°æœ¬åœ°å­˜å‚¨<ul>
<li>æŒä¹…åŒ–</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢æ˜¯å…·ä½“å®ç°ã€‚</p>
<p>1ã€åœ¨ <code>src/store/index.js</code> ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store({</span><br><span class="line">  <span class="attr">state</span>: {</span><br><span class="line">    <span class="comment">// ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">user</span>: <span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localStorage.getItem(<span class="string">'TOUTIAO_USER'</span>))</span><br><span class="line">    <span class="comment">// user: null</span></span><br><span class="line">  },</span><br><span class="line">  <span class="attr">mutations</span>: {</span><br><span class="line">    setUser (state, user) {</span><br><span class="line">      state.user = user</span><br><span class="line">      <span class="built_in">window</span>.localStorage.setItem(<span class="string">'TOUTIAO_USER'</span>, <span class="built_in">JSON</span>.stringify(user))</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">actions</span>: {</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">modules</span>: {</span><br><span class="line">  }</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç™»å½•æˆåŠŸä»¥åå°†åç«¯è¿”å›çš„ token ç›¸å…³æ•°æ®å­˜å‚¨åˆ°å®¹å™¨ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onLogin () {</span><br><span class="line">  <span class="comment">// const loginToast = this.$toast.loading({</span></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­æ—¶é—´ï¼Œ0è¡¨ç¤ºæŒç»­å±•ç¤ºä¸åœæ­¢</span></span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'ç™»å½•ä¸­...'</span> <span class="comment">// æç¤ºæ¶ˆæ¯</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> login(<span class="built_in">this</span>.user)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// res.data.data =&gt; { token: 'xxx', refresh_token: 'xxx' }</span></span><br><span class="line">+    <span class="built_in">this</span>.$store.commit(<span class="string">'setUser'</span>, res.data.data)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æç¤º success æˆ–è€… fail çš„æ—¶å€™ï¼Œä¼šå…ˆæŠŠå…¶å®ƒçš„ toast å…ˆæ¸…é™¤</span></span><br><span class="line">    <span class="built_in">this</span>.$toast.success(<span class="string">'ç™»å½•æˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç™»å½•å¤±è´¥'</span>, err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'ç™»å½•å¤±è´¥ï¼Œæ‰‹æœºå·æˆ–éªŒè¯ç é”™è¯¯'</span>)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åœæ­¢ loadingï¼Œå®ƒä¼šæŠŠå½“å‰é¡µé¢ä¸­æ‰€æœ‰çš„ toast éƒ½ç»™æ¸…é™¤</span></span><br><span class="line">  <span class="comment">// loginToast.clear()</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—"><a href="#ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—" class="headerlink" title="ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—"></a>ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—</h2><p>åˆ›å»º <code>src/utils/storage.js</code> æ¨¡å—ã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getItem = <span class="function"><span class="params">name</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">const</span> data = <span class="built_in">window</span>.localStorage.getItem(name)</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> setItem = <span class="function">(<span class="params">name, value</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> value === <span class="string">'object'</span>) {</span><br><span class="line">    value = <span class="built_in">JSON</span>.stringify(value)</span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">window</span>.localStorage.setItem(name, value)</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> removeItem = <span class="function"><span class="params">name</span> =&gt;</span> {</span><br><span class="line">  <span class="built_in">window</span>.localStorage.removeItem(name)</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å…³äº-Token-è¿‡æœŸé—®é¢˜"><a href="#å…³äº-Token-è¿‡æœŸé—®é¢˜" class="headerlink" title="å…³äº Token è¿‡æœŸé—®é¢˜"></a>å…³äº Token è¿‡æœŸé—®é¢˜</h2><p>ç™»å½•æˆåŠŸä¹‹ååç«¯ä¼šè¿”å›ä¸¤ä¸ª Tokenï¼š</p>
<ul>
<li><code>token</code>ï¼šè®¿é—®ä»¤ç‰Œï¼Œæœ‰æ•ˆæœŸ2å°æ—¶</li>
<li><code>refresh_token</code>ï¼šåˆ·æ–°ä»¤ç‰Œï¼Œæœ‰æ•ˆæœŸ14å¤©ï¼Œç”¨äºè®¿é—®ä»¤ç‰Œè¿‡æœŸä¹‹åé‡æ–°è·å–æ–°çš„è®¿é—®ä»¤ç‰Œ</li>
</ul>
<p>æˆ‘ä»¬çš„é¡¹ç›®æ¥å£ä¸­è®¾å®šçš„ <code>Token</code> æœ‰æ•ˆæœŸæ˜¯ <code>2 å°æ—¶</code>ï¼Œè¶…è¿‡æœ‰æ•ˆæœŸæœåŠ¡ç«¯ä¼šè¿”å› <code>401</code> è¡¨ç¤º Token æ— æ•ˆæˆ–è¿‡æœŸäº†ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿‡æœŸæ—¶é—´è¿™ä¹ˆçŸ­ï¼Ÿ</p>
<ul>
<li>ä¸ºäº†å®‰å…¨ï¼Œä¾‹å¦‚ Token è¢«åˆ«äººç›—ç”¨</li>
</ul>
<p>è¿‡æœŸäº†æ€ä¹ˆåŠï¼Ÿ</p>
<ul>
<li><del>è®©ç”¨æˆ·é‡æ–°ç™»å½•</del>ï¼Œç”¨æˆ·ä½“éªŒå¤ªå·®äº†</li>
<li>ä½¿ç”¨ <code>refresh_token</code> è§£å†³ <code>token</code> è¿‡æœŸ</li>
</ul>
<p>å¦‚ä½•ä½¿ç”¨ <code>refresh_token</code> è§£å†³ <code>token</code> è¿‡æœŸï¼Ÿ</p>
<blockquote>
<p>åˆ°è¯¾ç¨‹çš„åé¢æˆ‘ä»¬å¼€å‘çš„ä¸šåŠ¡åŠŸèƒ½ä¸°å¯Œèµ·æ¥ä¹‹åï¼Œå†ç»™å¤§å®¶è®²è§£ Token è¿‡æœŸå¤„ç†ã€‚</p>
<p>å¤§å®¶éœ€è¦æ³¨æ„çš„æ˜¯<strong>åœ¨å­¦ä¹ æµ‹è¯•çš„æ—¶å€™å¦‚æœæ”¶åˆ° 401 å“åº”ç ï¼Œè¯·é‡æ–°ç™»å½•å†æµ‹è¯•</strong>ã€‚</p>
</blockquote>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/v2-8f29f24dd291ddf46abda5d5ab7bec6c_720w.jpg" alt="img"></p>
<p>æ¦‚è¿°ï¼šæœåŠ¡å™¨ç”Ÿæˆtokençš„è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªæ—¶é—´ï¼Œä¸€ä¸ªæ˜¯tokenå¤±æ•ˆæ—¶é—´ï¼Œä¸€ä¸ªæ˜¯tokenåˆ·æ–°æ—¶é—´ï¼Œåˆ·æ–°æ—¶é—´è‚¯å®šæ¯”å¤±æ•ˆæ—¶é—´é•¿ï¼Œå½“ç”¨æˆ·çš„ <code>token</code> è¿‡æœŸæ—¶ï¼Œä½ å¯ä»¥æ‹¿ç€è¿‡æœŸçš„tokenå»æ¢å–æ–°çš„tokenï¼Œæ¥ä¿æŒç”¨æˆ·çš„ç™»é™†çŠ¶æ€ï¼Œå½“ç„¶ä½ è¿™ä¸ªè¿‡æœŸtokençš„è¿‡æœŸæ—¶é—´å¿…é¡»åœ¨åˆ·æ–°æ—¶é—´ä¹‹å†…ï¼Œå¦‚æœè¶…å‡ºäº†åˆ·æ–°æ—¶é—´ï¼Œé‚£ä¹ˆè¿”å›çš„ä¾æ—§æ˜¯ 401ã€‚</p>
<p>å¤„ç†æµç¨‹ï¼š</p>
<ol>
<li>åœ¨axiosçš„æ‹¦æˆªå™¨ä¸­åŠ å…¥tokenåˆ·æ–°é€»è¾‘</li>
<li>å½“ç”¨æˆ·tokenè¿‡æœŸæ—¶ï¼Œå»å‘æœåŠ¡å™¨è¯·æ±‚æ–°çš„ token</li>
<li>æŠŠæ—§çš„tokenæ›¿æ¢ä¸ºæ–°çš„token</li>
<li>ç„¶åç»§ç»­ç”¨æˆ·å½“å‰çš„è¯·æ±‚</li>
</ol>
<p>åœ¨è¯·æ±‚çš„å“åº”æ‹¦æˆªå™¨ä¸­ç»Ÿä¸€å¤„ç† token è¿‡æœŸï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å°è£… axios è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">"axios"</span>;</span><br><span class="line"><span class="keyword">import</span> jsonBig <span class="keyword">from</span> <span class="string">"json-bigint"</span>;</span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">"@/store"</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">"@/router"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios.create æ–¹æ³•ï¼šå¤åˆ¶ä¸€ä¸ª axios</span></span><br><span class="line"><span class="keyword">const</span> request = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">"http://ttapi.research.itcast.cn/"</span> <span class="comment">// åŸºç¡€è·¯å¾„</span></span><br><span class="line">});</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é…ç½®å¤„ç†åç«¯è¿”å›æ•°æ®ä¸­è¶…å‡º js å®‰å…¨æ•´æ•°èŒƒå›´é—®é¢˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">request.defaults.transformResponse = [</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">      <span class="keyword">return</span> jsonBig.parse(data);</span><br><span class="line">    } <span class="keyword">catch</span> (err) {</span><br><span class="line">      <span class="keyword">return</span> {};</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">request.interceptors.request.use(</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">config</span>) </span>{</span><br><span class="line">    <span class="keyword">const</span> user = store.state.user;</span><br><span class="line">    <span class="keyword">if</span> (user) {</span><br><span class="line">      config.headers.Authorization = <span class="string">`Bearer <span class="subst">${user.token}</span>`</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// Do something before request is sent</span></span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  },</span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>{</span><br><span class="line">    <span class="comment">// Do something with request error</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  }</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">request.interceptors.response.use(</span><br><span class="line">  <span class="comment">// å“åº”æˆåŠŸè¿›å…¥ç¬¬1ä¸ªå‡½æ•°</span></span><br><span class="line">  <span class="comment">// è¯¥å‡½æ•°çš„å‚æ•°æ˜¯å“åº”å¯¹è±¡</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>{</span><br><span class="line">    <span class="comment">// Any status code that lie within the range of 2xx cause this function to trigger</span></span><br><span class="line">    <span class="comment">// Do something with response data</span></span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  },</span><br><span class="line">  <span class="comment">// å“åº”å¤±è´¥è¿›å…¥ç¬¬2ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°çš„å‚æ•°æ˜¯é”™è¯¯å¯¹è±¡</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>{</span><br><span class="line">    <span class="comment">// Any status codes that falls outside the range of 2xx cause this function to trigger</span></span><br><span class="line">    <span class="comment">// Do something with response error</span></span><br><span class="line">    <span class="comment">// å¦‚æœå“åº”ç æ˜¯ 401 ï¼Œåˆ™è¯·æ±‚è·å–æ–°çš„ token</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å“åº”æ‹¦æˆªå™¨ä¸­çš„ error å°±æ˜¯é‚£ä¸ªå“åº”çš„é”™è¯¯å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">console</span>.dir(error);</span><br><span class="line">    <span class="keyword">if</span> (error.response &amp;&amp; error.response.status === <span class="number">401</span>) {</span><br><span class="line">      <span class="comment">// æ ¡éªŒæ˜¯å¦æœ‰ refresh_token</span></span><br><span class="line">      <span class="keyword">const</span> user = store.state.user;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (!user || !user.refresh_token) {</span><br><span class="line">        router.push(<span class="string">"/login"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»£ç ä¸è¦å¾€åæ‰§è¡Œäº†</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å¦‚æœæœ‰refresh_tokenï¼Œåˆ™è¯·æ±‚è·å–æ–°çš„ token</span></span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> axios({</span><br><span class="line">          <span class="attr">method</span>: <span class="string">"PUT"</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">"http://ttapi.research.itcast.cn/app/v1_0/authorizations"</span>,</span><br><span class="line">          <span class="attr">headers</span>: {</span><br><span class="line">            <span class="attr">Authorization</span>: <span class="string">`Bearer <span class="subst">${user.refresh_token}</span>`</span></span><br><span class="line">          }</span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¦‚æœè·å–æˆåŠŸï¼Œåˆ™æŠŠæ–°çš„ token æ›´æ–°åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"åˆ·æ–° token  æˆåŠŸ"</span>, res);</span><br><span class="line">        store.commit(<span class="string">"setUser"</span>, {</span><br><span class="line">          <span class="attr">token</span>: res.data.data.token, <span class="comment">// æœ€æ–°è·å–çš„å¯ç”¨ token</span></span><br><span class="line">          <span class="attr">refresh_token</span>: user.refresh_token <span class="comment">// è¿˜æ˜¯åŸæ¥çš„ refresh_token</span></span><br><span class="line">        });</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æŠŠä¹‹å‰å¤±è´¥çš„ç”¨æˆ·è¯·æ±‚ç»§ç»­å‘å‡ºå»</span></span><br><span class="line">        <span class="comment">// config æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æœ¬æ¬¡å¤±è´¥è¯·æ±‚ç›¸å…³çš„é‚£äº›é…ç½®ä¿¡æ¯ï¼Œä¾‹å¦‚ urlã€method éƒ½æœ‰</span></span><br><span class="line">        <span class="comment">// return æŠŠ request çš„è¯·æ±‚ç»“æœç»§ç»­è¿”å›ç»™å‘è¯·æ±‚çš„å…·ä½“ä½ç½®</span></span><br><span class="line">        <span class="keyword">return</span> request(error.config);</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="comment">// å¦‚æœè·å–å¤±è´¥ï¼Œç›´æ¥è·³è½¬ ç™»å½•é¡µ</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"è¯·æ±‚åˆ·çº¿ token å¤±è´¥"</span>, err);</span><br><span class="line">        router.push(<span class="string">"/login"</span>);</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  }</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request;</span><br></pre></td></tr></tbody></table></figure>
<h1 id="ä¸‰ã€ä¸ªäººä¸­å¿ƒ"><a href="#ä¸‰ã€ä¸ªäººä¸­å¿ƒ" class="headerlink" title="ä¸‰ã€ä¸ªäººä¸­å¿ƒ"></a>ä¸‰ã€ä¸ªäººä¸­å¿ƒ</h1><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566431827166.png" width="250">

<h2 id="TabBar-å¤„ç†"><a href="#TabBar-å¤„ç†" class="headerlink" title="TabBar å¤„ç†"></a>TabBar å¤„ç†</h2><p>é€šè¿‡åˆ†æé¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé¦–é¡µã€é—®ç­”ã€è§†é¢‘ã€æˆ‘çš„ éƒ½ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªåº•éƒ¨æ ‡ç­¾æ ï¼Œæˆ‘ä»¬æ²¡å¿…è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­éƒ½å†™ä¸€ä¸ªï¼Œæ‰€ä»¥ä¸ºäº†é€šç”¨æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Vue Router çš„åµŒå¥—è·¯ç”±æ¥å¤„ç†ã€‚</p>
<ul>
<li>çˆ¶è·¯ç”±ï¼šä¸€ä¸ªç©ºé¡µé¢ï¼ŒåŒ…å«ä¸€ä¸ª tabbarï¼Œä¸­é—´ç•™å­è·¯ç”±å‡ºå£</li>
<li>å­è·¯ç”±<ul>
<li>é¦–é¡µ</li>
<li>é—®ç­”</li>
<li>è§†é¢‘</li>
<li>æˆ‘çš„</li>
</ul>
</li>
</ul>
<p>ä¸€ã€åˆ›å»º tabbar ç»„ä»¶å¹¶é…ç½®è·¯ç”±</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200109153050432.png" alt="image-20200109153050432" width="250">

<p>è¿™é‡Œä¸»è¦ä½¿ç”¨åˆ°çš„ Vant ç»„ä»¶ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/tabbar">Tabbar æ ‡ç­¾æ </a></li>
</ul>
<p>1ã€åˆ›å»º <code>src/views/layout/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"layout-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å­è·¯ç”±å‡ºå£ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å­è·¯ç”±å‡ºå£ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ ‡ç­¾å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      route: å¼€å¯è·¯ç”±æ¨¡å¼</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar</span> <span class="attr">class</span>=<span class="string">"layout-tabbar"</span> <span class="attr">route</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-shouye"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">"/qa"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-wenda"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>é—®ç­”<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">"/video"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-shipin"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è§†é¢‘<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">to</span>=<span class="string">"/my"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">"icon"</span> <span class="attr">class</span>=<span class="string">"toutiao toutiao-wode"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>æˆ‘çš„<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-tabbar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /æ ‡ç­¾å¯¼èˆªæ  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'LayoutIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.layout-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.layout-tabbar</span> {</span></span><br><span class="line"><span class="css">    <span class="selector-tag">i</span><span class="selector-class">.toutiao</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-tag">span</span><span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶åå°† layout ç»„ä»¶é…ç½®åˆ°ä¸€çº§è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/layout'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>è®¿é—® <code>/</code> æµ‹è¯•ã€‚</p>
<p>äºŒã€åˆ†åˆ«åˆ›å»ºé¦–é¡µã€é—®ç­”ã€è§†é¢‘ã€æˆ‘çš„é¡µé¢ç»„ä»¶</p>
<p>é¦–é¡µç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home-container"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'HomePage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>é—®ç­”ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"qa-container"</span>&gt;</span>é—®ç­”<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'QaPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>è§†é¢‘ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"video-container"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'VideoPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>æˆ‘çš„ç»„ä»¶ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-container"</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'MyPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>äºŒã€å°†å››ä¸ªä¸»é¡µé¢é…ç½®ä¸º tab-bar çš„å­è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/'</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'tab-bar'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/tab-bar'</span>),</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">path</span>: <span class="string">''</span>, <span class="comment">// é»˜è®¤å­è·¯ç”±</span></span><br><span class="line">      <span class="attr">name</span>: <span class="string">'home'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/home'</span>)</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">path</span>: <span class="string">'qa'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'qa'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/qa'</span>)</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">path</span>: <span class="string">'video'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'video'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/video'</span>)</span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="attr">path</span>: <span class="string">'my'</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">'my'</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/my'</span>)</span><br><span class="line">    }</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h2 id="é¡µé¢å¸ƒå±€"><a href="#é¡µé¢å¸ƒå±€" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><h3 id="æœªç™»å½•å¤´éƒ¨çŠ¶æ€"><a href="#æœªç™»å½•å¤´éƒ¨çŠ¶æ€" class="headerlink" title="æœªç™»å½•å¤´éƒ¨çŠ¶æ€"></a>æœªç™»å½•å¤´éƒ¨çŠ¶æ€</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"my-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"mobile-img"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">src</span>=<span class="string">"~@/assets/mobile.png"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$router.push('/login')"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid-nav"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ¶ˆæ¯é€šçŸ¥"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å®åè®¤è¯"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”¨æˆ·åé¦ˆ"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å°æ™ºåŒå­¦"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç³»ç»Ÿè®¾ç½®"</span> <span class="attr">is-link</span> <span class="attr">url</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'MyIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.my-container</span> {</span></span><br><span class="line"><span class="css">  &gt; <span class="selector-class">.header</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">361px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"~@/assets/banner.png"</span>) no-repeat;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-size</span>: cover;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.mobile-img</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">132px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">132px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å·²ç™»å½•å¤´éƒ¨"><a href="#å·²ç™»å½•å¤´éƒ¨" class="headerlink" title="å·²ç™»å½•å¤´éƒ¨"></a>å·²ç™»å½•å¤´éƒ¨</h3><h3 id="å®«æ ¼å¯¼èˆª"><a href="#å®«æ ¼å¯¼èˆª" class="headerlink" title="å®«æ ¼å¯¼èˆª"></a>å®«æ ¼å¯¼èˆª</h3><h3 id="å•å…ƒæ ¼å¯¼èˆª"><a href="#å•å…ƒæ ¼å¯¼èˆª" class="headerlink" title="å•å…ƒæ ¼å¯¼èˆª"></a>å•å…ƒæ ¼å¯¼èˆª</h3><h2 id="å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º"><a href="#å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º" class="headerlink" title="å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º"></a>å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º</h2><ul>
<li>æœªç™»å½•ï¼Œå±•ç¤ºç™»å½•æŒ‰é’®</li>
<li>å·²ç™»å½•ï¼Œå±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å·²ç™»å½•ï¼šç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"$store.state.user"</span> <span class="attr">class</span>=<span class="string">"user-info-wrap"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å·²ç™»å½•ï¼šç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœªç™»å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">"not-login"</span> @<span class="attr">click</span>=<span class="string">"$router.push('/login')"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æœªç™»å½• --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- é€€å‡º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-if</span>=<span class="string">"$store.state.user"</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /é€€å‡º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="ç”¨æˆ·é€€å‡º"><a href="#ç”¨æˆ·é€€å‡º" class="headerlink" title="ç”¨æˆ·é€€å‡º"></a>ç”¨æˆ·é€€å‡º</h2><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/ç”¨æˆ·é€€å‡º-1578559616164.gif" alt="ç”¨æˆ·é€€å‡º" width="250">

<p>1ã€ç»™é€€å‡ºæŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>2ã€é€€å‡ºå¤„ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">onLogout () {</span><br><span class="line">  <span class="comment">// é€€å‡ºæç¤º</span></span><br><span class="line">  <span class="comment">// åœ¨ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨ this.$dialog æ¥è°ƒç”¨å¼¹æ¡†ç»„ä»¶</span></span><br><span class="line">  <span class="built_in">this</span>.$dialog.confirm({</span><br><span class="line">    <span class="attr">title</span>: <span class="string">'ç¡®è®¤é€€å‡ºå—ï¼Ÿ'</span></span><br><span class="line">  }).then(<span class="function">() =&gt;</span> {</span><br><span class="line">    <span class="comment">// on confirm</span></span><br><span class="line">    <span class="comment">// ç¡®è®¤é€€å‡ºï¼šæ¸…é™¤ç™»å½•çŠ¶æ€ï¼ˆå®¹å™¨ä¸­çš„ user + æœ¬åœ°å­˜å‚¨ä¸­çš„ userï¼‰</span></span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">'setUser'</span>, <span class="literal">null</span>)</span><br><span class="line">  }).catch(<span class="function">() =&gt;</span> {</span><br><span class="line">    <span class="comment">// on cancel</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å–æ¶ˆæ‰§è¡Œè¿™é‡Œ'</span>)</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h2 id="å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯"><a href="#å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯" class="headerlink" title="å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯"></a>å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯</h2><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200109133717775.png" alt="image-20200109133717775" width="250">

<p>æ­¥éª¤ï¼š</p>
<ul>
<li>å°è£…æ¥å£</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·è‡ªå·±çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUserInfo = <span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user'</span>,</span><br><span class="line">    <span class="comment">// å‘é€è¯·æ±‚å¤´æ•°æ®</span></span><br><span class="line">    <span class="attr">headers</span>: {</span><br><span class="line">      <span class="comment">// æ³¨æ„ï¼šè¯¥æ¥å£éœ€è¦æˆæƒæ‰èƒ½è®¿é—®</span></span><br><span class="line">      <span class="comment">//       tokençš„æ•°æ®æ ¼å¼ï¼šBearer tokenæ•°æ®ï¼Œæ³¨æ„ Bearer åé¢æœ‰ä¸ªç©ºæ ¼</span></span><br><span class="line">      <span class="attr">Authorization</span>: <span class="string">`Bearer <span class="subst">${store.state.user.token}</span>`</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ <code>views/my/index.vue</code> è¯·æ±‚åŠ è½½æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">+ <span class="keyword">import</span> { getUserInfo } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'MyPage'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {},</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">+      userInfo: {} <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">+++  created () {</span><br><span class="line">    <span class="comment">// åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¦‚æœç”¨æˆ·ç™»å½•äº†ï¼Œæˆ‘æ‰è¯·æ±‚è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.$store.state.user) {</span><br><span class="line">      <span class="built_in">this</span>.loadUser()</span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">+++    <span class="keyword">async</span> loadUser () {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getUserInfo()</span><br><span class="line">        <span class="built_in">this</span>.user = data.data</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">        <span class="built_in">this</span>.$toast(<span class="string">'è·å–æ•°æ®å¤±è´¥'</span>)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<h2 id="ä¼˜åŒ–è®¾ç½®-Token"><a href="#ä¼˜åŒ–è®¾ç½®-Token" class="headerlink" title="ä¼˜åŒ–è®¾ç½® Token"></a>ä¼˜åŒ–è®¾ç½® Token</h2><p>é¡¹ç›®ä¸­çš„æ¥å£é™¤äº†ç™»å½•ä¹‹å¤–å¤§å¤šæ•°éƒ½éœ€è¦æä¾› token æ‰æœ‰è®¿é—®æƒé™ã€‚</p>
<p>é€šè¿‡æ¥å£æ–‡æ¡£å¯ä»¥çœ‹åˆ°ï¼Œåç«¯æ¥å£è¦æ±‚æˆ‘ä»¬å°† token æ”¾åˆ°è¯·æ±‚å¤´ <code>Header</code> ä¸­å¹¶ä»¥ä¸‹é¢çš„æ ¼å¼å‘é€ã€‚</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200301214857543.png" alt="image-20200301214857543"></p>
<blockquote>
<p>å­—æ®µåç§°ï¼š<code>Authorization</code></p>
<p>å­—æ®µå€¼ï¼š<code>Bearer token</code>ï¼Œæ³¨æ„ <code>Bearer</code> å’Œ <code>token</code> ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼</p>
</blockquote>
<p>æ–¹å¼ä¸€ï¼šåœ¨æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™æ‰‹åŠ¨æ·»åŠ ï¼ˆéº»çƒ¦ï¼‰ã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios({</span><br><span class="line">  <span class="attr">method</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">headers</span>: {</span><br><span class="line">    <span class="attr">Authorization</span>: <span class="string">"Bearer token"</span></span><br><span class="line">  }</span><br><span class="line">})</span><br></pre></td></tr></tbody></table></figure>

<p>æ–¹å¼äºŒï¼šä½¿ç”¨è¯·æ±‚æ‹¦æˆªå™¨ç»Ÿä¸€æ·»åŠ ï¼ˆæ¨èï¼Œæ›´æ–¹ä¾¿ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">  participant A as å‘èµ·è¯·æ±‚</span><br><span class="line">  participant B as è¯·æ±‚æ‹¦æˆªå™¨</span><br><span class="line">  participant C as æœåŠ¡ç«¯</span><br><span class="line">  A--&gt;&gt;B: http://xxx</span><br><span class="line">  Note right of B: è®¾ç½® token</span><br><span class="line">  B-&gt;&gt;C: è¯·æ±‚å‘å‡º</span><br><span class="line">  </span><br><span class="line">  </span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ <code>src/utils/request.js</code> ä¸­æ·»åŠ æ‹¦æˆªå™¨ç»Ÿä¸€è®¾ç½® tokenï¼š</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'@/store'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">'http://ttapi.research.itcast.cn/'</span> <span class="comment">// æ¥å£çš„åŸºå‡†è·¯å¾„</span></span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="comment">// Add a request interceptor</span></span><br><span class="line">request.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>{</span><br><span class="line">  <span class="comment">// Do something before request is sent</span></span><br><span class="line">  <span class="comment">// config ï¼šæœ¬æ¬¡è¯·æ±‚çš„é…ç½®å¯¹è±¡</span></span><br><span class="line">  <span class="comment">// config é‡Œé¢æœ‰ä¸€ä¸ªå±æ€§ï¼šheaders</span></span><br><span class="line">  <span class="keyword">const</span> { user } = store.state</span><br><span class="line">  <span class="keyword">if</span> (user &amp;&amp; user.token) {</span><br><span class="line">    config.headers.Authorization = <span class="string">`Bearer <span class="subst">${user.token}</span>`</span></span><br><span class="line">  }</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">}, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>{</span><br><span class="line">  <span class="comment">// Do something with request error</span></span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h1 id="å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨"><a href="#å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨" class="headerlink" title="å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨"></a>å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨</h1><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566539328996.png" width="250">

<h2 id="é¡µé¢å¸ƒå±€-1"><a href="#é¡µé¢å¸ƒå±€-1" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><h3 id="å¤´éƒ¨å¯¼èˆªæ "><a href="#å¤´éƒ¨å¯¼èˆªæ " class="headerlink" title="å¤´éƒ¨å¯¼èˆªæ "></a>å¤´éƒ¨å¯¼èˆªæ </h3><p>1ã€ä½¿ç”¨å¯¼èˆªæ ç»„ä»¶</p>
<p>2ã€åœ¨å¯¼èˆªæ ç»„ä»¶ä¸­æ’å…¥æŒ‰é’®</p>
<ul>
<li>æ–‡æœ¬</li>
<li>å›¾æ ‡</li>
</ul>
<p>3ã€æ ·å¼è°ƒæ•´</p>
<ul>
<li>å®½é«˜</li>
<li>èƒŒæ™¯è‰²</li>
<li>è¾¹æ¡†</li>
<li>æ–‡æœ¬å¤§å°</li>
<li>å›¾æ ‡å¤§å°</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"home-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">class</span>=<span class="string">"page-nav-bar"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"search-btn"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"title"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"info"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        <span class="attr">icon</span>=<span class="string">"search"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>æœç´¢<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'HomeIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.home-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-nav-bar__title</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">max-width</span>: unset;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.search-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">555px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">64px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#5babfb</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">28px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="é¢‘é“åˆ—è¡¨"><a href="#é¢‘é“åˆ—è¡¨" class="headerlink" title="é¢‘é“åˆ—è¡¨"></a>é¢‘é“åˆ—è¡¨</h2><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200305195458197.png" alt="image-20200305195458197" style="zoom: 80%;">

<h3 id="ä½¿ç”¨-Tab-æ ‡ç­¾é¡µç»„ä»¶"><a href="#ä½¿ç”¨-Tab-æ ‡ç­¾é¡µç»„ä»¶" class="headerlink" title="ä½¿ç”¨ Tab æ ‡ç­¾é¡µç»„ä»¶"></a>ä½¿ç”¨ Tab æ ‡ç­¾é¡µç»„ä»¶</h3><p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/tab">Tab æ ‡ç­¾é¡µç»„ä»¶</a></p>
<h3 id="æ ·å¼è°ƒæ•´"><a href="#æ ·å¼è°ƒæ•´" class="headerlink" title="æ ·å¼è°ƒæ•´"></a>æ ·å¼è°ƒæ•´</h3><p>ï¼ˆ1ï¼‰åŸºç¡€æ ·å¼è°ƒæ•´</p>
<ul>
<li>æ ‡ç­¾é¡¹<ul>
<li>å³è¾¹æ¡†</li>
<li>ä¸‹è¾¹æ¡†</li>
<li>å®½é«˜</li>
<li>æ–‡å­—å¤§å°</li>
<li>æ–‡å­—é¢œè‰²</li>
</ul>
</li>
<li>åº•éƒ¨æ¡<ul>
<li>å®½é«˜</li>
<li>é¢œè‰²</li>
<li>ä½ç½®</li>
</ul>
</li>
</ul>
<p>ï¼ˆ2ï¼‰å¤„ç†æ±‰å ¡æŒ‰é’®</p>
<p>1ã€ä½¿ç”¨æ’æ§½æ’å…¥å†…å®¹</p>
<p>2ã€æ ·å¼è°ƒæ•´</p>
<ul>
<li>å®šä½</li>
<li>å†…å®¹å±…ä¸­</li>
<li>å®½é«˜</li>
<li>èƒŒæ™¯è‰²ã€é€æ˜åº¦</li>
<li>å­—ä½“å›¾æ ‡å¤§å°</li>
</ul>
<p>3ã€ä½¿ç”¨ä¼ªå…ƒç´ è®¾ç½®æ¸å˜è¾¹æ¡†</p>
<ul>
<li>å®šä½</li>
<li>å®½é«˜</li>
<li>èƒŒæ™¯å›¾</li>
<li>èƒŒæ™¯å›¾å¡«å……æ¨¡å¼</li>
</ul>
<p>4ã€æ·»åŠ å ä½ç¬¦å……å½“å†…å®¹åŒºåŸŸ</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200402215736215.png" alt="image-20200402215736215" style="zoom:50%;">

<p>CSS æ ·å¼ï¼š</p>
<figure class="highlight less"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.placeholder</span> {</span><br><span class="line">  <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">66px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">82px</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.hamburger-btn</span> {</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">66px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">82px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.902</span>;</span><br><span class="line">  <span class="selector-tag">i</span><span class="selector-class">.toutiao</span> {</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">33px</span>;</span><br><span class="line">  }</span><br><span class="line">  <span class="selector-tag">&amp;</span>:<span class="selector-tag">before</span> {</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: url(<span class="string">~@/assets/gradient-gray-line.png</span>);</span><br><span class="line">    <span class="attribute">background-size</span>: contain;</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>




<h3 id="å±•ç¤ºé¢‘é“åˆ—è¡¨"><a href="#å±•ç¤ºé¢‘é“åˆ—è¡¨" class="headerlink" title="å±•ç¤ºé¢‘é“åˆ—è¡¨"></a>å±•ç¤ºé¢‘é“åˆ—è¡¨</h3><p>æ€è·¯ï¼š</p>
<ol>
<li>æ‰¾æ•°æ®æ¥å£</li>
<li>æŠŠæ¥å£å°è£…ä¸ºè¯·æ±‚æ–¹æ³•</li>
<li>åœ¨ç»„ä»¶ä¸­è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ol>
<p>1ã€å°è£…æ•°æ®è¯·æ±‚æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·è‡ªå·±çš„ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUserChannels = <span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/channels'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€è¯·æ±‚è·å–æ•°æ®</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200401004107079.png" alt="image-20200401004107079" style="zoom:50%;">

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200401004138232.png" alt="image-20200401004138232" style="zoom:50%;">


<h2 id="æ–‡ç« åˆ—è¡¨"><a href="#æ–‡ç« åˆ—è¡¨" class="headerlink" title="æ–‡ç« åˆ—è¡¨"></a>æ–‡ç« åˆ—è¡¨</h2><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200311221143472.png" alt="image-20200311221143472" style="zoom: 50%;">

<h3 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h3><p>ä½ çš„æ€è·¯å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<p>1ã€æ‰¾åˆ°æ•°æ®æ¥å£</p>
<p>2ã€å°è£…è¯·æ±‚æ–¹æ³•</p>
<p>3ã€åœ¨ç»„ä»¶ä¸­è¯·æ±‚è·å–æ•°æ®ï¼Œå°†æ•°æ®å­˜å‚¨åˆ° data ä¸­</p>
<p>4ã€æ¨¡æ¿ç»‘å®šå±•ç¤º</p>
<p>æ ¹æ®ä¸åŒçš„é¢‘é“åŠ è½½ä¸åŒçš„æ–‡ç« åˆ—è¡¨ï¼Œä½ çš„æ€è·¯å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>æœ‰ä¸€ä¸ª <code>list</code> æ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨æ–‡ç« åˆ—è¡¨</li>
<li>æŸ¥çœ‹ <code>a</code> é¢‘é“ï¼šè¯·æ±‚è·å–æ•°æ®ï¼Œè®© <code>list = a</code> é¢‘é“æ–‡ç« </li>
<li>æŸ¥çœ‹ <code>b</code> é¢‘é“ï¼šè¯·æ±‚è·å–æ•°æ®ï¼Œè®© <code>list = b</code> é¢‘é“æ–‡ç« </li>
<li>æŸ¥çœ‹ <code>c</code> é¢‘é“ï¼šè¯·æ±‚è·å–æ•°æ®ï¼Œè®© <code>list = c</code> é¢‘é“æ–‡ç« </li>
<li>â€¦</li>
</ul>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200111124415227.png" alt="image-20200111124415227"></p>
<p>æ€è·¯æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚</p>
<p>æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœæ˜¯ï¼š<strong>åŠ è½½è¿‡çš„æ•°æ®åˆ—è¡¨ä¸è¦é‡æ–°åŠ è½½</strong>ã€‚</p>
<p>å®ç°æ€è·¯ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬å‡†å¤‡<strong>å¤šä¸ª list æ•°ç»„ï¼Œæ¯ä¸ªé¢‘é“å¯¹åº”ä¸€ä¸ªï¼ŒæŸ¥çœ‹å“ªä¸ªé¢‘é“å°±æŠŠæ•°æ®å¾€å“ªä¸ªé¢‘é“çš„åˆ—è¡¨æ•°ç»„ä¸­å­˜æ”¾ï¼Œè¿™æ ·çš„è¯å°±ä¸ä¼šå¯¼è‡´è¦†ç›–é—®é¢˜</strong>ã€‚</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200111124530323.png" alt="image-20200111124530323"></p>
<p>å¯æ˜¯æœ‰å¤šå°‘é¢‘é“å°±å¾—æœ‰å¤šå°‘é¢‘é“æ–‡ç« æ•°ç»„ï¼Œæˆ‘ä»¬éƒ½ä¸€ä¸ªä¸€ä¸ªå£°æ˜çš„è¯ä¼šéå¸¸éº»çƒ¦ï¼Œæ‰€ä»¥è¿™é‡Œçš„å»ºè®®æ˜¯åˆ©ç”¨ç»„ä»¶æ¥å¤„ç†ã€‚</p>
<p>å…·ä½“åšæ³•å°±æ˜¯ï¼š</p>
<ul>
<li>å°è£…ä¸€ä¸ªæ–‡ç« åˆ—è¡¨ç»„ä»¶</li>
<li>ç„¶ååœ¨é¢‘é“åˆ—è¡¨ä¸­æŠŠæ–‡ç« åˆ—è¡¨éå†å‡ºæ¥</li>
</ul>
<p><strong>å› ä¸ºæ–‡ç« åˆ—è¡¨ç»„ä»¶ä¸­è¯·æ±‚è·å–æ–‡ç« åˆ—è¡¨æ•°æ®éœ€è¦é¢‘é“ idï¼Œæ‰€ä»¥ é¢‘é“ id åº”è¯¥ä½œä¸º props å‚æ•°ä¼ é€’ç»™æ–‡ç« åˆ—è¡¨ç»„ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠé¢‘é“å¯¹è±¡ä¼ é€’ç»™æ–‡ç« åˆ—è¡¨ç»„ä»¶å°±å¯ä»¥äº†ã€‚</strong></p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200306155328108.png" alt="image-20200306155328108" style="zoom: 67%;">

<p>åœ¨æ–‡ç« åˆ—è¡¨ä¸­è¯·æ±‚è·å–å¯¹åº”çš„åˆ—è¡¨æ•°æ®ï¼Œå±•ç¤ºåˆ°åˆ—è¡¨ä¸­ã€‚</p>
<p>æœ€åæŠŠç»„ä»¶åœ¨é¢‘é“åˆ—è¡¨ä¸­éå†å‡ºæ¥ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200306154805522.png" alt="image-20200306154805522"></p>
<p>1ã€åˆ›å»º <code>src/views/home/components/article-list.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-list"</span>&gt;</span>æ–‡ç« åˆ—è¡¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleList'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">channel</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>2ã€åœ¨ <code>home/index.vue</code> ä¸­æ³¨å†Œä½¿ç”¨</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200305205441485.png" alt="image-20200305205441485" style="zoom:50%;">



<p>3ã€æœ€åæµ‹è¯•ã€‚</p>
<p>ç­”ç–‘ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆæ ‡ç­¾å†…å®¹æ˜¯æ‡’æ¸²æŸ“çš„ï¼Ÿ<ul>
<li>å› ä¸ºè¿™æ˜¯ Tab æ ‡ç­¾é¡µç»„ä»¶æœ¬èº«æ”¯æŒçš„é»˜è®¤åŠŸèƒ½ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥é€šè¿‡é…ç½® <code>:lazy-render="false"</code> æ¥å…³é—­è¿™ä¸ªæ•ˆæœã€‚</li>
</ul>
</li>
</ul>
<h3 id="ä½¿ç”¨-List-åˆ—è¡¨ç»„ä»¶"><a href="#ä½¿ç”¨-List-åˆ—è¡¨ç»„ä»¶" class="headerlink" title="ä½¿ç”¨ List åˆ—è¡¨ç»„ä»¶"></a>ä½¿ç”¨ List åˆ—è¡¨ç»„ä»¶</h3><p><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/list">List åˆ—è¡¨ç»„ä»¶</a>ï¼šç€‘å¸ƒæµæ»šåŠ¨åŠ è½½ï¼Œç”¨äºå±•ç¤ºé•¿åˆ—è¡¨ã€‚</p>
<p>List ç»„ä»¶é€šè¿‡ loading å’Œ finished ä¸¤ä¸ªå˜é‡æ§åˆ¶åŠ è½½çŠ¶æ€ï¼Œ<br>å½“ç»„ä»¶åˆå§‹åŒ–æˆ–æ»šåŠ¨åˆ°åˆ°åº•éƒ¨æ—¶ï¼Œä¼šè§¦å‘ load äº‹ä»¶å¹¶å°† loading è®¾ç½®æˆ trueï¼Œæ­¤æ—¶å¯ä»¥å‘èµ·å¼‚æ­¥æ“ä½œå¹¶æ›´æ–°æ•°æ®ï¼Œæ•°æ®æ›´æ–°å®Œæ¯•åï¼Œå°† loading è®¾ç½®æˆ false å³å¯ã€‚<br>è‹¥æ•°æ®å·²å…¨éƒ¨åŠ è½½å®Œæ¯•ï¼Œåˆ™ç›´æ¥å°† finished è®¾ç½®æˆ true å³å¯ã€‚</p>
<ul>
<li><code>load äº‹ä»¶</code>ï¼š<ul>
<li>List åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®ã€‚</li>
<li>å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼ŒList ä¼šç»§ç»­è§¦å‘ load äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆã€‚</li>
</ul>
</li>
<li><code>loading å±æ€§</code>ï¼šæ§åˆ¶åŠ è½½ä¸­çš„ loading çŠ¶æ€<ul>
<li>éåŠ è½½ä¸­ï¼Œloading ä¸º falseï¼Œæ­¤æ—¶ä¼šæ ¹æ®åˆ—è¡¨æ»šåŠ¨ä½ç½®åˆ¤æ–­æ˜¯å¦è§¦å‘ load äº‹ä»¶ï¼ˆåˆ—è¡¨å†…å®¹ä¸è¶³ä¸€å±å¹•æ—¶ï¼Œä¼šç›´æ¥è§¦å‘ï¼‰</li>
<li>åŠ è½½ä¸­ï¼Œloading ä¸º trueï¼Œè¡¨ç¤ºæ­£åœ¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ load äº‹ä»¶</li>
</ul>
</li>
<li><code>finished å±æ€§</code>ï¼šæ§åˆ¶åŠ è½½ç»“æŸçš„çŠ¶æ€<ul>
<li>åœ¨æ¯æ¬¡è¯·æ±‚å®Œæ¯•åï¼Œéœ€è¦æ‰‹åŠ¨å°† loading è®¾ç½®ä¸º falseï¼Œè¡¨ç¤ºæœ¬æ¬¡åŠ è½½ç»“æŸ</li>
<li>æ‰€æœ‰æ•°æ®åŠ è½½ç»“æŸï¼Œfinished ä¸º trueï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ load äº‹ä»¶</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-list"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      List åˆ—è¡¨ç»„ä»¶ï¼šç€‘å¸ƒæµæ»šåŠ¨åŠ è½½ï¼Œç”¨äºå±•ç¤ºé•¿åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      List ç»„ä»¶é€šè¿‡ loading å’Œ finished ä¸¤ä¸ªå˜é‡æ§åˆ¶åŠ è½½çŠ¶æ€ï¼Œ</span></span><br><span class="line"><span class="comment">      å½“ç»„ä»¶åˆå§‹åŒ–æˆ–æ»šåŠ¨åˆ°åˆ°åº•éƒ¨æ—¶ï¼Œä¼šè§¦å‘ load äº‹ä»¶å¹¶å°† loading è‡ªåŠ¨è®¾ç½®æˆ trueï¼Œæ­¤æ—¶å¯ä»¥å‘èµ·å¼‚æ­¥æ“ä½œå¹¶æ›´æ–°æ•°æ®ï¼Œ</span></span><br><span class="line"><span class="comment">      æ•°æ®æ›´æ–°å®Œæ¯•åï¼Œå°† loading è®¾ç½®æˆ false å³å¯ã€‚</span></span><br><span class="line"><span class="comment">      è‹¥æ•°æ®å·²å…¨éƒ¨åŠ è½½å®Œæ¯•ï¼Œåˆ™ç›´æ¥å°† finished è®¾ç½®æˆ true å³å¯ã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      - load äº‹ä»¶ï¼š</span></span><br><span class="line"><span class="comment">        + List åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®ã€‚</span></span><br><span class="line"><span class="comment">        + å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼ŒList ä¼šç»§ç»­è§¦å‘ load äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆã€‚</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      - loading å±æ€§ï¼šæ§åˆ¶åŠ è½½ä¸­çš„ loading çŠ¶æ€</span></span><br><span class="line"><span class="comment">        + éåŠ è½½ä¸­ï¼Œloading ä¸º falseï¼Œæ­¤æ—¶ä¼šæ ¹æ®åˆ—è¡¨æ»šåŠ¨ä½ç½®åˆ¤æ–­æ˜¯å¦è§¦å‘ load äº‹ä»¶ï¼ˆåˆ—è¡¨å†…å®¹ä¸è¶³ä¸€å±å¹•æ—¶ï¼Œä¼šç›´æ¥è§¦å‘ï¼‰</span></span><br><span class="line"><span class="comment">        + åŠ è½½ä¸­ï¼Œloading ä¸º trueï¼Œè¡¨ç¤ºæ­£åœ¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ load äº‹ä»¶</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      - finished å±æ€§ï¼šæ§åˆ¶åŠ è½½ç»“æŸçš„çŠ¶æ€</span></span><br><span class="line"><span class="comment">        + åœ¨æ¯æ¬¡è¯·æ±‚å®Œæ¯•åï¼Œéœ€è¦æ‰‹åŠ¨å°† loading è®¾ç½®ä¸º falseï¼Œè¡¨ç¤ºæœ¬æ¬¡åŠ è½½ç»“æŸ</span></span><br><span class="line"><span class="comment">        + æ‰€æœ‰æ•°æ®åŠ è½½ç»“æŸï¼Œfinished ä¸º trueï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘ load äº‹ä»¶</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> <span class="attr">:key</span>=<span class="string">"item"</span> <span class="attr">:title</span>=<span class="string">"item"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleList'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">channel</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">list</span>: [], <span class="comment">// å­˜å‚¨åˆ—è¡¨æ•°æ®çš„æ•°ç»„</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶åŠ è½½ä¸­ loading çŠ¶æ€</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">finished</span>: <span class="literal">false</span> <span class="comment">// æ§åˆ¶æ•°æ®åŠ è½½ç»“æŸçš„çŠ¶æ€</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="comment">// åˆå§‹åŒ–æˆ–æ»šåŠ¨åˆ°åº•éƒ¨çš„æ—¶å€™ä¼šè§¦å‘è°ƒç”¨ onLoad</span></span></span><br><span class="line"><span class="javascript">    onLoad () {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'onLoad'</span>)</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// setTimeout ä»…åšç¤ºä¾‹ï¼ŒçœŸå®åœºæ™¯ä¸­ä¸€èˆ¬ä¸º ajax è¯·æ±‚</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 2. æŠŠè¯·æ±‚ç»“æœæ•°æ®æ”¾åˆ° list æ•°ç»„ä¸­</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 0 + 1 = 1</span></span></span><br><span class="line"><span class="javascript">          <span class="comment">// 1 + 1 = 2</span></span></span><br><span class="line"><span class="javascript">          <span class="comment">// 2 + 1 = 3</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.list.push(<span class="built_in">this</span>.list.length + <span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 3. æœ¬æ¬¡æ•°æ®åŠ è½½ç»“æŸä¹‹åè¦æŠŠåŠ è½½çŠ¶æ€è®¾ç½®ä¸ºç»“æŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">//     loading å…³é—­ä»¥åæ‰èƒ½è§¦å‘ä¸‹ä¸€æ¬¡çš„åŠ è½½æ›´å¤š</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦å…¨éƒ¨åŠ è½½å®Œæˆ</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.list.length &gt;= <span class="number">40</span>) {</span></span><br><span class="line"><span class="javascript">          <span class="comment">// å¦‚æœæ²¡æœ‰æ•°æ®äº†ï¼ŒæŠŠ finished è®¾ç½®ä¸º trueï¼Œä¹‹åä¸å†è§¦å‘åŠ è½½æ›´å¤š</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.finished = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      }, <span class="number">1000</span>)</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="è®©åˆ—è¡¨å›ºå®šå®šä½"><a href="#è®©åˆ—è¡¨å›ºå®šå®šä½" class="headerlink" title="è®©åˆ—è¡¨å›ºå®šå®šä½"></a>è®©åˆ—è¡¨å›ºå®šå®šä½</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.article-list {</span><br><span class="line">  position: fixed;</span><br><span class="line">  top: 180px;</span><br><span class="line">  bottom: 100px;</span><br><span class="line">  right: 0;</span><br><span class="line">  left: 0;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®"><a href="#åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®" class="headerlink" title="åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®"></a>åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®</h3><p>å®ç°æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>1ã€åˆ›å»º <code>src/api/article.js</code> å°è£…è·å–æ–‡ç« åˆ—è¡¨æ•°æ®çš„æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ç« æ¥å£æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–é¢‘é“çš„æ–‡ç« åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getArticles = <span class="function"><span class="params">params</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_1/articles'</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ³¨æ„ï¼šä½¿ç”¨æ¥å£æ–‡æ¡£ä¸­æœ€ä¸‹é¢çš„ <strong>é¢‘é“æ–°é—»æ¨è_V1.1</strong></p>
</blockquote>
<p>2ã€ç„¶ååœ¨é¦–é¡µæ–‡ç« åˆ—è¡¨ç»„ä»¶ <code>onload</code> çš„æ—¶å€™è¯·æ±‚åŠ è½½æ–‡ç« åˆ—è¡¨</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-list"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        loading æ§åˆ¶ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„ loading çŠ¶æ€</span></span><br><span class="line"><span class="comment">        finished æ§åˆ¶æ•°æ®æ˜¯å¦åŠ è½½ç»“æŸ</span></span><br><span class="line"><span class="comment">        load äº‹ä»¶ï¼šå½“è§¦å‘ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ—¶å€™ä¼šè§¦å‘è°ƒç”¨ load äº‹ä»¶</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        List åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®</span></span><br><span class="line"><span class="comment">        å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼ŒList ä¼šç»§ç»­è§¦å‘ load äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ</span></span><br><span class="line"><span class="comment">      --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:error.sync</span>=<span class="string">"error"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">error-text</span>=<span class="string">"è¯·æ±‚å¤±è´¥ï¼Œç‚¹å‡»é‡æ–°åŠ è½½"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">      &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">"(article, index) in list"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:title</span>=<span class="string">"article.title"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> { getArticles } <span class="keyword">from</span> <span class="string">'@/api/article'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleList'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">channel</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">list</span>: [], <span class="comment">// æ–‡ç« åˆ—è¡¨æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„ loading çŠ¶æ€</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">finished</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦åŠ è½½ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">error</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦åŠ è½½å¤±è´¥</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">timestamp</span>: <span class="literal">null</span> <span class="comment">// è¯·æ±‚ä¸‹ä¸€é¡µæ•°æ®çš„æ—¶é—´æˆ³</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="comment">// å½“è§¦å‘ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ—¶å€™è°ƒç”¨è¯¥å‡½æ•°</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> onLoad () {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">try</span> {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getArticles({</span></span><br><span class="line"><span class="javascript">          <span class="attr">channel_id</span>: <span class="built_in">this</span>.channel.id, <span class="comment">// é¢‘é“ id</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">timestamp</span>: <span class="built_in">this</span>.timestamp || <span class="built_in">Date</span>.now(), <span class="comment">// æ—¶é—´æˆ³ï¼Œè¯·æ±‚æ–°çš„æ¨èæ•°æ®ä¼ å½“å‰çš„æ—¶é—´æˆ³ï¼Œè¯·æ±‚å†å²æ¨èä¼ æŒ‡å®šçš„æ—¶é—´æˆ³</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">with_top</span>: <span class="number">1</span> <span class="comment">// æ˜¯å¦åŒ…å«ç½®é¡¶ï¼Œè¿›å…¥é¡µé¢ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶è¦åŒ…å«ç½®é¡¶æ–‡ç« ï¼Œ1-åŒ…å«ç½®é¡¶ï¼Œ0-ä¸åŒ…å«</span></span></span><br><span class="line"><span class="javascript">        })</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 2. æŠŠæ•°æ®æ·»åŠ åˆ° list æ•°ç»„ä¸­</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> { results } = data.data</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.list.push(...results)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 3. è®¾ç½®æœ¬æ¬¡åŠ è½½ä¸­ loading çŠ¶æ€ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (results.length) {</span></span><br><span class="line"><span class="javascript">          <span class="comment">// æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„æ—¶é—´æˆ³</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.timestamp = data.data.pre_timestamp</span></span><br><span class="line"><span class="javascript">        } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="javascript">          <span class="comment">// æ²¡æœ‰æ•°æ®äº†ï¼Œè®¾ç½®åŠ è½½çŠ¶æ€ç»“æŸï¼Œä¸å†è§¦å‘ä¸Šæ‹‰åŠ è½½æ›´å¤šäº†</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.finished = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      } <span class="keyword">catch</span> (err) {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(err)</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loading = <span class="literal">false</span> <span class="comment">// å…³é—­ loading æ•ˆæœ</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.error = <span class="literal">true</span> <span class="comment">// å¼€å¯é”™è¯¯æç¤º</span></span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h3 id="ä¸‹æ‹‰åˆ·æ–°"><a href="#ä¸‹æ‹‰åˆ·æ–°" class="headerlink" title="ä¸‹æ‹‰åˆ·æ–°"></a>ä¸‹æ‹‰åˆ·æ–°</h3><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/å±•ç¤ºæ–‡ç« åˆ—è¡¨-ä¸‹æ‹‰åˆ·æ–°.gif" alt="å±•ç¤ºæ–‡ç« åˆ—è¡¨-ä¸‹æ‹‰åˆ·æ–°" width="250">

<p>è¿™é‡Œä¸»è¦ä½¿ç”¨åˆ° Vant ä¸­çš„ <a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/pull-refresh">PullRefresh ä¸‹æ‹‰åˆ·æ–°</a> ç»„ä»¶ã€‚</p>
<p>æ€è·¯ï¼š</p>
<ul>
<li>æ³¨å†Œä¸‹æ‹‰åˆ·æ–°äº‹ä»¶ï¼ˆç»„ä»¶ï¼‰çš„å¤„ç†å‡½æ•°</li>
<li>å‘é€è¯·æ±‚è·å–æ–‡ç« åˆ—è¡¨æ•°æ®</li>
<li>æŠŠè·å–åˆ°çš„æ•°æ®æ·»åŠ åˆ°å½“å‰é¢‘é“çš„æ–‡ç« åˆ—è¡¨çš„é¡¶éƒ¨</li>
<li>æç¤ºç”¨æˆ·åˆ·æ–°æˆåŠŸï¼</li>
</ul>
<p>ä¸‹æ‹‰åˆ·æ–°æ—¶ä¼šè§¦å‘ç»„ä»¶çš„ <code>refresh</code> äº‹ä»¶ï¼Œåœ¨äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­å¯ä»¥è¿›è¡ŒåŒæ­¥æˆ–å¼‚æ­¥æ“ä½œï¼Œæ“ä½œå®Œæˆåå°† <code>v-model</code> è®¾ç½®ä¸º <code>false</code>ï¼Œè¡¨ç¤ºåŠ è½½å®Œæˆã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“è§¦å‘ä¸‹æ‹‰åˆ·æ–°çš„æ—¶å€™è°ƒç”¨è¯¥å‡½æ•°</span></span><br><span class="line"><span class="keyword">async</span> onRefresh () {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> { data } = <span class="keyword">await</span> getArticles({</span><br><span class="line">      <span class="attr">channel_id</span>: <span class="built_in">this</span>.channel.id, <span class="comment">// é¢‘é“ id</span></span><br><span class="line">      <span class="attr">timestamp</span>: <span class="built_in">Date</span>.now(), <span class="comment">// ä¸‹æ‹‰åˆ·æ–°æ¯æ¬¡éƒ½åº”è¯¥è·å–æœ€æ–°æ•°æ®</span></span><br><span class="line">      <span class="attr">with_top</span>: <span class="number">1</span> <span class="comment">// æ˜¯å¦åŒ…å«ç½®é¡¶ï¼Œè¿›å…¥é¡µé¢ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶è¦åŒ…å«ç½®é¡¶æ–‡ç« ï¼Œ1-åŒ…å«ç½®é¡¶ï¼Œ0-ä¸åŒ…å«</span></span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. å°†æ•°æ®è¿½åŠ åˆ°åˆ—è¡¨çš„é¡¶éƒ¨</span></span><br><span class="line">    <span class="keyword">const</span> { results } = data.data</span><br><span class="line">    <span class="built_in">this</span>.list.unshift(...results)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. å…³é—­ä¸‹æ‹‰åˆ·æ–°çš„ loading çŠ¶æ€</span></span><br><span class="line">    <span class="built_in">this</span>.isRefreshLoading = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æç¤ºæˆåŠŸ</span></span><br><span class="line">    <span class="built_in">this</span>.refreshSuccessText = <span class="string">`åˆ·æ–°æˆåŠŸï¼Œæ›´æ–°äº†<span class="subst">${results.length}</span>æ¡æ•°æ®`</span></span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.isRefreshLoading = <span class="literal">false</span> <span class="comment">// å…³é—­ä¸‹æ‹‰åˆ·æ–°çš„ loading çŠ¶æ€</span></span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'åˆ·æ–°å¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ–‡ç« åˆ—è¡¨é¡¹"><a href="#æ–‡ç« åˆ—è¡¨é¡¹" class="headerlink" title="æ–‡ç« åˆ—è¡¨é¡¹"></a>æ–‡ç« åˆ—è¡¨é¡¹</h2><h3 id="å‡†å¤‡ç»„ä»¶"><a href="#å‡†å¤‡ç»„ä»¶" class="headerlink" title="å‡†å¤‡ç»„ä»¶"></a>å‡†å¤‡ç»„ä»¶</h3><p>åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­æœ‰å¥½å‡ ä¸ªé¡µé¢ä¸­éƒ½æœ‰è¿™ä¸ªæ–‡ç« åˆ—è¡¨é¡¹å†…å®¹ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ¯ä¸ªé¡µé¢ä¸­éƒ½å†™ä¸€æ¬¡çš„è¯ä¸ä»…æ•ˆç‡ä½è€Œä¸”ç»´æŠ¤èµ·æ¥ä¹Ÿéº»çƒ¦ã€‚æ‰€ä»¥æœ€å¥½çš„åŠæ³•å°±æ˜¯æˆ‘ä»¬æŠŠå®ƒå°è£…ä¸ºä¸€ä¸ªç»„ä»¶ï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨çš„ç»„ä»¶ä¸­åŠ è½½ä½¿ç”¨å³å¯ã€‚</p>
<p>1ã€åˆ›å»º <code>src/components/article-item/index.vue</code> ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-item"</span>&gt;</span>æ–‡ç« åˆ—è¡¨é¡¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">article</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>2ã€åœ¨æ–‡ç« åˆ—è¡¨ç»„ä»¶ä¸­æ³¨å†Œä½¿ç”¨æ–‡ç« åˆ—è¡¨é¡¹ç»„ä»¶</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200404224728524.png" alt="image-20200404224728524" style="zoom:50%;">

<h3 id="å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹"><a href="#å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹" class="headerlink" title="å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹"></a>å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹</h3><ul>
<li>ä½¿ç”¨ Cell å•å…ƒæ ¼ç»„ä»¶</li>
<li>å±•ç¤ºæ ‡é¢˜</li>
<li>å±•ç¤ºåº•éƒ¨ä¿¡æ¯</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"article-item"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>{{ article.title }}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"article.cover.type === 3"</span> <span class="attr">class</span>=<span class="string">"cover-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"cover-item"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">"(img, index) in article.cover.images"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">            <span class="attr">width</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">height</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:src</span>=<span class="string">"img"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.aut_name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.comm_count }}è¯„è®º<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.pubdate }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-if</span>=<span class="string">"article.cover.type === 1"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">height</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:src</span>=<span class="string">"article.cover.images[0]"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">article</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ ·å¼è°ƒæ•´-1"><a href="#æ ·å¼è°ƒæ•´-1" class="headerlink" title="æ ·å¼è°ƒæ•´"></a>æ ·å¼è°ƒæ•´</h3><ul>
<li>æ–‡ç« æ ‡é¢˜<ul>
<li>å­—å·</li>
<li>é¢œè‰²</li>
<li>å¤šè¡Œæ–‡å­—çœç•¥</li>
</ul>
</li>
<li>å•å›¾å°é¢<ul>
<li>å°é¢å®¹å™¨<ul>
<li>å»é™¤ flex: 1ï¼Œå›ºå®šå®½é«˜</li>
<li>å·¦å†…è¾¹è·</li>
</ul>
</li>
<li>å°é¢å›¾<ul>
<li>å®½é«˜</li>
<li>å¡«å……æ¨¡å¼ï¼šcover</li>
</ul>
</li>
</ul>
</li>
<li>åº•éƒ¨æ–‡æœ¬ä¿¡æ¯<ul>
<li>å­—å·</li>
<li>é¢œè‰²</li>
<li>é—´è·</li>
</ul>
</li>
<li>å¤šå›¾å°é¢<ul>
<li>å¤–å±‚å®¹å™¨<ul>
<li>flex å®¹å™¨</li>
<li>ä¸Šä¸‹å¤–è¾¹è·</li>
</ul>
</li>
<li>å›¾ç‰‡å®¹å™¨<ul>
<li>å¹³å‡åˆ†é…å®¹å™¨ç©ºé—´ï¼šflex: 1;</li>
<li>å›ºå®šé«˜åº¦</li>
<li>å®¹å™¨é¡¹é—´è·</li>
</ul>
</li>
<li>å›¾ç‰‡<ul>
<li>å®½é«˜</li>
<li>å¡«å……æ¨¡å¼</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">"article-item"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"title van-multi-ellipsis--l2"</span>&gt;</span>{{ article.title }}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">"article.cover.type === 3"</span> <span class="attr">class</span>=<span class="string">"cover-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"cover-item"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">"(img, index) in article.cover.images"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"cover-item-img"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:src</span>=<span class="string">"img"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"label-info-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.aut_name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.comm_count }}è¯„è®º<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>{{ article.pubdate }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-if</span>=<span class="string">"article.cover.type === 1"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"right-cover"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:src</span>=<span class="string">"article.cover.images[0]"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">article</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.article-item</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.title</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#3a3a3a</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-cell__value</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">flex</span>: unset;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">232px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">146px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding-left</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.right-cover</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">232px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">146px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.label-info-wrap</span> <span class="selector-tag">span</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">22px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#b4b4b4</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.cover-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">30px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.cover-item</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">146px</span>;</span></span><br><span class="line"><span class="css">      &amp;<span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:last-child</span>) {</span></span><br><span class="line"><span class="css">        <span class="attribute">padding-right</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.cover-item-img</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">146px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h3 id="å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜"><a href="#å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜" class="headerlink" title="å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜"></a>å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜</h3><p>ä¸ºä»€ä¹ˆæ–‡ç« åˆ—è¡¨æ•°æ®ä¸­çš„å¥½å¤šå›¾ç‰‡èµ„æºè¯·æ±‚å¤±è´¥è¿”å› 403ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯å› ä¸ºæˆ‘ä»¬é¡¹ç›®çš„æ¥å£æ•°æ®æ˜¯åç«¯é€šè¿‡çˆ¬è™«æŠ“å–çš„ç¬¬ä¸‰æ–¹å¹³å°å†…å®¹ï¼Œè€Œç¬¬ä¸‰æ–¹å¹³å°å¯¹å›¾ç‰‡èµ„æºåšäº†é˜²ç›—é“¾ä¿æŠ¤å¤„ç†ã€‚</span><br></pre></td></tr></tbody></table></figure>



<p>ç¬¬ä¸‰æ–¹å¹³å°æ€ä¹ˆå¤„ç†å›¾ç‰‡èµ„æºä¿æŠ¤çš„ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ Referer è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œç„¶åå¤„ç†èµ„æºè®¿é—®ã€‚</span><br></pre></td></tr></tbody></table></figure>

<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200405134347749.png" alt="image-20200405134347749">



<p>Referer æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p>
<blockquote>
<p>æ‰©å±•å‚è€ƒï¼š<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2019/06/http-referer.html">http://www.ruanyifeng.com/blog/2019/06/http-referer.html</a></p>
</blockquote>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Referer æ˜¯ HTTP è¯·æ±‚å¤´çš„ä¸€éƒ¨åˆ†ï¼Œå½“æµè§ˆå™¨å‘ Web æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šå¸¦ä¸Š Refererï¼Œå®ƒåŒ…å«äº†å½“å‰è¯·æ±‚èµ„æºçš„æ¥æºé¡µé¢çš„åœ°å€ã€‚æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ Referer è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œå¯èƒ½ä¼šä»¥æ­¤è¿›è¡Œç»Ÿè®¡åˆ†æã€æ—¥å¿—è®°å½•ä»¥åŠç¼“å­˜ä¼˜åŒ–ç­‰ã€‚</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ referer å®é™…ä¸Šæ˜¯ â€œreferrerâ€ è¯¯æ‹¼å†™ã€‚å‚è§ <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/HTTP_referer">HTTP referer on Wikipedia</a> ï¼ˆHTTP referer åœ¨ç»´åŸºç™¾ç§‘ä¸Šçš„æ¡ç›®ï¼‰æ¥è·å–æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p>æ€ä¹ˆè§£å†³ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¸è¦å‘é€ referrer ï¼Œå¯¹æ–¹æœåŠ¡ç«¯å°±ä¸çŸ¥é“ä½ ä»å“ªæ¥çš„äº†ï¼Œå§‘ä¸”è®¤ä¸ºæ˜¯ä½ æ˜¯è‡ªå·±äººå§ã€‚</span><br></pre></td></tr></tbody></table></figure>



<p>å¦‚ä½•è®¾ç½®ä¸å‘é€ referrerï¼Ÿ</p>
<p>ç”¨ <code>&lt;a&gt;</code>ã€<code>&lt;area&gt;</code>ã€<code>&lt;img&gt;</code>ã€<code>&lt;iframe&gt;</code>ã€<code>&lt;script&gt;</code> æˆ–è€… <code>&lt;link&gt;</code> å…ƒç´ ä¸Šçš„ <code>referrerpolicy</code> å±æ€§ä¸ºå…¶è®¾ç½®ç‹¬ç«‹çš„è¯·æ±‚ç­–ç•¥ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://â€¦â€¦"</span> <span class="attr">referrerPolicy</span>=<span class="string">"no-referrer"</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æˆ–è€…ç›´æ¥åœ¨ HTMl é¡µé¢å¤´ä¸­é€šè¿‡ meta å±æ€§å…¨å±€é…ç½®ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"referrer"</span> <span class="attr">content</span>=<span class="string">"no-referrer"</span> /&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å¤„ç†ç›¸å¯¹æ—¶é—´"><a href="#å¤„ç†ç›¸å¯¹æ—¶é—´" class="headerlink" title="å¤„ç†ç›¸å¯¹æ—¶é—´"></a>å¤„ç†ç›¸å¯¹æ—¶é—´</h3><p>æ¨èä¸¤ä¸ªç¬¬ä¸‰æ–¹åº“ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://momentjs.com/">Moment.js</a></li>
<li><a target="_blank" rel="noopener" href="https://day.js.org/">Day.js</a></li>
</ul>
<p>ä¸¤è€…éƒ½æ˜¯ä¸“é—¨ç”¨äºå¤„ç†æ—¶é—´çš„ JavaScript åº“ï¼ŒåŠŸèƒ½å·®ä¸å¤šï¼Œå› ä¸º Day.js çš„è®¾è®¡å°±æ˜¯å‚è€ƒçš„ Moment.jsã€‚ä½†æ˜¯ Day.js ç›¸æ¯” Moment.js çš„åŒ…ä½“ç§¯è¦æ›´å°ä¸€äº›ï¼Œå› ä¸ºå®ƒé‡‡ç”¨äº†æ’ä»¶åŒ–çš„å¤„ç†æ–¹å¼ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://day.js.org/zh-CN/">Day.js</a> æ˜¯ä¸€ä¸ªè½»é‡çš„å¤„ç†æ—¶é—´å’Œæ—¥æœŸçš„ JavaScript åº“ï¼Œå’Œ <a target="_blank" rel="noopener" href="https://momentjs.com/">Moment.js</a> çš„ API è®¾è®¡ä¿æŒå®Œå…¨ä¸€æ ·ï¼Œå¦‚æœæ‚¨æ›¾ç»ç”¨è¿‡ Moment.js, é‚£ä¹ˆæ‚¨å·²ç»çŸ¥é“å¦‚ä½•ä½¿ç”¨ Day.js ã€‚</p>
<ul>
<li><p>Day.js å¯ä»¥è¿è¡Œåœ¨æµè§ˆå™¨å’Œ Node.js ä¸­ã€‚</p>
</li>
<li><p>ğŸ•’ å’Œ Moment.js ç›¸åŒçš„ API å’Œç”¨æ³•</p>
</li>
<li><p>ğŸ’ª ä¸å¯å˜æ•°æ® (Immutable)</p>
</li>
<li><p>ğŸ”¥ æ”¯æŒé“¾å¼æ“ä½œ (Chainable)</p>
</li>
<li><p>ğŸŒ å›½é™…åŒ– I18n</p>
</li>
<li><p>ğŸ“¦ ä»… 2kb å¤§å°çš„å¾®å‹åº“</p>
</li>
<li><p>ğŸ‘« å…¨æµè§ˆå™¨å…¼å®¹</p>
</li>
</ul>
<p>1ã€å®‰è£…</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i dayjs</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åˆ›å»º <code>utils/dayjs.js</code></p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">'dayjs'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ è½½ä¸­æ–‡è¯­è¨€åŒ…</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'dayjs/locale/zh-cn'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> relativeTime <span class="keyword">from</span> <span class="string">'dayjs/plugin/relativeTime'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®ä½¿ç”¨å¤„ç†ç›¸å¯¹æ—¶é—´çš„æ’ä»¶</span></span><br><span class="line">dayjs.extend(relativeTime)</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®ä½¿ç”¨ä¸­æ–‡è¯­è¨€åŒ…</span></span><br><span class="line">dayjs.locale(<span class="string">'zh-cn'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…¨å±€è¿‡æ»¤å™¨ï¼šå¤„ç†ç›¸å¯¹æ—¶é—´</span></span><br><span class="line">Vue.filter(<span class="string">'relativeTime'</span>, <span class="function"><span class="params">value</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> dayjs().to(dayjs(value))</span><br><span class="line">})</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨ <code>main.js</code> ä¸­åŠ è½½åˆå§‹åŒ–</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./utils/dayjs'</span></span><br></pre></td></tr></tbody></table></figure>

<p>4ã€ä½¿ç”¨</p>
<p>ä½¿ç”¨è¿‡æ»¤å™¨ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>{{ æ—¥æœŸæ•°æ® | relativeTime }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h1 id="äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘"><a href="#äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘" class="headerlink" title="äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘"></a>äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘</h1><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566541118035.png" width="300">





<h2 id="å¤„ç†é¡µé¢å¼¹å‡ºå±‚"><a href="#å¤„ç†é¡µé¢å¼¹å‡ºå±‚" class="headerlink" title="å¤„ç†é¡µé¢å¼¹å‡ºå±‚"></a>å¤„ç†é¡µé¢å¼¹å‡ºå±‚</h2><p>Vant ä¸­å†…ç½®äº† <a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/popup">Popup å¼¹å‡ºå±‚</a> ç»„ä»¶ã€‚</p>
<p>1ã€åœ¨ <code>data</code>ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥æ§åˆ¶å¼¹å±‚çš„æ˜¾ç¤ºå’Œéšè—</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isChannelEditShow</span>: <span class="literal">true</span> <span class="comment">// è¿™é‡Œæˆ‘ä»¬å…ˆè®¾ç½®ä¸º true å°±èƒ½çœ‹åˆ°å¼¹çª—çš„é¡µé¢äº†</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨é¦–é¡µæ¨¡æ¿ä¸­çš„é¢‘é“åˆ—è¡¨åé¢æ·»åŠ å¼¹å‡ºå±‚ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é¢‘é“ç¼–è¾‘ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"edit-channel-popup"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isEditChannelShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:style</span>=<span class="string">"{ height: '100%' }"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">closeable</span></span></span><br><span class="line"><span class="tag">  <span class="attr">close-icon-position</span>=<span class="string">"top-left"</span></span></span><br><span class="line"><span class="tag">&gt;</span>å†…å®¹<span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /é¢‘é“ç¼–è¾‘ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight less"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.edit-channel-popup</span> {</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æµ‹è¯•æŸ¥çœ‹ç»“æœã€‚</p>
<h2 id="åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶"><a href="#åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶" class="headerlink" title="åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶"></a>åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶</h2><p>1ã€åˆ›å»º <code>views/home/components/channel-edit.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"channel-edit"</span>&gt;</span>é¢‘é“ç¼–è¾‘<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ChannelEdit'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨é¦–é¡µä¸­åŠ è½½æ³¨å†Œ</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ChannelEdit <span class="keyword">from</span> <span class="string">'./components/channel-edit'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">components</span>: {</span><br><span class="line">    ...</span><br><span class="line">    ChannelEdit</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p>3ã€åœ¨å¼¹å‡ºå±‚ä¸­ä½¿ç”¨é¢‘é“ç¼–è¾‘ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é¢‘é“ç¼–è¾‘ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isChannelEditShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">closeable</span></span></span><br><span class="line"><span class="tag">  <span class="attr">close-icon-position</span>=<span class="string">"top-left"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:style</span>=<span class="string">"{ height: '100%' }"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">+  <span class="tag">&lt;<span class="name">channel-edit</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /é¢‘é“ç¼–è¾‘ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="é¡µé¢å¸ƒå±€-2"><a href="#é¡µé¢å¸ƒå±€-2" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"channel-edit"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æˆ‘çš„é¢‘é“"</span> <span class="attr">:border</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"danger"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">plain</span></span></span><br><span class="line"><span class="tag">      &gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid</span> <span class="attr">:gutter</span>=<span class="string">"10"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-grid-item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"channel-item"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">"value in 8"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:key</span>=<span class="string">"value"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">text</span>=<span class="string">"æ–‡å­—"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-grid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"é¢‘é“æ¨è"</span> <span class="attr">:border</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-grid</span> <span class="attr">:gutter</span>=<span class="string">"10"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-grid-item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"channel-item"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">"value in 8"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:key</span>=<span class="string">"value"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">text</span>=<span class="string">"æ–‡å­—"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-grid</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ChannelEdit'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.channel-edit</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.channel-item</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">86px</span>;</span></span><br><span class="line"><span class="css">    /deep/ <span class="selector-class">.van-grid-item__content</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">background-color</span>: <span class="number">#f5f5f6</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.van-grid-item__text</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">28px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å±•ç¤ºæˆ‘çš„é¢‘é“"><a href="#å±•ç¤ºæˆ‘çš„é¢‘é“" class="headerlink" title="å±•ç¤ºæˆ‘çš„é¢‘é“"></a>å±•ç¤ºæˆ‘çš„é¢‘é“</h2><p>1ã€åœ¨çˆ¶ç»„ä»¶ä¸­æŠŠ <code>channels</code> ä¼ é€’ç»™é¢‘é“ç¼–è¾‘ç»„ä»¶</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316002816033.png" alt="image-20200316002816033" style="zoom:50%;">



<p>2ã€åœ¨é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­å£°æ˜æ¥æ”¶çˆ¶ç»„ä»¶çš„ <code>userChannels</code> é¢‘é“åˆ—è¡¨æ•°æ®å¹¶éå†å±•ç¤º</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316002911027.png" alt="image-20200316002911027" style="zoom:50%;">

<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316002958971.png" alt="image-20200316002958971" style="zoom:50%;">

<h2 id="å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨"><a href="#å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨" class="headerlink" title="å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨"></a>å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨</h2><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1571040968593.png" alt="1571040968593" style="zoom:50%;">

<p>æ²¡æœ‰ç”¨æ¥è·å–æ¨èé¢‘é“çš„æ•°æ®æ¥å£ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰è·å–æ‰€æœ‰é¢‘é“åˆ—è¡¨çš„æ•°æ®æ¥å£ã€‚</p>
<p>æ‰€ä»¥ï¼š<code>æ‰€æœ‰é¢‘é“åˆ—è¡¨ - æˆ‘çš„é¢‘é“ = å‰©ä½™æ¨èçš„é¢‘é“</code>ã€‚</p>
<p>å®ç°è¿‡ç¨‹æ‰€ä»¥ä¸€å…±åˆ†ä¸ºä¸¤å¤§æ­¥ï¼š</p>
<ul>
<li>è·å–æ‰€æœ‰é¢‘é“</li>
<li>åŸºäºæ‰€æœ‰é¢‘é“å’Œæˆ‘çš„é¢‘é“è®¡ç®—è·å–å‰©ä½™çš„æ¨èé¢‘é“</li>
</ul>
<h3 id="è·å–æ‰€æœ‰é¢‘é“"><a href="#è·å–æ‰€æœ‰é¢‘é“" class="headerlink" title="è·å–æ‰€æœ‰é¢‘é“"></a>è·å–æ‰€æœ‰é¢‘é“</h3><p>1ã€å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ‰€æœ‰é¢‘é“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getAllChannels = <span class="function">() =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/channels'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç¼–è¾‘é¢‘é“ç»„ä»¶ä¸­è¯·æ±‚è·å–æ‰€æœ‰é¢‘é“æ•°æ®</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316021948407.png" alt="image-20200316021948407" style="zoom:50%;">

<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316022017473.png" alt="image-20200316022017473" style="zoom:50%;">

<p>3ã€åœ¨è°ƒè¯•å·¥å…·ä¸­æµ‹è¯•æ˜¯å¦æœ‰æ‹¿åˆ°æ•°æ®</p>
<h3 id="å¤„ç†å±•ç¤ºæ¨èé¢‘é“"><a href="#å¤„ç†å±•ç¤ºæ¨èé¢‘é“" class="headerlink" title="å¤„ç†å±•ç¤ºæ¨èé¢‘é“"></a>å¤„ç†å±•ç¤ºæ¨èé¢‘é“</h3><p>æ€è·¯ï¼š<code>æ‰€æœ‰é¢‘é“ - ç”¨æˆ·é¢‘é“ = æ¨èé¢‘é“</code></p>
<p>1ã€å°è£…è®¡ç®—å±æ€§ç­›é€‰æ•°æ®</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316022123370.png" alt="image-20200316022123370" style="zoom:50%;">

<ul>
<li>éå†æ‰€æœ‰é¢‘é“</li>
<li>å¯¹æ¯ä¸€ä¸ªé¢‘é“éƒ½åˆ¤æ–­ï¼šè¯¥é¢‘é“æ˜¯å¦å±äºæˆ‘çš„é¢‘é“</li>
<li>å¦‚æœä¸å±äºæˆ‘çš„é¢‘é“ï¼Œåˆ™æ”¶é›†èµ·æ¥</li>
<li>ç›´åˆ°éå†ç»“æŸï¼Œå‰©ä¸‹æ¥å°±æ˜¯é‚£äº›å‰©ä½™çš„æ¨èé¢‘é“</li>
</ul>
<p>2ã€æ¨¡æ¿ç»‘å®š</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316022153646.png" alt="image-20200316022153646" style="zoom:50%;">



<h2 id="æ·»åŠ é¢‘é“"><a href="#æ·»åŠ é¢‘é“" class="headerlink" title="æ·»åŠ é¢‘é“"></a>æ·»åŠ é¢‘é“</h2><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/é¢‘é“ç®¡ç†-æ·»åŠ é¢‘é“.gif" alt="é¢‘é“ç®¡ç†-æ·»åŠ é¢‘é“" width="250">

<p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™æ¨èé¢‘é“åˆ—è¡¨ä¸­æ¯ä¸€é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>è·å–ç‚¹å‡»çš„é¢‘é“é¡¹</li>
<li>å°†é¢‘é“é¡¹æ·»åŠ åˆ°æˆ‘çš„é¢‘é“ä¸­</li>
<li><del>å°†å½“å‰ç‚¹å‡»çš„é¢‘é“é¡¹ä»æ¨èé¢‘é“ä¸­ç§»é™¤</del><ul>
<li>ä¸éœ€è¦åˆ é™¤ï¼Œå› ä¸ºæˆ‘ä»¬è·å–æ•°æ®ä½¿ç”¨çš„æ˜¯è®¡ç®—å±æ€§ï¼Œå½“æˆ‘é¢‘é“å‘ç”Ÿæ”¹å˜ï¼Œè®¡ç®—å±æ€§é‡æ–°æ±‚å€¼äº†</li>
</ul>
</li>
</ul>
<p>1ã€ç»™æ¨èé¢‘é“ä¸­çš„é¢‘é“æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316030501261.png" alt="image-20200316030501261" style="zoom:50%;">

<p>2ã€åœ¨æ·»åŠ é¢‘é“äº‹ä»¶å¤„ç†å‡½æ•°ä¸­</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316030518012.png" alt="image-20200316030518012" style="zoom:50%;">

<p>ç„¶åä½ ä¼šç¥å¥‡çš„å‘ç°ç‚¹å‡»çš„é‚£ä¸ªæ¨èé¢‘é“è·‘åˆ°æˆ‘çš„é¢‘é“ä¸­äº†ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å»æ‰‹åŠ¨çš„åˆ é™¤ç‚¹å‡»çš„è¿™ä¸ªæ¨èé¢‘é“ï¼Œä½†æ˜¯å®ƒæ²¡äº†ï¼ä¸»è¦æ˜¯å› ä¸ºæ¨èé¢‘é“æ˜¯é€šè¿‡ä¸€ä¸ªè®¡ç®—å±æ€§è·å–çš„ï¼Œè®¡ç®—å±æ€§ä¸­ä½¿ç”¨äº† channelsï¼ˆæˆ‘çš„é¢‘é“ï¼‰æ•°æ®ï¼Œæ‰€ä»¥åªè¦æˆ‘çš„é¢‘é“ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆè®¡ç®—å±æ€§å°±ä¼šé‡æ–°è¿ç®—è·å–æœ€æ–°çš„æ•°æ®ã€‚</p>
<h2 id="ç¼–è¾‘é¢‘é“"><a href="#ç¼–è¾‘é¢‘é“" class="headerlink" title="ç¼–è¾‘é¢‘é“"></a>ç¼–è¾‘é¢‘é“</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™æˆ‘çš„é¢‘é“ä¸­çš„é¢‘é“é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­<ul>
<li>å¦‚æœæ˜¯ç¼–è¾‘çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œåˆ é™¤é¢‘é“æ“ä½œ</li>
<li>å¦‚æœæ˜¯éç¼–è¾‘çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œåˆ‡æ¢é¢‘é“æ“ä½œ</li>
</ul>
</li>
</ul>
<h3 id="å¤„ç†ç¼–è¾‘çŠ¶æ€"><a href="#å¤„ç†ç¼–è¾‘çŠ¶æ€" class="headerlink" title="å¤„ç†ç¼–è¾‘çŠ¶æ€"></a>å¤„ç†ç¼–è¾‘çŠ¶æ€</h3><p>1ã€åœ¨ data ä¸­æ·»åŠ æ•°æ®ç”¨æ¥æ§åˆ¶ç¼–è¾‘çŠ¶æ€çš„æ˜¾ç¤º</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316033317098.png" alt="image-20200316033317098" style="zoom:50%;">

<p>2ã€åœ¨æˆ‘çš„é¢‘é“é¡¹ä¸­æ·»åŠ åˆ é™¤å›¾æ ‡</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316033121847.png" alt="image-20200316033121847" style="zoom:50%;">

<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316033200148.png" alt="image-20200316033200148" style="zoom:50%;">

<p>3ã€å¤„ç†ç‚¹å‡»ç¼–è¾‘æŒ‰é’®</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316033239687.png" alt="image-20200316033239687" style="zoom:50%;">





<h3 id="åˆ‡æ¢é¢‘é“"><a href="#åˆ‡æ¢é¢‘é“" class="headerlink" title="åˆ‡æ¢é¢‘é“"></a>åˆ‡æ¢é¢‘é“</h3><p>åŠŸèƒ½éœ€æ±‚ï¼šåœ¨éç¼–è¾‘å™¨çŠ¶æ€ä¸‹åˆ‡æ¢é¢‘é“ã€‚</p>
<p>1ã€ç»™æˆ‘çš„é¢‘é“é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316040309812.png" alt="image-20200316040309812" style="zoom:50%;">

<p>2ã€å¤„ç†å‡½æ•°</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316040344551.png" alt="image-20200316040344551" style="zoom:50%;">

<p>3ã€åœ¨çˆ¶ç»„ä»¶ä¸­ç›‘å¬å¤„ç†è‡ªå®šä¹‰äº‹ä»¶</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316040428331.png" alt="image-20200316040428331" style="zoom:50%;">

<h3 id="è®©æ¿€æ´»é¢‘é“é«˜äº®"><a href="#è®©æ¿€æ´»é¢‘é“é«˜äº®" class="headerlink" title="è®©æ¿€æ´»é¢‘é“é«˜äº®"></a>è®©æ¿€æ´»é¢‘é“é«˜äº®</h3><p>æ€è·¯ï¼š</p>
<ul>
<li>å°†é¦–é¡µä¸­çš„æ¿€æ´»çš„æ ‡ç­¾ç´¢å¼•ä¼ é€’ç»™é¢‘é“ç¼–è¾‘ç»„ä»¶</li>
<li>åœ¨é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­éå†æˆ‘çš„é¢‘é“åˆ—è¡¨çš„æ—¶å€™åˆ¤æ–­éå†é¡¹çš„ç´¢å¼•æ˜¯å¦ç­‰äºæ¿€æ´»çš„é¢‘é“æ ‡ç­¾ç´¢å¼•ï¼Œå¦‚æœä¸€æ ·åˆ™ä½œç”¨ä¸€ä¸ªé«˜äº®çš„ CSS ç±»å</li>
</ul>
<p>1ã€å°†é¦–é¡µç»„ä»¶ä¸­çš„ <code>active</code> ä¼ é€’åˆ°é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316004637299.png" alt="image-20200316004637299" style="zoom:50%;">

<p>2ã€åœ¨é¢‘é“ç¼–è¾‘ç»„ä»¶ä¸­å£°æ˜ props æ¥æ”¶</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316004657340.png" alt="image-20200316004657340" style="zoom:50%;">

<p>3ã€åˆ¤æ–­éå†é¡¹ï¼Œå¦‚æœ <code>éå†é¡¹ç´¢å¼• === active</code>ï¼Œåˆ™ç»™è¿™ä¸ªé¢‘é“é¡¹è®¾ç½®é«˜äº®æ ·å¼</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316004830847.png" alt="image-20200316004830847" style="zoom:50%;">

<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316004847629.png" alt="image-20200316004847629" style="zoom:50%;">

<h3 id="åˆ é™¤é¢‘é“"><a href="#åˆ é™¤é¢‘é“" class="headerlink" title="åˆ é™¤é¢‘é“"></a>åˆ é™¤é¢‘é“</h3><p>åŠŸèƒ½éœ€æ±‚ï¼šåœ¨ç¼–è¾‘çŠ¶æ€ä¸‹åˆ é™¤é¢‘é“ã€‚</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316042008623.png" alt="image-20200316042008623" style="zoom:50%;">

<h2 id="é¢‘é“æ•°æ®æŒä¹…åŒ–"><a href="#é¢‘é“æ•°æ®æŒä¹…åŒ–" class="headerlink" title="é¢‘é“æ•°æ®æŒä¹…åŒ–"></a>é¢‘é“æ•°æ®æŒä¹…åŒ–</h2><h3 id="ä¸šåŠ¡åˆ†æ"><a href="#ä¸šåŠ¡åˆ†æ" class="headerlink" title="ä¸šåŠ¡åˆ†æ"></a>ä¸šåŠ¡åˆ†æ</h3><p>é¢‘é“ç¼–è¾‘è¿™ä¸ªåŠŸèƒ½ï¼Œæ— è®ºç”¨æˆ·æ˜¯å¦ç™»å½•ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>ä¸ç™»å½•ä¹Ÿèƒ½ä½¿ç”¨</p>
<ul>
<li>æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°</li>
<li>ä¸æ”¯æŒåŒæ­¥åŠŸèƒ½</li>
</ul>
<p>ç™»å½•ä¹Ÿèƒ½ä½¿ç”¨</p>
<ul>
<li>æ•°æ®å­˜å‚¨åœ¨çº¿ä¸Šåå°æœåŠ¡å™¨</li>
<li>æ›´æ¢ä¸åŒçš„è®¾å¤‡å¯ä»¥åŒæ­¥æ•°æ®</li>
</ul>
<h3 id="æ·»åŠ é¢‘é“-1"><a href="#æ·»åŠ é¢‘é“-1" class="headerlink" title="æ·»åŠ é¢‘é“"></a>æ·»åŠ é¢‘é“</h3><p>æ€è·¯ï¼š</p>
<ul>
<li>å¦‚æœæœªç™»å½•ï¼Œåˆ™å­˜å‚¨åˆ°æœ¬åœ°</li>
<li>å¦‚æœå·²ç™»å½•ï¼Œåˆ™å­˜å‚¨åˆ°çº¿ä¸Š<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è°ƒç”¨</li>
</ul>
</li>
</ul>
<p>1ã€å°è£…æ·»åŠ é¢‘é“çš„è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ç”¨æˆ·é¢‘é“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addUserChannel = <span class="function"><span class="params">channels</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'PATCH'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/channels'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      channels</span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ä¿®æ”¹æ·»åŠ é¢‘é“çš„å¤„ç†é€»è¾‘</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onAddChannel (channel) {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="built_in">this</span>.userChannels.push(channel)</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.user) {</span><br><span class="line">      <span class="comment">// å·²ç™»å½•ï¼Œæ•°æ®å­˜å‚¨åˆ°çº¿ä¸Š</span></span><br><span class="line">      <span class="keyword">await</span> addUserChannel([{</span><br><span class="line">        <span class="attr">id</span>: channel.id, <span class="comment">// é¢‘é“ id</span></span><br><span class="line">        <span class="attr">seq</span>: <span class="built_in">this</span>.userChannels.length <span class="comment">// é¢‘é“çš„ åºå·</span></span><br><span class="line">      }])</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æœªç™»å½•ï¼Œæ•°æ®å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">      setItem(<span class="string">'channels'</span>, <span class="built_in">this</span>.userChannels)</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'æ·»åŠ é¢‘é“å¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>



<h3 id="åˆ é™¤é¢‘é“-1"><a href="#åˆ é™¤é¢‘é“-1" class="headerlink" title="åˆ é™¤é¢‘é“"></a>åˆ é™¤é¢‘é“</h3><p>æ€è·¯ï¼š</p>
<ul>
<li>å¦‚æœæœªç™»å½•ï¼Œåˆ™å­˜å‚¨åˆ°æœ¬åœ°</li>
<li>å¦‚æœå·²ç™»å½•ï¼Œåˆ™å­˜å‚¨åˆ°çº¿ä¸Š<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è°ƒç”¨</li>
</ul>
</li>
</ul>
<p>1ã€å°è£…åˆ é™¤ç”¨æˆ·é¢‘é“è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤ç”¨æˆ·é¢‘é“</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteUserChannel = <span class="function"><span class="params">channelId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/user/channels/<span class="subst">${channelId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ä¿®æ”¹åˆ é™¤é¢‘é“çš„å¤„ç†é€»è¾‘</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200316051028617.png" alt="image-20200316051028617" style="zoom:50%;">

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> deleteChannel (channel) {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.user) {</span><br><span class="line">      <span class="comment">// å·²ç™»å½•ï¼Œå°†æ•°æ®å­˜å‚¨åˆ°çº¿ä¸Š</span></span><br><span class="line">      <span class="keyword">await</span> deleteUserChannel(channel.id)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æœªç™»å½•ï¼Œå°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">      setItem(<span class="string">'channles'</span>, <span class="built_in">this</span>.userChannels)</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'åˆ é™¤é¢‘é“å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®"><a href="#æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®" class="headerlink" title="æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®"></a>æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®</h2><p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/%E9%A6%96%E9%A1%B5-%E8%8E%B7%E5%8F%96%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8.png" alt="é¦–é¡µ-è·å–é¢‘é“åˆ—è¡¨"></p>
<blockquote>
<p>æç¤ºï¼šè·å–ç™»å½•ç”¨æˆ·çš„é¢‘é“åˆ—è¡¨å’Œè·å–é»˜è®¤æ¨èçš„é¢‘é“åˆ—è¡¨æ˜¯åŒä¸€ä¸ªæ•°æ®æ¥å£ã€‚åç«¯ä¼šæ ¹æ®æ¥å£ä¸­çš„ token æ¥åˆ¤å®šè¿”å›æ•°æ®ã€‚</p>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> loadChannels () {</span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="keyword">let</span> channels = []</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.user) {</span><br><span class="line">      <span class="comment">// å·²ç™»å½•ï¼Œè¯·æ±‚è·å–çº¿ä¸Šçš„é¢‘é“æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> { data } = <span class="keyword">await</span> getChannels()</span><br><span class="line">      channels = data.data.channels</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æœªç™»å½•</span></span><br><span class="line">      <span class="keyword">const</span> localChannels = getItem(<span class="string">'channels'</span>)</span><br><span class="line">      <span class="keyword">if</span> (localChannels) {</span><br><span class="line">        <span class="comment">// æœ‰æœ¬åœ°é¢‘é“æ•°æ®ï¼Œåˆ™ä½¿ç”¨</span></span><br><span class="line">        channels = localChannels</span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="comment">// æ²¡æœ‰æœ¬åœ°é¢‘é“æ•°æ®ï¼Œåˆ™è¯·æ±‚è·å–é»˜è®¤æ¨èçš„é¢‘é“åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getChannels()</span><br><span class="line">        channels = data.data.channels</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æ•°æ®æ›´æ–°åˆ°ç»„ä»¶ä¸­</span></span><br><span class="line">    <span class="built_in">this</span>.channels = channels</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast(<span class="string">'æ•°æ®è·å–å¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>
<h1 id="å…­ã€æ–‡ç« æœç´¢"><a href="#å…­ã€æ–‡ç« æœç´¢" class="headerlink" title="å…­ã€æ–‡ç« æœç´¢"></a>å…­ã€æ–‡ç« æœç´¢</h1><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566431801892.png" width="250">



<h2 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-1"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-1" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h2><p>1ã€åˆ›å»º <code>src/views/search/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-container"</span>&gt;</span>æœç´¢é¡µé¢<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">"SearchPage"</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> {};</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> {},</span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">  };</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶åæŠŠæœç´¢é¡µé¢çš„è·¯ç”±é…ç½®åˆ°æ ¹ç»„ä»¶è·¯ç”±ï¼ˆä¸€çº§è·¯ç”±ï¼‰</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/search'</span>,</span><br><span class="line">  <span class="attr">omponent</span>: Search</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åè®¿é—® <code>/search</code> æµ‹è¯•ã€‚</p>
<h2 id="é¡µé¢å¸ƒå±€-3"><a href="#é¡µé¢å¸ƒå±€-3" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><p>1ã€åˆ›å»º <code>src/views/search/components/search-history.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-history"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æœç´¢å†å²"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>å…¨éƒ¨åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>å®Œæˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"delete"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"hello"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'SearchHistory'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åˆ›å»º <code>src/views/search/components/search-suggestion.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-suggestion"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç¨‹åºå‘˜..."</span> <span class="attr">icon</span>=<span class="string">"search"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'SearchSuggestion'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>3ã€åˆ›å»º <code>src/views/search/components/search-result.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-result"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> <span class="attr">:key</span>=<span class="string">"item"</span> <span class="attr">:title</span>=<span class="string">"item"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'SearchResult'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">list</span>: [],</span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">finished</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    onLoad () {</span></span><br><span class="line"><span class="javascript">      <span class="comment">// å¼‚æ­¥æ›´æ–°æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="comment">// setTimeout ä»…åšç¤ºä¾‹ï¼ŒçœŸå®åœºæ™¯ä¸­ä¸€èˆ¬ä¸º ajax è¯·æ±‚</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.list.push(<span class="built_in">this</span>.list.length + <span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// åŠ è½½çŠ¶æ€ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">// æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="built_in">this</span>.list.length &gt;= <span class="number">40</span>) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.finished = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      }, <span class="number">1000</span>)</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>4ã€æœç´¢ç»„ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœç´¢æ  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      Tips: åœ¨ van-search å¤–å±‚å¢åŠ  form æ ‡ç­¾ï¼Œä¸” action ä¸ä¸ºç©ºï¼Œå³å¯åœ¨ iOS è¾“å…¥æ³•ä¸­æ˜¾ç¤ºæœç´¢æŒ‰é’®</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-search</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-model</span>=<span class="string">"searchText"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">show-action</span></span></span><br><span class="line"><span class="tag">        <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥æœç´¢å…³é”®è¯"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">background</span>=<span class="string">"#3296fa"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">search</span>=<span class="string">"onSearch"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">cancel</span>=<span class="string">"onCancel"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /æœç´¢æ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æœç´¢å†å²è®°å½• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">search-history</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /æœç´¢å†å²è®°å½• --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">search-suggestion</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å†å²è®°å½• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">search-result</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å†å²è®°å½• --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> SearchHistory <span class="keyword">from</span> <span class="string">'./components/search-history'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> SearchSuggestion <span class="keyword">from</span> <span class="string">'./components/search-suggestion'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> SearchResult <span class="keyword">from</span> <span class="string">'./components/search-result'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'SearchIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {</span></span><br><span class="line"><span class="javascript">    SearchHistory,</span></span><br><span class="line"><span class="javascript">    SearchSuggestion,</span></span><br><span class="line"><span class="javascript">    SearchResult</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">searchText</span>: <span class="string">''</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    onSearch (val) {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(val)</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript">    onCancel () {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$router.back()</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.search-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-search__action</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€"><a href="#å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€" class="headerlink" title="å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€"></a>å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€</h2><p>1ã€åœ¨ <code>data</code> ä¸­æ·»åŠ æ•°æ®ç”¨æ¥æ§åˆ¶æœç´¢ç»“æœçš„æ˜¾ç¤ºçŠ¶æ€</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">isResultShow</span>: <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨æ¨¡æ¿ä¸­ç»‘å®šæ¡ä»¶æ¸²æŸ“</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœç´¢ç»“æœ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">search-result</span> <span class="attr">v-if</span>=<span class="string">"isResultShow"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æœç´¢ç»“æœ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">search-suggestion</span> <span class="attr">v-else-if</span>=<span class="string">"searchText"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æœç´¢å†å²è®°å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">search-history</span> <span class="attr">v-else</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æœç´¢å†å²è®°å½• --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h2 id="æœç´¢è”æƒ³å»ºè®®"><a href="#æœç´¢è”æƒ³å»ºè®®" class="headerlink" title="æœç´¢è”æƒ³å»ºè®®"></a>æœç´¢è”æƒ³å»ºè®®</h2><p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>å½“æœç´¢æ¡†è¾“å…¥å†…å®¹çš„æ—¶å€™ï¼Œè¯·æ±‚åŠ è½½è”æƒ³å»ºè®®çš„æ•°æ®</li>
<li>å°†è¯·æ±‚å¾—åˆ°çš„ç»“æœç»‘å®šåˆ°æ¨¡æ¿ä¸­</li>
</ul>
<h3 id="åŸºæœ¬åŠŸèƒ½"><a href="#åŸºæœ¬åŠŸèƒ½" class="headerlink" title="åŸºæœ¬åŠŸèƒ½"></a>åŸºæœ¬åŠŸèƒ½</h3><p>ä¸€ã€å°†çˆ¶ç»„ä»¶ä¸­æœç´¢æ¡†è¾“å…¥çš„å†…å®¹ä¼ ç»™è”æƒ³å»ºè®®å­ç»„ä»¶</p>
<p>äºŒã€åœ¨å­ç»„ä»¶ä¸­ç›‘è§†æœç´¢æ¡†è¾“å…¥å†…å®¹çš„å˜åŒ–ï¼Œå¦‚æœå˜åŒ–åˆ™è¯·æ±‚è·å–è”æƒ³å»ºè®®æ•°æ®</p>
<p>ä¸‰ã€å°†è·å–åˆ°çš„è”æƒ³å»ºè®®æ•°æ®å±•ç¤ºåˆ°åˆ—è¡¨ä¸­</p>
<h3 id="é˜²æŠ–ä¼˜åŒ–"><a href="#é˜²æŠ–ä¼˜åŒ–" class="headerlink" title="é˜²æŠ–ä¼˜åŒ–"></a>é˜²æŠ–ä¼˜åŒ–</h3><p>1ã€å®‰è£… lodash</p>
<figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yarn add lodash</span></span><br><span class="line">npm i lodash</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€é˜²æŠ–å¤„ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lodash æ”¯æŒæŒ‰éœ€åŠ è½½ï¼Œæœ‰åˆ©äºæ‰“åŒ…ç»“æœä¼˜åŒ–</span></span><br><span class="line"><span class="keyword">import</span> { debounce } <span class="keyword">from</span> <span class="string">"lodash"</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸å»ºè®®ä¸‹é¢è¿™æ ·ä½¿ç”¨ï¼Œå› ä¸ºè¿™æ ·ä¼šåŠ è½½æ•´ä¸ªæ¨¡å—ã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> _ <span class="keyword">from</span> <span class="string">'lodash'</span></span><br><span class="line">_.debounce()</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// debounce å‡½æ•°</span></span><br><span class="line"><span class="comment">// å‚æ•°1ï¼šå‡½æ•°</span></span><br><span class="line"><span class="comment">// å‚æ•°2ï¼šé˜²æŠ–æ—¶é—´</span></span><br><span class="line"><span class="comment">// è¿”å›å€¼ï¼šé˜²æŠ–ä¹‹åçš„å‡½æ•°ï¼Œå’Œå‚æ•°1åŠŸèƒ½æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="attr">onSearchInput</span>: debounce(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{</span><br><span class="line">  <span class="keyword">const</span> searchContent = <span class="built_in">this</span>.searchContent</span><br><span class="line">  <span class="keyword">if</span> (!searchContent) {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> { data } = <span class="keyword">await</span> getSuggestions(searchContent)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å°†æ•°æ®æ·»åŠ åˆ°ç»„ä»¶å®ä¾‹ä¸­</span></span><br><span class="line">  <span class="built_in">this</span>.suggestions = data.data.options</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. æ¨¡æ¿ç»‘å®š</span></span><br><span class="line">}, <span class="number">200</span>),</span><br></pre></td></tr></tbody></table></figure>





<h3 id="æœç´¢å…³é”®å­—é«˜äº®"><a href="#æœç´¢å…³é”®å­—é«˜äº®" class="headerlink" title="æœç´¢å…³é”®å­—é«˜äº®"></a>æœç´¢å…³é”®å­—é«˜äº®</h3><p>å¦‚ä½•å°†å­—ç¬¦ä¸²ä¸­çš„æŒ‡å®šå­—ç¬¦åœ¨<strong>ç½‘é¡µ</strong>ä¸­é«˜äº®å±•ç¤ºï¼Ÿ</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Hello World"</span>;</span><br></pre></td></tr></tbody></table></figure>

<p>å°†éœ€è¦é«˜äº®çš„å­—ç¬¦åŒ…è£¹ HTML æ ‡ç­¾ï¼Œä¸ºå…¶å•ç‹¬è®¾ç½®é¢œè‰²ã€‚</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"Hello &lt;span style="</span>color: red<span class="string">"&gt;World&lt;/span&gt;"</span></span><br></pre></td></tr></tbody></table></figure>

<p>åœ¨ Vue ä¸­å¦‚ä½•æ¸²æŸ“å¸¦æœ‰ HTML æ ‡ç­¾çš„å­—ç¬¦ä¸²ï¼Ÿ</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    <span class="attr">htmlStr</span>: <span class="string">'Hello &lt;span style="color: red"&gt;World&lt;/span&gt;'</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>{{ htmlStr }}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">"htmlStr"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200112154732044.png" alt="image-20200112154732044"></p>
<p>å¦‚ä½•æŠŠå­—ç¬¦ä¸²ä¸­æŒ‡å®šå­—ç¬¦ç»Ÿä¸€æ›¿æ¢ä¸ºé«˜äº®ï¼ˆåŒ…è£¹äº† HTMLï¼‰çš„å­—ç¬¦ï¼Ÿ</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">"Hello World"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“æœï¼š&lt;span style="color: red"&gt;Hello&lt;/span&gt; World</span></span><br><span class="line"><span class="string">"Hello World"</span>.replace(<span class="string">'Hello'</span>, <span class="string">'&lt;span style="color: red"&gt;Hello&lt;/span&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œreplace æ–¹æ³•çš„å­—ç¬¦ä¸²åŒ¹é…åªèƒ½æ›¿æ¢ç¬¬1ä¸ªæ»¡è¶³çš„å­—ç¬¦</span></span><br><span class="line"><span class="comment">// &lt;span style="color: red"&gt;Hello&lt;/span&gt; World Hello abc</span></span><br><span class="line"><span class="string">"Hello World Hello abc"</span>.replace(<span class="string">'Hello'</span>, <span class="string">'&lt;span style="color: red"&gt;Hello&lt;/span&gt;'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæƒ³è¦å…¨æ–‡æ›¿æ¢ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">// g å…¨å±€</span></span><br><span class="line"><span class="comment">// i å¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="comment">// &lt;span style="color: red"&gt;Hello&lt;/span&gt; World &lt;span style="color: red"&gt;Hello&lt;/span&gt; abc</span></span><br><span class="line"><span class="string">"Hello World Hello abc"</span>.replace(<span class="regexp">/Hello/gi</span>, <span class="string">'&lt;span style="color: red"&gt;Hello&lt;/span&gt;'</span>)</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>ä¸€ä¸ªå°æ‰©å±•ï¼šä½¿ç”¨å­—ç¬¦ä¸²çš„ split ç»“åˆæ•°ç»„çš„ join æ–¹æ³•å®ç°é«˜äº®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"hello world ä½ å¥½ hello"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ["", " world ä½ å¥½ ", ""]</span></span><br><span class="line"><span class="keyword">const</span> arr = str.split(<span class="string">"hello"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// "&lt;span&gt;hello&lt;/span&gt; world ä½ å¥½ &lt;span&gt;hello&lt;/span&gt;"</span></span><br><span class="line">arr.join(<span class="string">"&lt;span&gt;hello&lt;/span&gt;"</span>);</span><br></pre></td></tr></tbody></table></figure>
</blockquote>
<p>ä¸‹é¢æ˜¯å…·ä½“çš„å¤„ç†ã€‚</p>
<p>1ã€åœ¨ methods ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•å¤„ç†é«˜äº®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‚æ•° source: åŸå§‹å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">// å‚æ•° keyword: éœ€è¦é«˜äº®çš„å…³é”®è¯</span></span><br><span class="line"><span class="comment">// è¿”å›å€¼ï¼šæ›¿æ¢ä¹‹åçš„é«˜äº®å­—ç¬¦ä¸²</span></span><br><span class="line">highlight (source, keyword) {</span><br><span class="line">  <span class="comment">// /searchContent/ æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ä¸€åˆ‡å†…å®¹éƒ½ä¼šå½“åšå­—ç¬¦ä¸²ä½¿ç”¨</span></span><br><span class="line">  <span class="comment">// è¿™é‡Œå¯ä»¥ new RegExp æ–¹å¼æ ¹æ®å­—ç¬¦ä¸²åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">  <span class="comment">// RegExp æ˜¯åŸç”Ÿ JavaScript çš„å†…ç½®æ„é€ å‡½æ•°</span></span><br><span class="line">  <span class="comment">// å‚æ•°1ï¼šå­—ç¬¦ä¸²ï¼Œæ³¨æ„ï¼Œè¿™é‡Œä¸è¦åŠ  //</span></span><br><span class="line">  <span class="comment">// å‚æ•°2ï¼šåŒ¹é…æ¨¡å¼ï¼Œg å…¨å±€ï¼Œi å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">  <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(keyword, <span class="string">'gi'</span>)</span><br><span class="line">  <span class="keyword">return</span> source.replace(reg, <span class="string">`&lt;span style="color: #3296fa"&gt;<span class="subst">${keyword}</span>&lt;/span&gt;`</span>)</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶ååœ¨è”æƒ³å»ºè®®åˆ—è¡¨é¡¹ä¸­ç»‘å®šè°ƒç”¨</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è”æƒ³å»ºè®® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-else-if</span>=<span class="string">"searchContent"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">icon</span>=<span class="string">"search"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(item, index) in suggestions"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">"onSearch(item)"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">v-html</span>=<span class="string">"highlight(item, searchContent)"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /è”æƒ³å»ºè®® --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="æœç´¢ç»“æœ"><a href="#æœç´¢ç»“æœ" class="headerlink" title="æœç´¢ç»“æœ"></a>æœç´¢ç»“æœ</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>å°†æ•°æ®å±•ç¤ºåˆ°æ¨¡æ¿ä¸­</li>
</ul>
<p>ä¸€ã€è·å–æœç´¢å…³é”®å­—</p>
<p>1ã€å£°æ˜æ¥æ”¶çˆ¶ç»„ä»¶ä¸­çš„æœç´¢æ¡†è¾“å…¥çš„å†…å®¹</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">props: {</span><br><span class="line">  <span class="attr">q</span>: {</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">    <span class="attr">require</span>: <span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>



<p>2ã€åœ¨çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’æ•°æ®</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœç´¢ç»“æœ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">search-result</span> <span class="attr">v-if</span>=<span class="string">"isResultShow"</span> <span class="attr">:q</span>=<span class="string">"searchText"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æœç´¢ç»“æœ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<p>æœ€ååœ¨è°ƒè¯•å·¥å…·ä¸­æŸ¥çœ‹ç¡®è®¤æ˜¯å¦æ¥æ”¶åˆ° props æ•°æ®ã€‚</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200112162223915.png" alt="image-20200112162223915"></p>
<p>äºŒã€è¯·æ±‚è·å–æ•°æ®</p>
<p>1ã€åœ¨ <code>api/serach.js</code> æ·»åŠ å°è£…è·å–æœç´¢ç»“æœçš„è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æœç´¢ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getSearch</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"GET"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/app/v1_0/search"</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€è¯·æ±‚è·å–</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">+ <span class="keyword">import</span> { getSearch } <span class="keyword">from</span> <span class="string">'@/api/search'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'SearchResult'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {</span><br><span class="line">    <span class="attr">q</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">require</span>: <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">list</span>: [],</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">finished</span>: <span class="literal">false</span>,</span><br><span class="line">+      page: <span class="number">1</span>,</span><br><span class="line">+      perPage: <span class="number">20</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">  created () {},</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">+++    <span class="keyword">async</span> onLoad () {</span><br><span class="line">      <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> { data } = <span class="keyword">await</span> getSearch({</span><br><span class="line">        <span class="attr">page</span>: <span class="built_in">this</span>.page, <span class="comment">// é¡µç </span></span><br><span class="line">        <span class="attr">per_page</span>: <span class="built_in">this</span>.perPage, <span class="comment">// æ¯é¡µå¤§å°</span></span><br><span class="line">        <span class="attr">q</span>: <span class="built_in">this</span>.q <span class="comment">// æœç´¢å…³é”®å­—</span></span><br><span class="line">      })</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2. å°†æ•°æ®æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">      <span class="keyword">const</span> { results } = data.data</span><br><span class="line">      <span class="built_in">this</span>.list.push(...results)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 3. è®¾ç½®åŠ è½½çŠ¶æ€ç»“æŸ</span></span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•</span></span><br><span class="line">      <span class="keyword">if</span> (results.length) {</span><br><span class="line">        <span class="built_in">this</span>.page++ <span class="comment">// æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="built_in">this</span>.finished = <span class="literal">true</span> <span class="comment">// æ²¡æœ‰æ•°æ®äº†ï¼Œå°†åŠ è½½çŠ¶æ€è®¾ç½®ç»“æŸï¼Œä¸å† onLoad</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‰ã€æœ€åï¼Œæ¨¡æ¿ç»‘å®š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">+    <span class="attr">v-for</span>=<span class="string">"(article, index) in list"</span></span></span><br><span class="line"><span class="tag">+    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">+    <span class="attr">:title</span>=<span class="string">"article.title"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h2 id="æœç´¢å†å²è®°å½•"><a href="#æœç´¢å†å²è®°å½•" class="headerlink" title="æœç´¢å†å²è®°å½•"></a>æœç´¢å†å²è®°å½•</h2><h3 id="æ·»åŠ å†å²è®°å½•"><a href="#æ·»åŠ å†å²è®°å½•" class="headerlink" title="æ·»åŠ å†å²è®°å½•"></a>æ·»åŠ å†å²è®°å½•</h3><p>å½“å‘ç”Ÿæœç´¢çš„æ—¶å€™æˆ‘ä»¬æ‰éœ€è¦è®°å½•å†å²è®°å½•ã€‚</p>
<p>1ã€åœ¨ data ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥å­˜å‚¨å†å²è®°å½•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">searchHistories</span>: []</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è§¦å‘æœç´¢çš„æ—¶å€™ï¼Œè®°å½•å†å²è®°å½•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">onSearch (val) {</span><br><span class="line">  <span class="comment">// æ›´æ–°æ–‡æœ¬æ¡†å†…å®¹</span></span><br><span class="line">  <span class="built_in">this</span>.searchText = val</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å­˜å‚¨æœç´¢å†å²è®°å½•</span></span><br><span class="line">  <span class="comment">// è¦æ±‚ï¼šä¸è¦æœ‰é‡å¤å†å²è®°å½•ã€æœ€æ–°çš„æ’åœ¨æœ€å‰é¢</span></span><br><span class="line">  <span class="keyword">const</span> index = <span class="built_in">this</span>.searchHistories.indexOf(val)</span><br><span class="line">  <span class="keyword">if</span> (index !== -<span class="number">1</span>) {</span><br><span class="line">    <span class="built_in">this</span>.searchHistories.splice(index, <span class="number">1</span>)</span><br><span class="line">  }</span><br><span class="line">  <span class="built_in">this</span>.searchHistories.unshift(val)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸²æŸ“æœç´¢ç»“æœ</span></span><br><span class="line">  <span class="built_in">this</span>.isResultShow = <span class="literal">true</span></span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>



<h3 id="å±•ç¤ºå†å²è®°å½•"><a href="#å±•ç¤ºå†å²è®°å½•" class="headerlink" title="å±•ç¤ºå†å²è®°å½•"></a>å±•ç¤ºå†å²è®°å½•</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å†å²è®°å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å†å²è®°å½•"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"delete"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>å…¨éƒ¨åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>å®Œæˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">"item"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(item, index) in searchHistories"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"close"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å†å²è®°å½• --&gt;</span></span><br></pre></td></tr></tbody></table></figure>



<h3 id="åˆ é™¤å†å²è®°å½•"><a href="#åˆ é™¤å†å²è®°å½•" class="headerlink" title="åˆ é™¤å†å²è®°å½•"></a>åˆ é™¤å†å²è®°å½•</h3><p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>ç»™å†å²è®°å½•ä¸­çš„æ¯ä¸€é¡¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>åœ¨å¤„ç†å‡½æ•°ä¸­åˆ¤æ–­<ul>
<li>å¦‚æœæ˜¯åˆ é™¤çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œåˆ é™¤æ“ä½œ</li>
<li>å¦‚æœæ˜¯éåˆ é™¤çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œæœç´¢æ“ä½œ</li>
</ul>
</li>
</ul>
<p>ä¸€ã€å¤„ç†åˆ é™¤ç›¸å…³å…ƒç´ çš„å±•ç¤ºçŠ¶æ€</p>
<p>1ã€åœ¨ data ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥æ§åˆ¶åˆ é™¤ç›¸å…³å…ƒç´ çš„æ˜¾ç¤ºçŠ¶æ€</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isDeleteShow</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»‘å®šä½¿ç”¨</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å†å²è®°å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å†å²è®°å½•"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">"isDeleteShow"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"searchHistories = []"</span>&gt;</span>å…¨éƒ¨åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"isDeleteShow = false"</span>&gt;</span>å®Œæˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">v-else</span> <span class="attr">name</span>=<span class="string">"delete"</span> @<span class="attr">click</span>=<span class="string">"isDeleteShow = true"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">"item"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(item, index) in searchHistories"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click</span>=<span class="string">"onSearch(item)"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-show</span>=<span class="string">"isDeleteShow"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">name</span>=<span class="string">"close"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click</span>=<span class="string">"searchHistories.splice(index, 1)"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å†å²è®°å½• --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>äºŒã€å¤„ç†åˆ é™¤æ“ä½œ</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å†å²è®°å½• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å†å²è®°å½•"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">"isDeleteShow"</span>&gt;</span></span><br><span class="line">+      <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"searchHistories = []"</span>&gt;</span>å…¨éƒ¨åˆ é™¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> @<span class="attr">click</span>=<span class="string">"isDeleteShow = false"</span>&gt;</span>å®Œæˆ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">v-else</span> <span class="attr">name</span>=<span class="string">"delete"</span> @<span class="attr">click</span>=<span class="string">"isDeleteShow = true"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:title</span>=<span class="string">"item"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">v-for</span>=<span class="string">"(item, index) in searchHistories"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">+    @<span class="attr">click</span>=<span class="string">"onHistoryClick(item, index)"</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">v-show</span>=<span class="string">"isDeleteShow"</span> <span class="attr">name</span>=<span class="string">"close"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å†å²è®°å½• --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">onHistoryClick (item, index) {</span><br><span class="line">  <span class="comment">// å¦‚æœæ˜¯åˆ é™¤çŠ¶æ€ï¼Œåˆ™æ‰§è¡Œåˆ é™¤æ“ä½œ</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.isDeleteShow) {</span><br><span class="line">    <span class="built_in">this</span>.searchHistories.splice(index, <span class="number">1</span>)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// å¦åˆ™æ‰§è¡Œæœç´¢æ“ä½œ</span></span><br><span class="line">    <span class="built_in">this</span>.onSearch(item)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="æ•°æ®æŒä¹…åŒ–"><a href="#æ•°æ®æŒä¹…åŒ–" class="headerlink" title="æ•°æ®æŒä¹…åŒ–"></a>æ•°æ®æŒä¹…åŒ–</h3><p>1ã€åˆ©ç”¨ watch ç›‘è§†ç»Ÿä¸€å­˜å‚¨æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">watch: {</span><br><span class="line">  searchHistories (val) {</span><br><span class="line">    <span class="comment">// åŒæ­¥åˆ°æœ¬åœ°å­˜å‚¨</span></span><br><span class="line">    setItem(<span class="string">'serach-histories'</span>, val)</span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>



<p>2ã€åˆå§‹åŒ–çš„æ—¶å€™ä»æœ¬åœ°å­˜å‚¨è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">searchHistories</span>: getItem(<span class="string">'serach-histories'</span>) || [],</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h1 id="ä¸ƒã€æ–‡ç« è¯¦æƒ…"><a href="#ä¸ƒã€æ–‡ç« è¯¦æƒ…" class="headerlink" title="ä¸ƒã€æ–‡ç« è¯¦æƒ…"></a>ä¸ƒã€æ–‡ç« è¯¦æƒ…</h1><h2 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-2"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-2" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h2><p>1ã€åˆ›å»º <code>views/article/index.vue</code> ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-container"</span>&gt;</span>æ–‡ç« è¯¦æƒ…<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">articleId</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: [<span class="built_in">Number</span>, <span class="built_in">String</span>],</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶åå°†è¯¥é¡µé¢é…ç½®åˆ°æ ¹çº§è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/article/:articleId'</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'article'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/article'</span>),</span><br><span class="line">  <span class="comment">// å°†è·¯ç”±åŠ¨æ€å‚æ•°æ˜ å°„åˆ°ç»„ä»¶çš„ props ä¸­ï¼Œæ›´æ¨èè¿™ç§åšæ³•</span></span><br><span class="line">  <span class="attr">props</span>: <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p><a target="_blank" rel="noopener" href="https://router.vuejs.org/zh/guide/essentials/passing-props.html">å®˜æ–¹æ–‡æ¡£ï¼šè·¯ç”± props ä¼ å‚</a></p>
</blockquote>
<h2 id="é¡µé¢å¸ƒå±€-4"><a href="#é¡µé¢å¸ƒå±€-4" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><p>ä½¿ç”¨åˆ°çš„ Vant ä¸­çš„ç»„ä»¶ï¼š</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/nav-bar">NavBar å¯¼èˆªæ </a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/loading">Loading åŠ è½½</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/cell">Cell å•å…ƒæ ¼</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/button">Button æŒ‰é’®</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/image">Image å›¾ç‰‡</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/divider">Divider åˆ†å‰²çº¿</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/icon">Icon å›¾æ ‡</a></p>
</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"page-nav-bar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">left-arrow</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"é»‘é©¬å¤´æ¡"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main-wrap"</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- åŠ è½½ä¸­ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"loading-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-loading</span></span></span><br><span class="line"><span class="tag">          <span class="attr">color</span>=<span class="string">"#3296fa"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">vertical</span></span></span><br><span class="line"><span class="tag">        &gt;</span>åŠ è½½ä¸­<span class="tag">&lt;/<span class="name">van-loading</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- /åŠ è½½ä¸­ --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- åŠ è½½å®Œæˆ-æ–‡ç« è¯¦æƒ… --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-detail"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ–‡ç« æ ‡é¢˜ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"article-title"</span>&gt;</span>è¿™æ˜¯æ–‡ç« æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /æ–‡ç« æ ‡é¢˜ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">class</span>=<span class="string">"user-info"</span> <span class="attr">center</span> <span class="attr">:border</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">round</span></span></span><br><span class="line"><span class="tag">            <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">          /&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"user-name"</span>&gt;</span>é»‘é©¬å¤´æ¡å·<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span> <span class="attr">class</span>=<span class="string">"publish-date"</span>&gt;</span>14å°æ—¶å‰<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">"follow-btn"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">"info"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">color</span>=<span class="string">"#3296fa"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">round</span></span></span><br><span class="line"><span class="tag">            <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">icon</span>=<span class="string">"plus"</span></span></span><br><span class="line"><span class="tag">          &gt;</span>å…³æ³¨<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!-- &lt;van-button</span></span><br><span class="line"><span class="comment">            class="follow-btn"</span></span><br><span class="line"><span class="comment">            round</span></span><br><span class="line"><span class="comment">            size="small"</span></span><br><span class="line"><span class="comment">          &gt;å·²å…³æ³¨&lt;/van-button&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- /ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æ–‡ç« å†…å®¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-content"</span>&gt;</span>è¿™æ˜¯æ–‡ç« å†…å®¹<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-divider</span>&gt;</span>æ­£æ–‡ç»“æŸ<span class="tag">&lt;/<span class="name">van-divider</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- /åŠ è½½å®Œæˆ-æ–‡ç« è¯¦æƒ… --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- åŠ è½½å¤±è´¥ï¼š404 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"error-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"failure"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è¯¥èµ„æºä¸å­˜åœ¨æˆ–å·²åˆ é™¤ï¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- /åŠ è½½å¤±è´¥ï¼š404 --&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">&lt;!-- åŠ è½½å¤±è´¥ï¼šå…¶å®ƒæœªçŸ¥é”™è¯¯ï¼ˆä¾‹å¦‚ç½‘ç»œåŸå› æˆ–æœåŠ¡ç«¯å¼‚å¸¸ï¼‰ --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"error-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"failure"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å†…å®¹åŠ è½½å¤±è´¥ï¼<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"retry-btn"</span>&gt;</span>ç‚¹å‡»é‡è¯•<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- /åŠ è½½å¤±è´¥ï¼šå…¶å®ƒæœªçŸ¥é”™è¯¯ï¼ˆä¾‹å¦‚ç½‘ç»œåŸå› æˆ–æœåŠ¡ç«¯å¼‚å¸¸ï¼‰ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨åŒºåŸŸ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-bottom"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"comment-btn"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">type</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>å†™è¯„è®º<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"comment-o"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">info</span>=<span class="string">"123"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">color</span>=<span class="string">"#777"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">color</span>=<span class="string">"#777"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"star-o"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">color</span>=<span class="string">"#777"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"good-job-o"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">name</span>=<span class="string">"share"</span> <span class="attr">color</span>=<span class="string">"#777777"</span>&gt;</span><span class="tag">&lt;/<span class="name">van-icon</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /åº•éƒ¨åŒºåŸŸ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'ArticleIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">articleId</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: [<span class="built_in">Number</span>, <span class="built_in">String</span>],</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.article-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.main-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">top</span>: <span class="number">92px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">bottom</span>: <span class="number">88px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">overflow-y</span>: scroll;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.article-detail</span> {</span></span><br><span class="line"><span class="css">    <span class="selector-class">.article-title</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">padding</span>: <span class="number">50px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#3a3a3a</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.user-info</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-right</span>: <span class="number">17px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.van-cell__label</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.user-name</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#3a3a3a</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.publish-date</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">23px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">color</span>: <span class="number">#b7b7b7</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      <span class="selector-class">.follow-btn</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">170px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">58px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.article-content</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">padding</span>: <span class="number">55px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">      /deep/ <span class="selector-tag">p</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">text-align</span>: justify;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.loading-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">200px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.error-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">200px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">122px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#b4b4b4</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#666666</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin</span>: <span class="number">33px</span> <span class="number">0</span> <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.retry-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">280px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">line-height</span>: <span class="number">70px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#c3c3c3</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#666666</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.article-bottom</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: space-around;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">88px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="number">#d8d8d8</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.comment-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">282px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#eeeeee</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">line-height</span>: <span class="number">46px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#a7a7a7</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.van-info</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: <span class="number">#e22829</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜"><a href="#å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜" class="headerlink" title="å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜"></a>å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜</h2><p>ä¹‹æ‰€ä»¥è¯·æ±‚æ–‡ç« è¯¦æƒ…è¿”å› 404 æ˜¯å› ä¸ºæˆ‘ä»¬è¯·æ±‚å‘é€çš„æ–‡ç«  ID ï¼ˆarticle.art_idï¼‰ä¸æ­£ç¡®ã€‚</p>
<p>JavaScript èƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´åœ¨<code>-2^53</code>åˆ°<code>2^53</code>ä¹‹é—´ï¼ˆä¸å«ä¸¤ä¸ªç«¯ç‚¹ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºè¿™ä¸ªå€¼ï¼Œè¿™ä½¿å¾— JavaScript ä¸é€‚åˆè¿›è¡Œç§‘å­¦å’Œé‡‘èæ–¹é¢çš„ç²¾ç¡®è®¡ç®—ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) <span class="comment">// 9007199254740992</span></span><br><span class="line"></span><br><span class="line"><span class="number">9007199254740992</span>  <span class="comment">// 9007199254740992</span></span><br><span class="line"><span class="number">9007199254740993</span>  <span class="comment">// 9007199254740992</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) === <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) + <span class="number">1</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œè¶…å‡º 2 çš„ 53 æ¬¡æ–¹ä¹‹åï¼Œä¸€ä¸ªæ•°å°±ä¸ç²¾ç¡®äº†ã€‚<br>ES6 å¼•å…¥äº†<code>Number.MAX_SAFE_INTEGER</code>å’Œ<code>Number.MIN_SAFE_INTEGER</code>è¿™ä¸¤ä¸ªå¸¸é‡ï¼Œç”¨æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´çš„ä¸Šä¸‹é™ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Number</span>.MAX_SAFE_INTEGER === <span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">53</span>) - <span class="number">1</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.MAX_SAFE_INTEGER === <span class="number">9007199254740991</span></span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Number</span>.MIN_SAFE_INTEGER === -<span class="built_in">Number</span>.MAX_SAFE_INTEGER</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="built_in">Number</span>.MIN_SAFE_INTEGER === -<span class="number">9007199254740991</span></span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ° JavaScript èƒ½å¤Ÿç²¾ç¡®è¡¨ç¤ºçš„æé™ã€‚</p>
<p>åç«¯è¿”å›çš„æ•°æ®ä¸€èˆ¬éƒ½æ˜¯ <strong>JSON æ ¼å¼çš„å­—ç¬¦ä¸²</strong>ã€‚</p>
<figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">'{ <span class="attr">"id"</span>: <span class="number">9007199254740995</span>, <span class="attr">"name"</span>: <span class="string">"Jack"</span>, <span class="attr">"age"</span>: <span class="number">18</span> }'</span><br></pre></td></tr></tbody></table></figure>

<p>å¦‚æœè¿™ä¸ªå­—ç¬¦ä¸åšä»»ä½•å¤„ç†ï¼Œä½ èƒ½æ–¹ä¾¿çš„è·å–åˆ°å­—ç¬¦ä¸²ä¸­çš„æŒ‡å®šæ•°æ®å—ï¼Ÿéå¸¸éº»çƒ¦ã€‚æ‰€ä»¥æˆ‘ä»¬è¦æŠŠå®ƒè½¬æ¢ä¸º JavaScript å¯¹è±¡æ¥ä½¿ç”¨å°±å¾ˆæ–¹ä¾¿äº†ã€‚</p>
<p>å¹¸è¿çš„æ˜¯ axios ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨æ•°æ®ï¼Œå®ƒä¼šåœ¨å†…éƒ¨ä½¿ç”¨ <code>JSON.parse()</code> æŠŠåç«¯è¿”å›çš„æ•°æ®è½¬ä¸º JavaScript å¯¹è±¡ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// { id: 9007199254740996, name: 'Jack', age: 18 }</span></span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="string">'{ "id": 9007199254740995, "name": "Jack", "age": 18 }'</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œè¶…å‡ºå®‰å…¨æ•´æ•°èŒƒå›´çš„ id æ— æ³•ç²¾ç¡®è¡¨ç¤ºï¼Œè¿™ä¸ªé—®é¢˜å¹¶ä¸æ˜¯ axios çš„é”™ã€‚</p>
<p>äº†è§£äº†ä»€ä¹ˆæ˜¯å¤§æ•´æ•°çš„æ¦‚å¿µï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯å¦‚ä½•è§£å†³ï¼Ÿ</p>
<p><a target="_blank" rel="noopener" href="https://github.com/sidorares/json-bigint">json-bigint</a> æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬å¾ˆå¥½çš„å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä½¿ç”¨å®ƒçš„ç¬¬ä¸€æ­¥å°±æ˜¯æŠŠå®ƒå®‰è£…åˆ°ä½ çš„é¡¹ç›®ä¸­ã€‚</p>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i json-bigint</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢æ˜¯ä½¿ç”¨å®ƒçš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jsonStr = <span class="string">'{ "art_id": 1245953273786007552 }'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.parse(jsonStr)) <span class="comment">// 1245953273786007600</span></span><br><span class="line"><span class="comment">// JSON.stringify()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// JSONBig å¯ä»¥å¤„ç†æ•°æ®ä¸­è¶…å‡º JavaScript å®‰å…¨æ•´æ•°èŒƒå›´çš„é—®é¢˜</span></span><br><span class="line"><span class="built_in">console</span>.log(JSONBig.parse(jsonStr)) <span class="comment">// æŠŠ JSON æ ¼å¼çš„å­—ç¬¦ä¸²è½¬ä¸º JavaScript å¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨çš„æ—¶å€™éœ€è¦æŠŠ BigNumber ç±»å‹çš„æ•°æ®è½¬ä¸ºå­—ç¬¦ä¸²æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="built_in">console</span>.log(JSONBig.parse(jsonStr).art_id.toString()) <span class="comment">// 1245953273786007552</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(JSONBig.parse(jsonStr)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(JSONBig.stringify(JSONBig.parse(jsonStr))) <span class="comment">// æŠŠ JavaScript å¯¹è±¡ è½¬ä¸º JSON æ ¼å¼çš„å­—ç¬¦ä¸²è½¬</span></span><br></pre></td></tr></tbody></table></figure>

<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1582099315865-5e805425-7abf-4cf2-9df3-acc2ef8f9bb9.png" alt="image.png"></p>
<blockquote>
<p>json-bigint ä¼šæŠŠè¶…å‡º JS å®‰å…¨æ•´æ•°èŒƒå›´çš„æ•°å­—è½¬ä¸ºä¸€ä¸ª BigNumber ç±»å‹çš„å¯¹è±¡ï¼Œå¯¹è±¡æ•°æ®æ˜¯å®ƒå†…éƒ¨çš„ä¸€ä¸ªç®—æ³•å¤„ç†ä¹‹åçš„ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™è½¬ä¸ºå­—ç¬¦ä¸²æ¥ä½¿ç”¨ã€‚</p>
</blockquote>
<p>é€šè¿‡ Axios è¯·æ±‚å¾—åˆ°çš„æ•°æ®éƒ½æ˜¯ Axios å¤„ç†ï¼ˆJSON.parseï¼‰ä¹‹åçš„ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ Axios æ‰§è¡Œå¤„ç†ä¹‹å‰æ‰‹åŠ¨ä½¿ç”¨ json-bigint æ¥è§£æå¤„ç†ã€‚Axios æä¾›äº†è‡ªå®šä¹‰å¤„ç†åŸå§‹åç«¯è¿”å›æ•°æ®çš„ APIï¼š<code>transformResponse</code> ã€‚</p>
<figure class="highlight javascript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jsonBig <span class="keyword">from</span> <span class="string">'json-bigint'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> json = <span class="string">'{ "value" : 9223372036854775807, "v2": 123 }'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(jsonBig.parse(json))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = axios.create({</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="string">'http://ttapi.research.itcast.cn/'</span>, <span class="comment">// æ¥å£åŸºç¡€è·¯å¾„</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// transformResponse å…è®¸è‡ªå®šä¹‰åŸå§‹çš„å“åº”æ•°æ®ï¼ˆå­—ç¬¦ä¸²ï¼‰</span></span><br><span class="line">  <span class="attr">transformResponse</span>: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>{</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">      <span class="comment">// å¦‚æœè½¬æ¢æˆåŠŸåˆ™è¿”å›è½¬æ¢çš„æ•°æ®ç»“æœ</span></span><br><span class="line">      <span class="keyword">return</span> jsonBig.parse(data)</span><br><span class="line">    } <span class="keyword">catch</span> (err) {</span><br><span class="line">      <span class="comment">// å¦‚æœè½¬æ¢å¤±è´¥ï¼Œåˆ™åŒ…è£…ä¸ºç»Ÿä¸€æ•°æ®æ ¼å¼å¹¶è¿”å›</span></span><br><span class="line">      <span class="keyword">return</span> {</span><br><span class="line">        data</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }]</span><br><span class="line">})</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> request</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æ‰©å±•ï¼šES2020 BigInt</p>
<p>ES2020 å¼•å…¥äº†ä¸€ç§æ–°çš„æ•°æ®ç±»å‹ BigIntï¼ˆå¤§æ•´æ•°ï¼‰ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚BigInt åªç”¨æ¥è¡¨ç¤ºæ•´æ•°ï¼Œæ²¡æœ‰ä½æ•°çš„é™åˆ¶ï¼Œä»»ä½•ä½æ•°çš„æ•´æ•°éƒ½å¯ä»¥ç²¾ç¡®è¡¨ç¤ºã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/BigInt</a></li>
<li><a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/number#BigInt-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">http://es6.ruanyifeng.com/#docs/number#BigInt-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B</a></li>
</ul>
</blockquote>
<h2 id="å±•ç¤ºæ–‡ç« è¯¦æƒ…"><a href="#å±•ç¤ºæ–‡ç« è¯¦æƒ…" class="headerlink" title="å±•ç¤ºæ–‡ç« è¯¦æƒ…"></a>å±•ç¤ºæ–‡ç« è¯¦æƒ…</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>ä¸€ã€è¯·æ±‚å¹¶å±•ç¤ºæ–‡ç« è¯¦æƒ…</p>
<p>1ã€åœ¨ <code>api/article.js</code> ä¸­æ–°å¢å°è£…æ¥å£æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ® id è·å–æŒ‡å®šæ–‡ç« </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getArticleById = <span class="function"><span class="params">articleId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/articles/<span class="subst">${articleId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç»„ä»¶ä¸­è°ƒç”¨è·å–æ–‡ç« è¯¦æƒ…</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">+ <span class="keyword">import</span> { getArticleById } <span class="keyword">from</span> <span class="string">'@/api/article'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'ArticlePage'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {</span><br><span class="line">    <span class="attr">articleId</span>: {</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">+      article: {} <span class="comment">// æ–‡ç« è¯¦æƒ…</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">  created () {</span><br><span class="line">+    <span class="built_in">this</span>.loadArticle()</span><br><span class="line">  },</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">+++    <span class="keyword">async</span> loadArticle () {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getArticleById(<span class="built_in">this</span>.articleId)</span><br><span class="line">        <span class="built_in">this</span>.article = data.data</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<h2 id="å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€"><a href="#å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€" class="headerlink" title="å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€"></a>å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€</h2><p>éœ€æ±‚ï¼š</p>
<ul>
<li>åŠ è½½ä¸­ï¼Œæ˜¾ç¤º loading</li>
<li>åŠ è½½æˆåŠŸï¼Œæ˜¾ç¤ºæ–‡ç« è¯¦æƒ…</li>
<li>åŠ è½½å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯æç¤º<ul>
<li>å¦‚æœ 404ï¼Œæç¤ºèµ„æºä¸å­˜åœ¨</li>
<li>å…¶å®ƒçš„ï¼Œæç¤ºåŠ è½½å¤±è´¥ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»é‡è¯•é‡æ–°åŠ è½½</li>
</ul>
</li>
</ul>
<h2 id="å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼"><a href="#å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼" class="headerlink" title="å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼"></a>å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼</h2><p>æ–‡ç« æ­£æ–‡åŒ…æ‹¬å„ç§æ•°æ®ï¼šæ®µè½ã€æ ‡é¢˜ã€åˆ—è¡¨ã€é“¾æ¥ã€å›¾ç‰‡ã€è§†é¢‘ç­‰èµ„æºã€‚</p>
<ul>
<li>å°† <a target="_blank" rel="noopener" href="https://github.com/sindresorhus/github-markdown-css">github-markdown-css</a> æ ·å¼æ–‡ä»¶ä¸‹è½½åˆ°é¡¹ç›®ä¸­</li>
<li>é…ç½®ä¸è¦è½¬æ¢æ ·å¼æ–‡ä»¶ä¸­çš„å­—å·</li>
</ul>
<h2 id="å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ"><a href="#å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ" class="headerlink" title="å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ"></a>å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ</h2><p>ä¸€ã€<a target="_blank" rel="noopener" href="https://youzan.github.io/vant/#/zh-CN/image-preview">ImagePreview å›¾ç‰‡é¢„è§ˆ</a> çš„ä½¿ç”¨</p>
<p>äºŒã€å¤„ç†å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ</p>
<p>æ€è·¯ï¼š</p>
<p>1ã€ä»æ–‡ç« å†…å®¹ä¸­è·å–åˆ°æ‰€æœ‰çš„ img DOM èŠ‚ç‚¹</p>
<p>2ã€è·å–æ–‡ç« å†…å®¹ä¸­æ‰€æœ‰çš„å›¾ç‰‡åœ°å€</p>
<p>3ã€éå†æ‰€æœ‰ img èŠ‚ç‚¹ï¼Œç»™æ¯ä¸ªèŠ‚ç‚¹æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>4ã€åœ¨ img ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œè°ƒç”¨ ImagePreview é¢„è§ˆ</p>
<h2 id="å…³æ³¨ç”¨æˆ·"><a href="#å…³æ³¨ç”¨æˆ·" class="headerlink" title="å…³æ³¨ç”¨æˆ·"></a>å…³æ³¨ç”¨æˆ·</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­<ul>
<li>å¦‚æœå·²å…³æ³¨ï¼Œåˆ™å–æ¶ˆå…³æ³¨</li>
<li>å¦‚æœæ²¡æœ‰å…³æ³¨ï¼Œåˆ™æ·»åŠ å…³æ³¨</li>
</ul>
</li>
</ul>
<p>ä¸‹é¢æ˜¯å…·ä½“å®ç°ã€‚</p>
<h3 id="è§†å›¾å¤„ç†"><a href="#è§†å›¾å¤„ç†" class="headerlink" title="è§†å›¾å¤„ç†"></a>è§†å›¾å¤„ç†</h3><h3 id="åŠŸèƒ½å¤„ç†"><a href="#åŠŸèƒ½å¤„ç†" class="headerlink" title="åŠŸèƒ½å¤„ç†"></a>åŠŸèƒ½å¤„ç†</h3><ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è°ƒç”¨</li>
<li>è§†å›¾æ›´æ–°</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ å…³æ³¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addFollow = <span class="function"><span class="params">userId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/followings'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      <span class="attr">target</span>: userId</span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆå…³æ³¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteFollow = <span class="function"><span class="params">userId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/user/followings/<span class="subst">${userId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™å…³æ³¨/å–æ¶ˆå…³æ³¨æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>3ã€åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { addFollow, deleteFollow } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onFollow () {</span><br><span class="line">  <span class="comment">// å¼€å¯æŒ‰é’®çš„ loading çŠ¶æ€</span></span><br><span class="line">  <span class="built_in">this</span>.isFollowLoading = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœå·²å…³æ³¨ï¼Œåˆ™å–æ¶ˆå…³æ³¨</span></span><br><span class="line">    <span class="keyword">const</span> authorId = <span class="built_in">this</span>.article.aut_id</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.article.is_followed) {</span><br><span class="line">      <span class="keyword">await</span> deleteFollow(authorId)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// å¦åˆ™æ·»åŠ å…³æ³¨</span></span><br><span class="line">      <span class="keyword">await</span> addFollow(authorId)</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°è§†å›¾</span></span><br><span class="line">    <span class="built_in">this</span>.article.is_followed = !<span class="built_in">this</span>.article.is_followed</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'æ“ä½œå¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å…³é—­æŒ‰é’®çš„ loading çŠ¶æ€</span></span><br><span class="line">  <span class="built_in">this</span>.isFollowLoading = <span class="literal">false</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åæµ‹è¯•ã€‚</p>
<h3 id="loading-æ•ˆæœ"><a href="#loading-æ•ˆæœ" class="headerlink" title="loading æ•ˆæœ"></a>loading æ•ˆæœ</h3><p>ä¸¤ä¸ªä½œç”¨ï¼š</p>
<ul>
<li>äº¤äº’åé¦ˆ</li>
<li>é˜²æ­¢ç½‘ç»œæ…¢ç”¨æˆ·å¤šæ¬¡ç‚¹å‡»æŒ‰é’®å¯¼è‡´é‡å¤è§¦å‘ç‚¹å‡»äº‹ä»¶</li>
</ul>
<h3 id="ç»„ä»¶å°è£…"><a href="#ç»„ä»¶å°è£…" class="headerlink" title="ç»„ä»¶å°è£…"></a>ç»„ä»¶å°è£…</h3><h2 id="æ–‡ç« æ”¶è—"><a href="#æ–‡ç« æ”¶è—" class="headerlink" title="æ–‡ç« æ”¶è—"></a>æ–‡ç« æ”¶è—</h2><blockquote>
<p>è¯¥åŠŸèƒ½å’Œå…³æ³¨ç”¨æˆ·çš„å¤„ç†æ€è·¯å‡ ä¹ä¸€æ ·ï¼Œå»ºè®®ç”±å­¦å‘˜è‡ªå·±ç¼–å†™ã€‚</p>
</blockquote>
<h3 id="å°è£…ç»„ä»¶"><a href="#å°è£…ç»„ä»¶" class="headerlink" title="å°è£…ç»„ä»¶"></a>å°è£…ç»„ä»¶</h3><h3 id="å¤„ç†è§†å›¾"><a href="#å¤„ç†è§†å›¾" class="headerlink" title="å¤„ç†è§†å›¾"></a>å¤„ç†è§†å›¾</h3><h3 id="åŠŸèƒ½å¤„ç†-1"><a href="#åŠŸèƒ½å¤„ç†-1" class="headerlink" title="åŠŸèƒ½å¤„ç†"></a>åŠŸèƒ½å¤„ç†</h3><p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™æ”¶è—æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>å¦‚æœå·²ç»æ”¶è—äº†ï¼Œåˆ™å–æ¶ˆæ”¶è—</li>
<li>å¦‚æœæ²¡æœ‰æ”¶è—ï¼Œåˆ™æ·»åŠ æ”¶è—</li>
</ul>
<p>ä¸‹é¢æ˜¯å…·ä½“å®ç°ã€‚</p>
<p>1ã€åœ¨ <code>api/article.js</code> æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ”¶è—æ–‡ç« </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addCollect = <span class="function"><span class="params">target</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/article/collections'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      target</span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆæ”¶è—æ–‡ç« </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteCollect = <span class="function"><span class="params">target</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/article/collections/<span class="subst">${target}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™æ”¶è—æŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>3ã€å¤„ç†å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onCollect () {</span><br><span class="line">  <span class="comment">// è¿™é‡Œ loading ä¸ä»…ä»…æ˜¯ä¸ºäº†äº¤äº’æç¤ºï¼Œæ›´é‡è¦çš„æ˜¯è¯·æ±‚æœŸé—´ç¦ç”¨èƒŒæ™¯ç‚¹å‡»åŠŸèƒ½ï¼Œé˜²æ­¢ç”¨æˆ·ä¸æ–­çš„æ“ä½œç•Œé¢å‘å‡ºè¯·æ±‚</span></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'æ“ä½œä¸­...'</span>,</span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœå·²æ”¶è—ï¼Œåˆ™å–æ¶ˆæ”¶è—</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.article.is_collected) {</span><br><span class="line">      <span class="keyword">await</span> deleteCollect(<span class="built_in">this</span>.articleId)</span><br><span class="line">      <span class="comment">// this.article.is_collected = false</span></span><br><span class="line">      <span class="built_in">this</span>.$toast.success(<span class="string">'å–æ¶ˆæ”¶è—'</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// æ·»åŠ æ”¶è—</span></span><br><span class="line">      <span class="keyword">await</span> addCollect(<span class="built_in">this</span>.articleId)</span><br><span class="line">      <span class="comment">// this.article.is_collected = true</span></span><br><span class="line">      <span class="built_in">this</span>.$toast.success(<span class="string">'æ”¶è—æˆåŠŸ'</span>)</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">this</span>.article.is_collected = !<span class="built_in">this</span>.article.is_collected</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'æ“ä½œå¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h2 id="æ–‡ç« ç‚¹èµ"><a href="#æ–‡ç« ç‚¹èµ" class="headerlink" title="æ–‡ç« ç‚¹èµ"></a>æ–‡ç« ç‚¹èµ</h2><blockquote>
<p>è¯¥åŠŸèƒ½å’Œå…³æ³¨ç”¨æˆ·çš„å¤„ç†æ€è·¯å‡ ä¹ä¸€æ ·ï¼Œå»ºè®®ç”±å­¦å‘˜è‡ªå·±ç¼–å†™ã€‚</p>
</blockquote>
<p>article ä¸­çš„ <code>attitude</code> è¡¨ç¤ºç”¨æˆ·å¯¹æ–‡ç« çš„æ€åº¦</p>
<ul>
<li><code>-1</code> æ— æ€åº¦</li>
<li><code>0</code> ä¸å–œæ¬¢</li>
<li><code>1</code> å·²ç‚¹èµ</li>
</ul>
<p>æ€è·¯ï¼š</p>
<ul>
<li>ç»™ç‚¹èµæŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</li>
<li>å¦‚æœå·²ç»ç‚¹èµï¼Œåˆ™è¯·æ±‚å–æ¶ˆç‚¹èµ</li>
<li>å¦‚æœæ²¡æœ‰ç‚¹èµï¼Œåˆ™è¯·æ±‚ç‚¹èµ</li>
</ul>
<p>1ã€æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç‚¹èµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addLike = <span class="function"><span class="params">articleId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/article/likings'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      <span class="attr">target</span>: articleId</span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆç‚¹èµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> deleteLike = <span class="function"><span class="params">articleId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/article/likings/<span class="subst">${articleId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»™ç‚¹èµæŒ‰é’®æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<p>3ã€å¤„ç†å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onLike () {</span><br><span class="line">  <span class="comment">// ä¸¤ä¸ªä½œç”¨ï¼š1ã€äº¤äº’æç¤º 2ã€é˜²æ­¢ç½‘ç»œæ…¢ç”¨æˆ·è¿ç»­ä¸æ–­çš„ç‚¹å‡»æŒ‰é’®è¯·æ±‚</span></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'æ“ä½œä¸­...'</span>,</span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœå·²ç»ç‚¹èµï¼Œåˆ™å–æ¶ˆç‚¹èµ</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.article.attitude === <span class="number">1</span>) {</span><br><span class="line">      <span class="keyword">await</span> deleteLike(<span class="built_in">this</span>.articleId)</span><br><span class="line">      <span class="built_in">this</span>.article.attitude = -<span class="number">1</span></span><br><span class="line">      <span class="built_in">this</span>.$toast.success(<span class="string">'å–æ¶ˆç‚¹èµ'</span>)</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">      <span class="comment">// å¦åˆ™æ·»åŠ ç‚¹èµ</span></span><br><span class="line">      <span class="keyword">await</span> addLike(<span class="built_in">this</span>.articleId)</span><br><span class="line">      <span class="built_in">this</span>.article.attitude = <span class="number">1</span></span><br><span class="line">      <span class="built_in">this</span>.$toast.success(<span class="string">'ç‚¹èµæˆåŠŸ'</span>)</span><br><span class="line">    }</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'æ“ä½œå¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h1 id="å…«ã€æ–‡ç« è¯„è®º"><a href="#å…«ã€æ–‡ç« è¯„è®º" class="headerlink" title="å…«ã€æ–‡ç« è¯„è®º"></a>å…«ã€æ–‡ç« è¯„è®º</h1><h2 id="å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨"><a href="#å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨" class="headerlink" title="å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨"></a>å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨</h2><h3 id="å‡†å¤‡ç»„ä»¶-1"><a href="#å‡†å¤‡ç»„ä»¶-1" class="headerlink" title="å‡†å¤‡ç»„ä»¶"></a>å‡†å¤‡ç»„ä»¶</h3><p>ä¸ºäº†æ›´å¥½çš„å¼€å‘å’Œç»´æŠ¤ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠæ–‡ç« è¯„è®ºå•ç‹¬å°è£…åˆ°ä¸€ä¸ªç»„ä»¶ä¸­æ¥å¤„ç†ã€‚</p>
<p>1ã€åˆ›å»º <code>src/views/article/components/article-comment.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-comments"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºåˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> <span class="attr">:key</span>=<span class="string">"item"</span> <span class="attr">:title</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">          <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">          <span class="attr">width</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: #466b9d;"</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: #363636;"</span>&gt;</span>æˆ‘å‡ºå»è·Ÿåˆ«äººè¯´æˆ‘çš„æ˜¯ã€‚ã€‚ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span>&gt;</span>3å¤©å‰<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>å›å¤<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">slot</span>=<span class="string">"right-icon"</span> <span class="attr">name</span>=<span class="string">"like-o"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºåˆ—è¡¨ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å‘å¸ƒè¯„è®º --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">class</span>=<span class="string">"publish-wrap"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-field</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è¯„è®ºå†…å®¹"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">slot</span>=<span class="string">"button"</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"info"</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å‘å¸ƒè¯„è®º --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">"ArticleComment"</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">        <span class="attr">list</span>: [], <span class="comment">// è¯„è®ºåˆ—è¡¨</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„ loading</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">finished</span>: <span class="literal">false</span> <span class="comment">// æ˜¯å¦åŠ è½½ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">      };</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¼‚æ­¥æ›´æ–°æ•°æ®</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> {</span></span><br><span class="line"><span class="javascript">          <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) {</span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.list.push(<span class="built_in">this</span>.list.length + <span class="number">1</span>);</span></span><br><span class="line"><span class="javascript">          }</span></span><br><span class="line"><span class="javascript">          <span class="comment">// åŠ è½½çŠ¶æ€ç»“æŸ</span></span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.loading = <span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">          <span class="comment">// æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (<span class="built_in">this</span>.list.length &gt;= <span class="number">40</span>) {</span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.finished = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">          }</span></span><br><span class="line"><span class="javascript">        }, <span class="number">500</span>);</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  };</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.publish-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">    <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.van-list</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-bottom</span>: <span class="number">45px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨æ–‡ç« è¯¦æƒ…é¡µé¢ä¸­åŠ è½½æ³¨å†Œæ–‡ç« è¯„è®ºå­ç»„ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ArticleComment <span class="keyword">from</span> <span class="string">'./components/article-comment'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  ...</span><br><span class="line">  <span class="attr">components</span>: {</span><br><span class="line">    ArticleComment</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨æ–‡ç« è¯¦æƒ…é¡µé¢çš„åŠ è½½å¤±è´¥æç¤ºæ¶ˆæ¯åé¢ä½¿ç”¨æ–‡ç« è¯„è®ºå­ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–‡ç« è¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">article-comment</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /æ–‡ç« è¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>æœ€ç»ˆé¡µé¢æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20191206152846065.png" alt="image-20191206152846065"></p>
<h3 id="è·å–æ•°æ®å¹¶å±•ç¤º"><a href="#è·å–æ•°æ®å¹¶å±•ç¤º" class="headerlink" title="è·å–æ•°æ®å¹¶å±•ç¤º"></a>è·å–æ•°æ®å¹¶å±•ç¤º</h3><blockquote>
<p>æç¤ºï¼šæœ‰è¯„è®ºæ•°æ®çš„æ–‡ç«  idï¼š<code>139987</code>ã€‚</p>
</blockquote>
<p>æ­¥éª¤ï¼š</p>
<ul>
<li>å°è£…æ¥å£</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>å¤„ç†æ¨¡æ¿</li>
</ul>
<p>å®ç°ï¼š</p>
<p>1ã€åœ¨ <code>api/comment.js</code> ä¸­æ·»åŠ å°è£…è¯·æ±‚æ–¹æ³•</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯„è®ºæ¥å£æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">"@/utils/request"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æ–‡ç« åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getComments</span>(<span class="params">params</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"GET"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/app/v1_0/comments"</span>,</span><br><span class="line">    params</span><br><span class="line">  });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€è¯·æ±‚è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">articleComment</span>: { <span class="comment">// æ–‡ç« è¯„è®ºç›¸å…³æ•°æ®</span></span><br><span class="line">      <span class="attr">list</span>: [],</span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">finished</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">offset</span>: <span class="literal">null</span>, <span class="comment">// è¯·æ±‚ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">      <span class="attr">totalCount</span>: <span class="number">0</span> <span class="comment">// æ€»æ•°æ®æ¡æ•°</span></span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onLoad () {</span><br><span class="line">  <span class="keyword">const</span> articleComment = <span class="built_in">this</span>.articleComment</span><br><span class="line">  <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> { data } = <span class="keyword">await</span> getComments({</span><br><span class="line">    <span class="attr">type</span>: <span class="string">'a'</span>, <span class="comment">// è¯„è®ºç±»å‹ï¼Œa-å¯¹æ–‡ç« (article)çš„è¯„è®ºï¼Œc-å¯¹è¯„è®º(comment)çš„å›å¤</span></span><br><span class="line">    <span class="attr">source</span>: <span class="built_in">this</span>.articleId, <span class="comment">// æºidï¼Œæ–‡ç« idæˆ–è¯„è®ºid</span></span><br><span class="line">    <span class="attr">offset</span>: articleComment.offset, <span class="comment">// è·å–è¯„è®ºæ•°æ®çš„åç§»é‡ï¼Œå€¼ä¸ºè¯„è®ºidï¼Œè¡¨ç¤ºä»æ­¤idçš„æ•°æ®å‘åå–ï¼Œä¸ä¼ è¡¨ç¤ºä»ç¬¬ä¸€é¡µå¼€å§‹è¯»å–æ•°æ®</span></span><br><span class="line">    <span class="attr">limit</span>: <span class="number">10</span> <span class="comment">// æ¯é¡µå¤§å°</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2. å°†æ•°æ®æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">  <span class="keyword">const</span> { results } = data.data</span><br><span class="line">  articleComment.list.push(...results)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°æ€»æ•°æ®æ¡æ•°</span></span><br><span class="line">  articleComment.totalCount = data.data.total_count</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3. å°†åŠ è½½æ›´å¤šçš„ loading è®¾ç½®ä¸º false</span></span><br><span class="line">  articleComment.loading = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4. åˆ¤æ–­æ˜¯å¦è¿˜æœ‰æ•°æ®</span></span><br><span class="line">  <span class="keyword">if</span> (results.length) {</span><br><span class="line">    articleComment.offset = data.data.last_id <span class="comment">// æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    articleComment.finished = <span class="literal">true</span> <span class="comment">// æ²¡æœ‰æ•°æ®äº†ï¼Œå…³é—­åŠ è½½æ›´å¤š</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºåˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span> + <span class="attr">:key</span>=<span class="string">"item.com_id.toString()"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">round</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">      +</span></span><br><span class="line"><span class="tag">      <span class="attr">:src</span>=<span class="string">"item.aut_photo"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    + <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: #466b9d;"</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>{{ item.aut_name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      +</span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: #363636;"</span>&gt;</span>{{ item.content }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        +</span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">          &gt;</span>{{ item.pubdate | relativeTime }}&lt;/span</span><br><span class="line">        &gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"default"</span>&gt;</span>å›å¤<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">slot</span>=<span class="string">"right-icon"</span> <span class="attr">name</span>=<span class="string">"like-o"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¯„è®ºåˆ—è¡¨ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡"><a href="#å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡" class="headerlink" title="å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡"></a>å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡</h3><h3 id="æ–‡ç« è¯„è®ºé¡¹"><a href="#æ–‡ç« è¯„è®ºé¡¹" class="headerlink" title="æ–‡ç« è¯„è®ºé¡¹"></a>æ–‡ç« è¯„è®ºé¡¹</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">class</span>=<span class="string">"comment-item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">round</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"title-wrap"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-name"</span>&gt;</span>ç”¨æˆ·åç§°<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"like-btn"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">icon</span>=<span class="string">"good-job-o"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>èµ<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"comment-content"</span>&gt;</span>è¿™æ˜¯è¯„è®ºå†…å®¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bottom-info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-pubdate"</span>&gt;</span>4å¤©å‰<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"reply-btn"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        &gt;</span>å›å¤ 0<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.comment-item</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">72px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">72px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.title-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.user-name</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#406599</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">26px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.comment-content</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222222</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">word-break</span>: break-all;</span></span><br><span class="line"><span class="css">    <span class="attribute">text-align</span>: justify;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.comment-pubdate</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.bottom-info</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.reply-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">135px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">21px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.like-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">7px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>ç»‘å®šä¹‹åï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">class</span>=<span class="string">"comment-item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">      <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">round</span></span></span><br><span class="line"><span class="tag">      <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:src</span>=<span class="string">"comment.aut_photo"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"title"</span> <span class="attr">class</span>=<span class="string">"title-wrap"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-name"</span>&gt;</span>{{ comment.aut_name }}<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"like-btn"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">icon</span>=<span class="string">"good-job-o"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>{{ comment.like_count || 'èµ' }}<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"comment-content"</span>&gt;</span>{{ comment.content }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bottom-info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"comment-pubdate"</span>&gt;</span>{{ comment.pubdate | relativeTime }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"reply-btn"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        &gt;</span>å›å¤ {{ comment.reply_count }}<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentItem'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">comment</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.comment-item</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">72px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">72px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.title-wrap</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.user-name</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#406599</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">26px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.comment-content</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222222</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">word-break</span>: break-all;</span></span><br><span class="line"><span class="css">    <span class="attribute">text-align</span>: justify;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.comment-pubdate</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.bottom-info</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.reply-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">135px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">48px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">21px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#222</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.like-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">19px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">7px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-icon</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="è¯„è®ºç‚¹èµ"><a href="#è¯„è®ºç‚¹èµ" class="headerlink" title="è¯„è®ºç‚¹èµ"></a>è¯„è®ºç‚¹èµ</h2><p>1ã€åœ¨ <code>api/comment.js</code> ä¸­æ·»åŠ å°è£…ä¸¤ä¸ªæ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¯¹è¯„è®ºæˆ–è¯„è®ºå›å¤ç‚¹èµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addCommentLike</span>(<span class="params">commentId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"POST"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/app/v1_0/comment/likings"</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      <span class="attr">target</span>: commentId</span><br><span class="line">    }</span><br><span class="line">  });</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆå¯¹è¯„è®ºæˆ–è¯„è®ºå›å¤ç‚¹èµ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteCommentLike</span>(<span class="params">commentId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"DELETE"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/comment/likings/<span class="subst">${commentId}</span>`</span></span><br><span class="line">  });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç„¶åç»™è¯„è®ºé¡¹ä¸­çš„ <code>like</code> å›¾æ ‡æ³¨å†Œç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">  <span class="attr">slot</span>=<span class="string">"right-icon"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">color</span>=<span class="string">"red"</span></span></span><br><span class="line"><span class="tag">  +</span></span><br><span class="line"><span class="tag">  <span class="attr">:name</span>=<span class="string">"item.is_liking ? 'like' : 'like-o'"</span></span></span><br><span class="line"><span class="tag">  +</span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">"onCommentLike(item)"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {</span><br><span class="line">  getComments,</span><br><span class="line">  addComment,</span><br><span class="line">+  addCommentLike,</span><br><span class="line">+  deleteCommentLike</span><br><span class="line">} <span class="keyword">from</span> <span class="string">'@/api/comment'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onCommentLike (comment) {</span><br><span class="line">  <span class="comment">// å¦‚æœå·²ç»èµäº†åˆ™å–æ¶ˆç‚¹èµ</span></span><br><span class="line">  <span class="keyword">if</span> (comment.is_liking) {</span><br><span class="line">    <span class="keyword">await</span> deleteCommentLike(comment.com_id)</span><br><span class="line">  } <span class="keyword">else</span> {</span><br><span class="line">    <span class="comment">// å¦‚æœæ²¡æœ‰èµï¼Œåˆ™ç‚¹èµ</span></span><br><span class="line">    <span class="keyword">await</span> addCommentLike(comment.com_id)</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ›´æ–°è§†å›¾çŠ¶æ€</span></span><br><span class="line">  comment.is_liking = !comment.is_liking</span><br><span class="line">  <span class="built_in">this</span>.$toast(<span class="string">'æ“ä½œæˆåŠŸ'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="å‘å¸ƒæ–‡ç« è¯„è®º"><a href="#å‘å¸ƒæ–‡ç« è¯„è®º" class="headerlink" title="å‘å¸ƒæ–‡ç« è¯„è®º"></a>å‘å¸ƒæ–‡ç« è¯„è®º</h2><h3 id="å‡†å¤‡å¼¹å‡ºå±‚"><a href="#å‡†å¤‡å¼¹å‡ºå±‚" class="headerlink" title="å‡†å¤‡å¼¹å‡ºå±‚"></a>å‡†å¤‡å¼¹å‡ºå±‚</h3><h3 id="å°è£…ç»„ä»¶-1"><a href="#å°è£…ç»„ä»¶-1" class="headerlink" title="å°è£…ç»„ä»¶"></a>å°è£…ç»„ä»¶</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-post"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"post-field"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"message"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">rows</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">autosize</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"textarea"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">maxlength</span>=<span class="string">"50"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥ç•™è¨€"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">show-word-limit</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"post-btn"</span></span></span><br><span class="line"><span class="tag">    &gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentPost'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">message</span>: <span class="string">''</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.comment-post</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">  <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">32px</span> <span class="number">0</span> <span class="number">32px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.post-field</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#f5f7f9</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.post-btn</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">width</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">color</span>: <span class="number">#6ba3d8</span>;</span></span><br><span class="line"><span class="css">    &amp;<span class="selector-pseudo">::before</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<p>æ­¥éª¤ï¼š</p>
<ul>
<li>æ³¨å†Œå‘å¸ƒç‚¹å‡»äº‹ä»¶</li>
<li>è¯·æ±‚æäº¤è¡¨å•</li>
<li>æ ¹æ®å“åº”ç»“æœè¿›è¡Œåç»­å¤„ç†</li>
</ul>
<p>ä¸€ã€ä½¿ç”¨å¼¹å±‚å±•ç¤ºå‘å¸ƒè¯„è®º</p>
<p>1ã€æ·»åŠ å¼¹å±‚ç»„ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isPostShow</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å‘å¸ƒæ–‡ç« è¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isPostShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å‘å¸ƒæ–‡ç« è¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<blockquote>
<p>æç¤ºï¼šä¸è®¾ç½®é«˜åº¦çš„æ—¶å€™ï¼Œå†…å®¹ä¼šè‡ªåŠ¨æ’‘å¼€å¼¹å±‚é«˜åº¦</p>
</blockquote>
<p>2ã€ç‚¹å‡»å‘è¯„è®ºæŒ‰é’®çš„æ—¶å€™æ˜¾ç¤ºå¼¹å±‚</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">  <span class="attr">class</span>=<span class="string">"write-btn"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">round</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">"isPostShow = true"</span></span></span><br><span class="line"><span class="tag">&gt;</span>å†™è¯„è®º<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>äºŒã€å°è£…å‘å¸ƒè¯„è®ºç»„ä»¶</p>
<p>1ã€åˆ›å»º <code>post-comment.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-comment"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-field</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"post-field"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"message"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">rows</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">autosize</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"textarea"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">maxlength</span>=<span class="string">"50"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">placeholder</span>=<span class="string">"ä¼˜è´¨è¯„è®ºå°†ä¼šè¢«ä¼˜å…ˆå±•ç¤º"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">show-word-limit</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">"primary"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">    &gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'PostComment'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">message</span>: <span class="string">''</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.post-comment</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">  <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">align-items</span>: flex-end;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.post-field</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">background</span>: <span class="number">#f5f7f9</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-right</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è¯¦æƒ…é¡µåŠ è½½æ³¨å†Œ</p>
<p>3ã€åœ¨å‘å¸ƒè¯„è®ºçš„å¼¹å±‚ä¸­ä½¿ç”¨</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å‘å¸ƒæ–‡ç« è¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isPostShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">post-comment</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å‘å¸ƒæ–‡ç« è¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‰ã€å‘å¸ƒè¯„è®º</p>
<p>1ã€åœ¨ <code>api/comment.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ è¯„è®ºæˆ–è¯„è®ºå›å¤</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addComment</span>(<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">"POST"</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">"/app/v1_0/comments"</span>,</span><br><span class="line">    data</span><br><span class="line">  });</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€ç»‘å®šè·å–æ·»åŠ è¯„è®ºçš„è¾“å…¥æ¡†æ•°æ®å¹¶ä¸”æ³¨å†Œå‘å¸ƒæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">inputComment</span>: <span class="string">''</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å‘å¸ƒè¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell-group</span> <span class="attr">class</span>=<span class="string">"publish-wrap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-field</span> + <span class="attr">v-model</span>=<span class="string">"inputComment"</span> <span class="attr">clearable</span> <span class="attr">placeholder</span>=<span class="string">"è¯·è¾“å…¥è¯„è®ºå†…å®¹"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">slot</span>=<span class="string">"button"</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"info"</span> + @<span class="attr">click</span>=<span class="string">"onAddComment"</span></span></span><br><span class="line"><span class="tag">      &gt;</span>å‘å¸ƒ&lt;/van-button</span><br><span class="line">    &gt;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">van-field</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å‘å¸ƒè¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> {</span><br><span class="line">  getComments,</span><br><span class="line">+  addComment</span><br><span class="line">} <span class="keyword">from</span> <span class="string">'@/api/comment'</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onAddComment () {</span><br><span class="line">  <span class="keyword">const</span> inputComment = <span class="built_in">this</span>.inputComment.trim()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éç©ºæ ¡éªŒ</span></span><br><span class="line">  <span class="keyword">if</span> (!inputComment.length) {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¯·æ±‚æ·»åŠ </span></span><br><span class="line">  <span class="keyword">const</span> res = <span class="keyword">await</span> addComment({</span><br><span class="line">    <span class="attr">target</span>: <span class="built_in">this</span>.$route.params.articleId, <span class="comment">// è¯„è®ºçš„ç›®æ ‡idï¼ˆè¯„è®ºæ–‡ç« å³ä¸ºæ–‡ç« idï¼Œå¯¹è¯„è®ºè¿›è¡Œå›å¤åˆ™ä¸ºè¯„è®ºidï¼‰</span></span><br><span class="line">    <span class="attr">content</span>: inputComment <span class="comment">// è¯„è®ºå†…å®¹</span></span><br><span class="line">    <span class="comment">// art_id // æ–‡ç« idï¼Œå¯¹è¯„è®ºå†…å®¹å‘è¡¨å›å¤æ—¶ï¼Œéœ€è¦ä¼ é€’æ­¤å‚æ•°ï¼Œè¡¨æ˜æ‰€å±æ–‡ç« idã€‚å¯¹æ–‡ç« è¿›è¡Œè¯„è®ºï¼Œä¸è¦ä¼ æ­¤å‚æ•°ã€‚</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å°†å‘å¸ƒçš„æœ€æ–°è¯„è®ºå±•ç¤ºåˆ°åˆ—è¡¨é¡¶éƒ¨</span></span><br><span class="line">  <span class="built_in">this</span>.list.unshift(res.data.data.new_obj)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ¸…ç©ºæ–‡æœ¬æ¡†</span></span><br><span class="line">  <span class="built_in">this</span>.inputComment = <span class="string">''</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="è¯·æ±‚å‘å¸ƒ"><a href="#è¯·æ±‚å‘å¸ƒ" class="headerlink" title="è¯·æ±‚å‘å¸ƒ"></a>è¯·æ±‚å‘å¸ƒ</h3><p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>æ³¨å†Œå‘å¸ƒç‚¹å‡»äº‹ä»¶<ul>
<li>è¯·æ±‚å‘å¸ƒ</li>
<li>æˆåŠŸï¼šå°†å‘å¸ƒçš„å†…å®¹å±•ç¤ºåˆ°åˆ—è¡¨ä¸­</li>
<li>å¤±è´¥ï¼šæç¤ºå¤±è´¥</li>
</ul>
</li>
</ul>
<p>1ã€å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å‘å¸ƒè¯„è®º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addComment = <span class="function"><span class="params">data</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/comments'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<p>2ã€ç»™å‘å¸ƒæŒ‰é’®ç‚¹å‡»äº‹ä»¶</p>
<p>3ã€äº‹ä»¶å¤„ç†å‡½æ•°</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onAddComment () {</span><br><span class="line">  <span class="comment">// 1. æ‹¿åˆ°æ•°æ®</span></span><br><span class="line">  <span class="keyword">const</span> postMessage = <span class="built_in">this</span>.postMessage</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éç©ºæ ¡éªŒ</span></span><br><span class="line">  <span class="keyword">if</span> (!postMessage) {</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.$toast.loading({</span><br><span class="line">    <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span><br><span class="line">    <span class="attr">message</span>: <span class="string">'å‘å¸ƒä¸­...'</span>,</span><br><span class="line">    <span class="attr">forbidClick</span>: <span class="literal">true</span> <span class="comment">// æ˜¯å¦ç¦æ­¢èƒŒæ™¯ç‚¹å‡»</span></span><br><span class="line">  })</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> {</span><br><span class="line">    <span class="comment">// 2. è¯·æ±‚æäº¤</span></span><br><span class="line">    <span class="keyword">const</span> { data } = <span class="keyword">await</span> addComment({</span><br><span class="line">      <span class="attr">target</span>: <span class="built_in">this</span>.articleId, <span class="comment">// è¯„è®ºçš„ç›®æ ‡idï¼ˆè¯„è®ºæ–‡ç« å³ä¸ºæ–‡ç« idï¼Œå¯¹è¯„è®ºè¿›è¡Œå›å¤åˆ™ä¸ºè¯„è®ºidï¼‰</span></span><br><span class="line">      <span class="attr">content</span>: postMessage</span><br><span class="line">      <span class="comment">// art_id: // æ–‡ç« idï¼Œå¯¹è¯„è®ºå†…å®¹å‘è¡¨å›å¤æ—¶ï¼Œéœ€è¦ä¼ é€’æ­¤å‚æ•°ï¼Œè¡¨æ˜æ‰€å±æ–‡ç« idã€‚å¯¹æ–‡ç« è¿›è¡Œè¯„è®ºï¼Œä¸è¦ä¼ æ­¤å‚æ•°ã€‚</span></span><br><span class="line">    })</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…³é—­å‘å¸ƒè¯„è®ºçš„å¼¹å±‚</span></span><br><span class="line">    <span class="built_in">this</span>.isPostShow = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†æœ€æ–°å‘å¸ƒçš„è¯„è®ºå±•ç¤ºåˆ°åˆ—è¡¨çš„é¡¶éƒ¨</span></span><br><span class="line">    <span class="built_in">this</span>.articleComment.list.unshift(data.data.new_obj)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°æ–‡ç« è¯„è®ºçš„æ€»æ•°é‡</span></span><br><span class="line">    <span class="built_in">this</span>.articleComment.totalCount++</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¸…ç©ºæ–‡æœ¬æ¡†</span></span><br><span class="line">    <span class="built_in">this</span>.postMessage = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.$toast.success(<span class="string">'å‘å¸ƒæˆåŠŸ'</span>)</span><br><span class="line">  } <span class="keyword">catch</span> (err) {</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="built_in">this</span>.$toast.fail(<span class="string">'å‘å¸ƒå¤±è´¥'</span>)</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‘å¸ƒæˆåŠŸå¤„ç†"><a href="#å‘å¸ƒæˆåŠŸå¤„ç†" class="headerlink" title="å‘å¸ƒæˆåŠŸå¤„ç†"></a>å‘å¸ƒæˆåŠŸå¤„ç†</h3><h2 id="è¯„è®ºå›å¤"><a href="#è¯„è®ºå›å¤" class="headerlink" title="è¯„è®ºå›å¤"></a>è¯„è®ºå›å¤</h2><h3 id="å‡†å¤‡å›å¤å¼¹å±‚"><a href="#å‡†å¤‡å›å¤å¼¹å±‚" class="headerlink" title="å‡†å¤‡å›å¤å¼¹å±‚"></a>å‡†å¤‡å›å¤å¼¹å±‚</h3><p>ä¸€ã€åœ¨è¯¦æƒ…é¡µä¸­ä½¿ç”¨å¼¹å±‚ç”¨æ¥å±•ç¤ºæ–‡ç« çš„å›å¤</p>
<p>1ã€åœ¨ data ä¸­æ·»åŠ æ•°æ®ç”¨æ¥æ§åˆ¶å±•ç¤ºå›å¤å¼¹å±‚çš„æ˜¾ç¤ºçŠ¶æ€</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">isReplyShow</span>: <span class="literal">false</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è¯¦æƒ…é¡µä¸­æ·»åŠ ä½¿ç”¨å¼¹å±‚ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isReplyShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">"height: 95%"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  è¯„è®ºå›å¤</span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /è¯„è®ºå›å¤ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>äºŒã€å½“ç‚¹å‡»è¯„è®ºé¡¹ç»„ä»¶ä¸­çš„å›å¤æŒ‰é’®çš„æ—¶å€™å±•ç¤ºå¼¹å±‚</p>
<p>1ã€åœ¨ <code>comment-item.vue</code> ç»„ä»¶ä¸­ç‚¹å‡»å›å¤æŒ‰é’®çš„æ—¶å€™ï¼Œå¯¹å¤–å‘å¸ƒè‡ªå®šä¹‰äº‹ä»¶</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;van-button</span><br><span class="line">  size="mini"</span><br><span class="line">  type="default"</span><br><span class="line">  @click="$emit('click-reply')"</span><br><span class="line">&gt;å›å¤ {{ comment.reply_count }}&lt;/van-button&gt;</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨è¯¦æƒ…é¡µç»„ä»¶ä¸­ä½¿ç”¨çš„ä½ç½®ç›‘å¬å¤„ç†</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">comment-item</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">"(comment, index) in articleComment.list"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:comment</span>=<span class="string">"comment"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click-reply</span>=<span class="string">"isReplyShow = true"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚"><a href="#ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚" class="headerlink" title="ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚"></a>ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚</h3><h3 id="å°è£…å†…å®¹ç»„ä»¶"><a href="#å°è£…å†…å®¹ç»„ä»¶" class="headerlink" title="å°è£…å†…å®¹ç»„ä»¶"></a>å°è£…å†…å®¹ç»„ä»¶</h3><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-reply"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">:title</span>=<span class="string">"`${comment.reply_count}æ¡å›å¤`"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"cross"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$emit('click-close')"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ‰€æœ‰å›å¤"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /åº•éƒ¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentReply'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h3 id="ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹"><a href="#ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹" class="headerlink" title="ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹"></a>ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹</h3><h3 id="å¤„ç†å¤´éƒ¨"><a href="#å¤„ç†å¤´éƒ¨" class="headerlink" title="å¤„ç†å¤´éƒ¨"></a>å¤„ç†å¤´éƒ¨</h3><h3 id="å¤„ç†å½“å‰è¯„è®ºé¡¹"><a href="#å¤„ç†å½“å‰è¯„è®ºé¡¹" class="headerlink" title="å¤„ç†å½“å‰è¯„è®ºé¡¹"></a>å¤„ç†å½“å‰è¯„è®ºé¡¹</h3><p>ä¸€ã€è®© <code>comment-reply.vue</code> ç»„ä»¶æ‹¿åˆ°ç‚¹å‡»å›å¤çš„è¯„è®ºå¯¹è±¡</p>
<p>1ã€åœ¨ <code>comment-item.vue</code> ç»„ä»¶ä¸­ç‚¹å‡»å›å¤æŒ‰é’®çš„æ—¶å€™æŠŠè¯„è®ºå¯¹è±¡ç»™ä¼ å‡ºæ¥</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">  <span class="attr">size</span>=<span class="string">"mini"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">type</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click</span>=<span class="string">"$emit('click-reply', comment)"</span></span></span><br><span class="line"><span class="tag">&gt;</span>å›å¤ {{ comment.reply_count }}<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨æ–‡ç« è¯¦æƒ…ç»„ä»¶ä¸­æ¥æ”¶å¤„ç†</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">currentComment</span>: {} <span class="comment">// ç‚¹å‡»å›å¤çš„é‚£ä¸ªè¯„è®ºå¯¹è±¡</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">comment-item</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-for</span>=<span class="string">"(comment, index) in articleComment.list"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:comment</span>=<span class="string">"comment"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">click-reply</span>=<span class="string">"onReplyShow"</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onReplyShow (comment) {</span><br><span class="line">  <span class="comment">// å°†å­ç»„ä»¶ä¸­ä¼ ç»™æˆ‘è¯„è®ºå¯¹è±¡å­˜å‚¨åˆ°å½“å‰ç»„ä»¶</span></span><br><span class="line">  <span class="built_in">this</span>.currentComment = comment</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// å±•ç¤ºè¯„è®ºå›å¤å¼¹å±‚</span></span><br><span class="line">  <span class="built_in">this</span>.isReplyShow = <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€åœ¨è¯¦æƒ…ç»„ä»¶ä¸­å°† <code>currentComment</code> ä¼ é€’ç»™ <code>comment-reply.vue</code> ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isReplyShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">style</span>=<span class="string">"height: 95%"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comment-reply</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">click-close</span>=<span class="string">"isReplyShow = false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:comment</span>=<span class="string">"currentComment"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /è¯„è®ºå›å¤ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>4ã€åœ¨ <code>comment-reply.vue</code> ç»„ä»¶ä¸­å£°æ˜æ¥æ”¶</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">props: {</span><br><span class="line">  <span class="attr">comment</span>: {</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åä½¿ç”¨è°ƒè¯•å·¥å…·æŸ¥çœ‹ props æ•°æ®æ˜¯å¦æ¥æ”¶æ­£ç¡®ã€‚</p>
<p>äºŒã€åœ¨ <code>comment-reply.vue</code> ç»„ä»¶ä¸­å±•ç¤ºå½“å‰è¯„è®º</p>
<p>1ã€åŠ è½½æ³¨å†Œ <code>comment-item.vue</code> ç»„ä»¶</p>
<p>2ã€ä½¿ç”¨å±•ç¤º</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-reply"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">:title</span>=<span class="string">"`${comment.reply_count}æ¡å›å¤`"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"cross"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$emit('click-close')"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">comment-item</span> <span class="attr">:comment</span>=<span class="string">"comment"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /åº•éƒ¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>





<p>ä¸€ï¼šæŠŠç‚¹å‡»å›å¤çš„è¯„è®ºå¯¹è±¡ä¼ é€’ç»™è¯„è®ºå›å¤ç»„ä»¶</p>
<p>1ã€åœ¨ data ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®ç”¨æ¥å­˜å‚¨ç‚¹å‡»å›å¤çš„è¯„è®ºå¯¹è±¡</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data () {</span><br><span class="line">  <span class="keyword">return</span> {</span><br><span class="line">    ...</span><br><span class="line">    <span class="attr">currentComment</span>: {} <span class="comment">// å­˜å‚¨å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºå¯¹è±¡</span></span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç‚¹å‡»å›å¤çš„å¤„ç†å‡½æ•°ä¸­è¯„è®ºå¯¹è±¡å­˜å‚¨åˆ°æ•°æ®ä¸­</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> onReplyShow (comment) {</span><br><span class="line">+  <span class="built_in">this</span>.currentComment = comment</span><br><span class="line">  <span class="comment">// æ˜¾ç¤ºå›å¤çš„å¼¹å±‚</span></span><br><span class="line">  <span class="built_in">this</span>.isReplyShow = <span class="literal">true</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æŠŠå½“å‰ç»„ä»¶çš„ <code>currentComment</code> ä¼ é€’ç»™è¯„è®ºå›å¤ç»„ä»¶</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isReplyShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">get-container</span>=<span class="string">"body"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">round</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:style</span>=<span class="string">"{ height: '90%' }"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">  + <span class="tag">&lt;<span class="name">comment-reply</span> <span class="attr">:comment</span>=<span class="string">"currentComment"</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- /å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>4ã€åœ¨è¯„è®ºå›å¤ç»„ä»¶ä¸­å£°æ˜ <code>props</code> æ¥æ”¶æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">props: {</span><br><span class="line">  <span class="attr">comment</span>: {</span><br><span class="line">    <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">    <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">  }</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure>

<p>æµ‹è¯•ï¼šç‚¹å‡»ä¸åŒçš„è¯„è®ºå›å¤æŒ‰é’®ï¼ŒæŸ¥çœ‹å­ç»„ä»¶ä¸­çš„ props æ•°æ® <code>comment</code> æ˜¯å¦æ˜¯å½“å‰ç‚¹å‡»å›å¤æ‰€åœ¨çš„è¯„è®ºå¯¹è±¡ã€‚</p>
<p>äºŒã€æ•°æ®ç»‘å®šï¼šåœ¨è¯„è®ºå›å¤ç»„ä»¶ä¸­å±•ç¤ºå½“å‰è¯„è®º</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">+</span><br><span class="line"><span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">:title</span>=<span class="string">"comment.reply_count + 'æ¡å›å¤'"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">slot</span>=<span class="string">"left"</span> <span class="attr">name</span>=<span class="string">"cross"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å½“å‰è¯„è®º --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å½“å‰è¯„è®º"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">    <span class="attr">slot</span>=<span class="string">"icon"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">round</span></span></span><br><span class="line"><span class="tag">    <span class="attr">width</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:src</span>=<span class="string">"comment.aut_photo"</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  + <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"color: #466b9d;"</span> <span class="attr">slot</span>=<span class="string">"title"</span>&gt;</span>{{ comment.aut_name }}<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">"label"</span>&gt;</span></span><br><span class="line">    +</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color: #363636;"</span>&gt;</span>{{ comment.content }}<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">      +</span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"margin-right: 10px;"</span></span></span><br><span class="line"><span class="tag">        &gt;</span>{{ comment.pubdate | relativeTime }}&lt;/span</span><br><span class="line">      &gt;</span><br><span class="line">      <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">size</span>=<span class="string">"mini"</span> <span class="attr">type</span>=<span class="string">"default"</span> +</span></span><br><span class="line"><span class="tag">        &gt;</span>å›å¤ {{ comment.reply_count }}&lt;/van-button</span><br><span class="line">      &gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">van-icon</span> <span class="attr">slot</span>=<span class="string">"right-icon"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /å½“å‰è¯„è®º --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨"><a href="#å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨" class="headerlink" title="å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨"></a>å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨</h3><p>åŸºæœ¬æ€è·¯ï¼š</p>
<ul>
<li>å›å¤åˆ—è¡¨å’Œæ–‡ç« çš„è¯„è®ºåˆ—è¡¨å‡ ä¹æ˜¯ä¸€æ ·çš„</li>
<li>é‡ç”¨æŠŠä¹‹å‰å°è£…çš„è¯„è®ºåˆ—è¡¨</li>
</ul>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"comment-reply"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">:title</span>=<span class="string">"`${comment.reply_count}æ¡å›å¤`"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-icon</span></span></span><br><span class="line"><span class="tag">        <span class="attr">slot</span>=<span class="string">"left"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"cross"</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">"$emit('click-close')"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">comment-item</span> <span class="attr">:comment</span>=<span class="string">"comment"</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å½“å‰è¯„è®ºé¡¹ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ‰€æœ‰å›å¤"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-list</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">"loading"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:finished</span>=<span class="string">"finished"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">finished-text</span>=<span class="string">"æ²¡æœ‰æ›´å¤šäº†"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">load</span>=<span class="string">"onLoad"</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">comment-item</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-for</span>=<span class="string">"(comment, index) in list"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:key</span>=<span class="string">"index"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:comment</span>=<span class="string">"comment"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-list</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /è¯„è®ºçš„å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- åº•éƒ¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /åº•éƒ¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> CommentItem <span class="keyword">from</span> <span class="string">'./comment-item'</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> { getComments } <span class="keyword">from</span> <span class="string">'@/api/comment'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'CommentReply'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {</span></span><br><span class="line"><span class="javascript">    CommentItem</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">comment</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">      <span class="attr">list</span>: [],</span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">finished</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">offset</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">limit</span>: <span class="number">20</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">async</span> onLoad () {</span></span><br><span class="line"><span class="javascript">      <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> { data } = <span class="keyword">await</span> getComments({</span></span><br><span class="line"><span class="javascript">        <span class="attr">type</span>: <span class="string">'c'</span>, <span class="comment">// è¯„è®ºç±»å‹ï¼Œa-å¯¹æ–‡ç« (article)çš„è¯„è®ºï¼Œc-å¯¹è¯„è®º(comment)çš„å›å¤</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">source</span>: <span class="built_in">this</span>.comment.com_id.toString(), <span class="comment">// æºidï¼Œæ–‡ç« idæˆ–è¯„è®ºid</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">offset</span>: <span class="built_in">this</span>.offset, <span class="comment">// è·å–è¯„è®ºæ•°æ®çš„åç§»é‡ï¼Œå€¼ä¸ºè¯„è®ºidï¼Œè¡¨ç¤ºä»æ­¤idçš„æ•°æ®å‘åå–ï¼Œä¸ä¼ è¡¨ç¤ºä»ç¬¬ä¸€é¡µå¼€å§‹è¯»å–æ•°æ®</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">limit</span>: <span class="built_in">this</span>.limit <span class="comment">// è·å–çš„è¯„è®ºæ•°æ®ä¸ªæ•°ï¼Œä¸ä¼ è¡¨ç¤ºé‡‡ç”¨åç«¯æœåŠ¡è®¾å®šçš„é»˜è®¤æ¯é¡µæ•°æ®é‡</span></span></span><br><span class="line"><span class="javascript">      })</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 2. å°†æ•°æ®æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> { results } = data.data</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.list.push(...results)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 3. å…³é—­ loading</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (results.length) {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.offset = data.data.last_id</span></span><br><span class="line"><span class="javascript">      } <span class="keyword">else</span> {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.finished = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h3 id="è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜"><a href="#è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜" class="headerlink" title="è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜"></a>è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜</h3><p>å¼¹å±‚ç»„ä»¶ï¼š</p>
<ul>
<li>å¦‚æœåˆå§‹çš„æ¡ä»¶æ˜¯ falseï¼Œåˆ™å¼¹å±‚çš„å†…å®¹ä¸ä¼šæ¸²æŸ“</li>
<li>ç¨‹åºè¿è¡ŒæœŸé—´ï¼Œå½“æ¡ä»¶å˜ä¸º true çš„æ—¶å€™ï¼Œå¼¹å±‚æ‰æ¸²æŸ“äº†å†…å®¹</li>
<li>ä¹‹ååˆ‡æ¢å¼¹å±‚çš„å±•ç¤ºï¼Œå¼¹å±‚åªæ˜¯é€šè¿‡ CSS æ§åˆ¶éšè—å’Œæ˜¾ç¤º</li>
</ul>
<p>å¼¹å±‚æ¸²æŸ“å‡ºæ¥ä»¥åå°±åªæ˜¯ç®€å•çš„åˆ‡æ¢æ˜¾ç¤ºå’Œéšè—ï¼Œé‡Œé¢çš„å†…å®¹ä¹Ÿä¸å†é‡æ–°æ¸²æŸ“äº†ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´æˆ‘ä»¬çš„è¯„è®ºçš„å›å¤åˆ—è¡¨ä¸ä¼šåŠ¨æ€æ›´æ–°äº†ã€‚è§£å†³åŠæ³•å°±æ˜¯åœ¨æ¯æ¬¡å¼¹å±‚æ˜¾ç¤ºçš„æ—¶å€™é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">van-popup</span></span></span><br><span class="line"><span class="tag">  <span class="attr">v-model</span>=<span class="string">"isReplyShow"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">get-container</span>=<span class="string">"body"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">round</span></span></span><br><span class="line"><span class="tag">  <span class="attr">position</span>=<span class="string">"bottom"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">:style</span>=<span class="string">"{ height: '90%' }"</span></span></span><br><span class="line"><span class="tag">&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">comment-reply</span> <span class="attr">:comment</span>=<span class="string">"currentComment"</span> + <span class="attr">v-if</span>=<span class="string">"isReplyShow"</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- /å›å¤åˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-popup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è¯„è®ºå›å¤ --&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<h3 id="å‘å¸ƒå›å¤"><a href="#å‘å¸ƒå›å¤" class="headerlink" title="å‘å¸ƒå›å¤"></a>å‘å¸ƒå›å¤</h3><h1 id="ä¹ã€ç”¨æˆ·é¡µé¢"><a href="#ä¹ã€ç”¨æˆ·é¡µé¢" class="headerlink" title="ä¹ã€ç”¨æˆ·é¡µé¢"></a>ä¹ã€ç”¨æˆ·é¡µé¢</h1><blockquote>
<p>è¯¥æ¨¡å—ä½œä¸ºå­¦ç”Ÿä½œä¸šï¼Œä¸è®²è§£ï¼Œä»…ä¾›æºç å‚è€ƒã€‚</p>
</blockquote>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200111104547462.png" alt="image-20200111104547462" width="250">



<h2 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-3"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-3" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h2><p>1ã€åˆ›å»º <code>views/user/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-container"</span>&gt;</span>ç”¨æˆ·é¡µé¢<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'UserPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€é…ç½®åˆ°æ ¹è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/user/:userId'</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'user'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/user'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>æœ€åè®¿é—® <code>/user/ç”¨æˆ·ID</code> æµ‹è¯•ã€‚</p>
<h2 id="é¡µé¢å¸ƒå±€-5"><a href="#é¡µé¢å¸ƒå±€-5" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"page-nav-bar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">left-arrow</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"ç”¨æˆ·å"</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click-left</span>=<span class="string">"$router.back()"</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">van-nav-bar</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-info"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"base-info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right-area"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-wrap"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>66<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>88<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å…³æ³¨<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>28<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>ç²‰ä¸<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"stats-item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>160<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è·èµ<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">class</span>=<span class="string">"follow-btn"</span>&gt;</span>å…³æ³¨<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"label-info"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bio-wrap"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"label"</span>&gt;</span>ç®€ä»‹ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è¿™æ˜¯ç”¨æˆ·ç®€ä»‹<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'UserIndex'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {</span></span><br><span class="line"><span class="javascript">    <span class="attr">userId</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: [<span class="built_in">Number</span>, <span class="built_in">String</span>, <span class="built_in">Object</span>],</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.user-container</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.user-info</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">25px</span> <span class="number">32px</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.base-info</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin-bottom</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">155px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">155px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">margin-right</span>: <span class="number">62px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.label-info</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">font-size</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.bio-wrap</span> {</span></span><br><span class="line"><span class="css">        <span class="selector-class">.label</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">color</span>: <span class="number">#646263</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">        <span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">color</span>: <span class="number">#212121</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">  <span class="selector-class">.right-area</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">flex</span>: <span class="number">1</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">    <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">    <span class="attribute">justify-content</span>: space-evenly;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.stats-wrap</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.stats-item</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">        <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">        <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">        <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.count</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">font-size</span>: <span class="number">26px</span>;</span></span><br><span class="line"><span class="css">          <span class="attribute">color</span>: <span class="number">#0d0a10</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">        <span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">font-size</span>: <span class="number">21px</span>;</span></span><br><span class="line"><span class="css">          <span class="attribute">color</span>: <span class="number">#9c9b9d</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.follow-btn</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">289px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">55px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">line-height</span>: <span class="number">55px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">background-color</span>: <span class="number">#6bb5ff</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-container"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">title</span>=<span class="string">"é»‘é©¬å¤´æ¡å·"</span> <span class="attr">left-arrow</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-info-container"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row1"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">          <span class="attr">class</span>=<span class="string">"col1"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">          <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col2"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å‘å¸ƒ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>å…³æ³¨<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>ç²‰ä¸<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"count"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>è·èµ<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"action"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">"primary"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">            &gt;</span>ç§ä¿¡<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">van-button</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">"default"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">size</span>=<span class="string">"small"</span></span></span><br><span class="line"><span class="tag">            &gt;</span>ç¼–è¾‘èµ„æ–™<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"intro-wrap"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>è®¤è¯ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç®€ä»‹ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç”¨æˆ·çš„ç®€ä»‹ä¿¡æ¯<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /ç”¨æˆ·ä¿¡æ¯ --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ–‡ç« åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /æ–‡ç« åˆ—è¡¨ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'UserPage'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.user-container</span> {</span></span><br><span class="line"><span class="css">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="css">  <span class="selector-class">.user-info-container</span> {</span></span><br><span class="line"><span class="css">    <span class="attribute">padding</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="css">    <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">    &gt;<span class="selector-class">.row1</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">      <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">      <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-class">.item</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.text</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      &gt;<span class="selector-class">.col1</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">      &gt;<span class="selector-class">.col2</span> {</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">        <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">        <span class="attribute">justify-content</span>: space-evenly;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">70%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">80px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span>;</span></span><br><span class="line"><span class="css">        &gt;<span class="selector-class">.row1</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">          <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">        <span class="selector-class">.action</span> {</span></span><br><span class="line"><span class="css">          <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">          <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">          <span class="selector-class">.van-button</span> {</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">45%</span>;</span></span><br><span class="line"><span class="css">          }</span></span><br><span class="line"><span class="css">        }</span></span><br><span class="line"><span class="css">      }</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="å±•ç¤ºç”¨æˆ·ä¿¡æ¯"><a href="#å±•ç¤ºç”¨æˆ·ä¿¡æ¯" class="headerlink" title="å±•ç¤ºç”¨æˆ·ä¿¡æ¯"></a>å±•ç¤ºç”¨æˆ·ä¿¡æ¯</h2><p>æ­¥éª¤ï¼š</p>
<ul>
<li>å°è£…æ•°æ®æ¥å£</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯çš„æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æŒ‡å®šç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getUserById = <span class="function"><span class="params">userId</span> =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/users/<span class="subst">${userId}</span>`</span></span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç”¨æˆ·é¡µé¢ä¸­è¯·æ±‚è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">+ <span class="keyword">import</span> { getUserById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'UserPage'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {},</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">+      user: {} <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">  created () {</span><br><span class="line">+    <span class="built_in">this</span>.loadUser()</span><br><span class="line">  },</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">+++    <span class="keyword">async</span> loadUser () {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getUserById(<span class="built_in">this</span>.$route.params.userId)</span><br><span class="line">        <span class="built_in">this</span>.user = data.data</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">        <span class="built_in">this</span>.$toast(<span class="string">'è·å–ç”¨æˆ·æ•°æ®å¤±è´¥'</span>)</span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<h2 id="ç”¨æˆ·å…³æ³¨"><a href="#ç”¨æˆ·å…³æ³¨" class="headerlink" title="ç”¨æˆ·å…³æ³¨"></a>ç”¨æˆ·å…³æ³¨</h2><h2 id="å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨"><a href="#å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨" class="headerlink" title="å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨"></a>å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨</h2><h3 id="åˆ—è¡¨ç»„ä»¶"><a href="#åˆ—è¡¨ç»„ä»¶" class="headerlink" title="åˆ—è¡¨ç»„ä»¶"></a>åˆ—è¡¨ç»„ä»¶</h3><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;van-list</span><br><span class="line">  v-model="loading"</span><br><span class="line">  :finished="finished"</span><br><span class="line">  finished-text="æ²¡æœ‰æ›´å¤šäº†"</span><br><span class="line">  @load="onLoad"</span><br><span class="line">&gt;</span><br><span class="line">  &lt;van-cell</span><br><span class="line">    v-for="item in list"</span><br><span class="line">    :key="item"</span><br><span class="line">    :title="item"</span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/van-list&gt;</span><br><span class="line">export default {</span><br><span class="line">  data() {</span><br><span class="line">    return {</span><br><span class="line">      list: [],</span><br><span class="line">      loading: false,</span><br><span class="line">      finished: false</span><br><span class="line">    };</span><br><span class="line">  },</span><br><span class="line"></span><br><span class="line">  methods: {</span><br><span class="line">    onLoad() {</span><br><span class="line">      // å¼‚æ­¥æ›´æ–°æ•°æ®</span><br><span class="line">      setTimeout(() =&gt; {</span><br><span class="line">        for (let i = 0; i &lt; 10; i++) {</span><br><span class="line">          this.list.push(this.list.length + 1);</span><br><span class="line">        }</span><br><span class="line">        // åŠ è½½çŠ¶æ€ç»“æŸ</span><br><span class="line">        this.loading = false;</span><br><span class="line"></span><br><span class="line">        // æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆ</span><br><span class="line">        if (this.list.length &gt;= 40) {</span><br><span class="line">          this.finished = true;</span><br><span class="line">        }</span><br><span class="line">      }, 500);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h3 id="åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨"><a href="#åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨" class="headerlink" title="åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨"></a>åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨</h3><p>List çš„è¿è¡Œæœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List ä¼šç›‘å¬æµè§ˆå™¨çš„æ»šåŠ¨äº‹ä»¶å¹¶è®¡ç®—åˆ—è¡¨çš„ä½ç½®ï¼Œå½“åˆ—è¡¨åº•éƒ¨ä¸å¯è§†åŒºåŸŸçš„è·ç¦»å°äºoffsetæ—¶ï¼ŒList ä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ã€‚</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸ºä»€ä¹ˆ List åˆå§‹åŒ–åä¼šç«‹å³è§¦å‘ load äº‹ä»¶ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List åˆå§‹åŒ–åä¼šè§¦å‘ä¸€æ¬¡ load äº‹ä»¶ï¼Œç”¨äºåŠ è½½ç¬¬ä¸€å±çš„æ•°æ®ï¼Œè¿™ä¸ªç‰¹æ€§å¯ä»¥é€šè¿‡`immediate-check`å±æ€§å…³é—­ã€‚</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸ºä»€ä¹ˆä¼šè¿ç»­è§¦å‘ load äº‹ä»¶ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœä¸€æ¬¡è¯·æ±‚åŠ è½½çš„æ•°æ®æ¡æ•°è¾ƒå°‘ï¼Œå¯¼è‡´åˆ—è¡¨å†…å®¹æ— æ³•é“ºæ»¡å½“å‰å±å¹•ï¼ŒList ä¼šç»§ç»­è§¦å‘ load äº‹ä»¶ï¼Œç›´åˆ°å†…å®¹é“ºæ»¡å±å¹•æˆ–æ•°æ®å…¨éƒ¨åŠ è½½å®Œæˆã€‚å› æ­¤ä½ éœ€è¦è°ƒæ•´æ¯æ¬¡è·å–çš„æ•°æ®æ¡æ•°ï¼Œç†æƒ³æƒ…å†µä¸‹æ¯æ¬¡è¯·æ±‚è·å–çš„æ•°æ®æ¡æ•°åº”èƒ½å¤Ÿå¡«æ»¡ä¸€å±é«˜åº¦ã€‚</span><br></pre></td></tr></tbody></table></figure>

<p>loading å’Œ finished åˆ†åˆ«æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ</p>
<blockquote>
<p><code>List</code>æœ‰ä»¥ä¸‹ä¸‰ç§çŠ¶æ€ï¼Œç†è§£è¿™äº›çŠ¶æ€æœ‰åŠ©äºä½ æ­£ç¡®åœ°ä½¿ç”¨<code>List</code>ç»„ä»¶ï¼š</p>
<ul>
<li>éåŠ è½½ä¸­ï¼Œ<code>loading</code>ä¸º<code>false</code>ï¼Œæ­¤æ—¶ä¼šæ ¹æ®åˆ—è¡¨æ»šåŠ¨ä½ç½®åˆ¤æ–­æ˜¯å¦è§¦å‘<code>load</code>äº‹ä»¶ï¼ˆåˆ—è¡¨å†…å®¹ä¸è¶³ä¸€å±å¹•æ—¶ï¼Œä¼šç›´æ¥è§¦å‘ï¼‰</li>
<li>åŠ è½½ä¸­ï¼Œ<code>loading</code>ä¸º<code>true</code>ï¼Œè¡¨ç¤ºæ­£åœ¨å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘<code>load</code>äº‹ä»¶</li>
<li>åŠ è½½å®Œæˆï¼Œ<code>finished</code>ä¸º<code>true</code>ï¼Œæ­¤æ—¶ä¸ä¼šè§¦å‘<code>load</code>äº‹ä»¶</li>
</ul>
<p>åœ¨æ¯æ¬¡è¯·æ±‚å®Œæ¯•åï¼Œéœ€è¦æ‰‹åŠ¨å°†<code>loading</code>è®¾ç½®ä¸º<code>false</code>ï¼Œè¡¨ç¤ºæœ¬æ¬¡ load åŠ è½½ç»“æŸ</p>
</blockquote>
<p>ä½¿ç”¨ float å¸ƒå±€åä¸€ç›´è§¦å‘åŠ è½½ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è‹¥ List çš„å†…å®¹ä½¿ç”¨äº† float å¸ƒå±€ï¼Œå¯ä»¥åœ¨å®¹å™¨ä¸Šæ·»åŠ van-clearfixç±»åæ¥æ¸…é™¤æµ®åŠ¨ï¼Œä½¿å¾— List èƒ½æ­£ç¡®åˆ¤æ–­å…ƒç´ ä½ç½®</span><br></pre></td></tr></tbody></table></figure>

<h3 id="å±•ç¤ºæ–‡ç« åˆ—è¡¨"><a href="#å±•ç¤ºæ–‡ç« åˆ—è¡¨" class="headerlink" title="å±•ç¤ºæ–‡ç« åˆ—è¡¨"></a>å±•ç¤ºæ–‡ç« åˆ—è¡¨</h3><p>1ã€å°è£…è·å–ç”¨æˆ·æ–‡ç« åˆ—è¡¨çš„æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–æŒ‡å®šç”¨æˆ·çš„æ–‡ç« åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getArticlesByUser = <span class="function">(<span class="params">userId, params</span>) =&gt;</span> {</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">`/app/v1_0/users/<span class="subst">${userId}</span>/articles`</span>,</span><br><span class="line">    params</span><br><span class="line">  })</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ç”¨æˆ·é¡µé¢ä¸­è¯·æ±‚è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> { getUserById } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span><br><span class="line">+ <span class="keyword">import</span> { getArticlesByUser } <span class="keyword">from</span> <span class="string">'@/api/article'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> {</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'UserPage'</span>,</span><br><span class="line">  <span class="attr">components</span>: {},</span><br><span class="line">  <span class="attr">props</span>: {},</span><br><span class="line">  data () {</span><br><span class="line">    <span class="keyword">return</span> {</span><br><span class="line">      <span class="attr">user</span>: {}, <span class="comment">// ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">      <span class="attr">list</span>: [], <span class="comment">// åˆ—è¡¨æ•°æ®</span></span><br><span class="line">      <span class="attr">loading</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„ loading</span></span><br><span class="line">      <span class="attr">finished</span>: <span class="literal">false</span>, <span class="comment">// æ§åˆ¶æ˜¯å¦åŠ è½½ç»“æŸäº†</span></span><br><span class="line">+      page: <span class="number">1</span> <span class="comment">// è·å–ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">    }</span><br><span class="line">  },</span><br><span class="line">  <span class="attr">computed</span>: {},</span><br><span class="line">  <span class="attr">watch</span>: {},</span><br><span class="line">  created () {</span><br><span class="line">    <span class="built_in">this</span>.loadUser()</span><br><span class="line">  },</span><br><span class="line">  mounted () {},</span><br><span class="line">  <span class="attr">methods</span>: {</span><br><span class="line">    <span class="keyword">async</span> loadUser () {</span><br><span class="line">      <span class="keyword">try</span> {</span><br><span class="line">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getUserById(<span class="built_in">this</span>.$route.params.userId)</span><br><span class="line">        <span class="built_in">this</span>.user = data.data</span><br><span class="line">      } <span class="keyword">catch</span> (err) {</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">        <span class="built_in">this</span>.$toast(<span class="string">'è·å–ç”¨æˆ·æ•°æ®å¤±è´¥'</span>)</span><br><span class="line">      }</span><br><span class="line">    },</span><br><span class="line"></span><br><span class="line">+++    <span class="keyword">async</span> onLoad () {</span><br><span class="line">      <span class="comment">// 1. è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">      <span class="keyword">const</span> { data } = <span class="keyword">await</span> getArticlesByUser(<span class="built_in">this</span>.$route.params.userId, {</span><br><span class="line">        <span class="attr">page</span>: <span class="built_in">this</span>.page, <span class="comment">// å¯é€‰çš„ï¼Œé»˜è®¤æ˜¯ç¬¬ 1 é¡µ</span></span><br><span class="line">        <span class="attr">per_page</span>: <span class="number">20</span> <span class="comment">// å¯é€‰çš„ï¼Œé»˜è®¤æ¯é¡µ 10 æ¡</span></span><br><span class="line">      })</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 2. æŠŠæ•°æ®æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line">      <span class="comment">// list []</span></span><br><span class="line">      <span class="comment">// data.data.results []</span></span><br><span class="line">      <span class="comment">// ...[1, 2, 3] ä¼šæŠŠæ•°ç»„ç»™å±•å¼€ï¼Œæ‰€è°“çš„å±•å¼€å°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„æ‹¿å‡ºæ¥</span></span><br><span class="line">      <span class="keyword">const</span> { results } = data.data</span><br><span class="line">      <span class="built_in">this</span>.list.push(...results)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 3. åŠ è½½çŠ¶æ€ç»“æŸ</span></span><br><span class="line">      <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 4. åˆ¤æ–­æ•°æ®æ˜¯å¦å…¨éƒ¨åŠ è½½å®Œæ¯•</span></span><br><span class="line">      <span class="keyword">if</span> (results.length) {</span><br><span class="line">        <span class="built_in">this</span>.page++ <span class="comment">// æ›´æ–°è·å–ä¸‹ä¸€é¡µæ•°æ®çš„é¡µç </span></span><br><span class="line">      } <span class="keyword">else</span> {</span><br><span class="line">        <span class="built_in">this</span>.finished = <span class="literal">true</span> <span class="comment">// æ²¡æœ‰æ•°æ®äº†ï¼Œä¸éœ€è¦åŠ è½½æ›´å¤šäº†</span></span><br><span class="line">      }</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h1 id="åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™"><a href="#åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™" class="headerlink" title="åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™"></a>åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™</h1><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1566431661910.png" width="300">



<h2 id="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-4"><a href="#åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±-4" class="headerlink" title="åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±"></a>åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</h2><p>1ã€åˆ›å»º <code>views/user/index.vue</code></p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">title</span>=<span class="string">"ä¸ªäººä¿¡æ¯"</span> <span class="attr">left-arrow</span> <span class="attr">right-text</span>=<span class="string">"ä¿å­˜"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å¤´åƒ"</span> <span class="attr">is-link</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">          <span class="attr">round</span></span></span><br><span class="line"><span class="tag">          <span class="attr">width</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">height</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">src</span>=<span class="string">"http://toutiao.meiduo.site/FgSTA3msGyxp5-Oufnm5c0kjVgW7"</span></span></span><br><span class="line"><span class="tag">        /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ˜µç§°"</span> <span class="attr">value</span>=<span class="string">"abc"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ€§åˆ«"</span> <span class="attr">value</span>=<span class="string">"ç”·"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”Ÿæ—¥"</span> <span class="attr">value</span>=<span class="string">"2019-9-27"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">"UserIndex"</span></span></span><br><span class="line"><span class="javascript">  };</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€å°†è¯¥é¡µé¢é…ç½®åˆ°æ ¹è·¯ç”±</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="attr">name</span>: <span class="string">'user-profile'</span>,</span><br><span class="line">  <span class="attr">path</span>: <span class="string">'/user/profile'</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">'@/views/user-profile'</span>)</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h2 id="é¡µé¢å¸ƒå±€-6"><a href="#é¡µé¢å¸ƒå±€-6" class="headerlink" title="é¡µé¢å¸ƒå±€"></a>é¡µé¢å¸ƒå±€</h2><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"user-profile"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¯¼èˆªæ  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"page-nav-bar"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"ä¸ªäººä¿¡æ¯"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">left-arrow</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">click-left</span>=<span class="string">"$router.back()"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /å¯¼èˆªæ  --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ä¸ªäººä¿¡æ¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">class</span>=<span class="string">"avatar-cell"</span> <span class="attr">title</span>=<span class="string">"å¤´åƒ"</span> <span class="attr">is-link</span> <span class="attr">center</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-image</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">"avatar"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">round</span></span></span><br><span class="line"><span class="tag">        <span class="attr">fit</span>=<span class="string">"cover"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">src</span>=<span class="string">"https://img.yzcdn.cn/vant/cat.jpeg"</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ˜µç§°"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ€§åˆ«"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”Ÿæ—¥"</span> <span class="attr">value</span>=<span class="string">"å†…å®¹"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- /ä¸ªäººä¿¡æ¯ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">'UserProfile'</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: {},</span></span><br><span class="line"><span class="javascript">  data () {</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> {}</span></span><br><span class="line"><span class="javascript">  },</span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">watch</span>: {},</span></span><br><span class="line"><span class="javascript">  created () {},</span></span><br><span class="line"><span class="javascript">  mounted () {},</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: {}</span></span><br><span class="line"><span class="javascript">}</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">"less"</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.user-profile</span> {</span></span><br><span class="line"><span class="css">  <span class="selector-class">.avatar-cell</span> {</span></span><br><span class="line"><span class="css">    <span class="selector-class">.van-cell__value</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">      <span class="attribute">flex-direction</span>: row-reverse;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">    <span class="selector-class">.avatar</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">60px</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  }</span></span><br><span class="line"><span class="css">}</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<h2 id="å±•ç¤ºç”¨æˆ·ä¿¡æ¯-1"><a href="#å±•ç¤ºç”¨æˆ·ä¿¡æ¯-1" class="headerlink" title="å±•ç¤ºç”¨æˆ·ä¿¡æ¯"></a>å±•ç¤ºç”¨æˆ·ä¿¡æ¯</h2><p>æ€è·¯ï¼š</p>
<ul>
<li>æ‰¾åˆ°æ•°æ®æ¥å£</li>
<li>å°è£…è¯·æ±‚æ–¹æ³•</li>
<li>è¯·æ±‚è·å–æ•°æ®</li>
<li>æ¨¡æ¿ç»‘å®š</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ <code>views/user/index.vue</code> ç»„ä»¶ä¸­è¯·æ±‚è·å–æ•°æ®</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>3ã€æ¨¡æ¿ç»‘å®š</p>
<h2 id="ä¿®æ”¹æ˜µç§°"><a href="#ä¿®æ”¹æ˜µç§°" class="headerlink" title="ä¿®æ”¹æ˜µç§°"></a>ä¿®æ”¹æ˜µç§°</h2><p>ä¸€ã€å‡†å¤‡å¼¹å‡ºå±‚</p>
<p>äºŒã€å°è£…ç»„ä»¶</p>
<p>ä¸‰ã€é¡µé¢å¸ƒå±€</p>
<p>å››ã€åŸºæœ¬åŠŸèƒ½å¤„ç†</p>
<p>äº”ã€æ›´æ–°å®Œæˆ</p>
<h2 id="ä¿®æ”¹æ€§åˆ«"><a href="#ä¿®æ”¹æ€§åˆ«" class="headerlink" title="ä¿®æ”¹æ€§åˆ«"></a>ä¿®æ”¹æ€§åˆ«</h2><h2 id="ä¿®æ”¹ç”Ÿæ—¥"><a href="#ä¿®æ”¹ç”Ÿæ—¥" class="headerlink" title="ä¿®æ”¹ç”Ÿæ—¥"></a>ä¿®æ”¹ç”Ÿæ—¥</h2><h2 id="ä¿®æ”¹å¤´åƒ"><a href="#ä¿®æ”¹å¤´åƒ" class="headerlink" title="ä¿®æ”¹å¤´åƒ"></a>ä¿®æ”¹å¤´åƒ</h2><h3 id="å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ"><a href="#å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ" class="headerlink" title="å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ"></a>å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ</h3><p>æ–¹å¼ä¸€ï¼šç»“åˆæœåŠ¡å™¨çš„å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ</p>
<p><img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/1567067894388.png" alt="1567067894388"></p>
<p>æ–¹å¼äºŒï¼šçº¯å®¢æˆ·ç«¯å®ç°ä¸Šä¼ å›¾ç‰‡é¢„è§ˆ</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ–‡æ–‡ä»¶å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> file = fileInput.files[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®å›¾ç‰‡çš„ src</span></span><br><span class="line">img.src = <span class="built_in">window</span>.URL.createObjectURL(file)</span><br></pre></td></tr></tbody></table></figure>

<p>å®¢æˆ·ç«¯ä¸Šä¼ é¢„è§ˆç¤ºä¾‹ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>å®¢æˆ·ç«¯å›¾ç‰‡ä¸Šä¼ é¢„è§ˆç¤ºä¾‹<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.img-wrap</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">width</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="css">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">img</span> {</span></span><br><span class="line"><span class="css">      <span class="attribute">max-width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    }</span></span><br><span class="line"><span class="css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>å®¢æˆ·ç«¯å›¾ç‰‡ä¸Šä¼ é¢„è§ˆç¤ºä¾‹<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"img-wrap"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"file"</span> <span class="attr">onchange</span>=<span class="string">"onFileChange()"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> img = <span class="built_in">document</span>.querySelector(<span class="string">'#img'</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> file = <span class="built_in">document</span>.querySelector(<span class="string">'#file'</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">onFileChange</span>(<span class="params"></span>) </span>{</span></span><br><span class="line"><span class="javascript">      <span class="comment">// å¾—åˆ° file-input çš„æ–‡ä»¶å¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> fileObj = file.files[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> data = <span class="built_in">window</span>.URL.createObjectURL(fileObj)</span></span><br><span class="line"><span class="javascript">      img.src = data</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>æ¥ä¸‹æ¥å°±æ˜¯åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çº¯å®¢æˆ·ç«¯çš„æ–¹å¼å¤„ç†ç”¨æˆ·å¤´åƒä¸Šä¼ é¢„è§ˆã€‚</p>
<p>åœ¨ <code>views/user/index.vue</code> ç»„ä»¶ä¸­ï¼š</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span> <span class="attr">title</span>=<span class="string">"ä¸ªäººä¿¡æ¯"</span> <span class="attr">left-arrow</span> <span class="attr">right-text</span>=<span class="string">"ä¿å­˜"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">      +</span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å¤´åƒ"</span> <span class="attr">is-link</span> @<span class="attr">click</span>=<span class="string">"onChangePhoto"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span> <span class="attr">round</span> <span class="attr">width</span>=<span class="string">"30"</span> <span class="attr">height</span>=<span class="string">"30"</span> <span class="attr">:src</span>=<span class="string">"user.photo"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ˜µç§°"</span> <span class="attr">:value</span>=<span class="string">"user.name"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ€§åˆ«"</span> <span class="attr">:value</span>=<span class="string">"user.gender === 0 ? 'ç”·' : 'å¥³'"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”Ÿæ—¥"</span> <span class="attr">:value</span>=<span class="string">"user.birthday"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      è¡¨å•å…ƒç´ çš„ hidden è¡¨ç¤ºéšè—è¿™ä¸ªè¡¨å•å…ƒç´ </span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    + <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">hidden</span> <span class="attr">ref</span>=<span class="string">"file"</span> @<span class="attr">change</span>=<span class="string">"onFileChange"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> { getProfile } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">'UserIndex'</span>,</span></span><br><span class="line"><span class="javascript">    data () {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">        <span class="attr">user</span>: {}</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    created () {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.loadUserProfile()</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">async</span> loadUserProfile () {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getProfile()</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.user = data.data</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  +    onChangePhoto () {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$refs.file.click()</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  +    onFileChange () {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.user.photo = <span class="built_in">window</span>.URL.createObjectURL(<span class="built_in">this</span>.$refs.file.files[<span class="number">0</span>])</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>


<h3 id="å¤´åƒè£åˆ‡"><a href="#å¤´åƒè£åˆ‡" class="headerlink" title="å¤´åƒè£åˆ‡"></a>å¤´åƒè£åˆ‡</h3><p>æ–¹æ¡ˆä¸€ï¼šç»“åˆæœåŠ¡ç«¯çš„å›¾ç‰‡è£åˆ‡ä¸Šä¼ æµç¨‹</p>
<img src="/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/image-20200418015503681.png" alt="image-20200418015503681">

<p>æ–¹æ¡ˆäºŒï¼šçº¯å®¢æˆ·ç«¯çš„å›¾ç‰‡è£åˆ‡ä¸Šä¼ æµç¨‹</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/Input/file">&lt;input type=â€fileâ€&gt;</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/File/Using_files_from_web_applications">åœ¨webåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ–‡ä»¶</a></li>
</ul>
<figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">viewMode: 1,</span><br><span class="line">dragMode: 'move',</span><br><span class="line">aspectRatio: 1,</span><br><span class="line">autoCropArea: 1,</span><br><span class="line">cropBoxMovable: false,</span><br><span class="line">cropBoxResizable: false,</span><br><span class="line">background: false,</span><br><span class="line">movable: true</span><br></pre></td></tr></tbody></table></figure>



<h3 id="ä¿å­˜æ›´æ–°"><a href="#ä¿å­˜æ›´æ–°" class="headerlink" title="ä¿å­˜æ›´æ–°"></a>ä¿å­˜æ›´æ–°</h3><p>å¦‚æœæ˜¯åŸºäºæœåŠ¡ç«¯çš„è£åˆ‡ï¼Œåˆ™ä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://github.com/fengyuanchen/cropperjs#getdatarounded">getData</a> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¾—åˆ°è£åˆ‡çš„åŒºåŸŸå‚æ•°ã€‚</p>
<p>å¦‚æœæ˜¯çº¯å®¢æˆ·ç«¯çš„å›¾ç‰‡è£åˆ‡ï¼Œåˆ™ä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://github.com/fengyuanchen/cropperjs#getcroppedcanvasoptions">getCroppedCanvas</a> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¾—åˆ°è£åˆ‡ä¹‹åçš„å›¾ç‰‡å¯¹è±¡ï¼ˆç±»ä¼¼äºURL.createObjectURL æ–¹æ³•å¾—åˆ°çš„æ–‡ä»¶å¯¹è±¡ï¼‰ã€‚</p>
<p>æ­¥éª¤ï¼š</p>
<ul>
<li>å°è£…æ¥å£</li>
<li>è¯·æ±‚æäº¤</li>
<li>æ›´æ–°è§†å›¾</li>
</ul>
<p>1ã€åœ¨ <code>api/user.js</code> ä¸­æ·»åŠ å°è£…æ•°æ®æ¥å£</p>
<figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1ã€æ¥å£é‡ç”¨</span></span><br><span class="line"><span class="comment"> * 2ã€æ¥å£ç»´æŠ¤</span></span><br><span class="line"><span class="comment"> * å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¥å£ç»å¸¸å®¹æ˜“å˜åŒ–ï¼Œ</span></span><br><span class="line"><span class="comment"> * ä½ èƒ½è®°ä½ä½ åœ¨å“ªé‡Œè¯·æ±‚äº†è¿™ä¸ªæ¥å£å—ï¼Ÿå¾ˆéš¾è®°ä½</span></span><br><span class="line"><span class="comment"> * æ€ä¹ˆåŠå‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment"> *  æˆ‘ä»¬å•ç‹¬çš„æŠŠæ¥å£è¯·æ±‚çš„ä»£ç å°è£…èµ·æ¥ï¼Œç»Ÿä¸€çš„æ”¾åˆ°ä¸€èµ·ã€‚</span></span><br><span class="line"><span class="comment"> * æ”¾åˆ°å“ªé‡Œå‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment"> *  æˆ‘ä»¬æ”¾åˆ°é¡¹ç›®çš„ api ç›®å½•ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment"> *  æ ¹æ®æ¥å£çš„ç§ç±»è¿›è¡Œå½’ç±»ç®¡ç†</span></span><br><span class="line"><span class="comment"> *  ä¾‹å¦‚ç”¨æˆ·ç›¸å…³çš„æ¥å£æ”¾åˆ° user.js ä¸­</span></span><br><span class="line"><span class="comment"> *      æ–‡ç« ç›¸å…³çš„æ¥å£æ”¾åˆ° article.js ä¸­</span></span><br><span class="line"><span class="comment"> * å¦‚ä½•å°è£…å‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment"> *  ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶å‚æ•°ï¼Œè¿”å›è¯·æ±‚ç»“æœå°±å¯ä»¥äº†ã€‚</span></span><br><span class="line"><span class="comment"> * ç”¨æˆ·æ¥å£ç›¸å…³è¯·æ±‚æ¨¡å—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">'@/utils/request'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* ç™»å½•</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span> (<span class="params">user</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="comment">// method ç”¨æ¥æŒ‡å®šè¯·æ±‚æ–¹æ³•ï¼Œè¿™æ˜¯ axios çš„å›ºå®š APIï¼Œä¸èƒ½çå†™</span></span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="comment">// url ç”¨æ¥æŒ‡å®šè¯·æ±‚è·¯å¾„</span></span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/authorizations'</span>,</span><br><span class="line">    <span class="comment">// data æ˜¯ axios è¯·æ±‚è¦æ±‚çš„å­—æ®µåï¼Œç”¨æ¥ä¼ é€’è¯·æ±‚ä½“æ•°æ®çš„</span></span><br><span class="line">    <span class="attr">data</span>: user</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…³æ³¨ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">followUser</span> (<span class="params">userId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/followings'</span>,</span><br><span class="line">    <span class="attr">data</span>: {</span><br><span class="line">      <span class="attr">target</span>: userId <span class="comment">// ç”¨æˆ·id</span></span><br><span class="line">    }</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å–æ¶ˆå…³æ³¨ç”¨æˆ·</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">unFollowUser</span> (<span class="params">userId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/followings/'</span> + userId</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·è‡ªå·±ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getSelf</span> (<span class="params">userId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–ç”¨æˆ·ä¸ªäººèµ„æ–™</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getProfile</span> (<span class="params">userId</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/profile'</span></span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°ç”¨æˆ·å¤´åƒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateUserPhoto</span> (<span class="params">data</span>) </span>{</span><br><span class="line">  <span class="keyword">return</span> request({</span><br><span class="line">    <span class="attr">method</span>: <span class="string">'PATCH'</span>,</span><br><span class="line">    <span class="attr">url</span>: <span class="string">'/app/v1_0/user/photo'</span>,</span><br><span class="line">    data</span><br><span class="line">  })</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p>2ã€åœ¨ <code>views/user/index.vue</code> ç»„ä»¶ä¸­ä¿å­˜æäº¤</p>
<figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-nav-bar</span></span></span><br><span class="line"><span class="tag">      <span class="attr">title</span>=<span class="string">"ä¸ªäººä¿¡æ¯"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">left-arrow</span></span></span><br><span class="line"><span class="tag">      <span class="attr">right-text</span>=<span class="string">"ä¿å­˜"</span></span></span><br><span class="line"><span class="tag">      +</span></span><br><span class="line"><span class="tag">      @<span class="attr">click-right</span>=<span class="string">"onSave"</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"å¤´åƒ"</span> <span class="attr">is-link</span> @<span class="attr">click</span>=<span class="string">"onChangePhoto"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">van-image</span> <span class="attr">round</span> <span class="attr">width</span>=<span class="string">"30"</span> <span class="attr">height</span>=<span class="string">"30"</span> <span class="attr">:src</span>=<span class="string">"user.photo"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">van-cell</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ˜µç§°"</span> <span class="attr">:value</span>=<span class="string">"user.name"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"æ€§åˆ«"</span> <span class="attr">:value</span>=<span class="string">"user.gender === 0 ? 'ç”·' : 'å¥³'"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">van-cell</span> <span class="attr">title</span>=<span class="string">"ç”Ÿæ—¥"</span> <span class="attr">:value</span>=<span class="string">"user.birthday"</span> <span class="attr">is-link</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-cell-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      è¡¨å•å…ƒç´ çš„ hidden è¡¨ç¤ºéšè—è¿™ä¸ªè¡¨å•å…ƒç´ </span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">hidden</span> <span class="attr">ref</span>=<span class="string">"file"</span> @<span class="attr">change</span>=<span class="string">"onFileChange"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  + <span class="keyword">import</span> { getProfile, updateUserPhoto } <span class="keyword">from</span> <span class="string">'@/api/user'</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> {</span></span><br><span class="line"><span class="javascript">    <span class="attr">name</span>: <span class="string">'UserIndex'</span>,</span></span><br><span class="line"><span class="javascript">    data () {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> {</span></span><br><span class="line"><span class="javascript">        <span class="attr">user</span>: {}</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    created () {</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.loadUserProfile()</span></span><br><span class="line"><span class="javascript">    },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: {</span></span><br><span class="line"><span class="javascript">      <span class="keyword">async</span> loadUserProfile () {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> { data } = <span class="keyword">await</span> getProfile()</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.user = data.data</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      onChangePhoto () {</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$refs.file.click()</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      onFileChange () {</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> fileObj = <span class="built_in">this</span>.$refs.file.files[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (fileObj) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.user.photo = <span class="built_in">window</span>.URL.createObjectURL(fileObj)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      },</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  +    <span class="keyword">async</span> onSave () {</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¦‚æœ Content-Type è¦æ±‚æ˜¯  application/json  ï¼Œåˆ™ data ä¼ æ™®é€šå¯¹è±¡ {}</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// å¦‚æœ Content-Type è¦æ±‚æ˜¯  multipart/form-data ï¼Œåˆ™ data ä¼  FormData å¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// çºµè§‚æ‰€æœ‰æ•°æ®æ¥å£ï¼Œä½ ä¼šå‘ç°å¤§å¤šæ•°çš„æ¥å£éƒ½è¦æ±‚ Content-Type è¦æ±‚æ˜¯  application/json</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// ä¸€èˆ¬åªæœ‰æ¶‰åŠåˆ°æ–‡ä»¶ä¸Šä¼ çš„æ•°æ®æ¥å£æ‰è¦æ±‚Content-Type è¦æ±‚æ˜¯  multipart/form-data</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// è¿™ä¸ªæ—¶å€™ä¼ é€’ä¸€ä¸ª FormData å¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$toast.loading({</span></span><br><span class="line"><span class="javascript">          <span class="attr">duration</span>: <span class="number">0</span>, <span class="comment">// æŒç»­å±•ç¤º toast</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">forbidClick</span>: <span class="literal">true</span>, <span class="comment">// ç¦ç”¨èƒŒæ™¯ç‚¹å‡»</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">loadingType</span>: <span class="string">'spinner'</span>,</span></span><br><span class="line"><span class="javascript">          <span class="attr">message</span>: <span class="string">'ä¿å­˜ä¸­'</span></span></span><br><span class="line"><span class="javascript">        })</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">try</span> {</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData()</span></span><br><span class="line"><span class="javascript">          <span class="comment">// formData.append('åå­—', æ•°æ®)</span></span></span><br><span class="line"><span class="javascript">          formData.append(<span class="string">'photo'</span>, <span class="built_in">this</span>.$refs.file.files[<span class="number">0</span>])</span></span><br><span class="line"><span class="javascript">          <span class="keyword">await</span> updateUserPhoto(formData)</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.$toast.success(<span class="string">'ä¿å­˜æˆåŠŸ'</span>)</span></span><br><span class="line"><span class="javascript">        } <span class="keyword">catch</span> (err) {</span></span><br><span class="line"><span class="javascript">          <span class="built_in">console</span>.log(err)</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.$toast.fail(<span class="string">'ä¿å­˜å¤±è´¥'</span>)</span></span><br><span class="line"><span class="javascript">        }</span></span><br><span class="line"><span class="javascript">      }</span></span><br><span class="line"><span class="javascript">    }</span></span><br><span class="line"><span class="javascript">  }</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>










</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">è·¯å°é›¨</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://www.abigailcui.com/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/">https://www.abigailcui.com/2021/02/21/vue%E5%BA%94%E7%94%A82-vue%E7%A7%BB%E5%8A%A8%E7%AB%AF-%E4%BB%BF%E5%A4%B4%E6%9D%A1demo/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://www.abigailcui.com" target="_blank">Abigail Cuiçš„å°ç«™</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/02/22/vue%E5%BA%94%E7%94%A83%E2%80%94HR-saas%E4%B8%AD%E5%8F%B0%E7%B3%BB%E7%BB%9F/"><img class="prev-cover" src="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">vueåº”ç”¨3â€”HR-saasä¸­å°ç³»ç»Ÿ</div></div></a></div><div class="next-post pull-right"><a href="/2021/02/20/vue%E5%BA%94%E7%94%A81-%E7%94%A8vant%E5%92%8Cnode%E5%AE%9E%E7%8E%B0%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E6%A1%88%E4%BE%8B/"><img class="next-cover" src="https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">vueåº”ç”¨1â€”ç”¨vantå’Œnodeå®ç°ç½‘æ˜“äº‘éŸ³ä¹æ¡ˆä¾‹</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">1.</span> <span class="toc-text">ä¸€ã€é¡¹ç›®åˆå§‹åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Vue-CLI-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.1.</span> <span class="toc-text">ä½¿ç”¨ Vue CLI åˆ›å»ºé¡¹ç›®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%85%A5-Git-%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86"><span class="toc-number">1.2.</span> <span class="toc-text">åŠ å…¥ Git ç‰ˆæœ¬ç®¡ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E5%88%9D%E5%A7%8B%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.3.</span> <span class="toc-text">è°ƒæ•´åˆå§‹ç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5%E5%9B%BE%E6%A0%87%E7%B4%A0%E6%9D%90"><span class="toc-number">1.4.</span> <span class="toc-text">å¯¼å…¥å›¾æ ‡ç´ æ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E5%85%A5-Vant-%E7%BB%84%E4%BB%B6%E5%BA%93"><span class="toc-number">1.5.</span> <span class="toc-text">å¼•å…¥ Vant ç»„ä»¶åº“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%BB%E5%8A%A8%E7%AB%AF-REM-%E9%80%82%E9%85%8D"><span class="toc-number">1.6.</span> <span class="toc-text">ç§»åŠ¨ç«¯ REM é€‚é…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-postcssrc-js-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.7.</span> <span class="toc-text">å…³äº .postcssrc.js é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82%E6%A8%A1%E5%9D%97"><span class="toc-number">1.8.</span> <span class="toc-text">å°è£…è¯·æ±‚æ¨¡å—</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C"><span class="toc-number">2.</span> <span class="toc-text">äºŒã€ç™»å½•æ³¨å†Œ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-number">2.1.</span> <span class="toc-text">å‡†å¤‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1"><span class="toc-number">2.1.1.</span> <span class="toc-text">åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B1%80%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.2.</span> <span class="toc-text">å¸ƒå±€ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B1%80%E6%A0%B7%E5%BC%8F"><span class="toc-number">2.1.3.</span> <span class="toc-text">å¸ƒå±€æ ·å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%9F%BA%E6%9C%AC%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-number">2.2.</span> <span class="toc-text">å®ç°åŸºæœ¬ç™»å½•åŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81%E6%8F%90%E7%A4%BA"><span class="toc-number">2.3.</span> <span class="toc-text">ç™»å½•çŠ¶æ€æç¤º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81"><span class="toc-number">2.4.</span> <span class="toc-text">è¡¨å•éªŒè¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E7%A0%81%E5%A4%84%E7%90%86"><span class="toc-number">2.5.</span> <span class="toc-text">éªŒè¯ç å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E6%89%8B%E6%9C%BA%E5%8F%B7"><span class="toc-number">2.5.1.</span> <span class="toc-text">éªŒè¯æ‰‹æœºå·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%80%92%E8%AE%A1%E6%97%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">2.5.2.</span> <span class="toc-text">ä½¿ç”¨å€’è®¡æ—¶ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">2.5.3.</span> <span class="toc-text">å‘é€éªŒè¯ç </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E7%94%A8%E6%88%B7-Token"><span class="toc-number">2.6.</span> <span class="toc-text">å¤„ç†ç”¨æˆ· Token</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E5%B0%81%E8%A3%85%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%9D%97"><span class="toc-number">2.7.</span> <span class="toc-text">ä¼˜åŒ–å°è£…æœ¬åœ°å­˜å‚¨æ“ä½œæ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-Token-%E8%BF%87%E6%9C%9F%E9%97%AE%E9%A2%98"><span class="toc-number">2.8.</span> <span class="toc-text">å…³äº Token è¿‡æœŸé—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83"><span class="toc-number">3.</span> <span class="toc-text">ä¸‰ã€ä¸ªäººä¸­å¿ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#TabBar-%E5%A4%84%E7%90%86"><span class="toc-number">3.1.</span> <span class="toc-text">TabBar å¤„ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80"><span class="toc-number">3.2.</span> <span class="toc-text">é¡µé¢å¸ƒå±€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AA%E7%99%BB%E5%BD%95%E5%A4%B4%E9%83%A8%E7%8A%B6%E6%80%81"><span class="toc-number">3.2.1.</span> <span class="toc-text">æœªç™»å½•å¤´éƒ¨çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%B2%E7%99%BB%E5%BD%95%E5%A4%B4%E9%83%A8"><span class="toc-number">3.2.2.</span> <span class="toc-text">å·²ç™»å½•å¤´éƒ¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%AB%E6%A0%BC%E5%AF%BC%E8%88%AA"><span class="toc-number">3.2.3.</span> <span class="toc-text">å®«æ ¼å¯¼èˆª</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E6%A0%BC%E5%AF%BC%E8%88%AA"><span class="toc-number">3.2.4.</span> <span class="toc-text">å•å…ƒæ ¼å¯¼èˆª</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%B7%B2%E7%99%BB%E5%BD%95%E5%92%8C%E6%9C%AA%E7%99%BB%E5%BD%95%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA"><span class="toc-number">3.3.</span> <span class="toc-text">å¤„ç†å·²ç™»å½•å’Œæœªç™»å½•çš„é¡µé¢å±•ç¤º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E9%80%80%E5%87%BA"><span class="toc-number">3.4.</span> <span class="toc-text">ç”¨æˆ·é€€å‡º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E7%99%BB%E5%BD%95%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">3.5.</span> <span class="toc-text">å±•ç¤ºç™»å½•ç”¨æˆ·ä¿¡æ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E8%AE%BE%E7%BD%AE-Token"><span class="toc-number">3.6.</span> <span class="toc-text">ä¼˜åŒ–è®¾ç½® Token</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%A6%96%E9%A1%B5%E2%80%94%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8"><span class="toc-number">4.</span> <span class="toc-text">å››ã€é¦–é¡µâ€”æ–‡ç« åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80-1"><span class="toc-number">4.1.</span> <span class="toc-text">é¡µé¢å¸ƒå±€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B4%E9%83%A8%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="toc-number">4.1.1.</span> <span class="toc-text">å¤´éƒ¨å¯¼èˆªæ </span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8"><span class="toc-number">4.2.</span> <span class="toc-text">é¢‘é“åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Tab-%E6%A0%87%E7%AD%BE%E9%A1%B5%E7%BB%84%E4%BB%B6"><span class="toc-number">4.2.1.</span> <span class="toc-text">ä½¿ç”¨ Tab æ ‡ç­¾é¡µç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E8%B0%83%E6%95%B4"><span class="toc-number">4.2.2.</span> <span class="toc-text">æ ·å¼è°ƒæ•´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8"><span class="toc-number">4.2.3.</span> <span class="toc-text">å±•ç¤ºé¢‘é“åˆ—è¡¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8"><span class="toc-number">4.3.</span> <span class="toc-text">æ–‡ç« åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90"><span class="toc-number">4.3.1.</span> <span class="toc-text">æ€è·¯åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-List-%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">4.3.2.</span> <span class="toc-text">ä½¿ç”¨ List åˆ—è¡¨ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A9%E5%88%97%E8%A1%A8%E5%9B%BA%E5%AE%9A%E5%AE%9A%E4%BD%8D"><span class="toc-number">4.3.3.</span> <span class="toc-text">è®©åˆ—è¡¨å›ºå®šå®šä½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BD%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">4.3.4.</span> <span class="toc-text">åŠ è½½æ–‡ç« åˆ—è¡¨æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="toc-number">4.3.5.</span> <span class="toc-text">ä¸‹æ‹‰åˆ·æ–°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8%E9%A1%B9"><span class="toc-number">4.4.</span> <span class="toc-text">æ–‡ç« åˆ—è¡¨é¡¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E7%BB%84%E4%BB%B6"><span class="toc-number">4.4.1.</span> <span class="toc-text">å‡†å¤‡ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E5%88%97%E8%A1%A8%E9%A1%B9%E5%86%85%E5%AE%B9"><span class="toc-number">4.4.2.</span> <span class="toc-text">å±•ç¤ºåˆ—è¡¨é¡¹å†…å®¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E8%B0%83%E6%95%B4-1"><span class="toc-number">4.4.3.</span> <span class="toc-text">æ ·å¼è°ƒæ•´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E7%AC%AC%E4%B8%89%E6%96%B9%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90403%E9%97%AE%E9%A2%98"><span class="toc-number">4.4.4.</span> <span class="toc-text">å…³äºç¬¬ä¸‰æ–¹å›¾ç‰‡èµ„æº403é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E7%9B%B8%E5%AF%B9%E6%97%B6%E9%97%B4"><span class="toc-number">4.4.5.</span> <span class="toc-text">å¤„ç†ç›¸å¯¹æ—¶é—´</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%A6%96%E9%A1%B5%E2%80%94%E9%A2%91%E9%81%93%E7%BC%96%E8%BE%91"><span class="toc-number">5.</span> <span class="toc-text">äº”ã€é¦–é¡µâ€”é¢‘é“ç¼–è¾‘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E9%A1%B5%E9%9D%A2%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-number">5.1.</span> <span class="toc-text">å¤„ç†é¡µé¢å¼¹å‡ºå±‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A2%91%E9%81%93%E7%BC%96%E8%BE%91%E7%BB%84%E4%BB%B6"><span class="toc-number">5.2.</span> <span class="toc-text">åˆ›å»ºé¢‘é“ç¼–è¾‘ç»„ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80-2"><span class="toc-number">5.3.</span> <span class="toc-text">é¡µé¢å¸ƒå±€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E6%88%91%E7%9A%84%E9%A2%91%E9%81%93"><span class="toc-number">5.4.</span> <span class="toc-text">å±•ç¤ºæˆ‘çš„é¢‘é“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E6%8E%A8%E8%8D%90%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8"><span class="toc-number">5.5.</span> <span class="toc-text">å±•ç¤ºæ¨èé¢‘é“åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E9%A2%91%E9%81%93"><span class="toc-number">5.5.1.</span> <span class="toc-text">è·å–æ‰€æœ‰é¢‘é“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%B1%95%E7%A4%BA%E6%8E%A8%E8%8D%90%E9%A2%91%E9%81%93"><span class="toc-number">5.5.2.</span> <span class="toc-text">å¤„ç†å±•ç¤ºæ¨èé¢‘é“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E9%A2%91%E9%81%93"><span class="toc-number">5.6.</span> <span class="toc-text">æ·»åŠ é¢‘é“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E9%A2%91%E9%81%93"><span class="toc-number">5.7.</span> <span class="toc-text">ç¼–è¾‘é¢‘é“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E7%BC%96%E8%BE%91%E7%8A%B6%E6%80%81"><span class="toc-number">5.7.1.</span> <span class="toc-text">å¤„ç†ç¼–è¾‘çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E9%A2%91%E9%81%93"><span class="toc-number">5.7.2.</span> <span class="toc-text">åˆ‡æ¢é¢‘é“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A9%E6%BF%80%E6%B4%BB%E9%A2%91%E9%81%93%E9%AB%98%E4%BA%AE"><span class="toc-number">5.7.3.</span> <span class="toc-text">è®©æ¿€æ´»é¢‘é“é«˜äº®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E9%A2%91%E9%81%93"><span class="toc-number">5.7.4.</span> <span class="toc-text">åˆ é™¤é¢‘é“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%91%E9%81%93%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">5.8.</span> <span class="toc-text">é¢‘é“æ•°æ®æŒä¹…åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E5%88%86%E6%9E%90"><span class="toc-number">5.8.1.</span> <span class="toc-text">ä¸šåŠ¡åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E9%A2%91%E9%81%93-1"><span class="toc-number">5.8.2.</span> <span class="toc-text">æ·»åŠ é¢‘é“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E9%A2%91%E9%81%93-1"><span class="toc-number">5.8.3.</span> <span class="toc-text">åˆ é™¤é¢‘é“</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E7%A1%AE%E7%9A%84%E8%8E%B7%E5%8F%96%E9%A6%96%E9%A1%B5%E9%A2%91%E9%81%93%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">5.9.</span> <span class="toc-text">æ­£ç¡®çš„è·å–é¦–é¡µé¢‘é“åˆ—è¡¨æ•°æ®</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2"><span class="toc-number">6.</span> <span class="toc-text">å…­ã€æ–‡ç« æœç´¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-1"><span class="toc-number">6.1.</span> <span class="toc-text">åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80-3"><span class="toc-number">6.2.</span> <span class="toc-text">é¡µé¢å¸ƒå±€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E9%A1%B5%E9%9D%A2%E6%98%BE%E7%A4%BA%E7%8A%B6%E6%80%81"><span class="toc-number">6.3.</span> <span class="toc-text">å¤„ç†é¡µé¢æ˜¾ç¤ºçŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E8%81%94%E6%83%B3%E5%BB%BA%E8%AE%AE"><span class="toc-number">6.4.</span> <span class="toc-text">æœç´¢è”æƒ³å»ºè®®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E5%8A%9F%E8%83%BD"><span class="toc-number">6.4.1.</span> <span class="toc-text">åŸºæœ¬åŠŸèƒ½</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E6%8A%96%E4%BC%98%E5%8C%96"><span class="toc-number">6.4.2.</span> <span class="toc-text">é˜²æŠ–ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%85%B3%E9%94%AE%E5%AD%97%E9%AB%98%E4%BA%AE"><span class="toc-number">6.4.3.</span> <span class="toc-text">æœç´¢å…³é”®å­—é«˜äº®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C"><span class="toc-number">6.5.</span> <span class="toc-text">æœç´¢ç»“æœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="toc-number">6.6.</span> <span class="toc-text">æœç´¢å†å²è®°å½•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="toc-number">6.6.1.</span> <span class="toc-text">æ·»åŠ å†å²è®°å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="toc-number">6.6.2.</span> <span class="toc-text">å±•ç¤ºå†å²è®°å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="toc-number">6.6.3.</span> <span class="toc-text">åˆ é™¤å†å²è®°å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">6.6.4.</span> <span class="toc-text">æ•°æ®æŒä¹…åŒ–</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85"><span class="toc-number">7.</span> <span class="toc-text">ä¸ƒã€æ–‡ç« è¯¦æƒ…</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-2"><span class="toc-number">7.1.</span> <span class="toc-text">åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80-4"><span class="toc-number">7.2.</span> <span class="toc-text">é¡µé¢å¸ƒå±€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E5%90%8E%E7%AB%AF%E8%BF%94%E5%9B%9E%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E5%A4%A7%E6%95%B0%E5%AD%97%E9%97%AE%E9%A2%98"><span class="toc-number">7.3.</span> <span class="toc-text">å…³äºåç«¯è¿”å›æ•°æ®ä¸­çš„å¤§æ•°å­—é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85"><span class="toc-number">7.4.</span> <span class="toc-text">å±•ç¤ºæ–‡ç« è¯¦æƒ…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%86%85%E5%AE%B9%E5%8A%A0%E8%BD%BD%E7%8A%B6%E6%80%81"><span class="toc-number">7.5.</span> <span class="toc-text">å¤„ç†å†…å®¹åŠ è½½çŠ¶æ€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E6%96%87%E7%AB%A0%E6%AD%A3%E6%96%87%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="toc-number">7.6.</span> <span class="toc-text">å…³äºæ–‡ç« æ­£æ–‡çš„æ ·å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E7%82%B9%E5%87%BB%E9%A2%84%E8%A7%88"><span class="toc-number">7.7.</span> <span class="toc-text">å›¾ç‰‡ç‚¹å‡»é¢„è§ˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E6%B3%A8%E7%94%A8%E6%88%B7"><span class="toc-number">7.8.</span> <span class="toc-text">å…³æ³¨ç”¨æˆ·</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%A4%84%E7%90%86"><span class="toc-number">7.8.1.</span> <span class="toc-text">è§†å›¾å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%A4%84%E7%90%86"><span class="toc-number">7.8.2.</span> <span class="toc-text">åŠŸèƒ½å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#loading-%E6%95%88%E6%9E%9C"><span class="toc-number">7.8.3.</span> <span class="toc-text">loading æ•ˆæœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85"><span class="toc-number">7.8.4.</span> <span class="toc-text">ç»„ä»¶å°è£…</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%94%B6%E8%97%8F"><span class="toc-number">7.9.</span> <span class="toc-text">æ–‡ç« æ”¶è—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E7%BB%84%E4%BB%B6"><span class="toc-number">7.9.1.</span> <span class="toc-text">å°è£…ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%A7%86%E5%9B%BE"><span class="toc-number">7.9.2.</span> <span class="toc-text">å¤„ç†è§†å›¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%A4%84%E7%90%86-1"><span class="toc-number">7.9.3.</span> <span class="toc-text">åŠŸèƒ½å¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%82%B9%E8%B5%9E"><span class="toc-number">7.10.</span> <span class="toc-text">æ–‡ç« ç‚¹èµ</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%96%87%E7%AB%A0%E8%AF%84%E8%AE%BA"><span class="toc-number">8.</span> <span class="toc-text">å…«ã€æ–‡ç« è¯„è®º</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E6%96%87%E7%AB%A0%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8"><span class="toc-number">8.1.</span> <span class="toc-text">å±•ç¤ºæ–‡ç« è¯„è®ºåˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E7%BB%84%E4%BB%B6-1"><span class="toc-number">8.1.1.</span> <span class="toc-text">å‡†å¤‡ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%B9%B6%E5%B1%95%E7%A4%BA"><span class="toc-number">8.1.2.</span> <span class="toc-text">è·å–æ•°æ®å¹¶å±•ç¤º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E6%96%87%E7%AB%A0%E8%AF%84%E8%AE%BA%E6%80%BB%E6%95%B0%E9%87%8F"><span class="toc-number">8.1.3.</span> <span class="toc-text">å±•ç¤ºæ–‡ç« è¯„è®ºæ€»æ•°é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E8%AF%84%E8%AE%BA%E9%A1%B9"><span class="toc-number">8.1.4.</span> <span class="toc-text">æ–‡ç« è¯„è®ºé¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA%E7%82%B9%E8%B5%9E"><span class="toc-number">8.2.</span> <span class="toc-text">è¯„è®ºç‚¹èµ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0%E8%AF%84%E8%AE%BA"><span class="toc-number">8.3.</span> <span class="toc-text">å‘å¸ƒæ–‡ç« è¯„è®º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-number">8.3.1.</span> <span class="toc-text">å‡†å¤‡å¼¹å‡ºå±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E7%BB%84%E4%BB%B6-1"><span class="toc-number">8.3.2.</span> <span class="toc-text">å°è£…ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%8F%91%E5%B8%83"><span class="toc-number">8.3.3.</span> <span class="toc-text">è¯·æ±‚å‘å¸ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E6%88%90%E5%8A%9F%E5%A4%84%E7%90%86"><span class="toc-number">8.3.4.</span> <span class="toc-text">å‘å¸ƒæˆåŠŸå¤„ç†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA%E5%9B%9E%E5%A4%8D"><span class="toc-number">8.4.</span> <span class="toc-text">è¯„è®ºå›å¤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%9B%9E%E5%A4%8D%E5%BC%B9%E5%B1%82"><span class="toc-number">8.4.1.</span> <span class="toc-text">å‡†å¤‡å›å¤å¼¹å±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%82%B9%E5%87%BB%E5%9B%9E%E5%A4%8D%E6%98%BE%E7%A4%BA%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="toc-number">8.4.2.</span> <span class="toc-text">ç‚¹å‡»å›å¤æ˜¾ç¤ºå¼¹å‡ºå±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%86%85%E5%AE%B9%E7%BB%84%E4%BB%B6"><span class="toc-number">8.4.3.</span> <span class="toc-text">å°è£…å†…å®¹ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E5%BD%93%E5%89%8D%E7%82%B9%E5%87%BB%E5%9B%9E%E5%A4%8D%E7%9A%84%E8%AF%84%E8%AE%BA%E9%A1%B9"><span class="toc-number">8.4.4.</span> <span class="toc-text">ä¼ é€’å½“å‰ç‚¹å‡»å›å¤çš„è¯„è®ºé¡¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%A4%B4%E9%83%A8"><span class="toc-number">8.4.5.</span> <span class="toc-text">å¤„ç†å¤´éƒ¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E5%BD%93%E5%89%8D%E8%AF%84%E8%AE%BA%E9%A1%B9"><span class="toc-number">8.4.6.</span> <span class="toc-text">å¤„ç†å½“å‰è¯„è®ºé¡¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E8%AF%84%E8%AE%BA%E5%9B%9E%E5%A4%8D%E5%88%97%E8%A1%A8"><span class="toc-number">8.4.7.</span> <span class="toc-text">å±•ç¤ºè¯„è®ºå›å¤åˆ—è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%BC%B9%E5%B1%82%E4%B8%AD%E7%BB%84%E4%BB%B6%E5%86%85%E5%AE%B9%E4%B8%8D%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98"><span class="toc-number">8.4.8.</span> <span class="toc-text">è§£å†³å¼¹å±‚ä¸­ç»„ä»¶å†…å®¹ä¸æ›´æ–°é—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%91%E5%B8%83%E5%9B%9E%E5%A4%8D"><span class="toc-number">8.4.9.</span> <span class="toc-text">å‘å¸ƒå›å¤</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E7%94%A8%E6%88%B7%E9%A1%B5%E9%9D%A2"><span class="toc-number">9.</span> <span class="toc-text">ä¹ã€ç”¨æˆ·é¡µé¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-3"><span class="toc-number">9.1.</span> <span class="toc-text">åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80-5"><span class="toc-number">9.2.</span> <span class="toc-text">é¡µé¢å¸ƒå±€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">9.3.</span> <span class="toc-text">å±•ç¤ºç”¨æˆ·ä¿¡æ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%85%B3%E6%B3%A8"><span class="toc-number">9.4.</span> <span class="toc-text">ç”¨æˆ·å…³æ³¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E7%94%A8%E6%88%B7%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8"><span class="toc-number">9.5.</span> <span class="toc-text">å±•ç¤ºç”¨æˆ·æ–‡ç« åˆ—è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">9.5.1.</span> <span class="toc-text">åˆ—è¡¨ç»„ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6%E4%BD%BF%E7%94%A8"><span class="toc-number">9.5.2.</span> <span class="toc-text">åˆ†æåˆ—è¡¨ç»„ä»¶ä½¿ç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E6%96%87%E7%AB%A0%E5%88%97%E8%A1%A8"><span class="toc-number">9.5.3.</span> <span class="toc-text">å±•ç¤ºæ–‡ç« åˆ—è¡¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E7%BC%96%E8%BE%91%E7%94%A8%E6%88%B7%E8%B5%84%E6%96%99"><span class="toc-number">10.</span> <span class="toc-text">åã€ç¼–è¾‘ç”¨æˆ·èµ„æ–™</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%BB%84%E4%BB%B6%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1-4"><span class="toc-number">10.1.</span> <span class="toc-text">åˆ›å»ºç»„ä»¶å¹¶é…ç½®è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80-6"><span class="toc-number">10.2.</span> <span class="toc-text">é¡µé¢å¸ƒå±€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E7%A4%BA%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF-1"><span class="toc-number">10.3.</span> <span class="toc-text">å±•ç¤ºç”¨æˆ·ä¿¡æ¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%98%B5%E7%A7%B0"><span class="toc-number">10.4.</span> <span class="toc-text">ä¿®æ”¹æ˜µç§°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%80%A7%E5%88%AB"><span class="toc-number">10.5.</span> <span class="toc-text">ä¿®æ”¹æ€§åˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%9F%E6%97%A5"><span class="toc-number">10.6.</span> <span class="toc-text">ä¿®æ”¹ç”Ÿæ—¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%A4%B4%E5%83%8F"><span class="toc-number">10.7.</span> <span class="toc-text">ä¿®æ”¹å¤´åƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E9%A2%84%E8%A7%88"><span class="toc-number">10.7.1.</span> <span class="toc-text">å›¾ç‰‡ä¸Šä¼ é¢„è§ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%B4%E5%83%8F%E8%A3%81%E5%88%87"><span class="toc-number">10.7.2.</span> <span class="toc-text">å¤´åƒè£åˆ‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E5%AD%98%E6%9B%B4%E6%96%B0"><span class="toc-number">10.7.3.</span> <span class="toc-text">ä¿å­˜æ›´æ–°</span></a></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('https://gitee.com/abigail110/blogimage/raw/master/img/index3.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021  <i id="heartbeat" class="fa fas fa-heartbeat"></i> è·¯å°é›¨</div><div class="footer_custom_text">plain living and high thinking</div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="æ”¾å¤§å­—ä½“"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="ç¼©å°å­—ä½“"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><canvas id="universe"></canvas><div class="aplayer no-destroy" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="150" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="true"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.removeEventListener('scroll', window.tocScrollFn)
  window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>function history_calendar_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-history"><div class="card-content"><div class="item-headline"><i class="fas fa-clock fa-spin"></i><span>é‚£å¹´ä»Šæ—¥</span></div><div id="history-baidu" style="height: 100px;overflow: hidden"><div class="history_swiper-container" id="history-container" style="width: 100%;height: 100%"><div class="swiper-wrapper" id="history_container_wrapper" style="height:20px"></div></div></div></div>';
                console.log('å·²æŒ‚è½½history_calendar')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // æ— æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // æœ‰æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            history_calendar_injector_config()
        } </script><script data-pjax  src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-card-history/baiduhistory/js/main.js"></script><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img id="card-clock-loading" src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-clock/clock/images/weather/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading" class="entered loading"></div></div></div></div></div>';
                console.log('å·²æŒ‚è½½electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // æ— æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // æœ‰æŠ¥é”™ï¼Œä½†ä¸å½±å“ä½¿ç”¨(æ”¯æŒpjaxè·³è½¬)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='/'|| '/' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body></html>